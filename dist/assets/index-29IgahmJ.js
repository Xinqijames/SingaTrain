var Vj=Object.defineProperty;var Bj=(e,t,n)=>t in e?Vj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cn=(e,t,n)=>Bj(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qI(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ur={},Iv=[],Zu=()=>{},DV=()=>!1,uT=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),KI=e=>e.startsWith("onUpdate:"),wo=Object.assign,XI=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Fj=Object.prototype.hasOwnProperty,Cr=(e,t)=>Fj.call(e,t),Qn=Array.isArray,Av=e=>v_(e)==="[object Map]",dT=e=>v_(e)==="[object Set]",m3=e=>v_(e)==="[object Date]",zj=e=>v_(e)==="[object RegExp]",bi=e=>typeof e=="function",ts=e=>typeof e=="string",pu=e=>typeof e=="symbol",Mr=e=>e!==null&&typeof e=="object",LV=e=>(Mr(e)||bi(e))&&bi(e.then)&&bi(e.catch),RV=Object.prototype.toString,v_=e=>RV.call(e),Nj=e=>v_(e).slice(8,-1),OV=e=>v_(e)==="[object Object]",YI=e=>ts(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,t0=qI(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hT=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},$j=/-\w/g,cl=hT(e=>e.replace($j,t=>t.slice(1).toUpperCase())),Uj=/\B([A-Z])/g,rg=hT(e=>e.replace(Uj,"-$1").toLowerCase()),md=hT(e=>e.charAt(0).toUpperCase()+e.slice(1)),BE=hT(e=>e?`on${md(e)}`:""),zf=(e,t)=>!Object.is(e,t),Pv=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},VV=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},J1=e=>{const t=parseFloat(e);return isNaN(t)?e:t},jj=e=>{const t=ts(e)?Number(e):NaN;return isNaN(t)?e:t};let p3;const fT=()=>p3||(p3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yt(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ts(i)?qj(i):Yt(i);if(r)for(const a in r)t[a]=r[a]}return t}else if(ts(e)||Mr(e))return e}const Wj=/;(?![^(]*\))/g,Hj=/:([^]+)/,Gj=/\/\*[^]*?\*\//g;function qj(e){const t={};return e.replace(Gj,"").split(Wj).forEach(n=>{if(n){const i=n.split(Hj);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Tt(e){let t="";if(ts(e))t=e;else if(Qn(e))for(let n=0;n<e.length;n++){const i=Tt(e[n]);i&&(t+=i+" ")}else if(Mr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Kj(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ts(t)&&(e.class=Tt(t)),n&&(e.style=Yt(n)),e}const Xj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yj=qI(Xj);function BV(e){return!!e||e===""}function Zj(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=mT(e[i],t[i]);return n}function mT(e,t){if(e===t)return!0;let n=m3(e),i=m3(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=pu(e),i=pu(t),n||i)return e===t;if(n=Qn(e),i=Qn(t),n||i)return n&&i?Zj(e,t):!1;if(n=Mr(e),i=Mr(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const l in e){const h=e.hasOwnProperty(l),s=t.hasOwnProperty(l);if(h&&!s||!h&&s||!mT(e[l],t[l]))return!1}}return String(e)===String(t)}function Jj(e,t){return e.findIndex(n=>mT(n,t))}const FV=e=>!!(e&&e.__v_isRef===!0),tn=e=>ts(e)?e:e==null?"":Qn(e)||Mr(e)&&(e.toString===RV||!bi(e.toString))?FV(e)?tn(e.value):JSON.stringify(e,zV,2):String(e),zV=(e,t)=>FV(t)?zV(e,t.value):Av(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],a)=>(n[FE(i,a)+" =>"]=r,n),{})}:dT(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>FE(n))}:pu(t)?FE(t):Mr(t)&&!Qn(t)&&!OV(t)?String(t):t,FE=(e,t="")=>{var n;return pu(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Da;class NV{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Da,!t&&Da&&(this.index=(Da.scopes||(Da.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Da;try{return Da=this,t()}finally{Da=n}}}on(){++this._on===1&&(this.prevScope=Da,Da=this)}off(){this._on>0&&--this._on===0&&(Da=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function jv(e){return new NV(e)}function $V(){return Da}function lo(e,t=!1){Da&&Da.cleanups.push(e)}let Kr;const zE=new WeakSet;class UV{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Da&&Da.active&&Da.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,zE.has(this)&&(zE.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||WV(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,g3(this),HV(this);const t=Kr,n=hu;Kr=this,hu=!0;try{return this.fn()}finally{GV(this),Kr=t,hu=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)QI(t);this.deps=this.depsTail=void 0,g3(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?zE.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qC(this)&&this.run()}get dirty(){return qC(this)}}let jV=0,n0,i0;function WV(e,t=!1){if(e.flags|=8,t){e.next=i0,i0=e;return}e.next=n0,n0=e}function ZI(){jV++}function JI(){if(--jV>0)return;if(i0){let t=i0;for(i0=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;n0;){let t=n0;for(n0=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function HV(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function GV(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),QI(i),Qj(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function qC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(qV(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function qV(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===E0)||(e.globalVersion=E0,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!qC(e))))return;e.flags|=2;const t=e.dep,n=Kr,i=hu;Kr=e,hu=!0;try{HV(e);const r=e.fn(e._value);(t.version===0||zf(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Kr=n,hu=i,GV(e),e.flags&=-3}}function QI(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)QI(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Qj(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let hu=!0;const KV=[];function vh(){KV.push(hu),hu=!1}function _h(){const e=KV.pop();hu=e===void 0?!0:e}function g3(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Kr;Kr=void 0;try{t()}finally{Kr=n}}}let E0=0;class eW{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eA{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Kr||!hu||Kr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Kr)n=this.activeLink=new eW(Kr,this),Kr.deps?(n.prevDep=Kr.depsTail,Kr.depsTail.nextDep=n,Kr.depsTail=n):Kr.deps=Kr.depsTail=n,XV(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Kr.depsTail,n.nextDep=void 0,Kr.depsTail.nextDep=n,Kr.depsTail=n,Kr.deps===n&&(Kr.deps=i)}return n}trigger(t){this.version++,E0++,this.notify(t)}notify(t){ZI();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{JI()}}}function XV(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)XV(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Q1=new WeakMap,Ep=Symbol(""),KC=Symbol(""),C0=Symbol("");function Oa(e,t,n){if(hu&&Kr){let i=Q1.get(e);i||Q1.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new eA),r.map=i,r.key=n),r.track()}}function lh(e,t,n,i,r,a){const l=Q1.get(e);if(!l){E0++;return}const h=s=>{s&&s.trigger()};if(ZI(),t==="clear")l.forEach(h);else{const s=Qn(e),p=s&&YI(n);if(s&&n==="length"){const v=Number(i);l.forEach((x,T)=>{(T==="length"||T===C0||!pu(T)&&T>=v)&&h(x)})}else switch((n!==void 0||l.has(void 0))&&h(l.get(n)),p&&h(l.get(C0)),t){case"add":s?p&&h(l.get("length")):(h(l.get(Ep)),Av(e)&&h(l.get(KC)));break;case"delete":s||(h(l.get(Ep)),Av(e)&&h(l.get(KC)));break;case"set":Av(e)&&h(l.get(Ep));break}}JI()}function tW(e,t){const n=Q1.get(e);return n&&n.get(t)}function lv(e){const t=jn(e);return t===e?t:(Oa(t,"iterate",C0),zc(e)?t:t.map(oa))}function pT(e){return Oa(e=jn(e),"iterate",C0),e}const nW={__proto__:null,[Symbol.iterator](){return NE(this,Symbol.iterator,oa)},concat(...e){return lv(this).concat(...e.map(t=>Qn(t)?lv(t):t))},entries(){return NE(this,"entries",e=>(e[1]=oa(e[1]),e))},every(e,t){return Kd(this,"every",e,t,void 0,arguments)},filter(e,t){return Kd(this,"filter",e,t,n=>n.map(oa),arguments)},find(e,t){return Kd(this,"find",e,t,oa,arguments)},findIndex(e,t){return Kd(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Kd(this,"findLast",e,t,oa,arguments)},findLastIndex(e,t){return Kd(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Kd(this,"forEach",e,t,void 0,arguments)},includes(...e){return $E(this,"includes",e)},indexOf(...e){return $E(this,"indexOf",e)},join(e){return lv(this).join(e)},lastIndexOf(...e){return $E(this,"lastIndexOf",e)},map(e,t){return Kd(this,"map",e,t,void 0,arguments)},pop(){return Cy(this,"pop")},push(...e){return Cy(this,"push",e)},reduce(e,...t){return v3(this,"reduce",e,t)},reduceRight(e,...t){return v3(this,"reduceRight",e,t)},shift(){return Cy(this,"shift")},some(e,t){return Kd(this,"some",e,t,void 0,arguments)},splice(...e){return Cy(this,"splice",e)},toReversed(){return lv(this).toReversed()},toSorted(e){return lv(this).toSorted(e)},toSpliced(...e){return lv(this).toSpliced(...e)},unshift(...e){return Cy(this,"unshift",e)},values(){return NE(this,"values",oa)}};function NE(e,t,n){const i=pT(e),r=i[t]();return i!==e&&!zc(e)&&(r._next=r.next,r.next=()=>{const a=r._next();return a.done||(a.value=n(a.value)),a}),r}const iW=Array.prototype;function Kd(e,t,n,i,r,a){const l=pT(e),h=l!==e&&!zc(e),s=l[t];if(s!==iW[t]){const x=s.apply(e,a);return h?oa(x):x}let p=n;l!==e&&(h?p=function(x,T){return n.call(this,oa(x),T,e)}:n.length>2&&(p=function(x,T){return n.call(this,x,T,e)}));const v=s.call(l,p,i);return h&&r?r(v):v}function v3(e,t,n,i){const r=pT(e);let a=n;return r!==e&&(zc(e)?n.length>3&&(a=function(l,h,s){return n.call(this,l,h,s,e)}):a=function(l,h,s){return n.call(this,l,oa(h),s,e)}),r[t](a,...i)}function $E(e,t,n){const i=jn(e);Oa(i,"iterate",C0);const r=i[t](...n);return(r===-1||r===!1)&&gT(n[0])?(n[0]=jn(n[0]),i[t](...n)):r}function Cy(e,t,n=[]){vh(),ZI();const i=jn(e)[t].apply(e,n);return JI(),_h(),i}const rW=qI("__proto__,__v_isRef,__isVue"),YV=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(pu));function sW(e){pu(e)||(e=String(e));const t=jn(this);return Oa(t,"has",e),t.hasOwnProperty(e)}class ZV{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(r?a?pW:tB:a?eB:QV).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=Qn(t);if(!r){let s;if(l&&(s=nW[n]))return s;if(n==="hasOwnProperty")return sW}const h=Reflect.get(t,n,Bs(t)?t:i);if((pu(n)?YV.has(n):rW(n))||(r||Oa(t,"get",n),a))return h;if(Bs(h)){const s=l&&YI(n)?h:h.value;return r&&Mr(s)?$p(s):s}return Mr(h)?r?$p(h):oo(h):h}}class JV extends ZV{constructor(t=!1){super(!1,t)}set(t,n,i,r){let a=t[n];if(!this._isShallow){const s=Kf(a);if(!zc(i)&&!Kf(i)&&(a=jn(a),i=jn(i)),!Qn(t)&&Bs(a)&&!Bs(i))return s||(a.value=i),!0}const l=Qn(t)&&YI(n)?Number(n)<t.length:Cr(t,n),h=Reflect.set(t,n,i,Bs(t)?t:r);return t===jn(r)&&(l?zf(i,a)&&lh(t,"set",n,i):lh(t,"add",n,i)),h}deleteProperty(t,n){const i=Cr(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&lh(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!pu(n)||!YV.has(n))&&Oa(t,"has",n),i}ownKeys(t){return Oa(t,"iterate",Qn(t)?"length":Ep),Reflect.ownKeys(t)}}class oW extends ZV{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const aW=new JV,lW=new oW,cW=new JV(!0);const XC=e=>e,Fx=e=>Reflect.getPrototypeOf(e);function uW(e,t,n){return function(...i){const r=this.__v_raw,a=jn(r),l=Av(a),h=e==="entries"||e===Symbol.iterator&&l,s=e==="keys"&&l,p=r[e](...i),v=n?XC:t?ew:oa;return!t&&Oa(a,"iterate",s?KC:Ep),{next(){const{value:x,done:T}=p.next();return T?{value:x,done:T}:{value:h?[v(x[0]),v(x[1])]:v(x),done:T}},[Symbol.iterator](){return this}}}}function zx(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function dW(e,t){const n={get(r){const a=this.__v_raw,l=jn(a),h=jn(r);e||(zf(r,h)&&Oa(l,"get",r),Oa(l,"get",h));const{has:s}=Fx(l),p=t?XC:e?ew:oa;if(s.call(l,r))return p(a.get(r));if(s.call(l,h))return p(a.get(h));a!==l&&a.get(r)},get size(){const r=this.__v_raw;return!e&&Oa(jn(r),"iterate",Ep),r.size},has(r){const a=this.__v_raw,l=jn(a),h=jn(r);return e||(zf(r,h)&&Oa(l,"has",r),Oa(l,"has",h)),r===h?a.has(r):a.has(r)||a.has(h)},forEach(r,a){const l=this,h=l.__v_raw,s=jn(h),p=t?XC:e?ew:oa;return!e&&Oa(s,"iterate",Ep),h.forEach((v,x)=>r.call(a,p(v),p(x),l))}};return wo(n,e?{add:zx("add"),set:zx("set"),delete:zx("delete"),clear:zx("clear")}:{add(r){!t&&!zc(r)&&!Kf(r)&&(r=jn(r));const a=jn(this);return Fx(a).has.call(a,r)||(a.add(r),lh(a,"add",r,r)),this},set(r,a){!t&&!zc(a)&&!Kf(a)&&(a=jn(a));const l=jn(this),{has:h,get:s}=Fx(l);let p=h.call(l,r);p||(r=jn(r),p=h.call(l,r));const v=s.call(l,r);return l.set(r,a),p?zf(a,v)&&lh(l,"set",r,a):lh(l,"add",r,a),this},delete(r){const a=jn(this),{has:l,get:h}=Fx(a);let s=l.call(a,r);s||(r=jn(r),s=l.call(a,r)),h&&h.call(a,r);const p=a.delete(r);return s&&lh(a,"delete",r,void 0),p},clear(){const r=jn(this),a=r.size!==0,l=r.clear();return a&&lh(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=uW(r,e,t)}),n}function tA(e,t){const n=dW(e,t);return(i,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Cr(n,r)&&r in i?n:i,r,a)}const hW={get:tA(!1,!1)},fW={get:tA(!1,!0)},mW={get:tA(!0,!1)};const QV=new WeakMap,eB=new WeakMap,tB=new WeakMap,pW=new WeakMap;function gW(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vW(e){return e.__v_skip||!Object.isExtensible(e)?0:gW(Nj(e))}function oo(e){return Kf(e)?e:nA(e,!1,aW,hW,QV)}function _W(e){return nA(e,!1,cW,fW,eB)}function $p(e){return nA(e,!0,lW,mW,tB)}function nA(e,t,n,i,r){if(!Mr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=vW(e);if(a===0)return e;const l=r.get(e);if(l)return l;const h=new Proxy(e,a===2?i:n);return r.set(e,h),h}function Cp(e){return Kf(e)?Cp(e.__v_raw):!!(e&&e.__v_isReactive)}function Kf(e){return!!(e&&e.__v_isReadonly)}function zc(e){return!!(e&&e.__v_isShallow)}function gT(e){return e?!!e.__v_raw:!1}function jn(e){const t=e&&e.__v_raw;return t?jn(t):e}function nB(e){return!Cr(e,"__v_skip")&&Object.isExtensible(e)&&VV(e,"__v_skip",!0),e}const oa=e=>Mr(e)?oo(e):e,ew=e=>Mr(e)?$p(e):e;function Bs(e){return e?e.__v_isRef===!0:!1}function it(e){return iB(e,!1)}function nn(e){return iB(e,!0)}function iB(e,t){return Bs(e)?e:new yW(e,t)}class yW{constructor(t,n){this.dep=new eA,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:jn(t),this._value=n?t:oa(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||zc(t)||Kf(t);t=i?t:jn(t),zf(t,n)&&(this._rawValue=t,this._value=i?t:oa(t),this.dep.trigger())}}function Ti(e){return Bs(e)?e.value:e}function ja(e){return bi(e)?e():Ti(e)}const bW={get:(e,t,n)=>t==="__v_raw"?e:Ti(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Bs(r)&&!Bs(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function rB(e){return Cp(e)?e:new Proxy(e,bW)}function __(e){const t=Qn(e)?new Array(e.length):{};for(const n in e)t[n]=sB(e,n);return t}class xW{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return tW(jn(this._object),this._key)}}class wW{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function He(e,t,n){return Bs(e)?e:bi(e)?new wW(e):Mr(e)&&arguments.length>1?sB(e,t,n):it(e)}function sB(e,t,n){const i=e[t];return Bs(i)?i:new xW(e,t,n)}class TW{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new eA(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=E0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Kr!==this)return WV(this,!0),!0}get value(){const t=this.dep.track();return qV(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function SW(e,t,n=!1){let i,r;return bi(e)?i=e:(i=e.get,r=e.set),new TW(i,r,n)}const Nx={},tw=new WeakMap;let fp;function EW(e,t=!1,n=fp){if(n){let i=tw.get(n);i||tw.set(n,i=[]),i.push(e)}}function CW(e,t,n=Ur){const{immediate:i,deep:r,once:a,scheduler:l,augmentJob:h,call:s}=n,p=q=>r?q:zc(q)||r===!1||r===0?ch(q,1):ch(q);let v,x,T,C,I=!1,P=!1;if(Bs(e)?(x=()=>e.value,I=zc(e)):Cp(e)?(x=()=>p(e),I=!0):Qn(e)?(P=!0,I=e.some(q=>Cp(q)||zc(q)),x=()=>e.map(q=>{if(Bs(q))return q.value;if(Cp(q))return p(q);if(bi(q))return s?s(q,2):q()})):bi(e)?t?x=s?()=>s(e,2):e:x=()=>{if(T){vh();try{T()}finally{_h()}}const q=fp;fp=v;try{return s?s(e,3,[C]):e(C)}finally{fp=q}}:x=Zu,t&&r){const q=x,K=r===!0?1/0:r;x=()=>ch(q(),K)}const D=$V(),F=()=>{v.stop(),D&&D.active&&XI(D.effects,v)};if(a&&t){const q=t;t=(...K)=>{q(...K),F()}}let V=P?new Array(e.length).fill(Nx):Nx;const H=q=>{if(!(!(v.flags&1)||!v.dirty&&!q))if(t){const K=v.run();if(r||I||(P?K.some((ie,X)=>zf(ie,V[X])):zf(K,V))){T&&T();const ie=fp;fp=v;try{const X=[K,V===Nx?void 0:P&&V[0]===Nx?[]:V,C];V=K,s?s(t,3,X):t(...X)}finally{fp=ie}}}else v.run()};return h&&h(H),v=new UV(x),v.scheduler=l?()=>l(H,!1):H,C=q=>EW(q,!1,v),T=v.onStop=()=>{const q=tw.get(v);if(q){if(s)s(q,4);else for(const K of q)K();tw.delete(v)}},t?i?H(!0):V=v.run():l?l(H.bind(null,!0),!0):v.run(),F.pause=v.pause.bind(v),F.resume=v.resume.bind(v),F.stop=F,F}function ch(e,t=1/0,n){if(t<=0||!Mr(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Bs(e))ch(e.value,t,n);else if(Qn(e))for(let i=0;i<e.length;i++)ch(e[i],t,n);else if(dT(e)||Av(e))e.forEach(i=>{ch(i,t,n)});else if(OV(e)){for(const i in e)ch(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&ch(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bb(e,t,n,i){try{return i?e(...i):e()}catch(r){vT(r,t,n)}}function gu(e,t,n,i){if(bi(e)){const r=bb(e,t,n,i);return r&&LV(r)&&r.catch(a=>{vT(a,t,n)}),r}if(Qn(e)){const r=[];for(let a=0;a<e.length;a++)r.push(gu(e[a],t,n,i));return r}}function vT(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ur;if(t){let h=t.parent;const s=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;h;){const v=h.ec;if(v){for(let x=0;x<v.length;x++)if(v[x](e,s,p)===!1)return}h=h.parent}if(a){vh(),bb(a,null,10,[e,s,p]),_h();return}}kW(e,n,r,i,l)}function kW(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const al=[];let Wu=-1;const Mv=[];let bf=null,gv=0;const oB=Promise.resolve();let nw=null;function Gn(e){const t=nw||oB;return e?t.then(this?e.bind(this):e):t}function IW(e){let t=Wu+1,n=al.length;for(;t<n;){const i=t+n>>>1,r=al[i],a=k0(r);a<e||a===e&&r.flags&2?t=i+1:n=i}return t}function iA(e){if(!(e.flags&1)){const t=k0(e),n=al[al.length-1];!n||!(e.flags&2)&&t>=k0(n)?al.push(e):al.splice(IW(t),0,e),e.flags|=1,aB()}}function aB(){nw||(nw=oB.then(cB))}function AW(e){Qn(e)?Mv.push(...e):bf&&e.id===-1?bf.splice(gv+1,0,e):e.flags&1||(Mv.push(e),e.flags|=1),aB()}function _3(e,t,n=Wu+1){for(;n<al.length;n++){const i=al[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;al.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function lB(e){if(Mv.length){const t=[...new Set(Mv)].sort((n,i)=>k0(n)-k0(i));if(Mv.length=0,bf){bf.push(...t);return}for(bf=t,gv=0;gv<bf.length;gv++){const n=bf[gv];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}bf=null,gv=0}}const k0=e=>e.id==null?e.flags&2?-1:1/0:e.id;function cB(e){try{for(Wu=0;Wu<al.length;Wu++){const t=al[Wu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bb(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Wu<al.length;Wu++){const t=al[Wu];t&&(t.flags&=-2)}Wu=-1,al.length=0,lB(),nw=null,(al.length||Mv.length)&&cB()}}let la=null,uB=null;function iw(e){const t=la;return la=e,uB=e&&e.type.__scopeId||null,t}function yi(e,t=la,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&lw(-1);const a=iw(t);let l;try{l=e(...r)}finally{iw(a),i._d&&lw(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function Oi(e,t){if(la===null)return e;const n=TT(la),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,l,h,s=Ur]=t[r];a&&(bi(a)&&(a={mounted:a,updated:a}),a.deep&&ch(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:h,modifiers:s}))}return e}function np(e,t,n,i){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const h=r[l];a&&(h.oldValue=a[l].value);let s=h.dir[i];s&&(vh(),gu(s,n,8,[e.el,h,e,t]),_h())}}const dB=Symbol("_vte"),hB=e=>e.__isTeleport,r0=e=>e&&(e.disabled||e.disabled===""),y3=e=>e&&(e.defer||e.defer===""),b3=e=>typeof SVGElement<"u"&&e instanceof SVGElement,x3=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,YC=(e,t)=>{const n=e&&e.to;return ts(n)?t?t(n):null:n},fB={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,a,l,h,s,p){const{mc:v,pc:x,pbc:T,o:{insert:C,querySelector:I,createText:P,createComment:D}}=p,F=r0(t.props);let{shapeFlag:V,children:H,dynamicChildren:q}=t;if(e==null){const K=t.el=P(""),ie=t.anchor=P("");C(K,n,i),C(ie,n,i);const X=(G,j)=>{V&16&&v(H,G,j,r,a,l,h,s)},$=()=>{const G=t.target=YC(t.props,I),j=mB(G,t,P,C);G&&(l!=="svg"&&b3(G)?l="svg":l!=="mathml"&&x3(G)&&(l="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(G),F||(X(G,j),b1(t,!1)))};F&&(X(n,ie),b1(t,!0)),y3(t.props)?(t.el.__isMounted=!1,go(()=>{$(),delete t.el.__isMounted},a)):$()}else{if(y3(t.props)&&e.el.__isMounted===!1){go(()=>{fB.process(e,t,n,i,r,a,l,h,s,p)},a);return}t.el=e.el,t.targetStart=e.targetStart;const K=t.anchor=e.anchor,ie=t.target=e.target,X=t.targetAnchor=e.targetAnchor,$=r0(e.props),G=$?n:ie,j=$?K:X;if(l==="svg"||b3(ie)?l="svg":(l==="mathml"||x3(ie))&&(l="mathml"),q?(T(e.dynamicChildren,q,G,r,a,l,h),cA(e,t,!0)):s||x(e,t,G,j,r,a,l,h,!1),F)$?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):$x(t,n,K,p,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const te=t.target=YC(t.props,I);te&&$x(t,te,null,p,0)}else $&&$x(t,ie,X,p,1);b1(t,F)}},remove(e,t,n,{um:i,o:{remove:r}},a){const{shapeFlag:l,children:h,anchor:s,targetStart:p,targetAnchor:v,target:x,props:T}=e;if(x&&(r(p),r(v)),a&&r(s),l&16){const C=a||!r0(T);for(let I=0;I<h.length;I++){const P=h[I];i(P,t,n,C,!!P.dynamicChildren)}}},move:$x,hydrate:PW};function $x(e,t,n,{o:{insert:i},m:r},a=2){a===0&&i(e.targetAnchor,t,n);const{el:l,anchor:h,shapeFlag:s,children:p,props:v}=e,x=a===2;if(x&&i(l,t,n),(!x||r0(v))&&s&16)for(let T=0;T<p.length;T++)r(p[T],t,n,2);x&&i(h,t,n)}function PW(e,t,n,i,r,a,{o:{nextSibling:l,parentNode:h,querySelector:s,insert:p,createText:v}},x){function T(P,D,F,V){D.anchor=x(l(P),D,h(P),n,i,r,a),D.targetStart=F,D.targetAnchor=V}const C=t.target=YC(t.props,s),I=r0(t.props);if(C){const P=C._lpa||C.firstChild;if(t.shapeFlag&16)if(I)T(e,t,P,P&&l(P));else{t.anchor=l(e);let D=P;for(;D;){if(D&&D.nodeType===8){if(D.data==="teleport start anchor")t.targetStart=D;else if(D.data==="teleport anchor"){t.targetAnchor=D,C._lpa=t.targetAnchor&&l(t.targetAnchor);break}}D=l(D)}t.targetAnchor||mB(C,t,v,p),x(P&&l(P),t,C,n,i,r,a)}b1(t,I)}else I&&t.shapeFlag&16&&T(e,t,e,l(e));return t.anchor&&l(t.anchor)}const MW=fB;function b1(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function mB(e,t,n,i){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[dB]=a,e&&(i(r,e),i(a,e)),a}const ih=Symbol("_leaveCb"),Ux=Symbol("_enterCb");function pB(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dr(()=>{e.isMounted=!0}),jr(()=>{e.isUnmounting=!0}),e}const Ac=[Function,Array],gB={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ac,onEnter:Ac,onAfterEnter:Ac,onEnterCancelled:Ac,onBeforeLeave:Ac,onLeave:Ac,onAfterLeave:Ac,onLeaveCancelled:Ac,onBeforeAppear:Ac,onAppear:Ac,onAfterAppear:Ac,onAppearCancelled:Ac},vB=e=>{const t=e.subTree;return t.component?vB(t.component):t},DW={name:"BaseTransition",props:gB,setup(e,{slots:t}){const n=b_(),i=pB();return()=>{const r=t.default&&rA(t.default(),!0);if(!r||!r.length)return;const a=_B(r),l=jn(e),{mode:h}=l;if(i.isLeaving)return UE(a);const s=w3(a);if(!s)return UE(a);let p=I0(s,l,i,n,x=>p=x);s.type!==Fo&&Xf(s,p);let v=n.subTree&&w3(n.subTree);if(v&&v.type!==Fo&&!Sf(v,s)&&vB(n).type!==Fo){let x=I0(v,l,i,n);if(Xf(v,x),h==="out-in"&&s.type!==Fo)return i.isLeaving=!0,x.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete x.afterLeave,v=void 0},UE(a);h==="in-out"&&s.type!==Fo?x.delayLeave=(T,C,I)=>{const P=yB(i,v);P[String(v.key)]=v,T[ih]=()=>{C(),T[ih]=void 0,delete p.delayedLeave,v=void 0},p.delayedLeave=()=>{I(),delete p.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return a}}};function _B(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Fo){t=n;break}}return t}const LW=DW;function yB(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function I0(e,t,n,i,r){const{appear:a,mode:l,persisted:h=!1,onBeforeEnter:s,onEnter:p,onAfterEnter:v,onEnterCancelled:x,onBeforeLeave:T,onLeave:C,onAfterLeave:I,onLeaveCancelled:P,onBeforeAppear:D,onAppear:F,onAfterAppear:V,onAppearCancelled:H}=t,q=String(e.key),K=yB(n,e),ie=(G,j)=>{G&&gu(G,i,9,j)},X=(G,j)=>{const te=j[1];ie(G,j),Qn(G)?G.every(Z=>Z.length<=1)&&te():G.length<=1&&te()},$={mode:l,persisted:h,beforeEnter(G){let j=s;if(!n.isMounted)if(a)j=D||s;else return;G[ih]&&G[ih](!0);const te=K[q];te&&Sf(e,te)&&te.el[ih]&&te.el[ih](),ie(j,[G])},enter(G){let j=p,te=v,Z=x;if(!n.isMounted)if(a)j=F||p,te=V||v,Z=H||x;else return;let ee=!1;const be=G[Ux]=Ie=>{ee||(ee=!0,Ie?ie(Z,[G]):ie(te,[G]),$.delayedLeave&&$.delayedLeave(),G[Ux]=void 0)};j?X(j,[G,be]):be()},leave(G,j){const te=String(e.key);if(G[Ux]&&G[Ux](!0),n.isUnmounting)return j();ie(T,[G]);let Z=!1;const ee=G[ih]=be=>{Z||(Z=!0,j(),be?ie(P,[G]):ie(I,[G]),G[ih]=void 0,K[te]===e&&delete K[te])};K[te]=e,C?X(C,[G,ee]):ee()},clone(G){const j=I0(G,t,n,i,r);return r&&r(j),j}};return $}function UE(e){if(_T(e))return e=od(e),e.children=null,e}function w3(e){if(!_T(e))return hB(e.type)&&e.children?_B(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&bi(n.default))return n.default()}}function Xf(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Xf(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function rA(e,t=!1,n){let i=[],r=0;for(let a=0;a<e.length;a++){let l=e[a];const h=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===ln?(l.patchFlag&128&&r++,i=i.concat(rA(l.children,t,h))):(t||l.type!==Fo)&&i.push(h!=null?od(l,{key:h}):l)}if(r>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function bB(e,t){return bi(e)?wo({name:e.name},t,{setup:e}):e}function fa(){const e=b_();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function xB(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const rw=new WeakMap;function s0(e,t,n,i,r=!1){if(Qn(e)){e.forEach((I,P)=>s0(I,t&&(Qn(t)?t[P]:t),n,i,r));return}if(kp(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&s0(e,t,n,i.component.subTree);return}const a=i.shapeFlag&4?TT(i.component):i.el,l=r?null:a,{i:h,r:s}=e,p=t&&t.r,v=h.refs===Ur?h.refs={}:h.refs,x=h.setupState,T=jn(x),C=x===Ur?DV:I=>Cr(T,I);if(p!=null&&p!==s){if(T3(t),ts(p))v[p]=null,C(p)&&(x[p]=null);else if(Bs(p)){p.value=null;const I=t;I.k&&(v[I.k]=null)}}if(bi(s))bb(s,h,12,[l,v]);else{const I=ts(s),P=Bs(s);if(I||P){const D=()=>{if(e.f){const F=I?C(s)?x[s]:v[s]:s.value;if(r)Qn(F)&&XI(F,a);else if(Qn(F))F.includes(a)||F.push(a);else if(I)v[s]=[a],C(s)&&(x[s]=v[s]);else{const V=[a];s.value=V,e.k&&(v[e.k]=V)}}else I?(v[s]=l,C(s)&&(x[s]=l)):P&&(s.value=l,e.k&&(v[e.k]=l))};if(l){const F=()=>{D(),rw.delete(e)};F.id=-1,rw.set(e,F),go(F,n)}else T3(e),D()}}}function T3(e){const t=rw.get(e);t&&(t.flags|=8,rw.delete(e))}fT().requestIdleCallback;fT().cancelIdleCallback;const kp=e=>!!e.type.__asyncLoader,_T=e=>e.type.__isKeepAlive,RW={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=b_(),i=n.ctx;if(!i.renderer)return()=>{const V=t.default&&t.default();return V&&V.length===1?V[0]:V};const r=new Map,a=new Set;let l=null;const h=n.suspense,{renderer:{p:s,m:p,um:v,o:{createElement:x}}}=i,T=x("div");i.activate=(V,H,q,K,ie)=>{const X=V.component;p(V,H,q,0,h),s(X.vnode,V,H,q,X,h,K,V.slotScopeIds,ie),go(()=>{X.isDeactivated=!1,X.a&&Pv(X.a);const $=V.props&&V.props.onVnodeMounted;$&&Mc($,X.parent,V)},h)},i.deactivate=V=>{const H=V.component;ow(H.m),ow(H.a),p(V,T,null,1,h),go(()=>{H.da&&Pv(H.da);const q=V.props&&V.props.onVnodeUnmounted;q&&Mc(q,H.parent,V),H.isDeactivated=!0},h)};function C(V){jE(V),v(V,n,h,!0)}function I(V){r.forEach((H,q)=>{const K=nk(H.type);K&&!V(K)&&P(q)})}function P(V){const H=r.get(V);H&&(!l||!Sf(H,l))?C(H):l&&jE(l),r.delete(V),a.delete(V)}Zt(()=>[e.include,e.exclude],([V,H])=>{V&&I(q=>By(V,q)),H&&I(q=>!By(H,q))},{flush:"post",deep:!0});let D=null;const F=()=>{D!=null&&(aw(n.subTree.type)?go(()=>{r.set(D,jx(n.subTree))},n.subTree.suspense):r.set(D,jx(n.subTree)))};return Dr(F),xT(F),jr(()=>{r.forEach(V=>{const{subTree:H,suspense:q}=n,K=jx(H);if(V.type===K.type&&V.key===K.key){jE(K);const ie=K.component.da;ie&&go(ie,q);return}C(V)})}),()=>{if(D=null,!t.default)return l=null;const V=t.default(),H=V[0];if(V.length>1)return l=null,V;if(!Up(H)||!(H.shapeFlag&4)&&!(H.shapeFlag&128))return l=null,H;let q=jx(H);if(q.type===Fo)return l=null,q;const K=q.type,ie=nk(kp(q)?q.type.__asyncResolved||{}:K),{include:X,exclude:$,max:G}=e;if(X&&(!ie||!By(X,ie))||$&&ie&&By($,ie))return q.shapeFlag&=-257,l=q,H;const j=q.key==null?K:q.key,te=r.get(j);return q.el&&(q=od(q),H.shapeFlag&128&&(H.ssContent=q)),D=j,te?(q.el=te.el,q.component=te.component,q.transition&&Xf(q,q.transition),q.shapeFlag|=512,a.delete(j),a.add(j)):(a.add(j),G&&a.size>parseInt(G,10)&&P(a.values().next().value)),q.shapeFlag|=256,l=q,aw(H.type)?H:q}}},OW=RW;function By(e,t){return Qn(e)?e.some(n=>By(n,t)):ts(e)?e.split(",").includes(t):zj(e)?(e.lastIndex=0,e.test(t)):!1}function sA(e,t){wB(e,"a",t)}function yT(e,t){wB(e,"da",t)}function wB(e,t,n=Ba){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(bT(t,i,n),n){let r=n.parent;for(;r&&r.parent;)_T(r.parent.vnode)&&VW(i,t,n,r),r=r.parent}}function VW(e,t,n,i){const r=bT(t,e,i,!0);oA(()=>{XI(i[t],r)},n)}function jE(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function jx(e){return e.shapeFlag&128?e.ssContent:e}function bT(e,t,n=Ba,i=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{vh();const h=wb(n),s=gu(t,n,e,l);return h(),_h(),s});return i?r.unshift(a):r.push(a),a}}const kh=e=>(t,n=Ba)=>{(!P0||e==="sp")&&bT(e,(...i)=>t(...i),n)},y_=kh("bm"),Dr=kh("m"),TB=kh("bu"),xT=kh("u"),jr=kh("bum"),oA=kh("um"),BW=kh("sp"),FW=kh("rtg"),zW=kh("rtc");function NW(e,t=Ba){bT("ec",e,t)}const SB="components";function $W(e,t){return kB(SB,e,!0,t)||e}const EB=Symbol.for("v-ndc");function CB(e){return ts(e)?kB(SB,e,!1)||e:e||EB}function kB(e,t,n=!0,i=!1){const r=la||Ba;if(r){const a=r.type;{const h=nk(a,!1);if(h&&(h===t||h===cl(t)||h===md(cl(t))))return a}const l=S3(r[e]||a[e],t)||S3(r.appContext[e],t);return!l&&i?a:l}}function S3(e,t){return e&&(e[t]||e[cl(t)]||e[md(cl(t))])}function us(e,t,n,i){let r;const a=n,l=Qn(e);if(l||ts(e)){const h=l&&Cp(e);let s=!1,p=!1;h&&(s=!zc(e),p=Kf(e),e=pT(e)),r=new Array(e.length);for(let v=0,x=e.length;v<x;v++)r[v]=t(s?p?ew(oa(e[v])):oa(e[v]):e[v],v,void 0,a)}else if(typeof e=="number"){r=new Array(e);for(let h=0;h<e;h++)r[h]=t(h+1,h,void 0,a)}else if(Mr(e))if(e[Symbol.iterator])r=Array.from(e,(h,s)=>t(h,s,void 0,a));else{const h=Object.keys(e);r=new Array(h.length);for(let s=0,p=h.length;s<p;s++){const v=h[s];r[s]=t(e[v],v,s,a)}}else r=[];return r}function UW(e,t,n={},i,r){if(la.ce||la.parent&&kp(la.parent)&&la.parent.ce){const p=Object.keys(n).length>0;return Kt(),za(ln,null,[ue("slot",n,i)],p?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),Kt();const l=a&&IB(a(n)),h=n.key||l&&l.key,s=za(ln,{key:(h&&!pu(h)?h:`_${t}`)+(!l&&i?"_fb":"")},l||[],l&&e._===1?64:-2);return a&&a._c&&(a._d=!0),s}function IB(e){return e.some(t=>Up(t)?!(t.type===Fo||t.type===ln&&!IB(t.children)):!0)?e:null}const ZC=e=>e?GB(e)?TT(e):ZC(e.parent):null,o0=wo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ZC(e.parent),$root:e=>ZC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>PB(e),$forceUpdate:e=>e.f||(e.f=()=>{iA(e.update)}),$nextTick:e=>e.n||(e.n=Gn.bind(e.proxy)),$watch:e=>cH.bind(e)}),WE=(e,t)=>e!==Ur&&!e.__isScriptSetup&&Cr(e,t),jW={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:a,accessCache:l,type:h,appContext:s}=e;let p;if(t[0]!=="$"){const C=l[t];if(C!==void 0)switch(C){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(WE(i,t))return l[t]=1,i[t];if(r!==Ur&&Cr(r,t))return l[t]=2,r[t];if((p=e.propsOptions[0])&&Cr(p,t))return l[t]=3,a[t];if(n!==Ur&&Cr(n,t))return l[t]=4,n[t];JC&&(l[t]=0)}}const v=o0[t];let x,T;if(v)return t==="$attrs"&&Oa(e.attrs,"get",""),v(e);if((x=h.__cssModules)&&(x=x[t]))return x;if(n!==Ur&&Cr(n,t))return l[t]=4,n[t];if(T=s.config.globalProperties,Cr(T,t))return T[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:a}=e;return WE(r,t)?(r[t]=n,!0):i!==Ur&&Cr(i,t)?(i[t]=n,!0):Cr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:a,type:l}},h){let s,p;return!!(n[h]||e!==Ur&&h[0]!=="$"&&Cr(e,h)||WE(t,h)||(s=a[0])&&Cr(s,h)||Cr(i,h)||Cr(o0,h)||Cr(r.config.globalProperties,h)||(p=l.__cssModules)&&p[h])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Cr(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function E3(e){return Qn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let JC=!0;function WW(e){const t=PB(e),n=e.proxy,i=e.ctx;JC=!1,t.beforeCreate&&C3(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:l,watch:h,provide:s,inject:p,created:v,beforeMount:x,mounted:T,beforeUpdate:C,updated:I,activated:P,deactivated:D,beforeDestroy:F,beforeUnmount:V,destroyed:H,unmounted:q,render:K,renderTracked:ie,renderTriggered:X,errorCaptured:$,serverPrefetch:G,expose:j,inheritAttrs:te,components:Z,directives:ee,filters:be}=t;if(p&&HW(p,i,null),l)for(const Ke in l){const Xe=l[Ke];bi(Xe)&&(i[Ke]=Xe.bind(n))}if(r){const Ke=r.call(n,n);Mr(Ke)&&(e.data=oo(Ke))}if(JC=!0,a)for(const Ke in a){const Xe=a[Ke],Pe=bi(Xe)?Xe.bind(n,n):bi(Xe.get)?Xe.get.bind(n,n):Zu,$e=!bi(Xe)&&bi(Xe.set)?Xe.set.bind(n):Zu,Ee=me({get:Pe,set:$e});Object.defineProperty(i,Ke,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:We=>Ee.value=We})}if(h)for(const Ke in h)AB(h[Ke],i,n,Ke);if(s){const Ke=bi(s)?s.call(n):s;Reflect.ownKeys(Ke).forEach(Xe=>{Or(Xe,Ke[Xe])})}v&&C3(v,e,"c");function Ve(Ke,Xe){Qn(Xe)?Xe.forEach(Pe=>Ke(Pe.bind(n))):Xe&&Ke(Xe.bind(n))}if(Ve(y_,x),Ve(Dr,T),Ve(TB,C),Ve(xT,I),Ve(sA,P),Ve(yT,D),Ve(NW,$),Ve(zW,ie),Ve(FW,X),Ve(jr,V),Ve(oA,q),Ve(BW,G),Qn(j))if(j.length){const Ke=e.exposed||(e.exposed={});j.forEach(Xe=>{Object.defineProperty(Ke,Xe,{get:()=>n[Xe],set:Pe=>n[Xe]=Pe,enumerable:!0})})}else e.exposed||(e.exposed={});K&&e.render===Zu&&(e.render=K),te!=null&&(e.inheritAttrs=te),Z&&(e.components=Z),ee&&(e.directives=ee),G&&xB(e)}function HW(e,t,n=Zu){Qn(e)&&(e=QC(e));for(const i in e){const r=e[i];let a;Mr(r)?"default"in r?a=ki(r.from||i,r.default,!0):a=ki(r.from||i):a=ki(r),Bs(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[i]=a}}function C3(e,t,n){gu(Qn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function AB(e,t,n,i){let r=i.includes(".")?$B(n,i):()=>n[i];if(ts(e)){const a=t[e];bi(a)&&Zt(r,a)}else if(bi(e))Zt(r,e.bind(n));else if(Mr(e))if(Qn(e))e.forEach(a=>AB(a,t,n,i));else{const a=bi(e.handler)?e.handler.bind(n):t[e.handler];bi(a)&&Zt(r,a,e)}}function PB(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,h=a.get(t);let s;return h?s=h:!r.length&&!n&&!i?s=t:(s={},r.length&&r.forEach(p=>sw(s,p,l,!0)),sw(s,t,l)),Mr(t)&&a.set(t,s),s}function sw(e,t,n,i=!1){const{mixins:r,extends:a}=t;a&&sw(e,a,n,!0),r&&r.forEach(l=>sw(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const h=GW[l]||n&&n[l];e[l]=h?h(e[l],t[l]):t[l]}return e}const GW={data:k3,props:I3,emits:I3,methods:Fy,computed:Fy,beforeCreate:ol,created:ol,beforeMount:ol,mounted:ol,beforeUpdate:ol,updated:ol,beforeDestroy:ol,beforeUnmount:ol,destroyed:ol,unmounted:ol,activated:ol,deactivated:ol,errorCaptured:ol,serverPrefetch:ol,components:Fy,directives:Fy,watch:KW,provide:k3,inject:qW};function k3(e,t){return t?e?function(){return wo(bi(e)?e.call(this,this):e,bi(t)?t.call(this,this):t)}:t:e}function qW(e,t){return Fy(QC(e),QC(t))}function QC(e){if(Qn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ol(e,t){return e?[...new Set([].concat(e,t))]:t}function Fy(e,t){return e?wo(Object.create(null),e,t):t}function I3(e,t){return e?Qn(e)&&Qn(t)?[...new Set([...e,...t])]:wo(Object.create(null),E3(e),E3(t??{})):t}function KW(e,t){if(!e)return t;if(!t)return e;const n=wo(Object.create(null),e);for(const i in t)n[i]=ol(e[i],t[i]);return n}function MB(){return{app:null,config:{isNativeTag:DV,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XW=0;function YW(e,t){return function(i,r=null){bi(i)||(i=wo({},i)),r!=null&&!Mr(r)&&(r=null);const a=MB(),l=new WeakSet,h=[];let s=!1;const p=a.app={_uid:XW++,_component:i,_props:r,_container:null,_context:a,_instance:null,version:IH,get config(){return a.config},set config(v){},use(v,...x){return l.has(v)||(v&&bi(v.install)?(l.add(v),v.install(p,...x)):bi(v)&&(l.add(v),v(p,...x))),p},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),p},component(v,x){return x?(a.components[v]=x,p):a.components[v]},directive(v,x){return x?(a.directives[v]=x,p):a.directives[v]},mount(v,x,T){if(!s){const C=p._ceVNode||ue(i,r);return C.appContext=a,T===!0?T="svg":T===!1&&(T=void 0),e(C,v,T),s=!0,p._container=v,v.__vue_app__=p,TT(C.component)}},onUnmount(v){h.push(v)},unmount(){s&&(gu(h,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(v,x){return a.provides[v]=x,p},runWithContext(v){const x=Dv;Dv=p;try{return v()}finally{Dv=x}}};return p}}let Dv=null;function Or(e,t){if(Ba){let n=Ba.provides;const i=Ba.parent&&Ba.parent.provides;i===n&&(n=Ba.provides=Object.create(i)),n[e]=t}}function ki(e,t,n=!1){const i=b_();if(i||Dv){let r=Dv?Dv._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&bi(t)?t.call(i&&i.proxy):t}}const DB={},LB=()=>Object.create(DB),RB=e=>Object.getPrototypeOf(e)===DB;function ZW(e,t,n,i=!1){const r={},a=LB();e.propsDefaults=Object.create(null),OB(e,t,r,a);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);n?e.props=i?r:_W(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function JW(e,t,n,i){const{props:r,attrs:a,vnode:{patchFlag:l}}=e,h=jn(r),[s]=e.propsOptions;let p=!1;if((i||l>0)&&!(l&16)){if(l&8){const v=e.vnode.dynamicProps;for(let x=0;x<v.length;x++){let T=v[x];if(wT(e.emitsOptions,T))continue;const C=t[T];if(s)if(Cr(a,T))C!==a[T]&&(a[T]=C,p=!0);else{const I=cl(T);r[I]=ek(s,h,I,C,e,!1)}else C!==a[T]&&(a[T]=C,p=!0)}}}else{OB(e,t,r,a)&&(p=!0);let v;for(const x in h)(!t||!Cr(t,x)&&((v=rg(x))===x||!Cr(t,v)))&&(s?n&&(n[x]!==void 0||n[v]!==void 0)&&(r[x]=ek(s,h,x,void 0,e,!0)):delete r[x]);if(a!==h)for(const x in a)(!t||!Cr(t,x))&&(delete a[x],p=!0)}p&&lh(e.attrs,"set","")}function OB(e,t,n,i){const[r,a]=e.propsOptions;let l=!1,h;if(t)for(let s in t){if(t0(s))continue;const p=t[s];let v;r&&Cr(r,v=cl(s))?!a||!a.includes(v)?n[v]=p:(h||(h={}))[v]=p:wT(e.emitsOptions,s)||(!(s in i)||p!==i[s])&&(i[s]=p,l=!0)}if(a){const s=jn(n),p=h||Ur;for(let v=0;v<a.length;v++){const x=a[v];n[x]=ek(r,s,x,p[x],e,!Cr(p,x))}}return l}function ek(e,t,n,i,r,a){const l=e[n];if(l!=null){const h=Cr(l,"default");if(h&&i===void 0){const s=l.default;if(l.type!==Function&&!l.skipFactory&&bi(s)){const{propsDefaults:p}=r;if(n in p)i=p[n];else{const v=wb(r);i=p[n]=s.call(null,t),v()}}else i=s;r.ce&&r.ce._setProp(n,i)}l[0]&&(a&&!h?i=!1:l[1]&&(i===""||i===rg(n))&&(i=!0))}return i}const QW=new WeakMap;function VB(e,t,n=!1){const i=n?QW:t.propsCache,r=i.get(e);if(r)return r;const a=e.props,l={},h=[];let s=!1;if(!bi(e)){const v=x=>{s=!0;const[T,C]=VB(x,t,!0);wo(l,T),C&&h.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!s)return Mr(e)&&i.set(e,Iv),Iv;if(Qn(a))for(let v=0;v<a.length;v++){const x=cl(a[v]);A3(x)&&(l[x]=Ur)}else if(a)for(const v in a){const x=cl(v);if(A3(x)){const T=a[v],C=l[x]=Qn(T)||bi(T)?{type:T}:wo({},T),I=C.type;let P=!1,D=!0;if(Qn(I))for(let F=0;F<I.length;++F){const V=I[F],H=bi(V)&&V.name;if(H==="Boolean"){P=!0;break}else H==="String"&&(D=!1)}else P=bi(I)&&I.name==="Boolean";C[0]=P,C[1]=D,(P||Cr(C,"default"))&&h.push(x)}}const p=[l,h];return Mr(e)&&i.set(e,p),p}function A3(e){return e[0]!=="$"&&!t0(e)}const aA=e=>e==="_"||e==="_ctx"||e==="$stable",lA=e=>Qn(e)?e.map(Ku):[Ku(e)],eH=(e,t,n)=>{if(t._n)return t;const i=yi((...r)=>lA(t(...r)),n);return i._c=!1,i},BB=(e,t,n)=>{const i=e._ctx;for(const r in e){if(aA(r))continue;const a=e[r];if(bi(a))t[r]=eH(r,a,i);else if(a!=null){const l=lA(a);t[r]=()=>l}}},FB=(e,t)=>{const n=lA(t);e.slots.default=()=>n},zB=(e,t,n)=>{for(const i in t)(n||!aA(i))&&(e[i]=t[i])},tH=(e,t,n)=>{const i=e.slots=LB();if(e.vnode.shapeFlag&32){const r=t._;r?(zB(i,t,n),n&&VV(i,"_",r,!0)):BB(t,i)}else t&&FB(e,t)},nH=(e,t,n)=>{const{vnode:i,slots:r}=e;let a=!0,l=Ur;if(i.shapeFlag&32){const h=t._;h?n&&h===1?a=!1:zB(r,t,n):(a=!t.$stable,BB(t,r)),l=t}else t&&(FB(e,t),l={default:1});if(a)for(const h in r)!aA(h)&&l[h]==null&&delete r[h]},go=vH;function iH(e){return rH(e)}function rH(e,t){const n=fT();n.__VUE__=!0;const{insert:i,remove:r,patchProp:a,createElement:l,createText:h,createComment:s,setText:p,setElementText:v,parentNode:x,nextSibling:T,setScopeId:C=Zu,insertStaticContent:I}=e,P=(le,we,_e,fe=null,Fe=null,rt=null,pt=void 0,vt=null,gt=!!we.dynamicChildren)=>{if(le===we)return;le&&!Sf(le,we)&&(fe=ot(le),We(le,Fe,rt,!0),le=null),we.patchFlag===-2&&(gt=!1,we.dynamicChildren=null);const{type:mt,ref:Vt,shapeFlag:Gt}=we;switch(mt){case xb:D(le,we,_e,fe);break;case Fo:F(le,we,_e,fe);break;case x1:le==null&&V(we,_e,fe,pt);break;case ln:Z(le,we,_e,fe,Fe,rt,pt,vt,gt);break;default:Gt&1?K(le,we,_e,fe,Fe,rt,pt,vt,gt):Gt&6?ee(le,we,_e,fe,Fe,rt,pt,vt,gt):(Gt&64||Gt&128)&&mt.process(le,we,_e,fe,Fe,rt,pt,vt,gt,yt)}Vt!=null&&Fe?s0(Vt,le&&le.ref,rt,we||le,!we):Vt==null&&le&&le.ref!=null&&s0(le.ref,null,rt,le,!0)},D=(le,we,_e,fe)=>{if(le==null)i(we.el=h(we.children),_e,fe);else{const Fe=we.el=le.el;we.children!==le.children&&p(Fe,we.children)}},F=(le,we,_e,fe)=>{le==null?i(we.el=s(we.children||""),_e,fe):we.el=le.el},V=(le,we,_e,fe)=>{[le.el,le.anchor]=I(le.children,we,_e,fe,le.el,le.anchor)},H=({el:le,anchor:we},_e,fe)=>{let Fe;for(;le&&le!==we;)Fe=T(le),i(le,_e,fe),le=Fe;i(we,_e,fe)},q=({el:le,anchor:we})=>{let _e;for(;le&&le!==we;)_e=T(le),r(le),le=_e;r(we)},K=(le,we,_e,fe,Fe,rt,pt,vt,gt)=>{we.type==="svg"?pt="svg":we.type==="math"&&(pt="mathml"),le==null?ie(we,_e,fe,Fe,rt,pt,vt,gt):G(le,we,Fe,rt,pt,vt,gt)},ie=(le,we,_e,fe,Fe,rt,pt,vt)=>{let gt,mt;const{props:Vt,shapeFlag:Gt,transition:gn,dirs:In}=le;if(gt=le.el=l(le.type,rt,Vt&&Vt.is,Vt),Gt&8?v(gt,le.children):Gt&16&&$(le.children,gt,null,fe,Fe,HE(le,rt),pt,vt),In&&np(le,null,fe,"created"),X(gt,le,le.scopeId,pt,fe),Vt){for(const qn in Vt)qn!=="value"&&!t0(qn)&&a(gt,qn,null,Vt[qn],rt,fe);"value"in Vt&&a(gt,"value",null,Vt.value,rt),(mt=Vt.onVnodeBeforeMount)&&Mc(mt,fe,le)}In&&np(le,null,fe,"beforeMount");const On=sH(Fe,gn);On&&gn.beforeEnter(gt),i(gt,we,_e),((mt=Vt&&Vt.onVnodeMounted)||On||In)&&go(()=>{mt&&Mc(mt,fe,le),On&&gn.enter(gt),In&&np(le,null,fe,"mounted")},Fe)},X=(le,we,_e,fe,Fe)=>{if(_e&&C(le,_e),fe)for(let rt=0;rt<fe.length;rt++)C(le,fe[rt]);if(Fe){let rt=Fe.subTree;if(we===rt||aw(rt.type)&&(rt.ssContent===we||rt.ssFallback===we)){const pt=Fe.vnode;X(le,pt,pt.scopeId,pt.slotScopeIds,Fe.parent)}}},$=(le,we,_e,fe,Fe,rt,pt,vt,gt=0)=>{for(let mt=gt;mt<le.length;mt++){const Vt=le[mt]=vt?xf(le[mt]):Ku(le[mt]);P(null,Vt,we,_e,fe,Fe,rt,pt,vt)}},G=(le,we,_e,fe,Fe,rt,pt)=>{const vt=we.el=le.el;let{patchFlag:gt,dynamicChildren:mt,dirs:Vt}=we;gt|=le.patchFlag&16;const Gt=le.props||Ur,gn=we.props||Ur;let In;if(_e&&ip(_e,!1),(In=gn.onVnodeBeforeUpdate)&&Mc(In,_e,we,le),Vt&&np(we,le,_e,"beforeUpdate"),_e&&ip(_e,!0),(Gt.innerHTML&&gn.innerHTML==null||Gt.textContent&&gn.textContent==null)&&v(vt,""),mt?j(le.dynamicChildren,mt,vt,_e,fe,HE(we,Fe),rt):pt||Xe(le,we,vt,null,_e,fe,HE(we,Fe),rt,!1),gt>0){if(gt&16)te(vt,Gt,gn,_e,Fe);else if(gt&2&&Gt.class!==gn.class&&a(vt,"class",null,gn.class,Fe),gt&4&&a(vt,"style",Gt.style,gn.style,Fe),gt&8){const On=we.dynamicProps;for(let qn=0;qn<On.length;qn++){const zt=On[qn],un=Gt[zt],An=gn[zt];(An!==un||zt==="value")&&a(vt,zt,un,An,Fe,_e)}}gt&1&&le.children!==we.children&&v(vt,we.children)}else!pt&&mt==null&&te(vt,Gt,gn,_e,Fe);((In=gn.onVnodeUpdated)||Vt)&&go(()=>{In&&Mc(In,_e,we,le),Vt&&np(we,le,_e,"updated")},fe)},j=(le,we,_e,fe,Fe,rt,pt)=>{for(let vt=0;vt<we.length;vt++){const gt=le[vt],mt=we[vt],Vt=gt.el&&(gt.type===ln||!Sf(gt,mt)||gt.shapeFlag&198)?x(gt.el):_e;P(gt,mt,Vt,null,fe,Fe,rt,pt,!0)}},te=(le,we,_e,fe,Fe)=>{if(we!==_e){if(we!==Ur)for(const rt in we)!t0(rt)&&!(rt in _e)&&a(le,rt,we[rt],null,Fe,fe);for(const rt in _e){if(t0(rt))continue;const pt=_e[rt],vt=we[rt];pt!==vt&&rt!=="value"&&a(le,rt,vt,pt,Fe,fe)}"value"in _e&&a(le,"value",we.value,_e.value,Fe)}},Z=(le,we,_e,fe,Fe,rt,pt,vt,gt)=>{const mt=we.el=le?le.el:h(""),Vt=we.anchor=le?le.anchor:h("");let{patchFlag:Gt,dynamicChildren:gn,slotScopeIds:In}=we;In&&(vt=vt?vt.concat(In):In),le==null?(i(mt,_e,fe),i(Vt,_e,fe),$(we.children||[],_e,Vt,Fe,rt,pt,vt,gt)):Gt>0&&Gt&64&&gn&&le.dynamicChildren?(j(le.dynamicChildren,gn,_e,Fe,rt,pt,vt),(we.key!=null||Fe&&we===Fe.subTree)&&cA(le,we,!0)):Xe(le,we,_e,Vt,Fe,rt,pt,vt,gt)},ee=(le,we,_e,fe,Fe,rt,pt,vt,gt)=>{we.slotScopeIds=vt,le==null?we.shapeFlag&512?Fe.ctx.activate(we,_e,fe,pt,gt):be(we,_e,fe,Fe,rt,pt,gt):Ie(le,we,gt)},be=(le,we,_e,fe,Fe,rt,pt)=>{const vt=le.component=wH(le,fe,Fe);if(_T(le)&&(vt.ctx.renderer=yt),TH(vt,!1,pt),vt.asyncDep){if(Fe&&Fe.registerDep(vt,Ve,pt),!le.el){const gt=vt.subTree=ue(Fo);F(null,gt,we,_e),le.placeholder=gt.el}}else Ve(vt,le,we,_e,Fe,rt,pt)},Ie=(le,we,_e)=>{const fe=we.component=le.component;if(pH(le,we,_e))if(fe.asyncDep&&!fe.asyncResolved){Ke(fe,we,_e);return}else fe.next=we,fe.update();else we.el=le.el,fe.vnode=we},Ve=(le,we,_e,fe,Fe,rt,pt)=>{const vt=()=>{if(le.isMounted){let{next:Gt,bu:gn,u:In,parent:On,vnode:qn}=le;{const wi=NB(le);if(wi){Gt&&(Gt.el=qn.el,Ke(le,Gt,pt)),wi.asyncDep.then(()=>{le.isUnmounted||vt()});return}}let zt=Gt,un;ip(le,!1),Gt?(Gt.el=qn.el,Ke(le,Gt,pt)):Gt=qn,gn&&Pv(gn),(un=Gt.props&&Gt.props.onVnodeBeforeUpdate)&&Mc(un,On,Gt,qn),ip(le,!0);const An=P3(le),Ln=le.subTree;le.subTree=An,P(Ln,An,x(Ln.el),ot(Ln),le,Fe,rt),Gt.el=An.el,zt===null&&gH(le,An.el),In&&go(In,Fe),(un=Gt.props&&Gt.props.onVnodeUpdated)&&go(()=>Mc(un,On,Gt,qn),Fe)}else{let Gt;const{el:gn,props:In}=we,{bm:On,m:qn,parent:zt,root:un,type:An}=le,Ln=kp(we);ip(le,!1),On&&Pv(On),!Ln&&(Gt=In&&In.onVnodeBeforeMount)&&Mc(Gt,zt,we),ip(le,!0);{un.ce&&un.ce._def.shadowRoot!==!1&&un.ce._injectChildStyle(An);const wi=le.subTree=P3(le);P(null,wi,_e,fe,le,Fe,rt),we.el=wi.el}if(qn&&go(qn,Fe),!Ln&&(Gt=In&&In.onVnodeMounted)){const wi=we;go(()=>Mc(Gt,zt,wi),Fe)}(we.shapeFlag&256||zt&&kp(zt.vnode)&&zt.vnode.shapeFlag&256)&&le.a&&go(le.a,Fe),le.isMounted=!0,we=_e=fe=null}};le.scope.on();const gt=le.effect=new UV(vt);le.scope.off();const mt=le.update=gt.run.bind(gt),Vt=le.job=gt.runIfDirty.bind(gt);Vt.i=le,Vt.id=le.uid,gt.scheduler=()=>iA(Vt),ip(le,!0),mt()},Ke=(le,we,_e)=>{we.component=le;const fe=le.vnode.props;le.vnode=we,le.next=null,JW(le,we.props,fe,_e),nH(le,we.children,_e),vh(),_3(le),_h()},Xe=(le,we,_e,fe,Fe,rt,pt,vt,gt=!1)=>{const mt=le&&le.children,Vt=le?le.shapeFlag:0,Gt=we.children,{patchFlag:gn,shapeFlag:In}=we;if(gn>0){if(gn&128){$e(mt,Gt,_e,fe,Fe,rt,pt,vt,gt);return}else if(gn&256){Pe(mt,Gt,_e,fe,Fe,rt,pt,vt,gt);return}}In&8?(Vt&16&&Nt(mt,Fe,rt),Gt!==mt&&v(_e,Gt)):Vt&16?In&16?$e(mt,Gt,_e,fe,Fe,rt,pt,vt,gt):Nt(mt,Fe,rt,!0):(Vt&8&&v(_e,""),In&16&&$(Gt,_e,fe,Fe,rt,pt,vt,gt))},Pe=(le,we,_e,fe,Fe,rt,pt,vt,gt)=>{le=le||Iv,we=we||Iv;const mt=le.length,Vt=we.length,Gt=Math.min(mt,Vt);let gn;for(gn=0;gn<Gt;gn++){const In=we[gn]=gt?xf(we[gn]):Ku(we[gn]);P(le[gn],In,_e,null,Fe,rt,pt,vt,gt)}mt>Vt?Nt(le,Fe,rt,!0,!1,Gt):$(we,_e,fe,Fe,rt,pt,vt,gt,Gt)},$e=(le,we,_e,fe,Fe,rt,pt,vt,gt)=>{let mt=0;const Vt=we.length;let Gt=le.length-1,gn=Vt-1;for(;mt<=Gt&&mt<=gn;){const In=le[mt],On=we[mt]=gt?xf(we[mt]):Ku(we[mt]);if(Sf(In,On))P(In,On,_e,null,Fe,rt,pt,vt,gt);else break;mt++}for(;mt<=Gt&&mt<=gn;){const In=le[Gt],On=we[gn]=gt?xf(we[gn]):Ku(we[gn]);if(Sf(In,On))P(In,On,_e,null,Fe,rt,pt,vt,gt);else break;Gt--,gn--}if(mt>Gt){if(mt<=gn){const In=gn+1,On=In<Vt?we[In].el:fe;for(;mt<=gn;)P(null,we[mt]=gt?xf(we[mt]):Ku(we[mt]),_e,On,Fe,rt,pt,vt,gt),mt++}}else if(mt>gn)for(;mt<=Gt;)We(le[mt],Fe,rt,!0),mt++;else{const In=mt,On=mt,qn=new Map;for(mt=On;mt<=gn;mt++){const Ji=we[mt]=gt?xf(we[mt]):Ku(we[mt]);Ji.key!=null&&qn.set(Ji.key,mt)}let zt,un=0;const An=gn-On+1;let Ln=!1,wi=0;const hi=new Array(An);for(mt=0;mt<An;mt++)hi[mt]=0;for(mt=In;mt<=Gt;mt++){const Ji=le[mt];if(un>=An){We(Ji,Fe,rt,!0);continue}let Tr;if(Ji.key!=null)Tr=qn.get(Ji.key);else for(zt=On;zt<=gn;zt++)if(hi[zt-On]===0&&Sf(Ji,we[zt])){Tr=zt;break}Tr===void 0?We(Ji,Fe,rt,!0):(hi[Tr-On]=mt+1,Tr>=wi?wi=Tr:Ln=!0,P(Ji,we[Tr],_e,null,Fe,rt,pt,vt,gt),un++)}const fs=Ln?oH(hi):Iv;for(zt=fs.length-1,mt=An-1;mt>=0;mt--){const Ji=On+mt,Tr=we[Ji],Wo=we[Ji+1],Eo=Ji+1<Vt?Wo.el||Wo.placeholder:fe;hi[mt]===0?P(null,Tr,_e,Eo,Fe,rt,pt,vt,gt):Ln&&(zt<0||mt!==fs[zt]?Ee(Tr,_e,Eo,2):zt--)}}},Ee=(le,we,_e,fe,Fe=null)=>{const{el:rt,type:pt,transition:vt,children:gt,shapeFlag:mt}=le;if(mt&6){Ee(le.component.subTree,we,_e,fe);return}if(mt&128){le.suspense.move(we,_e,fe);return}if(mt&64){pt.move(le,we,_e,yt);return}if(pt===ln){i(rt,we,_e);for(let Gt=0;Gt<gt.length;Gt++)Ee(gt[Gt],we,_e,fe);i(le.anchor,we,_e);return}if(pt===x1){H(le,we,_e);return}if(fe!==2&&mt&1&&vt)if(fe===0)vt.beforeEnter(rt),i(rt,we,_e),go(()=>vt.enter(rt),Fe);else{const{leave:Gt,delayLeave:gn,afterLeave:In}=vt,On=()=>{le.ctx.isUnmounted?r(rt):i(rt,we,_e)},qn=()=>{rt._isLeaving&&rt[ih](!0),Gt(rt,()=>{On(),In&&In()})};gn?gn(rt,On,qn):qn()}else i(rt,we,_e)},We=(le,we,_e,fe=!1,Fe=!1)=>{const{type:rt,props:pt,ref:vt,children:gt,dynamicChildren:mt,shapeFlag:Vt,patchFlag:Gt,dirs:gn,cacheIndex:In}=le;if(Gt===-2&&(Fe=!1),vt!=null&&(vh(),s0(vt,null,_e,le,!0),_h()),In!=null&&(we.renderCache[In]=void 0),Vt&256){we.ctx.deactivate(le);return}const On=Vt&1&&gn,qn=!kp(le);let zt;if(qn&&(zt=pt&&pt.onVnodeBeforeUnmount)&&Mc(zt,we,le),Vt&6)kt(le.component,_e,fe);else{if(Vt&128){le.suspense.unmount(_e,fe);return}On&&np(le,null,we,"beforeUnmount"),Vt&64?le.type.remove(le,we,_e,yt,fe):mt&&!mt.hasOnce&&(rt!==ln||Gt>0&&Gt&64)?Nt(mt,we,_e,!1,!0):(rt===ln&&Gt&384||!Fe&&Vt&16)&&Nt(gt,we,_e),fe&&Ze(le)}(qn&&(zt=pt&&pt.onVnodeUnmounted)||On)&&go(()=>{zt&&Mc(zt,we,le),On&&np(le,null,we,"unmounted")},_e)},Ze=le=>{const{type:we,el:_e,anchor:fe,transition:Fe}=le;if(we===ln){ct(_e,fe);return}if(we===x1){q(le);return}const rt=()=>{r(_e),Fe&&!Fe.persisted&&Fe.afterLeave&&Fe.afterLeave()};if(le.shapeFlag&1&&Fe&&!Fe.persisted){const{leave:pt,delayLeave:vt}=Fe,gt=()=>pt(_e,rt);vt?vt(le.el,rt,gt):gt()}else rt()},ct=(le,we)=>{let _e;for(;le!==we;)_e=T(le),r(le),le=_e;r(we)},kt=(le,we,_e)=>{const{bum:fe,scope:Fe,job:rt,subTree:pt,um:vt,m:gt,a:mt}=le;ow(gt),ow(mt),fe&&Pv(fe),Fe.stop(),rt&&(rt.flags|=8,We(pt,le,we,_e)),vt&&go(vt,we),go(()=>{le.isUnmounted=!0},we)},Nt=(le,we,_e,fe=!1,Fe=!1,rt=0)=>{for(let pt=rt;pt<le.length;pt++)We(le[pt],we,_e,fe,Fe)},ot=le=>{if(le.shapeFlag&6)return ot(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const we=T(le.anchor||le.el),_e=we&&we[dB];return _e?T(_e):we};let dt=!1;const Je=(le,we,_e)=>{le==null?we._vnode&&We(we._vnode,null,null,!0):P(we._vnode||null,le,we,null,null,null,_e),we._vnode=le,dt||(dt=!0,_3(),lB(),dt=!1)},yt={p:P,um:We,m:Ee,r:Ze,mt:be,mc:$,pc:Xe,pbc:j,n:ot,o:e};return{render:Je,hydrate:void 0,createApp:YW(Je)}}function HE({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ip({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sH(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function cA(e,t,n=!1){const i=e.children,r=t.children;if(Qn(i)&&Qn(r))for(let a=0;a<i.length;a++){const l=i[a];let h=r[a];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=r[a]=xf(r[a]),h.el=l.el),!n&&h.patchFlag!==-2&&cA(l,h)),h.type===xb&&h.patchFlag!==-1&&(h.el=l.el),h.type===Fo&&!h.el&&(h.el=l.el)}}function oH(e){const t=e.slice(),n=[0];let i,r,a,l,h;const s=e.length;for(i=0;i<s;i++){const p=e[i];if(p!==0){if(r=n[n.length-1],e[r]<p){t[i]=r,n.push(i);continue}for(a=0,l=n.length-1;a<l;)h=a+l>>1,e[n[h]]<p?a=h+1:l=h;p<e[n[a]]&&(a>0&&(t[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function NB(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:NB(t)}function ow(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const aH=Symbol.for("v-scx"),lH=()=>ki(aH);function Wr(e,t){return uA(e,null,t)}function Zt(e,t,n){return uA(e,t,n)}function uA(e,t,n=Ur){const{immediate:i,deep:r,flush:a,once:l}=n,h=wo({},n),s=t&&i||!t&&a!=="post";let p;if(P0){if(a==="sync"){const C=lH();p=C.__watcherHandles||(C.__watcherHandles=[])}else if(!s){const C=()=>{};return C.stop=Zu,C.resume=Zu,C.pause=Zu,C}}const v=Ba;h.call=(C,I,P)=>gu(C,v,I,P);let x=!1;a==="post"?h.scheduler=C=>{go(C,v&&v.suspense)}:a!=="sync"&&(x=!0,h.scheduler=(C,I)=>{I?C():iA(C)}),h.augmentJob=C=>{t&&(C.flags|=4),x&&(C.flags|=2,v&&(C.id=v.uid,C.i=v))};const T=CW(e,t,h);return P0&&(p?p.push(T):s&&T()),T}function cH(e,t,n){const i=this.proxy,r=ts(e)?e.includes(".")?$B(i,e):()=>i[e]:e.bind(i,i);let a;bi(t)?a=t:(a=t.handler,n=t);const l=wb(this),h=uA(r,a.bind(i),n);return l(),h}function $B(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const uH=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${cl(t)}Modifiers`]||e[`${rg(t)}Modifiers`];function dH(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Ur;let r=n;const a=t.startsWith("update:"),l=a&&uH(i,t.slice(7));l&&(l.trim&&(r=n.map(v=>ts(v)?v.trim():v)),l.number&&(r=n.map(J1)));let h,s=i[h=BE(t)]||i[h=BE(cl(t))];!s&&a&&(s=i[h=BE(rg(t))]),s&&gu(s,e,6,r);const p=i[h+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[h])return;e.emitted[h]=!0,gu(p,e,6,r)}}const hH=new WeakMap;function UB(e,t,n=!1){const i=n?hH:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const a=e.emits;let l={},h=!1;if(!bi(e)){const s=p=>{const v=UB(p,t,!0);v&&(h=!0,wo(l,v))};!n&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!a&&!h?(Mr(e)&&i.set(e,null),null):(Qn(a)?a.forEach(s=>l[s]=null):wo(l,a),Mr(e)&&i.set(e,l),l)}function wT(e,t){return!e||!uT(t)?!1:(t=t.slice(2).replace(/Once$/,""),Cr(e,t[0].toLowerCase()+t.slice(1))||Cr(e,rg(t))||Cr(e,t))}function P3(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[a],slots:l,attrs:h,emit:s,render:p,renderCache:v,props:x,data:T,setupState:C,ctx:I,inheritAttrs:P}=e,D=iw(e);let F,V;try{if(n.shapeFlag&4){const q=r||i,K=q;F=Ku(p.call(K,q,v,x,C,T,I)),V=h}else{const q=t;F=Ku(q.length>1?q(x,{attrs:h,slots:l,emit:s}):q(x,null)),V=t.props?h:fH(h)}}catch(q){a0.length=0,vT(q,e,1),F=ue(Fo)}let H=F;if(V&&P!==!1){const q=Object.keys(V),{shapeFlag:K}=H;q.length&&K&7&&(a&&q.some(KI)&&(V=mH(V,a)),H=od(H,V,!1,!0))}return n.dirs&&(H=od(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Xf(H,n.transition),F=H,iw(D),F}const fH=e=>{let t;for(const n in e)(n==="class"||n==="style"||uT(n))&&((t||(t={}))[n]=e[n]);return t},mH=(e,t)=>{const n={};for(const i in e)(!KI(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function pH(e,t,n){const{props:i,children:r,component:a}=e,{props:l,children:h,patchFlag:s}=t,p=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&s>=0){if(s&1024)return!0;if(s&16)return i?M3(i,l,p):!!l;if(s&8){const v=t.dynamicProps;for(let x=0;x<v.length;x++){const T=v[x];if(l[T]!==i[T]&&!wT(p,T))return!0}}}else return(r||h)&&(!h||!h.$stable)?!0:i===l?!1:i?l?M3(i,l,p):!0:!!l;return!1}function M3(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const a=i[r];if(t[a]!==e[a]&&!wT(n,a))return!0}return!1}function gH({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const aw=e=>e.__isSuspense;function vH(e,t){t&&t.pendingBranch?Qn(e)?t.effects.push(...e):t.effects.push(e):AW(e)}const ln=Symbol.for("v-fgt"),xb=Symbol.for("v-txt"),Fo=Symbol.for("v-cmt"),x1=Symbol.for("v-stc"),a0=[];let nc=null;function Kt(e=!1){a0.push(nc=e?null:[])}function _H(){a0.pop(),nc=a0[a0.length-1]||null}let A0=1;function lw(e,t=!1){A0+=e,e<0&&nc&&t&&(nc.hasOnce=!0)}function jB(e){return e.dynamicChildren=A0>0?nc||Iv:null,_H(),A0>0&&nc&&nc.push(e),e}function an(e,t,n,i,r,a){return jB(B(e,t,n,i,r,a,!0))}function za(e,t,n,i,r){return jB(ue(e,t,n,i,r,!0))}function Up(e){return e?e.__v_isVNode===!0:!1}function Sf(e,t){return e.type===t.type&&e.key===t.key}const WB=({key:e})=>e??null,w1=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ts(e)||Bs(e)||bi(e)?{i:la,r:e,k:t,f:!!n}:e:null);function B(e,t=null,n=null,i=0,r=null,a=e===ln?0:1,l=!1,h=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&WB(t),ref:t&&w1(t),scopeId:uB,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:la};return h?(dA(s,n),a&128&&e.normalize(s)):n&&(s.shapeFlag|=ts(n)?8:16),A0>0&&!l&&nc&&(s.patchFlag>0||a&6)&&s.patchFlag!==32&&nc.push(s),s}const ue=yH;function yH(e,t=null,n=null,i=0,r=null,a=!1){if((!e||e===EB)&&(e=Fo),Up(e)){const h=od(e,t,!0);return n&&dA(h,n),A0>0&&!a&&nc&&(h.shapeFlag&6?nc[nc.indexOf(e)]=h:nc.push(h)),h.patchFlag=-2,h}if(kH(e)&&(e=e.__vccOpts),t){t=HB(t);let{class:h,style:s}=t;h&&!ts(h)&&(t.class=Tt(h)),Mr(s)&&(gT(s)&&!Qn(s)&&(s=wo({},s)),t.style=Yt(s))}const l=ts(e)?1:aw(e)?128:hB(e)?64:Mr(e)?4:bi(e)?2:0;return B(e,t,n,i,r,l,a,!0)}function HB(e){return e?gT(e)||RB(e)?wo({},e):e:null}function od(e,t,n=!1,i=!1){const{props:r,ref:a,patchFlag:l,children:h,transition:s}=e,p=t?Dt(r||{},t):r,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&WB(p),ref:t&&t.ref?n&&a?Qn(a)?a.concat(w1(t)):[a,w1(t)]:w1(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:h,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ln?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:s,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&od(e.ssContent),ssFallback:e.ssFallback&&od(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return s&&i&&Xf(v,s.clone(v)),v}function zn(e=" ",t=0){return ue(xb,null,e,t)}function cw(e,t){const n=ue(x1,null,e);return n.staticCount=t,n}function Si(e="",t=!1){return t?(Kt(),za(Fo,null,e)):ue(Fo,null,e)}function Ku(e){return e==null||typeof e=="boolean"?ue(Fo):Qn(e)?ue(ln,null,e.slice()):Up(e)?xf(e):ue(xb,null,String(e))}function xf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:od(e)}function dA(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Qn(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),dA(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!RB(t)?t._ctx=la:r===3&&la&&(la.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else bi(t)?(t={default:t,_ctx:la},n=32):(t=String(t),i&64?(n=16,t=[zn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Dt(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Tt([t.class,i.class]));else if(r==="style")t.style=Yt([t.style,i.style]);else if(uT(r)){const a=t[r],l=i[r];l&&a!==l&&!(Qn(a)&&a.includes(l))&&(t[r]=a?[].concat(a,l):l)}else r!==""&&(t[r]=i[r])}return t}function Mc(e,t,n,i=null){gu(e,t,7,[n,i])}const bH=MB();let xH=0;function wH(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||bH,a={uid:xH++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new NV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:VB(i,r),emitsOptions:UB(i,r),emit:null,emitted:null,propsDefaults:Ur,inheritAttrs:i.inheritAttrs,ctx:Ur,data:Ur,props:Ur,attrs:Ur,slots:Ur,refs:Ur,setupState:Ur,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=dH.bind(null,a),e.ce&&e.ce(a),a}let Ba=null;const b_=()=>Ba||la;let uw,tk;{const e=fT(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),a=>{r.length>1?r.forEach(l=>l(a)):r[0](a)}};uw=t("__VUE_INSTANCE_SETTERS__",n=>Ba=n),tk=t("__VUE_SSR_SETTERS__",n=>P0=n)}const wb=e=>{const t=Ba;return uw(e),e.scope.on(),()=>{e.scope.off(),uw(t)}},D3=()=>{Ba&&Ba.scope.off(),uw(null)};function GB(e){return e.vnode.shapeFlag&4}let P0=!1;function TH(e,t=!1,n=!1){t&&tk(t);const{props:i,children:r}=e.vnode,a=GB(e);ZW(e,i,a,t),tH(e,r,n||t);const l=a?SH(e,t):void 0;return t&&tk(!1),l}function SH(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,jW);const{setup:i}=n;if(i){vh();const r=e.setupContext=i.length>1?CH(e):null,a=wb(e),l=bb(i,e,0,[e.props,r]),h=LV(l);if(_h(),a(),(h||e.sp)&&!kp(e)&&xB(e),h){if(l.then(D3,D3),t)return l.then(s=>{L3(e,s)}).catch(s=>{vT(s,e,0)});e.asyncDep=l}else L3(e,l)}else qB(e)}function L3(e,t,n){bi(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Mr(t)&&(e.setupState=rB(t)),qB(e)}function qB(e,t,n){const i=e.type;e.render||(e.render=i.render||Zu);{const r=wb(e);vh();try{WW(e)}finally{_h(),r()}}}const EH={get(e,t){return Oa(e,"get",""),e[t]}};function CH(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,EH),slots:e.slots,emit:e.emit,expose:t}}function TT(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(rB(nB(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in o0)return o0[n](e)},has(t,n){return n in t||n in o0}})):e.proxy}function nk(e,t=!0){return bi(e)?e.displayName||e.name:e.name||t&&e.__name}function kH(e){return bi(e)&&"__vccOpts"in e}const me=(e,t)=>SW(e,t,P0);function Ih(e,t,n){try{lw(-1);const i=arguments.length;return i===2?Mr(t)&&!Qn(t)?Up(t)?ue(e,null,[t]):ue(e,t):ue(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Up(n)&&(n=[n]),ue(e,t,n))}finally{lw(1)}}const IH="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ik;const R3=typeof window<"u"&&window.trustedTypes;if(R3)try{ik=R3.createPolicy("vue",{createHTML:e=>e})}catch{}const KB=ik?e=>ik.createHTML(e):e=>e,AH="http://www.w3.org/2000/svg",PH="http://www.w3.org/1998/Math/MathML",eh=typeof document<"u"?document:null,O3=eh&&eh.createElement("template"),MH={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?eh.createElementNS(AH,e):t==="mathml"?eh.createElementNS(PH,e):n?eh.createElement(e,{is:n}):eh.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>eh.createTextNode(e),createComment:e=>eh.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>eh.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,a){const l=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{O3.innerHTML=KB(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const h=O3.content;if(i==="svg"||i==="mathml"){const s=h.firstChild;for(;s.firstChild;)h.appendChild(s.firstChild);h.removeChild(s)}t.insertBefore(h,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vf="transition",ky="animation",Wv=Symbol("_vtc"),XB={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},YB=wo({},gB,XB),DH=e=>(e.displayName="Transition",e.props=YB,e),Ol=DH((e,{slots:t})=>Ih(LW,ZB(e),t)),rp=(e,t=[])=>{Qn(e)?e.forEach(n=>n(...t)):e&&e(...t)},V3=e=>e?Qn(e)?e.some(t=>t.length>1):e.length>1:!1;function ZB(e){const t={};for(const Z in e)Z in XB||(t[Z]=e[Z]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:h=`${n}-enter-to`,appearFromClass:s=a,appearActiveClass:p=l,appearToClass:v=h,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:T=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=e,I=LH(r),P=I&&I[0],D=I&&I[1],{onBeforeEnter:F,onEnter:V,onEnterCancelled:H,onLeave:q,onLeaveCancelled:K,onBeforeAppear:ie=F,onAppear:X=V,onAppearCancelled:$=H}=t,G=(Z,ee,be,Ie)=>{Z._enterCancelled=Ie,yf(Z,ee?v:h),yf(Z,ee?p:l),be&&be()},j=(Z,ee)=>{Z._isLeaving=!1,yf(Z,x),yf(Z,C),yf(Z,T),ee&&ee()},te=Z=>(ee,be)=>{const Ie=Z?X:V,Ve=()=>G(ee,Z,be);rp(Ie,[ee,Ve]),B3(()=>{yf(ee,Z?s:a),Uu(ee,Z?v:h),V3(Ie)||F3(ee,i,P,Ve)})};return wo(t,{onBeforeEnter(Z){rp(F,[Z]),Uu(Z,a),Uu(Z,l)},onBeforeAppear(Z){rp(ie,[Z]),Uu(Z,s),Uu(Z,p)},onEnter:te(!1),onAppear:te(!0),onLeave(Z,ee){Z._isLeaving=!0;const be=()=>j(Z,ee);Uu(Z,x),Z._enterCancelled?(Uu(Z,T),rk(Z)):(rk(Z),Uu(Z,T)),B3(()=>{Z._isLeaving&&(yf(Z,x),Uu(Z,C),V3(q)||F3(Z,i,D,be))}),rp(q,[Z,be])},onEnterCancelled(Z){G(Z,!1,void 0,!0),rp(H,[Z])},onAppearCancelled(Z){G(Z,!0,void 0,!0),rp($,[Z])},onLeaveCancelled(Z){j(Z),rp(K,[Z])}})}function LH(e){if(e==null)return null;if(Mr(e))return[GE(e.enter),GE(e.leave)];{const t=GE(e);return[t,t]}}function GE(e){return jj(e)}function Uu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Wv]||(e[Wv]=new Set)).add(t)}function yf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[Wv];n&&(n.delete(t),n.size||(e[Wv]=void 0))}function B3(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let RH=0;function F3(e,t,n,i){const r=e._endId=++RH,a=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:h,propCount:s}=JB(e,t);if(!l)return i();const p=l+"end";let v=0;const x=()=>{e.removeEventListener(p,T),a()},T=C=>{C.target===e&&++v>=s&&x()};setTimeout(()=>{v<s&&x()},h+1),e.addEventListener(p,T)}function JB(e,t){const n=window.getComputedStyle(e),i=I=>(n[I]||"").split(", "),r=i(`${vf}Delay`),a=i(`${vf}Duration`),l=z3(r,a),h=i(`${ky}Delay`),s=i(`${ky}Duration`),p=z3(h,s);let v=null,x=0,T=0;t===vf?l>0&&(v=vf,x=l,T=a.length):t===ky?p>0&&(v=ky,x=p,T=s.length):(x=Math.max(l,p),v=x>0?l>p?vf:ky:null,T=v?v===vf?a.length:s.length:0);const C=v===vf&&/\b(?:transform|all)(?:,|$)/.test(i(`${vf}Property`).toString());return{type:v,timeout:x,propCount:T,hasTransform:C}}function z3(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>N3(n)+N3(e[i])))}function N3(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function rk(e){return(e?e.ownerDocument:document).body.offsetHeight}function OH(e,t,n){const i=e[Wv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const dw=Symbol("_vod"),QB=Symbol("_vsh"),bu={name:"show",beforeMount(e,{value:t},{transition:n}){e[dw]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Iy(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Iy(e,!0),i.enter(e)):i.leave(e,()=>{Iy(e,!1)}):Iy(e,t))},beforeUnmount(e,{value:t}){Iy(e,t)}};function Iy(e,t){e.style.display=t?e[dw]:"none",e[QB]=!t}const VH=Symbol(""),BH=/(?:^|;)\s*display\s*:/;function FH(e,t,n){const i=e.style,r=ts(n);let a=!1;if(n&&!r){if(t)if(ts(t))for(const l of t.split(";")){const h=l.slice(0,l.indexOf(":")).trim();n[h]==null&&T1(i,h,"")}else for(const l in t)n[l]==null&&T1(i,l,"");for(const l in n)l==="display"&&(a=!0),T1(i,l,n[l])}else if(r){if(t!==n){const l=i[VH];l&&(n+=";"+l),i.cssText=n,a=BH.test(n)}}else t&&e.removeAttribute("style");dw in e&&(e[dw]=a?i.display:"",e[QB]&&(i.display="none"))}const $3=/\s*!important$/;function T1(e,t,n){if(Qn(n))n.forEach(i=>T1(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=zH(e,t);$3.test(n)?e.setProperty(rg(i),n.replace($3,""),"important"):e[i]=n}}const U3=["Webkit","Moz","ms"],qE={};function zH(e,t){const n=qE[t];if(n)return n;let i=cl(t);if(i!=="filter"&&i in e)return qE[t]=i;i=md(i);for(let r=0;r<U3.length;r++){const a=U3[r]+i;if(a in e)return qE[t]=a}return t}const j3="http://www.w3.org/1999/xlink";function W3(e,t,n,i,r,a=Yj(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(j3,t.slice(6,t.length)):e.setAttributeNS(j3,t,n):n==null||a&&!BV(n)?e.removeAttribute(t):e.setAttribute(t,a?"":pu(n)?String(n):n)}function H3(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?KB(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,s=n==null?e.type==="checkbox"?"on":"":String(n);(h!==s||!("_value"in e))&&(e.value=s),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=BV(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(r||t)}function yp(e,t,n,i){e.addEventListener(t,n,i)}function NH(e,t,n,i){e.removeEventListener(t,n,i)}const G3=Symbol("_vei");function $H(e,t,n,i,r=null){const a=e[G3]||(e[G3]={}),l=a[t];if(i&&l)l.value=i;else{const[h,s]=UH(t);if(i){const p=a[t]=HH(i,r);yp(e,h,p,s)}else l&&(NH(e,h,l,s),a[t]=void 0)}}const q3=/(?:Once|Passive|Capture)$/;function UH(e){let t;if(q3.test(e)){t={};let i;for(;i=e.match(q3);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rg(e.slice(2)),t]}let KE=0;const jH=Promise.resolve(),WH=()=>KE||(jH.then(()=>KE=0),KE=Date.now());function HH(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;gu(GH(i,n.value),t,5,[i])};return n.value=e,n.attached=WH(),n}function GH(e,t){if(Qn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const K3=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,qH=(e,t,n,i,r,a)=>{const l=r==="svg";t==="class"?OH(e,i,l):t==="style"?FH(e,n,i):uT(t)?KI(t)||$H(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):KH(e,t,i,l))?(H3(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&W3(e,t,i,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ts(i))?H3(e,cl(t),i,a,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),W3(e,t,i,l))};function KH(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&K3(t)&&bi(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return K3(t)&&ts(n)?!1:t in e}const e6=new WeakMap,t6=new WeakMap,hw=Symbol("_moveCb"),X3=Symbol("_enterCb"),XH=e=>(delete e.props.mode,e),YH=XH({name:"TransitionGroup",props:wo({},YB,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=b_(),i=pB();let r,a;return xT(()=>{if(!r.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!eG(r[0].el,n.vnode.el,l)){r=[];return}r.forEach(ZH),r.forEach(JH);const h=r.filter(QH);rk(n.vnode.el),h.forEach(s=>{const p=s.el,v=p.style;Uu(p,l),v.transform=v.webkitTransform=v.transitionDuration="";const x=p[hw]=T=>{T&&T.target!==p||(!T||T.propertyName.endsWith("transform"))&&(p.removeEventListener("transitionend",x),p[hw]=null,yf(p,l))};p.addEventListener("transitionend",x)}),r=[]}),()=>{const l=jn(e),h=ZB(l);let s=l.tag||ln;if(r=[],a)for(let p=0;p<a.length;p++){const v=a[p];v.el&&v.el instanceof Element&&(r.push(v),Xf(v,I0(v,h,i,n)),e6.set(v,v.el.getBoundingClientRect()))}a=t.default?rA(t.default()):[];for(let p=0;p<a.length;p++){const v=a[p];v.key!=null&&Xf(v,I0(v,h,i,n))}return ue(s,null,a)}}}),hA=YH;function ZH(e){const t=e.el;t[hw]&&t[hw](),t[X3]&&t[X3]()}function JH(e){t6.set(e,e.el.getBoundingClientRect())}function QH(e){const t=e6.get(e),n=t6.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${i}px,${r}px)`,a.transitionDuration="0s",e}}function eG(e,t,n){const i=e.cloneNode(),r=e[Wv];r&&r.forEach(h=>{h.split(/\s+/).forEach(s=>s&&i.classList.remove(s))}),n.split(/\s+/).forEach(h=>h&&i.classList.add(h)),i.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(i);const{hasTransform:l}=JB(i);return a.removeChild(i),l}const fw=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qn(t)?n=>Pv(t,n):t};function tG(e){e.target.composing=!0}function Y3(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Lv=Symbol("_assign"),wf={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Lv]=fw(r);const a=i||r.props&&r.props.type==="number";yp(e,t?"change":"input",l=>{if(l.target.composing)return;let h=e.value;n&&(h=h.trim()),a&&(h=J1(h)),e[Lv](h)}),n&&yp(e,"change",()=>{e.value=e.value.trim()}),t||(yp(e,"compositionstart",tG),yp(e,"compositionend",Y3),yp(e,"change",Y3))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:a}},l){if(e[Lv]=fw(l),e.composing)return;const h=(a||e.type==="number")&&!/^0\d/.test(e.value)?J1(e.value):e.value,s=t??"";h!==s&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===s)||(e.value=s))}},M0={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=dT(t);yp(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?J1(mw(l)):mw(l));e[Lv](e.multiple?r?new Set(a):a:a[0]),e._assigning=!0,Gn(()=>{e._assigning=!1})}),e[Lv]=fw(i)},mounted(e,{value:t}){Z3(e,t)},beforeUpdate(e,t,n){e[Lv]=fw(n)},updated(e,{value:t}){e._assigning||Z3(e,t)}};function Z3(e,t){const n=e.multiple,i=Qn(t);if(!(n&&!i&&!dT(t))){for(let r=0,a=e.options.length;r<a;r++){const l=e.options[r],h=mw(l);if(n)if(i){const s=typeof h;s==="string"||s==="number"?l.selected=t.some(p=>String(p)===String(h)):l.selected=Jj(t,h)>-1}else l.selected=t.has(h);else if(mT(mw(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function mw(e){return"_value"in e?e._value:e.value}const nG=["ctrl","shift","alt","meta"],iG={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>nG.some(n=>e[`${n}Key`]&&!t.includes(n))},sa=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...a)=>{for(let l=0;l<t.length;l++){const h=iG[t[l]];if(h&&h(r,t))return}return e(r,...a)}))},rG=wo({patchProp:qH},MH);let J3;function n6(){return J3||(J3=iH(rG))}const i6=((...e)=>{n6().render(...e)}),sG=((...e)=>{const t=n6().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=aG(i);if(!r)return;const a=t._component;!bi(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=n(r,!1,oG(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t});function oG(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function aG(e){return ts(e)?document.querySelector(e):e}const r6=""+new URL("MrtFootage-DMPXgCOJ.mp4",import.meta.url).href;function s6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S1={exports:{}},lG=S1.exports,Q3;function cG(){return Q3||(Q3=1,(function(e,t){(function(n,i){e.exports=i()})(lG,function(){return(function(n){function i(a){if(r[a])return r[a].exports;var l=r[a]={exports:{},id:a,loaded:!1};return n[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var r={};return i.m=n,i.c=r,i.p="dist/",i(0)})([function(n,i,r){function a(be){return be&&be.__esModule?be:{default:be}}var l=Object.assign||function(be){for(var Ie=1;Ie<arguments.length;Ie++){var Ve=arguments[Ie];for(var Ke in Ve)Object.prototype.hasOwnProperty.call(Ve,Ke)&&(be[Ke]=Ve[Ke])}return be},h=r(1),s=(a(h),r(6)),p=a(s),v=r(7),x=a(v),T=r(8),C=a(T),I=r(9),P=a(I),D=r(10),F=a(D),V=r(11),H=a(V),q=r(14),K=a(q),ie=[],X=!1,$={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},G=function(){var be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(be&&(X=!0),X)return ie=(0,H.default)(ie,$),(0,F.default)(ie,$.once),ie},j=function(){ie=(0,K.default)(),G()},te=function(){ie.forEach(function(be,Ie){be.node.removeAttribute("data-aos"),be.node.removeAttribute("data-aos-easing"),be.node.removeAttribute("data-aos-duration"),be.node.removeAttribute("data-aos-delay")})},Z=function(be){return be===!0||be==="mobile"&&P.default.mobile()||be==="phone"&&P.default.phone()||be==="tablet"&&P.default.tablet()||typeof be=="function"&&be()===!0},ee=function(be){$=l($,be),ie=(0,K.default)();var Ie=document.all&&!window.atob;return Z($.disable)||Ie?te():($.disableMutationObserver||C.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),$.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",$.easing),document.querySelector("body").setAttribute("data-aos-duration",$.duration),document.querySelector("body").setAttribute("data-aos-delay",$.delay),$.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?G(!0):$.startEvent==="load"?window.addEventListener($.startEvent,function(){G(!0)}):document.addEventListener($.startEvent,function(){G(!0)}),window.addEventListener("resize",(0,x.default)(G,$.debounceDelay,!0)),window.addEventListener("orientationchange",(0,x.default)(G,$.debounceDelay,!0)),window.addEventListener("scroll",(0,p.default)(function(){(0,F.default)(ie,$.once)},$.throttleDelay)),$.disableMutationObserver||C.default.ready("[data-aos]",j),ie)};n.exports={init:ee,refresh:G,refreshHard:j}},function(n,i){},,,,,function(n,i){(function(r){function a(Z,ee,be){function Ie(_e){var fe=ct,Fe=kt;return ct=kt=void 0,yt=_e,ot=Z.apply(Fe,fe)}function Ve(_e){return yt=_e,dt=setTimeout(Pe,ee),Ne?Ie(_e):ot}function Ke(_e){var fe=_e-Je,Fe=_e-yt,rt=ee-fe;return le?j(rt,Nt-Fe):rt}function Xe(_e){var fe=_e-Je,Fe=_e-yt;return Je===void 0||fe>=ee||fe<0||le&&Fe>=Nt}function Pe(){var _e=te();return Xe(_e)?$e(_e):void(dt=setTimeout(Pe,Ke(_e)))}function $e(_e){return dt=void 0,we&&ct?Ie(_e):(ct=kt=void 0,ot)}function Ee(){dt!==void 0&&clearTimeout(dt),yt=0,ct=Je=kt=dt=void 0}function We(){return dt===void 0?ot:$e(te())}function Ze(){var _e=te(),fe=Xe(_e);if(ct=arguments,kt=this,Je=_e,fe){if(dt===void 0)return Ve(Je);if(le)return dt=setTimeout(Pe,ee),Ie(Je)}return dt===void 0&&(dt=setTimeout(Pe,ee)),ot}var ct,kt,Nt,ot,dt,Je,yt=0,Ne=!1,le=!1,we=!0;if(typeof Z!="function")throw new TypeError(T);return ee=v(ee)||0,h(be)&&(Ne=!!be.leading,le="maxWait"in be,Nt=le?G(v(be.maxWait)||0,ee):Nt,we="trailing"in be?!!be.trailing:we),Ze.cancel=Ee,Ze.flush=We,Ze}function l(Z,ee,be){var Ie=!0,Ve=!0;if(typeof Z!="function")throw new TypeError(T);return h(be)&&(Ie="leading"in be?!!be.leading:Ie,Ve="trailing"in be?!!be.trailing:Ve),a(Z,ee,{leading:Ie,maxWait:ee,trailing:Ve})}function h(Z){var ee=typeof Z>"u"?"undefined":x(Z);return!!Z&&(ee=="object"||ee=="function")}function s(Z){return!!Z&&(typeof Z>"u"?"undefined":x(Z))=="object"}function p(Z){return(typeof Z>"u"?"undefined":x(Z))=="symbol"||s(Z)&&$.call(Z)==I}function v(Z){if(typeof Z=="number")return Z;if(p(Z))return C;if(h(Z)){var ee=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=h(ee)?ee+"":ee}if(typeof Z!="string")return Z===0?Z:+Z;Z=Z.replace(P,"");var be=F.test(Z);return be||V.test(Z)?H(Z.slice(2),be?2:8):D.test(Z)?C:+Z}var x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},T="Expected a function",C=NaN,I="[object Symbol]",P=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,V=/^0o[0-7]+$/i,H=parseInt,q=(typeof r>"u"?"undefined":x(r))=="object"&&r&&r.Object===Object&&r,K=(typeof self>"u"?"undefined":x(self))=="object"&&self&&self.Object===Object&&self,ie=q||K||Function("return this")(),X=Object.prototype,$=X.toString,G=Math.max,j=Math.min,te=function(){return ie.Date.now()};n.exports=l}).call(i,(function(){return this})())},function(n,i){(function(r){function a(te,Z,ee){function be(we){var _e=Ze,fe=ct;return Ze=ct=void 0,Je=we,Nt=te.apply(fe,_e)}function Ie(we){return Je=we,ot=setTimeout(Xe,Z),yt?be(we):Nt}function Ve(we){var _e=we-dt,fe=we-Je,Fe=Z-_e;return Ne?G(Fe,kt-fe):Fe}function Ke(we){var _e=we-dt,fe=we-Je;return dt===void 0||_e>=Z||_e<0||Ne&&fe>=kt}function Xe(){var we=j();return Ke(we)?Pe(we):void(ot=setTimeout(Xe,Ve(we)))}function Pe(we){return ot=void 0,le&&Ze?be(we):(Ze=ct=void 0,Nt)}function $e(){ot!==void 0&&clearTimeout(ot),Je=0,Ze=dt=ct=ot=void 0}function Ee(){return ot===void 0?Nt:Pe(j())}function We(){var we=j(),_e=Ke(we);if(Ze=arguments,ct=this,dt=we,_e){if(ot===void 0)return Ie(dt);if(Ne)return ot=setTimeout(Xe,Z),be(dt)}return ot===void 0&&(ot=setTimeout(Xe,Z)),Nt}var Ze,ct,kt,Nt,ot,dt,Je=0,yt=!1,Ne=!1,le=!0;if(typeof te!="function")throw new TypeError(x);return Z=p(Z)||0,l(ee)&&(yt=!!ee.leading,Ne="maxWait"in ee,kt=Ne?$(p(ee.maxWait)||0,Z):kt,le="trailing"in ee?!!ee.trailing:le),We.cancel=$e,We.flush=Ee,We}function l(te){var Z=typeof te>"u"?"undefined":v(te);return!!te&&(Z=="object"||Z=="function")}function h(te){return!!te&&(typeof te>"u"?"undefined":v(te))=="object"}function s(te){return(typeof te>"u"?"undefined":v(te))=="symbol"||h(te)&&X.call(te)==C}function p(te){if(typeof te=="number")return te;if(s(te))return T;if(l(te)){var Z=typeof te.valueOf=="function"?te.valueOf():te;te=l(Z)?Z+"":Z}if(typeof te!="string")return te===0?te:+te;te=te.replace(I,"");var ee=D.test(te);return ee||F.test(te)?V(te.slice(2),ee?2:8):P.test(te)?T:+te}var v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},x="Expected a function",T=NaN,C="[object Symbol]",I=/^\s+|\s+$/g,P=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,F=/^0o[0-7]+$/i,V=parseInt,H=(typeof r>"u"?"undefined":v(r))=="object"&&r&&r.Object===Object&&r,q=(typeof self>"u"?"undefined":v(self))=="object"&&self&&self.Object===Object&&self,K=H||q||Function("return this")(),ie=Object.prototype,X=ie.toString,$=Math.max,G=Math.min,j=function(){return K.Date.now()};n.exports=a}).call(i,(function(){return this})())},function(n,i){function r(v){var x=void 0,T=void 0;for(x=0;x<v.length;x+=1)if(T=v[x],T.dataset&&T.dataset.aos||T.children&&r(T.children))return!0;return!1}function a(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function l(){return!!a()}function h(v,x){var T=window.document,C=a(),I=new C(s);p=x,I.observe(T.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function s(v){v&&v.forEach(function(x){var T=Array.prototype.slice.call(x.addedNodes),C=Array.prototype.slice.call(x.removedNodes),I=T.concat(C);if(r(I))return p()})}Object.defineProperty(i,"__esModule",{value:!0});var p=function(){};i.default={isSupported:l,ready:h}},function(n,i){function r(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function a(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(i,"__esModule",{value:!0});var l=(function(){function T(C,I){for(var P=0;P<I.length;P++){var D=I[P];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(C,D.key,D)}}return function(C,I,P){return I&&T(C.prototype,I),P&&T(C,P),C}})(),h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,v=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,x=(function(){function T(){r(this,T)}return l(T,[{key:"phone",value:function(){var C=a();return!(!h.test(C)&&!s.test(C.substr(0,4)))}},{key:"mobile",value:function(){var C=a();return!(!p.test(C)&&!v.test(C.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),T})();i.default=new x},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(l,h,s){var p=l.node.getAttribute("data-aos-once");h>l.position?l.node.classList.add("aos-animate"):typeof p<"u"&&(p==="false"||!s&&p!=="true")&&l.node.classList.remove("aos-animate")},a=function(l,h){var s=window.pageYOffset,p=window.innerHeight;l.forEach(function(v,x){r(v,p+s,h)})};i.default=a},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(12),h=a(l),s=function(p,v){return p.forEach(function(x,T){x.node.classList.add("aos-init"),x.position=(0,h.default)(x.node,v.offset)}),p};i.default=s},function(n,i,r){function a(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(i,"__esModule",{value:!0});var l=r(13),h=a(l),s=function(p,v){var x=0,T=0,C=window.innerHeight,I={offset:p.getAttribute("data-aos-offset"),anchor:p.getAttribute("data-aos-anchor"),anchorPlacement:p.getAttribute("data-aos-anchor-placement")};switch(I.offset&&!isNaN(I.offset)&&(T=parseInt(I.offset)),I.anchor&&document.querySelectorAll(I.anchor)&&(p=document.querySelectorAll(I.anchor)[0]),x=(0,h.default)(p).top,I.anchorPlacement){case"top-bottom":break;case"center-bottom":x+=p.offsetHeight/2;break;case"bottom-bottom":x+=p.offsetHeight;break;case"top-center":x+=C/2;break;case"bottom-center":x+=C/2+p.offsetHeight;break;case"center-center":x+=C/2+p.offsetHeight/2;break;case"top-top":x+=C;break;case"bottom-top":x+=p.offsetHeight+C;break;case"center-top":x+=p.offsetHeight/2+C}return I.anchorPlacement||I.offset||isNaN(v)||(T=v),x+T};i.default=s},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){for(var l=0,h=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)l+=a.offsetLeft-(a.tagName!="BODY"?a.scrollLeft:0),h+=a.offsetTop-(a.tagName!="BODY"?a.scrollTop:0),a=a.offsetParent;return{top:h,left:l}};i.default=r},function(n,i){Object.defineProperty(i,"__esModule",{value:!0});var r=function(a){return a=a||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(a,function(l){return{node:l}})};i.default=r}])})})(S1)),S1.exports}var uG=cG();const Wx=s6(uG);function th(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var lc={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hv={duration:.5,overwrite:!1,delay:0},fA,ca,cs,Oc=1e8,$r=1/Oc,sk=Math.PI*2,dG=sk/4,hG=0,a6=Math.sqrt,fG=Math.cos,mG=Math.sin,$o=function(t){return typeof t=="string"},Os=function(t){return typeof t=="function"},yh=function(t){return typeof t=="number"},mA=function(t){return typeof t>"u"},ad=function(t){return typeof t=="object"},Ml=function(t){return t!==!1},pA=function(){return typeof window<"u"},Hx=function(t){return Os(t)||$o(t)},l6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Wa=Array.isArray,ok=/(?:-?\.?\d|\.)+/gi,c6=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xv=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,XE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,u6=/[+-]=-?[.\d]+/,d6=/[^,'"\[\]\s]+/gi,pG=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,bs,Gu,ak,gA,cc={},pw={},h6,f6=function(t){return(pw=Gv(t,cc))&&Vl},vA=function(t,n){return console.warn("Invalid property",t,"set to",n,"Missing plugin? gsap.registerPlugin()")},D0=function(t,n){return!n&&console.warn(t)},m6=function(t,n){return t&&(cc[t]=n)&&pw&&(pw[t]=n)||cc},L0=function(){return 0},gG={suppressEvents:!0,isStart:!0,kill:!1},E1={suppressEvents:!0,kill:!1},vG={suppressEvents:!0},_A={},Nf=[],lk={},p6,Ql={},YE={},eR=30,C1=[],yA="",bA=function(t){var n=t[0],i,r;if(ad(n)||Os(n)||(t=[t]),!(i=(n._gsap||{}).harness)){for(r=C1.length;r--&&!C1[r].targetTest(n););i=C1[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new z6(t[r],i)))||t.splice(r,1);return t},Ip=function(t){return t._gsap||bA(Vc(t))[0]._gsap},g6=function(t,n,i){return(i=t[n])&&Os(i)?t[n]():mA(i)&&t.getAttribute&&t.getAttribute(n)||i},Dl=function(t,n){return(t=t.split(",")).forEach(n)||t},Hs=function(t){return Math.round(t*1e5)/1e5||0},so=function(t){return Math.round(t*1e7)/1e7||0},Rv=function(t,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},_G=function(t,n){for(var i=n.length,r=0;t.indexOf(n[r])<0&&++r<i;);return r<i},gw=function(){var t=Nf.length,n=Nf.slice(0),i,r;for(lk={},Nf.length=0,i=0;i<t;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},xA=function(t){return!!(t._initted||t._startAt||t.add)},v6=function(t,n,i,r){Nf.length&&!ca&&gw(),t.render(n,i,!!(ca&&n<0&&xA(t))),Nf.length&&!ca&&gw()},_6=function(t){var n=parseFloat(t);return(n||n===0)&&(t+"").match(d6).length<2?n:$o(t)?t.trim():t},y6=function(t){return t},uc=function(t,n){for(var i in n)i in t||(t[i]=n[i]);return t},yG=function(t){return function(n,i){for(var r in i)r in n||r==="duration"&&t||r==="ease"||(n[r]=i[r])}},Gv=function(t,n){for(var i in n)t[i]=n[i];return t},tR=function e(t,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=ad(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},vw=function(t,n){var i={},r;for(r in t)r in n||(i[r]=t[r]);return i},l0=function(t){var n=t.parent||bs,i=t.keyframes?yG(Wa(t.keyframes)):uc;if(Ml(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},bG=function(t,n){for(var i=t.length,r=i===n.length;r&&i--&&t[i]===n[i];);return i<0},b6=function(t,n,i,r,a){var l=t[r],h;if(a)for(h=n[a];l&&l[a]>h;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=t[i],t[i]=n),n._next?n._next._prev=n:t[r]=n,n._prev=l,n.parent=n._dp=t,n},ST=function(t,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:t[i]===n&&(t[i]=l),l?l._prev=a:t[r]===n&&(t[r]=a),n._next=n._prev=n.parent=null},Yf=function(t,n){t.parent&&(!n||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ap=function(t,n){if(t&&(!n||n._end>t._dur||n._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},xG=function(t){for(var n=t.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return t},ck=function(t,n,i,r){return t._startAt&&(ca?t._startAt.revert(E1):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(n,!0,r))},wG=function e(t){return!t||t._ts&&e(t.parent)},nR=function(t){return t._repeat?qv(t._tTime,t=t.duration()+t._rDelay)*t:0},qv=function(t,n){var i=Math.floor(t=so(t/n));return t&&i===t?i-1:i},_w=function(t,n){return(t-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},ET=function(t){return t._end=so(t._start+(t._tDur/Math.abs(t._ts||t._rts||$r)||0))},CT=function(t,n){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=so(i._time-(t._ts>0?n/t._ts:((t._dirty?t.totalDuration():t._tDur)-n)/-t._ts)),ET(t),i._dirty||Ap(i,t)),t},x6=function(t,n){var i;if((n._time||!n._dur&&n._initted||n._start<t._time&&(n._dur||!n.add))&&(i=_w(t.rawTime(),n),(!n._dur||Tb(0,n.totalDuration(),i)-n._tTime>$r)&&n.render(i,!0)),Ap(t,n)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-$r}},Xu=function(t,n,i,r){return n.parent&&Yf(n),n._start=so((yh(i)?i:i||t!==bs?Dc(t,i,n):t._time)+n._delay),n._end=so(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),b6(t,n,"_first","_last",t._sort?"_start":0),uk(n)||(t._recent=n),r||x6(t,n),t._ts<0&&CT(t,t._tTime),t},w6=function(t,n){return(cc.ScrollTrigger||vA("scrollTrigger",n))&&cc.ScrollTrigger.create(n,t)},T6=function(t,n,i,r,a){if(TA(t,n,a),!t._initted)return 1;if(!i&&t._pt&&!ca&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&p6!==ec.frame)return Nf.push(t),t._lazy=[a,r],1},TG=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},uk=function(t){var n=t.data;return n==="isFromStart"||n==="isStart"},SG=function(t,n,i,r){var a=t.ratio,l=n<0||!n&&(!t._start&&TG(t)&&!(!t._initted&&uk(t))||(t._ts<0||t._dp._ts<0)&&!uk(t))?0:1,h=t._rDelay,s=0,p,v,x;if(h&&t._repeat&&(s=Tb(0,t._tDur,n),v=qv(s,h),t._yoyo&&v&1&&(l=1-l),v!==qv(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||ca||r||t._zTime===$r||!n&&t._zTime){if(!t._initted&&T6(t,n,r,i,s))return;for(x=t._zTime,t._zTime=n||(i?$r:0),i||(i=n&&!x),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=s,p=t._pt;p;)p.r(l,p.d),p=p._next;n<0&&ck(t,n,i,!0),t._onUpdate&&!i&&ic(t,"onUpdate"),s&&t._repeat&&!i&&t.parent&&ic(t,"onRepeat"),(n>=t._tDur||n<0)&&t.ratio===l&&(l&&Yf(t,1),!i&&!ca&&(ic(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=n)},EG=function(t,n,i){var r;if(i>n)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},Kv=function(t,n,i,r){var a=t._repeat,l=so(n)||0,h=t._tTime/t._tDur;return h&&!r&&(t._time*=l/t._dur),t._dur=l,t._tDur=a?a<0?1e10:so(l*(a+1)+t._rDelay*a):l,h>0&&!r&&CT(t,t._tTime=t._tDur*h),t.parent&&ET(t),i||Ap(t.parent,t),t},iR=function(t){return t instanceof ll?Ap(t):Kv(t,t._dur)},CG={_start:0,endTime:L0,totalDuration:L0},Dc=function e(t,n,i){var r=t.labels,a=t._recent||CG,l=t.duration()>=Oc?a.endTime(!1):t._dur,h,s,p;return $o(n)&&(isNaN(n)||n in r)?(s=n.charAt(0),p=n.substr(-1)==="%",h=n.indexOf("="),s==="<"||s===">"?(h>=0&&(n=n.replace(/=/,"")),(s==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(p?(h<0?a:i).totalDuration()/100:1)):h<0?(n in r||(r[n]=l),r[n]):(s=parseFloat(n.charAt(h-1)+n.substr(h+1)),p&&i&&(s=s/100*(Wa(i)?i[0]:i).totalDuration()),h>1?e(t,n.substr(0,h-1),i)+s:l+s)):n==null?l:+n},c0=function(t,n,i){var r=yh(n[1]),a=(r?2:1)+(t<2?0:1),l=n[a],h,s;if(r&&(l.duration=n[1]),l.parent=i,t){for(h=l,s=i;s&&!("immediateRender"in h);)h=s.vars.defaults||{},s=Ml(s.vars.inherit)&&s.parent;l.immediateRender=Ml(h.immediateRender),t<2?l.runBackwards=1:l.startAt=n[a-1]}return new ro(n[0],l,n[a+1])},hm=function(t,n){return t||t===0?n(t):n},Tb=function(t,n,i){return i<t?t:i>n?n:i},Fa=function(t,n){return!$o(t)||!(n=pG.exec(t))?"":n[1]},kG=function(t,n,i){return hm(i,function(r){return Tb(t,n,r)})},dk=[].slice,S6=function(t,n){return t&&ad(t)&&"length"in t&&(!n&&!t.length||t.length-1 in t&&ad(t[0]))&&!t.nodeType&&t!==Gu},IG=function(t,n,i){return i===void 0&&(i=[]),t.forEach(function(r){var a;return $o(r)&&!n||S6(r,1)?(a=i).push.apply(a,Vc(r)):i.push(r)})||i},Vc=function(t,n,i){return cs&&!n&&cs.selector?cs.selector(t):$o(t)&&!i&&(ak||!Xv())?dk.call((n||gA).querySelectorAll(t),0):Wa(t)?IG(t,i):S6(t)?dk.call(t,0):t?[t]:[]},hk=function(t){return t=Vc(t)[0]||D0("Invalid scope")||{},function(n){var i=t.current||t.nativeElement||t;return Vc(n,i.querySelectorAll?i:i===t?D0("Invalid scope")||gA.createElement("div"):t)}},E6=function(t){return t.sort(function(){return .5-Math.random()})},C6=function(t){if(Os(t))return t;var n=ad(t)?t:{each:t},i=Pp(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},h=r>0&&r<1,s=isNaN(r)||h,p=n.axis,v=r,x=r;return $o(r)?v=x={center:.5,edges:.5,end:1}[r]||0:!h&&s&&(v=r[0],x=r[1]),function(T,C,I){var P=(I||n).length,D=l[P],F,V,H,q,K,ie,X,$,G;if(!D){if(G=n.grid==="auto"?0:(n.grid||[1,Oc])[1],!G){for(X=-Oc;X<(X=I[G++].getBoundingClientRect().left)&&G<P;);G<P&&G--}for(D=l[P]=[],F=s?Math.min(G,P)*v-.5:r%G,V=G===Oc?0:s?P*x/G-.5:r/G|0,X=0,$=Oc,ie=0;ie<P;ie++)H=ie%G-F,q=V-(ie/G|0),D[ie]=K=p?Math.abs(p==="y"?q:H):a6(H*H+q*q),K>X&&(X=K),K<$&&($=K);r==="random"&&E6(D),D.max=X-$,D.min=$,D.v=P=(parseFloat(n.amount)||parseFloat(n.each)*(G>P?P-1:p?p==="y"?P/G:G:Math.max(G,P/G))||0)*(r==="edges"?-1:1),D.b=P<0?a-P:a,D.u=Fa(n.amount||n.each)||0,i=i&&P<0?V6(i):i}return P=(D[T]-D.min)/D.max||0,so(D.b+(i?i(P):P)*D.v)+D.u}},fk=function(t){var n=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=so(Math.round(parseFloat(i)/t)*t*n);return(r-r%1)/n+(yh(i)?0:Fa(i))}},k6=function(t,n){var i=Wa(t),r,a;return!i&&ad(t)&&(r=i=t.radius||Oc,t.values?(t=Vc(t.values),(a=!yh(t[0]))&&(r*=r)):t=fk(t.increment)),hm(n,i?Os(t)?function(l){return a=t(l),Math.abs(a-l)<=r?a:l}:function(l){for(var h=parseFloat(a?l.x:l),s=parseFloat(a?l.y:0),p=Oc,v=0,x=t.length,T,C;x--;)a?(T=t[x].x-h,C=t[x].y-s,T=T*T+C*C):T=Math.abs(t[x]-h),T<p&&(p=T,v=x);return v=!r||p<=r?t[v]:l,a||v===l||yh(l)?v:v+Fa(l)}:fk(t))},I6=function(t,n,i,r){return hm(Wa(t)?!n:i===!0?!!(i=0):!r,function(){return Wa(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(n-t+i*.99))/i)*i*r)/r})},AG=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},PG=function(t,n){return function(i){return t(parseFloat(i))+(n||Fa(i))}},MG=function(t,n,i){return P6(t,n,0,1,i)},A6=function(t,n,i){return hm(i,function(r){return t[~~n(r)]})},DG=function e(t,n,i){var r=n-t;return Wa(t)?A6(t,e(0,t.length),n):hm(i,function(a){return(r+(a-t)%r)%r+t})},LG=function e(t,n,i){var r=n-t,a=r*2;return Wa(t)?A6(t,e(0,t.length-1),n):hm(i,function(l){return l=(a+(l-t)%a)%a||0,t+(l>r?a-l:l)})},R0=function(t){for(var n=0,i="",r,a,l,h;~(r=t.indexOf("random(",n));)l=t.indexOf(")",r),h=t.charAt(r+7)==="[",a=t.substr(r+7,l-r-7).match(h?d6:ok),i+=t.substr(n,r-n)+I6(h?a:+a[0],h?0:+a[1],+a[2]||1e-5),n=l+1;return i+t.substr(n,t.length-n)},P6=function(t,n,i,r,a){var l=n-t,h=r-i;return hm(a,function(s){return i+((s-t)/l*h||0)})},RG=function e(t,n,i,r){var a=isNaN(t+n)?0:function(C){return(1-C)*t+C*n};if(!a){var l=$o(t),h={},s,p,v,x,T;if(i===!0&&(r=1)&&(i=null),l)t={p:t},n={p:n};else if(Wa(t)&&!Wa(n)){for(v=[],x=t.length,T=x-2,p=1;p<x;p++)v.push(e(t[p-1],t[p]));x--,a=function(I){I*=x;var P=Math.min(T,~~I);return v[P](I-P)},i=n}else r||(t=Gv(Wa(t)?[]:{},t));if(!v){for(s in n)wA.call(h,t,s,"get",n[s]);a=function(I){return CA(I,h)||(l?t.p:t)}}}return hm(i,a)},rR=function(t,n,i){var r=t.labels,a=Oc,l,h,s;for(l in r)h=r[l]-n,h<0==!!i&&h&&a>(h=Math.abs(h))&&(s=l,a=h);return s},ic=function(t,n,i){var r=t.vars,a=r[n],l=cs,h=t._ctx,s,p,v;if(a)return s=r[n+"Params"],p=r.callbackScope||t,i&&Nf.length&&gw(),h&&(cs=h),v=s?a.apply(p,s):a.call(p),cs=l,v},zy=function(t){return Yf(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ca),t.progress()<1&&ic(t,"onInterrupt"),t},wv,M6=[],D6=function(t){if(t)if(t=!t.name&&t.default||t,pA()||t.headless){var n=t.name,i=Os(t),r=n&&!i&&t.init?function(){this._props=[]}:t,a={init:L0,render:CA,add:wA,kill:YG,modifier:XG,rawVars:0},l={targetTest:0,get:0,getSetter:EA,aliases:{},register:0};if(Xv(),t!==r){if(Ql[n])return;uc(r,uc(vw(t,a),l)),Gv(r.prototype,Gv(a,vw(t,l))),Ql[r.prop=n]=r,t.targetTest&&(C1.push(r),_A[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}m6(n,r),t.register&&t.register(Vl,r,Ll)}else M6.push(t)},Nr=255,Ny={aqua:[0,Nr,Nr],lime:[0,Nr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Nr],navy:[0,0,128],white:[Nr,Nr,Nr],olive:[128,128,0],yellow:[Nr,Nr,0],orange:[Nr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Nr,0,0],pink:[Nr,192,203],cyan:[0,Nr,Nr],transparent:[Nr,Nr,Nr,0]},ZE=function(t,n,i){return t+=t<0?1:t>1?-1:0,(t*6<1?n+(i-n)*t*6:t<.5?i:t*3<2?n+(i-n)*(2/3-t)*6:n)*Nr+.5|0},L6=function(t,n,i){var r=t?yh(t)?[t>>16,t>>8&Nr,t&Nr]:0:Ny.black,a,l,h,s,p,v,x,T,C,I;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ny[t])r=Ny[t];else if(t.charAt(0)==="#"){if(t.length<6&&(a=t.charAt(1),l=t.charAt(2),h=t.charAt(3),t="#"+a+a+l+l+h+h+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Nr,r&Nr,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Nr,t&Nr]}else if(t.substr(0,3)==="hsl"){if(r=I=t.match(ok),!n)s=+r[0]%360/360,p=+r[1]/100,v=+r[2]/100,l=v<=.5?v*(p+1):v+p-v*p,a=v*2-l,r.length>3&&(r[3]*=1),r[0]=ZE(s+1/3,a,l),r[1]=ZE(s,a,l),r[2]=ZE(s-1/3,a,l);else if(~t.indexOf("="))return r=t.match(c6),i&&r.length<4&&(r[3]=1),r}else r=t.match(ok)||Ny.transparent;r=r.map(Number)}return n&&!I&&(a=r[0]/Nr,l=r[1]/Nr,h=r[2]/Nr,x=Math.max(a,l,h),T=Math.min(a,l,h),v=(x+T)/2,x===T?s=p=0:(C=x-T,p=v>.5?C/(2-x-T):C/(x+T),s=x===a?(l-h)/C+(l<h?6:0):x===l?(h-a)/C+2:(a-l)/C+4,s*=60),r[0]=~~(s+.5),r[1]=~~(p*100+.5),r[2]=~~(v*100+.5)),i&&r.length<4&&(r[3]=1),r},R6=function(t){var n=[],i=[],r=-1;return t.split($f).forEach(function(a){var l=a.match(xv)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},sR=function(t,n,i){var r="",a=(t+r).match($f),l=n?"hsla(":"rgba(",h=0,s,p,v,x;if(!a)return t;if(a=a.map(function(T){return(T=L6(T,n,1))&&l+(n?T[0]+","+T[1]+"%,"+T[2]+"%,"+T[3]:T.join(","))+")"}),i&&(v=R6(t),s=i.c,s.join(r)!==v.c.join(r)))for(p=t.replace($f,"1").split(xv),x=p.length-1;h<x;h++)r+=p[h]+(~s.indexOf(h)?a.shift()||l+"0,0,0,0)":(v.length?v:a.length?a:i).shift());if(!p)for(p=t.split($f),x=p.length-1;h<x;h++)r+=p[h]+a[h];return r+p[x]},$f=(function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ny)e+="|"+t+"\\b";return new RegExp(e+")","gi")})(),OG=/hsl[a]?\(/,O6=function(t){var n=t.join(" "),i;if($f.lastIndex=0,$f.test(n))return i=OG.test(n),t[1]=sR(t[1],i),t[0]=sR(t[0],i,R6(t[1])),!0},O0,ec=(function(){var e=Date.now,t=500,n=33,i=e(),r=i,a=1e3/240,l=a,h=[],s,p,v,x,T,C,I=function P(D){var F=e()-r,V=D===!0,H,q,K,ie;if((F>t||F<0)&&(i+=F-n),r+=F,K=r-i,H=K-l,(H>0||V)&&(ie=++x.frame,T=K-x.time*1e3,x.time=K=K/1e3,l+=H+(H>=a?4:a-H),q=1),V||(s=p(P)),q)for(C=0;C<h.length;C++)h[C](K,T,ie,D)};return x={time:0,frame:0,tick:function(){I(!0)},deltaRatio:function(D){return T/(1e3/(D||60))},wake:function(){h6&&(!ak&&pA()&&(Gu=ak=window,gA=Gu.document||{},cc.gsap=Vl,(Gu.gsapVersions||(Gu.gsapVersions=[])).push(Vl.version),f6(pw||Gu.GreenSockGlobals||!Gu.gsap&&Gu||{}),M6.forEach(D6)),v=typeof requestAnimationFrame<"u"&&requestAnimationFrame,s&&x.sleep(),p=v||function(D){return setTimeout(D,l-x.time*1e3+1|0)},O0=1,I(2))},sleep:function(){(v?cancelAnimationFrame:clearTimeout)(s),O0=0,p=L0},lagSmoothing:function(D,F){t=D||1/0,n=Math.min(F||33,t)},fps:function(D){a=1e3/(D||240),l=x.time*1e3+a},add:function(D,F,V){var H=F?function(q,K,ie,X){D(q,K,ie,X),x.remove(H)}:D;return x.remove(D),h[V?"unshift":"push"](H),Xv(),H},remove:function(D,F){~(F=h.indexOf(D))&&h.splice(F,1)&&C>=F&&C--},_listeners:h},x})(),Xv=function(){return!O0&&ec.wake()},Yi={},VG=/^[\d.\-M][\d.\-,\s]/,BG=/["']/g,FG=function(t){for(var n={},i=t.substr(1,t.length-3).split(":"),r=i[0],a=1,l=i.length,h,s,p;a<l;a++)s=i[a],h=a!==l-1?s.lastIndexOf(","):s.length,p=s.substr(0,h),n[r]=isNaN(p)?p.replace(BG,"").trim():+p,r=s.substr(h+1).trim();return n},zG=function(t){var n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n);return t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)},NG=function(t){var n=(t+"").split("("),i=Yi[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[FG(n[1])]:zG(t).split(",").map(_6)):Yi._CE&&VG.test(t)?Yi._CE("",t):i},V6=function(t){return function(n){return 1-t(1-n)}},B6=function e(t,n){for(var i=t._first,r;i;)i instanceof ll?e(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Pp=function(t,n){return t&&(Os(t)?t:Yi[t]||NG(t))||n},sg=function(t,n,i,r){i===void 0&&(i=function(s){return 1-n(1-s)}),r===void 0&&(r=function(s){return s<.5?n(s*2)/2:1-n((1-s)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return Dl(t,function(h){Yi[h]=cc[h]=a,Yi[l=h.toLowerCase()]=i;for(var s in a)Yi[l+(s==="easeIn"?".in":s==="easeOut"?".out":".inOut")]=Yi[h+"."+s]=a[s]}),a},F6=function(t){return function(n){return n<.5?(1-t(1-n*2))/2:.5+t((n-.5)*2)/2}},JE=function e(t,n,i){var r=n>=1?n:1,a=(i||(t?.3:.45))/(n<1?n:1),l=a/sk*(Math.asin(1/r)||0),h=function(v){return v===1?1:r*Math.pow(2,-10*v)*mG((v-l)*a)+1},s=t==="out"?h:t==="in"?function(p){return 1-h(1-p)}:F6(h);return a=sk/a,s.config=function(p,v){return e(t,p,v)},s},QE=function e(t,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=t==="out"?i:t==="in"?function(a){return 1-i(1-a)}:F6(i);return r.config=function(a){return e(t,a)},r};Dl("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;sg(e+",Power"+(n-1),t?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});Yi.Linear.easeNone=Yi.none=Yi.Linear.easeIn;sg("Elastic",JE("in"),JE("out"),JE());(function(e,t){var n=1/t,i=2*n,r=2.5*n,a=function(h){return h<n?e*h*h:h<i?e*Math.pow(h-1.5/t,2)+.75:h<r?e*(h-=2.25/t)*h+.9375:e*Math.pow(h-2.625/t,2)+.984375};sg("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);sg("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)});sg("Circ",function(e){return-(a6(1-e*e)-1)});sg("Sine",function(e){return e===1?1:-fG(e*dG)+1});sg("Back",QE("in"),QE("out"),QE());Yi.SteppedEase=Yi.steps=cc.SteppedEase={config:function(t,n){t===void 0&&(t=1);var i=1/t,r=t+(n?0:1),a=n?1:0,l=1-$r;return function(h){return((r*Tb(0,l,h)|0)+a)*i}}};Hv.ease=Yi["quad.out"];Dl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return yA+=e+","+e+"Params,"});var z6=function(t,n){this.id=hG++,t._gsap=this,this.target=t,this.harness=n,this.get=n?n.get:g6,this.set=n?n.getSetter:EA},V0=(function(){function e(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,Kv(this,+n.duration,1,1),this.data=n.data,cs&&(this._ctx=cs,cs.data.push(this)),O0||ec.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Kv(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(Xv(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(CT(this,i),!a._dp||a.parent||x6(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Xu(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===$r||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),v6(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+nR(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+nR(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?qv(this._tTime,a)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-$r?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?_w(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-$r?0:this._rts,this.totalTime(Tb(-Math.abs(this._delay),this.totalDuration(),a),r!==!1),ET(this),xG(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Xv(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==$r&&(this._tTime-=$r)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Xu(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Ml(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_w(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=vG);var r=ca;return ca=i,xA(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ca=r,this},t.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,iR(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,iR(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(Dc(this,i),Ml(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Ml(r)),this._dur||(this._zTime=-$r),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-$r:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-$r,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-$r)},t.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},t.then=function(i){var r=this;return new Promise(function(a){var l=Os(i)?i:y6,h=function(){var p=r.then;r.then=null,Os(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=p),a(l),r.then=p};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?h():r._prom=h})},t.kill=function(){zy(this)},e})();uc(V0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-$r,_prom:0,_ps:!1,_rts:1});var ll=(function(e){o6(t,e);function t(i,r){var a;return i===void 0&&(i={}),a=e.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=Ml(i.sortChildren),bs&&Xu(i.parent||bs,th(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&w6(th(a),i.scrollTrigger),a}var n=t.prototype;return n.to=function(r,a,l){return c0(0,arguments,this),this},n.from=function(r,a,l){return c0(1,arguments,this),this},n.fromTo=function(r,a,l,h){return c0(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,l0(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new ro(r,a,Dc(this,l),1),this},n.call=function(r,a,l){return Xu(this,ro.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,h,s,p,v){return l.duration=a,l.stagger=l.stagger||h,l.onComplete=p,l.onCompleteParams=v,l.parent=this,new ro(r,l,Dc(this,s)),this},n.staggerFrom=function(r,a,l,h,s,p,v){return l.runBackwards=1,l0(l).immediateRender=Ml(l.immediateRender),this.staggerTo(r,a,l,h,s,p,v)},n.staggerFromTo=function(r,a,l,h,s,p,v,x){return h.startAt=l,l0(h).immediateRender=Ml(h.immediateRender),this.staggerTo(r,a,h,s,p,v,x)},n.render=function(r,a,l){var h=this._time,s=this._dirty?this.totalDuration():this._tDur,p=this._dur,v=r<=0?0:so(r),x=this._zTime<0!=r<0&&(this._initted||!p),T,C,I,P,D,F,V,H,q,K,ie,X;if(this!==bs&&v>s&&r>=0&&(v=s),v!==this._tTime||l||x){if(h!==this._time&&p&&(v+=this._time-h,r+=this._time-h),T=v,q=this._start,H=this._ts,F=!H,x&&(p||(h=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(ie=this._yoyo,D=p+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(D*100+r,a,l);if(T=so(v%D),v===s?(P=this._repeat,T=p):(K=so(v/D),P=~~K,P&&P===K&&(T=p,P--),T>p&&(T=p)),K=qv(this._tTime,D),!h&&this._tTime&&K!==P&&this._tTime-K*D-this._dur<=0&&(K=P),ie&&P&1&&(T=p-T,X=1),P!==K&&!this._lock){var $=ie&&K&1,G=$===(ie&&P&1);if(P<K&&($=!$),h=$?0:v%p?p:v,this._lock=1,this.render(h||(X?0:so(P*D)),a,!p)._lock=0,this._tTime=v,!a&&this.parent&&ic(this,"onRepeat"),this.vars.repeatRefresh&&!X&&(this.invalidate()._lock=1),h&&h!==this._time||F!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,s=this._tDur,G&&(this._lock=2,h=$?p:-1e-4,this.render(h,!0),this.vars.repeatRefresh&&!X&&this.invalidate()),this._lock=0,!this._ts&&!F)return this;B6(this,X)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(V=EG(this,so(h),so(T)),V&&(v-=T-(T=V._start))),this._tTime=v,this._time=T,this._act=!H,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,h=0),!h&&v&&!a&&!K&&(ic(this,"onStart"),this._tTime!==v))return this;if(T>=h&&r>=0)for(C=this._first;C;){if(I=C._next,(C._act||T>=C._start)&&C._ts&&V!==C){if(C.parent!==this)return this.render(r,a,l);if(C.render(C._ts>0?(T-C._start)*C._ts:(C._dirty?C.totalDuration():C._tDur)+(T-C._start)*C._ts,a,l),T!==this._time||!this._ts&&!F){V=0,I&&(v+=this._zTime=-$r);break}}C=I}else{C=this._last;for(var j=r<0?r:T;C;){if(I=C._prev,(C._act||j<=C._end)&&C._ts&&V!==C){if(C.parent!==this)return this.render(r,a,l);if(C.render(C._ts>0?(j-C._start)*C._ts:(C._dirty?C.totalDuration():C._tDur)+(j-C._start)*C._ts,a,l||ca&&xA(C)),T!==this._time||!this._ts&&!F){V=0,I&&(v+=this._zTime=j?-$r:$r);break}}C=I}}if(V&&!a&&(this.pause(),V.render(T>=h?0:-$r)._zTime=T>=h?1:-1,this._ts))return this._start=q,ET(this),this.render(r,a,l);this._onUpdate&&!a&&ic(this,"onUpdate",!0),(v===s&&this._tTime>=this.totalDuration()||!v&&h)&&(q===this._start||Math.abs(H)!==Math.abs(this._ts))&&(this._lock||((r||!p)&&(v===s&&this._ts>0||!v&&this._ts<0)&&Yf(this,1),!a&&!(r<0&&!h)&&(v||h||!s)&&(ic(this,v===s&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<s&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(yh(a)||(a=Dc(this,a,r)),!(r instanceof V0)){if(Wa(r))return r.forEach(function(h){return l.add(h,a)}),this;if($o(r))return this.addLabel(r,a);if(Os(r))r=ro.delayedCall(0,r);else return this}return this!==r?Xu(this,r,a):this},n.getChildren=function(r,a,l,h){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),h===void 0&&(h=-Oc);for(var s=[],p=this._first;p;)p._start>=h&&(p instanceof ro?a&&s.push(p):(l&&s.push(p),r&&s.push.apply(s,p.getChildren(!0,a,l)))),p=p._next;return s},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return $o(r)?this.removeLabel(r):Os(r)?this.killTweensOf(r):(r.parent===this&&ST(this,r),r===this._recent&&(this._recent=this._last),Ap(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=so(ec.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),e.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=Dc(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var h=ro.delayedCall(0,a||L0,l);return h.data="isPause",this._hasPause=1,Xu(this,h,Dc(this,r))},n.removePause=function(r){var a=this._first;for(r=Dc(this,r);a;)a._start===r&&a.data==="isPause"&&Yf(a),a=a._next},n.killTweensOf=function(r,a,l){for(var h=this.getTweensOf(r,l),s=h.length;s--;)Af!==h[s]&&h[s].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],h=Vc(r),s=this._first,p=yh(a),v;s;)s instanceof ro?_G(s._targets,h)&&(p?(!Af||s._initted&&s._ts)&&s.globalTime(0)<=a&&s.globalTime(s.totalDuration())>a:!a||s.isActive())&&l.push(s):(v=s.getTweensOf(h,a)).length&&l.push.apply(l,v),s=s._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,h=Dc(l,r),s=a,p=s.startAt,v=s.onStart,x=s.onStartParams,T=s.immediateRender,C,I=ro.to(l,uc({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:h,overwrite:"auto",duration:a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale())||$r,onStart:function(){if(l.pause(),!C){var D=a.duration||Math.abs((h-(p&&"time"in p?p.time:l._time))/l.timeScale());I._dur!==D&&Kv(I,D,0,1).render(I._time,!0,!0),C=1}v&&v.apply(I,x||[])}},a));return T?I.render(0):I},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,uc({startAt:{time:Dc(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),rR(this,Dc(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),rR(this,Dc(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+$r)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var h=this._first,s=this.labels,p;h;)h._start>=l&&(h._start+=r,h._end+=r),h=h._next;if(a)for(p in s)s[p]>=l&&(s[p]+=r);return Ap(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return e.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ap(this)},n.totalDuration=function(r){var a=0,l=this,h=l._last,s=Oc,p,v,x;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(x=l.parent;h;)p=h._prev,h._dirty&&h.totalDuration(),v=h._start,v>s&&l._sort&&h._ts&&!l._lock?(l._lock=1,Xu(l,h,v-h._delay,1)._lock=0):s=v,v<0&&h._ts&&(a-=v,(!x&&!l._dp||x&&x.smoothChildTiming)&&(l._start+=v/l._ts,l._time-=v,l._tTime-=v),l.shiftChildren(-v,!1,-1/0),s=0),h._end>a&&h._ts&&(a=h._end),h=p;Kv(l,l===bs&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},t.updateRoot=function(r){if(bs._ts&&(v6(bs,_w(r,bs)),p6=ec.frame),ec.frame>=eR){eR+=lc.autoSleep||120;var a=bs._first;if((!a||!a._ts)&&lc.autoSleep&&ec._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||ec.sleep()}}},t})(V0);uc(ll.prototype,{_lock:0,_hasPause:0,_forcing:0});var $G=function(t,n,i,r,a,l,h){var s=new Ll(this._pt,t,n,0,1,H6,null,a),p=0,v=0,x,T,C,I,P,D,F,V;for(s.b=i,s.e=r,i+="",r+="",(F=~r.indexOf("random("))&&(r=R0(r)),l&&(V=[i,r],l(V,t,n),i=V[0],r=V[1]),T=i.match(XE)||[];x=XE.exec(r);)I=x[0],P=r.substring(p,x.index),C?C=(C+1)%5:P.substr(-5)==="rgba("&&(C=1),I!==T[v++]&&(D=parseFloat(T[v-1])||0,s._pt={_next:s._pt,p:P||v===1?P:",",s:D,c:I.charAt(1)==="="?Rv(D,I)-D:parseFloat(I)-D,m:C&&C<4?Math.round:0},p=XE.lastIndex);return s.c=p<r.length?r.substring(p,r.length):"",s.fp=h,(u6.test(r)||F)&&(s.e=0),this._pt=s,s},wA=function(t,n,i,r,a,l,h,s,p,v){Os(r)&&(r=r(a||0,t,l));var x=t[n],T=i!=="get"?i:Os(x)?p?t[n.indexOf("set")||!Os(t["get"+n.substr(3)])?n:"get"+n.substr(3)](p):t[n]():x,C=Os(x)?p?GG:j6:SA,I;if($o(r)&&(~r.indexOf("random(")&&(r=R0(r)),r.charAt(1)==="="&&(I=Rv(T,r)+(Fa(T)||0),(I||I===0)&&(r=I))),!v||T!==r||mk)return!isNaN(T*r)&&r!==""?(I=new Ll(this._pt,t,n,+T||0,r-(T||0),typeof x=="boolean"?KG:W6,0,C),p&&(I.fp=p),h&&I.modifier(h,this,t),this._pt=I):(!x&&!(n in t)&&vA(n,r),$G.call(this,t,n,T,r,C,s||lc.stringFilter,p))},UG=function(t,n,i,r,a){if(Os(t)&&(t=u0(t,a,n,i,r)),!ad(t)||t.style&&t.nodeType||Wa(t)||l6(t))return $o(t)?u0(t,a,n,i,r):t;var l={},h;for(h in t)l[h]=u0(t[h],a,n,i,r);return l},N6=function(t,n,i,r,a,l){var h,s,p,v;if(Ql[t]&&(h=new Ql[t]).init(a,h.rawVars?n[t]:UG(n[t],r,a,l,i),i,r,l)!==!1&&(i._pt=s=new Ll(i._pt,a,t,0,1,h.render,h,0,h.priority),i!==wv))for(p=i._ptLookup[i._targets.indexOf(a)],v=h._props.length;v--;)p[h._props[v]]=s;return h},Af,mk,TA=function e(t,n,i){var r=t.vars,a=r.ease,l=r.startAt,h=r.immediateRender,s=r.lazy,p=r.onUpdate,v=r.runBackwards,x=r.yoyoEase,T=r.keyframes,C=r.autoRevert,I=t._dur,P=t._startAt,D=t._targets,F=t.parent,V=F&&F.data==="nested"?F.vars.targets:D,H=t._overwrite==="auto"&&!fA,q=t.timeline,K,ie,X,$,G,j,te,Z,ee,be,Ie,Ve,Ke;if(q&&(!T||!a)&&(a="none"),t._ease=Pp(a,Hv.ease),t._yEase=x?V6(Pp(x===!0?a:x,Hv.ease)):0,x&&t._yoyo&&!t._repeat&&(x=t._yEase,t._yEase=t._ease,t._ease=x),t._from=!q&&!!r.runBackwards,!q||T&&!r.stagger){if(Z=D[0]?Ip(D[0]).harness:0,Ve=Z&&r[Z.prop],K=vw(r,_A),P&&(P._zTime<0&&P.progress(1),n<0&&v&&h&&!C?P.render(-1,!0):P.revert(v&&I?E1:gG),P._lazy=0),l){if(Yf(t._startAt=ro.set(D,uc({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!P&&Ml(s),startAt:null,delay:0,onUpdate:p&&function(){return ic(t,"onUpdate")},stagger:0},l))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ca||!h&&!C)&&t._startAt.revert(E1),h&&I&&n<=0&&i<=0){n&&(t._zTime=n);return}}else if(v&&I&&!P){if(n&&(h=!1),X=uc({overwrite:!1,data:"isFromStart",lazy:h&&!P&&Ml(s),immediateRender:h,stagger:0,parent:F},K),Ve&&(X[Z.prop]=Ve),Yf(t._startAt=ro.set(D,X)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(ca?t._startAt.revert(E1):t._startAt.render(-1,!0)),t._zTime=n,!h)e(t._startAt,$r,$r);else if(!n)return}for(t._pt=t._ptCache=0,s=I&&Ml(s)||s&&!I,ie=0;ie<D.length;ie++){if(G=D[ie],te=G._gsap||bA(D)[ie]._gsap,t._ptLookup[ie]=be={},lk[te.id]&&Nf.length&&gw(),Ie=V===D?ie:V.indexOf(G),Z&&(ee=new Z).init(G,Ve||K,t,Ie,V)!==!1&&(t._pt=$=new Ll(t._pt,G,ee.name,0,1,ee.render,ee,0,ee.priority),ee._props.forEach(function(Xe){be[Xe]=$}),ee.priority&&(j=1)),!Z||Ve)for(X in K)Ql[X]&&(ee=N6(X,K,t,Ie,G,V))?ee.priority&&(j=1):be[X]=$=wA.call(t,G,X,"get",K[X],Ie,V,0,r.stringFilter);t._op&&t._op[ie]&&t.kill(G,t._op[ie]),H&&t._pt&&(Af=t,bs.killTweensOf(G,be,t.globalTime(n)),Ke=!t.parent,Af=0),t._pt&&s&&(lk[te.id]=1)}j&&G6(t),t._onInit&&t._onInit(t)}t._onUpdate=p,t._initted=(!t._op||t._pt)&&!Ke,T&&n<=0&&q.render(Oc,!0,!0)},jG=function(t,n,i,r,a,l,h,s){var p=(t._pt&&t._ptCache||(t._ptCache={}))[n],v,x,T,C;if(!p)for(p=t._ptCache[n]=[],T=t._ptLookup,C=t._targets.length;C--;){if(v=T[C][n],v&&v.d&&v.d._pt)for(v=v.d._pt;v&&v.p!==n&&v.fp!==n;)v=v._next;if(!v)return mk=1,t.vars[n]="+=0",TA(t,h),mk=0,s?D0(n+" not eligible for reset"):1;p.push(v)}for(C=p.length;C--;)x=p[C],v=x._pt||x,v.s=(r||r===0)&&!a?r:v.s+(r||0)+l*v.c,v.c=i-v.s,x.e&&(x.e=Hs(i)+Fa(x.e)),x.b&&(x.b=v.s+Fa(x.b))},WG=function(t,n){var i=t[0]?Ip(t[0]).harness:0,r=i&&i.aliases,a,l,h,s;if(!r)return n;a=Gv({},n);for(l in r)if(l in a)for(s=r[l].split(","),h=s.length;h--;)a[s[h]]=a[l];return a},HG=function(t,n,i,r){var a=n.ease||r||"power1.inOut",l,h;if(Wa(n))h=i[t]||(i[t]=[]),n.forEach(function(s,p){return h.push({t:p/(n.length-1)*100,v:s,e:a})});else for(l in n)h=i[l]||(i[l]=[]),l==="ease"||h.push({t:parseFloat(t),v:n[l],e:a})},u0=function(t,n,i,r,a){return Os(t)?t.call(n,i,r,a):$o(t)&&~t.indexOf("random(")?R0(t):t},$6=yA+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",U6={};Dl($6+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return U6[e]=1});var ro=(function(e){o6(t,e);function t(i,r,a,l){var h;typeof r=="number"&&(a.duration=r,r=a,a=null),h=e.call(this,l?r:l0(r))||this;var s=h.vars,p=s.duration,v=s.delay,x=s.immediateRender,T=s.stagger,C=s.overwrite,I=s.keyframes,P=s.defaults,D=s.scrollTrigger,F=s.yoyoEase,V=r.parent||bs,H=(Wa(i)||l6(i)?yh(i[0]):"length"in r)?[i]:Vc(i),q,K,ie,X,$,G,j,te;if(h._targets=H.length?bA(H):D0("GSAP target "+i+" not found. https://gsap.com",!lc.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=C,I||T||Hx(p)||Hx(v)){if(r=h.vars,q=h.timeline=new ll({data:"nested",defaults:P||{},targets:V&&V.data==="nested"?V.vars.targets:H}),q.kill(),q.parent=q._dp=th(h),q._start=0,T||Hx(p)||Hx(v)){if(X=H.length,j=T&&C6(T),ad(T))for($ in T)~$6.indexOf($)&&(te||(te={}),te[$]=T[$]);for(K=0;K<X;K++)ie=vw(r,U6),ie.stagger=0,F&&(ie.yoyoEase=F),te&&Gv(ie,te),G=H[K],ie.duration=+u0(p,th(h),K,G,H),ie.delay=(+u0(v,th(h),K,G,H)||0)-h._delay,!T&&X===1&&ie.delay&&(h._delay=v=ie.delay,h._start+=v,ie.delay=0),q.to(G,ie,j?j(K,G,H):0),q._ease=Yi.none;q.duration()?p=v=0:h.timeline=0}else if(I){l0(uc(q.vars.defaults,{ease:"none"})),q._ease=Pp(I.ease||r.ease||"none");var Z=0,ee,be,Ie;if(Wa(I))I.forEach(function(Ve){return q.to(H,Ve,">")}),q.duration();else{ie={};for($ in I)$==="ease"||$==="easeEach"||HG($,I[$],ie,I.easeEach);for($ in ie)for(ee=ie[$].sort(function(Ve,Ke){return Ve.t-Ke.t}),Z=0,K=0;K<ee.length;K++)be=ee[K],Ie={ease:be.e,duration:(be.t-(K?ee[K-1].t:0))/100*p},Ie[$]=be.v,q.to(H,Ie,Z),Z+=Ie.duration;q.duration()<p&&q.to({},{duration:p-q.duration()})}}p||h.duration(p=q.duration())}else h.timeline=0;return C===!0&&!fA&&(Af=th(h),bs.killTweensOf(H),Af=0),Xu(V,th(h),a),r.reversed&&h.reverse(),r.paused&&h.paused(!0),(x||!p&&!I&&h._start===so(V._time)&&Ml(x)&&wG(th(h))&&V.data!=="nested")&&(h._tTime=-$r,h.render(Math.max(0,-v)||0)),D&&w6(th(h),D),h}var n=t.prototype;return n.render=function(r,a,l){var h=this._time,s=this._tDur,p=this._dur,v=r<0,x=r>s-$r&&!v?s:r<$r?0:r,T,C,I,P,D,F,V,H,q;if(!p)SG(this,r,a,l);else if(x!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==v||this._lazy){if(T=x,H=this.timeline,this._repeat){if(P=p+this._rDelay,this._repeat<-1&&v)return this.totalTime(P*100+r,a,l);if(T=so(x%P),x===s?(I=this._repeat,T=p):(D=so(x/P),I=~~D,I&&I===D?(T=p,I--):T>p&&(T=p)),F=this._yoyo&&I&1,F&&(q=this._yEase,T=p-T),D=qv(this._tTime,P),T===h&&!l&&this._initted&&I===D)return this._tTime=x,this;I!==D&&(H&&this._yEase&&B6(H,F),this.vars.repeatRefresh&&!F&&!this._lock&&T!==P&&this._initted&&(this._lock=l=1,this.render(so(P*I),!0).invalidate()._lock=0))}if(!this._initted){if(T6(this,v?r:T,l,a,x))return this._tTime=0,this;if(h!==this._time&&!(l&&this.vars.repeatRefresh&&I!==D))return this;if(p!==this._dur)return this.render(r,a,l)}if(this._tTime=x,this._time=T,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=V=(q||this._ease)(T/p),this._from&&(this.ratio=V=1-V),!h&&x&&!a&&!D&&(ic(this,"onStart"),this._tTime!==x))return this;for(C=this._pt;C;)C.r(V,C.d),C=C._next;H&&H.render(r<0?r:H._dur*H._ease(T/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(v&&ck(this,r,a,l),ic(this,"onUpdate")),this._repeat&&I!==D&&this.vars.onRepeat&&!a&&this.parent&&ic(this,"onRepeat"),(x===this._tDur||!x)&&this._tTime===x&&(v&&!this._onUpdate&&ck(this,r,!0,!0),(r||!p)&&(x===this._tDur&&this._ts>0||!x&&this._ts<0)&&Yf(this,1),!a&&!(v&&!h)&&(x||h||F)&&(ic(this,x===s?"onComplete":"onReverseComplete",!0),this._prom&&!(x<s&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),e.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,h,s){O0||ec.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),v;return this._initted||TA(this,p),v=this._ease(p/this._dur),jG(this,r,a,l,h,v,p,s)?this.resetTo(r,a,l,h,1):(CT(this,0),this.parent||b6(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?zy(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ca),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,Af&&Af.vars.overwrite!==!0)._first||zy(this),this.parent&&l!==this.timeline.totalDuration()&&Kv(this,this._dur*this.timeline._tDur/l,0,1),this}var h=this._targets,s=r?Vc(r):h,p=this._ptLookup,v=this._pt,x,T,C,I,P,D,F;if((!a||a==="all")&&bG(h,s))return a==="all"&&(this._pt=0),zy(this);for(x=this._op=this._op||[],a!=="all"&&($o(a)&&(P={},Dl(a,function(V){return P[V]=1}),a=P),a=WG(h,a)),F=h.length;F--;)if(~s.indexOf(h[F])){T=p[F],a==="all"?(x[F]=a,I=T,C={}):(C=x[F]=x[F]||{},I=a);for(P in I)D=T&&T[P],D&&((!("kill"in D.d)||D.d.kill(P)===!0)&&ST(this,D,"_pt"),delete T[P]),C!=="all"&&(C[P]=1)}return this._initted&&!this._pt&&v&&zy(this),this},t.to=function(r,a){return new t(r,a,arguments[2])},t.from=function(r,a){return c0(1,arguments)},t.delayedCall=function(r,a,l,h){return new t(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:h})},t.fromTo=function(r,a,l){return c0(2,arguments)},t.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new t(r,a)},t.killTweensOf=function(r,a,l){return bs.killTweensOf(r,a,l)},t})(V0);uc(ro.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Dl("staggerTo,staggerFrom,staggerFromTo",function(e){ro[e]=function(){var t=new ll,n=dk.call(arguments,0);return n.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,n)}});var SA=function(t,n,i){return t[n]=i},j6=function(t,n,i){return t[n](i)},GG=function(t,n,i,r){return t[n](r.fp,i)},qG=function(t,n,i){return t.setAttribute(n,i)},EA=function(t,n){return Os(t[n])?j6:mA(t[n])&&t.setAttribute?qG:SA},W6=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e6)/1e6,n)},KG=function(t,n){return n.set(n.t,n.p,!!(n.s+n.c*t),n)},H6=function(t,n){var i=n._pt,r="";if(!t&&n.b)r=n.b;else if(t===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},CA=function(t,n){for(var i=n._pt;i;)i.r(t,i.d),i=i._next},XG=function(t,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(t,n,i),a=l},YG=function(t){for(var n=this._pt,i,r;n;)r=n._next,n.p===t&&!n.op||n.op===t?ST(this,n,"_pt"):n.dep||(i=1),n=r;return!i},ZG=function(t,n,i,r){r.mSet(t,n,r.m.call(r.tween,i,r.mt),r)},G6=function(t){for(var n=t._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}t._pt=a},Ll=(function(){function e(n,i,r,a,l,h,s,p,v){this.t=i,this.s=a,this.c=l,this.p=r,this.r=h||W6,this.d=s||this,this.set=p||SA,this.pr=v||0,this._next=n,n&&(n._prev=this)}var t=e.prototype;return t.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=ZG,this.m=i,this.mt=a,this.tween=r},e})();Dl(yA+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return _A[e]=1});cc.TweenMax=cc.TweenLite=ro;cc.TimelineLite=cc.TimelineMax=ll;bs=new ll({sortChildren:!1,defaults:Hv,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});lc.stringFilter=O6;var Mp=[],k1={},JG=[],oR=0,QG=0,eC=function(t){return(k1[t]||JG).map(function(n){return n()})},pk=function(){var t=Date.now(),n=[];t-oR>2&&(eC("matchMediaInit"),Mp.forEach(function(i){var r=i.queries,a=i.conditions,l,h,s,p;for(h in r)l=Gu.matchMedia(r[h]).matches,l&&(s=1),l!==a[h]&&(a[h]=l,p=1);p&&(i.revert(),s&&n.push(i))}),eC("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),oR=t,eC("matchMedia"))},q6=(function(){function e(n,i){this.selector=i&&hk(i),this.data=[],this._r=[],this.isReverted=!1,this.id=QG++,n&&this.add(n)}var t=e.prototype;return t.add=function(i,r,a){Os(i)&&(a=r,r=i,i=Os);var l=this,h=function(){var p=cs,v=l.selector,x;return p&&p!==l&&p.data.push(l),a&&(l.selector=hk(a)),cs=l,x=r.apply(l,arguments),Os(x)&&l._r.push(x),cs=p,l.selector=v,l.isReverted=!1,x};return l.last=h,i===Os?h(l,function(s){return l.add(null,s)}):i?l[i]=h:h},t.ignore=function(i){var r=cs;cs=null,i(this),cs=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof e?i.push.apply(i,r.getTweens()):r instanceof ro&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var a=this;if(i?(function(){for(var h=a.getTweens(),s=a.data.length,p;s--;)p=a.data[s],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(v){return h.splice(h.indexOf(v),1)}));for(h.map(function(v){return{g:v._dur||v._delay||v._sat&&!v._sat.vars.immediateRender?v.globalTime(0):-1/0,t:v}}).sort(function(v,x){return x.g-v.g||-1/0}).forEach(function(v){return v.t.revert(i)}),s=a.data.length;s--;)p=a.data[s],p instanceof ll?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof ro)&&p.revert&&p.revert(i);a._r.forEach(function(v){return v(i,a)}),a.isReverted=!0})():this.data.forEach(function(h){return h.kill&&h.kill()}),this.clear(),r)for(var l=Mp.length;l--;)Mp[l].id===this.id&&Mp.splice(l,1)},t.revert=function(i){this.kill(i||{})},e})(),eq=(function(){function e(n){this.contexts=[],this.scope=n,cs&&cs.data.push(this)}var t=e.prototype;return t.add=function(i,r,a){ad(i)||(i={matches:i});var l=new q6(0,a||this.scope),h=l.conditions={},s,p,v;cs&&!l.selector&&(l.selector=cs.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(p in i)p==="all"?v=1:(s=Gu.matchMedia(i[p]),s&&(Mp.indexOf(l)<0&&Mp.push(l),(h[p]=s.matches)&&(v=1),s.addListener?s.addListener(pk):s.addEventListener("change",pk)));return v&&r(l,function(x){return l.add(null,x)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},e})(),yw={registerPlugin:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(r){return D6(r)})},timeline:function(t){return new ll(t)},getTweensOf:function(t,n){return bs.getTweensOf(t,n)},getProperty:function(t,n,i,r){$o(t)&&(t=Vc(t)[0]);var a=Ip(t||{}).get,l=i?y6:_6;return i==="native"&&(i=""),t&&(n?l((Ql[n]&&Ql[n].get||a)(t,n,i,r)):function(h,s,p){return l((Ql[h]&&Ql[h].get||a)(t,h,s,p))})},quickSetter:function(t,n,i){if(t=Vc(t),t.length>1){var r=t.map(function(v){return Vl.quickSetter(v,n,i)}),a=r.length;return function(v){for(var x=a;x--;)r[x](v)}}t=t[0]||{};var l=Ql[n],h=Ip(t),s=h.harness&&(h.harness.aliases||{})[n]||n,p=l?function(v){var x=new l;wv._pt=0,x.init(t,i?v+i:v,wv,0,[t]),x.render(1,x),wv._pt&&CA(1,wv)}:h.set(t,s);return l?p:function(v){return p(t,s,i?v+i:v,h,1)}},quickTo:function(t,n,i){var r,a=Vl.to(t,uc((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(s,p,v){return a.resetTo(n,s,p,v)};return l.tween=a,l},isTweening:function(t){return bs.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Pp(t.ease,Hv.ease)),tR(Hv,t||{})},config:function(t){return tR(lc,t||{})},registerEffect:function(t){var n=t.name,i=t.effect,r=t.plugins,a=t.defaults,l=t.extendTimeline;(r||"").split(",").forEach(function(h){return h&&!Ql[h]&&!cc[h]&&D0(n+" effect requires "+h+" plugin.")}),YE[n]=function(h,s,p){return i(Vc(h),uc(s||{},a),p)},l&&(ll.prototype[n]=function(h,s,p){return this.add(YE[n](h,ad(s)?s:(p=s)&&{},this),p)})},registerEase:function(t,n){Yi[t]=Pp(n)},parseEase:function(t,n){return arguments.length?Pp(t,n):Yi},getById:function(t){return bs.getById(t)},exportRoot:function(t,n){t===void 0&&(t={});var i=new ll(t),r,a;for(i.smoothChildTiming=Ml(t.smoothChildTiming),bs.remove(i),i._dp=0,i._time=i._tTime=bs._time,r=bs._first;r;)a=r._next,(n||!(!r._dur&&r instanceof ro&&r.vars.onComplete===r._targets[0]))&&Xu(i,r,r._start-r._delay),r=a;return Xu(bs,i,0),i},context:function(t,n){return t?new q6(t,n):cs},matchMedia:function(t){return new eq(t)},matchMediaRefresh:function(){return Mp.forEach(function(t){var n=t.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&t.revert()})||pk()},addEventListener:function(t,n){var i=k1[t]||(k1[t]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(t,n){var i=k1[t],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:DG,wrapYoyo:LG,distribute:C6,random:I6,snap:k6,normalize:MG,getUnit:Fa,clamp:kG,splitColor:L6,toArray:Vc,selector:hk,mapRange:P6,pipe:AG,unitize:PG,interpolate:RG,shuffle:E6},install:f6,effects:YE,ticker:ec,updateRoot:ll.updateRoot,plugins:Ql,globalTimeline:bs,core:{PropTween:Ll,globals:m6,Tween:ro,Timeline:ll,Animation:V0,getCache:Ip,_removeLinkedListItem:ST,reverting:function(){return ca},context:function(t){return t&&cs&&(cs.data.push(t),t._ctx=cs),cs},suppressOverwrites:function(t){return fA=t}}};Dl("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return yw[e]=ro[e]});ec.add(ll.updateRoot);wv=yw.to({},{duration:0});var tq=function(t,n){for(var i=t._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},nq=function(t,n){var i=t._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=t._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=tq(l,r)),l&&l.modifier&&l.modifier(n[r],t,i[a],r))},tC=function(t,n){return{name:t,headless:1,rawVars:1,init:function(r,a,l){l._onInit=function(h){var s,p;if($o(a)&&(s={},Dl(a,function(v){return s[v]=1}),a=s),n){s={};for(p in a)s[p]=n(a[p]);a=s}nq(h,a)}}}},Vl=yw.registerPlugin({name:"attr",init:function(t,n,i,r,a){var l,h,s;this.tween=i;for(l in n)s=t.getAttribute(l)||"",h=this.add(t,"setAttribute",(s||0)+"",n[l],r,a,0,0,l),h.op=l,h.b=s,this._props.push(l)},render:function(t,n){for(var i=n._pt;i;)ca?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,n){for(var i=n.length;i--;)this.add(t,i,t[i]||0,n[i],0,0,0,0,0,1)}},tC("roundProps",fk),tC("modifiers"),tC("snap",k6))||yw;ro.version=ll.version=Vl.version="3.13.0";h6=1;pA()&&Xv();Yi.Power0;Yi.Power1;Yi.Power2;Yi.Power3;Yi.Power4;Yi.Linear;Yi.Quad;Yi.Cubic;Yi.Quart;Yi.Quint;Yi.Strong;Yi.Elastic;Yi.Back;Yi.SteppedEase;Yi.Bounce;Yi.Sine;Yi.Expo;Yi.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var aR,Pf,Ov,kA,bp,lR,IA,iq=function(){return typeof window<"u"},bh={},mp=180/Math.PI,Vv=Math.PI/180,cv=Math.atan2,cR=1e8,AA=/([A-Z])/g,rq=/(left|right|width|margin|padding|x)/i,sq=/[\s,\(]\S/,Yu={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gk=function(t,n){return n.set(n.t,n.p,Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},oq=function(t,n){return n.set(n.t,n.p,t===1?n.e:Math.round((n.s+n.c*t)*1e4)/1e4+n.u,n)},aq=function(t,n){return n.set(n.t,n.p,t?Math.round((n.s+n.c*t)*1e4)/1e4+n.u:n.b,n)},lq=function(t,n){var i=n.s+n.c*t;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},K6=function(t,n){return n.set(n.t,n.p,t?n.e:n.b,n)},X6=function(t,n){return n.set(n.t,n.p,t!==1?n.b:n.e,n)},cq=function(t,n,i){return t.style[n]=i},uq=function(t,n,i){return t.style.setProperty(n,i)},dq=function(t,n,i){return t._gsap[n]=i},hq=function(t,n,i){return t._gsap.scaleX=t._gsap.scaleY=i},fq=function(t,n,i,r,a){var l=t._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},mq=function(t,n,i,r,a){var l=t._gsap;l[n]=i,l.renderTransform(a,l)},ws="transform",Rl=ws+"Origin",pq=function e(t,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(t in bh&&a){if(this.tfm=this.tfm||{},t!=="transform")t=Yu[t]||t,~t.indexOf(",")?t.split(",").forEach(function(h){return i.tfm[h]=rh(r,h)}):this.tfm[t]=l.x?l[t]:rh(r,t),t===Rl&&(this.tfm.zOrigin=l.zOrigin);else return Yu.transform.split(",").forEach(function(h){return e.call(i,h,n)});if(this.props.indexOf(ws)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Rl,n,"")),t=ws}(a||n)&&this.props.push(t,n,a[t])},Y6=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},gq=function(){var t=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<t.length;a+=3)t[a+1]?t[a+1]===2?n[t[a]](t[a+2]):n[t[a]]=t[a+2]:t[a+2]?i[t[a]]=t[a+2]:i.removeProperty(t[a].substr(0,2)==="--"?t[a]:t[a].replace(AA,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=IA(),(!a||!a.isStart)&&!i[ws]&&(Y6(i),r.zOrigin&&i[Rl]&&(i[Rl]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Z6=function(t,n){var i={target:t,props:[],revert:gq,save:pq};return t._gsap||Vl.core.getCache(t),n&&t.style&&t.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},J6,vk=function(t,n){var i=Pf.createElementNS?Pf.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Pf.createElement(t);return i&&i.style?i:Pf.createElement(t)},Bc=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(AA,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Yv(n)||n,1)||""},uR="O,Moz,ms,Ms,Webkit".split(","),Yv=function(t,n,i){var r=n||bp,a=r.style,l=5;if(t in a&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);l--&&!(uR[l]+t in a););return l<0?null:(l===3?"ms":l>=0?uR[l]:"")+t},_k=function(){iq()&&window.document&&(aR=window,Pf=aR.document,Ov=Pf.documentElement,bp=vk("div")||{style:{}},vk("div"),ws=Yv(ws),Rl=ws+"Origin",bp.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",J6=!!Yv("perspective"),IA=Vl.core.reverting,kA=1)},dR=function(t){var n=t.ownerSVGElement,i=vk("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),a;r.style.display="block",i.appendChild(r),Ov.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),Ov.removeChild(i),a},hR=function(t,n){for(var i=n.length;i--;)if(t.hasAttribute(n[i]))return t.getAttribute(n[i])},Q6=function(t){var n,i;try{n=t.getBBox()}catch{n=dR(t),i=1}return n&&(n.width||n.height)||i||(n=dR(t)),n&&!n.width&&!n.x&&!n.y?{x:+hR(t,["x","cx","x1"])||0,y:+hR(t,["y","cy","y1"])||0,width:0,height:0}:n},eF=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Q6(t))},jp=function(t,n){if(n){var i=t.style,r;n in bh&&n!==Rl&&(n=ws),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(AA,"-$1").toLowerCase())):i.removeAttribute(n)}},Mf=function(t,n,i,r,a,l){var h=new Ll(t._pt,n,i,0,1,l?X6:K6);return t._pt=h,h.b=r,h.e=a,t._props.push(i),h},fR={deg:1,rad:1,turn:1},vq={grid:1,flex:1},Zf=function e(t,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",h=bp.style,s=rq.test(n),p=t.tagName.toLowerCase()==="svg",v=(p?"client":"offset")+(s?"Width":"Height"),x=100,T=r==="px",C=r==="%",I,P,D,F;if(r===l||!a||fR[r]||fR[l])return a;if(l!=="px"&&!T&&(a=e(t,n,i,"px")),F=t.getCTM&&eF(t),(C||l==="%")&&(bh[n]||~n.indexOf("adius")))return I=F?t.getBBox()[s?"width":"height"]:t[v],Hs(C?a/I*x:a/100*I);if(h[s?"width":"height"]=x+(T?l:r),P=r!=="rem"&&~n.indexOf("adius")||r==="em"&&t.appendChild&&!p?t:t.parentNode,F&&(P=(t.ownerSVGElement||{}).parentNode),(!P||P===Pf||!P.appendChild)&&(P=Pf.body),D=P._gsap,D&&C&&D.width&&s&&D.time===ec.time&&!D.uncache)return Hs(a/D.width*x);if(C&&(n==="height"||n==="width")){var V=t.style[n];t.style[n]=x+r,I=t[v],V?t.style[n]=V:jp(t,n)}else(C||l==="%")&&!vq[Bc(P,"display")]&&(h.position=Bc(t,"position")),P===t&&(h.position="static"),P.appendChild(bp),I=bp[v],P.removeChild(bp),h.position="absolute";return s&&C&&(D=Ip(P),D.time=ec.time,D.width=P[v]),Hs(T?I*a/x:I&&a?x/I*a:0)},rh=function(t,n,i,r){var a;return kA||_k(),n in Yu&&n!=="transform"&&(n=Yu[n],~n.indexOf(",")&&(n=n.split(",")[0])),bh[n]&&n!=="transform"?(a=F0(t,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:xw(Bc(t,Rl))+" "+a.zOrigin+"px"):(a=t.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=bw[n]&&bw[n](t,n,i)||Bc(t,n)||g6(t,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Zf(t,n,a,i)+i:a},_q=function(t,n,i,r){if(!i||i==="none"){var a=Yv(n,t,1),l=a&&Bc(t,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=Bc(t,"borderTopColor"))}var h=new Ll(this._pt,t.style,n,0,1,H6),s=0,p=0,v,x,T,C,I,P,D,F,V,H,q,K;if(h.b=i,h.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Bc(t,r.substring(4,r.indexOf(")")))),r==="auto"&&(P=t.style[n],t.style[n]=r,r=Bc(t,n)||r,P?t.style[n]=P:jp(t,n)),v=[i,r],O6(v),i=v[0],r=v[1],T=i.match(xv)||[],K=r.match(xv)||[],K.length){for(;x=xv.exec(r);)D=x[0],V=r.substring(s,x.index),I?I=(I+1)%5:(V.substr(-5)==="rgba("||V.substr(-5)==="hsla(")&&(I=1),D!==(P=T[p++]||"")&&(C=parseFloat(P)||0,q=P.substr((C+"").length),D.charAt(1)==="="&&(D=Rv(C,D)+q),F=parseFloat(D),H=D.substr((F+"").length),s=xv.lastIndex-H.length,H||(H=H||lc.units[n]||q,s===r.length&&(r+=H,h.e+=H)),q!==H&&(C=Zf(t,n,P,H)||0),h._pt={_next:h._pt,p:V||p===1?V:",",s:C,c:F-C,m:I&&I<4||n==="zIndex"?Math.round:0});h.c=s<r.length?r.substring(s,r.length):""}else h.r=n==="display"&&r==="none"?X6:K6;return u6.test(r)&&(h.e=0),this._pt=h,h},mR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yq=function(t){var n=t.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),n[0]=mR[i]||i,n[1]=mR[r]||r,n.join(" ")},bq=function(t,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,h,s,p;if(a==="all"||a===!0)r.cssText="",s=1;else for(a=a.split(","),p=a.length;--p>-1;)h=a[p],bh[h]&&(s=1,h=h==="transformOrigin"?Rl:ws),jp(i,h);s&&(jp(i,ws),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",F0(i,1),l.uncache=1,Y6(r)))}},bw={clearProps:function(t,n,i,r,a){if(a.data!=="isFromStart"){var l=t._pt=new Ll(t._pt,n,i,0,0,bq);return l.u=r,l.pr=-10,l.tween=a,t._props.push(i),1}}},B0=[1,0,0,1,0,0],tF={},nF=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},pR=function(t){var n=Bc(t,ws);return nF(n)?B0:n.substr(7).match(c6).map(Hs)},PA=function(t,n){var i=t._gsap||Ip(t),r=t.style,a=pR(t),l,h,s,p;return i.svg&&t.getAttribute("transform")?(s=t.transform.baseVal.consolidate().matrix,a=[s.a,s.b,s.c,s.d,s.e,s.f],a.join(",")==="1,0,0,1,0,0"?B0:a):(a===B0&&!t.offsetParent&&t!==Ov&&!i.svg&&(s=r.display,r.display="block",l=t.parentNode,(!l||!t.offsetParent&&!t.getBoundingClientRect().width)&&(p=1,h=t.nextElementSibling,Ov.appendChild(t)),a=pR(t),s?r.display=s:jp(t,"display"),p&&(h?l.insertBefore(t,h):l?l.appendChild(t):Ov.removeChild(t))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},yk=function(t,n,i,r,a,l){var h=t._gsap,s=a||PA(t,!0),p=h.xOrigin||0,v=h.yOrigin||0,x=h.xOffset||0,T=h.yOffset||0,C=s[0],I=s[1],P=s[2],D=s[3],F=s[4],V=s[5],H=n.split(" "),q=parseFloat(H[0])||0,K=parseFloat(H[1])||0,ie,X,$,G;i?s!==B0&&(X=C*D-I*P)&&($=q*(D/X)+K*(-P/X)+(P*V-D*F)/X,G=q*(-I/X)+K*(C/X)-(C*V-I*F)/X,q=$,K=G):(ie=Q6(t),q=ie.x+(~H[0].indexOf("%")?q/100*ie.width:q),K=ie.y+(~(H[1]||H[0]).indexOf("%")?K/100*ie.height:K)),r||r!==!1&&h.smooth?(F=q-p,V=K-v,h.xOffset=x+(F*C+V*P)-F,h.yOffset=T+(F*I+V*D)-V):h.xOffset=h.yOffset=0,h.xOrigin=q,h.yOrigin=K,h.smooth=!!r,h.origin=n,h.originIsAbsolute=!!i,t.style[Rl]="0px 0px",l&&(Mf(l,h,"xOrigin",p,q),Mf(l,h,"yOrigin",v,K),Mf(l,h,"xOffset",x,h.xOffset),Mf(l,h,"yOffset",T,h.yOffset)),t.setAttribute("data-svg-origin",q+" "+K)},F0=function(t,n){var i=t._gsap||new z6(t);if("x"in i&&!n&&!i.uncache)return i;var r=t.style,a=i.scaleX<0,l="px",h="deg",s=getComputedStyle(t),p=Bc(t,Rl)||"0",v,x,T,C,I,P,D,F,V,H,q,K,ie,X,$,G,j,te,Z,ee,be,Ie,Ve,Ke,Xe,Pe,$e,Ee,We,Ze,ct,kt;return v=x=T=P=D=F=V=H=q=0,C=I=1,i.svg=!!(t.getCTM&&eF(t)),s.translate&&((s.translate!=="none"||s.scale!=="none"||s.rotate!=="none")&&(r[ws]=(s.translate!=="none"?"translate3d("+(s.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(s.rotate!=="none"?"rotate("+s.rotate+") ":"")+(s.scale!=="none"?"scale("+s.scale.split(" ").join(",")+") ":"")+(s[ws]!=="none"?s[ws]:"")),r.scale=r.rotate=r.translate="none"),X=PA(t,i.svg),i.svg&&(i.uncache?(Xe=t.getBBox(),p=i.xOrigin-Xe.x+"px "+(i.yOrigin-Xe.y)+"px",Ke=""):Ke=!n&&t.getAttribute("data-svg-origin"),yk(t,Ke||p,!!Ke||i.originIsAbsolute,i.smooth!==!1,X)),K=i.xOrigin||0,ie=i.yOrigin||0,X!==B0&&(te=X[0],Z=X[1],ee=X[2],be=X[3],v=Ie=X[4],x=Ve=X[5],X.length===6?(C=Math.sqrt(te*te+Z*Z),I=Math.sqrt(be*be+ee*ee),P=te||Z?cv(Z,te)*mp:0,V=ee||be?cv(ee,be)*mp+P:0,V&&(I*=Math.abs(Math.cos(V*Vv))),i.svg&&(v-=K-(K*te+ie*ee),x-=ie-(K*Z+ie*be))):(kt=X[6],Ze=X[7],$e=X[8],Ee=X[9],We=X[10],ct=X[11],v=X[12],x=X[13],T=X[14],$=cv(kt,We),D=$*mp,$&&(G=Math.cos(-$),j=Math.sin(-$),Ke=Ie*G+$e*j,Xe=Ve*G+Ee*j,Pe=kt*G+We*j,$e=Ie*-j+$e*G,Ee=Ve*-j+Ee*G,We=kt*-j+We*G,ct=Ze*-j+ct*G,Ie=Ke,Ve=Xe,kt=Pe),$=cv(-ee,We),F=$*mp,$&&(G=Math.cos(-$),j=Math.sin(-$),Ke=te*G-$e*j,Xe=Z*G-Ee*j,Pe=ee*G-We*j,ct=be*j+ct*G,te=Ke,Z=Xe,ee=Pe),$=cv(Z,te),P=$*mp,$&&(G=Math.cos($),j=Math.sin($),Ke=te*G+Z*j,Xe=Ie*G+Ve*j,Z=Z*G-te*j,Ve=Ve*G-Ie*j,te=Ke,Ie=Xe),D&&Math.abs(D)+Math.abs(P)>359.9&&(D=P=0,F=180-F),C=Hs(Math.sqrt(te*te+Z*Z+ee*ee)),I=Hs(Math.sqrt(Ve*Ve+kt*kt)),$=cv(Ie,Ve),V=Math.abs($)>2e-4?$*mp:0,q=ct?1/(ct<0?-ct:ct):0),i.svg&&(Ke=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!nF(Bc(t,ws)),Ke&&t.setAttribute("transform",Ke))),Math.abs(V)>90&&Math.abs(V)<270&&(a?(C*=-1,V+=P<=0?180:-180,P+=P<=0?180:-180):(I*=-1,V+=V<=0?180:-180)),n=n||i.uncache,i.x=v-((i.xPercent=v&&(!n&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-v)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+l,i.y=x-((i.yPercent=x&&(!n&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-x)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+l,i.z=T+l,i.scaleX=Hs(C),i.scaleY=Hs(I),i.rotation=Hs(P)+h,i.rotationX=Hs(D)+h,i.rotationY=Hs(F)+h,i.skewX=V+h,i.skewY=H+h,i.transformPerspective=q+l,(i.zOrigin=parseFloat(p.split(" ")[2])||!n&&i.zOrigin||0)&&(r[Rl]=xw(p)),i.xOffset=i.yOffset=0,i.force3D=lc.force3D,i.renderTransform=i.svg?wq:J6?iF:xq,i.uncache=0,i},xw=function(t){return(t=t.split(" "))[0]+" "+t[1]},nC=function(t,n,i){var r=Fa(n);return Hs(parseFloat(n)+parseFloat(Zf(t,"x",i+"px",r)))+r},xq=function(t,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,iF(t,n)},sp="0deg",Ay="0px",op=") ",iF=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.z,p=i.rotation,v=i.rotationY,x=i.rotationX,T=i.skewX,C=i.skewY,I=i.scaleX,P=i.scaleY,D=i.transformPerspective,F=i.force3D,V=i.target,H=i.zOrigin,q="",K=F==="auto"&&t&&t!==1||F===!0;if(H&&(x!==sp||v!==sp)){var ie=parseFloat(v)*Vv,X=Math.sin(ie),$=Math.cos(ie),G;ie=parseFloat(x)*Vv,G=Math.cos(ie),l=nC(V,l,X*G*-H),h=nC(V,h,-Math.sin(ie)*-H),s=nC(V,s,$*G*-H+H)}D!==Ay&&(q+="perspective("+D+op),(r||a)&&(q+="translate("+r+"%, "+a+"%) "),(K||l!==Ay||h!==Ay||s!==Ay)&&(q+=s!==Ay||K?"translate3d("+l+", "+h+", "+s+") ":"translate("+l+", "+h+op),p!==sp&&(q+="rotate("+p+op),v!==sp&&(q+="rotateY("+v+op),x!==sp&&(q+="rotateX("+x+op),(T!==sp||C!==sp)&&(q+="skew("+T+", "+C+op),(I!==1||P!==1)&&(q+="scale("+I+", "+P+op),V.style[ws]=q||"translate(0, 0)"},wq=function(t,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,h=i.y,s=i.rotation,p=i.skewX,v=i.skewY,x=i.scaleX,T=i.scaleY,C=i.target,I=i.xOrigin,P=i.yOrigin,D=i.xOffset,F=i.yOffset,V=i.forceCSS,H=parseFloat(l),q=parseFloat(h),K,ie,X,$,G;s=parseFloat(s),p=parseFloat(p),v=parseFloat(v),v&&(v=parseFloat(v),p+=v,s+=v),s||p?(s*=Vv,p*=Vv,K=Math.cos(s)*x,ie=Math.sin(s)*x,X=Math.sin(s-p)*-T,$=Math.cos(s-p)*T,p&&(v*=Vv,G=Math.tan(p-v),G=Math.sqrt(1+G*G),X*=G,$*=G,v&&(G=Math.tan(v),G=Math.sqrt(1+G*G),K*=G,ie*=G)),K=Hs(K),ie=Hs(ie),X=Hs(X),$=Hs($)):(K=x,$=T,ie=X=0),(H&&!~(l+"").indexOf("px")||q&&!~(h+"").indexOf("px"))&&(H=Zf(C,"x",l,"px"),q=Zf(C,"y",h,"px")),(I||P||D||F)&&(H=Hs(H+I-(I*K+P*X)+D),q=Hs(q+P-(I*ie+P*$)+F)),(r||a)&&(G=C.getBBox(),H=Hs(H+r/100*G.width),q=Hs(q+a/100*G.height)),G="matrix("+K+","+ie+","+X+","+$+","+H+","+q+")",C.setAttribute("transform",G),V&&(C.style[ws]=G)},Tq=function(t,n,i,r,a){var l=360,h=$o(a),s=parseFloat(a)*(h&&~a.indexOf("rad")?mp:1),p=s-r,v=r+p+"deg",x,T;return h&&(x=a.split("_")[1],x==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),x==="cw"&&p<0?p=(p+l*cR)%l-~~(p/l)*l:x==="ccw"&&p>0&&(p=(p-l*cR)%l-~~(p/l)*l)),t._pt=T=new Ll(t._pt,n,i,r,p,oq),T.e=v,T.u="deg",t._props.push(i),T},gR=function(t,n){for(var i in n)t[i]=n[i];return t},Sq=function(t,n,i){var r=gR({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,h,s,p,v,x,T,C,I;r.svg?(p=i.getAttribute("transform"),i.setAttribute("transform",""),l[ws]=n,h=F0(i,1),jp(i,ws),i.setAttribute("transform",p)):(p=getComputedStyle(i)[ws],l[ws]=n,h=F0(i,1),l[ws]=p);for(s in bh)p=r[s],v=h[s],p!==v&&a.indexOf(s)<0&&(C=Fa(p),I=Fa(v),x=C!==I?Zf(i,s,p,I):parseFloat(p),T=parseFloat(v),t._pt=new Ll(t._pt,h,s,x,T-x,gk),t._pt.u=I||0,t._props.push(s));gR(h,r)};Dl("padding,margin,Width,Radius",function(e,t){var n="Top",i="Right",r="Bottom",a="Left",l=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(h){return t<2?e+h:"border"+h+e});bw[t>1?"border"+e:e]=function(h,s,p,v,x){var T,C;if(arguments.length<4)return T=l.map(function(I){return rh(h,I,p)}),C=T.join(" "),C.split(T[0]).length===5?T[0]:C;T=(v+"").split(" "),C={},l.forEach(function(I,P){return C[I]=T[P]=T[P]||T[(P-1)/2|0]}),h.init(s,C,x)}});var rF={name:"css",register:_k,targetTest:function(t){return t.style&&t.nodeType},init:function(t,n,i,r,a){var l=this._props,h=t.style,s=i.vars.startAt,p,v,x,T,C,I,P,D,F,V,H,q,K,ie,X,$;kA||_k(),this.styles=this.styles||Z6(t),$=this.styles.props,this.tween=i;for(P in n)if(P!=="autoRound"&&(v=n[P],!(Ql[P]&&N6(P,n,i,r,t,a)))){if(C=typeof v,I=bw[P],C==="function"&&(v=v.call(i,r,t,a),C=typeof v),C==="string"&&~v.indexOf("random(")&&(v=R0(v)),I)I(this,t,P,v,i)&&(X=1);else if(P.substr(0,2)==="--")p=(getComputedStyle(t).getPropertyValue(P)+"").trim(),v+="",$f.lastIndex=0,$f.test(p)||(D=Fa(p),F=Fa(v)),F?D!==F&&(p=Zf(t,P,p,F)+F):D&&(v+=D),this.add(h,"setProperty",p,v,r,a,0,0,P),l.push(P),$.push(P,0,h[P]);else if(C!=="undefined"){if(s&&P in s?(p=typeof s[P]=="function"?s[P].call(i,r,t,a):s[P],$o(p)&&~p.indexOf("random(")&&(p=R0(p)),Fa(p+"")||p==="auto"||(p+=lc.units[P]||Fa(rh(t,P))||""),(p+"").charAt(1)==="="&&(p=rh(t,P))):p=rh(t,P),T=parseFloat(p),V=C==="string"&&v.charAt(1)==="="&&v.substr(0,2),V&&(v=v.substr(2)),x=parseFloat(v),P in Yu&&(P==="autoAlpha"&&(T===1&&rh(t,"visibility")==="hidden"&&x&&(T=0),$.push("visibility",0,h.visibility),Mf(this,h,"visibility",T?"inherit":"hidden",x?"inherit":"hidden",!x)),P!=="scale"&&P!=="transform"&&(P=Yu[P],~P.indexOf(",")&&(P=P.split(",")[0]))),H=P in bh,H){if(this.styles.save(P),C==="string"&&v.substring(0,6)==="var(--"&&(v=Bc(t,v.substring(4,v.indexOf(")"))),x=parseFloat(v)),q||(K=t._gsap,K.renderTransform&&!n.parseTransform||F0(t,n.parseTransform),ie=n.smoothOrigin!==!1&&K.smooth,q=this._pt=new Ll(this._pt,h,ws,0,1,K.renderTransform,K,0,-1),q.dep=1),P==="scale")this._pt=new Ll(this._pt,K,"scaleY",K.scaleY,(V?Rv(K.scaleY,V+x):x)-K.scaleY||0,gk),this._pt.u=0,l.push("scaleY",P),P+="X";else if(P==="transformOrigin"){$.push(Rl,0,h[Rl]),v=yq(v),K.svg?yk(t,v,0,ie,0,this):(F=parseFloat(v.split(" ")[2])||0,F!==K.zOrigin&&Mf(this,K,"zOrigin",K.zOrigin,F),Mf(this,h,P,xw(p),xw(v)));continue}else if(P==="svgOrigin"){yk(t,v,1,ie,0,this);continue}else if(P in tF){Tq(this,K,P,T,V?Rv(T,V+v):v);continue}else if(P==="smoothOrigin"){Mf(this,K,"smooth",K.smooth,v);continue}else if(P==="force3D"){K[P]=v;continue}else if(P==="transform"){Sq(this,v,t);continue}}else P in h||(P=Yv(P)||P);if(H||(x||x===0)&&(T||T===0)&&!sq.test(v)&&P in h)D=(p+"").substr((T+"").length),x||(x=0),F=Fa(v)||(P in lc.units?lc.units[P]:D),D!==F&&(T=Zf(t,P,p,F)),this._pt=new Ll(this._pt,H?K:h,P,T,(V?Rv(T,V+x):x)-T,!H&&(F==="px"||P==="zIndex")&&n.autoRound!==!1?lq:gk),this._pt.u=F||0,D!==F&&F!=="%"&&(this._pt.b=p,this._pt.r=aq);else if(P in h)_q.call(this,t,P,p,V?V+v:v);else if(P in t)this.add(t,P,p||t[P],V?V+v:v,r,a);else if(P!=="parseTransform"){vA(P,v);continue}H||(P in h?$.push(P,0,h[P]):typeof t[P]=="function"?$.push(P,2,t[P]()):$.push(P,1,p||t[P])),l.push(P)}}X&&G6(this)},render:function(t,n){if(n.tween._time||!IA())for(var i=n._pt;i;)i.r(t,i.d),i=i._next;else n.styles.revert()},get:rh,aliases:Yu,getSetter:function(t,n,i){var r=Yu[n];return r&&r.indexOf(",")<0&&(n=r),n in bh&&n!==Rl&&(t._gsap.x||rh(t,"x"))?i&&lR===i?n==="scale"?hq:dq:(lR=i||{})&&(n==="scale"?fq:mq):t.style&&!mA(t.style[n])?cq:~n.indexOf("-")?uq:EA(t,n)},core:{_removeProperty:jp,_getMatrix:PA}};Vl.utils.checkPrefix=Yv;Vl.core.getStyleSaver=Z6;(function(e,t,n,i){var r=Dl(e+","+t+","+n,function(a){bh[a]=1});Dl(t,function(a){lc.units[a]="deg",tF[a]=1}),Yu[r[13]]=e+","+t,Dl(i,function(a){var l=a.split(":");Yu[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Dl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){lc.units[e]="px"});Vl.registerPlugin(rF);var I1=Vl.registerPlugin(rF)||Vl;I1.core.Tween;const sF=""+new URL("../singatrainlogo.png",import.meta.url).href,oF="singatrain-app-state";function Eq(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(oF);return e?JSON.parse(e):null}catch{return null}}function iC(e){typeof window>"u"||window.localStorage.setItem(oF,JSON.stringify({favorites:e.favorites,user:e.user,darkMode:e.darkMode}))}const Cq={name:"Guest User",email:"",memberSince:"",favorites:[]},Xd=Eq(),no=oo({activeTab:"dashboard",darkMode:(Xd==null?void 0:Xd.darkMode)??!1,favorites:(Xd==null?void 0:Xd.favorites)??[],user:{...Cq,...(Xd==null?void 0:Xd.user)||{}}});function kq(e){typeof document>"u"||(document.body.classList.toggle("dark-mode",e),document.documentElement.setAttribute("data-bs-theme",e?"dark":"light"))}function Zv(){const e=me(()=>no.favorites.length);function t(s){no.activeTab=s}function n(s){no.darkMode=s}function i(){no.darkMode=!no.darkMode}function r(s){if(!s||!s.station)return;no.favorites.some(v=>v.station===s.station&&v.label===s.label)||no.favorites.push({...s})}function a(s){no.favorites=no.favorites.filter(p=>p.label!==s.label||p.station!==s.station)}function l(){no.favorites.splice(0,no.favorites.length)}function h(s){no.user={...no.user,...s}}return Zt(()=>no.darkMode,s=>{kq(s),iC(no)},{immediate:!0}),Zt(()=>no.favorites,()=>iC(no),{deep:!0}),Zt(()=>no.user,()=>iC(no),{deep:!0}),{state:no,favoritesCount:e,setActiveTab:t,setDarkMode:n,toggleDarkMode:i,addFavorite:r,removeFavorite:a,clearFavorites:l,updateUser:h}}const Iq={class:"premium-navbar"},Aq={class:"container"},Pq={class:"navbar-nav desktop-only"},Mq=["onClick"],Dq={class:"material-icons me-1"},Lq={class:"right-controls"},Rq={class:"theme-toggle-wrapper",style:{display:"none"}},Oq={class:"theme-switch"},Vq=["checked"],Bq={class:"navbar-nav"},Fq=["onClick"],zq={class:"material-icons me-1"},Nq={__name:"Navbar",setup(e){const t=[{key:"dashboard",label:"Dashboard",icon:"space_dashboard"},{key:"live",label:"Live Tracker",icon:"tram"},{key:"route",label:"Route Planner",icon:"alt_route"},{key:"fare",label:"Fare Calculator",icon:"payments"},{key:"meetup",label:"Meet-up",icon:"groups"},{key:"profile",label:"Profile",icon:"account_circle"}],n=it(!1),{state:i,setActiveTab:r,toggleDarkMode:a}=Zv(),l=it(window.innerWidth),h=()=>{l.value=window.innerWidth,l.value>=992&&(n.value=!1)},s=()=>{n.value=!1};return Dr(()=>{window.addEventListener("resize",h)}),jr(()=>{window.removeEventListener("resize",h)}),(p,v)=>(Kt(),an(ln,null,[B("nav",Iq,[B("div",Aq,[B("a",{class:"navbar-brand",href:"#",onClick:v[0]||(v[0]=sa(x=>Ti(r)("dashboard"),["prevent"]))},[...v[3]||(v[3]=[B("img",{src:sF,alt:"SingaTrain logo",class:"logo"},null,-1),B("span",null,"SingaTrain",-1)])]),B("ul",Pq,[(Kt(),an(ln,null,us(t,x=>B("li",{key:x.key,class:"nav-item"},[B("a",{href:"#",class:Tt(["nav-link",{active:Ti(i).activeTab===x.key}]),onClick:sa(T=>{Ti(r)(x.key),s()},["prevent"])},[B("span",Dq,tn(x.icon),1),B("span",null,tn(x.label),1)],10,Mq)])),64))]),B("div",Lq,[B("div",Rq,[B("label",Oq,[B("input",{type:"checkbox",checked:Ti(i).darkMode,onChange:v[1]||(v[1]=(...x)=>Ti(a)&&Ti(a)(...x))},null,40,Vq),v[4]||(v[4]=B("span",{class:"slider"},[B("span",{class:"icon sun material-icons"},"light_mode"),B("span",{class:"icon moon material-icons"},"dark_mode")],-1))])]),B("button",{class:"navbar-toggler",type:"button",onClick:v[2]||(v[2]=x=>n.value=!n.value)},[...v[5]||(v[5]=[B("span",{class:"material-icons"},"menu",-1)])])])]),B("div",{class:Tt(["collapse-menu",n.value?"open":""])},[B("ul",Bq,[(Kt(),an(ln,null,us(t,(x,T)=>B("li",{key:x.key,class:"nav-item",style:Yt({transitionDelay:n.value?`${T*80}ms`:"0ms"})},[B("a",{href:"#",class:Tt(["nav-link",{active:Ti(i).activeTab===x.key}]),onClick:sa(C=>Ti(r)(x.key),["prevent"])},[B("span",zq,tn(x.icon),1),B("span",null,tn(x.label),1)],10,Fq)],4)),64))])],2)]),n.value?(Kt(),an("div",{key:0,class:"menu-overlay",onClick:s})):Si("",!0)],64))}},vR=""+new URL("../MRT-Map.png",import.meta.url).href,Df={NSL:["Jurong East","Bukit Batok","Bukit Gombak","Choa Chu Kang","Yew Tee","Kranji","Marsiling","Woodlands","Admiralty","Sembawang","Canberra","Yishun","Khatib","Yio Chu Kang","Ang Mo Kio","Bishan","Braddell","Toa Payoh","Novena","Newton","Orchard","Somerset","Dhoby Ghaut","City Hall","Raffles Place","Marina Bay","Marina South Pier"],EWL:["Pasir Ris","Tampines","Simei","Tanah Merah","Bedok","Kembangan","Eunos","Paya Lebar","Aljunied","Kallang","Lavender","Bugis","City Hall","Raffles Place","Tanjong Pagar","Outram Park","Tiong Bahru","Redhill","Queenstown","Commonwealth","Buona Vista","Dover","Clementi","Jurong East","Chinese Garden","Lakeside","Boon Lay","Pioneer","Joo Koon","Gul Circle","Tuas Crescent","Tuas West Road","Tuas Link"],CGL:["Tanah Merah","Expo","Changi Airport"],DTL:["Bukit Panjang","Cashew","Hillview","Beauty World","King Albert Park","Sixth Avenue","Tan Kah Kee","Botanic Gardens","Stevens","Newton","Little India","Rochor","Bugis","Promenade","Bayfront","Downtown","Telok Ayer","Chinatown","Fort Canning","Bencoolen","Jalan Besar","Bendemeer","Geylang Bahru","Mattar","MacPherson","Ubi","Kaki Bukit","Bedok North","Bedok Reservoir","Tampines West","Tampines","Tampines East","Upper Changi","Expo"],CCL:["Dhoby Ghaut","Bras Basah","Esplanade","Promenade","Bayfront","Nicoll Highway","Stadium","Mountbatten","Dakota","Paya Lebar","MacPherson","Tai Seng","Bartley","Serangoon","Lorong Chuan","Bishan","Marymount","Caldecott","Botanic Gardens","Farrer Road","Holland Village","Buona Vista","one-north","Kent Ridge","Haw Par Villa","Pasir Panjang","Labrador Park","Telok Blangah","HarbourFront"],NEL:["HarbourFront","Outram Park","Chinatown","Clarke Quay","Dhoby Ghaut","Little India","Farrer Park","Boon Keng","Potong Pasir","Woodleigh","Serangoon","Kovan","Hougang","Buangkok","Sengkang","Punggol","Punggol Coast"],TEL:["Woodlands North","Woodlands","Woodlands South","Springleaf","Lentor","Mayflower","Bright Hill","Upper Thomson","Caldecott","Stevens","Napier","Orchard Boulevard","Orchard","Great World","Havelock","Outram Park","Maxwell","Shenton Way","Marina Bay","Gardens By The Bay","Tanjong Rhu","Katong Park","Tanjong Katong","Marine Parade","Marine Terrace","Siglap","Bayshore"],BPL:["Choa Chu Kang","South View","Keat Hong","Teck Whye","Phoenix","Bukit Panjang","Petir","Pending","Bangkit","Fajar","Segar","Jelapang","Senja"],SWPL:["Sengkang","Cheng Lim","Farmway","Kupang","Thanggam","Fernvale","Layar","Tongkang","Renjong"],SEPL:["Sengkang","Compassvale","Rumbia","Bakau","Kangkar","Ranggung"],PEPLRT:["Punggol","Cove","Meridian","Coral Edge","Riviera","Kadaloor","Oasis","Damai"],PWLRT:["Punggol","Sam Kee","Punggol Point","Samudera","Nibong","Sumang","Soo Teck"]},aF=[...new Set(Object.values(Df).flat())].sort((e,t)=>e.localeCompare(t)),d0={"Jurong East":["North-South Line","East-West Line"],"Bukit Batok":["North-South Line"],"Bukit Gombak":["North-South Line"],"Choa Chu Kang":["North-South Line","LRT Line"],"Yew Tee":["North-South Line"],Kranji:["North-South Line"],Marsiling:["North-South Line"],Woodlands:["North-South Line","Thomson-East Coast Line"],Admiralty:["North-South Line"],Sembawang:["North-South Line"],Canberra:["North-South Line"],Yishun:["North-South Line"],Khatib:["North-South Line"],"Yio Chu Kang":["North-South Line"],"Ang Mo Kio":["North-South Line"],Bishan:["North-South Line","Circle Line"],Braddell:["North-South Line"],"Toa Payoh":["North-South Line"],Novena:["North-South Line"],Newton:["North-South Line","Downtown Line"],Orchard:["North-South Line","Thomson-East Coast Line"],Somerset:["North-South Line"],"Dhoby Ghaut":["North-South Line","North-East Line","Circle Line"],"City Hall":["North-South Line","East-West Line"],"Raffles Place":["North-South Line","East-West Line"],"Marina Bay":["North-South Line","Thomson-East Coast Line"],"Marina South Pier":["North-South Line"],"Pasir Ris":["East-West Line"],Tampines:["East-West Line","Downtown Line"],Simei:["East-West Line"],"Tanah Merah":["East-West Line"],Bedok:["East-West Line"],Kembangan:["East-West Line"],Eunos:["East-West Line"],"Paya Lebar":["East-West Line","Circle Line"],Aljunied:["East-West Line"],Kallang:["East-West Line"],Lavender:["East-West Line"],Bugis:["East-West Line","Downtown Line"],"Tanjong Pagar":["East-West Line"],"Outram Park":["East-West Line","North-East Line","Thomson-East Coast Line"],"Tiong Bahru":["East-West Line"],Redhill:["East-West Line"],Queenstown:["East-West Line"],Commonwealth:["East-West Line"],"Buona Vista":["East-West Line","Circle Line"],Dover:["East-West Line"],Clementi:["East-West Line"],"Chinese Garden":["East-West Line"],Lakeside:["East-West Line"],"Boon Lay":["East-West Line"],Pioneer:["East-West Line"],"Joo Koon":["East-West Line"],"Gul Circle":["East-West Line"],"Tuas Crescent":["East-West Line"],"Tuas West Road":["East-West Line"],"Tuas Link":["East-West Line"],Expo:["Downtown Line"],"Changi Airport":["East-West Line"],"Bukit Panjang":["Downtown Line","LRT Line"],Cashew:["Downtown Line"],Hillview:["Downtown Line"],"Beauty World":["Downtown Line"],"King Albert Park":["Downtown Line"],"Sixth Avenue":["Downtown Line"],"Tan Kah Kee":["Downtown Line"],"Botanic Gardens":["Downtown Line","Circle Line"],Stevens:["Downtown Line","Thomson-East Coast Line"],"Little India":["Downtown Line","North-East Line"],Rochor:["Downtown Line"],Promenade:["Downtown Line","Circle Line"],Bayfront:["Downtown Line","Circle Line"],Downtown:["Downtown Line"],"Telok Ayer":["Downtown Line"],Chinatown:["Downtown Line","North-East Line"],"Fort Canning":["Downtown Line"],Bencoolen:["Downtown Line"],"Jalan Besar":["Downtown Line"],Bendemeer:["Downtown Line"],"Geylang Bahru":["Downtown Line"],Mattar:["Downtown Line"],MacPherson:["Downtown Line","Circle Line"],Ubi:["Downtown Line"],"Kaki Bukit":["Downtown Line"],"Bedok North":["Downtown Line"],"Bedok Reservoir":["Downtown Line"],"Tampines West":["Downtown Line"],"Tampines East":["Downtown Line"],"Upper Changi":["Downtown Line"],"Bras Basah":["Circle Line"],Esplanade:["Circle Line"],"Nicoll Highway":["Circle Line"],Stadium:["Circle Line"],Mountbatten:["Circle Line"],Dakota:["Circle Line"],"Tai Seng":["Circle Line"],Bartley:["Circle Line"],Serangoon:["Circle Line","North-East Line"],"Lorong Chuan":["Circle Line"],Marymount:["Circle Line"],Caldecott:["Circle Line","Thomson-East Coast Line"],"Farrer Road":["Circle Line"],"Holland Village":["Circle Line"],"one-north":["Circle Line"],"Kent Ridge":["Circle Line"],"Haw Par Villa":["Circle Line"],"Pasir Panjang":["Circle Line"],"Labrador Park":["Circle Line"],"Telok Blangah":["Circle Line"],HarbourFront:["Circle Line","North-East Line"],"Clarke Quay":["North-East Line"],"Farrer Park":["North-East Line"],"Boon Keng":["North-East Line"],"Potong Pasir":["North-East Line"],Woodleigh:["North-East Line"],Kovan:["North-East Line"],Hougang:["North-East Line"],Buangkok:["North-East Line"],Sengkang:["North-East Line","LRT Line"],Punggol:["North-East Line","LRT Line"],"Punggol Coast":["North-East Line"],"Woodlands North":["Thomson-East Coast Line"],"Woodlands South":["Thomson-East Coast Line"],Springleaf:["Thomson-East Coast Line"],Lentor:["Thomson-East Coast Line"],Mayflower:["Thomson-East Coast Line"],"Bright Hill":["Thomson-East Coast Line"],"Upper Thomson":["Thomson-East Coast Line"],Napier:["Thomson-East Coast Line"],"Orchard Boulevard":["Thomson-East Coast Line"],"Great World":["Thomson-East Coast Line"],Havelock:["Thomson-East Coast Line"],Maxwell:["Thomson-East Coast Line"],"Shenton Way":["Thomson-East Coast Line"],"Gardens By The Bay":["Thomson-East Coast Line"],"Tanjong Rhu":["Thomson-East Coast Line"],"Katong Park":["Thomson-East Coast Line"],"Tanjong Katong":["Thomson-East Coast Line"],"Marine Parade":["Thomson-East Coast Line"],"Marine Terrace":["Thomson-East Coast Line"],Siglap:["Thomson-East Coast Line"],Bayshore:["Thomson-East Coast Line"],"South View":["LRT Line"],"Keat Hong":["LRT Line"],"Teck Whye":["LRT Line"],Phoenix:["LRT Line"],Petir:["LRT Line"],Pending:["LRT Line"],Bangkit:["LRT Line"],Fajar:["LRT Line"],Segar:["LRT Line"],Jelapang:["LRT Line"],Senja:["LRT Line"],"Cheng Lim":["LRT Line"],Farmway:["LRT Line"],Kupang:["LRT Line"],Thanggam:["LRT Line"],Fernvale:["LRT Line"],Layar:["LRT Line"],Tongkang:["LRT Line"],Renjong:["LRT Line"],Compassvale:["LRT Line"],Rumbia:["LRT Line"],Bakau:["LRT Line"],Kangkar:["LRT Line"],Ranggung:["LRT Line"],Cove:["LRT Line"],Meridian:["LRT Line"],"Coral Edge":["LRT Line"],Riviera:["LRT Line"],Kadaloor:["LRT Line"],Oasis:["LRT Line"],Damai:["LRT Line"],"Sam Kee":["LRT Line"],"Punggol Point":["LRT Line"],Samudera:["LRT Line"],Nibong:["LRT Line"],Sumang:["LRT Line"],"Soo Teck":["LRT Line"]},$y={"North-South Line":"#d42e12","East-West Line":"#009645","Circle Line":"#fa9e0d","Downtown Line":"#005ec4","North-East Line":"#9900aa","Thomson-East Coast Line":"#9d5b25","Jurong Region Line":"#00a0a8","LRT Line":"#748477"},Gx=[{station:"Marina Bay",line:"North-South Line"},{station:"Paya Lebar",line:"Circle Line"},{station:"Woodlands",line:"Thomson-East Coast Line"},{station:"Dhoby Ghaut",line:"North-East Line"},{station:"Jurong East",line:"East-West Line"}],$q=5e3,Uq={default:{peak:[60,180],shoulder:[120,240],offPeak:[180,360]}},_R={enabled:!0,probability:.2,checkEvery:4,durationRangeSeconds:[180,300]};function pp(e,t){return Math.floor(Math.random()*(t-e+1))+e}function jq(e,t,n){const i=e[t]||e.default,r=i[n]||i.offPeak||e.default.offPeak;return Array.isArray(r)?r:e.default.offPeak}function rC(e=new Date){const t=e.getHours();return t>=7&&t<9||t>=17&&t<20?"peak":t>=6&&t<7||t>=9&&t<11||t>=16&&t<17||t>=20&&t<22?"shoulder":"offPeak"}function sC(e,t,n,i){const[r,a]=jq(e,t,i),l=pp(r,a);return n+l}function uh(e){return $y[e]||"#6b7280"}function lF(e={}){const t={stationLines:d0,lineIntervals:Uq,updateIntervalMs:3e4,trainsPerLine:3,delay:{..._R},...e,delay:{..._R,...e.delay||{}}},n={arrivals:{},delayFlags:{},cycles:0,intervalId:null};function i(C,I){n.arrivals[C]||(n.arrivals[C]={}),Array.isArray(n.arrivals[C][I])||(n.arrivals[C][I]=[])}function r(C,I){i(C,I);const P=n.arrivals[C][I];P.length=0;const D=rC();let F=pp(60,240);for(let V=0;V<t.trainsPerLine;V+=1)P.push(F),F=sC(t.lineIntervals,I,F,D)}function a(){Object.entries(t.stationLines).forEach(([C,I])=>{I.forEach(P=>{i(C,P);const D=n.arrivals[C][P];if(!D.length)r(C,P);else for(;D.length<t.trainsPerLine;){const F=D[D.length-1]||pp(120,480);D.push(sC(t.lineIntervals,P,F,rC()))}})})}function l(C=Date.now()){Object.keys(n.delayFlags).forEach(I=>{const P=n.delayFlags[I];P&&(Object.keys(P).forEach(D=>{P[D]<C&&delete P[D]}),Object.keys(P).length||delete n.delayFlags[I])})}function h(){if(!t.delay.enabled||n.cycles%t.delay.checkEvery!==0||Math.random()>t.delay.probability)return;const C=Object.keys(n.arrivals);if(!C.length)return;const I=C[pp(0,C.length-1)],P=Object.keys(n.arrivals[I]||{});if(!P.length)return;const D=P[pp(0,P.length-1)],F=n.arrivals[I][D];if(!(F!=null&&F.length))return;const[V,H]=t.delay.durationRangeSeconds,q=pp(V,H);for(let K=0;K<F.length;K+=1)F[K]+=q;n.delayFlags[I]||(n.delayFlags[I]={}),n.delayFlags[I][D]=Date.now()+q*1e3}function s(){n.cycles+=1;const C=t.updateIntervalMs/1e3;l(),Object.entries(n.arrivals).forEach(([I,P])=>{Object.entries(P).forEach(([D,F])=>{for(let V=0;V<F.length;V+=1)F[V]=Math.max(0,F[V]-C);for(;F.length&&F[0]<=0;)F.shift();for(;F.length<t.trainsPerLine;){const V=F.length?F[F.length-1]:pp(120,480);F.push(sC(t.lineIntervals,D,V,rC()))}})}),h()}function p(){a(),n.intervalId===null&&(n.intervalId=setInterval(s,t.updateIntervalMs))}function v(){n.intervalId!==null&&(clearInterval(n.intervalId),n.intervalId=null)}function x({returnSeconds:C=!1}={}){const I={};return Object.entries(n.arrivals).forEach(([P,D])=>{I[P]={},Object.entries(D).forEach(([F,V])=>{I[P][F]=V.map(H=>C?Math.max(0,Math.round(H)):Math.max(0,Math.ceil(H/60)))})}),I}function T(C){return x()[C]||{}}return{config:t,start:p,stop:v,refresh:s,getArrivals:x,getStationArrivals:T}}const Wq=()=>{};var yR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},Hq=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=e[n++],l=e[n++],h=e[n++],s=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(s&1023))}else{const a=e[n++],l=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return t.join("")},uF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const a=e[r],l=r+1<e.length,h=l?e[r+1]:0,s=r+2<e.length,p=s?e[r+2]:0,v=a>>2,x=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,C=p&63;s||(C=64,l||(T=64)),i.push(n[v],n[x],n[T],n[C])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(cF(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Hq(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const a=n[e.charAt(r++)],h=r<e.length?n[e.charAt(r)]:0;++r;const p=r<e.length?n[e.charAt(r)]:64;++r;const x=r<e.length?n[e.charAt(r)]:64;if(++r,a==null||h==null||p==null||x==null)throw new Gq;const T=a<<2|h>>4;if(i.push(T),p!==64){const C=h<<4&240|p>>2;if(i.push(C),x!==64){const I=p<<6&192|x;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qq=function(e){const t=cF(e);return uF.encodeByteArray(t,!0)},ww=function(e){return qq(e).replace(/\./g,"")},dF=function(e){try{return uF.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=()=>Kq().__FIREBASE_DEFAULTS__,Yq=()=>{if(typeof process>"u"||typeof yR>"u")return;const e=yR.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Zq=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dF(e[1]);return t&&JSON.parse(t)},kT=()=>{try{return Wq()||Xq()||Yq()||Zq()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},hF=e=>{var t,n;return(n=(t=kT())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},Jq=e=>{const t=hF(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},fF=()=>{var e;return(e=kT())==null?void 0:e.config},mF=e=>{var t;return(t=kT())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pF(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ww(JSON.stringify(n)),ww(JSON.stringify(l)),""].join(".")}const h0={};function tK(){const e={prod:[],emulator:[]};for(const t of Object.keys(h0))h0[t]?e.emulator.push(t):e.prod.push(t);return e}function nK(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let bR=!1;function gF(e,t){if(typeof window>"u"||typeof document>"u"||!x_(window.location.host)||h0[e]===t||h0[e]||bR)return;h0[e]=t;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=tK().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function s(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{bR=!0,l()},T}function v(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=nK(i),C=n("text"),I=document.getElementById(C)||document.createElement("span"),P=n("learnmore"),D=document.getElementById(P)||document.createElement("a"),F=n("preprendIcon"),V=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const H=T.element;h(H),v(D,P);const q=p();s(V,F),H.append(V,I,D,q),document.body.appendChild(H)}a?(I.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ha())}function rK(){var t;const e=(t=kT())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oK(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function aK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lK(){const e=Ha();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function cK(){return!rK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uK(){try{return typeof indexedDB=="object"}catch{return!1}}function dK(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;t(((a=r.error)==null?void 0:a.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="FirebaseError";class Ah extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=hK,Object.setPrototypeOf(this,Ah.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sb.prototype.create)}}class Sb{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,a=this.errors[t],l=a?fK(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Ah(r,h,i)}}function fK(e,t){return e.replace(mK,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const mK=/\{\$([^}]+)}/g;function pK(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Jf(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const a=e[r],l=t[r];if(xR(a)&&xR(l)){if(!Jf(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function xR(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Uy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(a)}}),t}function jy(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function gK(e,t){const n=new vK(e,t);return n.subscribe.bind(n)}class vK{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");_K(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=oC),r.error===void 0&&(r.error=oC),r.complete===void 0&&(r.complete=oC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _K(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function oC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(e){return e&&e._delegate?e._delegate:e}class Wp{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Qq;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xK(t))try{this.getOrInitializeService({instanceIdentifier:gp})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(t=gp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gp){return this.instances.has(t)}getOptions(t=gp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&t(a,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bK(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=gp){return this.component?this.component.multipleInstances?t:gp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bK(e){return e===gp?void 0:e}function xK(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yK(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ni||(Ni={}));const TK={debug:Ni.DEBUG,verbose:Ni.VERBOSE,info:Ni.INFO,warn:Ni.WARN,error:Ni.ERROR,silent:Ni.SILENT},SK=Ni.INFO,EK={[Ni.DEBUG]:"log",[Ni.VERBOSE]:"log",[Ni.INFO]:"info",[Ni.WARN]:"warn",[Ni.ERROR]:"error"},CK=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=EK[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class MA{constructor(t){this.name=t,this._logLevel=SK,this._logHandler=CK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ni))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?TK[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ni.DEBUG,...t),this._logHandler(this,Ni.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ni.VERBOSE,...t),this._logHandler(this,Ni.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ni.INFO,...t),this._logHandler(this,Ni.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ni.WARN,...t),this._logHandler(this,Ni.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ni.ERROR,...t),this._logHandler(this,Ni.ERROR,...t)}}const kK=(e,t)=>t.some(n=>e instanceof n);let wR,TR;function IK(){return wR||(wR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AK(){return TR||(TR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vF=new WeakMap,bk=new WeakMap,_F=new WeakMap,aC=new WeakMap,DA=new WeakMap;function PK(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{n(Uf(e.result)),r()},l=()=>{i(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",l)});return t.then(n=>{n instanceof IDBCursor&&vF.set(n,e)}).catch(()=>{}),DA.set(t,e),t}function MK(e){if(bk.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{n(),r()},l=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});bk.set(e,t)}let xk={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return bk.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_F.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uf(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function DK(e){xk=e(xk)}function LK(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(lC(this),t,...n);return _F.set(i,t.sort?t.sort():[t]),Uf(i)}:AK().includes(e)?function(...t){return e.apply(lC(this),t),Uf(vF.get(this))}:function(...t){return Uf(e.apply(lC(this),t))}}function RK(e){return typeof e=="function"?LK(e):(e instanceof IDBTransaction&&MK(e),kK(e,IK())?new Proxy(e,xk):e)}function Uf(e){if(e instanceof IDBRequest)return PK(e);if(aC.has(e))return aC.get(e);const t=RK(e);return t!==e&&(aC.set(e,t),DA.set(t,e)),t}const lC=e=>DA.get(e);function OK(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(e,t),h=Uf(l);return i&&l.addEventListener("upgradeneeded",s=>{i(Uf(l.result),s.oldVersion,s.newVersion,Uf(l.transaction),s)}),n&&l.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),h.then(s=>{a&&s.addEventListener("close",()=>a()),r&&s.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const VK=["get","getKey","getAll","getAllKeys","count"],BK=["put","add","delete","clear"],cC=new Map;function SR(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cC.get(t))return cC.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=BK.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||VK.includes(n)))return;const a=async function(l,...h){const s=this.transaction(l,r?"readwrite":"readonly");let p=s.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),r&&s.done]))[0]};return cC.set(t,a),a}DK(e=>({...e,get:(t,n,i)=>SR(t,n)||e.get(t,n,i),has:(t,n)=>!!SR(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zK(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zK(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wk="@firebase/app",ER="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new MA("@firebase/app"),NK="@firebase/app-compat",$K="@firebase/analytics-compat",UK="@firebase/analytics",jK="@firebase/app-check-compat",WK="@firebase/app-check",HK="@firebase/auth",GK="@firebase/auth-compat",qK="@firebase/database",KK="@firebase/data-connect",XK="@firebase/database-compat",YK="@firebase/functions",ZK="@firebase/functions-compat",JK="@firebase/installations",QK="@firebase/installations-compat",eX="@firebase/messaging",tX="@firebase/messaging-compat",nX="@firebase/performance",iX="@firebase/performance-compat",rX="@firebase/remote-config",sX="@firebase/remote-config-compat",oX="@firebase/storage",aX="@firebase/storage-compat",lX="@firebase/firestore",cX="@firebase/ai",uX="@firebase/firestore-compat",dX="firebase",hX="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="[DEFAULT]",fX={[wk]:"fire-core",[NK]:"fire-core-compat",[UK]:"fire-analytics",[$K]:"fire-analytics-compat",[WK]:"fire-app-check",[jK]:"fire-app-check-compat",[HK]:"fire-auth",[GK]:"fire-auth-compat",[qK]:"fire-rtdb",[KK]:"fire-data-connect",[XK]:"fire-rtdb-compat",[YK]:"fire-fn",[ZK]:"fire-fn-compat",[JK]:"fire-iid",[QK]:"fire-iid-compat",[eX]:"fire-fcm",[tX]:"fire-fcm-compat",[nX]:"fire-perf",[iX]:"fire-perf-compat",[rX]:"fire-rc",[sX]:"fire-rc-compat",[oX]:"fire-gcs",[aX]:"fire-gcs-compat",[lX]:"fire-fst",[uX]:"fire-fst-compat",[cX]:"fire-vertex","fire-js":"fire-js",[dX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=new Map,mX=new Map,Sk=new Map;function CR(e,t){try{e.container.addComponent(t)}catch(n){xh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Jv(e){const t=e.name;if(Sk.has(t))return xh.debug(`There were multiple attempts to register component ${t}.`),!1;Sk.set(t,e);for(const n of Tw.values())CR(n,e);for(const n of mX.values())CR(n,e);return!0}function LA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Lc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jf=new Sb("app","Firebase",pX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gX{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Wp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=hX;function yF(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i={name:Tk,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw jf.create("bad-app-name",{appName:String(r)});if(n||(n=fF()),!n)throw jf.create("no-options");const a=Tw.get(r);if(a){if(Jf(n,a.options)&&Jf(i,a.config))return a;throw jf.create("duplicate-app",{appName:r})}const l=new wK(r);for(const s of Sk.values())l.addComponent(s);const h=new gX(n,i,l);return Tw.set(r,h),h}function bF(e=Tk){const t=Tw.get(e);if(!t&&e===Tk&&fF())return yF();if(!t)throw jf.create("no-app",{appName:e});return t}function Wf(e,t,n){let i=fX[e]??e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),xh.warn(l.join(" "));return}Jv(new Wp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX="firebase-heartbeat-database",_X=1,z0="firebase-heartbeat-store";let uC=null;function xF(){return uC||(uC=OK(vX,_X,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(z0)}catch(n){console.warn(n)}}}}).catch(e=>{throw jf.create("idb-open",{originalErrorMessage:e.message})})),uC}async function yX(e){try{const n=(await xF()).transaction(z0),i=await n.objectStore(z0).get(wF(e));return await n.done,i}catch(t){if(t instanceof Ah)xh.warn(t.message);else{const n=jf.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});xh.warn(n.message)}}}async function kR(e,t){try{const i=(await xF()).transaction(z0,"readwrite");await i.objectStore(z0).put(t,wF(e)),await i.done}catch(n){if(n instanceof Ah)xh.warn(n.message);else{const i=jf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xh.warn(i.message)}}}function wF(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bX=1024,xX=30;class wX{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SX(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=IR();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>xX){const l=EX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xh.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IR(),{heartbeatsToSend:i,unsentEntries:r}=TX(this._heartbeatsCache.heartbeats),a=ww(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return xh.warn(n),""}}}function IR(){return new Date().toISOString().substring(0,10)}function TX(e,t=bX){const n=[];let i=e.slice();for(const r of e){const a=n.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),AR(n)>t){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),AR(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class SX{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uK()?dK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yX(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return kR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return kR(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function AR(e){return ww(JSON.stringify({version:2,heartbeats:e})).length}function EX(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(e){Jv(new Wp("platform-logger",t=>new FK(t),"PRIVATE")),Jv(new Wp("heartbeat",t=>new wX(t),"PRIVATE")),Wf(wk,ER,e),Wf(wk,ER,"esm2020"),Wf("fire-js","")}CX("");var kX="firebase",IX="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wf(kX,IX,"app");function TF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AX=TF,SF=new Sb("auth","Firebase",TF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new MA("@firebase/auth");function PX(e,...t){Sw.logLevel<=Ni.WARN&&Sw.warn(`Auth (${w_}): ${e}`,...t)}function A1(e,...t){Sw.logLevel<=Ni.ERROR&&Sw.error(`Auth (${w_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e,...t){throw RA(e,...t)}function Ju(e,...t){return RA(e,...t)}function EF(e,t,n){const i={...AX(),[t]:n};return new Sb("auth","Firebase",i).create(t,{appName:e.name})}function gh(e){return EF(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RA(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return SF.create(e,...t)}function mi(e,t,...n){if(!e)throw RA(t,...n)}function dh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw A1(t),new Error(t)}function wh(e,t){e||dh(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function MX(){return PR()==="http:"||PR()==="https:"}function PR(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MX()||oK()||"connection"in navigator)?navigator.onLine:!0}function LX(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(t,n){this.shortDelay=t,this.longDelay=n,wh(n>t,"Short delay should be less than long delay!"),this.isMobile=iK()||aK()}get(){return DX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(e,t){wh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VX=new Cb(3e4,6e4);function Ph(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Mh(e,t,n,i,r={}){return kF(e,r,async()=>{let a={},l={};i&&(t==="GET"?l=i:a={body:JSON.stringify(i)});const h=Eb({key:e.config.apiKey,...l}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const p={method:t,headers:s,...a};return sK()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&x_(e.emulatorConfig.host)&&(p.credentials="include"),CF.fetch()(await IF(e,e.config.apiHost,n,h),p)})}async function kF(e,t,n){e._canInitEmulator=!1;const i={...RX,...t};try{const r=new FX(e),a=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw qx(e,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[s,p]=h.split(" : ");if(s==="FEDERATED_USER_ID_ALREADY_LINKED")throw qx(e,"credential-already-in-use",l);if(s==="EMAIL_EXISTS")throw qx(e,"email-already-in-use",l);if(s==="USER_DISABLED")throw qx(e,"user-disabled",l);const v=i[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw EF(e,v,p);vu(e,v)}}catch(r){if(r instanceof Ah)throw r;vu(e,"network-request-failed",{message:String(r)})}}async function kb(e,t,n,i,r={}){const a=await Mh(e,t,n,i,r);return"mfaPendingCredential"in a&&vu(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function IF(e,t,n,i){const r=`${t}${n}?${i}`,a=e,l=a.config.emulator?OA(e.config,r):`${e.config.apiScheme}://${r}`;return OX.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function BX(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ju(this.auth,"network-request-failed")),VX.get())})}}function qx(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ju(e,t,i);return r.customData._tokenResponse=n,r}function MR(e){return e!==void 0&&e.enterprise!==void 0}class zX{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return BX(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NX(e,t){return Mh(e,"GET","/v2/recaptchaConfig",Ph(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $X(e,t){return Mh(e,"POST","/v1/accounts:delete",t)}async function Ew(e,t){return Mh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function UX(e,t=!1){const n=Uo(e),i=await n.getIdToken(t),r=VA(i);mi(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:f0(dC(r.auth_time)),issuedAtTime:f0(dC(r.iat)),expirationTime:f0(dC(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function dC(e){return Number(e)*1e3}function VA(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return A1("JWT malformed, contained fewer than 3 sections"),null;try{const r=dF(n);return r?JSON.parse(r):(A1("Failed to decode base64 JWT payload"),null)}catch(r){return A1("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function DR(e){const t=VA(e);return mi(t,"internal-error"),mi(typeof t.exp<"u","internal-error"),mi(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Ah&&jX(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function jX({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=f0(this.lastLoginAt),this.creationTime=f0(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(e){var x;const t=e.auth,n=await e.getIdToken(),i=await N0(e,Ew(t,{idToken:n}));mi(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const a=(x=r.providerUserInfo)!=null&&x.length?AF(r.providerUserInfo):[],l=GX(e.providerData,a),h=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!(l!=null&&l.length),p=h?s:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Ck(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(e,v)}async function HX(e){const t=Uo(e);await Cw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GX(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function AF(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qX(e,t){const n=await kF(e,{},async()=>{const i=Eb({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,l=await IF(e,r,"/v1/token",`key=${a}`),h=await e._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:h,body:i};return e.emulatorConfig&&x_(e.emulatorConfig.host)&&(s.credentials="include"),CF.fetch()(l,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KX(e,t){return Mh(e,"POST","/v2/accounts:revokeToken",Ph(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mi(t.idToken,"internal-error"),mi(typeof t.idToken<"u","internal-error"),mi(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):DR(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){mi(t.length!==0,"internal-error");const n=DR(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mi(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:a}=await qX(t,n);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:a}=n,l=new Bv;return i&&(mi(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(mi(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),a&&(mi(typeof a=="number","internal-error",{appName:t}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Bv,this.toJSON())}_performRefresh(){return dh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(e,t){mi(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class uu{constructor({uid:t,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new WX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ck(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await N0(this,this.stsTokenManager.getToken(this.auth,t));return mi(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return UX(this,t)}reload(){return HX(this)}_assign(t){this!==t&&(mi(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new uu({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){mi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await Cw(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lc(this.auth.app))return Promise.reject(gh(this.auth));const t=await this.getIdToken();return await N0(this,$X(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const i=n.displayName??void 0,r=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,h=n.tenantId??void 0,s=n._redirectEventId??void 0,p=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:C,providerData:I,stsTokenManager:P}=n;mi(x&&P,t,"internal-error");const D=Bv.fromJSON(this.name,P);mi(typeof x=="string",t,"internal-error"),_f(i,t.name),_f(r,t.name),mi(typeof T=="boolean",t,"internal-error"),mi(typeof C=="boolean",t,"internal-error"),_f(a,t.name),_f(l,t.name),_f(h,t.name),_f(s,t.name),_f(p,t.name),_f(v,t.name);const F=new uu({uid:x,auth:t,email:r,emailVerified:T,displayName:i,isAnonymous:C,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:D,createdAt:p,lastLoginAt:v});return I&&Array.isArray(I)&&(F.providerData=I.map(V=>({...V}))),s&&(F._redirectEventId=s),F}static async _fromIdTokenResponse(t,n,i=!1){const r=new Bv;r.updateFromServerResponse(n);const a=new uu({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Cw(a),a}static async _fromGetAccountInfoResponse(t,n,i){const r=n.users[0];mi(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?AF(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),h=new Bv;h.updateFromIdToken(i);const s=new uu({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:l}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ck(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(s,p),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new Map;function hh(e){wh(e instanceof Function,"Expected a class definition");let t=LR.get(e);return t?(wh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,LR.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}PF.type="NONE";const RR=PF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(e,t,n){return`firebase:${e}:${t}:${n}`}class Fv{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=P1(this.userKey,r.apiKey,a),this.fullPersistenceKey=P1("persistence",r.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ew(this.auth,{idToken:t}).catch(()=>{});return n?uu._fromGetAccountInfoResponse(this.auth,n,t):null}return uu._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Fv(hh(RR),t,i);const r=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=r[0]||hh(RR);const l=P1(i,t.config.apiKey,t.name);let h=null;for(const p of n)try{const v=await p._get(l);if(v){let x;if(typeof v=="string"){const T=await Ew(t,{idToken:v}).catch(()=>{});if(!T)break;x=await uu._fromGetAccountInfoResponse(t,T,v)}else x=uu._fromJSON(t,v);p!==a&&(h=x),a=p;break}}catch{}const s=r.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!s.length?new Fv(a,t,i):(a=s[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Fv(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(RF(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(MF(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(VF(t))return"Blackberry";if(BF(t))return"Webos";if(DF(t))return"Safari";if((t.includes("chrome/")||LF(t))&&!t.includes("edge/"))return"Chrome";if(OF(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function MF(e=Ha()){return/firefox\//i.test(e)}function DF(e=Ha()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function LF(e=Ha()){return/crios\//i.test(e)}function RF(e=Ha()){return/iemobile/i.test(e)}function OF(e=Ha()){return/android/i.test(e)}function VF(e=Ha()){return/blackberry/i.test(e)}function BF(e=Ha()){return/webos/i.test(e)}function BA(e=Ha()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function XX(e=Ha()){var t;return BA(e)&&!!((t=window.navigator)!=null&&t.standalone)}function YX(){return lK()&&document.documentMode===10}function FF(e=Ha()){return BA(e)||OF(e)||BF(e)||VF(e)||/windows phone/i.test(e)||RF(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(e,t=[]){let n;switch(e){case"Browser":n=OR(Ha());break;case"Worker":n=`${OR(Ha())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${w_}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const i=a=>new Promise((l,h)=>{try{const s=t(a);l(s)}catch(s){h(s)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const i of this.queue)await i(t),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JX(e,t={}){return Mh(e,"GET","/v2/passwordPolicy",Ph(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX=6;class eY{constructor(t){var i;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QX,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=t.length>=i),r&&(n.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,n,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(t,n,i,r){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VR(this),this.idTokenSubscription=new VR(this),this.beforeStateQueue=new ZX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=hh(n)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await Fv.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ew(this,{idToken:t}),i=await uu._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var a;if(Lc(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,h=i==null?void 0:i._redirectEventId,s=await this.tryRedirectSignIn(t);(!l||l===h)&&(s!=null&&s.user)&&(i=s.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Cw(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=LX()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Lc(this.app))return Promise.reject(gh(this));const n=t?Uo(t):null;return n&&mi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&mi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Lc(this.app)?Promise.reject(gh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Lc(this.app)?Promise.reject(gh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hh(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await JX(this),n=new eY(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Sb("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await KX(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&hh(t)||this._popupRedirectResolver;mi(n,this,"argument-error"),this.redirectPersistenceManager=await Fv.create(this,[hh(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(mi(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const s=t.addObserver(n,i,r);return()=>{l=!0,s()}}else{const s=t.addObserver(n);return()=>{l=!0,s()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=zF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var n;if(Lc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&PX(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function fm(e){return Uo(e)}class VR{constructor(t){this.auth=t,this.observer=null,this.addObserver=gK(n=>this.observer=n)}get next(){return mi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nY(e){IT=e}function NF(e){return IT.loadJS(e)}function iY(){return IT.recaptchaEnterpriseScript}function rY(){return IT.gapiScript}function sY(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class oY{constructor(){this.enterprise=new aY}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class aY{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const lY="recaptcha-enterprise",$F="NO_RECAPTCHA";class cY{constructor(t){this.type=lY,this.auth=fm(t)}async verify(t="verify",n=!1){async function i(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{NX(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(s=>{if(s.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new zX(s);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(s=>{h(s)})})}function r(a,l,h){const s=window.grecaptcha;MR(s)?s.enterprise.ready(()=>{s.enterprise.execute(a,{action:t}).then(p=>{l(p)}).catch(()=>{l($F)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oY().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(h=>{if(!n&&MR(window.grecaptcha))r(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let s=iY();s.length!==0&&(s+=h),NF(s).then(()=>{r(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function BR(e,t,n,i=!1,r=!1){const a=new cY(e);let l;if(r)l=$F;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const h={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const s=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const s=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function kw(e,t,n,i,r){var a;if((a=e._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await BR(e,t,n,n==="getOobCode");return i(e,l)}else return i(e,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await BR(e,t,n,n==="getOobCode");return i(e,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(e,t){const n=LA(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),a=n.getOptions();if(Jf(a,t??{}))return r;vu(r,"already-initialized")}return n.initialize({options:t})}function dY(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(hh);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function hY(e,t,n){const i=fm(e);mi(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,a=UF(t),{host:l,port:h}=fY(t),s=h===null?"":`:${h}`,p={url:`${a}//${l}${s}/`},v=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){mi(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),mi(Jf(p,i.config.emulator)&&Jf(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,x_(l)?(pF(`${a}//${l}${s}`),gF("Auth",!0)):mY()}function UF(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function fY(e){const t=UF(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:FR(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:FR(l)}}}function FR(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function mY(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return dh("not implemented")}_getIdTokenResponse(t){return dh("not implemented")}_linkToIdToken(t,n){return dh("not implemented")}_getReauthenticationResolver(t){return dh("not implemented")}}async function pY(e,t){return Mh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(e,t){return kb(e,"POST","/v1/accounts:signInWithPassword",Ph(e,t))}async function vY(e,t){return Mh(e,"POST","/v1/accounts:sendOobCode",Ph(e,t))}async function _Y(e,t){return vY(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yY(e,t){return kb(e,"POST","/v1/accounts:signInWithEmailLink",Ph(e,t))}async function bY(e,t){return kb(e,"POST","/v1/accounts:signInWithEmailLink",Ph(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends FA{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new $0(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new $0(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kw(t,n,"signInWithPassword",gY);case"emailLink":return yY(t,{email:this._email,oobCode:this._password});default:vu(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kw(t,i,"signUpPassword",pY);case"emailLink":return bY(t,{idToken:n,email:this._email,oobCode:this._password});default:vu(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(e,t){return kb(e,"POST","/v1/accounts:signInWithIdp",Ph(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY="http://localhost";class Hp extends FA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Hp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):vu("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...a}=n;if(!i||!r)return null;const l=new Hp(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(t){const n=this.buildRequest();return zv(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,zv(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,zv(t,n)}buildRequest(){const t={requestUri:xY,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Eb(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wY(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TY(e){const t=Uy(jy(e)).link,n=t?Uy(jy(t)).deep_link_id:null,i=Uy(jy(e)).deep_link_id;return(i?Uy(jy(i)).link:null)||i||n||t||e}class zA{constructor(t){const n=Uy(jy(t)),i=n.apiKey??null,r=n.oobCode??null,a=wY(n.mode??null);mi(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=TY(t);try{return new zA(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.providerId=og.PROVIDER_ID}static credential(t,n){return $0._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=zA.parseLink(n);return mi(i,"argument-error"),$0._fromEmailAndCode(t,i.code,i.tenantId)}}og.PROVIDER_ID="password";og.EMAIL_PASSWORD_SIGN_IN_METHOD="password";og.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib extends jF{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends Ib{constructor(){super("facebook.com")}static credential(t){return Hp._fromParams({providerId:Ef.PROVIDER_ID,signInMethod:Ef.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ef.credentialFromTaggedObject(t)}static credentialFromError(t){return Ef.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ef.credential(t.oauthAccessToken)}catch{return null}}}Ef.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ef.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Ib{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Hp._fromParams({providerId:Cf.PROVIDER_ID,signInMethod:Cf.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cf.credentialFromTaggedObject(t)}static credentialFromError(t){return Cf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Cf.credential(n,i)}catch{return null}}}Cf.GOOGLE_SIGN_IN_METHOD="google.com";Cf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends Ib{constructor(){super("github.com")}static credential(t){return Hp._fromParams({providerId:kf.PROVIDER_ID,signInMethod:kf.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kf.credentialFromTaggedObject(t)}static credentialFromError(t){return kf.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kf.credential(t.oauthAccessToken)}catch{return null}}}kf.GITHUB_SIGN_IN_METHOD="github.com";kf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Ib{constructor(){super("twitter.com")}static credential(t,n){return Hp._fromParams({providerId:If.PROVIDER_ID,signInMethod:If.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return If.credentialFromTaggedObject(t)}static credentialFromError(t){return If.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return If.credential(n,i)}catch{return null}}}If.TWITTER_SIGN_IN_METHOD="twitter.com";If.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SY(e,t){return kb(e,"POST","/v1/accounts:signUp",Ph(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const a=await uu._fromIdTokenResponse(t,i,r),l=zR(i);return new Gp({user:a,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=zR(i);return new Gp({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function zR(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends Ah{constructor(t,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Iw.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new Iw(t,n,i,r)}}function WF(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Iw._fromErrorAndOperation(e,a,t,i):a})}async function EY(e,t,n=!1){const i=await N0(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gp._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(e,t,n=!1){const{auth:i}=e;if(Lc(i.app))return Promise.reject(gh(i));const r="reauthenticate";try{const a=await N0(e,WF(i,r,t,e),n);mi(a.idToken,i,"internal-error");const l=VA(a.idToken);mi(l,i,"internal-error");const{sub:h}=l;return mi(e.uid===h,i,"user-mismatch"),Gp._forOperation(e,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&vu(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(e,t,n=!1){if(Lc(e.app))return Promise.reject(gh(e));const i="signIn",r=await WF(e,i,t),a=await Gp._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(a.user),a}async function CY(e,t){return GF(fm(e),t)}async function kY(e,t){return HF(Uo(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(e){const t=fm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function IY(e,t,n){const i=fm(e);await kw(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_Y)}async function AY(e,t,n){if(Lc(e.app))return Promise.reject(gh(e));const i=fm(e),l=await kw(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SY).catch(s=>{throw s.code==="auth/password-does-not-meet-requirements"&&qF(e),s}),h=await Gp._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function PY(e,t,n){return Lc(e.app)?Promise.reject(gh(e)):CY(Uo(e),og.credential(t,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&qF(e),i})}function MY(e,t,n,i){return Uo(e).onIdTokenChanged(t,n,i)}function DY(e,t,n){return Uo(e).beforeAuthStateChanged(t,n)}function KF(e,t,n,i){return Uo(e).onAuthStateChanged(t,n,i)}function LY(e){return Uo(e).signOut()}async function RY(e){return Uo(e).delete()}const Aw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Aw,"1"),this.storage.removeItem(Aw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY=1e3,VY=10;class YF extends XF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((l,h,s)=>{this.notifyListeners(l,s)});return}const i=t.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);YX()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,VY):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},OY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}YF.type="LOCAL";const BY=YF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF extends XF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}ZF.type="SESSION";const JF=ZF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FY(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new AT(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:a}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async p=>p(n.origin,a)),s=await FY(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:s})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}AT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,s)=>{const p=NA("",20);r.port1.start();const v=setTimeout(()=>{s(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(x){const T=x;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(v),clearTimeout(a),s(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(){return window}function NY(e){Qu().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(){return typeof Qu().WorkerGlobalScope<"u"&&typeof Qu().importScripts=="function"}async function $Y(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UY(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function jY(){return QF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="firebaseLocalStorageDb",WY=1,Pw="firebaseLocalStorage",tz="fbase_key";class Ab{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function PT(e,t){return e.transaction([Pw],t?"readwrite":"readonly").objectStore(Pw)}function HY(){const e=indexedDB.deleteDatabase(ez);return new Ab(e).toPromise()}function kk(){const e=indexedDB.open(ez,WY);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(Pw,{keyPath:tz})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Pw)?t(i):(i.close(),await HY(),t(await kk()))})})}async function NR(e,t,n){const i=PT(e,!0).put({[tz]:t,value:n});return new Ab(i).toPromise()}async function GY(e,t){const n=PT(e,!1).get(t),i=await new Ab(n).toPromise();return i===void 0?null:i.value}function $R(e,t){const n=PT(e,!0).delete(t);return new Ab(n).toPromise()}const qY=800,KY=3;class nz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kk(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>KY)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=AT._getInstance(jY()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await $Y(),!this.activeServiceWorker)return;this.sender=new zY(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||UY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kk();return await NR(t,Aw,"1"),await $R(t,Aw),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>NR(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>GY(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$R(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const a=PT(r,!1).getAll();return new Ab(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:a}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nz.type="LOCAL";const XY=nz;new Cb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(e,t){return t?hh(t):(mi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends FA{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zv(t,this._buildIdpRequest())}_linkToIdToken(t,n){return zv(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return zv(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function ZY(e){return GF(e.auth,new $A(e),e.bypassAuthState)}function JY(e){const{auth:t,user:n}=e;return mi(n,t,"internal-error"),HF(n,new $A(e),e.bypassAuthState)}async function QY(e){const{auth:t,user:n}=e;return mi(n,t,"internal-error"),EY(n,new $A(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(t,n,i,r,a=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=t;if(l){this.reject(l);return}const s={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(s))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ZY;case"linkViaPopup":case"linkViaRedirect":return QY;case"reauthViaPopup":case"reauthViaRedirect":return JY;default:vu(this.auth,"internal-error")}}resolve(t){wh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eZ=new Cb(2e3,1e4);class Tv extends iz{constructor(t,n,i,r,a){super(t,n,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Tv.currentPopupAction&&Tv.currentPopupAction.cancel(),Tv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mi(t,this.auth,"internal-error"),t}async onExecution(){wh(this.filter.length===1,"Popup operations only handle one event");const t=NA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ju(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ju(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ju(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,eZ.get())};t()}}Tv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ="pendingRedirect",M1=new Map;class nZ extends iz{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=M1.get(this.auth._key());if(!t){try{const i=await iZ(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}M1.set(this.auth._key(),t)}return this.bypassAuthState||M1.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iZ(e,t){const n=oZ(t),i=sZ(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function rZ(e,t){M1.set(e._key(),t)}function sZ(e){return hh(e._redirectPersistence)}function oZ(e){return P1(tZ,e.config.apiKey,e.name)}async function aZ(e,t,n=!1){if(Lc(e.app))return Promise.reject(gh(e));const i=fm(e),r=YY(i,t),l=await new nZ(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lZ=600*1e3;class cZ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!uZ(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!rz(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ju(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=lZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(UR(t))}saveEventToCache(t){this.cachedEventUids.add(UR(t)),this.lastProcessedEventTime=Date.now()}}function UR(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function rz({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function uZ(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rz(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dZ(e,t={}){return Mh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fZ=/^https?/;async function mZ(e){if(e.config.emulator)return;const{authorizedDomains:t}=await dZ(e);for(const n of t)try{if(pZ(n))return}catch{}vu(e,"unauthorized-domain")}function pZ(e){const t=Ek(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const l=new URL(e);return l.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!fZ.test(n))return!1;if(hZ.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZ=new Cb(3e4,6e4);function jR(){const e=Qu().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function vZ(e){return new Promise((t,n)=>{var r,a,l;function i(){jR(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jR(),n(Ju(e,"network-request-failed"))},timeout:gZ.get()})}if((a=(r=Qu().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)t(gapi.iframes.getContext());else if((l=Qu().gapi)!=null&&l.load)i();else{const h=sY("iframefcb");return Qu()[h]=()=>{gapi.load?i():n(Ju(e,"network-request-failed"))},NF(`${rY()}?onload=${h}`).catch(s=>n(s))}}).catch(t=>{throw D1=null,t})}let D1=null;function _Z(e){return D1=D1||vZ(e),D1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ=new Cb(5e3,15e3),bZ="__/auth/iframe",xZ="emulator/auth/iframe",wZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SZ(e){const t=e.config;mi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?OA(t,xZ):`https://${e.config.authDomain}/${bZ}`,i={apiKey:t.apiKey,appName:e.name,v:w_},r=TZ.get(e.config.apiHost);r&&(i.eid=r);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Eb(i).slice(1)}`}async function EZ(e){const t=await _Z(e),n=Qu().gapi;return mi(n,e,"internal-error"),t.open({where:document.body,url:SZ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wZ,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ju(e,"network-request-failed"),h=Qu().setTimeout(()=>{a(l)},yZ.get());function s(){Qu().clearTimeout(h),r(i)}i.ping(s).then(s,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kZ=500,IZ=600,AZ="_blank",PZ="http://localhost";class WR{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MZ(e,t,n,i=kZ,r=IZ){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const s={...CZ,width:i.toString(),height:r.toString(),top:a,left:l},p=Ha().toLowerCase();n&&(h=LF(p)?AZ:n),MF(p)&&(t=t||PZ,s.scrollbars="yes");const v=Object.entries(s).reduce((T,[C,I])=>`${T}${C}=${I},`,"");if(XX(p)&&h!=="_self")return DZ(t||"",h),new WR(null);const x=window.open(t||"",h,v);mi(x,e,"popup-blocked");try{x.focus()}catch{}return new WR(x)}function DZ(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ="__/auth/handler",RZ="emulator/auth/handler",OZ=encodeURIComponent("fac");async function HR(e,t,n,i,r,a){mi(e.config.authDomain,e,"auth-domain-config-required"),mi(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:w_,eventId:r};if(t instanceof jF){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",pK(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[v,x]of Object.entries({}))l[v]=x}if(t instanceof Ib){const v=t.getScopes().filter(x=>x!=="");v.length>0&&(l.scopes=v.join(","))}e.tenantId&&(l.tid=e.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const s=await e._getAppCheckToken(),p=s?`#${OZ}=${encodeURIComponent(s)}`:"";return`${VZ(e)}?${Eb(h).slice(1)}${p}`}function VZ({config:e}){return e.emulator?OA(e,RZ):`https://${e.authDomain}/${LZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="webStorageSupport";class BZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JF,this._completeRedirectFn=aZ,this._overrideRedirectResult=rZ}async _openPopup(t,n,i,r){var l;wh((l=this.eventManagers[t._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await HR(t,n,i,Ek(),r);return MZ(t,a,NA())}async _openRedirect(t,n,i,r){await this._originValidation(t);const a=await HR(t,n,i,Ek(),r);return NY(a),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:a}=this.eventManagers[n];return r?Promise.resolve(r):(wh(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await EZ(t),i=new cZ(t);return n.register("authEvent",r=>(mi(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(hC,{type:hC},r=>{var l;const a=(l=r==null?void 0:r[0])==null?void 0:l[hC];a!==void 0&&n(!!a),vu(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mZ(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FF()||DF()||BA()}}const FZ=BZ;var GR="@firebase/auth",qR="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NZ(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $Z(e){Jv(new Wp("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;mi(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const s={apiKey:l,authDomain:h,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zF(e)},p=new tY(i,r,a,s);return dY(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Jv(new Wp("auth-internal",t=>{const n=fm(t.getProvider("auth").getImmediate());return(i=>new zZ(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wf(GR,qR,NZ(e)),Wf(GR,qR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UZ=300,jZ=mF("authIdTokenMaxAge")||UZ;let KR=null;const WZ=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jZ)return;const r=n==null?void 0:n.token;KR!==r&&(KR=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function UA(e=bF()){const t=LA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=uY(e,{popupRedirectResolver:FZ,persistence:[XY,BY,JF]}),i=mF("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=WZ(a.toString());DY(n,l,()=>l(n.currentUser)),MY(n,h=>l(h))}}const r=hF("auth");return r&&hY(n,`http://${r}`),n}function HZ(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}nY({loadJS(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const a=Ju("internal-error");a.customData=r,n(a)},i.type="text/javascript",i.charset="UTF-8",HZ().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$Z("Browser");var XR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hf,sz;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(X,$){function G(){}G.prototype=$.prototype,X.F=$.prototype,X.prototype=new G,X.prototype.constructor=X,X.D=function(j,te,Z){for(var ee=Array(arguments.length-2),be=2;be<arguments.length;be++)ee[be-2]=arguments[be];return $.prototype[te].apply(j,ee)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(X,$,G){G||(G=0);const j=Array(16);if(typeof $=="string")for(var te=0;te<16;++te)j[te]=$.charCodeAt(G++)|$.charCodeAt(G++)<<8|$.charCodeAt(G++)<<16|$.charCodeAt(G++)<<24;else for(te=0;te<16;++te)j[te]=$[G++]|$[G++]<<8|$[G++]<<16|$[G++]<<24;$=X.g[0],G=X.g[1],te=X.g[2];let Z=X.g[3],ee;ee=$+(Z^G&(te^Z))+j[0]+3614090360&4294967295,$=G+(ee<<7&4294967295|ee>>>25),ee=Z+(te^$&(G^te))+j[1]+3905402710&4294967295,Z=$+(ee<<12&4294967295|ee>>>20),ee=te+(G^Z&($^G))+j[2]+606105819&4294967295,te=Z+(ee<<17&4294967295|ee>>>15),ee=G+($^te&(Z^$))+j[3]+3250441966&4294967295,G=te+(ee<<22&4294967295|ee>>>10),ee=$+(Z^G&(te^Z))+j[4]+4118548399&4294967295,$=G+(ee<<7&4294967295|ee>>>25),ee=Z+(te^$&(G^te))+j[5]+1200080426&4294967295,Z=$+(ee<<12&4294967295|ee>>>20),ee=te+(G^Z&($^G))+j[6]+2821735955&4294967295,te=Z+(ee<<17&4294967295|ee>>>15),ee=G+($^te&(Z^$))+j[7]+4249261313&4294967295,G=te+(ee<<22&4294967295|ee>>>10),ee=$+(Z^G&(te^Z))+j[8]+1770035416&4294967295,$=G+(ee<<7&4294967295|ee>>>25),ee=Z+(te^$&(G^te))+j[9]+2336552879&4294967295,Z=$+(ee<<12&4294967295|ee>>>20),ee=te+(G^Z&($^G))+j[10]+4294925233&4294967295,te=Z+(ee<<17&4294967295|ee>>>15),ee=G+($^te&(Z^$))+j[11]+2304563134&4294967295,G=te+(ee<<22&4294967295|ee>>>10),ee=$+(Z^G&(te^Z))+j[12]+1804603682&4294967295,$=G+(ee<<7&4294967295|ee>>>25),ee=Z+(te^$&(G^te))+j[13]+4254626195&4294967295,Z=$+(ee<<12&4294967295|ee>>>20),ee=te+(G^Z&($^G))+j[14]+2792965006&4294967295,te=Z+(ee<<17&4294967295|ee>>>15),ee=G+($^te&(Z^$))+j[15]+1236535329&4294967295,G=te+(ee<<22&4294967295|ee>>>10),ee=$+(te^Z&(G^te))+j[1]+4129170786&4294967295,$=G+(ee<<5&4294967295|ee>>>27),ee=Z+(G^te&($^G))+j[6]+3225465664&4294967295,Z=$+(ee<<9&4294967295|ee>>>23),ee=te+($^G&(Z^$))+j[11]+643717713&4294967295,te=Z+(ee<<14&4294967295|ee>>>18),ee=G+(Z^$&(te^Z))+j[0]+3921069994&4294967295,G=te+(ee<<20&4294967295|ee>>>12),ee=$+(te^Z&(G^te))+j[5]+3593408605&4294967295,$=G+(ee<<5&4294967295|ee>>>27),ee=Z+(G^te&($^G))+j[10]+38016083&4294967295,Z=$+(ee<<9&4294967295|ee>>>23),ee=te+($^G&(Z^$))+j[15]+3634488961&4294967295,te=Z+(ee<<14&4294967295|ee>>>18),ee=G+(Z^$&(te^Z))+j[4]+3889429448&4294967295,G=te+(ee<<20&4294967295|ee>>>12),ee=$+(te^Z&(G^te))+j[9]+568446438&4294967295,$=G+(ee<<5&4294967295|ee>>>27),ee=Z+(G^te&($^G))+j[14]+3275163606&4294967295,Z=$+(ee<<9&4294967295|ee>>>23),ee=te+($^G&(Z^$))+j[3]+4107603335&4294967295,te=Z+(ee<<14&4294967295|ee>>>18),ee=G+(Z^$&(te^Z))+j[8]+1163531501&4294967295,G=te+(ee<<20&4294967295|ee>>>12),ee=$+(te^Z&(G^te))+j[13]+2850285829&4294967295,$=G+(ee<<5&4294967295|ee>>>27),ee=Z+(G^te&($^G))+j[2]+4243563512&4294967295,Z=$+(ee<<9&4294967295|ee>>>23),ee=te+($^G&(Z^$))+j[7]+1735328473&4294967295,te=Z+(ee<<14&4294967295|ee>>>18),ee=G+(Z^$&(te^Z))+j[12]+2368359562&4294967295,G=te+(ee<<20&4294967295|ee>>>12),ee=$+(G^te^Z)+j[5]+4294588738&4294967295,$=G+(ee<<4&4294967295|ee>>>28),ee=Z+($^G^te)+j[8]+2272392833&4294967295,Z=$+(ee<<11&4294967295|ee>>>21),ee=te+(Z^$^G)+j[11]+1839030562&4294967295,te=Z+(ee<<16&4294967295|ee>>>16),ee=G+(te^Z^$)+j[14]+4259657740&4294967295,G=te+(ee<<23&4294967295|ee>>>9),ee=$+(G^te^Z)+j[1]+2763975236&4294967295,$=G+(ee<<4&4294967295|ee>>>28),ee=Z+($^G^te)+j[4]+1272893353&4294967295,Z=$+(ee<<11&4294967295|ee>>>21),ee=te+(Z^$^G)+j[7]+4139469664&4294967295,te=Z+(ee<<16&4294967295|ee>>>16),ee=G+(te^Z^$)+j[10]+3200236656&4294967295,G=te+(ee<<23&4294967295|ee>>>9),ee=$+(G^te^Z)+j[13]+681279174&4294967295,$=G+(ee<<4&4294967295|ee>>>28),ee=Z+($^G^te)+j[0]+3936430074&4294967295,Z=$+(ee<<11&4294967295|ee>>>21),ee=te+(Z^$^G)+j[3]+3572445317&4294967295,te=Z+(ee<<16&4294967295|ee>>>16),ee=G+(te^Z^$)+j[6]+76029189&4294967295,G=te+(ee<<23&4294967295|ee>>>9),ee=$+(G^te^Z)+j[9]+3654602809&4294967295,$=G+(ee<<4&4294967295|ee>>>28),ee=Z+($^G^te)+j[12]+3873151461&4294967295,Z=$+(ee<<11&4294967295|ee>>>21),ee=te+(Z^$^G)+j[15]+530742520&4294967295,te=Z+(ee<<16&4294967295|ee>>>16),ee=G+(te^Z^$)+j[2]+3299628645&4294967295,G=te+(ee<<23&4294967295|ee>>>9),ee=$+(te^(G|~Z))+j[0]+4096336452&4294967295,$=G+(ee<<6&4294967295|ee>>>26),ee=Z+(G^($|~te))+j[7]+1126891415&4294967295,Z=$+(ee<<10&4294967295|ee>>>22),ee=te+($^(Z|~G))+j[14]+2878612391&4294967295,te=Z+(ee<<15&4294967295|ee>>>17),ee=G+(Z^(te|~$))+j[5]+4237533241&4294967295,G=te+(ee<<21&4294967295|ee>>>11),ee=$+(te^(G|~Z))+j[12]+1700485571&4294967295,$=G+(ee<<6&4294967295|ee>>>26),ee=Z+(G^($|~te))+j[3]+2399980690&4294967295,Z=$+(ee<<10&4294967295|ee>>>22),ee=te+($^(Z|~G))+j[10]+4293915773&4294967295,te=Z+(ee<<15&4294967295|ee>>>17),ee=G+(Z^(te|~$))+j[1]+2240044497&4294967295,G=te+(ee<<21&4294967295|ee>>>11),ee=$+(te^(G|~Z))+j[8]+1873313359&4294967295,$=G+(ee<<6&4294967295|ee>>>26),ee=Z+(G^($|~te))+j[15]+4264355552&4294967295,Z=$+(ee<<10&4294967295|ee>>>22),ee=te+($^(Z|~G))+j[6]+2734768916&4294967295,te=Z+(ee<<15&4294967295|ee>>>17),ee=G+(Z^(te|~$))+j[13]+1309151649&4294967295,G=te+(ee<<21&4294967295|ee>>>11),ee=$+(te^(G|~Z))+j[4]+4149444226&4294967295,$=G+(ee<<6&4294967295|ee>>>26),ee=Z+(G^($|~te))+j[11]+3174756917&4294967295,Z=$+(ee<<10&4294967295|ee>>>22),ee=te+($^(Z|~G))+j[2]+718787259&4294967295,te=Z+(ee<<15&4294967295|ee>>>17),ee=G+(Z^(te|~$))+j[9]+3951481745&4294967295,X.g[0]=X.g[0]+$&4294967295,X.g[1]=X.g[1]+(te+(ee<<21&4294967295|ee>>>11))&4294967295,X.g[2]=X.g[2]+te&4294967295,X.g[3]=X.g[3]+Z&4294967295}i.prototype.v=function(X,$){$===void 0&&($=X.length);const G=$-this.blockSize,j=this.C;let te=this.h,Z=0;for(;Z<$;){if(te==0)for(;Z<=G;)r(this,X,Z),Z+=this.blockSize;if(typeof X=="string"){for(;Z<$;)if(j[te++]=X.charCodeAt(Z++),te==this.blockSize){r(this,j),te=0;break}}else for(;Z<$;)if(j[te++]=X[Z++],te==this.blockSize){r(this,j),te=0;break}}this.h=te,this.o+=$},i.prototype.A=function(){var X=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);X[0]=128;for(var $=1;$<X.length-8;++$)X[$]=0;$=this.o*8;for(var G=X.length-8;G<X.length;++G)X[G]=$&255,$/=256;for(this.v(X),X=Array(16),$=0,G=0;G<4;++G)for(let j=0;j<32;j+=8)X[$++]=this.g[G]>>>j&255;return X};function a(X,$){var G=h;return Object.prototype.hasOwnProperty.call(G,X)?G[X]:G[X]=$(X)}function l(X,$){this.h=$;const G=[];let j=!0;for(let te=X.length-1;te>=0;te--){const Z=X[te]|0;j&&Z==$||(G[te]=Z,j=!1)}this.g=G}var h={};function s(X){return-128<=X&&X<128?a(X,function($){return new l([$|0],$<0?-1:0)}):new l([X|0],X<0?-1:0)}function p(X){if(isNaN(X)||!isFinite(X))return x;if(X<0)return D(p(-X));const $=[];let G=1;for(let j=0;X>=G;j++)$[j]=X/G|0,G*=4294967296;return new l($,0)}function v(X,$){if(X.length==0)throw Error("number format error: empty string");if($=$||10,$<2||36<$)throw Error("radix out of range: "+$);if(X.charAt(0)=="-")return D(v(X.substring(1),$));if(X.indexOf("-")>=0)throw Error('number format error: interior "-" character');const G=p(Math.pow($,8));let j=x;for(let Z=0;Z<X.length;Z+=8){var te=Math.min(8,X.length-Z);const ee=parseInt(X.substring(Z,Z+te),$);te<8?(te=p(Math.pow($,te)),j=j.j(te).add(p(ee))):(j=j.j(G),j=j.add(p(ee)))}return j}var x=s(0),T=s(1),C=s(16777216);e=l.prototype,e.m=function(){if(P(this))return-D(this).m();let X=0,$=1;for(let G=0;G<this.g.length;G++){const j=this.i(G);X+=(j>=0?j:4294967296+j)*$,$*=4294967296}return X},e.toString=function(X){if(X=X||10,X<2||36<X)throw Error("radix out of range: "+X);if(I(this))return"0";if(P(this))return"-"+D(this).toString(X);const $=p(Math.pow(X,6));var G=this;let j="";for(;;){const te=q(G,$).g;G=F(G,te.j($));let Z=((G.g.length>0?G.g[0]:G.h)>>>0).toString(X);if(G=te,I(G))return Z+j;for(;Z.length<6;)Z="0"+Z;j=Z+j}},e.i=function(X){return X<0?0:X<this.g.length?this.g[X]:this.h};function I(X){if(X.h!=0)return!1;for(let $=0;$<X.g.length;$++)if(X.g[$]!=0)return!1;return!0}function P(X){return X.h==-1}e.l=function(X){return X=F(this,X),P(X)?-1:I(X)?0:1};function D(X){const $=X.g.length,G=[];for(let j=0;j<$;j++)G[j]=~X.g[j];return new l(G,~X.h).add(T)}e.abs=function(){return P(this)?D(this):this},e.add=function(X){const $=Math.max(this.g.length,X.g.length),G=[];let j=0;for(let te=0;te<=$;te++){let Z=j+(this.i(te)&65535)+(X.i(te)&65535),ee=(Z>>>16)+(this.i(te)>>>16)+(X.i(te)>>>16);j=ee>>>16,Z&=65535,ee&=65535,G[te]=ee<<16|Z}return new l(G,G[G.length-1]&-2147483648?-1:0)};function F(X,$){return X.add(D($))}e.j=function(X){if(I(this)||I(X))return x;if(P(this))return P(X)?D(this).j(D(X)):D(D(this).j(X));if(P(X))return D(this.j(D(X)));if(this.l(C)<0&&X.l(C)<0)return p(this.m()*X.m());const $=this.g.length+X.g.length,G=[];for(var j=0;j<2*$;j++)G[j]=0;for(j=0;j<this.g.length;j++)for(let te=0;te<X.g.length;te++){const Z=this.i(j)>>>16,ee=this.i(j)&65535,be=X.i(te)>>>16,Ie=X.i(te)&65535;G[2*j+2*te]+=ee*Ie,V(G,2*j+2*te),G[2*j+2*te+1]+=Z*Ie,V(G,2*j+2*te+1),G[2*j+2*te+1]+=ee*be,V(G,2*j+2*te+1),G[2*j+2*te+2]+=Z*be,V(G,2*j+2*te+2)}for(X=0;X<$;X++)G[X]=G[2*X+1]<<16|G[2*X];for(X=$;X<2*$;X++)G[X]=0;return new l(G,0)};function V(X,$){for(;(X[$]&65535)!=X[$];)X[$+1]+=X[$]>>>16,X[$]&=65535,$++}function H(X,$){this.g=X,this.h=$}function q(X,$){if(I($))throw Error("division by zero");if(I(X))return new H(x,x);if(P(X))return $=q(D(X),$),new H(D($.g),D($.h));if(P($))return $=q(X,D($)),new H(D($.g),$.h);if(X.g.length>30){if(P(X)||P($))throw Error("slowDivide_ only works with positive integers.");for(var G=T,j=$;j.l(X)<=0;)G=K(G),j=K(j);var te=ie(G,1),Z=ie(j,1);for(j=ie(j,2),G=ie(G,2);!I(j);){var ee=Z.add(j);ee.l(X)<=0&&(te=te.add(G),Z=ee),j=ie(j,1),G=ie(G,1)}return $=F(X,te.j($)),new H(te,$)}for(te=x;X.l($)>=0;){for(G=Math.max(1,Math.floor(X.m()/$.m())),j=Math.ceil(Math.log(G)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),Z=p(G),ee=Z.j($);P(ee)||ee.l(X)>0;)G-=j,Z=p(G),ee=Z.j($);I(Z)&&(Z=T),te=te.add(Z),X=F(X,ee)}return new H(te,X)}e.B=function(X){return q(this,X).h},e.and=function(X){const $=Math.max(this.g.length,X.g.length),G=[];for(let j=0;j<$;j++)G[j]=this.i(j)&X.i(j);return new l(G,this.h&X.h)},e.or=function(X){const $=Math.max(this.g.length,X.g.length),G=[];for(let j=0;j<$;j++)G[j]=this.i(j)|X.i(j);return new l(G,this.h|X.h)},e.xor=function(X){const $=Math.max(this.g.length,X.g.length),G=[];for(let j=0;j<$;j++)G[j]=this.i(j)^X.i(j);return new l(G,this.h^X.h)};function K(X){const $=X.g.length+1,G=[];for(let j=0;j<$;j++)G[j]=X.i(j)<<1|X.i(j-1)>>>31;return new l(G,X.h)}function ie(X,$){const G=$>>5;$%=32;const j=X.g.length-G,te=[];for(let Z=0;Z<j;Z++)te[Z]=$>0?X.i(Z+G)>>>$|X.i(Z+G+1)<<32-$:X.i(Z+G);return new l(te,X.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sz=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,Hf=l}).apply(typeof XR<"u"?XR:typeof self<"u"?self:typeof window<"u"?window:{});var Kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oz,Wy,az,L1,Ik,lz,cz,uz;(function(){var e,t=Object.defineProperty;function n(M){M=[typeof globalThis=="object"&&globalThis,M,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kx=="object"&&Kx];for(var ne=0;ne<M.length;++ne){var de=M[ne];if(de&&de.Math==Math)return de}throw Error("Cannot find global object")}var i=n(this);function r(M,ne){if(ne)e:{var de=i;M=M.split(".");for(var Le=0;Le<M.length-1;Le++){var It=M[Le];if(!(It in de))break e;de=de[It]}M=M[M.length-1],Le=de[M],ne=ne(Le),ne!=Le&&ne!=null&&t(de,M,{configurable:!0,writable:!0,value:ne})}}r("Symbol.dispose",function(M){return M||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(M){return M||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(M){return M||function(ne){var de=[],Le;for(Le in ne)Object.prototype.hasOwnProperty.call(ne,Le)&&de.push([Le,ne[Le]]);return de}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(M){var ne=typeof M;return ne=="object"&&M!=null||ne=="function"}function s(M,ne,de){return M.call.apply(M.bind,arguments)}function p(M,ne,de){return p=s,p.apply(null,arguments)}function v(M,ne){var de=Array.prototype.slice.call(arguments,1);return function(){var Le=de.slice();return Le.push.apply(Le,arguments),M.apply(this,Le)}}function x(M,ne){function de(){}de.prototype=ne.prototype,M.Z=ne.prototype,M.prototype=new de,M.prototype.constructor=M,M.Ob=function(Le,It,Rt){for(var xn=Array(arguments.length-2),fi=2;fi<arguments.length;fi++)xn[fi-2]=arguments[fi];return ne.prototype[It].apply(Le,xn)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?M=>M&&AsyncContext.Snapshot.wrap(M):M=>M;function C(M){const ne=M.length;if(ne>0){const de=Array(ne);for(let Le=0;Le<ne;Le++)de[Le]=M[Le];return de}return[]}function I(M,ne){for(let Le=1;Le<arguments.length;Le++){const It=arguments[Le];var de=typeof It;if(de=de!="object"?de:It?Array.isArray(It)?"array":de:"null",de=="array"||de=="object"&&typeof It.length=="number"){de=M.length||0;const Rt=It.length||0;M.length=de+Rt;for(let xn=0;xn<Rt;xn++)M[de+xn]=It[xn]}else M.push(It)}}class P{constructor(ne,de){this.i=ne,this.j=de,this.h=0,this.g=null}get(){let ne;return this.h>0?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function D(M){l.setTimeout(()=>{throw M},0)}function F(){var M=X;let ne=null;return M.g&&(ne=M.g,M.g=M.g.next,M.g||(M.h=null),ne.next=null),ne}class V{constructor(){this.h=this.g=null}add(ne,de){const Le=H.get();Le.set(ne,de),this.h?this.h.next=Le:this.g=Le,this.h=Le}}var H=new P(()=>new q,M=>M.reset());class q{constructor(){this.next=this.g=this.h=null}set(ne,de){this.h=ne,this.g=de,this.next=null}reset(){this.next=this.g=this.h=null}}let K,ie=!1,X=new V,$=()=>{const M=Promise.resolve(void 0);K=()=>{M.then(G)}};function G(){for(var M;M=F();){try{M.h.call(M.g)}catch(de){D(de)}var ne=H;ne.j(M),ne.h<100&&(ne.h++,M.next=ne.g,ne.g=M)}ie=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(M,ne){this.type=M,this.g=this.target=ne,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var M=!1,ne=Object.defineProperty({},"passive",{get:function(){M=!0}});try{const de=()=>{};l.addEventListener("test",de,ne),l.removeEventListener("test",de,ne)}catch{}return M})();function ee(M){return/^[\s\xa0]*$/.test(M)}function be(M,ne){te.call(this,M?M.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,M&&this.init(M,ne)}x(be,te),be.prototype.init=function(M,ne){const de=this.type=M.type,Le=M.changedTouches&&M.changedTouches.length?M.changedTouches[0]:null;this.target=M.target||M.srcElement,this.g=ne,ne=M.relatedTarget,ne||(de=="mouseover"?ne=M.fromElement:de=="mouseout"&&(ne=M.toElement)),this.relatedTarget=ne,Le?(this.clientX=Le.clientX!==void 0?Le.clientX:Le.pageX,this.clientY=Le.clientY!==void 0?Le.clientY:Le.pageY,this.screenX=Le.screenX||0,this.screenY=Le.screenY||0):(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0),this.button=M.button,this.key=M.key||"",this.ctrlKey=M.ctrlKey,this.altKey=M.altKey,this.shiftKey=M.shiftKey,this.metaKey=M.metaKey,this.pointerId=M.pointerId||0,this.pointerType=M.pointerType,this.state=M.state,this.i=M,M.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const M=this.i;M.preventDefault?M.preventDefault():M.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),Ve=0;function Ke(M,ne,de,Le,It){this.listener=M,this.proxy=null,this.src=ne,this.type=de,this.capture=!!Le,this.ha=It,this.key=++Ve,this.da=this.fa=!1}function Xe(M){M.da=!0,M.listener=null,M.proxy=null,M.src=null,M.ha=null}function Pe(M,ne,de){for(const Le in M)ne.call(de,M[Le],Le,M)}function $e(M,ne){for(const de in M)ne.call(void 0,M[de],de,M)}function Ee(M){const ne={};for(const de in M)ne[de]=M[de];return ne}const We="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ze(M,ne){let de,Le;for(let It=1;It<arguments.length;It++){Le=arguments[It];for(de in Le)M[de]=Le[de];for(let Rt=0;Rt<We.length;Rt++)de=We[Rt],Object.prototype.hasOwnProperty.call(Le,de)&&(M[de]=Le[de])}}function ct(M){this.src=M,this.g={},this.h=0}ct.prototype.add=function(M,ne,de,Le,It){const Rt=M.toString();M=this.g[Rt],M||(M=this.g[Rt]=[],this.h++);const xn=Nt(M,ne,Le,It);return xn>-1?(ne=M[xn],de||(ne.fa=!1)):(ne=new Ke(ne,this.src,Rt,!!Le,It),ne.fa=de,M.push(ne)),ne};function kt(M,ne){const de=ne.type;if(de in M.g){var Le=M.g[de],It=Array.prototype.indexOf.call(Le,ne,void 0),Rt;(Rt=It>=0)&&Array.prototype.splice.call(Le,It,1),Rt&&(Xe(ne),M.g[de].length==0&&(delete M.g[de],M.h--))}}function Nt(M,ne,de,Le){for(let It=0;It<M.length;++It){const Rt=M[It];if(!Rt.da&&Rt.listener==ne&&Rt.capture==!!de&&Rt.ha==Le)return It}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),dt={};function Je(M,ne,de,Le,It){if(Array.isArray(ne)){for(let Rt=0;Rt<ne.length;Rt++)Je(M,ne[Rt],de,Le,It);return null}return de=pt(de),M&&M[Ie]?M.J(ne,de,h(Le)?!!Le.capture:!1,It):yt(M,ne,de,!1,Le,It)}function yt(M,ne,de,Le,It,Rt){if(!ne)throw Error("Invalid event type");const xn=h(It)?!!It.capture:!!It;let fi=Fe(M);if(fi||(M[ot]=fi=new ct(M)),de=fi.add(ne,de,Le,xn,Rt),de.proxy)return de;if(Le=Ne(),de.proxy=Le,Le.src=M,Le.listener=de,M.addEventListener)Z||(It=xn),It===void 0&&(It=!1),M.addEventListener(ne.toString(),Le,It);else if(M.attachEvent)M.attachEvent(_e(ne.toString()),Le);else if(M.addListener&&M.removeListener)M.addListener(Le);else throw Error("addEventListener and attachEvent are unavailable.");return de}function Ne(){function M(de){return ne.call(M.src,M.listener,de)}const ne=fe;return M}function le(M,ne,de,Le,It){if(Array.isArray(ne))for(var Rt=0;Rt<ne.length;Rt++)le(M,ne[Rt],de,Le,It);else Le=h(Le)?!!Le.capture:!!Le,de=pt(de),M&&M[Ie]?(M=M.i,Rt=String(ne).toString(),Rt in M.g&&(ne=M.g[Rt],de=Nt(ne,de,Le,It),de>-1&&(Xe(ne[de]),Array.prototype.splice.call(ne,de,1),ne.length==0&&(delete M.g[Rt],M.h--)))):M&&(M=Fe(M))&&(ne=M.g[ne.toString()],M=-1,ne&&(M=Nt(ne,de,Le,It)),(de=M>-1?ne[M]:null)&&we(de))}function we(M){if(typeof M!="number"&&M&&!M.da){var ne=M.src;if(ne&&ne[Ie])kt(ne.i,M);else{var de=M.type,Le=M.proxy;ne.removeEventListener?ne.removeEventListener(de,Le,M.capture):ne.detachEvent?ne.detachEvent(_e(de),Le):ne.addListener&&ne.removeListener&&ne.removeListener(Le),(de=Fe(ne))?(kt(de,M),de.h==0&&(de.src=null,ne[ot]=null)):Xe(M)}}}function _e(M){return M in dt?dt[M]:dt[M]="on"+M}function fe(M,ne){if(M.da)M=!0;else{ne=new be(ne,this);const de=M.listener,Le=M.ha||M.src;M.fa&&we(M),M=de.call(Le,ne)}return M}function Fe(M){return M=M[ot],M instanceof ct?M:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function pt(M){return typeof M=="function"?M:(M[rt]||(M[rt]=function(ne){return M.handleEvent(ne)}),M[rt])}function vt(){j.call(this),this.i=new ct(this),this.M=this,this.G=null}x(vt,j),vt.prototype[Ie]=!0,vt.prototype.removeEventListener=function(M,ne,de,Le){le(this,M,ne,de,Le)};function gt(M,ne){var de,Le=M.G;if(Le)for(de=[];Le;Le=Le.G)de.push(Le);if(M=M.M,Le=ne.type||ne,typeof ne=="string")ne=new te(ne,M);else if(ne instanceof te)ne.target=ne.target||M;else{var It=ne;ne=new te(Le,M),Ze(ne,It)}It=!0;let Rt,xn;if(de)for(xn=de.length-1;xn>=0;xn--)Rt=ne.g=de[xn],It=mt(Rt,Le,!0,ne)&&It;if(Rt=ne.g=M,It=mt(Rt,Le,!0,ne)&&It,It=mt(Rt,Le,!1,ne)&&It,de)for(xn=0;xn<de.length;xn++)Rt=ne.g=de[xn],It=mt(Rt,Le,!1,ne)&&It}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var M=this.i;for(const ne in M.g){const de=M.g[ne];for(let Le=0;Le<de.length;Le++)Xe(de[Le]);delete M.g[ne],M.h--}}this.G=null},vt.prototype.J=function(M,ne,de,Le){return this.i.add(String(M),ne,!1,de,Le)},vt.prototype.K=function(M,ne,de,Le){return this.i.add(String(M),ne,!0,de,Le)};function mt(M,ne,de,Le){if(ne=M.i.g[String(ne)],!ne)return!0;ne=ne.concat();let It=!0;for(let Rt=0;Rt<ne.length;++Rt){const xn=ne[Rt];if(xn&&!xn.da&&xn.capture==de){const fi=xn.listener,Rr=xn.ha||xn.src;xn.fa&&kt(M.i,xn),It=fi.call(Rr,Le)!==!1&&It}}return It&&!Le.defaultPrevented}function Vt(M,ne){if(typeof M!="function")if(M&&typeof M.handleEvent=="function")M=p(M.handleEvent,M);else throw Error("Invalid listener argument");return Number(ne)>2147483647?-1:l.setTimeout(M,ne||0)}function Gt(M){M.g=Vt(()=>{M.g=null,M.i&&(M.i=!1,Gt(M))},M.l);const ne=M.h;M.h=null,M.m.apply(null,ne)}class gn extends j{constructor(ne,de){super(),this.m=ne,this.l=de,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:Gt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(M){j.call(this),this.h=M,this.g={}}x(In,j);var On=[];function qn(M){Pe(M.g,function(ne,de){this.g.hasOwnProperty(de)&&we(ne)},M),M.g={}}In.prototype.N=function(){In.Z.N.call(this),qn(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=l.JSON.stringify,un=l.JSON.parse,An=class{stringify(M){return l.JSON.stringify(M,void 0)}parse(M){return l.JSON.parse(M,void 0)}};function Ln(){}function wi(){}var hi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fs(){te.call(this,"d")}x(fs,te);function Ji(){te.call(this,"c")}x(Ji,te);var Tr={},Wo=null;function Eo(){return Wo=Wo||new vt}Tr.Ia="serverreachability";function Uc(M){te.call(this,Tr.Ia,M)}x(Uc,te);function Ue(M){const ne=Eo();gt(ne,new Uc(ne))}Tr.STAT_EVENT="statevent";function ge(M,ne){te.call(this,Tr.STAT_EVENT,M),this.stat=ne}x(ge,te);function ye(M){const ne=Eo();gt(ne,new ge(ne,M))}Tr.Ja="timingevent";function ze(M,ne){te.call(this,Tr.Ja,M),this.size=ne}x(ze,te);function Qe(M,ne){if(typeof M!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){M()},ne)}function at(){this.g=!0}at.prototype.ua=function(){this.g=!1};function wt(M,ne,de,Le,It,Rt){M.info(function(){if(M.g)if(Rt){var xn="",fi=Rt.split("&");for(let Ai=0;Ai<fi.length;Ai++){var Rr=fi[Ai].split("=");if(Rr.length>1){const ar=Rr[0];Rr=Rr[1];const ti=ar.split("_");xn=ti.length>=2&&ti[1]=="type"?xn+(ar+"="+Rr+"&"):xn+(ar+"=redacted&")}}}else xn=null;else xn=Rt;return"XMLHTTP REQ ("+Le+") [attempt "+It+"]: "+ne+`
`+de+`
`+xn})}function bt(M,ne,de,Le,It,Rt,xn){M.info(function(){return"XMLHTTP RESP ("+Le+") [ attempt "+It+"]: "+ne+`
`+de+`
`+Rt+" "+xn})}function st(M,ne,de,Le){M.info(function(){return"XMLHTTP TEXT ("+ne+"): "+rn(M,de)+(Le?" "+Le:"")})}function Pt(M,ne){M.info(function(){return"TIMEOUT: "+ne})}at.prototype.info=function(){};function rn(M,ne){if(!M.g)return ne;if(!ne)return null;try{const Rt=JSON.parse(ne);if(Rt){for(M=0;M<Rt.length;M++)if(Array.isArray(Rt[M])){var de=Rt[M];if(!(de.length<2)){var Le=de[1];if(Array.isArray(Le)&&!(Le.length<1)){var It=Le[0];if(It!="noop"&&It!="stop"&&It!="close")for(let xn=1;xn<Le.length;xn++)Le[xn]=""}}}}return zt(Rt)}catch{return ne}}var fn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yn;function ei(){}x(ei,Ln),ei.prototype.g=function(){return new XMLHttpRequest},Yn=new ei;function Wn(M){return encodeURIComponent(String(M))}function li(M){var ne=1;M=M.split(":");const de=[];for(;ne>0&&M.length;)de.push(M.shift()),ne--;return M.length&&de.push(M.join(":")),de}function Zn(M,ne,de,Le){this.j=M,this.i=ne,this.l=de,this.S=Le||1,this.V=new In(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}var gr={},rs={};function Sr(M,ne,de){M.M=1,M.A=ga(Qi(ne)),M.u=de,M.R=!0,Ho(M,null)}function Ho(M,ne){M.F=Date.now(),Cs(M),M.B=Qi(M.A);var de=M.B,Le=M.S;Array.isArray(Le)||(Le=[String(Le)]),dl(de.i,"t",Le),M.C=0,de=M.j.L,M.h=new Vi,M.g=Eu(M.j,de?ne:null,!M.u),M.P>0&&(M.O=new gn(p(M.Y,M,M.g),M.P)),ne=M.V,de=M.g,Le=M.ba;var It="readystatechange";Array.isArray(It)||(It&&(On[0]=It.toString()),It=On);for(let Rt=0;Rt<It.length;Rt++){const xn=Je(de,It[Rt],Le||ne.handleEvent,!1,ne.h||ne);if(!xn)break;ne.g[xn.key]=xn}ne=M.J?Ee(M.J):{},M.u?(M.v||(M.v="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",M.g.ea(M.B,M.v,M.u,ne)):(M.v="GET",M.g.ea(M.B,M.v,null,ne)),Ue(),wt(M.i,M.v,M.B,M.l,M.S,M.u)}Zn.prototype.ba=function(M){M=M.target;const ne=this.O;ne&&Xo(M)==3?ne.j():this.Y(M)},Zn.prototype.Y=function(M){try{if(M==this.g)e:{const fi=Xo(this.g),Rr=this.g.ya(),Ai=this.g.ca();if(!(fi<3)&&(fi!=3||this.g&&(this.h.h||this.g.la()||Mo(this.g)))){this.K||fi!=4||Rr==7||(Rr==8||Ai<=0?Ue(3):Ue(2)),Xn(this);var ne=this.g.ca();this.X=ne;var de=ss(this);if(this.o=ne==200,bt(this.i,this.v,this.B,this.l,this.S,fi,ne),this.o){if(this.U&&!this.L){t:{if(this.g){var Le,It=this.g;if((Le=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Le)){var Rt=Le;break t}}Rt=null}if(M=Rt)st(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Go(this,M);else{this.o=!1,this.m=3,ye(12),ks(this),ma(this);break e}}if(this.R){M=!0;let ar;for(;!this.K&&this.C<de.length;)if(ar=Gr(this,de),ar==rs){fi==4&&(this.m=4,ye(14),M=!1),st(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==gr){this.m=4,ye(15),st(this.i,this.l,de,"[Invalid Chunk]"),M=!1;break}else st(this.i,this.l,ar,null),Go(this,ar);if(Vr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fi!=4||de.length!=0||this.h.h||(this.m=1,ye(16),M=!1),this.o=this.o&&M,!M)st(this.i,this.l,de,"[Invalid Chunked Response]"),ks(this),ma(this);else if(de.length>0&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.aa&&!xn.P&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),gl(xn),xn.P=!0,ye(11))}}else st(this.i,this.l,de,null),Go(this,de);fi==4&&ks(this),this.o&&!this.K&&(fi==4?Tu(this.j,this):(this.o=!1,Cs(this)))}else _a(this.g),ne==400&&de.indexOf("Unknown SID")>0?(this.m=3,ye(12)):(this.m=0,ye(13)),ks(this),ma(this)}}}catch{}finally{}};function ss(M){if(!Vr(M))return M.g.la();const ne=Mo(M.g);if(ne==="")return"";let de="";const Le=ne.length,It=Xo(M.g)==4;if(!M.h.i){if(typeof TextDecoder>"u")return ks(M),ma(M),"";M.h.i=new l.TextDecoder}for(let Rt=0;Rt<Le;Rt++)M.h.h=!0,de+=M.h.i.decode(ne[Rt],{stream:!(It&&Rt==Le-1)});return ne.length=0,M.h.g+=de,M.C=0,M.h.g}function Vr(M){return M.g?M.v=="GET"&&M.M!=2&&M.j.Aa:!1}function Gr(M,ne){var de=M.C,Le=ne.indexOf(`
`,de);return Le==-1?rs:(de=Number(ne.substring(de,Le)),isNaN(de)?gr:(Le+=1,Le+de>ne.length?rs:(ne=ne.slice(Le,Le+de),M.C=Le+de,ne)))}Zn.prototype.cancel=function(){this.K=!0,ks(this)};function Cs(M){M.T=Date.now()+M.H,Ns(M,M.H)}function Ns(M,ne){if(M.D!=null)throw Error("WatchDog timer not null");M.D=Qe(p(M.aa,M),ne)}function Xn(M){M.D&&(l.clearTimeout(M.D),M.D=null)}Zn.prototype.aa=function(){this.D=null;const M=Date.now();M-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(Ue(),ye(17)),ks(this),this.m=2,ma(this)):Ns(this,this.T-M)};function ma(M){M.j.I==0||M.K||Tu(M.j,M)}function ks(M){Xn(M);var ne=M.O;ne&&typeof ne.dispose=="function"&&ne.dispose(),M.O=null,qn(M.V),M.g&&(ne=M.g,M.g=null,ne.abort(),ne.dispose())}function Go(M,ne){try{var de=M.j;if(de.I!=0&&(de.g==M||mc(de.h,M))){if(!M.L&&mc(de.h,M)&&de.I==3){try{var Le=de.Ba.g.parse(ne)}catch{Le=null}if(Array.isArray(Le)&&Le.length==3){var It=Le;if(It[0]==0){e:if(!de.v){if(de.g)if(de.g.F+3e3<M.F)vl(de),Yo(de);else break e;Ja(de),ye(18)}}else de.xa=It[1],0<de.xa-de.K&&It[2]<37500&&de.F&&de.A==0&&!de.C&&(de.C=Qe(p(de.Va,de),6e3));Ya(de.h)<=1&&de.ta&&(de.ta=void 0)}else uo(de,11)}else if((M.L||de.g==M)&&vl(de),!ee(ne))for(It=de.Ba.g.parse(ne),ne=0;ne<It.length;ne++){let Ai=It[ne];const ar=Ai[0];if(!(ar<=de.K))if(de.K=ar,Ai=Ai[1],de.I==2)if(Ai[0]=="c"){de.M=Ai[1],de.ba=Ai[2];const ti=Ai[3];ti!=null&&(de.ka=ti,de.j.info("VER="+de.ka));const Zs=Ai[4];Zs!=null&&(de.za=Zs,de.j.info("SVER="+de.za));const Qa=Ai[5];Qa!=null&&typeof Qa=="number"&&Qa>0&&(Le=1.5*Qa,de.O=Le,de.j.info("backChannelRequestTimeoutMs_="+Le)),Le=de;const wa=M.g;if(wa){const qc=wa.g?wa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qc){var Rt=Le.h;Rt.g||qc.indexOf("spdy")==-1&&qc.indexOf("quic")==-1&&qc.indexOf("h2")==-1||(Rt.j=Rt.l,Rt.g=new Set,Rt.h&&(qo(Rt,Rt.h),Rt.h=null))}if(Le.G){const el=wa.g?wa.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(Le.wa=el,ir(Le.J,Le.G,el))}}de.I=3,de.l&&de.l.ra(),de.aa&&(de.T=Date.now()-M.F,de.j.info("Handshake RTT: "+de.T+"ms")),Le=de;var xn=M;if(Le.na=Hc(Le,Le.L?Le.ba:null,Le.W),xn.L){Io(Le.h,xn);var fi=xn,Rr=Le.O;Rr&&(fi.H=Rr),fi.D&&(Xn(fi),Cs(fi)),Le.g=xn}else _c(Le);de.i.length>0&&jl(de)}else Ai[0]!="stop"&&Ai[0]!="close"||uo(de,7);else de.I==3&&(Ai[0]=="stop"||Ai[0]=="close"?Ai[0]=="stop"?uo(de,7):Za(de):Ai[0]!="noop"&&de.l&&de.l.qa(Ai),de.A=0)}}Ue(4)}catch{}}var Xa=class{constructor(M,ne){this.g=M,this.map=ne}};function Co(M){this.l=M||10,l.PerformanceNavigationTiming?(M=l.performance.getEntriesByType("navigation"),M=M.length>0&&(M[0].nextHopProtocol=="hq"||M[0].nextHopProtocol=="h2")):M=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=M?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ko(M){return M.h?!0:M.g?M.g.size>=M.j:!1}function Ya(M){return M.h?1:M.g?M.g.size:0}function mc(M,ne){return M.h?M.h==ne:M.g?M.g.has(ne):!1}function qo(M,ne){M.g?M.g.add(ne):M.h=ne}function Io(M,ne){M.h&&M.h==ne?M.h=null:M.g&&M.g.has(ne)&&M.g.delete(ne)}Co.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const M of this.g.values())M.cancel();this.g.clear()}};function Nl(M){if(M.h!=null)return M.i.concat(M.h.G);if(M.g!=null&&M.g.size!==0){let ne=M.i;for(const de of M.g.values())ne=ne.concat(de.G);return ne}return C(M.i)}var Ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pa(M,ne){if(M){M=M.split("&");for(let de=0;de<M.length;de++){const Le=M[de].indexOf("=");let It,Rt=null;Le>=0?(It=M[de].substring(0,Le),Rt=M[de].substring(Le+1)):It=M[de],ne(It,Rt?decodeURIComponent(Rt.replace(/\+/g," ")):"")}}}function Wi(M){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let ne;M instanceof Wi?(this.l=M.l,$l(this,M.j),this.o=M.o,this.g=M.g,$s(this,M.u),this.h=M.h,pc(this,Ul(M.i)),this.m=M.m):M&&(ne=String(M).match(Ot))?(this.l=!1,$l(this,ne[1]||"",!0),this.o=mn(ne[2]||""),this.g=mn(ne[3]||"",!0),$s(this,ne[4]),this.h=mn(ne[5]||"",!0),pc(this,ne[6]||"",!0),this.m=mn(ne[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}Wi.prototype.toString=function(){const M=[];var ne=this.j;ne&&M.push($n(ne,vr,!0),":");var de=this.g;return(de||ne=="file")&&(M.push("//"),(ne=this.o)&&M.push($n(ne,vr,!0),"@"),M.push(Wn(de).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),de=this.u,de!=null&&M.push(":",String(de))),(de=this.h)&&(this.g&&de.charAt(0)!="/"&&M.push("/"),M.push($n(de,de.charAt(0)=="/"?ri:co,!0))),(de=this.i.toString())&&M.push("?",de),(de=this.m)&&M.push("#",$n(de,Ko)),M.join("")},Wi.prototype.resolve=function(M){const ne=Qi(this);let de=!!M.j;de?$l(ne,M.j):de=!!M.o,de?ne.o=M.o:de=!!M.g,de?ne.g=M.g:de=M.u!=null;var Le=M.h;if(de)$s(ne,M.u);else if(de=!!M.h){if(Le.charAt(0)!="/")if(this.g&&!this.h)Le="/"+Le;else{var It=ne.h.lastIndexOf("/");It!=-1&&(Le=ne.h.slice(0,It+1)+Le)}if(It=Le,It==".."||It==".")Le="";else if(It.indexOf("./")!=-1||It.indexOf("/.")!=-1){Le=It.lastIndexOf("/",0)==0,It=It.split("/");const Rt=[];for(let xn=0;xn<It.length;){const fi=It[xn++];fi=="."?Le&&xn==It.length&&Rt.push(""):fi==".."?((Rt.length>1||Rt.length==1&&Rt[0]!="")&&Rt.pop(),Le&&xn==It.length&&Rt.push("")):(Rt.push(fi),Le=!0)}Le=Rt.join("/")}else Le=It}return de?ne.h=Le:de=M.i.toString()!=="",de?pc(ne,Ul(M.i)):de=!!M.m,de&&(ne.m=M.m),ne};function Qi(M){return new Wi(M)}function $l(M,ne,de){M.j=de?mn(ne,!0):ne,M.j&&(M.j=M.j.replace(/:$/,""))}function $s(M,ne){if(ne){if(ne=Number(ne),isNaN(ne)||ne<0)throw Error("Bad port number "+ne);M.u=ne}else M.u=null}function pc(M,ne,de){ne instanceof Ys?(M.i=ne,Fh(M.i,M.l)):(de||(ne=$n(ne,Lr)),M.i=new Ys(ne,M.l))}function ir(M,ne,de){M.i.set(ne,de)}function ga(M){return ir(M,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),M}function mn(M,ne){return M?ne?decodeURI(M.replace(/%25/g,"%2525")):decodeURIComponent(M):""}function $n(M,ne,de){return typeof M=="string"?(M=encodeURI(M).replace(ne,Jn),de&&(M=M.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M):null}function Jn(M){return M=M.charCodeAt(0),"%"+(M>>4&15).toString(16)+(M&15).toString(16)}var vr=/[#\/\?@]/g,co=/[#\?:]/g,ri=/[#\?]/g,Lr=/[#\?@]/g,Ko=/#/g;function Ys(M,ne){this.h=this.g=null,this.i=M||null,this.j=!!ne}function Ar(M){M.g||(M.g=new Map,M.h=0,M.i&&pa(M.i,function(ne,de){M.add(decodeURIComponent(ne.replace(/\+/g," ")),de)}))}e=Ys.prototype,e.add=function(M,ne){Ar(this),this.i=null,M=Is(this,M);let de=this.g.get(M);return de||this.g.set(M,de=[]),de.push(ne),this.h+=1,this};function Hi(M,ne){Ar(M),ne=Is(M,ne),M.g.has(ne)&&(M.i=null,M.h-=M.g.get(ne).length,M.g.delete(ne))}function xu(M,ne){return Ar(M),ne=Is(M,ne),M.g.has(ne)}e.forEach=function(M,ne){Ar(this),this.g.forEach(function(de,Le){de.forEach(function(It){M.call(ne,It,Le,this)},this)},this)};function Us(M,ne){Ar(M);let de=[];if(typeof ne=="string")xu(M,ne)&&(de=de.concat(M.g.get(Is(M,ne))));else for(M=Array.from(M.g.values()),ne=0;ne<M.length;ne++)de=de.concat(M[ne]);return de}e.set=function(M,ne){return Ar(this),this.i=null,M=Is(this,M),xu(this,M)&&(this.h-=this.g.get(M).length),this.g.set(M,[ne]),this.h+=1,this},e.get=function(M,ne){return M?(M=Us(this,M),M.length>0?String(M[0]):ne):ne};function dl(M,ne,de){Hi(M,ne),de.length>0&&(M.i=null,M.g.set(Is(M,ne),C(de)),M.h+=de.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const M=[],ne=Array.from(this.g.keys());for(let Le=0;Le<ne.length;Le++){var de=ne[Le];const It=Wn(de);de=Us(this,de);for(let Rt=0;Rt<de.length;Rt++){let xn=It;de[Rt]!==""&&(xn+="="+Wn(de[Rt])),M.push(xn)}}return this.i=M.join("&")};function Ul(M){const ne=new Ys;return ne.i=M.i,M.g&&(ne.g=new Map(M.g),ne.h=M.h),ne}function Is(M,ne){return ne=String(ne),M.j&&(ne=ne.toLowerCase()),ne}function Fh(M,ne){ne&&!M.j&&(Ar(M),M.i=null,M.g.forEach(function(de,Le){const It=Le.toLowerCase();Le!=It&&(Hi(this,Le),dl(this,It,de))},M)),M.j=ne}function Ao(M,ne){const de=new at;if(l.Image){const Le=new Image;Le.onload=v(Po,de,"TestLoadImage: loaded",!0,ne,Le),Le.onerror=v(Po,de,"TestLoadImage: error",!1,ne,Le),Le.onabort=v(Po,de,"TestLoadImage: abort",!1,ne,Le),Le.ontimeout=v(Po,de,"TestLoadImage: timeout",!1,ne,Le),l.setTimeout(function(){Le.ontimeout&&Le.ontimeout()},1e4),Le.src=M}else ne(!1)}function hl(M,ne){const de=new at,Le=new AbortController,It=setTimeout(()=>{Le.abort(),Po(de,"TestPingServer: timeout",!1,ne)},1e4);fetch(M,{signal:Le.signal}).then(Rt=>{clearTimeout(It),Rt.ok?Po(de,"TestPingServer: ok",!0,ne):Po(de,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(It),Po(de,"TestPingServer: error",!1,ne)})}function Po(M,ne,de,Le,It){try{It&&(It.onload=null,It.onerror=null,It.onabort=null,It.ontimeout=null),Le(de)}catch{}}function va(){this.g=new An}function os(M){this.i=M.Sb||null,this.h=M.ab||!1}x(os,Ln),os.prototype.g=function(){return new Gi(this.i,this.h)};function Gi(M,ne){vt.call(this),this.H=M,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Gi,vt),e=Gi.prototype,e.open=function(M,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=M,this.D=ne,this.readyState=1,Zr(this)},e.send=function(M){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const ne={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};M&&(ne.body=M),(this.H||l).fetch(new Request(this.D,ne)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fl(this)),this.readyState=0},e.Pa=function(M){if(this.g&&(this.l=M,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=M.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")M.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in M){if(this.j=M.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jc(this)}else M.text().then(this.Oa.bind(this),this.ga.bind(this))};function jc(M){M.j.read().then(M.Ma.bind(M)).catch(M.ga.bind(M))}e.Ma=function(M){if(this.g){if(this.o&&M.value)this.response.push(M.value);else if(!this.o){var ne=M.value?M.value:new Uint8Array(0);(ne=this.B.decode(ne,{stream:!M.done}))&&(this.response=this.responseText+=ne)}M.done?fl(this):Zr(this),this.readyState==3&&jc(this)}},e.Oa=function(M){this.g&&(this.response=this.responseText=M,fl(this))},e.Na=function(M){this.g&&(this.response=M,fl(this))},e.ga=function(){this.g&&fl(this)};function fl(M){M.readyState=4,M.l=null,M.j=null,M.B=null,Zr(M)}e.setRequestHeader=function(M,ne){this.A.append(M,ne)},e.getResponseHeader=function(M){return this.h&&this.h.get(M.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const M=[],ne=this.h.entries();for(var de=ne.next();!de.done;)de=de.value,M.push(de[0]+": "+de[1]),de=ne.next();return M.join(`\r
`)};function Zr(M){M.onreadystatechange&&M.onreadystatechange.call(M)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(M){this.m=M?"include":"same-origin"}});function as(M){let ne="";return Pe(M,function(de,Le){ne+=Le,ne+=":",ne+=de,ne+=`\r
`}),ne}function wu(M,ne,de){e:{for(Le in de){var Le=!1;break e}Le=!0}Le||(de=as(de),typeof M=="string"?de!=null&&Wn(de):ir(M,ne,de))}function rr(M){vt.call(this),this.headers=new Map,this.L=M||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(rr,vt);var _r=/^https?$/i,ml=["POST","PUT"];e=rr.prototype,e.Fa=function(M){this.H=M},e.ea=function(M,ne,de,Le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+M);ne=ne?ne.toUpperCase():"GET",this.D=M,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yn.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(ne,String(M),!0),this.B=!1}catch(Rt){gc(this,Rt);return}if(M=de||"",de=new Map(this.headers),Le)if(Object.getPrototypeOf(Le)===Object.prototype)for(var It in Le)de.set(It,Le[It]);else if(typeof Le.keys=="function"&&typeof Le.get=="function")for(const Rt of Le.keys())de.set(Rt,Le.get(Rt));else throw Error("Unknown input type for opt_headers: "+String(Le));Le=Array.from(de.keys()).find(Rt=>Rt.toLowerCase()=="content-type"),It=l.FormData&&M instanceof l.FormData,!(Array.prototype.indexOf.call(ml,ne,void 0)>=0)||Le||It||de.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Rt,xn]of de)this.g.setRequestHeader(Rt,xn);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(M),this.v=!1}catch(Rt){gc(this,Rt)}};function gc(M,ne){M.h=!1,M.g&&(M.j=!0,M.g.abort(),M.j=!1),M.l=ne,M.o=5,pl(M),vc(M)}function pl(M){M.A||(M.A=!0,gt(M,"complete"),gt(M,"error"))}e.abort=function(M){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=M||7,gt(this,"complete"),gt(this,"abort"),vc(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vc(this,!0)),rr.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Br(this):this.Xa())},e.Xa=function(){Br(this)};function Br(M){if(M.h&&typeof a<"u"){if(M.v&&Xo(M)==4)setTimeout(M.Ca.bind(M),0);else if(gt(M,"readystatechange"),Xo(M)==4){M.h=!1;try{const Rt=M.ca();e:switch(Rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var de;if(!(de=ne)){var Le;if(Le=Rt===0){let xn=String(M.D).match(Ot)[1]||null;!xn&&l.self&&l.self.location&&(xn=l.self.location.protocol.slice(0,-1)),Le=!_r.test(xn?xn.toLowerCase():"")}de=Le}if(de)gt(M,"complete"),gt(M,"success");else{M.o=6;try{var It=Xo(M)>2?M.g.statusText:""}catch{It=""}M.l=It+" ["+M.ca()+"]",pl(M)}}finally{vc(M)}}}}function vc(M,ne){if(M.g){M.m&&(clearTimeout(M.m),M.m=null);const de=M.g;M.g=null,ne||gt(M,"ready");try{de.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Xo(M){return M.g?M.g.readyState:0}e.ca=function(){try{return Xo(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(M){if(this.g){var ne=this.g.responseText;return M&&ne.indexOf(M)==0&&(ne=ne.substring(M.length)),un(ne)}};function Mo(M){try{if(!M.g)return null;if("response"in M.g)return M.g.response;switch(M.F){case"":case"text":return M.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in M.g)return M.g.mozResponseArrayBuffer}return null}catch{return null}}function _a(M){const ne={};M=(M.g&&Xo(M)>=2&&M.g.getAllResponseHeaders()||"").split(`\r
`);for(let Le=0;Le<M.length;Le++){if(ee(M[Le]))continue;var de=li(M[Le]);const It=de[0];if(de=de[1],typeof de!="string")continue;de=de.trim();const Rt=ne[It]||[];ne[It]=Rt,Rt.push(de)}$e(ne,function(Le){return Le.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(M,ne,de){return de&&de.internalChannelParams&&de.internalChannelParams[M]||ne}function vd(M){this.za=0,this.i=[],this.j=new at,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ya("failFast",!1,M),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ya("baseRetryDelayMs",5e3,M),this.Za=ya("retryDelaySeedMs",1e4,M),this.Ta=ya("forwardChannelMaxRetries",2,M),this.va=ya("forwardChannelRequestTimeoutMs",2e4,M),this.ma=M&&M.xmlHttpFactory||void 0,this.Ua=M&&M.Rb||void 0,this.Aa=M&&M.useFetchStreams||!1,this.O=void 0,this.L=M&&M.supportsCrossDomainXhr||!1,this.M="",this.h=new Co(M&&M.concurrentRequestLimit),this.Ba=new va,this.S=M&&M.fastHandshake||!1,this.R=M&&M.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=M&&M.Pb||!1,M&&M.ua&&this.j.ua(),M&&M.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&M&&M.detectBufferingProxy||!1,this.ia=void 0,M&&M.longPollingTimeout&&M.longPollingTimeout>0&&(this.ia=M.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=vd.prototype,e.ka=8,e.I=1,e.connect=function(M,ne,de,Le){ye(0),this.W=M,this.H=ne||{},de&&Le!==void 0&&(this.H.OSID=de,this.H.OAID=Le),this.F=this.X,this.J=Hc(this,null,this.W),jl(this)};function Za(M){if(Do(M),M.I==3){var ne=M.V++,de=Qi(M.J);if(ir(de,"SID",M.M),ir(de,"RID",ne),ir(de,"TYPE","terminate"),xa(M,de),ne=new Zn(M,M.j,ne),ne.M=2,ne.A=ga(Qi(de)),de=!1,l.navigator&&l.navigator.sendBeacon)try{de=l.navigator.sendBeacon(ne.A.toString(),"")}catch{}!de&&l.Image&&(new Image().src=ne.A,de=!0),de||(ne.g=Eu(ne.j,null),ne.g.ea(ne.A)),ne.F=Date.now(),Cs(ne)}Ii(M)}function Yo(M){M.g&&(gl(M),M.g.cancel(),M.g=null)}function Do(M){Yo(M),M.v&&(l.clearTimeout(M.v),M.v=null),vl(M),M.h.cancel(),M.m&&(typeof M.m=="number"&&l.clearTimeout(M.m),M.m=null)}function jl(M){if(!ko(M.h)&&!M.m){M.m=!0;var ne=M.Ea;K||$(),ie||(K(),ie=!0),X.add(ne,M),M.D=0}}function Lo(M,ne){return Ya(M.h)>=M.h.j-(M.m?1:0)?!1:M.m?(M.i=ne.G.concat(M.i),!0):M.I==1||M.I==2||M.D>=(M.Sa?0:M.Ta)?!1:(M.m=Qe(p(M.Ea,M,ne),Su(M,M.D)),M.D++,!0)}e.Ea=function(M){if(this.m)if(this.m=null,this.I==1){if(!M){this.V=Math.floor(Math.random()*1e5),M=this.V++;const It=new Zn(this,this.j,M);let Rt=this.o;if(this.U&&(Rt?(Rt=Ee(Rt),Ze(Rt,this.U)):Rt=this.U),this.u!==null||this.R||(It.J=Rt,Rt=null),this.S)e:{for(var ne=0,de=0;de<this.i.length;de++){t:{var Le=this.i[de];if("__data__"in Le.map&&(Le=Le.map.__data__,typeof Le=="string")){Le=Le.length;break t}Le=void 0}if(Le===void 0)break;if(ne+=Le,ne>4096){ne=de;break e}if(ne===4096||de===this.i.length-1){ne=de+1;break e}}ne=1e3}else ne=1e3;ne=Zo(this,It,ne),de=Qi(this.J),ir(de,"RID",M),ir(de,"CVER",22),this.G&&ir(de,"X-HTTP-Session-Id",this.G),xa(this,de),Rt&&(this.R?ne="headers="+Wn(as(Rt))+"&"+ne:this.u&&wu(de,this.u,Rt)),qo(this.h,It),this.Ra&&ir(de,"TYPE","init"),this.S?(ir(de,"$req",ne),ir(de,"SID","null"),It.U=!0,Sr(It,de,null)):Sr(It,de,ne),this.I=2}}else this.I==3&&(M?ba(this,M):this.i.length==0||ko(this.h)||ba(this))};function ba(M,ne){var de;ne?de=ne.l:de=M.V++;const Le=Qi(M.J);ir(Le,"SID",M.M),ir(Le,"RID",de),ir(Le,"AID",M.K),xa(M,Le),M.u&&M.o&&wu(Le,M.u,M.o),de=new Zn(M,M.j,de,M.D+1),M.u===null&&(de.J=M.o),ne&&(M.i=ne.G.concat(M.i)),ne=Zo(M,de,1e3),de.H=Math.round(M.va*.5)+Math.round(M.va*.5*Math.random()),qo(M.h,de),Sr(de,Le,ne)}function xa(M,ne){M.H&&Pe(M.H,function(de,Le){ir(ne,Le,de)}),M.l&&Pe({},function(de,Le){ir(ne,Le,de)})}function Zo(M,ne,de){de=Math.min(M.i.length,de);const Le=M.l?p(M.l.Ka,M.l,M):null;e:{var It=M.i;let fi=-1;for(;;){const Rr=["count="+de];fi==-1?de>0?(fi=It[0].g,Rr.push("ofs="+fi)):fi=0:Rr.push("ofs="+fi);let Ai=!0;for(let ar=0;ar<de;ar++){var Rt=It[ar].g;const ti=It[ar].map;if(Rt-=fi,Rt<0)fi=Math.max(0,It[ar].g-100),Ai=!1;else try{Rt="req"+Rt+"_"||"";try{var xn=ti instanceof Map?ti:Object.entries(ti);for(const[Zs,Qa]of xn){let wa=Qa;h(Qa)&&(wa=zt(Qa)),Rr.push(Rt+Zs+"="+encodeURIComponent(wa))}}catch(Zs){throw Rr.push(Rt+"type="+encodeURIComponent("_badmap")),Zs}}catch{Le&&Le(ti)}}if(Ai){xn=Rr.join("&");break e}}xn=void 0}return M=M.i.splice(0,de),ne.G=M,xn}function _c(M){if(!M.g&&!M.v){M.Y=1;var ne=M.Da;K||$(),ie||(K(),ie=!0),X.add(ne,M),M.A=0}}function Ja(M){return M.g||M.v||M.A>=3?!1:(M.Y++,M.v=Qe(p(M.Da,M),Su(M,M.A)),M.A++,!0)}e.Da=function(){if(this.v=null,Wc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var M=4*this.T;this.j.info("BP detection timer enabled: "+M),this.B=Qe(p(this.Wa,this),M)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ye(10),Yo(this),Wc(this))};function gl(M){M.B!=null&&(l.clearTimeout(M.B),M.B=null)}function Wc(M){M.g=new Zn(M,M.j,"rpc",M.Y),M.u===null&&(M.g.J=M.o),M.g.P=0;var ne=Qi(M.na);ir(ne,"RID","rpc"),ir(ne,"SID",M.M),ir(ne,"AID",M.K),ir(ne,"CI",M.F?"0":"1"),!M.F&&M.ia&&ir(ne,"TO",M.ia),ir(ne,"TYPE","xmlhttp"),xa(M,ne),M.u&&M.o&&wu(ne,M.u,M.o),M.O&&(M.g.H=M.O);var de=M.g;M=M.ba,de.M=1,de.A=ga(Qi(ne)),de.u=null,de.R=!0,Ho(de,M)}e.Va=function(){this.C!=null&&(this.C=null,Yo(this),Ja(this),ye(19))};function vl(M){M.C!=null&&(l.clearTimeout(M.C),M.C=null)}function Tu(M,ne){var de=null;if(M.g==ne){vl(M),gl(M),M.g=null;var Le=2}else if(mc(M.h,ne))de=ne.G,Io(M.h,ne),Le=1;else return;if(M.I!=0){if(ne.o)if(Le==1){de=ne.u?ne.u.length:0,ne=Date.now()-ne.F;var It=M.D;Le=Eo(),gt(Le,new ze(Le,de)),jl(M)}else _c(M);else if(It=ne.m,It==3||It==0&&ne.X>0||!(Le==1&&Lo(M,ne)||Le==2&&Ja(M)))switch(de&&de.length>0&&(ne=M.h,ne.i=ne.i.concat(de)),It){case 1:uo(M,5);break;case 4:uo(M,10);break;case 3:uo(M,6);break;default:uo(M,2)}}}function Su(M,ne){let de=M.Qa+Math.floor(Math.random()*M.Za);return M.isActive()||(de*=2),de*ne}function uo(M,ne){if(M.j.info("Error code "+ne),ne==2){var de=p(M.bb,M),Le=M.Ua;const It=!Le;Le=new Wi(Le||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||$l(Le,"https"),ga(Le),It?Ao(Le.toString(),de):hl(Le.toString(),de)}else ye(2);M.I=0,M.l&&M.l.pa(ne),Ii(M),Do(M)}e.bb=function(M){M?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function Ii(M){if(M.I=0,M.ja=[],M.l){const ne=Nl(M.h);(ne.length!=0||M.i.length!=0)&&(I(M.ja,ne),I(M.ja,M.i),M.h.i.length=0,C(M.i),M.i.length=0),M.l.oa()}}function Hc(M,ne,de){var Le=de instanceof Wi?Qi(de):new Wi(de);if(Le.g!="")ne&&(Le.g=ne+"."+Le.g),$s(Le,Le.u);else{var It=l.location;Le=It.protocol,ne=ne?ne+"."+It.hostname:It.hostname,It=+It.port;const Rt=new Wi(null);Le&&$l(Rt,Le),ne&&(Rt.g=ne),It&&$s(Rt,It),de&&(Rt.h=de),Le=Rt}return de=M.G,ne=M.wa,de&&ne&&ir(Le,de,ne),ir(Le,"VER",M.ka),xa(M,Le),Le}function Eu(M,ne,de){if(ne&&!M.L)throw Error("Can't create secondary domain capable XhrIo object.");return ne=M.Aa&&!M.ma?new rr(new os({ab:de})):new rr(M.ma),ne.Fa(M.L),ne}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}e=_d.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function _l(){}_l.prototype.g=function(M,ne){return new js(M,ne)};function js(M,ne){vt.call(this),this.g=new vd(ne),this.l=M,this.h=ne&&ne.messageUrlParams||null,M=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(M?M["X-Client-Protocol"]="webchannel":M={"X-Client-Protocol":"webchannel"}),this.g.o=M,M=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(M?M["X-WebChannel-Content-Type"]=ne.messageContentType:M={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.sa&&(M?M["X-WebChannel-Client-Profile"]=ne.sa:M={"X-WebChannel-Client-Profile":ne.sa}),this.g.U=M,(M=ne&&ne.Qb)&&!ee(M)&&(this.g.u=M),this.A=ne&&ne.supportsCrossDomainXhr||!1,this.v=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!ee(ne)&&(this.g.G=ne,M=this.h,M!==null&&ne in M&&(M=this.h,ne in M&&delete M[ne])),this.j=new Jo(this)}x(js,vt),js.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},js.prototype.close=function(){Za(this.g)},js.prototype.o=function(M){var ne=this.g;if(typeof M=="string"){var de={};de.__data__=M,M=de}else this.v&&(de={},de.__data__=zt(M),M=de);ne.i.push(new Xa(ne.Ya++,M)),ne.I==3&&jl(ne)},js.prototype.N=function(){this.g.l=null,delete this.j,Za(this.g),delete this.g,js.Z.N.call(this)};function Gc(M){fs.call(this),M.__headers__&&(this.headers=M.__headers__,this.statusCode=M.__status__,delete M.__headers__,delete M.__status__);var ne=M.__sm__;if(ne){e:{for(const de in ne){M=de;break e}M=void 0}(this.i=M)&&(M=this.i,ne=ne!==null&&M in ne?ne[M]:void 0),this.data=ne}else this.data=M}x(Gc,fs);function ho(){Ji.call(this),this.status=1}x(ho,Ji);function Jo(M){this.g=M}x(Jo,_d),Jo.prototype.ra=function(){gt(this.g,"a")},Jo.prototype.qa=function(M){gt(this.g,new Gc(M))},Jo.prototype.pa=function(M){gt(this.g,new ho)},Jo.prototype.oa=function(){gt(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,js.prototype.send=js.prototype.o,js.prototype.open=js.prototype.m,js.prototype.close=js.prototype.close,uz=function(){return new _l},cz=function(){return Eo()},lz=Tr,Ik={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,L1=fn,sn.COMPLETE="complete",az=sn,wi.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Wy=wi,rr.prototype.listenOnce=rr.prototype.K,rr.prototype.getLastError=rr.prototype.Ha,rr.prototype.getLastErrorCode=rr.prototype.ya,rr.prototype.getStatus=rr.prototype.ca,rr.prototype.getResponseJson=rr.prototype.La,rr.prototype.getResponseText=rr.prototype.la,rr.prototype.send=rr.prototype.ea,rr.prototype.setWithCredentials=rr.prototype.Fa,oz=rr}).apply(typeof Kx<"u"?Kx:typeof self<"u"?self:typeof window<"u"?window:{});const YR="@firebase/firestore",ZR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid"),La.MOCK_USER=new La("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new MA("@firebase/firestore");function vv(){return qp.logLevel}function Bn(e,...t){if(qp.logLevel<=Ni.DEBUG){const n=t.map(jA);qp.debug(`Firestore (${T_}): ${e}`,...n)}}function Th(e,...t){if(qp.logLevel<=Ni.ERROR){const n=t.map(jA);qp.error(`Firestore (${T_}): ${e}`,...n)}}function Qv(e,...t){if(qp.logLevel<=Ni.WARN){const n=t.map(jA);qp.warn(`Firestore (${T_}): ${e}`,...n)}}function jA(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,dz(e,i,n)}function dz(e,t,n){let i=`FIRESTORE (${T_}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Th(i),new Error(i)}function Ir(e,t,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,e||dz(t,r,i)}function Ci(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hn extends Ah{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class GZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(La.UNAUTHENTICATED)))}shutdown(){}}class qZ{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KZ{constructor(t){this.t=t,this.currentUser=La.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ir(this.o===void 0,42304);let i=this.i;const r=s=>this.i!==i?(i=this.i,n(s)):Promise.resolve();let a=new Gf;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Gf,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const s=a;t.enqueueRetryable((async()=>{await s.promise,await r(this.currentUser)}))},h=s=>{Bn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=s,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((s=>h(s))),setTimeout((()=>{if(!this.auth){const s=this.t.getImmediate({optional:!0});s?h(s):(Bn("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Gf)}}),0),l()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(Bn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ir(typeof i.accessToken=="string",31837,{l:i}),new hz(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ir(t===null||typeof t=="string",2055,{h:t}),new La(t)}}class XZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=La.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YZ{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new XZ(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(La.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JR{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZZ{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ir(this.o===void 0,3512);const i=a=>{a.error!=null&&Bn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Bn("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>i(a)))};const r=a=>{Bn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):Bn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JR(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ir(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JR(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JZ(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=JZ(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=t.charAt(r[a]%62))}return i}}function $i(e,t){return e<t?-1:e>t?1:0}function Ak(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const r=e.charAt(i),a=t.charAt(i);if(r!==a)return fC(r)===fC(a)?$i(r,a):fC(r)?1:-1}return $i(e.length,t.length)}const QZ=55296,eJ=57343;function fC(e){const t=e.charCodeAt(0);return t>=QZ&&t<=eJ}function e_(e,t,n){return e.length===t.length&&e.every(((i,r)=>n(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="__name__";class qu{constructor(t,n,i){n===void 0?n=0:n>t.length&&pi(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&pi(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return qu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof qu?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const a=qu.compareSegments(t.get(r),n.get(r));if(a!==0)return a}return $i(t.length,n.length)}static compareSegments(t,n){const i=qu.isNumericId(t),r=qu.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?qu.extractNumericId(t).compare(qu.extractNumericId(n)):Ak(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Hf.fromString(t.substring(4,t.length-2))}}class xs extends qu{construct(t,n,i){return new xs(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Hn(pn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new xs(n)}static emptyPath(){return new xs([])}}const tJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class aa extends qu{construct(t,n,i){return new aa(t,n,i)}static isValidIdentifier(t){return tJ.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),aa.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===QR}static keyField(){return new aa([QR])}static fromServerFormat(t){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new Hn(pn.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new Hn(pn.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const s=t[r+1];if(s!=="\\"&&s!=="."&&s!=="`")throw new Hn(pn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=s,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new Hn(pn.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new aa(n)}static emptyPath(){return new aa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t){this.path=t}static fromPath(t){return new ni(xs.fromString(t))}static fromName(t){return new ni(xs.fromString(t).popFirst(5))}static empty(){return new ni(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xs.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xs.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ni(new xs(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(e,t,n){if(!n)throw new Hn(pn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function iJ(e,t,n,i){if(t===!0&&i===!0)throw new Hn(pn.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function e5(e){if(!ni.isDocumentKey(e))throw new Hn(pn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fz(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function HA(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":pi(12329,{type:typeof e})}function Qf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hn(pn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=HA(e);throw new Hn(pn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(e,t){const n={typeString:e};return t&&(n.value=t),n}function Pb(e,t){if(!fz(e))throw new Hn(pn.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,a="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n=`JSON missing required field: '${i}'`;break}const l=e[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new Hn(pn.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5=-62135596800,n5=1e6;class Qr{static now(){return Qr.fromMillis(Date.now())}static fromDate(t){return Qr.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*n5);return new Qr(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Hn(pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hn(pn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<t5)throw new Hn(pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hn(pn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n5}_compareTo(t){return this.seconds===t.seconds?$i(this.nanoseconds,t.nanoseconds):$i(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Pb(t,Qr._jsonSchema))return new Qr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-t5;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qr._jsonSchemaVersion="firestore/timestamp/1.0",Qr._jsonSchema={type:ao("string",Qr._jsonSchemaVersion),seconds:ao("number"),nanoseconds:ao("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{static fromTimestamp(t){return new xi(t)}static min(){return new xi(new Qr(0,0))}static max(){return new xi(new Qr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=-1;function rJ(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=xi.fromTimestamp(i===1e9?new Qr(n+1,0):new Qr(n,i));return new em(r,ni.empty(),t)}function sJ(e){return new em(e.readTime,e.key,U0)}class em{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new em(xi.min(),ni.empty(),U0)}static max(){return new em(xi.max(),ni.empty(),U0)}}function oJ(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ni.comparator(e.documentKey,t.documentKey),n!==0?n:$i(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(e){if(e.code!==pn.FAILED_PRECONDITION||e.message!==aJ)throw e;Bn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&pi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new cn(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof cn?n:cn.resolve(n)}catch(n){return cn.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):cn.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):cn.reject(n)}static resolve(t){return new cn(((n,i)=>{n(t)}))}static reject(t){return new cn(((n,i)=>{i(t)}))}static waitFor(t){return new cn(((n,i)=>{let r=0,a=0,l=!1;t.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&n()}),(s=>i(s)))})),l=!0,a===r&&n()}))}static or(t){let n=cn.resolve(!1);for(const i of t)n=n.next((r=>r?cn.resolve(r):i()));return n}static forEach(t,n){const i=[];return t.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(t,n){return new cn(((i,r)=>{const a=t.length,l=new Array(a);let h=0;for(let s=0;s<a;s++){const p=s;n(t[p]).next((v=>{l[p]=v,++h,h===a&&i(l)}),(v=>r(v)))}}))}static doWhile(t,n){return new cn(((i,r)=>{const a=()=>{t()===!0?n().next((()=>{a()}),r):i()};a()}))}}function cJ(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function E_(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}MT.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=-1;function DT(e){return e==null}function Mw(e){return e===0&&1/e==-1/0}function uJ(e){return typeof e=="number"&&Number.isInteger(e)&&!Mw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz="";function dJ(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=i5(t)),t=hJ(e.get(n),t);return i5(t)}function hJ(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const a=e.charAt(r);switch(a){case"\0":n+="";break;case mz:n+="";break;default:n+=a}}return n}function i5(e){return e+mz+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pz(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(t,n){this.comparator=t,this.root=n||ra.EMPTY}insert(t,n){return new Ts(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ra.BLACK,null,null))}remove(t){return new Ts(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ra.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xx(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xx(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xx(this.root,t,this.comparator,!0)}}class Xx{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=n?i(t.key,n):1,n&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ra{constructor(t,n,i,r,a){this.key=t,this.value=n,this.color=i??ra.RED,this.left=r??ra.EMPTY,this.right=a??ra.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,a){return new ra(t??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const a=i(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ra.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return ra.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pi(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw pi(27949);return t+(this.isRed()?0:1)}}ra.EMPTY=null,ra.RED=!0,ra.BLACK=!1;ra.EMPTY=new class{constructor(){this.size=0}get key(){throw pi(57766)}get value(){throw pi(16141)}get color(){throw pi(16727)}get left(){throw pi(29726)}get right(){throw pi(36894)}copy(t,n,i,r,a){return this}insert(t,n,i){return new ra(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t){this.comparator=t,this.data=new Ts(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new s5(this.data.getIterator())}getIteratorFrom(t){return new s5(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof bo)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new bo(this.comparator);return n.data=t,n}}class s5{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t){this.fields=t,t.sort(aa.comparator)}static empty(){return new rc([])}unionWith(t){let n=new bo(aa.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new rc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return e_(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gz("Invalid base64 string: "+a):a}})(t);return new da(n)}static fromUint8Array(t){const n=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(t);return new da(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $i(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}da.EMPTY_BYTE_STRING=new da("");const fJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tm(e){if(Ir(!!e,39018),typeof e=="string"){let t=0;const n=fJ.exec(e);if(Ir(!!n,46558,{timestamp:e}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Gs(e.seconds),nanos:Gs(e.nanos)}}function Gs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function nm(e){return typeof e=="string"?da.fromBase64String(e):da.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz="server_timestamp",_z="__type__",yz="__previous_value__",bz="__local_write_time__";function qA(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[_z])==null?void 0:i.stringValue)===vz}function LT(e){const t=e.mapValue.fields[yz];return qA(t)?LT(t):t}function j0(e){const t=tm(e.mapValue.fields[bz].timestampValue);return new Qr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(t,n,i,r,a,l,h,s,p,v){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=s,this.useFetchStreams=p,this.isUsingEmulator=v}}const Dw="(default)";class W0{constructor(t,n){this.projectId=t,this.database=n||Dw}static empty(){return new W0("","")}get isDefaultDatabase(){return this.database===Dw}isEqual(t){return t instanceof W0&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz="__type__",pJ="__max__",Yx={mapValue:{}},wz="__vector__",Lw="value";function im(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qA(e)?4:vJ(e)?9007199254740991:gJ(e)?10:11:pi(28295,{value:e})}function ld(e,t){if(e===t)return!0;const n=im(e);if(n!==im(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return j0(e).isEqual(j0(t));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=tm(r.timestampValue),h=tm(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(r,a){return nm(r.bytesValue).isEqual(nm(a.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(r,a){return Gs(r.geoPointValue.latitude)===Gs(a.geoPointValue.latitude)&&Gs(r.geoPointValue.longitude)===Gs(a.geoPointValue.longitude)})(e,t);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Gs(r.integerValue)===Gs(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=Gs(r.doubleValue),h=Gs(a.doubleValue);return l===h?Mw(l)===Mw(h):isNaN(l)&&isNaN(h)}return!1})(e,t);case 9:return e_(e.arrayValue.values||[],t.arrayValue.values||[],ld);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(r5(l)!==r5(h))return!1;for(const s in l)if(l.hasOwnProperty(s)&&(h[s]===void 0||!ld(l[s],h[s])))return!1;return!0})(e,t);default:return pi(52216,{left:e})}}function H0(e,t){return(e.values||[]).find((n=>ld(n,t)))!==void 0}function t_(e,t){if(e===t)return 0;const n=im(e),i=im(t);if(n!==i)return $i(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return $i(e.booleanValue,t.booleanValue);case 2:return(function(a,l){const h=Gs(a.integerValue||a.doubleValue),s=Gs(l.integerValue||l.doubleValue);return h<s?-1:h>s?1:h===s?0:isNaN(h)?isNaN(s)?0:-1:1})(e,t);case 3:return o5(e.timestampValue,t.timestampValue);case 4:return o5(j0(e),j0(t));case 5:return Ak(e.stringValue,t.stringValue);case 6:return(function(a,l){const h=nm(a),s=nm(l);return h.compareTo(s)})(e.bytesValue,t.bytesValue);case 7:return(function(a,l){const h=a.split("/"),s=l.split("/");for(let p=0;p<h.length&&p<s.length;p++){const v=$i(h[p],s[p]);if(v!==0)return v}return $i(h.length,s.length)})(e.referenceValue,t.referenceValue);case 8:return(function(a,l){const h=$i(Gs(a.latitude),Gs(l.latitude));return h!==0?h:$i(Gs(a.longitude),Gs(l.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return a5(e.arrayValue,t.arrayValue);case 10:return(function(a,l){var T,C,I,P;const h=a.fields||{},s=l.fields||{},p=(T=h[Lw])==null?void 0:T.arrayValue,v=(C=s[Lw])==null?void 0:C.arrayValue,x=$i(((I=p==null?void 0:p.values)==null?void 0:I.length)||0,((P=v==null?void 0:v.values)==null?void 0:P.length)||0);return x!==0?x:a5(p,v)})(e.mapValue,t.mapValue);case 11:return(function(a,l){if(a===Yx.mapValue&&l===Yx.mapValue)return 0;if(a===Yx.mapValue)return 1;if(l===Yx.mapValue)return-1;const h=a.fields||{},s=Object.keys(h),p=l.fields||{},v=Object.keys(p);s.sort(),v.sort();for(let x=0;x<s.length&&x<v.length;++x){const T=Ak(s[x],v[x]);if(T!==0)return T;const C=t_(h[s[x]],p[v[x]]);if(C!==0)return C}return $i(s.length,v.length)})(e.mapValue,t.mapValue);default:throw pi(23264,{he:n})}}function o5(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return $i(e,t);const n=tm(e),i=tm(t),r=$i(n.seconds,i.seconds);return r!==0?r:$i(n.nanos,i.nanos)}function a5(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=t_(n[r],i[r]);if(a)return a}return $i(n.length,i.length)}function n_(e){return Pk(e)}function Pk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const i=tm(n);return`time(${i.seconds},${i.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return nm(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return ni.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=Pk(a);return i+"]"})(e.arrayValue):"mapValue"in e?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${Pk(n.fields[l])}`;return r+"}"})(e.mapValue):pi(61005,{value:e})}function R1(e){switch(im(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=LT(e);return t?16+R1(t):16;case 5:return 2*e.stringValue.length;case 6:return nm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+R1(a)),0)})(e.arrayValue);case 10:case 11:return(function(i){let r=0;return mm(i.fields,((a,l)=>{r+=a.length+R1(l)})),r})(e.mapValue);default:throw pi(13486,{value:e})}}function Mk(e){return!!e&&"integerValue"in e}function KA(e){return!!e&&"arrayValue"in e}function l5(e){return!!e&&"nullValue"in e}function c5(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function O1(e){return!!e&&"mapValue"in e}function gJ(e){var n,i;return((i=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[xz])==null?void 0:i.stringValue)===wz}function m0(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return mm(e.mapValue.fields,((n,i)=>t.mapValue.fields[n]=m0(i))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=m0(e.arrayValue.values[n]);return t}return{...e}}function vJ(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===pJ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.value=t}static empty(){return new Al({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!O1(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=m0(n)}setAll(t){let n=aa.emptyPath(),i={},r=[];t.forEach(((l,h)=>{if(!n.isImmediateParentOf(h)){const s=this.getFieldsMap(n);this.applyChanges(s,i,r),i={},r=[],n=h.popLast()}l?i[h.lastSegment()]=m0(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(t){const n=this.field(t.popLast());O1(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ld(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];O1(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){mm(n,((r,a)=>t[r]=a));for(const r of i)delete t[r]}clone(){return new Al(m0(this.value))}}function Tz(e){const t=[];return mm(e.fields,((n,i)=>{const r=new aa([n]);if(O1(i)){const a=Tz(i.mapValue).fields;if(a.length===0)t.push(r);else for(const l of a)t.push(r.child(l))}else t.push(r)})),new rc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,n,i,r,a,l,h){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(t){return new Va(t,0,xi.min(),xi.min(),xi.min(),Al.empty(),0)}static newFoundDocument(t,n,i,r){return new Va(t,1,n,xi.min(),i,r,0)}static newNoDocument(t,n){return new Va(t,2,n,xi.min(),xi.min(),Al.empty(),0)}static newUnknownDocument(t,n){return new Va(t,3,n,xi.min(),xi.min(),Al.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(xi.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Al.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Al.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xi.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Va&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Va(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,n){this.position=t,this.inclusive=n}}function u5(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const a=t[r],l=e.position[r];if(a.field.isKeyField()?i=ni.comparator(ni.fromName(l.referenceValue),n.key):i=t_(l,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function d5(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ld(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t,n="asc"){this.field=t,this.dir=n}}function _J(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{}class vo extends Sz{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new bJ(t,n,i):n==="array-contains"?new TJ(t,i):n==="in"?new SJ(t,i):n==="not-in"?new EJ(t,i):n==="array-contains-any"?new CJ(t,i):new vo(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new xJ(t,i):new wJ(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(t_(n,this.value)):n!==null&&im(this.value)===im(n)&&this.matchesComparison(t_(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return pi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cd extends Sz{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new cd(t,n)}matches(t){return Ez(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ez(e){return e.op==="and"}function Cz(e){return yJ(e)&&Ez(e)}function yJ(e){for(const t of e.filters)if(t instanceof cd)return!1;return!0}function Dk(e){if(e instanceof vo)return e.field.canonicalString()+e.op.toString()+n_(e.value);if(Cz(e))return e.filters.map((t=>Dk(t))).join(",");{const t=e.filters.map((n=>Dk(n))).join(",");return`${e.op}(${t})`}}function kz(e,t){return e instanceof vo?(function(i,r){return r instanceof vo&&i.op===r.op&&i.field.isEqual(r.field)&&ld(i.value,r.value)})(e,t):e instanceof cd?(function(i,r){return r instanceof cd&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&kz(l,r.filters[h])),!0):!1})(e,t):void pi(19439)}function Iz(e){return e instanceof vo?(function(n){return`${n.field.canonicalString()} ${n.op} ${n_(n.value)}`})(e):e instanceof cd?(function(n){return n.op.toString()+" {"+n.getFilters().map(Iz).join(" ,")+"}"})(e):"Filter"}class bJ extends vo{constructor(t,n,i){super(t,n,i),this.key=ni.fromName(i.referenceValue)}matches(t){const n=ni.comparator(t.key,this.key);return this.matchesComparison(n)}}class xJ extends vo{constructor(t,n){super(t,"in",n),this.keys=Az("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class wJ extends vo{constructor(t,n){super(t,"not-in",n),this.keys=Az("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Az(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((i=>ni.fromName(i.referenceValue)))}class TJ extends vo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return KA(n)&&H0(n.arrayValue,this.value)}}class SJ extends vo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&H0(this.value.arrayValue,n)}}class EJ extends vo{constructor(t,n){super(t,"not-in",n)}matches(t){if(H0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!H0(this.value.arrayValue,n)}}class CJ extends vo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!KA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>H0(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(t,n=null,i=[],r=[],a=null,l=null,h=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function h5(e,t=null,n=[],i=[],r=null,a=null,l=null){return new kJ(e,t,n,i,r,a,l)}function XA(e){const t=Ci(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>Dk(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),DT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>n_(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>n_(i))).join(",")),t.Te=n}return t.Te}function YA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_J(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!kz(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!d5(e.startAt,t.startAt)&&d5(e.endAt,t.endAt)}function Lk(e){return ni.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n=null,i=[],r=[],a=null,l="F",h=null,s=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IJ(e,t,n,i,r,a,l,h){return new RT(e,t,n,i,r,a,l,h)}function ZA(e){return new RT(e)}function f5(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function AJ(e){return e.collectionGroup!==null}function p0(e){const t=Ci(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),n.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new bo(aa.comparator);return l.filters.forEach((s=>{s.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(t).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new Ow(a,i))})),n.has(aa.keyField().canonicalString())||t.Ie.push(new Ow(aa.keyField(),i))}return t.Ie}function ed(e){const t=Ci(e);return t.Ee||(t.Ee=PJ(t,p0(e))),t.Ee}function PJ(e,t){if(e.limitType==="F")return h5(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ow(r.field,a)}));const n=e.endAt?new Rw(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Rw(e.startAt.position,e.startAt.inclusive):null;return h5(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Rk(e,t,n){return new RT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function OT(e,t){return YA(ed(e),ed(t))&&e.limitType===t.limitType}function Pz(e){return`${XA(ed(e))}|lt:${e.limitType}`}function _v(e){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>Iz(r))).join(", ")}]`),DT(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>n_(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>n_(r))).join(",")),`Target(${i})`})(ed(e))}; limitType=${e.limitType})`}function VT(e,t){return t.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ni.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(e,t)&&(function(i,r){for(const a of p0(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(e,t)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(e,t)&&(function(i,r){return!(i.startAt&&!(function(l,h,s){const p=u5(l,h,s);return l.inclusive?p<=0:p<0})(i.startAt,p0(i),r)||i.endAt&&!(function(l,h,s){const p=u5(l,h,s);return l.inclusive?p>=0:p>0})(i.endAt,p0(i),r))})(e,t)}function MJ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mz(e){return(t,n)=>{let i=!1;for(const r of p0(e)){const a=DJ(r,t,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function DJ(e,t,n){const i=e.field.isKeyField()?ni.comparator(t.key,n.key):(function(a,l,h){const s=l.data.field(a),p=h.data.field(a);return s!==null&&p!==null?t_(s,p):pi(42886)})(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return pi(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,t))return a}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return void(r[a]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){mm(this.inner,((n,i)=>{for(const[r,a]of i)t(r,a)}))}isEmpty(){return pz(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ=new Ts(ni.comparator);function Sh(){return LJ}const Dz=new Ts(ni.comparator);function Hy(...e){let t=Dz;for(const n of e)t=t.insert(n.key,n);return t}function Lz(e){let t=Dz;return e.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function xp(){return g0()}function Rz(){return g0()}function g0(){return new ag((e=>e.toString()),((e,t)=>e.isEqual(t)))}const RJ=new Ts(ni.comparator),OJ=new bo(ni.comparator);function Ui(...e){let t=OJ;for(const n of e)t=t.add(n);return t}const VJ=new bo($i);function BJ(){return VJ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mw(t)?"-0":t}}function Oz(e){return{integerValue:""+e}}function FJ(e,t){return uJ(t)?Oz(t):JA(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this._=void 0}}function zJ(e,t,n){return e instanceof Vw?(function(r,a){const l={fields:{[_z]:{stringValue:vz},[bz]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&qA(a)&&(a=LT(a)),a&&(l.fields[yz]=a),{mapValue:l}})(n,t):e instanceof i_?Bz(e,t):e instanceof G0?Fz(e,t):(function(r,a){const l=Vz(r,a),h=m5(l)+m5(r.Ae);return Mk(l)&&Mk(r.Ae)?Oz(h):JA(r.serializer,h)})(e,t)}function NJ(e,t,n){return e instanceof i_?Bz(e,t):e instanceof G0?Fz(e,t):n}function Vz(e,t){return e instanceof Bw?(function(i){return Mk(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(t)?t:{integerValue:0}:null}class Vw extends BT{}class i_ extends BT{constructor(t){super(),this.elements=t}}function Bz(e,t){const n=zz(t);for(const i of e.elements)n.some((r=>ld(r,i)))||n.push(i);return{arrayValue:{values:n}}}class G0 extends BT{constructor(t){super(),this.elements=t}}function Fz(e,t){let n=zz(t);for(const i of e.elements)n=n.filter((r=>!ld(r,i)));return{arrayValue:{values:n}}}class Bw extends BT{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function m5(e){return Gs(e.integerValue||e.doubleValue)}function zz(e){return KA(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(t,n){this.field=t,this.transform=n}}function UJ(e,t){return e.field.isEqual(t.field)&&(function(i,r){return i instanceof i_&&r instanceof i_||i instanceof G0&&r instanceof G0?e_(i.elements,r.elements,ld):i instanceof Bw&&r instanceof Bw?ld(i.Ae,r.Ae):i instanceof Vw&&r instanceof Vw})(e.transform,t.transform)}class jJ{constructor(t,n){this.version=t,this.transformResults=n}}class fu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new fu}static exists(t){return new fu(void 0,t)}static updateTime(t){return new fu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function V1(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class FT{}function Nz(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new QA(e.key,fu.none()):new Mb(e.key,e.data,fu.none());{const n=e.data,i=Al.empty();let r=new bo(aa.comparator);for(let a of t.fields)if(!r.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new pm(e.key,i,new rc(r.toArray()),fu.none())}}function WJ(e,t,n){e instanceof Mb?(function(r,a,l){const h=r.value.clone(),s=g5(r.fieldTransforms,a,l.transformResults);h.setAll(s),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(e,t,n):e instanceof pm?(function(r,a,l){if(!V1(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=g5(r.fieldTransforms,a,l.transformResults),s=a.data;s.setAll($z(r)),s.setAll(h),a.convertToFoundDocument(l.version,s).setHasCommittedMutations()})(e,t,n):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,n)}function v0(e,t,n,i){return e instanceof Mb?(function(a,l,h,s){if(!V1(a.precondition,l))return h;const p=a.value.clone(),v=v5(a.fieldTransforms,s,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(e,t,n,i):e instanceof pm?(function(a,l,h,s){if(!V1(a.precondition,l))return h;const p=v5(a.fieldTransforms,s,l),v=l.data;return v.setAll($z(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((x=>x.field)))})(e,t,n,i):(function(a,l,h){return V1(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(e,t,n)}function HJ(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),a=Vz(i.transform,r||null);a!=null&&(n===null&&(n=Al.empty()),n.set(i.field,a))}return n||null}function p5(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&e_(i,r,((a,l)=>UJ(a,l)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mb extends FT{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pm extends FT{constructor(t,n,i,r,a=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $z(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function g5(e,t,n){const i=new Map;Ir(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let r=0;r<n.length;r++){const a=e[r],l=a.transform,h=t.data.field(a.field);i.set(a.field,NJ(l,h,n[r]))}return i}function v5(e,t,n){const i=new Map;for(const r of e){const a=r.transform,l=n.data.field(r.field);i.set(r.field,zJ(a,l,t))}return i}class QA extends FT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GJ extends FT{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(t.key)&&WJ(a,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=v0(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=v0(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=Rz();return this.mutations.forEach((r=>{const a=t.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(r.key)?null:h;const s=Nz(l,h);s!==null&&i.set(r.key,s),l.isValidDocument()||l.convertToNoDocument(xi.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ui())}isEqual(t){return this.batchId===t.batchId&&e_(this.mutations,t.mutations,((n,i)=>p5(n,i)))&&e_(this.baseMutations,t.baseMutations,((n,i)=>p5(n,i)))}}class eP{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Ir(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return RJ})();const a=t.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new eP(t,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io,tr;function YJ(e){switch(e){case pn.OK:return pi(64938);case pn.CANCELLED:case pn.UNKNOWN:case pn.DEADLINE_EXCEEDED:case pn.RESOURCE_EXHAUSTED:case pn.INTERNAL:case pn.UNAVAILABLE:case pn.UNAUTHENTICATED:return!1;case pn.INVALID_ARGUMENT:case pn.NOT_FOUND:case pn.ALREADY_EXISTS:case pn.PERMISSION_DENIED:case pn.FAILED_PRECONDITION:case pn.ABORTED:case pn.OUT_OF_RANGE:case pn.UNIMPLEMENTED:case pn.DATA_LOSS:return!0;default:return pi(15467,{code:e})}}function Uz(e){if(e===void 0)return Th("GRPC error has no .code"),pn.UNKNOWN;switch(e){case io.OK:return pn.OK;case io.CANCELLED:return pn.CANCELLED;case io.UNKNOWN:return pn.UNKNOWN;case io.DEADLINE_EXCEEDED:return pn.DEADLINE_EXCEEDED;case io.RESOURCE_EXHAUSTED:return pn.RESOURCE_EXHAUSTED;case io.INTERNAL:return pn.INTERNAL;case io.UNAVAILABLE:return pn.UNAVAILABLE;case io.UNAUTHENTICATED:return pn.UNAUTHENTICATED;case io.INVALID_ARGUMENT:return pn.INVALID_ARGUMENT;case io.NOT_FOUND:return pn.NOT_FOUND;case io.ALREADY_EXISTS:return pn.ALREADY_EXISTS;case io.PERMISSION_DENIED:return pn.PERMISSION_DENIED;case io.FAILED_PRECONDITION:return pn.FAILED_PRECONDITION;case io.ABORTED:return pn.ABORTED;case io.OUT_OF_RANGE:return pn.OUT_OF_RANGE;case io.UNIMPLEMENTED:return pn.UNIMPLEMENTED;case io.DATA_LOSS:return pn.DATA_LOSS;default:return pi(39323,{code:e})}}(tr=io||(io={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=new Hf([4294967295,4294967295],0);function _5(e){const t=ZJ().encode(e),n=new sz;return n.update(t),new Uint8Array(n.digest())}function y5(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Hf([n,i],0),new Hf([r,a],0)]}class tP{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Gy(`Invalid padding: ${n}`);if(i<0)throw new Gy(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Gy(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Gy(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Hf.fromNumber(this.ge)}ye(t,n,i){let r=t.add(n.multiply(Hf.fromNumber(i)));return r.compare(JJ)===1&&(r=new Hf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=_5(t),[i,r]=y5(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),l=new tP(a,r,n);return i.forEach((h=>l.insert(h))),l}insert(t){if(this.ge===0)return;const n=_5(t),[i,r]=y5(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Gy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,n,i,r,a){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Db.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new zT(xi.min(),r,new Ts($i),Sh(),Ui())}}class Db{constructor(t,n,i,r,a){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Db(i,n,Ui(),Ui(),Ui())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t,n,i,r){this.be=t,this.removedTargetIds=n,this.key=i,this.De=r}}class jz{constructor(t,n){this.targetId=t,this.Ce=n}}class Wz{constructor(t,n,i=da.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class b5{constructor(){this.ve=0,this.Fe=x5(),this.Me=da.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ui(),n=Ui(),i=Ui();return this.Fe.forEach(((r,a)=>{switch(a){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pi(38017,{changeType:a})}})),new Db(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=x5()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ir(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QJ{constructor(t){this.Ge=t,this.ze=new Map,this.je=Sh(),this.Je=Zx(),this.He=Zx(),this.Ye=new Ts($i)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:pi(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(t){const n=t.targetId,i=t.Ce.count,r=this.ot(n);if(r){const a=r.target;if(Lk(a))if(i===0){const l=new ni(a.path);this.et(n,l,Va.newNoDocument(l,xi.min()))}else Ir(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const h=this.ut(t),s=h?this.ct(h,t,l):1;if(s!==0){this.it(n);const p=s===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let l,h;try{l=nm(i).toUint8Array()}catch(s){if(s instanceof gz)return Qv("Decoding the base64 bloom filter in existence filter failed ("+s.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw s}try{h=new tP(l,r,a)}catch(s){return Qv(s instanceof Gy?"BloomFilter error: ":"Applying bloom filter failed: ",s),null}return h.ge===0?null:h}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.mightContain(h)||(this.et(n,a,null),r++)})),r}Tt(t){const n=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Lk(h.target)){const s=new ni(h.target.path);this.It(s).has(l)||this.Et(l,s)||this.et(l,s,Va.newNoDocument(s,t))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let i=Ui();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((s=>{const p=this.ot(s);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(t)));const r=new zT(t,n,this.Ye,this.je,i);return this.je=Sh(),this.Je=Zx(),this.He=Zx(),this.Ye=new Ts($i),r}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new b5,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new bo($i),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new bo($i),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Bn("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new b5),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Zx(){return new Ts(ni.comparator)}function x5(){return new Ts(ni.comparator)}const eQ={asc:"ASCENDING",desc:"DESCENDING"},tQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nQ={and:"AND",or:"OR"};class iQ{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ok(e,t){return e.useProto3Json||DT(t)?t:{value:t}}function Fw(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hz(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rQ(e,t){return Fw(e,t.toTimestamp())}function td(e){return Ir(!!e,49232),xi.fromTimestamp((function(n){const i=tm(n);return new Qr(i.seconds,i.nanos)})(e))}function nP(e,t){return Vk(e,t).canonicalString()}function Vk(e,t){const n=(function(r){return new xs(["projects",r.projectId,"databases",r.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Gz(e){const t=xs.fromString(e);return Ir(Zz(t),10190,{key:t.toString()}),t}function Bk(e,t){return nP(e.databaseId,t.path)}function mC(e,t){const n=Gz(t);if(n.get(1)!==e.databaseId.projectId)throw new Hn(pn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hn(pn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ni(Kz(n))}function qz(e,t){return nP(e.databaseId,t)}function sQ(e){const t=Gz(e);return t.length===4?xs.emptyPath():Kz(t)}function Fk(e){return new xs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Kz(e){return Ir(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function w5(e,t,n){return{name:Bk(e,t),fields:n.value.mapValue.fields}}function oQ(e,t){let n;if("targetChange"in t){t.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:pi(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(Ir(v===void 0||typeof v=="string",58123),da.fromBase64String(v||"")):(Ir(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),da.fromUint8Array(v||new Uint8Array))})(e,t.targetChange.resumeToken),l=t.targetChange.cause,h=l&&(function(p){const v=p.code===void 0?pn.UNKNOWN:Uz(p.code);return new Hn(v,p.message||"")})(l);n=new Wz(i,r,a,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=mC(e,i.document.name),a=td(i.document.updateTime),l=i.document.createTime?td(i.document.createTime):xi.min(),h=new Al({mapValue:{fields:i.document.fields}}),s=Va.newFoundDocument(r,a,l,h),p=i.targetIds||[],v=i.removedTargetIds||[];n=new B1(p,v,s.key,s)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=mC(e,i.document),a=i.readTime?td(i.readTime):xi.min(),l=Va.newNoDocument(r,a),h=i.removedTargetIds||[];n=new B1([],h,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=mC(e,i.document),a=i.removedTargetIds||[];n=new B1([],a,r,null)}else{if(!("filter"in t))return pi(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new XJ(r,a),h=i.targetId;n=new jz(h,l)}}return n}function aQ(e,t){let n;if(t instanceof Mb)n={update:w5(e,t.key,t.value)};else if(t instanceof QA)n={delete:Bk(e,t.key)};else if(t instanceof pm)n={update:w5(e,t.key,t.data),updateMask:gQ(t.fieldMask)};else{if(!(t instanceof GJ))return pi(16599,{Vt:t.type});n={verify:Bk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof Vw)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof i_)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof G0)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Bw)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw pi(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:rQ(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:pi(27497)})(e,t.precondition)),n}function lQ(e,t){return e&&e.length>0?(Ir(t!==void 0,14353),e.map((n=>(function(r,a){let l=r.updateTime?td(r.updateTime):td(a);return l.isEqual(xi.min())&&(l=td(a)),new jJ(l,r.transformResults||[])})(n,t)))):[]}function cQ(e,t){return{documents:[qz(e,t.path)]}}function uQ(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=qz(e,r);const a=(function(p){if(p.length!==0)return Yz(cd.create(p,"and"))})(t.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((v=>(function(T){return{field:yv(T.field),direction:fQ(T.dir)}})(v)))})(t.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Ok(e,t.limit);return h!==null&&(n.structuredQuery.limit=h),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:r}}function dQ(e){let t=sQ(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ir(i===1,65062);const v=n.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let a=[];n.where&&(a=(function(x){const T=Xz(x);return T instanceof cd&&Cz(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(x){return x.map((T=>(function(I){return new Ow(bv(I.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(T)))})(n.orderBy));let h=null;n.limit&&(h=(function(x){let T;return T=typeof x=="object"?x.value:x,DT(T)?null:T})(n.limit));let s=null;n.startAt&&(s=(function(x){const T=!!x.before,C=x.values||[];return new Rw(C,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(x){const T=!x.before,C=x.values||[];return new Rw(C,T)})(n.endAt)),IJ(t,r,l,a,h,"F",s,p)}function hQ(e,t){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pi(28987,{purpose:r})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Xz(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bv(n.unaryFilter.field);return vo.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=bv(n.unaryFilter.field);return vo.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bv(n.unaryFilter.field);return vo.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=bv(n.unaryFilter.field);return vo.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pi(61313);default:return pi(60726)}})(e):e.fieldFilter!==void 0?(function(n){return vo.create(bv(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pi(58110);default:return pi(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return cd.create(n.compositeFilter.filters.map((i=>Xz(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pi(1026)}})(n.compositeFilter.op))})(e):pi(30097,{filter:e})}function fQ(e){return eQ[e]}function mQ(e){return tQ[e]}function pQ(e){return nQ[e]}function yv(e){return{fieldPath:e.canonicalString()}}function bv(e){return aa.fromServerFormat(e.fieldPath)}function Yz(e){return e instanceof vo?(function(n){if(n.op==="=="){if(c5(n.value))return{unaryFilter:{field:yv(n.field),op:"IS_NAN"}};if(l5(n.value))return{unaryFilter:{field:yv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c5(n.value))return{unaryFilter:{field:yv(n.field),op:"IS_NOT_NAN"}};if(l5(n.value))return{unaryFilter:{field:yv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yv(n.field),op:mQ(n.op),value:n.value}}})(e):e instanceof cd?(function(n){const i=n.getFilters().map((r=>Yz(r)));return i.length===1?i[0]:{compositeFilter:{op:pQ(n.op),filters:i}}})(e):pi(54877,{filter:e})}function gQ(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Zz(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,n,i,r,a=xi.min(),l=xi.min(),h=da.EMPTY_BYTE_STRING,s=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=s}withSequenceNumber(t){return new Lf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Lf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Lf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Lf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(t){this.yt=t}}function _Q(e){const t=dQ({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Rk(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(){this.Cn=new bQ}addToCollectionParentIndex(t,n){return this.Cn.add(n),cn.resolve()}getCollectionParents(t,n){return cn.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return cn.resolve()}deleteFieldIndex(t,n){return cn.resolve()}deleteAllFieldIndexes(t){return cn.resolve()}createTargetIndexes(t,n){return cn.resolve()}getDocumentsMatchingTarget(t,n){return cn.resolve(null)}getIndexType(t,n){return cn.resolve(0)}getFieldIndexes(t,n){return cn.resolve([])}getNextCollectionGroupToUpdate(t){return cn.resolve(null)}getMinOffset(t,n){return cn.resolve(em.min())}getMinOffsetFromCollectionGroup(t,n){return cn.resolve(em.min())}updateCollectionGroup(t,n,i){return cn.resolve()}updateIndexEntries(t,n){return cn.resolve()}}class bQ{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new bo(xs.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new bo(xs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jz=41943040;class Il{static withCacheSize(t){return new Il(t,Il.DEFAULT_COLLECTION_PERCENTILE,Il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il.DEFAULT_COLLECTION_PERCENTILE=10,Il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Il.DEFAULT=new Il(Jz,Il.DEFAULT_COLLECTION_PERCENTILE,Il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Il.DISABLED=new Il(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new r_(0)}static cr(){return new r_(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="LruGarbageCollector",xQ=1048576;function E5([e,t],[n,i]){const r=$i(e,n);return r===0?$i(t,i):r}class wQ{constructor(t){this.Ir=t,this.buffer=new bo(E5),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();E5(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TQ{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Bn(S5,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){E_(n)?Bn(S5,"Ignoring IndexedDB error during garbage collection: ",n):await S_(n)}await this.Vr(3e5)}))}}class SQ{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return cn.resolve(MT.ce);const i=new wQ(n);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Bn("LruGarbageCollector","Garbage collection skipped; disabled"),cn.resolve(T5)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(Bn("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T5):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,r,a,l,h,s,p;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Bn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),r=this.params.maximumSequenceNumbersToCollect):r=x,l=Date.now(),this.nthSequenceNumber(t,r)))).next((x=>(i=x,h=Date.now(),this.removeTargets(t,i,n)))).next((x=>(a=x,s=Date.now(),this.removeOrphanedDocuments(t,i)))).next((x=>(p=Date.now(),vv()<=Ni.DEBUG&&Bn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(s-h)+`ms
	Removed ${x} documents in `+(p-s)+`ms
Total Duration: ${p-v}ms`),cn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:x}))))}}function EQ(e,t){return new SQ(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(){this.changes=new ag((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Va.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?cn.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,n)))).next((r=>(i!==null&&v0(i.mutation,r,rc.empty(),Qr.now()),r)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,Ui()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=Ui()){const r=xp();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,i).next((a=>{let l=Hy();return a.forEach(((h,s)=>{l=l.insert(h,s.overlayedDocument)})),l}))))}getOverlayedDocuments(t,n){const i=xp();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,Ui())))}populateOverlays(t,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(t,r).next((a=>{a.forEach(((l,h)=>{n.set(l,h)}))}))}computeViews(t,n,i,r){let a=Sh();const l=g0(),h=(function(){return g0()})();return n.forEach(((s,p)=>{const v=i.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof pm)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),v0(v.mutation,p,v.mutation.getFieldMask(),Qr.now())):l.set(p.key,rc.empty())})),this.recalculateAndSaveOverlays(t,a).next((s=>(s.forEach(((p,v)=>l.set(p,v))),n.forEach(((p,v)=>h.set(p,new kQ(v,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(t,n){const i=g0();let r=new Ts(((l,h)=>l-h)),a=Ui();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((l=>{for(const h of l)h.keys().forEach((s=>{const p=n.get(s);if(p===null)return;let v=i.get(s)||rc.empty();v=h.applyToLocalView(p,v),i.set(s,v);const x=(r.get(h.batchId)||Ui()).add(s);r=r.insert(h.batchId,x)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const s=h.getNext(),p=s.key,v=s.value,x=Rz();v.forEach((T=>{if(!a.has(T)){const C=Nz(n.get(T),i.get(T));C!==null&&x.set(T,C),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(t,p,x))}return cn.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,r){return(function(l){return ni.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):AJ(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-a.size):cn.resolve(xp());let h=U0,s=a;return l.next((p=>cn.forEach(p,((v,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(v)?cn.resolve():this.remoteDocumentCache.getEntry(t,v).next((T=>{s=s.insert(v,T)}))))).next((()=>this.populateOverlays(t,p,a))).next((()=>this.computeViews(t,s,p,Ui()))).next((v=>({batchId:h,changes:Lz(v)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ni(n)).next((i=>{let r=Hy();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const a=n.collectionGroup;let l=Hy();return this.indexManager.getCollectionParents(t,a).next((h=>cn.forEach(h,(s=>{const p=(function(x,T){return new RT(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,s.child(a));return this.getDocumentsMatchingCollectionQuery(t,p,i,r).next((v=>{v.forEach(((x,T)=>{l=l.insert(x,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,a,r)))).next((l=>{a.forEach(((s,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Va.newInvalidDocument(v)))}));let h=Hy();return l.forEach(((s,p)=>{const v=a.get(s);v!==void 0&&v0(v.mutation,p,rc.empty(),Qr.now()),VT(n,p)&&(h=h.insert(s,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return cn.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:td(r.createTime)}})(n)),cn.resolve()}getNamedQuery(t,n){return cn.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:_Q(r.bundledQuery),readTime:td(r.readTime)}})(n)),cn.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{constructor(){this.overlays=new Ts(ni.comparator),this.qr=new Map}getOverlay(t,n){return cn.resolve(this.overlays.get(n))}getOverlays(t,n){const i=xp();return cn.forEach(n,(r=>this.getOverlay(t,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((r,a)=>{this.St(t,n,a)})),cn.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),cn.resolve()}getOverlaysForCollection(t,n,i){const r=xp(),a=n.length+1,l=new ni(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const s=h.getNext().value,p=s.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&s.largestBatchId>i&&r.set(s.getKey(),s)}return cn.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let a=new Ts(((p,v)=>p-v));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let v=a.get(p.largestBatchId);v===null&&(v=xp(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=xp(),s=a.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=r)););return cn.resolve(h)}St(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new KJ(n,i));let a=this.qr.get(n);a===void 0&&(a=Ui(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(){this.sessionToken=da.EMPTY_BYTE_STRING}getSessionToken(t){return cn.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,cn.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Qr=new bo(Bo.$r),this.Ur=new bo(Bo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Bo(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new Bo(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new ni(new xs([])),i=new Bo(n,t),r=new Bo(n,t+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ni(new xs([])),i=new Bo(n,t),r=new Bo(n,t+1);let a=Ui();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(t){const n=new Bo(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Bo{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ni.comparator(t.key,n.key)||$i(t.Yr,n.Yr)}static Kr(t,n){return $i(t.Yr,n.Yr)||ni.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bo(Bo.$r)}checkEmpty(t){return cn.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qJ(a,n,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new Bo(h.key,a)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return cn.resolve(l)}lookupMutationBatch(t,n){return cn.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return cn.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return cn.resolve(this.mutationQueue.length===0?GA:this.tr-1)}getAllMutationBatches(t){return cn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Bo(n,0),r=new Bo(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),cn.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new bo($i);return n.forEach((r=>{const a=new Bo(r,0),l=new Bo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),cn.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let a=i;ni.isDocumentKey(a)||(a=a.child(""));const l=new Bo(new ni(a),0);let h=new bo($i);return this.Zr.forEachWhile((s=>{const p=s.key.path;return!!i.isPrefixOf(p)&&(p.length===r&&(h=h.add(s.Yr)),!0)}),l),cn.resolve(this.ti(h))}ti(t){const n=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(t,n){Ir(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return cn.forEach(n.mutations,(r=>{const a=new Bo(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new Bo(n,0),r=this.Zr.firstAfterOrEqual(i);return cn.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,cn.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(t){this.ri=t,this.docs=(function(){return new Ts(ni.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return cn.resolve(i?i.document.mutableCopy():Va.newInvalidDocument(n))}getEntries(t,n){let i=Sh();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Va.newInvalidDocument(r))})),cn.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let a=Sh();const l=n.path,h=new ni(l.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(h);for(;s.hasNext();){const{key:p,value:{document:v}}=s.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||oJ(sJ(v),i)<=0||(r.has(v.key)||VT(n,v))&&(a=a.insert(v.key,v.mutableCopy()))}return cn.resolve(a)}getAllFromCollectionGroup(t,n,i,r){pi(9500)}ii(t,n){return cn.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new RQ(this)}getSize(t){return cn.resolve(this.size)}}class RQ extends CQ{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),cn.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(t){this.persistence=t,this.si=new ag((n=>XA(n)),YA),this.lastRemoteSnapshotVersion=xi.min(),this.highestTargetId=0,this.oi=0,this._i=new iP,this.targetCount=0,this.ai=r_.ur()}forEachTarget(t,n){return this.si.forEach(((i,r)=>n(r))),cn.resolve()}getLastRemoteSnapshotVersion(t){return cn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return cn.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),cn.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),cn.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new r_(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,cn.resolve()}updateTargetData(t,n){return this.Pr(n),cn.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,cn.resolve()}removeTargets(t,n,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)})),cn.waitFor(a).next((()=>r))}getTargetCount(t){return cn.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return cn.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),cn.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((l=>{a.push(r.markPotentiallyOrphaned(t,l))})),cn.waitFor(a)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),cn.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return cn.resolve(i)}containsKey(t,n){return cn.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(t,n){this.ui={},this.overlays={},this.ci=new MT(0),this.li=!1,this.li=!0,this.hi=new MQ,this.referenceDelegate=t(this),this.Pi=new OQ(this),this.indexManager=new yQ,this.remoteDocumentCache=(function(r){return new LQ(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new vQ(n),this.Ii=new AQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new PQ,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new DQ(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){Bn("MemoryPersistence","Starting transaction:",t);const r=new VQ(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(t,n){return cn.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class VQ extends lJ{constructor(t){super(),this.currentSequenceNumber=t}}class rP{constructor(t){this.persistence=t,this.Ri=new iP,this.Vi=null}static mi(t){return new rP(t)}get fi(){if(this.Vi)return this.Vi;throw pi(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),cn.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),cn.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),cn.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cn.forEach(this.fi,(i=>{const r=ni.fromPath(i);return this.gi(t,r).next((a=>{a||n.removeEntry(r,xi.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return cn.or([()=>cn.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class zw{constructor(t,n){this.persistence=t,this.pi=new ag((i=>dJ(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=EQ(this,n)}static mi(t,n){return new zw(t,n)}Ei(){}di(t){return cn.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((r=>i+r))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return cn.forEach(this.pi,((i,r)=>this.br(t,i,r).next((a=>a?cn.resolve():n(r)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,n).next((h=>{h||(i++,a.removeEntry(l,xi.min()))})))).next((()=>a.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),cn.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),cn.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),cn.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),cn.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=R1(t.data.value)),n}br(t,n,i){return cn.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.pi.get(n);return cn.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=r}static As(t,n){let i=Ui(),r=Ui();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new sP(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return cK()?8:cJ(Ha())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,r){const a={result:null};return this.ys(t,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(t,n,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new BQ;return this.Ss(t,n,l).next((h=>{if(a.result=h,this.Vs)return this.bs(t,n,l,h.size)}))})).next((()=>a.result))}bs(t,n,i,r){return i.documentReadCount<this.fs?(vv()<=Ni.DEBUG&&Bn("QueryEngine","SDK will not create cache indexes for query:",_v(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),cn.resolve()):(vv()<=Ni.DEBUG&&Bn("QueryEngine","Query:",_v(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(vv()<=Ni.DEBUG&&Bn("QueryEngine","The SDK decides to create cache indexes for query:",_v(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ed(n))):cn.resolve())}ys(t,n){if(f5(n))return cn.resolve(null);let i=ed(n);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=Rk(n,null,"F"),i=ed(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((a=>{const l=Ui(...a);return this.ps.getDocuments(t,l).next((h=>this.indexManager.getMinOffset(t,i).next((s=>{const p=this.Ds(n,h);return this.Cs(n,p,l,s.readTime)?this.ys(t,Rk(n,null,"F")):this.vs(t,p,n,s)}))))})))))}ws(t,n,i,r){return f5(n)||r.isEqual(xi.min())?cn.resolve(null):this.ps.getDocuments(t,i).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,i,r)?cn.resolve(null):(vv()<=Ni.DEBUG&&Bn("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_v(n)),this.vs(t,l,n,rJ(r,U0)).next((h=>h)))}))}Ds(t,n){let i=new bo(Mz(t));return n.forEach(((r,a)=>{VT(t,a)&&(i=i.add(a))})),i}Cs(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const a=t.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(t,n,i){return vv()<=Ni.DEBUG&&Bn("QueryEngine","Using full collection scan to execute query:",_v(n)),this.ps.getDocumentsMatchingQuery(t,n,em.min(),i)}vs(t,n,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="LocalStore",zQ=3e8;class NQ{constructor(t,n,i,r){this.persistence=t,this.Fs=n,this.serializer=r,this.Ms=new Ts($i),this.xs=new ag((a=>XA(a)),YA),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new IQ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function $Q(e,t,n,i){return new NQ(e,t,n,i)}async function eN(e,t){const n=Ci(e);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let s=Ui();for(const p of r){l.push(p.batchId);for(const v of p.mutations)s=s.add(v.key)}for(const p of a){h.push(p.batchId);for(const v of p.mutations)s=s.add(v.key)}return n.localDocuments.getDocuments(i,s).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function UQ(e,t){const n=Ci(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,s,p,v){const x=p.batch,T=x.keys();let C=cn.resolve();return T.forEach((I=>{C=C.next((()=>v.getEntry(s,I))).next((P=>{const D=p.docVersions.get(I);Ir(D!==null,48541),P.version.compareTo(D)<0&&(x.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),v.addEntry(P)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(s,x)))})(n,i,t,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let s=Ui();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(s=s.add(h.batch.mutations[p].key));return s})(t)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function tN(e){const t=Ci(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function jQ(e,t){const n=Ci(e),i=t.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const h=[];t.targetChanges.forEach(((v,x)=>{const T=r.get(x);if(!T)return;h.push(n.Pi.removeMatchingKeys(a,v.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(a,v.addedDocuments,x))));let C=T.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(x)!==null?C=C.withResumeToken(da.EMPTY_BYTE_STRING,xi.min()).withLastLimboFreeSnapshotVersion(xi.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,i)),r=r.insert(x,C),(function(P,D,F){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=zQ?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(T,C,v)&&h.push(n.Pi.updateTargetData(a,C))}));let s=Sh(),p=Ui();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(WQ(a,l,t.documentUpdates).next((v=>{s=v.ks,p=v.qs}))),!i.isEqual(xi.min())){const v=n.Pi.getLastRemoteSnapshotVersion(a).next((x=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(v)}return cn.waitFor(h).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,s,p))).next((()=>s))})).then((a=>(n.Ms=r,a)))}function WQ(e,t,n){let i=Ui(),r=Ui();return n.forEach((a=>i=i.add(a))),t.getEntries(e,i).next((a=>{let l=Sh();return n.forEach(((h,s)=>{const p=a.get(h);s.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(h)),s.isNoDocument()&&s.version.isEqual(xi.min())?(t.removeEntry(h,s.readTime),l=l.insert(h,s)):!p.isValidDocument()||s.version.compareTo(p.version)>0||s.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(s),l=l.insert(h,s)):Bn(oP,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",s.version)})),{ks:l,qs:r}}))}function HQ(e,t){const n=Ci(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=GA),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function GQ(e,t){const n=Ci(e);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,t).next((a=>a?(r=a,cn.resolve(r)):n.Pi.allocateTargetId(i).next((l=>(r=new Lf(t,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function zk(e,t,n){const i=Ci(e),r=i.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!E_(l))throw l;Bn(oP,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function C5(e,t,n){const i=Ci(e);let r=xi.min(),a=Ui();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(s,p,v){const x=Ci(s),T=x.xs.get(v);return T!==void 0?cn.resolve(x.Ms.get(T)):x.Pi.getTargetData(p,v)})(i,l,ed(t)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((s=>{a=s}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,n?r:xi.min(),n?a:Ui()))).next((h=>(qQ(i,MJ(t),h),{documents:h,Qs:a})))))}function qQ(e,t,n){let i=e.Os.get(t)||xi.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),e.Os.set(t,i)}class k5{constructor(){this.activeTargetIds=BJ()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class KQ{constructor(){this.Mo=new k5,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new k5,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="ConnectivityMonitor";class A5{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Bn(I5,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Bn(I5,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jx=null;function Nk(){return Jx===null?Jx=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jx++,"0x"+Jx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="RestConnection",YQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZQ{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Dw?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,n,i,r,a){const l=Nk(),h=this.zo(t,n.toUriEncodedString());Bn(pC,`Sending RPC '${t}' ${l}:`,h,i);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,a);const{host:p}=new URL(h),v=x_(p);return this.Jo(t,h,s,i,v).then((x=>(Bn(pC,`Received RPC '${t}' ${l}: `,x),x)),(x=>{throw Qv(pC,`RPC '${t}' ${l} failed with error: `,x,"url: ",h,"request:",i),x}))}Ho(t,n,i,r,a,l){return this.Go(t,n,i,r,a)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+T_})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>t[a]=r)),i&&i.headers.forEach(((r,a)=>t[a]=r))}zo(t,n){const i=YQ[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="WebChannelConnection";class QQ extends ZQ{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,r,a){const l=Nk();return new Promise(((h,s)=>{const p=new oz;p.setWithCredentials(!0),p.listenOnce(az.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case L1.NO_ERROR:const x=p.getResponseJson();Bn(Pa,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(x)),h(x);break;case L1.TIMEOUT:Bn(Pa,`RPC '${t}' ${l} timed out`),s(new Hn(pn.DEADLINE_EXCEEDED,"Request time out"));break;case L1.HTTP_ERROR:const T=p.getStatus();if(Bn(Pa,`RPC '${t}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const I=C==null?void 0:C.error;if(I&&I.status&&I.message){const P=(function(F){const V=F.toLowerCase().replace(/_/g,"-");return Object.values(pn).indexOf(V)>=0?V:pn.UNKNOWN})(I.status);s(new Hn(P,I.message))}else s(new Hn(pn.UNKNOWN,"Server responded with status "+p.getStatus()))}else s(new Hn(pn.UNAVAILABLE,"Connection failed."));break;default:pi(9055,{l_:t,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Bn(Pa,`RPC '${t}' ${l} completed.`)}}));const v=JSON.stringify(r);Bn(Pa,`RPC '${t}' ${l} sending request:`,r),p.send(n,"POST",v,i,15)}))}T_(t,n,i){const r=Nk(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=uz(),h=cz(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(s.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,n,i),s.encodeInitMessageHeaders=!0;const v=a.join("");Bn(Pa,`Creating RPC '${t}' stream ${r}: ${v}`,s);const x=l.createWebChannel(v,s);this.I_(x);let T=!1,C=!1;const I=new JQ({Yo:D=>{C?Bn(Pa,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(T||(Bn(Pa,`Opening RPC '${t}' stream ${r} transport.`),x.open(),T=!0),Bn(Pa,`RPC '${t}' stream ${r} sending:`,D),x.send(D))},Zo:()=>x.close()}),P=(D,F,V)=>{D.listen(F,(H=>{try{V(H)}catch(q){setTimeout((()=>{throw q}),0)}}))};return P(x,Wy.EventType.OPEN,(()=>{C||(Bn(Pa,`RPC '${t}' stream ${r} transport opened.`),I.o_())})),P(x,Wy.EventType.CLOSE,(()=>{C||(C=!0,Bn(Pa,`RPC '${t}' stream ${r} transport closed`),I.a_(),this.E_(x))})),P(x,Wy.EventType.ERROR,(D=>{C||(C=!0,Qv(Pa,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),I.a_(new Hn(pn.UNAVAILABLE,"The operation could not be completed")))})),P(x,Wy.EventType.MESSAGE,(D=>{var F;if(!C){const V=D.data[0];Ir(!!V,16349);const H=V,q=(H==null?void 0:H.error)||((F=H[0])==null?void 0:F.error);if(q){Bn(Pa,`RPC '${t}' stream ${r} received error:`,q);const K=q.status;let ie=(function(G){const j=io[G];if(j!==void 0)return Uz(j)})(K),X=q.message;ie===void 0&&(ie=pn.INTERNAL,X="Unknown error status: "+K+" with message "+q.message),C=!0,I.a_(new Hn(ie,X)),x.close()}else Bn(Pa,`RPC '${t}' stream ${r} received:`,V),I.u_(V)}})),P(h,lz.STAT_EVENT,(D=>{D.stat===Ik.PROXY?Bn(Pa,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===Ik.NOPROXY&&Bn(Pa,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function gC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(e){return new iQ(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(t,n,i=1e3,r=1.5,a=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&Bn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="PersistentStream";class iN{constructor(t,n,i,r,a,l,h,s){this.Mi=t,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nN(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===pn.RESOURCE_EXHAUSTED?(Th(n.toString()),Th("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pn.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{t((()=>{const r=new Hn(pn.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Bn(P5,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Bn(P5,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eee extends iN{constructor(t,n,i,r,a,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=oQ(this.serializer,t),i=(function(a){if(!("targetChange"in a))return xi.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?xi.min():l.readTime?td(l.readTime):xi.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=Fk(this.serializer),n.addTarget=(function(a,l){let h;const s=l.target;if(h=Lk(s)?{documents:cQ(a,s)}:{query:uQ(a,s).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=Hz(a,l.resumeToken);const p=Ok(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(xi.min())>0){h.readTime=Fw(a,l.snapshotVersion.toTimestamp());const p=Ok(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,t);const i=hQ(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=Fk(this.serializer),n.removeTarget=t,this.q_(n)}}class tee extends iN{constructor(t,n,i,r,a,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ir(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ir(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ir(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=lQ(t.writeResults,t.commitTime),i=td(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=Fk(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>aQ(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nee{}class iee extends nee{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Hn(pn.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(t,Vk(n,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Hn(pn.UNKNOWN,a.toString())}))}Ho(t,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(t,Vk(n,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===pn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Hn(pn.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ree{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Th(n),this.aa=!1):Bn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="RemoteStore";class see{constructor(t,n,i,r,a){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{lg(this)&&(Bn(Kp,"Restarting streams for network reachability change."),await(async function(s){const p=Ci(s);p.Ea.add(4),await Lb(p),p.Ra.set("Unknown"),p.Ea.delete(4),await $T(p)})(this))}))})),this.Ra=new ree(i,r)}}async function $T(e){if(lg(e))for(const t of e.da)await t(!0)}async function Lb(e){for(const t of e.da)await t(!1)}function rN(e,t){const n=Ci(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),uP(n)?cP(n):C_(n).O_()&&lP(n,t))}function aP(e,t){const n=Ci(e),i=C_(n);n.Ia.delete(t),i.O_()&&sN(n,t),n.Ia.size===0&&(i.O_()?i.L_():lg(n)&&n.Ra.set("Unknown"))}function lP(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}C_(e).Y_(t)}function sN(e,t){e.Va.Ue(t),C_(e).Z_(t)}function cP(e){e.Va=new QJ({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),C_(e).start(),e.Ra.ua()}function uP(e){return lg(e)&&!C_(e).x_()&&e.Ia.size>0}function lg(e){return Ci(e).Ea.size===0}function oN(e){e.Va=void 0}async function oee(e){e.Ra.set("Online")}async function aee(e){e.Ia.forEach(((t,n)=>{lP(e,t)}))}async function lee(e,t){oN(e),uP(e)?(e.Ra.ha(t),cP(e)):e.Ra.set("Unknown")}async function cee(e,t,n){if(e.Ra.set("Online"),t instanceof Wz&&t.state===2&&t.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(e,t)}catch(i){Bn(Kp,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Nw(e,i)}else if(t instanceof B1?e.Va.Ze(t):t instanceof jz?e.Va.st(t):e.Va.tt(t),!n.isEqual(xi.min()))try{const i=await tN(e.localStore);n.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((s,p)=>{if(s.resumeToken.approximateByteSize()>0){const v=a.Ia.get(p);v&&a.Ia.set(p,v.withResumeToken(s.resumeToken,l))}})),h.targetMismatches.forEach(((s,p)=>{const v=a.Ia.get(s);if(!v)return;a.Ia.set(s,v.withResumeToken(da.EMPTY_BYTE_STRING,v.snapshotVersion)),sN(a,s);const x=new Lf(v.target,s,p,v.sequenceNumber);lP(a,x)})),a.remoteSyncer.applyRemoteEvent(h)})(e,n)}catch(i){Bn(Kp,"Failed to raise snapshot:",i),await Nw(e,i)}}async function Nw(e,t,n){if(!E_(t))throw t;e.Ea.add(1),await Lb(e),e.Ra.set("Offline"),n||(n=()=>tN(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Bn(Kp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await $T(e)}))}function aN(e,t){return t().catch((n=>Nw(e,n,t)))}async function UT(e){const t=Ci(e),n=rm(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:GA;for(;uee(t);)try{const r=await HQ(t.localStore,i);if(r===null){t.Ta.length===0&&n.L_();break}i=r.batchId,dee(t,r)}catch(r){await Nw(t,r)}lN(t)&&cN(t)}function uee(e){return lg(e)&&e.Ta.length<10}function dee(e,t){e.Ta.push(t);const n=rm(e);n.O_()&&n.X_&&n.ea(t.mutations)}function lN(e){return lg(e)&&!rm(e).x_()&&e.Ta.length>0}function cN(e){rm(e).start()}async function hee(e){rm(e).ra()}async function fee(e){const t=rm(e);for(const n of e.Ta)t.ea(n.mutations)}async function mee(e,t,n){const i=e.Ta.shift(),r=eP.from(i,t,n);await aN(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await UT(e)}async function pee(e,t){t&&rm(e).X_&&await(async function(i,r){if((function(l){return YJ(l)&&l!==pn.ABORTED})(r.code)){const a=i.Ta.shift();rm(i).B_(),await aN(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await UT(i)}})(e,t),lN(e)&&cN(e)}async function M5(e,t){const n=Ci(e);n.asyncQueue.verifyOperationInProgress(),Bn(Kp,"RemoteStore received new credentials");const i=lg(n);n.Ea.add(3),await Lb(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await $T(n)}async function gee(e,t){const n=Ci(e);t?(n.Ea.delete(2),await $T(n)):t||(n.Ea.add(2),await Lb(n),n.Ra.set("Unknown"))}function C_(e){return e.ma||(e.ma=(function(n,i,r){const a=Ci(n);return a.sa(),new eee(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:oee.bind(null,e),t_:aee.bind(null,e),r_:lee.bind(null,e),H_:cee.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),uP(e)?cP(e):e.Ra.set("Unknown")):(await e.ma.stop(),oN(e))}))),e.ma}function rm(e){return e.fa||(e.fa=(function(n,i,r){const a=Ci(n);return a.sa(),new tee(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:hee.bind(null,e),r_:pee.bind(null,e),ta:fee.bind(null,e),na:mee.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await UT(e)):(await e.fa.stop(),e.Ta.length>0&&(Bn(Kp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(t,n,i,r,a){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Gf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,a){const l=Date.now()+i,h=new dP(t,n,l,r,a);return h.start(i),h}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Hn(pn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hP(e,t){if(Th("AsyncQueue",`${t}: ${e}`),E_(e))return new Hn(pn.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{static emptySet(t){return new Nv(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||ni.comparator(n.key,i.key):(n,i)=>ni.comparator(n.key,i.key),this.keyedMap=Hy(),this.sortedSet=new Ts(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Nv)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Nv;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.ga=new Ts(ni.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):pi(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class s_{constructor(t,n,i,r,a,l,h,s,p){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=s,this.hasCachedResults=p}static fromInitialDocuments(t,n,i,r,a){const l=[];return n.forEach((h=>{l.push({type:0,doc:h})})),new s_(t,n,Nv.emptySet(n),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&OT(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class _ee{constructor(){this.queries=L5(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Ci(n),a=r.queries;r.queries=L5(),a.forEach(((l,h)=>{for(const s of h.Sa)s.onError(i)}))})(this,new Hn(pn.ABORTED,"Firestore shutting down"))}}function L5(){return new ag((e=>Pz(e)),OT)}async function yee(e,t){const n=Ci(e);let i=3;const r=t.query;let a=n.queries.get(r);a?!a.ba()&&t.Da()&&(i=2):(a=new vee,i=t.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const h=hP(l,`Initialization of query '${_v(t.query)}' failed`);return void t.onError(h)}n.queries.set(r,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&fP(n)}async function bee(e,t){const n=Ci(e),i=t.query;let r=3;const a=n.queries.get(i);if(a){const l=a.Sa.indexOf(t);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=t.Da()?0:1:!a.ba()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function xee(e,t){const n=Ci(e);let i=!1;for(const r of t){const a=r.query,l=n.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&fP(n)}function wee(e,t,n){const i=Ci(e),r=i.queries.get(t);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(t)}function fP(e){e.Ca.forEach((t=>{t.next()}))}var $k,R5;(R5=$k||($k={})).Ma="default",R5.Cache="cache";class Tee{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new s_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=s_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==$k.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t){this.key=t}}class dN{constructor(t){this.key=t}}class See{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ui(),this.mutatedKeys=Ui(),this.eu=Mz(t),this.tu=new Nv(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new D5,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=r,h=!1;const s=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((v,x)=>{const T=r.get(v),C=VT(this.query,x)?x:null,I=!!T&&this.mutatedKeys.has(T.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;T&&C?T.data.isEqual(C.data)?I!==P&&(i.track({type:3,doc:C}),D=!0):this.su(T,C)||(i.track({type:2,doc:C}),D=!0,(s&&this.eu(C,s)>0||p&&this.eu(C,p)<0)&&(h=!0)):!T&&C?(i.track({type:0,doc:C}),D=!0):T&&!C&&(i.track({type:1,doc:T}),D=!0,(s||p)&&(h=!0)),D&&(C?(l=l.add(C),a=P?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((v,x)=>(function(C,I){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pi(20277,{Rt:D})}};return P(C)-P(I)})(v.type,x.type)||this.eu(v.doc,x.doc))),this.ou(i),r=r??!1;const h=n&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,p=s!==this.Za;return this.Za=s,l.length!==0||p?{snapshot:new s_(this.query,t.tu,a,l,t.mutatedKeys,s===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new D5,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ui(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new dN(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new uN(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ui();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return s_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mP="SyncEngine";class Eee{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class Cee{constructor(t){this.key=t,this.hu=!1}}class kee{constructor(t,n,i,r,a,l){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ag((h=>Pz(h)),OT),this.Iu=new Map,this.Eu=new Set,this.du=new Ts(ni.comparator),this.Au=new Map,this.Ru=new iP,this.Vu={},this.mu=new Map,this.fu=r_.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Iee(e,t,n=!0){const i=vN(e);let r;const a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await hN(i,t,n,!0),r}async function Aee(e,t){const n=vN(e);await hN(n,t,!0,!1)}async function hN(e,t,n,i){const r=await GQ(e.localStore,ed(t)),a=r.targetId,l=e.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await Pee(e,t,a,l==="current",r.resumeToken)),e.isPrimaryClient&&n&&rN(e.remoteStore,r),h}async function Pee(e,t,n,i,r){e.pu=(x,T,C)=>(async function(P,D,F,V){let H=D.view.ru(F);H.Cs&&(H=await C5(P.localStore,D.query,!1).then((({documents:X})=>D.view.ru(X,H))));const q=V&&V.targetChanges.get(D.targetId),K=V&&V.targetMismatches.get(D.targetId)!=null,ie=D.view.applyChanges(H,P.isPrimaryClient,q,K);return V5(P,D.targetId,ie.au),ie.snapshot})(e,x,T,C);const a=await C5(e.localStore,t,!0),l=new See(t,a.Qs),h=l.ru(a.documents),s=Db.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),p=l.applyChanges(h,e.isPrimaryClient,s);V5(e,n,p.au);const v=new Eee(t,n,l);return e.Tu.set(t,v),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),p.snapshot}async function Mee(e,t,n){const i=Ci(e),r=i.Tu.get(t),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!OT(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await zk(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&aP(i.remoteStore,r.targetId),Uk(i,r.targetId)})).catch(S_)):(Uk(i,r.targetId),await zk(i.localStore,r.targetId,!0))}async function Dee(e,t){const n=Ci(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),aP(n.remoteStore,i.targetId))}async function Lee(e,t,n){const i=Nee(e);try{const r=await(function(l,h){const s=Ci(l),p=Qr.now(),v=h.reduce(((C,I)=>C.add(I.key)),Ui());let x,T;return s.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let I=Sh(),P=Ui();return s.Ns.getEntries(C,v).next((D=>{I=D,I.forEach(((F,V)=>{V.isValidDocument()||(P=P.add(F))}))})).next((()=>s.localDocuments.getOverlayedDocuments(C,I))).next((D=>{x=D;const F=[];for(const V of h){const H=HJ(V,x.get(V.key).overlayedDocument);H!=null&&F.push(new pm(V.key,H,Tz(H.value.mapValue),fu.exists(!0)))}return s.mutationQueue.addMutationBatch(C,p,F,h)})).next((D=>{T=D;const F=D.applyToLocalDocumentSet(x,P);return s.documentOverlayCache.saveOverlays(C,D.batchId,F)}))})).then((()=>({batchId:T.batchId,changes:Lz(x)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,s){let p=l.Vu[l.currentUser.toKey()];p||(p=new Ts($i)),p=p.insert(h,s),l.Vu[l.currentUser.toKey()]=p})(i,r.batchId,n),await Rb(i,r.changes),await UT(i.remoteStore)}catch(r){const a=hP(r,"Failed to persist write");n.reject(a)}}async function fN(e,t){const n=Ci(e);try{const i=await jQ(n.localStore,t);t.targetChanges.forEach(((r,a)=>{const l=n.Au.get(a);l&&(Ir(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Ir(l.hu,14607):r.removedDocuments.size>0&&(Ir(l.hu,42227),l.hu=!1))})),await Rb(n,i,t)}catch(i){await S_(i)}}function O5(e,t,n){const i=Ci(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(t);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const s=Ci(l);s.onlineState=h;let p=!1;s.queries.forEach(((v,x)=>{for(const T of x.Sa)T.va(h)&&(p=!0)})),p&&fP(s)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Ree(e,t,n){const i=Ci(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),a=r&&r.key;if(a){let l=new Ts(ni.comparator);l=l.insert(a,Va.newNoDocument(a,xi.min()));const h=Ui().add(a),s=new zT(xi.min(),new Map,new Ts($i),l,h);await fN(i,s),i.du=i.du.remove(a),i.Au.delete(t),pP(i)}else await zk(i.localStore,t,!1).then((()=>Uk(i,t,n))).catch(S_)}async function Oee(e,t){const n=Ci(e),i=t.batch.batchId;try{const r=await UQ(n.localStore,t);pN(n,i,null),mN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Rb(n,r)}catch(r){await S_(r)}}async function Vee(e,t,n){const i=Ci(e);try{const r=await(function(l,h){const s=Ci(l);return s.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return s.mutationQueue.lookupMutationBatch(p,h).next((x=>(Ir(x!==null,37113),v=x.keys(),s.mutationQueue.removeMutationBatch(p,x)))).next((()=>s.mutationQueue.performConsistencyCheck(p))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>s.localDocuments.getDocuments(p,v)))}))})(i.localStore,t);pN(i,t,n),mN(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Rb(i,r)}catch(r){await S_(r)}}function mN(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function pN(e,t,n){const i=Ci(e);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Uk(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((i=>{e.Ru.containsKey(i)||gN(e,i)}))}function gN(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(aP(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),pP(e))}function V5(e,t,n){for(const i of n)i instanceof uN?(e.Ru.addReference(i.key,t),Bee(e,i)):i instanceof dN?(Bn(mP,"Document no longer in limbo: "+i.key),e.Ru.removeReference(i.key,t),e.Ru.containsKey(i.key)||gN(e,i.key)):pi(19791,{wu:i})}function Bee(e,t){const n=t.key,i=n.path.canonicalString();e.du.get(n)||e.Eu.has(i)||(Bn(mP,"New document in limbo: "+n),e.Eu.add(i),pP(e))}function pP(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ni(xs.fromString(t)),i=e.fu.next();e.Au.set(i,new Cee(n)),e.du=e.du.insert(n,i),rN(e.remoteStore,new Lf(ed(ZA(n.path)),i,"TargetPurposeLimboResolution",MT.ce))}}async function Rb(e,t,n){const i=Ci(e),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,s)=>{l.push(i.pu(s,t,n).then((p=>{var v;if((p||n)&&i.isPrimaryClient){const x=p?!p.fromCache:(v=n==null?void 0:n.targetChanges.get(s.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(s.targetId,x?"current":"not-current")}if(p){r.push(p);const x=sP.As(s.targetId,p);a.push(x)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(s,p){const v=Ci(s);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>cn.forEach(p,(T=>cn.forEach(T.Es,(C=>v.persistence.referenceDelegate.addReference(x,T.targetId,C))).next((()=>cn.forEach(T.ds,(C=>v.persistence.referenceDelegate.removeReference(x,T.targetId,C)))))))))}catch(x){if(!E_(x))throw x;Bn(oP,"Failed to update sequence numbers: "+x)}for(const x of p){const T=x.targetId;if(!x.fromCache){const C=v.Ms.get(T),I=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(I);v.Ms=v.Ms.insert(T,P)}}})(i.localStore,a))}async function Fee(e,t){const n=Ci(e);if(!n.currentUser.isEqual(t)){Bn(mP,"User change. New user:",t.toKey());const i=await eN(n.localStore,t);n.currentUser=t,(function(a,l){a.mu.forEach((h=>{h.forEach((s=>{s.reject(new Hn(pn.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Rb(n,i.Ls)}}function zee(e,t){const n=Ci(e),i=n.Au.get(t);if(i&&i.hu)return Ui().add(i.key);{let r=Ui();const a=n.Iu.get(t);if(!a)return r;for(const l of a){const h=n.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function vN(e){const t=Ci(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zee.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ree.bind(null,t),t.Pu.H_=xee.bind(null,t.eventManager),t.Pu.yu=wee.bind(null,t.eventManager),t}function Nee(e){const t=Ci(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Oee.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vee.bind(null,t),t}class $w{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=NT(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return $Q(this.persistence,new FQ,t.initialUser,this.serializer)}Cu(t){return new Qz(rP.mi,this.serializer)}Du(t){return new KQ}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$w.provider={build:()=>new $w};class $ee extends $w{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ir(this.persistence.referenceDelegate instanceof zw,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new TQ(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Il.withCacheSize(this.cacheSizeBytes):Il.DEFAULT;return new Qz((i=>zw.mi(i,n)),this.serializer)}}class jk{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>O5(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fee.bind(null,this.syncEngine),await gee(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new _ee})()}createDatastore(t){const n=NT(t.databaseInfo.databaseId),i=(function(a){return new QQ(a)})(t.databaseInfo);return(function(a,l,h,s){return new iee(a,l,h,s)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,r,a,l,h){return new see(i,r,a,l,h)})(this.localStore,this.datastore,t.asyncQueue,(n=>O5(this.syncEngine,n,0)),(function(){return A5.v()?new A5:new XQ})())}createSyncEngine(t,n){return(function(r,a,l,h,s,p,v){const x=new kee(r,a,l,h,s,p);return v&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(r){const a=Ci(r);Bn(Kp,"RemoteStore shutting down."),a.Ea.add(5),await Lb(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}jk.provider={build:()=>new jk};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Th("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="FirestoreClient";class jee{constructor(t,n,i,r,a){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=La.UNAUTHENTICATED,this.clientId=WA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{Bn(sm,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Bn(sm,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=hP(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function vC(e,t){e.asyncQueue.verifyOperationInProgress(),Bn(sm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async r=>{i.isEqual(r)||(await eN(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function B5(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Wee(e);Bn(sm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((i=>M5(t.remoteStore,i))),e.setAppCheckTokenChangeListener(((i,r)=>M5(t.remoteStore,r))),e._onlineComponents=t}async function Wee(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bn(sm,"Using user provided OfflineComponentProvider");try{await vC(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(r){return r.name==="FirebaseError"?r.code===pn.FAILED_PRECONDITION||r.code===pn.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Qv("Error using user provided cache. Falling back to memory cache: "+n),await vC(e,new $w)}}else Bn(sm,"Using default OfflineComponentProvider"),await vC(e,new $ee(void 0));return e._offlineComponents}async function _N(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bn(sm,"Using user provided OnlineComponentProvider"),await B5(e,e._uninitializedComponentsProvider._online)):(Bn(sm,"Using default OnlineComponentProvider"),await B5(e,new jk))),e._onlineComponents}function Hee(e){return _N(e).then((t=>t.syncEngine))}async function Gee(e){const t=await _N(e),n=t.eventManager;return n.onListen=Iee.bind(null,t.syncEngine),n.onUnlisten=Mee.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Aee.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Dee.bind(null,t.syncEngine),n}function qee(e,t,n={}){const i=new Gf;return e.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,s,p){const v=new Uee({next:T=>{v.Nu(),l.enqueueAndForget((()=>bee(a,x)));const C=T.docs.has(h);!C&&T.fromCache?p.reject(new Hn(pn.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&s&&s.source==="server"?p.reject(new Hn(pn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),x=new Tee(ZA(h.path),v,{includeMetadataChanges:!0,qa:!0});return yee(a,x)})(await Gee(e),e.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firestore.googleapis.com",z5=!0;class N5{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Hn(pn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=z5}else this.host=t.host,this.ssl=t.ssl??z5;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Jz;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xQ)throw new Hn(pn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}iJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yN(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Hn(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Hn(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Hn(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class gP{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N5({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Hn(pn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Hn(pn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N5(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GZ;switch(i.type){case"firstParty":return new YZ(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Hn(pn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=F5.get(n);i&&(Bn("ComponentProvider","Removing Datastore"),F5.delete(n),i.terminate())})(this),Promise.resolve()}}function Kee(e,t,n,i={}){var p;e=Qf(e,gP);const r=x_(t),a=e._getSettings(),l={...a,emulatorOptions:e._getEmulatorOptions()},h=`${t}:${n}`;r&&(pF(`https://${h}`),gF("Firestore",!0)),a.host!==bN&&a.host!==h&&Qv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const s={...a,host:h,ssl:r,emulatorOptions:i};if(!Jf(s,l)&&(e._setSettings(s),i.mockUserToken)){let v,x;if(typeof i.mockUserToken=="string")v=i.mockUserToken,x=La.MOCK_USER;else{v=eK(i.mockUserToken,(p=e._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Hn(pn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new La(T)}e._authCredentials=new qZ(new hz(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new vP(this.firestore,t,this._query)}}class _o{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new q0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _o(this.firestore,t,this._key)}toJSON(){return{type:_o._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Pb(n,_o._jsonSchema))return new _o(t,i||null,new ni(xs.fromString(n.referencePath)))}}_o._jsonSchemaVersion="firestore/documentReference/1.0",_o._jsonSchema={type:ao("string",_o._jsonSchemaVersion),referencePath:ao("string")};class q0 extends vP{constructor(t,n,i){super(t,n,ZA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _o(this.firestore,null,new ni(t))}withConverter(t){return new q0(this.firestore,t,this._path)}}function Dp(e,t,...n){if(e=Uo(e),arguments.length===1&&(t=WA.newId()),nJ("doc","path",t),e instanceof gP){const i=xs.fromString(t,...n);return e5(i),new _o(e,null,new ni(i))}{if(!(e instanceof _o||e instanceof q0))throw new Hn(pn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xs.fromString(t,...n));return e5(i),new _o(e.firestore,e instanceof q0?e.converter:null,new ni(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="AsyncQueue";class U5{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nN(this,"async_queue_retry"),this._c=()=>{const i=gC();i&&Bn($5,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=gC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=gC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Gf;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!E_(t))throw t;Bn($5,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Th("INTERNAL UNHANDLED ERROR: ",j5(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const r=dP.createAndSchedule(this,t,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&pi(47125,{Pc:j5(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function j5(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ob extends gP{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new U5,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new U5(t),this._firestoreClient=void 0,await t}}}function Xee(e,t){const n=typeof e=="object"?e:bF(),i=typeof e=="string"?e:Dw,r=LA(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=Jq("firestore");a&&Kee(r,...a)}return r}function xN(e){if(e._terminated)throw new Hn(pn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Yee(e),e._firestoreClient}function Yee(e){var i,r,a;const t=e._freezeSettings(),n=(function(h,s,p,v){return new mJ(h,s,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,yN(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(e._databaseId,((i=e._app)==null?void 0:i.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((a=t.localCache)!=null&&a._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new jee(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(h){const s=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(s),_online:s}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Rc(da.fromBase64String(t))}catch(n){throw new Hn(pn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Rc(da.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Rc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Pb(t,Rc._jsonSchema))return Rc.fromBase64String(t.bytes)}}Rc._jsonSchemaVersion="firestore/bytes/1.0",Rc._jsonSchema={type:ao("string",Rc._jsonSchemaVersion),bytes:ao("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Hn(pn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new aa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Hn(pn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hn(pn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return $i(this._lat,t._lat)||$i(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nd._jsonSchemaVersion}}static fromJSON(t){if(Pb(t,nd._jsonSchema))return new nd(t.latitude,t.longitude)}}nd._jsonSchemaVersion="firestore/geoPoint/1.0",nd._jsonSchema={type:ao("string",nd._jsonSchemaVersion),latitude:ao("number"),longitude:ao("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:id._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Pb(t,id._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new id(t.vectorValues);throw new Hn(pn.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}id._jsonSchemaVersion="firestore/vectorValue/1.0",id._jsonSchema={type:ao("string",id._jsonSchemaVersion),vectorValues:ao("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=/^__.*__$/;class Jee{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new pm(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mb(t,this.data,n,this.fieldTransforms)}}class wN{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new pm(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function TN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pi(40011,{Ac:e})}}class HT{constructor(t,n,i,r,a,l){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new HT({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){var r;const n=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Uw(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(TN(this.Ac)&&Zee.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Qee{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||NT(t)}Cc(t,n,i,r=!1){return new HT({Ac:t,methodName:n,Dc:i,path:aa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SN(e){const t=e._freezeSettings(),n=NT(e._databaseId);return new Qee(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ete(e,t,n,i,r,a={}){const l=e.Cc(a.merge||a.mergeFields?2:0,t,n,r);yP("Data must be an object, but it was:",l,i);const h=EN(i,l);let s,p;if(a.merge)s=new rc(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const x of a.mergeFields){const T=Wk(t,x,n);if(!l.contains(T))throw new Hn(pn.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);kN(v,T)||v.push(T)}s=new rc(v),p=l.fieldTransforms.filter((x=>s.covers(x.field)))}else s=null,p=l.fieldTransforms;return new Jee(new Al(h),s,p)}class GT extends WT{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof GT}}function tte(e,t,n){return new HT({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _P extends WT{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=tte(this,t,!0),i=this.vc.map((a=>Vb(a,n))),r=new i_(i);return new $J(t.path,r)}isEqual(t){return t instanceof _P&&Jf(this.vc,t.vc)}}function nte(e,t,n,i){const r=e.Cc(1,t,n);yP("Data must be an object, but it was:",r,i);const a=[],l=Al.empty();mm(i,((s,p)=>{const v=bP(t,s,n);p=Uo(p);const x=r.yc(v);if(p instanceof GT)a.push(v);else{const T=Vb(p,x);T!=null&&(a.push(v),l.set(v,T))}}));const h=new rc(a);return new wN(l,h,r.fieldTransforms)}function ite(e,t,n,i,r,a){const l=e.Cc(1,t,n),h=[Wk(t,i,n)],s=[r];if(a.length%2!=0)throw new Hn(pn.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(Wk(t,a[T])),s.push(a[T+1]);const p=[],v=Al.empty();for(let T=h.length-1;T>=0;--T)if(!kN(p,h[T])){const C=h[T];let I=s[T];I=Uo(I);const P=l.yc(C);if(I instanceof GT)p.push(C);else{const D=Vb(I,P);D!=null&&(p.push(C),v.set(C,D))}}const x=new rc(p);return new wN(v,x,l.fieldTransforms)}function Vb(e,t){if(CN(e=Uo(e)))return yP("Unsupported field value:",t,e),EN(e,t);if(e instanceof WT)return(function(i,r){if(!TN(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let s=Vb(h,r.wc(l));s==null&&(s={nullValue:"NULL_VALUE"}),a.push(s),l++}return{arrayValue:{values:a}}})(e,t)}return(function(i,r){if((i=Uo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FJ(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Qr.fromDate(i);return{timestampValue:Fw(r.serializer,a)}}if(i instanceof Qr){const a=new Qr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fw(r.serializer,a)}}if(i instanceof nd)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rc)return{bytesValue:Hz(r.serializer,i._byteString)};if(i instanceof _o){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:nP(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof id)return(function(l,h){return{mapValue:{fields:{[xz]:{stringValue:wz},[Lw]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return JA(h.serializer,p)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${HA(i)}`)})(e,t)}function EN(e,t){const n={};return pz(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mm(e,((i,r)=>{const a=Vb(r,t.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function CN(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qr||e instanceof nd||e instanceof Rc||e instanceof _o||e instanceof WT||e instanceof id)}function yP(e,t,n){if(!CN(n)||!fz(n)){const i=HA(n);throw i==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+i)}}function Wk(e,t,n){if((t=Uo(t))instanceof jT)return t._internalPath;if(typeof t=="string")return bP(e,t);throw Uw("Field path arguments must be of type string or ",e,!1,void 0,n)}const rte=new RegExp("[~\\*/\\[\\]]");function bP(e,t,n){if(t.search(rte)>=0)throw Uw(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new jT(...t.split("."))._internalPath}catch{throw Uw(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Uw(e,t,n,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${t}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let s="";return(a||l)&&(s+=" (found",a&&(s+=` in field ${i}`),l&&(s+=` in document ${r}`),s+=")"),new Hn(pn.INVALID_ARGUMENT,h+e+s)}function kN(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t,n,i,r,a){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _o(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ste(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(AN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ste extends IN{data(){return super.data()}}function AN(e,t){return typeof t=="string"?bP(e,t):t instanceof jT?t._internalPath:t._delegate._internalPath}class ote{convertValue(t,n="none"){switch(im(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(nm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw pi(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return mm(t,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(t){var i,r,a;const n=(a=(r=(i=t.fields)==null?void 0:i[Lw].arrayValue)==null?void 0:r.values)==null?void 0:a.map((l=>Gs(l.doubleValue)));return new id(n)}convertGeoPoint(t){return new nd(Gs(t.latitude),Gs(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=LT(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(j0(t));default:return null}}convertTimestamp(t){const n=tm(t);return new Qr(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=xs.fromString(t);Ir(Zz(i),9688,{name:t});const r=new W0(i.get(1),i.get(3)),a=new ni(i.popFirst(5));return r.isEqual(n)||Th(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ate(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class qy{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Lp extends IN{constructor(t,n,i,r,a,l){super(t,n,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new F1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(AN("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Hn(pn.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Lp._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lp._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lp._jsonSchema={type:ao("string",Lp._jsonSchemaVersion),bundleSource:ao("string","DocumentSnapshot"),bundleName:ao("string"),bundle:ao("string")};class F1 extends Lp{data(t={}){return super.data(t)}}class _0{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new qy(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new F1(this._firestore,this._userDataWriter,i.key,i,new qy(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Hn(pn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const s=new F1(r._firestore,r._userDataWriter,h.doc.key,h.doc,new qy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:s,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const s=new F1(r._firestore,r._userDataWriter,h.doc.key,h.doc,new qy(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:lte(h.type),doc:s,oldIndex:p,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Hn(pn.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=_0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=WA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function lte(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pi(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cte(e){e=Qf(e,_o);const t=Qf(e.firestore,Ob);return qee(xN(t),e._key).then((n=>hte(t,e,n)))}_0._jsonSchemaVersion="firestore/querySnapshot/1.0",_0._jsonSchema={type:ao("string",_0._jsonSchemaVersion),bundleSource:ao("string","QuerySnapshot"),bundleName:ao("string"),bundle:ao("string")};class ute extends ote{constructor(t){super(),this.firestore=t}convertBytes(t){return new Rc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _o(this.firestore,null,n)}}function PN(e,t,n){e=Qf(e,_o);const i=Qf(e.firestore,Ob),r=ate(e.converter,t,n);return xP(i,[ete(SN(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,fu.none())])}function qT(e,t,n,...i){e=Qf(e,_o);const r=Qf(e.firestore,Ob),a=SN(r);let l;return l=typeof(t=Uo(t))=="string"||t instanceof jT?ite(a,"updateDoc",e._key,t,n,i):nte(a,"updateDoc",e._key,t),xP(r,[l.toMutation(e._key,fu.exists(!0))])}function dte(e){return xP(Qf(e.firestore,Ob),[new QA(e._key,fu.none())])}function xP(e,t){return(function(i,r){const a=new Gf;return i.asyncQueue.enqueueAndForget((async()=>Lee(await Hee(i),r,a))),a.promise})(xN(e),t)}function hte(e,t,n){const i=n.docs.get(t._key),r=new ute(e);return new Lp(e,r,t._key,i,new qy(n.hasPendingWrites,n.fromCache),t.converter)}function MN(...e){return new _P("arrayUnion",e)}(function(t,n=!0){(function(r){T_=r})(w_),Jv(new Wp("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new Ob(new KZ(i.getProvider("auth-internal")),new ZZ(l,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Hn(pn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new W0(p.options.projectId,v)})(l,r),l);return a={useFetchStreams:n,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Wf(YR,ZR,t),Wf(YR,ZR,"esm2020")})();const fte={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},DN=yF(fte),Bb=UA(DN),Rp=Xee(DN);async function mte(e,t){try{return{success:!0,user:(await AY(Bb,e,t)).user}}catch(n){console.error=()=>{},setTimeout(()=>console.error=console.__proto__.error);let i="";switch(n.code){case"auth/email-already-in-use":i="This email is already registered.";break;case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/weak-password":i="Password should be at least 6 characters.";break;default:i="An unexpected error occurred during registration."}return{success:!1,message:i}}}async function pte(e,t){if(!e||!t)return{success:!1,message:"Please enter both email and password."};try{return{success:!0,user:(await PY(Bb,e,t)).user}}catch(n){let i="";switch(n.code){case"auth/invalid-email":i="Please enter a valid email address.";break;case"auth/user-not-found":i="No account found with this email.";break;case"auth/wrong-password":i="Incorrect password. Please try again.";break;default:i="Login failed. Please check your details and try again."}return{success:!1,message:i}}}async function gte(){try{return await LY(Bb),{success:!0}}catch(e){return KT(e)}}async function vte(e){try{return await IY(Bb,e),{success:!0}}catch(t){return KT(t)}}const W5=e=>{try{return KF(Bb,e)}catch(t){console.warn("Auth observer failed:",t.message)}};async function _te(e,t){try{return await PN(Dp(Rp,"users",e),{name:t},{merge:!0}),{success:!0}}catch(n){return KT(n)}}async function yte(e,t){try{const n=Dp(Rp,"users",e);return await qT(n,{favorite_stations:MN(t)}),{success:!0}}catch(n){return KT(n)}}function KT(e){const t={"auth/invalid-email":"Invalid email address.","auth/user-not-found":"No user found with this email.","auth/wrong-password":"Incorrect password.","auth/weak-password":"Password should be at least 6 characters.","auth/email-already-in-use":"This email is already registered.","auth/network-request-failed":"Network error. Please check your connection.","permission-denied":"You do not have permission to perform this action."};return{success:!1,code:e.code,message:t[e.code]||"An unexpected error occurred."}}const Sv={"Jurong East":{"North-South Line":"NS1","East-West Line":"EW24"},"Bukit Batok":{"North-South Line":"NS2"},"Bukit Gombak":{"North-South Line":"NS3"},"Choa Chu Kang":{"North-South Line":"NS4","LRT Line":"BP1"},"Yew Tee":{"North-South Line":"NS5"},Kranji:{"North-South Line":"NS7"},Marsiling:{"North-South Line":"NS8"},Woodlands:{"North-South Line":"NS9","Thomson-East Coast Line":"TE2"},Admiralty:{"North-South Line":"NS10"},Sembawang:{"North-South Line":"NS11"},Canberra:{"North-South Line":"NS12"},Yishun:{"North-South Line":"NS13"},Khatib:{"North-South Line":"NS14"},"Yio Chu Kang":{"North-South Line":"NS15"},"Ang Mo Kio":{"North-South Line":"NS16"},Bishan:{"North-South Line":"NS17","Circle Line":"CC15"},Braddell:{"North-South Line":"NS18"},"Toa Payoh":{"North-South Line":"NS19"},Novena:{"North-South Line":"NS20"},Newton:{"North-South Line":"NS21","Downtown Line":"DT11"},Orchard:{"North-South Line":"NS22","Thomson-East Coast Line":"TE14"},Somerset:{"North-South Line":"NS23"},"Dhoby Ghaut":{"North-South Line":"NS24","North-East Line":"NE6","Circle Line":"CC1"},"City Hall":{"North-South Line":"NS25","East-West Line":"EW13"},"Raffles Place":{"North-South Line":"NS26","East-West Line":"EW14"},"Marina Bay":{"North-South Line":"NS27","Thomson-East Coast Line":"TE20"},"Marina South Pier":{"North-South Line":"NS28"},"Pasir Ris":{"East-West Line":"EW1"},Tampines:{"East-West Line":"EW2","Downtown Line":"DT32"},Simei:{"East-West Line":"EW3","Downtown Line":"DT33"},"Tanah Merah":{"East-West Line":"EW4","Downtown Line":"DT34"},Bedok:{"East-West Line":"EW5"},Kembangan:{"East-West Line":"EW6"},Eunos:{"East-West Line":"EW7"},"Paya Lebar":{"East-West Line":"EW8","Circle Line":"CC9"},Aljunied:{"East-West Line":"EW9"},Kallang:{"East-West Line":"EW10"},Lavender:{"East-West Line":"EW11"},Bugis:{"East-West Line":"EW12","Downtown Line":"DT14"},"Tanjong Pagar":{"East-West Line":"EW15"},"Outram Park":{"East-West Line":"EW16","North-East Line":"NE3","Thomson-East Coast Line":"TE15"},"Tiong Bahru":{"East-West Line":"EW17"},Redhill:{"East-West Line":"EW18"},Queenstown:{"East-West Line":"EW19"},Commonwealth:{"East-West Line":"EW20"},"Buona Vista":{"East-West Line":"EW21","Circle Line":"CC22"},Dover:{"East-West Line":"EW22"},Clementi:{"East-West Line":"EW23"},"Chinese Garden":{"East-West Line":"EW25"},Lakeside:{"East-West Line":"EW26"},"Boon Lay":{"East-West Line":"EW27"},Pioneer:{"East-West Line":"EW28"},"Joo Koon":{"East-West Line":"EW29"},"Gul Circle":{"East-West Line":"EW30"},"Tuas Crescent":{"East-West Line":"EW31"},"Tuas West Road":{"East-West Line":"EW32"},"Tuas Link":{"East-West Line":"EW33"},"Dhoby Ghaut":{"Circle Line":"CC1","North-South Line":"NS24","North-East Line":"NE6"},"Bras Basah":{"Circle Line":"CC2"},Esplanade:{"Circle Line":"CC3"},Promenade:{"Circle Line":"CC4","Downtown Line":"DT15"},Bayfront:{"Circle Line":"CC5","Downtown Line":"DT16"},"Nicoll Highway":{"Circle Line":"CC5"},Stadium:{"Circle Line":"CC6"},Mountbatten:{"Circle Line":"CC7"},Dakota:{"Circle Line":"CC8"},"Paya Lebar":{"Circle Line":"CC9","East-West Line":"EW8"},MacPherson:{"Circle Line":"CC10","Downtown Line":"DT26"},"Tai Seng":{"Circle Line":"CC11"},Bartley:{"Circle Line":"CC12"},Serangoon:{"Circle Line":"CC13","North-East Line":"NE12"},"Lorong Chuan":{"Circle Line":"CC14"},Bishan:{"Circle Line":"CC15","North-South Line":"NS17"},Marymount:{"Circle Line":"CC16"},Caldecott:{"Circle Line":"CC17","Thomson-East Coast Line":"TE9"},"Botanic Gardens":{"Circle Line":"CC19","Downtown Line":"DT9"},"Farrer Road":{"Circle Line":"CC20"},"Holland Village":{"Circle Line":"CC21"},"Buona Vista":{"Circle Line":"CC22","East-West Line":"EW21"},"one-north":{"Circle Line":"CC23"},"Kent Ridge":{"Circle Line":"CC24"},"Haw Par Villa":{"Circle Line":"CC25"},"Pasir Panjang":{"Circle Line":"CC26"},"Labrador Park":{"Circle Line":"CC27"},"Telok Blangah":{"Circle Line":"CC28"},HarbourFront:{"Circle Line":"CC29","North-East Line":"NE1"},HarbourFront:{"North-East Line":"NE1","Circle Line":"CC29"},"Outram Park":{"North-East Line":"NE3","East-West Line":"EW16","Thomson-East Coast Line":"TE15"},Chinatown:{"North-East Line":"NE4","Downtown Line":"DT19"},"Clarke Quay":{"North-East Line":"NE5"},"Dhoby Ghaut":{"North-East Line":"NE6","North-South Line":"NS24","Circle Line":"CC1"},"Little India":{"North-East Line":"NE7","Downtown Line":"DT12"},"Farrer Park":{"North-East Line":"NE8"},"Boon Keng":{"North-East Line":"NE9"},"Potong Pasir":{"North-East Line":"NE10"},Woodleigh:{"North-East Line":"NE11"},Serangoon:{"North-East Line":"NE12","Circle Line":"CC13"},Kovan:{"North-East Line":"NE13"},Hougang:{"North-East Line":"NE14"},Buangkok:{"North-East Line":"NE15"},Sengkang:{"North-East Line":"NE16","LRT Line":"SW1"},Punggol:{"North-East Line":"NE17","LRT Line":"PW1"},"Punggol Coast":{"North-East Line":"NE18"},"Woodlands North":{"Thomson-East Coast Line":"TE1"},Woodlands:{"Thomson-East Coast Line":"TE2","North-South Line":"NS9"},"Woodlands South":{"Thomson-East Coast Line":"TE3"},Springleaf:{"Thomson-East Coast Line":"TE4"},Lentor:{"Thomson-East Coast Line":"TE5"},Mayflower:{"Thomson-East Coast Line":"TE6"},"Bright Hill":{"Thomson-East Coast Line":"TE7"},"Upper Thomson":{"Thomson-East Coast Line":"TE8"},Caldecott:{"Thomson-East Coast Line":"TE9","Circle Line":"CC17"},Stevens:{"Thomson-East Coast Line":"TE10","Downtown Line":"DT10"},Orchard:{"Thomson-East Coast Line":"TE14","North-South Line":"NS22"},"Shenton Way":{"Thomson-East Coast Line":"TE18"},"Gardens By The Bay":{"Thomson-East Coast Line":"TE19"},"Marina Bay":{"Thomson-East Coast Line":"TE20","North-South Line":"NS27"},"Bukit Panjang":{"Downtown Line":"DT1","LRT Line":"BP6"},Cashew:{"Downtown Line":"DT2"},Hillview:{"Downtown Line":"DT3"},"Beauty World":{"Downtown Line":"DT5"},"King Albert Park":{"Downtown Line":"DT6"},"Sixth Avenue":{"Downtown Line":"DT7"},"Tan Kah Kee":{"Downtown Line":"DT8"},"Botanic Gardens":{"Downtown Line":"DT9","Circle Line":"CC19"},Stevens:{"Downtown Line":"DT10","Thomson-East Coast Line":"TE10"},Newton:{"Downtown Line":"DT11","North-South Line":"NS21"},"Little India":{"Downtown Line":"DT12","North-East Line":"NE7"},Rochor:{"Downtown Line":"DT13"},Bugis:{"Downtown Line":"DT14","East-West Line":"EW12"},Promenade:{"Downtown Line":"DT15","Circle Line":"CC4"},Bayfront:{"Downtown Line":"DT16","Circle Line":"CC5"},Downtown:{"Downtown Line":"DT17"},"Telok Ayer":{"Downtown Line":"DT18"},Chinatown:{"Downtown Line":"DT19","North-East Line":"NE4"},"Fort Canning":{"Downtown Line":"DT20"},Bencoolen:{"Downtown Line":"DT21"},"Jalan Besar":{"Downtown Line":"DT22"},Bendemeer:{"Downtown Line":"DT23"},"Geylang Bahru":{"Downtown Line":"DT24"},Mattar:{"Downtown Line":"DT25"},MacPherson:{"Downtown Line":"DT26","Circle Line":"CC10"},Ubi:{"Downtown Line":"DT27"},"Kaki Bukit":{"Downtown Line":"DT28"},"Bedok North":{"Downtown Line":"DT29"},"Bedok Reservoir":{"Downtown Line":"DT30"},"Tampines West":{"Downtown Line":"DT31"},Tampines:{"Downtown Line":"DT32","East-West Line":"EW2"},"Tampines East":{"Downtown Line":"DT33"},Simei:{"East-West Line":"EW3"},Expo:{"Downtown Line":"DT34","East-West Line":"EW35"},"Changi Airport":{"Downtown Line":"DT36","East-West Line":"EW4"},"Choa Chu Kang":{"LRT Line":"BP1","North-South Line":"NS4"},"Keat Hong":{"LRT Line":"BP2"},"Teck Whye":{"LRT Line":"BP3"},Phoenix:{"LRT Line":"BP4"},Senja:{"LRT Line":"BP5"},"Bukit Panjang":{"LRT Line":"BP6","Downtown Line":"DT1"},Sengkang:{"LRT Line":"SW1","North-East Line":"NE16"},Compassvale:{"LRT Line":"SW2"},Rumbia:{"LRT Line":"SW3"},Bakau:{"LRT Line":"SW4"},Kangkar:{"LRT Line":"SW5"},Renjong:{"LRT Line":"SW6"},Thanggam:{"LRT Line":"SW7"},Fernvale:{"LRT Line":"SW8"},Punggol:{"LRT Line":"PW1","North-East Line":"NE17"},Oasis:{"LRT Line":"PW2"},Damai:{"LRT Line":"PW3"},Sumang:{"LRT Line":"PW4"},Prentice:{"LRT Line":"PW5"},"Sam Kee":{"LRT Line":"PW6"},"Punggol Point":{"LRT Line":"PW7"},Cove:{"LRT Line":"PW8"}};console.warn("Warning: Missing VITE_LTA_API_KEY environment variable. Some features may not work. Create a .env file with: VITE_LTA_API_KEY=your_api_key_here");const Hk="",bte={class:"dashboard-view"},xte={class:"hero row align-items-center gy-5"},wte={class:"col-lg-12 hero-intro","data-aos":"fade-up"},Tte={class:"hero-cta container-fluid"},Ste={class:"col-lg-12 hero-illustration text-center","data-aos":"fade-left"},Ete={key:0,class:"station-highlight-overlay"},Cte={class:"live-tools mt-5","data-aos":"fade-up","data-aos-delay":"150"},kte={class:"ticker-station d-flex align-items-center gap-2"},Ite={class:"ticker-line tab-desc mt-1"},Ate={class:"live-clock"},Pte={class:"ticker-times"},Mte={key:0,class:"tab-desc small"},Dte={class:"row g-4 mt-4"},Lte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"250"},Rte={class:"section-card h-100"},Ote={class:"tab-desc"},Vte={class:"list-unstyled mt-3"},Bte={key:0,class:"tab-desc"},Fte={class:"flex-grow-1 d-flex flex-column gap- w-100"},zte={class:"d-flex justify-content-between align-items-start"},Nte={class:"favorite-label"},$te={class:"text-muted small"},Ute=["onClick"],jte={class:"arrival-times d-flex flex-wrap gap-2"},Wte={class:"first-crowd d-flex gap-3 small text-muted"},Hte={class:"col-lg-6","data-aos":"fade-up","data-aos-delay":"350"},Gte={class:"section-card h-100"},qte={class:"list-unstyled mb-0"},Kte="https://corsproxy.io/?",H5={__name:"Dashboard",setup(e){const t=lF({updateIntervalMs:1e3}),n=it(!1),i=it(!1),r=it(!0),a=it(!1),l=it(1),h=it(0),s=it(0),p=it(!1),v=it({x:0,y:0}),x=it(null),T=it(null),C=UA(),I=it(null),P=it({x:0,y:0}),D=it(null),F=it([]),V=it("Never");function H(_e){if(_e.line)return _e.line;const fe=d0[_e.station];return!fe||!fe.length?null:fe[0]}function q(_e,fe){const Fe=Sv[_e];if(Fe)return Fe[fe]}const K=oo({index:0,station:Gx[0],arrivals:[],lineColor:uh(Gx[0].line)}),ie=it("--:--:--"),X=it(null),$=it(null),{state:G,setActiveTab:j,removeFavorite:te}=Zv(),Z=me(()=>G.favorites);function ee(_e){return _e<=0?"Arriving":`${Math.round(_e)} min`}async function be(){const _e=await Promise.all(Z.value.map(async fe=>{const Fe=H(fe);if(!Fe)return fe;const pt=(t.getArrivals()[fe.station]||{})[Fe]||[],vt=Nt[Fe];let gt=vt?await Ie(vt):null,mt="NA";if(gt!=null&&gt.length){const Vt=q(fe.station,Fe),Gt=gt.find(gn=>gn.stationCode===Vt);Gt&&(mt=Gt.crowdLevel)}return{...fe,line:Fe,arrivals:pt.slice(0,3),firstTrainTime:kt[Fe]||"N/A",lastTrainTime:"",crowdLevel:mt}}));G.favorites=_e}async function Ie(_e){try{const fe=Kte+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${_e}`),Fe=await fetch(fe,{method:"GET",headers:{AccountKey:Hk,accept:"application/json"}});if(!Fe.ok)return null;const rt=await Fe.json();return!rt.value||!Array.isArray(rt.value)?null:rt.value.map(pt=>({stationCode:pt.Station,crowdLevel:pt.CrowdLevel}))}catch(fe){return console.error("Error fetching crowd data:",fe),null}}async function Ve(){const _e=t.getArrivals()[K.station.station]||{};F.value=Object.entries(_e).map(([fe,Fe])=>({name:fe,times:Fe})),V.value=new Date().toLocaleTimeString()}function Ke(_e=!1){_e||(K.index=(K.index+1)%Gx.length),K.station=Gx[K.index],K.lineColor=uh(K.station.line);let fe=t.getStationArrivals(K.station.station);K.arrivals=((fe==null?void 0:fe[K.station.line])||[]).slice(0,3),n.value=!1,document.querySelector(".live-ticker-card").offsetWidth,n.value=!0}function Xe(){const _e=new Date;ie.value=_e.toLocaleTimeString(void 0,{hour12:!1})}const Pe=_e=>{if(_e&&r.value){const fe=_e.target.getBoundingClientRect();P.value={x:_e.clientX-fe.left,y:_e.clientY-fe.top}}i.value=!0,a.value=!0,l.value=1,h.value=0,s.value=0,r.value?setTimeout(()=>{a.value=!1,r.value=!1},1e3):a.value=!1},$e=()=>{i.value=!1,a.value=!1,l.value=1,h.value=0,s.value=0},Ee=_e=>{l.value+=_e.deltaY<0?.1:-.1,l.value=Math.min(Math.max(l.value,1),4)},We=_e=>{p.value=!0,v.value={x:_e.clientX-h.value,y:_e.clientY-s.value}},Ze=_e=>{p.value&&(h.value=_e.clientX-v.value.x,s.value=_e.clientY-v.value.y)},ct=()=>{p.value=!1},kt={"North-South Line":"5:30 AM","East-West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},Nt={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},ot=_e=>{if(_e.touches.length===2){const fe=_e.touches[0].clientX-_e.touches[1].clientX,Fe=_e.touches[0].clientY-_e.touches[1].clientY;x.value=Math.sqrt(fe*fe+Fe*Fe)}else _e.touches.length===1&&(p.value=!0,v.value={x:_e.touches[0].clientX-h.value,y:_e.touches[0].clientY-s.value})},dt=_e=>{if(_e.touches.length===2){const fe=_e.touches[0].clientX-_e.touches[1].clientX,Fe=_e.touches[0].clientY-_e.touches[1].clientY,rt=Math.sqrt(fe*fe+Fe*Fe);if(x.value){const pt=rt-x.value;l.value+=pt*.005,l.value=Math.min(Math.max(l.value,1),4)}x.value=rt}else _e.touches.length===1&&p.value&&(h.value=_e.touches[0].clientX-v.value.x,s.value=_e.touches[0].clientY-v.value.y)},Je=()=>{x.value=null,p.value=!1},yt=me(()=>({transform:`translate(${h.value}px, ${s.value}px) scale(${l.value})`,transition:p.value?"none":"transform 0.1s ease-out"})),Ne=async _e=>{var fe;try{if(!((fe=T.value)!=null&&fe.uid))return;te(_e);const Fe=G.favorites.map(rt=>({...rt}));await qT(Dp(Rp,"users",T.value.uid),{favorite_stations:Fe}),console.log("Favorite removed successfully.")}catch(Fe){console.error("Error removing favorite:",Fe)}};function le(_e){return{l:"Low",m:"Moderate",h:"High"}[_e]||"Unknown"}function we(_e){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[_e]||""}return KF(C,_e=>{T.value=_e,_e?console.log("User logged in:",_e.email):(G.favorites=[],console.log("User logged out  cleared favorites"))}),Dr(()=>{t.start(),Ke(!0),Xe(),Ve(),be(),X.value=setInterval(()=>Ke(!1),$q),$.value=setInterval(Xe,1e3),D.value=setInterval(()=>{Ve(),be()},3e4)}),jr(()=>{t.stop(),X.value&&clearInterval(X.value),$.value&&clearInterval($.value),D.value&&clearInterval(D.value)}),(_e,fe)=>{var Fe,rt;return Kt(),an("section",bte,[fe[36]||(fe[36]=B("div",{class:"video-background"},[B("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"bg-video"},[B("source",{src:r6,type:"video/mp4"})]),B("div",{class:"video-overlay"})],-1)),B("div",xte,[B("div",wte,[fe[11]||(fe[11]=B("h1",{class:"mb-3"},"Singapores MRT companion",-1)),fe[12]||(fe[12]=B("p",null," Plan, monitor, and optimise every MRT journey with live arrivals, disruption-aware routing, fare insights, and collaborative meet-up tools  all in one polished interface. ",-1)),B("div",Tte,[B("button",{class:"btn btn-primary px-4 py-3 hover-float",onClick:fe[0]||(fe[0]=pt=>Ti(j)("live"))},[...fe[9]||(fe[9]=[B("span",{class:"material-icons me-2"},"tram",-1),zn(" Live Tracker ",-1)])]),B("button",{class:"btn btn-outline-danger px-4 py-3 hover-float",onClick:fe[1]||(fe[1]=pt=>Ti(j)("route"))},[...fe[10]||(fe[10]=[B("span",{class:"material-icons me-2"},"alt_route",-1),zn(" Plan a Route ",-1)])])])]),B("div",Ste,[B("img",{src:vR,alt:"SingaTrain map illustration",class:"img-fluid rounded-4 shadow map-preview",role:"button",onClick:Pe}),ue(Ol,{name:"map-fullscreen"},{default:yi(()=>[i.value?(Kt(),an("div",{key:0,class:Tt(["mrt-map-fullscreen",{"first-open":r.value,animating:a.value}]),onClick:sa($e,["self"])},[B("button",{class:"close-map-btn",onClick:$e},[...fe[13]||(fe[13]=[B("span",{class:"material-icons"},"close",-1)])]),B("div",{class:"zoom-container",onWheel:sa(Ee,["prevent"]),onMousedown:We,onMouseup:ct,onMouseleave:ct,onMousemove:Ze,onTouchstart:ot,onTouchmove:sa(dt,["prevent"]),onTouchend:Je},[B("img",{ref_key:"mapImage",ref:I,src:vR,alt:"Interactive MRT Map",class:Tt(["zoomable-map",{"first-open-animate":r.value}]),style:Yt(yt.value)},null,6)],32),r.value?(Kt(),an("div",Ete,[...fe[14]||(fe[14]=[B("div",{class:"highlight-pulse"},null,-1)])])):Si("",!0)],2)):Si("",!0)]),_:1})])]),B("div",Cte,[(Kt(),an("div",{class:Tt(["live-ticker-card w-100",{cycle:n.value}]),key:K.station.station,style:Yt({borderColor:K.lineColor})},[B("div",null,[fe[16]||(fe[16]=B("div",{class:"ticker-label text-uppercase fw-semibold"},"Next arrivals",-1)),B("div",kte,[fe[15]||(fe[15]=B("span",{class:"material-icons text-danger"},"ev_station",-1)),B("span",null,tn((Fe=K.station)==null?void 0:Fe.station),1)]),B("div",Ite,[B("span",{class:"material-icons",style:Yt({color:K.lineColor})},"timeline",4),zn(" "+tn((rt=K.station)==null?void 0:rt.line),1)])]),B("div",Ate,[B("span",null,tn(ie.value),1)]),B("div",Pte,[(Kt(!0),an(ln,null,us(K.arrivals,(pt,vt)=>(Kt(),an("span",{key:vt,class:"ticker-pill",style:Yt({borderColor:K.lineColor,color:K.lineColor})},[fe[17]||(fe[17]=B("span",{class:"material-icons"},"train",-1)),zn(" "+tn(ee(pt)),1)],4))),128)),K.arrivals.length?Si("",!0):(Kt(),an("span",Mte,"Fetching arrivals"))])],6))]),B("div",Dte,[B("div",Lte,[B("div",Rte,[fe[30]||(fe[30]=B("h2",{class:"section-title mb-3 fw-semibold"},"Personalised commute",-1)),B("p",Ote,[fe[18]||(fe[18]=zn(" Your favourite stations are here in your dashboard quick access. Add more from ",-1)),B("a",{href:"#",class:"interactive-link fw-semibold",onClick:fe[2]||(fe[2]=sa(pt=>Ti(j)("live"),["prevent"]))}," Live Tracker"),fe[19]||(fe[19]=zn(" or ",-1)),B("a",{href:"#",class:"interactive-link fw-semibold",onClick:fe[3]||(fe[3]=sa(pt=>Ti(j)("profile"),["prevent"]))}," Profile"),fe[20]||(fe[20]=zn(" to see them here. ",-1))]),B("ul",Vte,[Z.value.length?Si("",!0):(Kt(),an("li",Bte,[fe[21]||(fe[21]=B("span",{class:"material-icons align-middle"},"star_border",-1)),fe[22]||(fe[22]=zn(" Add favourites from ",-1)),B("a",{href:"#",class:"interactive-link fw-semibold",onClick:fe[4]||(fe[4]=sa(pt=>Ti(j)("live"),["prevent"]))}," Live Tracker"),fe[23]||(fe[23]=zn(" or ",-1)),B("a",{href:"#",class:"interactive-link fw-semibold",onClick:fe[5]||(fe[5]=sa(pt=>Ti(j)("profile"),["prevent"]))}," Profile"),fe[24]||(fe[24]=zn(" to see them here. ",-1))])),(Kt(!0),an(ln,null,us(Z.value,pt=>(Kt(),an("li",{key:pt.station,class:"favorite-card d-flex flex-column flex-md-row align-items-center gap-3 p-3 rounded-3 shadow-sm"},[B("div",{class:"line-color-indicator",style:Yt({backgroundColor:Ti(uh)(pt.line)})},null,4),B("div",Fte,[B("div",zte,[B("div",null,[B("strong",Nte,tn(pt.label),1),B("div",$te,tn(pt.station),1)]),B("button",{class:"btn btn-sm btn-outline-danger",onClick:vt=>Ne(pt)},[...fe[25]||(fe[25]=[B("span",{class:"material-icons"},"close",-1)])],8,Ute)]),B("div",jte,[(Kt(!0),an(ln,null,us(pt.arrivals,(vt,gt)=>(Kt(),an("span",{key:gt,class:"arrival-pill",style:Yt({borderColor:Ti(uh)(pt.line),color:Ti(uh)(pt.line)})},[fe[26]||(fe[26]=B("span",{class:"material-icons"},"train",-1)),zn(" "+tn(ee(vt)),1)],4))),128))]),B("div",Wte,[B("div",null,[fe[27]||(fe[27]=B("span",{class:"material-icons",style:{"font-size":"16px"}},"schedule",-1)),zn(" First Train: "+tn(pt.firstTrainTime),1)]),B("div",null,[fe[28]||(fe[28]=B("span",{class:"material-icons",style:{"font-size":"16px"}},"people",-1)),fe[29]||(fe[29]=zn(" Crowd: ",-1)),B("span",{class:Tt(["crowd-badge",we(pt.crowdLevel)])},tn(le(pt.crowdLevel)),3)])])])]))),128))])])]),B("div",Hte,[B("div",Gte,[fe[34]||(fe[34]=B("h2",{class:"section-title mb-3"},"Explore Our Features",-1)),fe[35]||(fe[35]=B("p",{class:"tab-desc"}," Discover tools and insights to plan smarter, check fares, and find the best meeting points on our website. ",-1)),B("ul",qte,[B("li",{class:"feature-item py-2 border-bottom",onClick:fe[6]||(fe[6]=pt=>Ti(j)("route"))},[...fe[31]||(fe[31]=[B("div",{class:"d-flex align-items-center gap-3",role:"button"},[B("span",{class:"material-icons text-primary"},"flash_on"),B("div",null,[B("div",{class:"fw-semibold feature-title"},"Dynamic Route Visualiser"),B("div",{class:"tab-desc small"},"Visualise your journey with transfer-aware walking times on an interactive map.")])],-1)])]),B("li",{class:"feature-item py-2 border-bottom",onClick:fe[7]||(fe[7]=pt=>Ti(j)("fare"))},[...fe[32]||(fe[32]=[B("div",{class:"d-flex align-items-center gap-3",role:"button"},[B("span",{class:"material-icons text-success"},"insights"),B("div",null,[B("div",{class:"fw-semibold feature-title"},"Fare Insights"),B("div",{class:"tab-desc small"},"See distance-based fares and monthly pass break-even points for smarter travel.")])],-1)])]),B("li",{class:"feature-item py-2",onClick:fe[8]||(fe[8]=pt=>Ti(j)("meetup"))},[...fe[33]||(fe[33]=[B("div",{class:"d-flex align-items-center gap-3",role:"button"},[B("span",{class:"material-icons text-warning"},"diversity_3"),B("div",null,[B("div",{class:"fw-semibold feature-title"},"Meet Halfway"),B("div",{class:"tab-desc small"},"Find the fairest interchange point for your group in seconds.")])],-1)])])])])])])])}}};async function Xte(e,t){if(!e)throw new Error("No user UID provided");const n=Dp(Rp,"users",e);await qT(n,{favorite_stations:MN(t)})}const Yte={class:"section-card"},Zte={class:"row g-3 mb-4"},Jte={class:"col-md-6"},Qte=["value"],ene={class:"col-md-6"},tne=["value"],nne={key:0,class:"mb-4"},ine={class:"d-flex justify-content-between align-items-start"},rne={class:"mb-0 mt-1"},sne={class:"badge bg-warning text-dark"},one={class:"live-tools mb-4"},ane={class:"ticker-station d-flex align-items-center gap-2"},lne={class:"ticker-line mt-1"},cne={class:"material-icons"},une={class:"ticker-times"},dne={key:0,class:"small"},hne={class:"mb-4"},fne={class:"mb-3"},mne={key:0,class:"spinner-border spinner-border-sm ms-2",role:"status"},pne={class:"arrival-details flex-grow-1"},gne={class:"d-flex justify-content-between align-items-center mb-2"},vne={class:"d-flex justify-content-between align-items-center"},_ne={class:"d-flex align-items-center gap-2"},yne={class:"d-flex align-items-center justify-content-center gap-2"},bne={class:"text-center"},G5="https://corsproxy.io/?",xne="https://datamall2.mytransport.sg/ltaodataservice/TrainServiceAlerts",wne={__name:"LiveTracker",setup(e){const t=UA(),n=lF({updateIntervalMs:1e3}),i=it(null),r=it([]),a=it(!1),l=it(!1),h=it("Never"),s={"North South Line":"5:30 AM","East West Line":"5:31 AM","Circle Line":"5:32 AM","North East Line":"5:42 AM","Downtown Line":"5:33 AM","Thomson-East Coast Line":"5:30 AM"},p={"East-West Line":"EWL","North-South Line":"NSL","Circle Line":"CCL","Downtown Line":"DTL","North-East Line":"NEL","Thomson-East Coast Line":"TEL","Bukit Panjang LRT":"BPL","Sengkang LRT":"SLRT","Punggol LRT":"PLRT","Circle Line Extension":"CEL","Changi Extension":"CGL"},v=Object.keys(d0),x=it(v[0]),T=it(d0[x.value][0]),C=it([]);Zv(),it(""),it("");const I=it({type:"",text:""}),{addFavorite:P}=Zv(),D=me(()=>d0[x.value]||[]),F=me(()=>{const Ie=C.value.find(Ve=>Ve.name===T.value);return Ie?Ie.times:[]}),V=me(()=>uh(T.value)),H=me(()=>{const Ie=F.value[0]??1/0;return Ie<=60?"Arriving":Ie<=240?"On Time":Ie<=420?"Slight delay":"Delayed"}),q=me(()=>{switch(H.value){case"Arriving":return"status-arriving";case"On Time":return"status-on-time";case"Slight delay":return"status-departing";default:return"status-delayed"}}),K=me(()=>{switch(H.value){case"Arriving":return"directions_subway";case"On Time":return"check_circle";case"Slight delay":return"schedule";default:return"error"}});function ie(Ie){return Ie<=0?"Arriving":Ie<60?"<1 min":`${Math.ceil(Ie/60)} min`}function X(Ie){return{l:"Low",m:"Moderate",h:"High"}[Ie]||"Unknown (Data Unavailable)"}function $(Ie){return{l:"crowd-low",m:"crowd-moderate",h:"crowd-high"}[Ie]||""}function G(Ie,Ve){const Ke=Sv[Ie];if(Ke)return Ke[Ve]}async function j(Ie){try{const Ve=G5+encodeURIComponent(`https://datamall2.mytransport.sg/ltaodataservice/PCDRealTime?TrainLine=${Ie}`),Ke=await fetch(Ve,{method:"GET",headers:{AccountKey:Hk,accept:"application/json"}});if(!Ke.ok)return null;const Xe=await Ke.json();return!Xe.value||!Array.isArray(Xe.value)?null:Xe.value.map(Pe=>({stationCode:Pe.Station,crowdLevel:Pe.CrowdLevel}))}catch(Ve){return console.error("Error fetching crowd data:",Ve),null}}async function te(){try{const Ie=await fetch(G5+encodeURIComponent(xne),{method:"GET",headers:{AccountKey:Hk,Accept:"application/json"}});if(!Ie.ok){console.warn(`Service Alerts API returned ${Ie.status} ${Ie.statusText}`),l.value=!0,r.value.length===0&&(r.value=[{AffectedSegments:"DataMall Service",Message:"Unable to fetch live alerts (API temporary error)",Status:"Unavailable"}]);return}const Ve=await Ie.json();Ve!=null&&Ve.value&&Array.isArray(Ve.value)?r.value=Ve.value.filter(Ke=>Ke.Status!=="Normal"&&Ke.Status!=="Cleared"):r.value=[],l.value=!1,h.value=new Date().toLocaleTimeString()}catch(Ie){console.error("Error fetching service alerts:",Ie),l.value=!0,r.value.length===0&&(r.value=[{AffectedSegments:"Train Network",Message:"Unable to retrieve live alerts (network issue)",Status:"Error"}])}}async function Z(){a.value=!0;const Ie=n.getArrivals({returnSeconds:!0})[x.value]||{},Ve=p[T.value];let Ke=null;Ve&&(Ke=await j(Ve));let Xe="NA";const Pe=G(x.value,T.value);if(console.log("Selected Station:",x.value),console.log("Mapped Station Code:",Pe),console.log("Real Crowd Data:",Ke),Ke&&Ke.length){Ke.forEach(Ee=>{console.log("Crowd data stationCode:",Ee.stationCode,"crowdLevel:",Ee.crowdLevel)});const $e=Ke.find(Ee=>Ee.stationCode===Pe);console.log("Matched station data:",$e),$e?Xe=$e.crowdLevel:console.warn("No matching station found in realCrowdData for",Pe)}C.value=Object.entries(Ie).filter(([$e])=>$e===T.value).map(([$e,Ee])=>({name:$e,times:Ee,progress:Ee.length?Math.max(0,1-Math.min(Ee[0],600)/600):0,firstTrainTime:s[$e]||"5:30 AM",crowdLevel:Xe})),await te(),a.value=!1}function ee(Ie,Ve){I.value={type:Ie,text:Ve},setTimeout(()=>I.value={type:"",text:""},3e3)}async function be(){const Ie={station:x.value,label:`${x.value}  ${T.value}`};P(Ie);try{const Ve=t.currentUser;Ve!=null&&Ve.uid?(await Xte(Ve.uid,Ie),ee("success","Successfully added new station.")):ee("error","Please log in to sync favorites.")}catch(Ve){console.error("Add favorite error:",Ve),ee("error","Failed to add favorite.")}}return Zt(x,()=>{const Ie=D.value;Ie.length&&!Ie.includes(T.value)&&(T.value=Ie[0]),Z()}),Zt(T,Z),Dr(()=>{n.start(),Z(),i.value=setInterval(Z,3e4)}),jr(()=>{n.stop(),i.value&&clearInterval(i.value)}),(Ie,Ve)=>(Kt(),an("section",Yte,[ue(Ol,{name:"fade"},{default:yi(()=>[I.value.text?(Kt(),an("div",{key:0,class:Tt(["alert",I.value.type==="success"?"alert-success":"alert-danger","position-fixed","top-0","end-0","m-3","z-index-1050"])},tn(I.value.text),3)):Si("",!0)]),_:1}),B("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[Ve[4]||(Ve[4]=B("div",null,[B("h2",{class:"section-title mb-1"},"Live Train Tracker"),B("p",{class:"mb-0"}," Real-time train service alerts and simulated arrivals. Switch stations to monitor your regular journeys. ")],-1)),B("div",{class:"d-flex gap-2"},[B("button",{class:"btn btn-outline-danger hover-float",onClick:Z},[...Ve[2]||(Ve[2]=[B("span",{class:"material-icons me-1"},"refresh",-1),zn(" Refresh ",-1)])]),B("button",{class:"btn btn-primary hover-float",onClick:be},[...Ve[3]||(Ve[3]=[B("span",{class:"material-icons me-1"},"star",-1),zn(" Add Favourite ",-1)])])])]),B("div",Zte,[B("div",Jte,[Ve[5]||(Ve[5]=B("label",{class:"form-label"},"Station",-1)),Oi(B("select",{"onUpdate:modelValue":Ve[0]||(Ve[0]=Ke=>x.value=Ke),class:"form-select"},[(Kt(!0),an(ln,null,us(Ti(v),Ke=>(Kt(),an("option",{key:Ke,value:Ke},tn(Ke),9,Qte))),128))],512),[[M0,x.value]])]),B("div",ene,[Ve[6]||(Ve[6]=B("label",{class:"form-label"},"Line",-1)),Oi(B("select",{"onUpdate:modelValue":Ve[1]||(Ve[1]=Ke=>T.value=Ke),class:"form-select"},[(Kt(!0),an(ln,null,us(D.value,Ke=>(Kt(),an("option",{key:Ke,value:Ke},tn(Ke),9,tne))),128))],512),[[M0,T.value]])])]),r.value.length>0?(Kt(),an("div",nne,[Ve[7]||(Ve[7]=B("h5",{class:"mb-3 d-flex align-items-center gap-2"},[B("span",{class:"material-icons text-warning"},"warning"),zn(" Service Alerts ")],-1)),(Kt(!0),an(ln,null,us(r.value,(Ke,Xe)=>(Kt(),an("div",{key:Xe,class:"alert alert-warning mb-2"},[B("div",ine,[B("div",null,[B("strong",null,tn(Ke.AffectedSegments),1),B("p",rne,tn(Ke.Message),1)]),B("span",sne,tn(Ke.Status),1)])]))),128))])):Si("",!0),B("div",one,[B("div",{class:"live-ticker-card w-100",style:Yt({borderColor:V.value})},[B("div",null,[Ve[9]||(Ve[9]=B("div",{class:"ticker-label"},"Monitoring",-1)),B("div",ane,[Ve[8]||(Ve[8]=B("span",{class:"material-icons text-danger"},"location_on",-1)),B("span",null,tn(x.value),1)]),B("div",lne,[B("span",{class:"material-icons",style:Yt({color:V.value})},"timeline",4),zn(" "+tn(T.value),1)])]),B("div",null,[Ve[10]||(Ve[10]=B("div",{class:"small text-uppercase fw-semibold mb-1"},"Status",-1)),B("span",{class:Tt(["status-pill",q.value])},[B("span",cne,tn(K.value),1),zn(" "+tn(H.value),1)],2)]),B("div",une,[(Kt(!0),an(ln,null,us(F.value,(Ke,Xe)=>(Kt(),an("span",{key:Xe,class:"ticker-pill",style:Yt({borderColor:V.value,color:V.value})},[Ve[11]||(Ve[11]=B("span",{class:"material-icons"},"train",-1)),zn(" "+tn(ie(Ke)),1)],4))),128)),F.value.length?Si("",!0):(Kt(),an("span",dne,"Awaiting updates"))])],4)]),B("div",hne,[B("h5",fne,[zn(" First Train & Crowd Level at "+tn(x.value)+" ",1),a.value?(Kt(),an("span",mne,[...Ve[12]||(Ve[12]=[B("span",{class:"visually-hidden"},"Loading...",-1)])])):Si("",!0)]),(Kt(!0),an(ln,null,us(C.value,Ke=>(Kt(),an("div",{key:Ke.name,class:"arrival-row"},[B("div",{class:"train-icon",style:Yt({color:Ti(uh)(Ke.name)})},[...Ve[13]||(Ve[13]=[B("span",{class:"material-icons"},"subway",-1)])],4),B("div",pne,[B("div",gne,[B("strong",null,tn(Ke.name),1)]),B("div",vne,[B("div",_ne,[Ve[14]||(Ve[14]=B("span",{class:"material-icons",style:{"font-size":"18px"}},"schedule",-1)),Ve[15]||(Ve[15]=B("span",{class:"small"},"First Train:",-1)),B("strong",null,tn(Ke.firstTrainTime),1)]),B("div",yne,[Ve[16]||(Ve[16]=B("span",{class:"material-icons",style:{"font-size":"18px"}},"people",-1)),Ve[17]||(Ve[17]=B("span",{class:"small"},"Crowd:",-1)),B("span",{class:Tt(["crowd-badge",$(Ke.crowdLevel)])},tn(X(Ke.crowdLevel)),3)])])])]))),128))]),B("div",bne,[B("small",null," Last updated: "+tn(h.value),1)])]))}};var z1={exports:{}},Tne=z1.exports,q5;function Sne(){return q5||(q5=1,(function(e,t){var n={};(function(i,r){e.exports=r()})(Tne,(function(){var i,r,a;function l(s,p){if(!i)i=p;else if(!r)r=p;else{var v="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",x={};i(x),a=p(x),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([v],{type:"text/javascript"})))}}l(["exports"],(function(s){var p=typeof self<"u"?self:{},v="2.15.0";let x;const T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(x==null){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{x=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):c}catch{x=c}}return x},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!T.API_URL)return null;try{const c=new URL(T.API_URL);return c.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":c.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},C={supported:!1,testSupport:function(c){!D&&P&&(F?V(c):I=c)}};let I,P,D=!1,F=!1;function V(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,P),c.isContextLost())return;C.supported=!0}catch{}c.deleteTexture(o),D=!0}p.document&&(P=p.document.createElement("img"),P.onload=function(){I&&V(I),I=null,F=!0},P.onerror=function(){D=!0,I=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const H="01";function q(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var K=ie;function ie(c,o,d,f){this.cx=3*c,this.bx=3*(d-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=d,this.p2y=f}ie.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var d=c,f=0;f<8;f++){var g=this.sampleCurveX(d)-c;if(Math.abs(g)<o)return d;var b=this.sampleCurveDerivativeX(d);if(Math.abs(b)<1e-6)break;d-=g/b}var w=0,E=1;for(d=c,f=0;f<20&&(g=this.sampleCurveX(d),!(Math.abs(g-c)<o));f++)c>g?w=d:E=d,d=.5*(E-w)+w;return d},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var X=q(K),$=G;function G(c,o){this.x=c,this.y=o}G.prototype={clone:function(){return new G(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,d=c.y-this.y;return o*o+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),d=Math.sin(c),f=d*this.x+o*this.y;return this.x=o*this.x-d*this.y,this.y=f,this},_rotateAround:function(c,o){var d=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+d*(this.y-o.y);return this.x=o.x+d*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},G.convert=function(c){return c instanceof G?c:Array.isArray(c)?new G(c[0],c[1]):c};var j=q($);const te=Math.PI/180,Z=180/Math.PI;function ee(c){return c*te}function be(c){return c*Z}const Ie=[[0,0],[1,0],[1,1],[0,1]];function Ve(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,d=o*c;return 4*(c<.5?d:3*(c-o)+d-.75)}function Ke(c,o,d,f){const g=new X(c,o,d,f);return function(b){return g.solve(b)}}const Xe=Ke(.25,.1,.25,1);function Pe(c,o,d){return Math.min(d,Math.max(o,c))}function $e(c,o,d){return(d=Pe((d-c)/(o-c),0,1))*d*(3-2*d)}function Ee(c,o,d){const f=d-o,g=((c-o)%f+f)%f+o;return g===o?d:g}function We(c,o,d){if(!c.length)return d(null,[]);let f=c.length;const g=new Array(c.length);let b=null;c.forEach(((w,E)=>{o(w,((A,L)=>{A&&(b=A),g[E]=L,--f==0&&d(b,g)}))}))}function Ze(c){const o=[];for(const d in c)o.push(c[d]);return o}function ct(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}let kt=1;function Nt(){return kt++}function ot(){return(function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)})()}function dt(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function Je(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function yt(c,o){c.forEach((d=>{o[d]&&(o[d]=o[d].bind(o))}))}function Ne(c,o){return c.indexOf(o,c.length-o.length)!==-1}function le(c,o,d){const f={};for(const g in c)f[g]=o.call(this,c[g],g,c);return f}function we(c,o,d){const f={};for(const g in c)o.call(d||this,c[g],g,c)&&(f[g]=c[g]);return f}function _e(c){return Array.isArray(c)?c.map(_e):typeof c=="object"&&c?le(c,_e):c}const fe={};function Fe(c){fe[c]||(typeof console<"u"&&console.warn(c),fe[c]=!0)}function rt(c,o,d){return(d.y-c.y)*(o.x-c.x)>(o.y-c.y)*(d.x-c.x)}function pt(c){let o=0;for(let d,f,g=0,b=c.length,w=b-1;g<b;w=g++)d=c[g],f=c[w],o+=(f.x-d.x)*(d.y+f.y);return o}function vt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function gt(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((d,f,g,b)=>{const w=g||b;return o[f]=!w||w.toLowerCase(),""})),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o}let mt=null;function Vt(c){if(mt==null){const o=c.navigator?c.navigator.userAgent:null;mt=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return mt}function Gt(c){try{const o=p[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function gn(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}const In="mapbox-tiles";let On=500,qn=50,zt,un;function An(){try{return p.caches}catch{}}function Ln(){An()&&!zt&&(zt=p.caches.open(In))}function wi(c){const o=c.indexOf("?");if(o<0)return c;const d=(function(g){const b=g.indexOf("?");return b>0?g.slice(b+1).split("&"):[]})(c),f=d.filter((g=>{const b=g.split("=");return b[0]==="language"||b[0]==="worldview"}));return f.length?`${c.slice(0,o)}?${f.join("&")}`:c.slice(0,o)}let hi=1/0;const fs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(fs);class Ji extends Error{constructor(o,d,f){d===401&&wt(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=d,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Tr=vt()?()=>self.worker&&self.worker.referrer:()=>(p.location.protocol==="blob:"?p.parent:p).location.href,Wo=function(c,o){if(!(/^file:/.test(d=c.url)||/^file:/.test(Tr())&&!/^\w+:/.test(d))){if(p.fetch&&p.Request&&p.AbortController&&p.Request.prototype.hasOwnProperty("signal"))return(function(f,g){const b=new p.AbortController,w=new p.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:Tr(),referrerPolicy:f.referrerPolicy,signal:b.signal});let E=!1,A=!1;const L=(N=w.url).indexOf("sku=")>0&&wt(N);var N;f.type==="json"&&w.headers.set("Accept","application/json");const W=(re,oe,he)=>{if(A)return;if(re&&re.message!=="SecurityError"&&Fe(re.toString()),oe&&he)return Q(oe);const Ce=Date.now();p.fetch(w).then((Oe=>{if(Oe.ok){const qe=L?Oe.clone():null;return Q(Oe,qe,Ce)}return g(new Ji(Oe.statusText,Oe.status,f.url))})).catch((Oe=>{Oe.name!=="AbortError"&&g(new Error(`${Oe.message} ${f.url}`))}))},Q=(re,oe,he)=>{(f.type==="arrayBuffer"?re.arrayBuffer():f.type==="json"?re.json():re.text()).then((Ce=>{A||(oe&&he&&(function(Oe,qe,Be){if(Ln(),!zt)return;const je={status:qe.status,statusText:qe.statusText,headers:new p.Headers};qe.headers.forEach(((Ct,St)=>je.headers.set(St,Ct)));const nt=gt(qe.headers.get("Cache-Control")||"");if(nt["no-store"])return;nt["max-age"]&&je.headers.set("Expires",new Date(Be+1e3*nt["max-age"]).toUTCString());const tt=je.headers.get("Expires");tt&&(new Date(tt).getTime()-Be<42e4||(function(Ct,St){if(un===void 0)try{new Response(new ReadableStream),un=!0}catch{un=!1}un?St(Ct.body):Ct.blob().then(St)})(qe,(Ct=>{const St=new p.Response(Ct,je);Ln(),zt&&zt.then(($t=>$t.put(wi(Oe.url),St))).catch(($t=>Fe($t.message)))})))})(w,oe,he),E=!0,g(null,Ce,re.headers.get("Cache-Control"),re.headers.get("Expires")))})).catch((Ce=>{A||g(new Error(Ce.message))}))};return L?(function(re,oe){if(Ln(),!zt)return oe(null);const he=wi(re.url);zt.then((Ce=>{Ce.match(he).then((Oe=>{const qe=(function(Be){if(!Be)return!1;const je=new Date(Be.headers.get("Expires")||0),nt=gt(Be.headers.get("Cache-Control")||"");return je>Date.now()&&!nt["no-cache"]})(Oe);Ce.delete(he),qe&&Ce.put(he,Oe.clone()),oe(null,Oe,qe)})).catch(oe)})).catch(oe)})(w,W):W(null,null),{cancel:()=>{A=!0,E||b.abort()}}})(c,o);if(vt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var d;return(function(f,g){const b=new p.XMLHttpRequest;b.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(b.responseType="arraybuffer");for(const w in f.headers)b.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=f.credentials==="include",b.onerror=()=>{g(new Error(b.statusText))},b.onload=()=>{if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let w=b.response;if(f.type==="json")try{w=JSON.parse(b.response)}catch(E){return g(E)}g(null,w,b.getResponseHeader("Cache-Control"),b.getResponseHeader("Expires"))}else g(new Ji(b.statusText,b.status,f.url))},b.send(f.body),{cancel:()=>b.abort()}})(c,o)},Eo=function(c,o){return Wo(ct(c,{type:"arrayBuffer"}),o)};function Uc(c){const o=p.document.createElement("a");return o.href=c,o.protocol===p.document.location.protocol&&o.host===p.document.location.host}const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ge,ye;ge=[],ye=0;const ze=function(c,o){if(C.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),ye>=T.MAX_PARALLEL_IMAGE_REQUESTS){const b={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return ge.push(b),b}ye++;let d=!1;const f=()=>{if(!d)for(d=!0,ye--;ge.length&&ye<T.MAX_PARALLEL_IMAGE_REQUESTS;){const b=ge.shift(),{requestParameters:w,callback:E,cancelled:A}=b;A||(b.cancel=ze(w,E).cancel)}},g=Eo(c,((b,w,E,A)=>{f(),b?o(b):w&&(p.createImageBitmap?(function(L,N){const W=new p.Blob([new Uint8Array(L)],{type:"image/png"});p.createImageBitmap(W).then((Q=>{N(null,Q)})).catch((Q=>{N(new Error(`Could not load image because of ${Q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((L,N)=>o(L,N,E,A))):(function(L,N){const W=new p.Image,Q=p.URL;W.onload=()=>{N(null,W),Q.revokeObjectURL(W.src),W.onload=null,p.requestAnimationFrame((()=>{W.src=Ue}))},W.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const re=new p.Blob([new Uint8Array(L)],{type:"image/png"});W.src=L.byteLength?Q.createObjectURL(re):Ue})(w,((L,N)=>o(L,N,E,A))))}));return{cancel:()=>{g.cancel(),f()}}},Qe="NO_ACCESS_TOKEN";function at(c){return c.indexOf("mapbox:")===0}function wt(c){return T.API_URL_REGEX.test(c)}function bt(c){return T.API_CDN_URL_REGEX.test(c)}function st(c){return T.API_STYLE_REGEX.test(c)&&!Pt(c)}function Pt(c){return T.API_SPRITE_REGEX.test(c)}const rn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function fn(c){const o=c.match(rn);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function sn(c){const o=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${o}`}const Yn="mapbox.eventData";function ei(c){if(!c)return null;const o=c.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(decodeURIComponent(p.atob(o[1]).split("").map((d=>"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class Wn{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const d=ei(T.ACCESS_TOKEN);let f="";return f=d&&d.u?p.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,((g,b)=>String.fromCharCode(+("0x"+b))))):T.ACCESS_TOKEN||"",o?`${Yn}.${o}:${f}`:`${Yn}:${f}`}fetchEventData(){const o=Gt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=p.localStorage.getItem(d);g&&(this.eventData=JSON.parse(g));const b=p.localStorage.getItem(f);b&&(this.anonId=b)}catch{Fe("Unable to read from LocalStorage")}}saveEventData(){const o=Gt("localStorage"),d=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{p.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&p.localStorage.setItem(d,JSON.stringify(this.eventData))}catch{Fe("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,d,f,g){if(!T.EVENTS_URL)return;const b=fn(T.EVENTS_URL);b.params.push(`access_token=${g||T.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(o).toISOString()},E=d?ct(w,d):w,A={url:sn(b),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=(function(L,N){return Wo(ct(L,{method:"POST"}),N)})(A,(L=>{this.pendingRequest=null,f(L),this.saveEventData(),this.processRequests(g)}))}queueRequest(o,d){this.queue.push(o),this.processRequests(d)}}const li=new class extends Wn{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,o){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(c)&&c.some((d=>at(d)||wt(d)))&&this.queueRequest(Date.now(),o)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=ei(T.ACCESS_TOKEN),d=o?o.u:T.ACCESS_TOKEN;let f=d!==this.eventData.tokenU;Je(this.anonId)||(this.anonId=ot(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const b=new Date(this.eventData.lastSuccess),w=new Date(g),E=(g-this.eventData.lastSuccess)/864e5;f=f||E>=1||E<-1||b.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:H,"enabled.telemetry":!1,userId:this.anonId},(b=>{b||(this.eventData.lastSuccess=g,this.eventData.tokenU=d)}),c):this.processRequests()}},Zn=li.postTurnstileEvent.bind(li),Vi=new class extends Wn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,o,d,f){this.skuToken=o,this.errorCb=f,T.EVENTS_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Qe)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Je(this.anonId)||(this.anonId=ot()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:v,skuId:H,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c))}},gr=Vi.postMapLoadEvent.bind(Vi),rs=new class extends Wn{constructor(){super("gljs.performance")}postPerformanceEvent(c,o){T.EVENTS_URL&&(c||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},c)}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:d}=this.queue.shift(),f=(function(g){const b=p.performance.getEntriesByType("resource"),w=p.performance.getEntriesByType("mark"),E=(function(Q){const re={};if(Q){for(const oe in Q)if(oe!=="other")for(const he of Q[oe]){const Ce=`${oe}ResolveRangeMin`,Oe=`${oe}ResolveRangeMax`,qe=`${oe}RequestCount`,Be=`${oe}RequestCachedCount`;re[Ce]=Math.min(re[Ce]||1/0,he.startTime),re[Oe]=Math.max(re[Oe]||-1/0,he.responseEnd);const je=nt=>{re[nt]===void 0&&(re[nt]=0),++re[nt]};he.transferSize!==void 0&&he.transferSize===0&&je(Be),je(qe)}}return re})((function(Q,re){const oe={};if(Q)for(const he of Q){const Ce=re(he);oe[Ce]===void 0&&(oe[Ce]=[]),oe[Ce].push(he)}return oe})(b,Ns)),A=p.devicePixelRatio,L=p.navigator.connection||p.navigator.mozConnection||p.navigator.webkitConnection,N={counters:[],metadata:[],attributes:[]},W=(Q,re,oe)=>{oe!=null&&Q.push({name:re,value:oe.toString()})};for(const Q in E)W(N.counters,Q,E[Q]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(W(N.counters,"interactionRangeMin",g.interactionRange[0]),W(N.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const Q of Object.keys(Gr)){const re=Gr[Q],oe=w.find((he=>he.name===re));oe&&W(N.counters,re,oe.startTime)}return W(N.counters,"visibilityHidden",g.visibilityHidden),W(N.attributes,"style",(function(Q){if(Q)for(const re of Q){const oe=re.name.split("?")[0];if(st(oe)){const he=oe.split("/").slice(-2);if(he.length===2)return`mapbox://styles/${he[0]}/${he[1]}`}}})(b)),W(N.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),W(N.attributes,"fogEnabled",g.fogEnabled?"true":"false"),W(N.attributes,"projection",g.projection),W(N.attributes,"zoom",g.zoom),W(N.metadata,"devicePixelRatio",A),W(N.metadata,"connectionEffectiveType",L?L.effectiveType:void 0),W(N.metadata,"navigatorUserAgent",p.navigator.userAgent),W(N.metadata,"screenWidth",p.screen.width),W(N.metadata,"screenHeight",p.screen.height),W(N.metadata,"windowWidth",p.innerWidth),W(N.metadata,"windowHeight",p.innerHeight),W(N.metadata,"mapWidth",g.width/A),W(N.metadata,"mapHeight",g.height/A),W(N.metadata,"webglRenderer",g.renderer),W(N.metadata,"webglVendor",g.vendor),W(N.metadata,"sdkVersion",v),W(N.metadata,"sdkIdentifier","mapbox-gl-js"),N})(d);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,(()=>{}),c)}},Sr=rs.postPerformanceEvent.bind(rs),Ho=new class extends Wn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,o,d,f){if(!T.API_URL||!T.SESSION_PATH)return;const g=fn(T.API_URL+T.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||T.ACCESS_TOKEN||""}`);const b={url:sn(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,E){return Wo(ct(w,{method:"GET"}),E)})(b,(w=>{this.pendingRequest=null,d(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(c,o,d,f){this.skuToken=o,this.errorCb=f,T.SESSION_PATH&&T.API_URL&&(d||T.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},d):this.errorCb(new Error(Qe)))}processRequests(c){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:d}=this.queue.shift();o&&this.success[o]||this.getSession(d,this.skuToken,(f=>{f?this.errorCb(f):o&&(this.success[o]=!0)}),c)}},ss=Ho.getSessionAPI.bind(Ho),Vr=new Set,Gr={create:"create",load:"load",fullLoad:"fullLoad"},Cs={mark(c){p.performance.mark(c)},measure(c,o,d){p.performance.measure(c,o,d)}};function Ns(c){const o=c.name.split("?")[0];return bt(o)&&o.includes("mapbox-gl.js")?"javascript":bt(o)&&o.includes("mapbox-gl.css")?"css":(function(d){return T.API_FONTS_REGEX.test(d)})(o)?"fontRange":Pt(o)?"sprite":st(o)?"style":(function(d){return T.API_TILEJSON_REGEX.test(d)})(o)?"tilejson":"other"}const Xn=p.performance;function ma(c){const o=c?c.url.toString():void 0;return Xn.getEntriesByName(o)}let ks,Go,Xa,Co;const ko={now:()=>Xa!==void 0?Xa:p.performance.now(),setNow(c){Xa=c},restoreNow(){Xa=void 0},frame(c){const o=p.requestAnimationFrame(c);return{cancel:()=>p.cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:d,height:f}=c;Co||(Co=p.document.createElement("canvas"));const g=Co.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(d>Co.width||f>Co.height)&&(Co.width=d,Co.height=f),g.clearRect(-o,-o,d+2*o,f+2*o),g.drawImage(c,0,0,d,f),g.getImageData(-o,-o,d+2*o,f+2*o)},resolveURL:c=>(ks||(ks=p.document.createElement("a")),ks.href=c,ks.href),get devicePixelRatio(){return p.devicePixelRatio},get prefersReducedMotion(){return!!p.matchMedia&&(Go==null&&(Go=p.matchMedia("(prefers-reduced-motion: reduce)")),Go.matches)}};function Ya(c,o,d){d[c]&&d[c].indexOf(o)!==-1||(d[c]=d[c]||[],d[c].push(o))}function mc(c,o,d){if(d&&d[c]){const f=d[c].indexOf(o);f!==-1&&d[c].splice(f,1)}}class qo{constructor(o,d={}){ct(this,d),this.type=o}}class Io extends qo{constructor(o,d={}){super("error",ct({error:o},d))}}class Nl{on(o,d){return this._listeners=this._listeners||{},Ya(o,d,this._listeners),this}off(o,d){return mc(o,d,this._listeners),mc(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Ya(o,d,this._oneTimeListeners),this):new Promise((f=>this.once(o,f)))}fire(o,d){typeof o=="string"&&(o=new qo(o,d||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of g)E.call(this,o);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of b)mc(f,E,this._oneTimeListeners),E.call(this,o);const w=this._eventedParent;w&&(ct(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Io&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var Ot=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function pa(c,...o){for(const d of o)for(const f in d)c[f]=d[f];return c}function Wi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Qi(c){if(Array.isArray(c))return c.map(Qi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const d in c)o[d]=Qi(c[d]);return o}return Wi(c)}class $l extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}var $s=$l;class pc{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[f,g]of d)this.bindings[f]=g}concat(o){return new pc(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var ir=pc;const ga={kind:"null"},mn={kind:"number"},$n={kind:"string"},Jn={kind:"boolean"},vr={kind:"color"},co={kind:"object"},ri={kind:"value"},Lr={kind:"collator"},Ko={kind:"formatted"},Ys={kind:"resolvedImage"};function Ar(c,o){return{kind:"array",itemType:c,N:o}}function Hi(c){if(c.kind==="array"){const o=Hi(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const xu=[ga,mn,$n,Jn,vr,Ko,co,Ar(ri),Ys];function Us(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Us(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const d of xu)if(!Us(d,o))return null}}return`Expected ${Hi(c)} but found ${Hi(o)} instead.`}function dl(c,o){return o.some((d=>d.kind===c.kind))}function Ul(c,o){return o.some((d=>d==="null"?c===null:d==="array"?Array.isArray(c):d==="object"?c&&!Array.isArray(c)&&typeof c=="object":d===typeof c))}var Is,Fh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ao(c){return(c=Math.round(c))<0?0:c>255?255:c}function hl(c){return Ao(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function Po(c){return(o=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:o>1?1:o;var o}function va(c,o,d){return d<0?d+=1:d>1&&(d-=1),6*d<1?c+(o-c)*d*6:2*d<1?o:3*d<2?c+(o-c)*(2/3-d)*6:c}try{Is={}.parseCSSColor=function(c){var o,d=c.replace(/ /g,"").toLowerCase();if(d in Fh)return Fh[d].slice();if(d[0]==="#")return d.length===4?(o=parseInt(d.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:d.length===7&&(o=parseInt(d.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=d.indexOf("("),g=d.indexOf(")");if(f!==-1&&g+1===d.length){var b=d.substr(0,f),w=d.substr(f+1,g-(f+1)).split(","),E=1;switch(b){case"rgba":if(w.length!==4)return null;E=Po(w.pop());case"rgb":return w.length!==3?null:[hl(w[0]),hl(w[1]),hl(w[2]),E];case"hsla":if(w.length!==4)return null;E=Po(w.pop());case"hsl":if(w.length!==3)return null;var A=(parseFloat(w[0])%360+360)%360/360,L=Po(w[1]),N=Po(w[2]),W=N<=.5?N*(L+1):N+L-N*L,Q=2*N-W;return[Ao(255*va(Q,W,A+1/3)),Ao(255*va(Q,W,A)),Ao(255*va(Q,W,A-1/3)),E];default:return null}}return null}}catch{}class os{constructor(o,d,f,g=1){this.r=o,this.g=d,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof os)return o;if(typeof o!="string")return;const d=Is(o);return d?new os(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[o,d,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(d)},${Math.round(f)},${g})`}toArray(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*o/g,255*d/g,255*f/g,g]}toArray01(){const{r:o,g:d,b:f,a:g}=this;return g===0?[0,0,0,0]:[o/g,d/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:d,b:f,a:g}=this;return[o,d,f,g]}}os.black=new os(0,0,0,1),os.white=new os(1,1,1,1),os.transparent=new os(0,0,0,0),os.red=new os(1,0,0,1),os.blue=new os(0,0,1,1);var Gi=os;class jc{constructor(o,d,f){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fl{constructor(o,d,f,g,b){this.text=o.normalize?o.normalize():o,this.image=d,this.scale=f,this.fontStack=g,this.textColor=b}}class Zr{constructor(o){this.sections=o}static fromString(o){return new Zr([new fl(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof Zr?o:Zr.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}serialize(){const o=["format"];for(const d of this.sections){if(d.image){o.push(["image",d.image.name]);continue}o.push(d.text);const f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),o.push(f)}return o}}class as{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new as({name:o,available:!1}):null}serialize(){return["image",this.name]}}function wu(c,o,d,f){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,d,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,o,d,f]:[c,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rr(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Gi||c instanceof jc||c instanceof Zr||c instanceof as)return!0;if(Array.isArray(c)){for(const o of c)if(!rr(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!rr(c[o]))return!1;return!0}return!1}function _r(c){if(c===null)return ga;if(typeof c=="string")return $n;if(typeof c=="boolean")return Jn;if(typeof c=="number")return mn;if(c instanceof Gi)return vr;if(c instanceof jc)return Lr;if(c instanceof Zr)return Ko;if(c instanceof as)return Ys;if(Array.isArray(c)){const o=c.length;let d;for(const f of c){const g=_r(f);if(d){if(d===g)continue;d=ri;break}d=g}return Ar(d||ri,o)}return co}function ml(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Gi||c instanceof Zr||c instanceof as?c.toString():JSON.stringify(c)}class gc{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!rr(o[1]))return d.error("invalid value");const f=o[1];let g=_r(f);const b=d.expectedType;return g.kind!=="array"||g.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(g=b),new gc(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Gi?["rgba"].concat(this.value.toArray()):this.value instanceof Zr?this.value.serialize():this.value}}var pl=gc,Br=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const vc={string:$n,number:mn,boolean:Jn,object:co};class Xo{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let f,g=1;const b=o[0];if(b==="array"){let E,A;if(o.length>2){const L=o[1];if(typeof L!="string"||!(L in vc)||L==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);E=vc[L],g++}else E=ri;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);A=o[2],g++}f=Ar(E,A)}else f=vc[b];const w=[];for(;g<o.length;g++){const E=d.parse(o[g],g,ri);if(!E)return null;w.push(E)}return new Xo(f,w)}evaluate(o){for(let d=0;d<this.args.length;d++){const f=this.args[d].evaluate(o);if(!Us(this.type,_r(f)))return f;if(d===this.args.length-1)throw new Br(`Expected value to be of type ${Hi(this.type)}, but found ${Hi(_r(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=this.type,d=[o.kind];if(o.kind==="array"){const f=o.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){d.push(f.kind);const g=o.N;(typeof g=="number"||this.args.length>1)&&d.push(g)}}return d.concat(this.args.map((f=>f.serialize())))}}var Mo=Xo;class _a{constructor(o){this.type=Ko,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return d.error("First argument must be an image or text section.");const g=[];let b=!1;for(let w=1;w<=o.length-1;++w){const E=o[w];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let A=null;if(E["font-scale"]&&(A=d.parse(E["font-scale"],1,mn),!A))return null;let L=null;if(E["text-font"]&&(L=d.parse(E["text-font"],1,Ar($n)),!L))return null;let N=null;if(E["text-color"]&&(N=d.parse(E["text-color"],1,vr),!N))return null;const W=g[g.length-1];W.scale=A,W.font=L,W.textColor=N}else{const A=d.parse(o[w],1,ri);if(!A)return null;const L=A.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,g.push({content:A,scale:null,font:null,textColor:null})}}return new _a(g)}evaluate(o){return new Zr(this.sections.map((d=>{const f=d.content.evaluate(o);return _r(f)===Ys?new fl("",f,null,null,null):new fl(ml(f),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null)})))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const d of this.sections){o.push(d.content.serialize());const f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),o.push(f)}return o}}class ya{constructor(o){this.type=Ys,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const f=d.parse(o[1],1,$n);return f?new ya(f):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),f=as.fromString(d);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(d)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const vd={"to-boolean":Jn,"to-color":vr,"to-number":mn,"to-string":$n};class Za{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const f=o[0];if((f==="to-boolean"||f==="to-string")&&o.length!==2)return d.error("Expected one argument.");const g=vd[f],b=[];for(let w=1;w<o.length;w++){const E=d.parse(o[w],w,ri);if(!E)return null;b.push(E)}return new Za(g,b)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let d,f;for(const g of this.args){if(d=g.evaluate(o),f=null,d instanceof Gi)return d;if(typeof d=="string"){const b=o.parseColor(d);if(b)return b}else if(Array.isArray(d)&&(f=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:wu(d[0],d[1],d[2],d[3]),!f))return new Gi(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Br(f||`Could not parse color from value '${typeof d=="string"?d:String(JSON.stringify(d))}'`)}if(this.type.kind==="number"){let d=null;for(const f of this.args){if(d=f.evaluate(o),d===null)return 0;const g=Number(d);if(!isNaN(g))return g}throw new Br(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?Zr.fromString(ml(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?as.fromString(ml(this.args[0].evaluate(o))):ml(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new _a([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ya(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Yo=Za;const Do=["Unknown","Point","LineString","Polygon"];var jl=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Do[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:d,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(d*o-c[0])+this.featureDistanceData.bearing[1]*(f*o-c[1])}return 0}parseColor(c){let o=this._parseColorCache[c];return o||(o=this._parseColorCache[c]=Gi.parse(c)),o}};class Lo{constructor(o,d,f,g){this.name=o,this.type=d,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((o=>o.serialize())))}static parse(o,d){const f=o[0],g=Lo.definitions[f];if(!g)return d.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,E=w.filter((([L])=>!Array.isArray(L)||L.length===o.length-1));let A=null;for(const[L,N]of E){A=new xn(d.registry,d.path,null,d.scope);const W=[];let Q=!1;for(let re=1;re<o.length;re++){const oe=o[re],he=Array.isArray(L)?L[re-1]:L.type,Ce=A.parse(oe,1+W.length,he);if(!Ce){Q=!0;break}W.push(Ce)}if(!Q)if(Array.isArray(L)&&L.length!==W.length)A.error(`Expected ${L.length} arguments, but found ${W.length} instead.`);else{for(let re=0;re<W.length;re++){const oe=Array.isArray(L)?L[re]:L.type,he=W[re];A.concat(re+1).checkSubtype(oe,he.type)}if(A.errors.length===0)return new Lo(f,b,N,W)}}if(E.length===1)d.errors.push(...A.errors);else{const L=(E.length?E:w).map((([W])=>{return Q=W,Array.isArray(Q)?`(${Q.map(Hi).join(", ")})`:`(${Hi(Q.type)}...)`;var Q})).join(" | "),N=[];for(let W=1;W<o.length;W++){const Q=d.parse(o[W],1+N.length);if(!Q)return null;N.push(Hi(Q.type))}d.error(`Expected arguments of type ${L}, but found (${N.join(", ")}) instead.`)}return null}static register(o,d){Lo.definitions=d;for(const f in d)o[f]=Lo}}var ba=Lo;class xa{constructor(o,d,f){this.type=Lr,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return d.error("Collator options argument must be an object.");const g=d.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Jn);if(!g)return null;const b=d.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Jn);if(!b)return null;let w=null;return f.locale&&(w=d.parse(f.locale,1,$n),!w)?null:new xa(g,b,w)}evaluate(o){return new jc(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Zo=8192;function _c(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ja(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function gl(c,o){const d=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(d*g*Zo),Math.round(f*g*Zo)]}function Wc(c,o,d){const f=c[0]-o[0],g=c[1]-o[1],b=c[0]-d[0],w=c[1]-d[1];return f*w-b*g==0&&f*b<=0&&g*w<=0}function vl(c,o){let d=!1;for(let w=0,E=o.length;w<E;w++){const A=o[w];for(let L=0,N=A.length;L<N-1;L++){if(Wc(c,A[L],A[L+1]))return!1;(g=A[L])[1]>(f=c)[1]!=(b=A[L+1])[1]>f[1]&&f[0]<(b[0]-g[0])*(f[1]-g[1])/(b[1]-g[1])+g[0]&&(d=!d)}}var f,g,b;return d}function Tu(c,o){for(let d=0;d<o.length;d++)if(vl(c,o[d]))return!0;return!1}function Su(c,o,d,f){const g=f[0]-d[0],b=f[1]-d[1],w=(c[0]-d[0])*b-g*(c[1]-d[1]),E=(o[0]-d[0])*b-g*(o[1]-d[1]);return w>0&&E<0||w<0&&E>0}function uo(c,o,d){for(const L of d)for(let N=0;N<L.length-1;++N)if((E=[(w=L[N+1])[0]-(b=L[N])[0],w[1]-b[1]])[0]*(A=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-E[1]*A[0]!=0&&Su(f,g,b,w)&&Su(b,w,f,g))return!0;var f,g,b,w,E,A;return!1}function Ii(c,o){for(let d=0;d<c.length;++d)if(!vl(c[d],o))return!1;for(let d=0;d<c.length-1;++d)if(uo(c[d],c[d+1],o))return!1;return!0}function Hc(c,o){for(let d=0;d<o.length;d++)if(Ii(c,o[d]))return!0;return!1}function Eu(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=[];for(let w=0;w<c[g].length;w++){const E=gl(c[g][w],d);_c(o,E),b.push(E)}f.push(b)}return f}function _d(c,o,d){const f=[];for(let g=0;g<c.length;g++){const b=Eu(c[g],o,d);f.push(b)}return f}function _l(c,o,d,f){if(c[0]<d[0]||c[0]>d[2]){const g=.5*f;let b=c[0]-d[0]>g?-f:d[0]-c[0]>g?f:0;b===0&&(b=c[0]-d[2]>g?-f:d[2]-c[0]>g?f:0),c[0]+=b}_c(o,c)}function js(c,o,d,f){const g=Math.pow(2,f.z)*Zo,b=[f.x*Zo,f.y*Zo],w=[];if(!c)return w;for(const E of c)for(const A of E){const L=[A.x+b[0],A.y+b[1]];_l(L,o,d,g),w.push(L)}return w}function Gc(c,o,d,f){const g=Math.pow(2,f.z)*Zo,b=[f.x*Zo,f.y*Zo],w=[];if(!c)return w;for(const A of c){const L=[];for(const N of A){const W=[N.x+b[0],N.y+b[1]];_c(o,W),L.push(W)}w.push(L)}if(o[2]-o[0]<=g/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const A of w)for(const L of A)_l(L,o,d,g)}var E;return w}class ho{constructor(o,d){this.type=Jn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(rr(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const b=f.features[g].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new ho(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ho(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ho(f,f)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Eu(f.coordinates,b,w),A=js(d.geometry(),g,b,w);if(!Ja(g,b))return!1;for(const L of A)if(!vl(L,E))return!1}if(f.type==="MultiPolygon"){const E=_d(f.coordinates,b,w),A=js(d.geometry(),g,b,w);if(!Ja(g,b))return!1;for(const L of A)if(!Tu(L,E))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(d,f){const g=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=d.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const E=Eu(f.coordinates,b,w),A=Gc(d.geometry(),g,b,w);if(!Ja(g,b))return!1;for(const L of A)if(!Ii(L,E))return!1}if(f.type==="MultiPolygon"){const E=_d(f.coordinates,b,w),A=Gc(d.geometry(),g,b,w);if(!Ja(g,b))return!1;for(const L of A)if(!Hc(L,E))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Jo=ho;function M(c){if(c instanceof ba&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Jo)return!1;let o=!0;return c.eachChild((d=>{o&&!M(d)&&(o=!1)})),o}function ne(c){if(c instanceof ba&&c.name==="feature-state")return!1;let o=!0;return c.eachChild((d=>{o&&!ne(d)&&(o=!1)})),o}function de(c,o){if(c instanceof ba&&o.indexOf(c.name)>=0)return!1;let d=!0;return c.eachChild((f=>{d&&!de(f,o)&&(d=!1)})),d}class Le{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const f=o[1];return d.scope.has(f)?new Le(f,d.scope.get(f)):d.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var It=Le;class Rt{constructor(o,d=[],f,g=new ir,b=[]){this.registry=o,this.path=d,this.key=d.map((w=>`[${w}]`)).join(""),this.scope=g,this.errors=b,this.expectedType=f}parse(o,d,f,g,b={}){return d?this.concat(d,f,g)._parse(o,b):this._parse(o,b)}_parse(o,d){function f(g,b,w){return w==="assert"?new Mo(b,[g]):w==="coerce"?new Yo(b,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[g];if(b){let w=b.parse(o,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,A=w.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||A.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(E,A))return null}else w=f(w,E,d.typeAnnotation||"coerce");else w=f(w,E,d.typeAnnotation||"assert")}if(!(w instanceof pl)&&w.type.kind!=="resolvedImage"&&fi(w)){const E=new jl;try{w=new pl(w.type,w.evaluate(E))}catch(A){return this.error(A.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,f){const g=typeof o=="number"?this.path.concat(o):this.path,b=f?this.scope.concat(f):this.scope;return new Rt(this.registry,g,d||null,b,this.errors)}error(o,...d){const f=`${this.key}${d.map((g=>`[${g}]`)).join("")}`;this.errors.push(new $s(f,o))}checkSubtype(o,d){const f=Us(o,d);return f&&this.error(f),f}}var xn=Rt;function fi(c){if(c instanceof It)return fi(c.boundExpression);if(c instanceof ba&&c.name==="error"||c instanceof xa||c instanceof Jo)return!1;const o=c instanceof Yo||c instanceof Mo;let d=!0;return c.eachChild((f=>{d=o?d&&fi(f):d&&f instanceof pl})),!!d&&M(c)&&de(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Rr(c,o){const d=c.length-1;let f,g,b=0,w=d,E=0;for(;b<=w;)if(E=Math.floor((b+w)/2),f=c[E],g=c[E+1],f<=o){if(E===d||o<g)return E;b=E+1}else{if(!(f>o))throw new Br("Input is not a number.");w=E-1}return 0}class Ai{constructor(o,d,f){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[g,b]of f)this.labels.push(g),this.outputs.push(b)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const f=d.parse(o[1],1,mn);if(!f)return null;const g=[];let b=null;d.expectedType&&d.expectedType.kind!=="value"&&(b=d.expectedType);for(let w=1;w<o.length;w+=2){const E=w===1?-1/0:o[w],A=o[w+1],L=w,N=w+1;if(typeof E!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(g.length&&g[g.length-1][0]>=E)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const W=d.parse(A,N,b);if(!W)return null;b=b||W.type,g.push([E,W])}return new Ai(b,f,g)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;return g>=d[b-1]?f[b-1].evaluate(o):f[Rr(d,g)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){const o=["step",this.input.serialize()];for(let d=0;d<this.labels.length;d++)d>0&&o.push(this.labels[d]),o.push(this.outputs[d].serialize());return o}}var ar=Ai;function ti(c,o,d){return c*(1-d)+o*d}var Zs=Object.freeze({__proto__:null,array:function(c,o,d){return c.map(((f,g)=>ti(f,o[g],d)))},color:function(c,o,d){return new Gi(ti(c.r,o.r,d),ti(c.g,o.g,d),ti(c.b,o.b,d),ti(c.a,o.a,d))},number:ti});const Qa=.95047,wa=1.08883,qc=4/29,el=6/29,bm=3*el*el,O_=el*el*el,V_=Math.PI/180,B_=180/Math.PI;function Qo(c){return c>O_?Math.pow(c,1/3):c/bm+qc}function zh(c){return c>el?c*c*c:bm*(c-qc)}function Nh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function yd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function bg(c){const o=yd(c.r),d=yd(c.g),f=yd(c.b),g=Qo((.4124564*o+.3575761*d+.1804375*f)/Qa),b=Qo((.2126729*o+.7151522*d+.072175*f)/1);return{l:116*b-16,a:500*(g-b),b:200*(b-Qo((.0193339*o+.119192*d+.9503041*f)/wa)),alpha:c.a}}function xg(c){let o=(c.l+16)/116,d=isNaN(c.a)?o:o+c.a/500,f=isNaN(c.b)?o:o-c.b/200;return o=1*zh(o),d=Qa*zh(d),f=wa*zh(f),new Gi(Nh(3.2404542*d-1.5371385*o-.4985314*f),Nh(-.969266*d+1.8760108*o+.041556*f),Nh(.0556434*d-.2040259*o+1.0572252*f),c.alpha)}function wg(c,o,d){const f=o-c;return c+d*(f>180||f<-180?f-360*Math.round(f/360):f)}const yc={forward:bg,reverse:xg,interpolate:function(c,o,d){return{l:ti(c.l,o.l,d),a:ti(c.a,o.a,d),b:ti(c.b,o.b,d),alpha:ti(c.alpha,o.alpha,d)}}},Cu={forward:function(c){const{l:o,a:d,b:f}=bg(c),g=Math.atan2(f,d)*B_;return{h:g<0?g+360:g,c:Math.sqrt(d*d+f*f),l:o,alpha:c.a}},reverse:function(c){const o=c.h*V_,d=c.c;return xg({l:c.l,a:Math.cos(o)*d,b:Math.sin(o)*d,alpha:c.alpha})},interpolate:function(c,o,d){return{h:wg(c.h,o.h,d),c:ti(c.c,o.c,d),l:ti(c.l,o.l,d),alpha:ti(c.alpha,o.alpha,d)}}};var xm=Object.freeze({__proto__:null,hcl:Cu,lab:yc});class ku{constructor(o,d,f,g,b){this.type=o,this.operator=d,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,E]of b)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(o,d,f,g){let b=0;if(o.name==="exponential")b=wm(d,o.base,f,g);else if(o.name==="linear")b=wm(d,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;b=new X(w[0],w[1],w[2],w[3]).solve(wm(d,1,f,g))}return b}static parse(o,d){let[f,g,b,...w]=o;if(!Array.isArray(g)||g.length===0)return d.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const L=g[1];if(typeof L!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:L}}else{if(g[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const L=g.slice(1);if(L.length!==4||L.some((N=>typeof N!="number"||N<0||N>1)))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:L}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(b=d.parse(b,2,mn),!b)return null;const E=[];let A=null;f==="interpolate-hcl"||f==="interpolate-lab"?A=vr:d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);for(let L=0;L<w.length;L+=2){const N=w[L],W=w[L+1],Q=L+3,re=L+4;if(typeof N!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(E.length&&E[E.length-1][0]>=N)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);const oe=d.parse(W,re,A);if(!oe)return null;A=A||oe.type,E.push([N,oe])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new ku(A,f,g,b,E):d.error(`Type ${Hi(A)} is not interpolatable.`)}evaluate(o){const d=this.labels,f=this.outputs;if(d.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=d[0])return f[0].evaluate(o);const b=d.length;if(g>=d[b-1])return f[b-1].evaluate(o);const w=Rr(d,g),E=ku.interpolationFactor(this.interpolation,g,d[w],d[w+1]),A=f[w].evaluate(o),L=f[w+1].evaluate(o);return this.operator==="interpolate"?Zs[this.type.kind.toLowerCase()](A,L,E):this.operator==="interpolate-hcl"?Cu.reverse(Cu.interpolate(Cu.forward(A),Cu.forward(L),E)):yc.reverse(yc.interpolate(yc.forward(A),yc.forward(L),E))}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const d=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)d.push(this.labels[f],this.outputs[f].serialize());return d}}function wm(c,o,d,f){const g=f-d,b=c-d;return g===0?0:o===1?b/g:(Math.pow(o,b)-1)/(Math.pow(o,g)-1)}var yl=ku;class bd{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expectected at least one argument.");let f=null;const g=d.expectedType;g&&g.kind!=="value"&&(f=g);const b=[];for(const E of o.slice(1)){const A=d.parse(E,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!A)return null;f=f||A.type,b.push(A)}const w=g&&b.some((E=>Us(g,E.type)));return new bd(w?ri:f,b)}evaluate(o){let d,f=null,g=0;for(const b of this.args){if(g++,f=b.evaluate(o),f&&f instanceof as&&!f.available&&(d||(d=f),f=null,g===this.args.length))return d;if(f!==null)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}serialize(){const o=["coalesce"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var $h=bd;class xd{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let b=1;b<o.length-1;b+=2){const w=o[b];if(typeof w!="string")return d.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return d.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=d.parse(o[b+1],b+1);if(!E)return null;f.push([w,E])}const g=d.parse(o[o.length-1],o.length-1,d.expectedType,f);return g?new xd(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[d,f]of this.bindings)o.push(d,f.serialize());return o.push(this.result.serialize()),o}}var wd=xd;class Uh{constructor(o,d,f){this.type=o,this.index=d,this.input=f}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,mn),g=d.parse(o[2],2,Ar(d.expectedType||ri));return f&&g?new Uh(g.type.itemType,f,g):null}evaluate(o){const d=this.index.evaluate(o),f=this.input.evaluate(o);if(d<0)throw new Br(`Array index out of bounds: ${d} < 0.`);if(d>=f.length)throw new Br(`Array index out of bounds: ${d} > ${f.length-1}.`);if(d!==Math.floor(d))throw new Br(`Array index must be an integer, but found ${d} instead.`);return f[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Tm=Uh;class Ro{constructor(o,d){this.type=Jn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ri),g=d.parse(o[2],2,ri);return f&&g?dl(f.type,[Jn,$n,mn,ga,ri])?new Ro(f,g):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(f.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(f==null)return!1;if(!Ul(d,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(_r(d))} instead.`);if(!Ul(f,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${Hi(_r(f))} instead.`);return f.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var jh=Ro;class Td{constructor(o,d,f){this.type=mn,this.needle=o,this.haystack=d,this.fromIndex=f}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ri),g=d.parse(o[2],2,ri);if(!f||!g)return null;if(!dl(f.type,[Jn,$n,mn,ga,ri]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,mn);return b?new Td(f,g,b):null}return new Td(f,g)}evaluate(o){const d=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!Ul(d,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Hi(_r(d))} instead.`);if(!Ul(f,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${Hi(_r(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(d,g)}return f.indexOf(d)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Sm=Td;class Wh{constructor(o,d,f,g,b,w){this.inputType=o,this.type=d,this.input=f,this.cases=g,this.outputs=b,this.otherwise=w}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let f,g;d.expectedType&&d.expectedType.kind!=="value"&&(g=d.expectedType);const b={},w=[];for(let L=2;L<o.length-1;L+=2){let N=o[L];const W=o[L+1];Array.isArray(N)||(N=[N]);const Q=d.concat(L);if(N.length===0)return Q.error("Expected at least one branch label.");for(const oe of N){if(typeof oe!="number"&&typeof oe!="string")return Q.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return Q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return Q.error("Numeric branch labels must be integer values.");if(f){if(Q.checkSubtype(f,_r(oe)))return null}else f=_r(oe);if(b[String(oe)]!==void 0)return Q.error("Branch labels must be unique.");b[String(oe)]=w.length}const re=d.parse(W,L,g);if(!re)return null;g=g||re.type,w.push(re)}const E=d.parse(o[1],1,ri);if(!E)return null;const A=d.parse(o[o.length-1],o.length-1,g);return A?E.type.kind!=="value"&&d.concat(1).checkSubtype(f,E.type)?null:new Wh(f,g,E,b,w,A):null}evaluate(o){const d=this.input.evaluate(o);return(_r(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],d=Object.keys(this.cases).sort(),f=[],g={};for(const w of d){const E=g[this.cases[w]];E===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[E][1].push(w)}const b=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,E]of f)o.push(E.length===1?b(E[0]):E.map(b)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}var F_=Wh;class Em{constructor(o,d,f){this.type=o,this.branches=d,this.otherwise=f}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let f;d.expectedType&&d.expectedType.kind!=="value"&&(f=d.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const E=d.parse(o[w],w,Jn);if(!E)return null;const A=d.parse(o[w+1],w+1,f);if(!A)return null;g.push([E,A]),f=f||A.type}const b=d.parse(o[o.length-1],o.length-1,f);return b?new Em(f,g,b):null}evaluate(o){for(const[d,f]of this.branches)if(d.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,f]of this.branches)o(d),o(f);o(this.otherwise)}outputDefined(){return this.branches.every((([o,d])=>d.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild((d=>{o.push(d.serialize())})),o}}var Tg=Em;class Sd{constructor(o,d,f,g){this.type=o,this.input=d,this.beginIndex=f,this.endIndex=g}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=d.parse(o[1],1,ri),g=d.parse(o[2],2,mn);if(!f||!g)return null;if(!dl(f.type,[Ar(ri),$n,ri]))return d.error(`Expected first argument to be of type array or string, but found ${Hi(f.type)} instead`);if(o.length===4){const b=d.parse(o[3],3,mn);return b?new Sd(f.type,f,g,b):null}return new Sd(f.type,f,g)}evaluate(o){const d=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!Ul(d,["string","array"]))throw new Br(`Expected first argument to be of type array or string, but found ${Hi(_r(d))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return d.slice(f,g)}return d.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Sg=Sd;function Hh(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Cm(c,o,d,f){return f.compare(o,d)===0}function Kc(c,o,d){const f=c!=="=="&&c!=="!=";return class LN{constructor(b,w,E){this.type=Jn,this.lhs=b,this.rhs=w,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");const E=b[0];let A=w.parse(b[1],1,ri);if(!A)return null;if(!Hh(E,A.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${Hi(A.type)}'.`);let L=w.parse(b[2],2,ri);if(!L)return null;if(!Hh(E,L.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${Hi(L.type)}'.`);if(A.type.kind!==L.type.kind&&A.type.kind!=="value"&&L.type.kind!=="value")return w.error(`Cannot compare types '${Hi(A.type)}' and '${Hi(L.type)}'.`);f&&(A.type.kind==="value"&&L.type.kind!=="value"?A=new Mo(L.type,[A]):A.type.kind!=="value"&&L.type.kind==="value"&&(L=new Mo(A.type,[L])));let N=null;if(b.length===4){if(A.type.kind!=="string"&&L.type.kind!=="string"&&A.type.kind!=="value"&&L.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(b[3],3,Lr),!N)return null}return new LN(A,L,N)}evaluate(b){const w=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const A=_r(w),L=_r(E);if(A.kind!==L.kind||A.kind!=="string"&&A.kind!=="number")throw new Br(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${A.kind}, ${L.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const A=_r(w),L=_r(E);if(A.kind!=="string"||L.kind!=="string")return o(b,w,E)}return this.collator?d(b,w,E,this.collator.evaluate(b)):o(b,w,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[c];return this.eachChild((w=>{b.push(w.serialize())})),b}}}const km=Kc("==",(function(c,o,d){return o===d}),Cm),z_=Kc("!=",(function(c,o,d){return o!==d}),(function(c,o,d,f){return!Cm(0,o,d,f)})),N_=Kc("<",(function(c,o,d){return o<d}),(function(c,o,d,f){return f.compare(o,d)<0})),Xc=Kc(">",(function(c,o,d){return o>d}),(function(c,o,d,f){return f.compare(o,d)>0})),Wl=Kc("<=",(function(c,o,d){return o<=d}),(function(c,o,d,f){return f.compare(o,d)<=0})),Im=Kc(">=",(function(c,o,d){return o>=d}),(function(c,o,d,f){return f.compare(o,d)>=0}));class Gh{constructor(o,d,f,g,b,w){this.type=$n,this.number=o,this.locale=d,this.currency=f,this.unit=g,this.minFractionDigits=b,this.maxFractionDigits=w}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const f=d.parse(o[1],1,mn);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return d.error("NumberFormat options argument must be an object.");let b=null;if(g.locale&&(b=d.parse(g.locale,1,$n),!b))return null;let w=null;if(g.currency&&(w=d.parse(g.currency,1,$n),!w))return null;let E=null;if(g.unit&&(E=d.parse(g.unit,1,$n),!E))return null;let A=null;if(g["min-fraction-digits"]&&(A=d.parse(g["min-fraction-digits"],1,mn),!A))return null;let L=null;return g["max-fraction-digits"]&&(L=d.parse(g["max-fraction-digits"],1,mn),!L)?null:new Gh(f,b,w,E,A,L)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Yc{constructor(o){this.type=mn,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=d.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${Hi(f.type)} instead.`):new Yc(f):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Br(`Expected value to be of type string or array, but found ${Hi(_r(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild((d=>{o.push(d.serialize())})),o}}const Am={"==":km,"!=":z_,">":Xc,"<":N_,">=":Im,"<=":Wl,array:Mo,at:Tm,boolean:Mo,case:Tg,coalesce:$h,collator:xa,format:_a,image:ya,in:jh,"index-of":Sm,interpolate:yl,"interpolate-hcl":yl,"interpolate-lab":yl,length:Yc,let:wd,literal:pl,match:F_,number:Mo,"number-format":Gh,object:Mo,slice:Sg,step:ar,string:Mo,"to-boolean":Yo,"to-color":Yo,"to-number":Yo,"to-string":Yo,var:It,within:Jo};function Pm(c,[o,d,f,g]){o=o.evaluate(c),d=d.evaluate(c),f=f.evaluate(c);const b=g?g.evaluate(c):1,w=wu(o,d,f,b);if(w)throw new Br(w);return new Gi(o/255*b,d/255*b,f/255*b,b)}function bl(c,o){return c in o}function qh(c,o){const d=o[c];return d===void 0?null:d}function Ta(c){return{type:c}}ba.register(Am,{error:[{kind:"error"},[$n],(c,[o])=>{throw new Br(o.evaluate(c))}],typeof:[$n,[ri],(c,[o])=>Hi(_r(o.evaluate(c)))],"to-rgba":[Ar(mn,4),[vr],(c,[o])=>o.evaluate(c).toArray()],rgb:[vr,[mn,mn,mn],Pm],rgba:[vr,[mn,mn,mn,mn],Pm],has:{type:Jn,overloads:[[[$n],(c,[o])=>bl(o.evaluate(c),c.properties())],[[$n,co],(c,[o,d])=>bl(o.evaluate(c),d.evaluate(c))]]},get:{type:ri,overloads:[[[$n],(c,[o])=>qh(o.evaluate(c),c.properties())],[[$n,co],(c,[o,d])=>qh(o.evaluate(c),d.evaluate(c))]]},"feature-state":[ri,[$n],(c,[o])=>qh(o.evaluate(c),c.featureState||{})],properties:[co,[],c=>c.properties()],"geometry-type":[$n,[],c=>c.geometryType()],id:[ri,[],c=>c.id()],zoom:[mn,[],c=>c.globals.zoom],pitch:[mn,[],c=>c.globals.pitch||0],"distance-from-center":[mn,[],c=>c.distanceFromCenter()],"heatmap-density":[mn,[],c=>c.globals.heatmapDensity||0],"line-progress":[mn,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[mn,[],c=>c.globals.skyRadialProgress||0],accumulated:[ri,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[mn,Ta(mn),(c,o)=>{let d=0;for(const f of o)d+=f.evaluate(c);return d}],"*":[mn,Ta(mn),(c,o)=>{let d=1;for(const f of o)d*=f.evaluate(c);return d}],"-":{type:mn,overloads:[[[mn,mn],(c,[o,d])=>o.evaluate(c)-d.evaluate(c)],[[mn],(c,[o])=>-o.evaluate(c)]]},"/":[mn,[mn,mn],(c,[o,d])=>o.evaluate(c)/d.evaluate(c)],"%":[mn,[mn,mn],(c,[o,d])=>o.evaluate(c)%d.evaluate(c)],ln2:[mn,[],()=>Math.LN2],pi:[mn,[],()=>Math.PI],e:[mn,[],()=>Math.E],"^":[mn,[mn,mn],(c,[o,d])=>Math.pow(o.evaluate(c),d.evaluate(c))],sqrt:[mn,[mn],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[mn,[mn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[mn,[mn],(c,[o])=>Math.log(o.evaluate(c))],log2:[mn,[mn],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[mn,[mn],(c,[o])=>Math.sin(o.evaluate(c))],cos:[mn,[mn],(c,[o])=>Math.cos(o.evaluate(c))],tan:[mn,[mn],(c,[o])=>Math.tan(o.evaluate(c))],asin:[mn,[mn],(c,[o])=>Math.asin(o.evaluate(c))],acos:[mn,[mn],(c,[o])=>Math.acos(o.evaluate(c))],atan:[mn,[mn],(c,[o])=>Math.atan(o.evaluate(c))],min:[mn,Ta(mn),(c,o)=>Math.min(...o.map((d=>d.evaluate(c))))],max:[mn,Ta(mn),(c,o)=>Math.max(...o.map((d=>d.evaluate(c))))],abs:[mn,[mn],(c,[o])=>Math.abs(o.evaluate(c))],round:[mn,[mn],(c,[o])=>{const d=o.evaluate(c);return d<0?-Math.round(-d):Math.round(d)}],floor:[mn,[mn],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[mn,[mn],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Jn,[$n,ri],(c,[o,d])=>c.properties()[o.value]===d.value],"filter-id-==":[Jn,[ri],(c,[o])=>c.id()===o.value],"filter-type-==":[Jn,[$n],(c,[o])=>c.geometryType()===o.value],"filter-<":[Jn,[$n,ri],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Jn,[ri],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<f}],"filter->":[Jn,[$n,ri],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>g}],"filter-id->":[Jn,[ri],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>f}],"filter-<=":[Jn,[$n,ri],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Jn,[ri],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d<=f}],"filter->=":[Jn,[$n,ri],(c,[o,d])=>{const f=c.properties()[o.value],g=d.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Jn,[ri],(c,[o])=>{const d=c.id(),f=o.value;return typeof d==typeof f&&d>=f}],"filter-has":[Jn,[ri],(c,[o])=>o.value in c.properties()],"filter-has-id":[Jn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Jn,[Ar($n)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Jn,[Ar(ri)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Jn,[$n,Ar(ri)],(c,[o,d])=>d.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Jn,[$n,Ar(ri)],(c,[o,d])=>(function(f,g,b,w){for(;b<=w;){const E=b+w>>1;if(g[E]===f)return!0;g[E]>f?w=E-1:b=E+1}return!1})(c.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Jn,overloads:[[[Jn,Jn],(c,[o,d])=>o.evaluate(c)&&d.evaluate(c)],[Ta(Jn),(c,o)=>{for(const d of o)if(!d.evaluate(c))return!1;return!0}]]},any:{type:Jn,overloads:[[[Jn,Jn],(c,[o,d])=>o.evaluate(c)||d.evaluate(c)],[Ta(Jn),(c,o)=>{for(const d of o)if(d.evaluate(c))return!0;return!1}]]},"!":[Jn,[Jn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Jn,[$n],(c,[o])=>{const d=c.globals&&c.globals.isSupportedScript;return!d||d(o.evaluate(c))}],upcase:[$n,[$n],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[$n,[$n],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[$n,Ta(ri),(c,o)=>o.map((d=>ml(d.evaluate(c)))).join("")],"resolved-locale":[$n,[Lr],(c,[o])=>o.evaluate(c).resolvedLocale()]});var Ed=Am;function Mm(c){return{result:"success",value:c}}function bc(c){return{result:"error",value:c}}function Iu(c){return c["property-type"]==="data-driven"}function Kh(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Xh(c){return!!c.expression&&c.expression.interpolated}function Pi(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Cd(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function xl(c){return c}function kd(c,o){const d=o.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",g=f||!(f||c.property!==void 0),b=c.type||(Xh(o)?"exponential":"interval");if(d&&((c=pa({},c)).stops&&(c.stops=c.stops.map((L=>[L[0],Gi.parse(L[1])]))),c.default=Gi.parse(c.default?c.default:o.default)),c.colorSpace&&c.colorSpace!=="rgb"&&!xm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,E,A;if(b==="exponential")w=Hl;else if(b==="interval")w=Yh;else if(b==="categorical"){w=Eg,E=Object.create(null);for(const L of c.stops)E[L[0]]=L[1];A=typeof c.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=Cg}if(f){const L={},N=[];for(let re=0;re<c.stops.length;re++){const oe=c.stops[re],he=oe[0].zoom;L[he]===void 0&&(L[he]={zoom:he,type:c.type,property:c.property,default:c.default,stops:[]},N.push(he)),L[he].stops.push([oe[0].value,oe[1]])}const W=[];for(const re of N)W.push([L[re].zoom,kd(L[re],o)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:yl.interpolationFactor.bind(void 0,Q),zoomStops:W.map((re=>re[0])),evaluate:({zoom:re},oe)=>Hl({stops:W,base:c.base},o,re).evaluate(re,oe)}}if(g){const L=b==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:yl.interpolationFactor.bind(void 0,L),zoomStops:c.stops.map((N=>N[0])),evaluate:({zoom:N})=>w(c,o,N,E,A)}}return{kind:"source",evaluate(L,N){const W=N&&N.properties?N.properties[c.property]:void 0;return W===void 0?Au(c.default,o.default):w(c,o,W,E,A)}}}function Au(c,o,d){return c!==void 0?c:o!==void 0?o:d!==void 0?d:void 0}function Eg(c,o,d,f,g){return Au(typeof d===g?f[d]:void 0,c.default,o.default)}function Yh(c,o,d){if(Pi(d)!=="number")return Au(c.default,o.default);const f=c.stops.length;if(f===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[f-1][0])return c.stops[f-1][1];const g=Rr(c.stops.map((b=>b[0])),d);return c.stops[g][1]}function Hl(c,o,d){const f=c.base!==void 0?c.base:1;if(Pi(d)!=="number")return Au(c.default,o.default);const g=c.stops.length;if(g===1||d<=c.stops[0][0])return c.stops[0][1];if(d>=c.stops[g-1][0])return c.stops[g-1][1];const b=Rr(c.stops.map((N=>N[0])),d),w=(function(N,W,Q,re){const oe=re-Q,he=N-Q;return oe===0?0:W===1?he/oe:(Math.pow(W,he)-1)/(Math.pow(W,oe)-1)})(d,f,c.stops[b][0],c.stops[b+1][0]),E=c.stops[b][1],A=c.stops[b+1][1];let L=Zs[o.type]||xl;if(c.colorSpace&&c.colorSpace!=="rgb"){const N=xm[c.colorSpace];L=(W,Q)=>N.reverse(N.interpolate(N.forward(W),N.forward(Q),w))}return typeof E.evaluate=="function"?{evaluate(...N){const W=E.evaluate.apply(void 0,N),Q=A.evaluate.apply(void 0,N);if(W!==void 0&&Q!==void 0)return L(W,Q,w)}}:L(E,A,w)}function Cg(c,o,d){return o.type==="color"?d=Gi.parse(d):o.type==="formatted"?d=Zr.fromString(d.toString()):o.type==="resolvedImage"?d=as.fromString(d.toString()):Pi(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0),Au(d,c.default,o.default)}class Zh{constructor(o,d){this.expression=o,this._warningHistory={},this._evaluator=new jl,this._defaultValue=d?(function(f){return f.type==="color"&&(Cd(f.default)||Array.isArray(f.default))?new Gi(0,0,0,0):f.type==="color"?Gi.parse(f.default)||null:f.default===void 0?null:f.default})(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,f,g,b,w,E,A){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(o,d,f,g,b,w,E,A){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=A||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Br(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function Pu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ed}function Mu(c,o){const d=new xn(Ed,[],o?(function(g){const b={color:vr,string:$n,number:mn,enum:$n,boolean:Jn,formatted:Ko,resolvedImage:Ys};return g.type==="array"?Ar(b[g.value]||ri,g.length):b[g.type]})(o):void 0),f=d.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Mm(new Zh(f,o)):bc(d.errors)}class Id{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!ne(d.expression)}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}}class xc{constructor(o,d,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!ne(d.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,d,f,g,b,w){return this._styleExpression.evaluateWithoutErrorHandling(o,d,f,g,b,w)}evaluate(o,d,f,g,b,w){return this._styleExpression.evaluate(o,d,f,g,b,w)}interpolationFactor(o,d,f){return this.interpolationType?yl.interpolationFactor(this.interpolationType,o,d,f):0}}function Ad(c,o){if((c=Mu(c,o)).result==="error")return c;const d=c.value.expression,f=M(d);if(!f&&!Iu(o))return bc([new $s("","data expressions not supported")]);const g=de(d,["zoom","pitch","distance-from-center"]);if(!g&&!Kh(o))return bc([new $s("","zoom expressions not supported")]);const b=Md(d);return b||g?b instanceof $s?bc([b]):b instanceof yl&&!Xh(o)?bc([new $s("",'"interpolate" expressions cannot be used with this property')]):Mm(b?new xc(f?"camera":"composite",c.value,b.labels,b instanceof yl?b.interpolation:void 0):new Id(f?"constant":"source",c.value)):bc([new $s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pd{constructor(o,d){this._parameters=o,this._specification=d,pa(this,kd(this._parameters,this._specification))}static deserialize(o){return new Pd(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Md(c){let o=null;if(c instanceof wd)o=Md(c.result);else if(c instanceof $h){for(const d of c.args)if(o=Md(d),o)break}else(c instanceof ar||c instanceof yl)&&c.input instanceof ba&&c.input.name==="zoom"&&(o=c);return o instanceof $s||c.eachChild((d=>{const f=Md(d);f instanceof $s?o=f:!o&&f?o=new $s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new $s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}class _n{constructor(o,d,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),d!=null&&d.__line__&&(this.line=d.__line__)}}function ea(c){const o=c.key,d=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},b=c.style,w=c.styleSpec;let E=[];const A=Pi(d);if(A!=="object")return[new _n(o,d,`object expected, ${A} found`)];for(const L in d){const N=L.split(".")[0];let W;g[N]?W=g[N]:f[N]?W=Ps:g["*"]?W=g["*"]:f["*"]&&(W=Ps),W?E=E.concat(W({key:(o&&`${o}.`)+L,value:d[L],valueSpec:f[N]||f["*"],style:b,styleSpec:w,object:d,objectKey:L},d)):E.push(new _n(o,d[L],`unknown property "${L}"`))}for(const L in f)g[L]||f[L].required&&f[L].default===void 0&&d[L]===void 0&&E.push(new _n(o,d,`missing required property "${L}"`));return E}function Jh(c){const o=c.value,d=c.valueSpec,f=c.style,g=c.styleSpec,b=c.key,w=c.arrayElementValidator||Ps;if(Pi(o)!=="array")return[new _n(b,o,`array expected, ${Pi(o)} found`)];if(d.length&&o.length!==d.length)return[new _n(b,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new _n(b,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let E={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};g.$version<7&&(E.function=d.function),Pi(d.value)==="object"&&(E=d.value);let A=[];for(let L=0;L<o.length;L++)A=A.concat(w({array:o,arrayIndex:L,value:o[L],valueSpec:E,style:f,styleSpec:g,key:`${b}[${L}]`}));return A}function Dd(c){const o=c.key,d=c.value,f=c.valueSpec;let g=Pi(d);if(g==="number"&&d!=d&&(g="NaN"),g!=="number")return[new _n(o,d,`number expected, ${g} found`)];if("minimum"in f){let b=f.minimum;if(Pi(f.minimum)==="array"&&(b=f.minimum[c.arrayIndex]),d<b)return[new _n(o,d,`${d} is less than the minimum value ${b}`)]}if("maximum"in f){let b=f.maximum;if(Pi(f.maximum)==="array"&&(b=f.maximum[c.arrayIndex]),d>b)return[new _n(o,d,`${d} is greater than the maximum value ${b}`)]}return[]}function Ld(c){const o=c.valueSpec,d=Wi(c.value.type);let f,g,b,w={};const E=d!=="categorical"&&c.value.property===void 0,A=!E,L=Pi(c.value.stops)==="array"&&Pi(c.value.stops[0])==="array"&&Pi(c.value.stops[0][0])==="object",N=ea({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(re){if(d==="identity")return[new _n(re.key,re.value,'identity function may not have a "stops" property')];let oe=[];const he=re.value;return oe=oe.concat(Jh({key:re.key,value:he,valueSpec:re.valueSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:W})),Pi(he)==="array"&&he.length===0&&oe.push(new _n(re.key,he,"array must have at least one stop")),oe},default:function(re){return Ps({key:re.key,value:re.value,valueSpec:o,style:re.style,styleSpec:re.styleSpec})}}});return d==="identity"&&E&&N.push(new _n(c.key,c.value,'missing required property "property"')),d==="identity"||c.value.stops||N.push(new _n(c.key,c.value,'missing required property "stops"')),d==="exponential"&&c.valueSpec.expression&&!Xh(c.valueSpec)&&N.push(new _n(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(A&&!Iu(c.valueSpec)?N.push(new _n(c.key,c.value,"property functions not supported")):E&&!Kh(c.valueSpec)&&N.push(new _n(c.key,c.value,"zoom functions not supported"))),d!=="categorical"&&!L||c.value.property!==void 0||N.push(new _n(c.key,c.value,'"property" property is required')),N;function W(re){let oe=[];const he=re.value,Ce=re.key;if(Pi(he)!=="array")return[new _n(Ce,he,`array expected, ${Pi(he)} found`)];if(he.length!==2)return[new _n(Ce,he,`array length 2 expected, length ${he.length} found`)];if(L){if(Pi(he[0])!=="object")return[new _n(Ce,he,`object expected, ${Pi(he[0])} found`)];if(he[0].zoom===void 0)return[new _n(Ce,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new _n(Ce,he,"object stop key must have value")];const Oe=Wi(he[0].zoom);if(typeof Oe!="number")return[new _n(Ce,he[0].zoom,"stop zoom values must be numbers")];if(b&&b>Oe)return[new _n(Ce,he[0].zoom,"stop zoom values must appear in ascending order")];Oe!==b&&(b=Oe,g=void 0,w={}),oe=oe.concat(ea({key:`${Ce}[0]`,value:he[0],valueSpec:{zoom:{}},style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:Dd,value:Q}}))}else oe=oe.concat(Q({key:`${Ce}[0]`,value:he[0],style:re.style,styleSpec:re.styleSpec},he));return Pu(Qi(he[1]))?oe.concat([new _n(`${Ce}[1]`,he[1],"expressions are not allowed in function stops.")]):oe.concat(Ps({key:`${Ce}[1]`,value:he[1],valueSpec:o,style:re.style,styleSpec:re.styleSpec}))}function Q(re,oe){const he=Pi(re.value),Ce=Wi(re.value),Oe=re.value!==null?re.value:oe;if(f){if(he!==f)return[new _n(re.key,Oe,`${he} stop domain type must match previous stop domain type ${f}`)]}else f=he;if(he!=="number"&&he!=="string"&&he!=="boolean"&&typeof Ce!="number"&&typeof Ce!="string"&&typeof Ce!="boolean")return[new _n(re.key,Oe,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&d!=="categorical"){let qe=`number expected, ${he} found`;return Iu(o)&&d===void 0&&(qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _n(re.key,Oe,qe)]}return d!=="categorical"||he!=="number"||typeof Ce=="number"&&isFinite(Ce)&&Math.floor(Ce)===Ce?d!=="categorical"&&he==="number"&&typeof Ce=="number"&&typeof g=="number"&&g!==void 0&&Ce<g?[new _n(re.key,Oe,"stop domain values must appear in ascending order")]:(g=Ce,d==="categorical"&&Ce in w?[new _n(re.key,Oe,"stop domain values must be unique")]:(w[Ce]=!0,[])):[new _n(re.key,Oe,`integer expected, found ${String(Ce)}`)]}}function As(c){const o=(c.expressionContext==="property"?Ad:Mu)(Qi(c.value),c.valueSpec);if(o.result==="error")return o.value.map((f=>new _n(`${c.key}${f.key}`,c.value,f.message)));const d=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!d.outputDefined())return[new _n(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!ne(d))return[new _n(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return tl(d,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!de(d,["zoom","feature-state"]))return[new _n(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!M(d))return[new _n(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tl(c,o){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)d.delete(g);if(d.size===0)return[];const f=[];return c instanceof ba&&d.has(c.name)?[new _n(o.key,o.value,`["${c.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(c.eachChild((g=>{f.push(...tl(g,o))})),f)}function Qh(c){const o=c.key,d=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Wi(d))===-1&&g.push(new _n(o,d,`expected one of [${f.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(f.values).indexOf(Wi(d))===-1&&g.push(new _n(o,d,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(d)} found`)),g}function Dm(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Dm(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function ef(c,o="fill"){if(c==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Dm(c)||(c=nl(c));const d=c;let f=!0;try{f=(function(L){if(!wc(L))return L;let N=Qi(L);return Zc(N),N=kg(N),N})(d)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(d,null,2)}
        `)}const g=Ot[`filter_${o}`],b=Mu(f,g);let w=null;if(b.result==="error")throw new Error(b.value.map((L=>`${L.key}: ${L.message}`)).join(", "));w=(L,N,W)=>b.value.evaluate(L,N,{},W);let E=null,A=null;if(f!==d){const L=Mu(d,g);if(L.result==="error")throw new Error(L.value.map((N=>`${N.key}: ${N.message}`)).join(", "));E=(N,W,Q,re,oe)=>L.value.evaluate(N,W,{},Q,void 0,void 0,re,oe),A=!M(L.value.expression)}return{filter:w,dynamicFilter:E||void 0,needGeometry:Ag(f),needFeature:!!A}}function kg(c){if(!Array.isArray(c))return c;const o=(function(d){if(Lm.has(d[0])){for(let f=1;f<d.length;f++)if(wc(d[f]))return!0}return d})(c);return o===!0?o:o.map((d=>kg(d)))}function Zc(c){let o=!1;const d=[];if(c[0]==="case"){for(let f=1;f<c.length-1;f+=2)o=o||wc(c[f]),d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="match"){o=o||wc(c[1]);for(let f=2;f<c.length-1;f+=2)d.push(c[f+1]);d.push(c[c.length-1])}else if(c[0]==="step"){o=o||wc(c[1]);for(let f=1;f<c.length-1;f+=2)d.push(c[f+1])}o&&(c.length=0,c.push("any",...d));for(let f=1;f<c.length;f++)Zc(c[f])}function wc(c){if(!Array.isArray(c))return!1;if((o=c[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let d=1;d<c.length;d++)if(wc(c[d]))return!0;return!1}const Lm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ig(c,o){return c<o?-1:c>o?1:0}function Ag(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let o=1;o<c.length;o++)if(Ag(c[o]))return!0;return!1}function nl(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Rd(c[1],c[2],"=="):o==="!="?nf(Rd(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Rd(c[1],c[2],o):o==="any"?(d=c.slice(1),["any"].concat(d.map(nl))):o==="all"?["all"].concat(c.slice(1).map(nl)):o==="none"?["all"].concat(c.slice(1).map(nl).map(nf)):o==="in"?tf(c[1],c.slice(2)):o==="!in"?nf(tf(c[1],c.slice(2))):o==="has"?Rm(c[1]):o==="!has"?nf(Rm(c[1])):o!=="within"||c;var d}function Rd(c,o,d){switch(c){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,c,o]}}function tf(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((d=>typeof d!=typeof o[0]))?["filter-in-large",c,["literal",o.sort(Ig)]]:["filter-in-small",c,["literal",o]]}}function Rm(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function nf(c){return["!",c]}function Od(c){return Dm(Qi(c.value))?As(pa({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):Gl(c)}function Gl(c){const o=c.value,d=c.key;if(Pi(o)!=="array")return[new _n(d,o,`array expected, ${Pi(o)} found`)];const f=c.styleSpec;let g,b=[];if(o.length<1)return[new _n(d,o,"filter array must have at least 1 element")];switch(b=b.concat(Qh({key:`${d}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Wi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Wi(o[1])==="$type"&&b.push(new _n(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&b.push(new _n(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Pi(o[1]),g!=="string"&&b.push(new _n(`${d}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Pi(o[w]),Wi(o[1])==="$type"?b=b.concat(Qh({key:`${d}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&b.push(new _n(`${d}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)b=b.concat(Gl({key:`${d}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Pi(o[1]),o.length!==2?b.push(new _n(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&b.push(new _n(`${d}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Pi(o[1]),o.length!==2?b.push(new _n(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&b.push(new _n(`${d}[1]`,o[1],`object expected, ${g} found`))}return b}function ql(c,o){const d=c.key,f=c.style,g=c.styleSpec,b=c.value,w=c.objectKey,E=g[`${o}_${c.layerType}`];if(!E)return[];const A=w.match(/^(.*)-transition$/);if(o==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return Ps({key:d,value:b,valueSpec:g.transition,style:f,styleSpec:g});const L=c.valueSpec||E[w];if(!L)return[new _n(d,b,`unknown property "${w}"`)];let N;if(Pi(b)==="string"&&Iu(L)&&!L.tokens&&(N=/^{([^}]+)}$/.exec(b))){const Q=`\`{ "type": "identity", "property": ${N?JSON.stringify(N[1]):'"_"'} }\``;return[new _n(d,b,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${Q}.`)]}const W=[];return c.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&W.push(new _n(d,b,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Cd(Qi(b))&&Wi(b.type)==="identity"&&W.push(new _n(d,b,'"text-font" does not support identity functions'))),W.concat(Ps({key:c.key,value:b,valueSpec:L,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:w}))}function Pg(c){return ql(c,"paint")}function Om(c){return ql(c,"layout")}function Mg(c){let o=[];const d=c.value,f=c.key,g=c.style,b=c.styleSpec;d.type||d.ref||o.push(new _n(f,d,'either "type" or "ref" is required'));let w=Wi(d.type);const E=Wi(d.ref);if(d.id){const A=Wi(d.id);for(let L=0;L<c.arrayIndex;L++){const N=g.layers[L];Wi(N.id)===A&&o.push(new _n(f,d.id,`duplicate layer id "${d.id}", previously used at line ${N.id.__line__}`))}}if("ref"in d){let A;["type","source","source-layer","filter","layout"].forEach((L=>{L in d&&o.push(new _n(f,d[L],`"${L}" is prohibited for ref layers`))})),g.layers.forEach((L=>{Wi(L.id)===E&&(A=L)})),A?A.ref?o.push(new _n(f,d.ref,"ref cannot reference another ref layer")):w=Wi(A.type):typeof E=="string"&&o.push(new _n(f,d.ref,`ref layer "${E}" not found`))}else if(w!=="background"&&w!=="sky")if(d.source){const A=g.sources&&g.sources[d.source],L=A&&Wi(A.type);A?L==="vector"&&w==="raster"?o.push(new _n(f,d.source,`layer "${d.id}" requires a raster source`)):L==="raster"&&w!=="raster"?o.push(new _n(f,d.source,`layer "${d.id}" requires a vector source`)):L!=="vector"||d["source-layer"]?L==="raster-dem"&&w!=="hillshade"?o.push(new _n(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||L==="geojson"&&A.lineMetrics||o.push(new _n(f,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new _n(f,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new _n(f,d.source,`source "${d.source}" not found`))}else o.push(new _n(f,d,'missing required property "source"'));return o=o.concat(ea({key:f,value:d,valueSpec:b.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ps({key:`${f}.type`,value:d.type,valueSpec:b.layer.type,style:c.style,styleSpec:c.styleSpec,object:d,objectKey:"type"}),filter:A=>Od(pa({layerType:w},A)),layout:A=>ea({layer:d,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":L=>Om(pa({layerType:w},L))}}),paint:A=>ea({layer:d,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":L=>Pg(pa({layerType:w},L))}})}})),o}function Tc(c){const o=c.value,d=c.key,f=Pi(o);return f!=="string"?[new _n(d,o,`string expected, ${f} found`)]:[]}const Dg={promoteId:function({key:c,value:o}){if(Pi(o)==="string")return Tc({key:c,value:o});{const d=[];for(const f in o)d.push(...Tc({key:`${c}.${f}`,value:o[f]}));return d}}};function Lg(c){const o=c.value,d=c.key,f=c.styleSpec,g=c.style;if(!o.type)return[new _n(d,o,'"type" is required')];const b=Wi(o.type);let w;switch(b){case"vector":case"raster":case"raster-dem":return w=ea({key:d,value:o,valueSpec:f[`source_${b.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:Dg}),w;case"geojson":if(w=ea({key:d,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:Dg}),o.cluster)for(const E in o.clusterProperties){const[A,L]=o.clusterProperties[E],N=typeof A=="string"?[A,["accumulated"],["get",E]]:A;w.push(...As({key:`${d}.${E}.map`,value:L,expressionContext:"cluster-map"})),w.push(...As({key:`${d}.${E}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return ea({key:d,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return ea({key:d,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new _n(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qh({key:`${d}.type`,value:o.type,valueSpec:{values:$_(f)}})}}function $_(c){return c.source.reduce(((o,d)=>{const f=c[d];return f.type.type==="enum"&&(o=o.concat(Object.keys(f.type.values))),o}),[])}function Rg(c){const o=c.value,d=c.styleSpec,f=d.light,g=c.style;let b=[];const w=Pi(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new _n("light",o,`object expected, ${w} found`)]),b;for(const E in o){const A=E.match(/^(.*)-transition$/);b=b.concat(A&&f[A[1]]&&f[A[1]].transition?Ps({key:E,value:o[E],valueSpec:d.transition,style:g,styleSpec:d}):f[E]?Ps({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}):[new _n(E,o[E],`unknown property "${E}"`)])}return b}function rf(c){const o=c.value,d=c.key,f=c.style,g=c.styleSpec,b=g.terrain;let w=[];const E=Pi(o);if(o===void 0)return w;if(E!=="object")return w=w.concat([new _n("terrain",o,`object expected, ${E} found`)]),w;for(const A in o){const L=A.match(/^(.*)-transition$/);w=w.concat(L&&b[L[1]]&&b[L[1]].transition?Ps({key:A,value:o[A],valueSpec:g.transition,style:f,styleSpec:g}):b[A]?Ps({key:A,value:o[A],valueSpec:b[A],style:f,styleSpec:g}):[new _n(A,o[A],`unknown property "${A}"`)])}if(o.source){const A=f.sources&&f.sources[o.source],L=A&&Wi(A.type);A?L!=="raster-dem"&&w.push(new _n(d,o.source,`terrain cannot be used with a source of type ${String(L)}, it only be used with a "raster-dem" source type`)):w.push(new _n(d,o.source,`source "${o.source}" not found`))}else w.push(new _n(d,o,'terrain is missing required property "source"'));return w}function Og(c){const o=c.value,d=c.style,f=c.styleSpec,g=f.fog;let b=[];const w=Pi(o);if(o===void 0)return b;if(w!=="object")return b=b.concat([new _n("fog",o,`object expected, ${w} found`)]),b;for(const E in o){const A=E.match(/^(.*)-transition$/);b=b.concat(A&&g[A[1]]&&g[A[1]].transition?Ps({key:E,value:o[E],valueSpec:f.transition,style:d,styleSpec:f}):g[E]?Ps({key:E,value:o[E],valueSpec:g[E],style:d,styleSpec:f}):[new _n(E,o[E],`unknown property "${E}"`)])}return b}const Vm={"*":()=>[],array:Jh,boolean:function(c){const o=c.value,d=c.key,f=Pi(o);return f!=="boolean"?[new _n(d,o,`boolean expected, ${f} found`)]:[]},number:Dd,color:function(c){const o=c.key,d=c.value,f=Pi(d);return f!=="string"?[new _n(o,d,`color expected, ${f} found`)]:Is(d)===null?[new _n(o,d,`color expected, "${d}" found`)]:[]},enum:Qh,filter:Od,function:Ld,layer:Mg,object:ea,source:Lg,light:Rg,terrain:rf,fog:Og,string:Tc,formatted:function(c){return Tc(c).length===0?[]:As(c)},resolvedImage:function(c){return Tc(c).length===0?[]:As(c)},projection:function(c){const o=c.value,d=c.styleSpec,f=d.projection,g=c.style;let b=[];const w=Pi(o);if(w==="object")for(const E in o)b=b.concat(Ps({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:d}));else w!=="string"&&(b=b.concat([new _n("projection",o,`object or string expected, ${w} found`)]));return b}};function Ps(c){const o=c.value,d=c.valueSpec,f=c.styleSpec;return d.expression&&Cd(Wi(o))?Ld(c):d.expression&&Pu(Qi(o))?As(c):d.type&&Vm[d.type]?Vm[d.type](c):ea(pa({},c,{valueSpec:d.type?f[d.type]:d}))}function Vg(c){const o=c.value,d=c.key,f=Tc(c);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new _n(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new _n(d,o,'"glyphs" url must include a "{range}" token'))),f}function Sc(c,o=Ot){return ta(Ps({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,objectElementValidators:{glyphs:Vg,"*":()=>[]}}))}const Bg=c=>ta(Pg(c)),Bm=c=>ta(Om(c));function ta(c){return c.slice().sort(((o,d)=>o.line&&d.line?o.line-d.line:0))}function sf(c,o){let d=!1;if(o&&o.length)for(const f of o)c.fire(new Io(new Error(f.message))),d=!0;return d}var Fg=wl,na=3;function wl(c,o,d){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(o=g[1])+2*(d=g[2]);for(var b=0;b<this.d*this.d;b++){var w=g[na+b],E=g[na+b+1];f.push(w===E?null:g.subarray(w,E))}var A=g[na+f.length+1];this.keys=g.subarray(g[na+f.length],A),this.bboxes=g.subarray(A),this.insert=this._insertReadonly}else{this.d=o+2*d;for(var L=0;L<this.d*this.d;L++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=c,this.padding=d,this.scale=o/c,this.uid=0;var N=d/o*c;this.min=-N,this.max=c+N}wl.prototype.insert=function(c,o,d,f,g){this._forEachCell(o,d,f,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(g)},wl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wl.prototype._insertCell=function(c,o,d,f,g,b){this.cells[g].push(b)},wl.prototype.query=function(c,o,d,f,g){var b=this.min,w=this.max;if(c<=b&&o<=b&&w<=d&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(c,o,d,f,this._queryCell,E,{},g),E},wl.prototype._queryCell=function(c,o,d,f,g,b,w,E){var A=this.cells[g];if(A!==null)for(var L=this.keys,N=this.bboxes,W=0;W<A.length;W++){var Q=A[W];if(w[Q]===void 0){var re=4*Q;(E?E(N[re+0],N[re+1],N[re+2],N[re+3]):c<=N[re+2]&&o<=N[re+3]&&d>=N[re+0]&&f>=N[re+1])?(w[Q]=!0,b.push(L[Q])):w[Q]=!1}}},wl.prototype._forEachCell=function(c,o,d,f,g,b,w,E){for(var A=this._convertToCellCoord(c),L=this._convertToCellCoord(o),N=this._convertToCellCoord(d),W=this._convertToCellCoord(f),Q=A;Q<=N;Q++)for(var re=L;re<=W;re++){var oe=this.d*re+Q;if((!E||E(this._convertFromCellCoord(Q),this._convertFromCellCoord(re),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(re+1)))&&g.call(this,c,o,d,f,oe,b,w,E))return}},wl.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},wl.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},wl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,o=na+this.cells.length+1+1,d=0,f=0;f<this.cells.length;f++)d+=this.cells[f].length;var g=new Int32Array(o+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var b=o,w=0;w<c.length;w++){var E=c[w];g[na+w]=b,g.set(E,b),b+=E.length}return g[na+c.length]=b,g.set(this.keys,b),g[na+c.length+1]=b+=this.keys.length,g.set(this.bboxes,b),b+=this.bboxes.length,g.buffer};var ia=q(Fg);const il={};function Sn(c,o,d={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),il[o]={klass:c,omit:d.omit||[]}}Sn(Object,"Object"),ia.serialize=function(c,o){const d=c.toArrayBuffer();return o&&o.push(d),{buffer:d}},ia.deserialize=function(c){return new ia(c.buffer)},Object.defineProperty(ia,"name",{value:"Grid"}),Sn(ia,"Grid"),Sn(Gi,"Color"),Sn(Error,"Error"),Sn(Ji,"AJAXError"),Sn(as,"ResolvedImage"),Sn(Pd,"StylePropertyFunction"),Sn(Zh,"StyleExpression",{omit:["_evaluator"]}),Sn(xc,"ZoomDependentExpression"),Sn(Id,"ZoomConstantExpression"),Sn(ba,"CompoundExpression",{omit:["_evaluate"]});for(const c in Ed)il[Ed[c]._classRegistryKey]||Sn(Ed[c],`Expression${c}`);function Fm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function zm(c){return p.ImageBitmap&&c instanceof p.ImageBitmap}function Du(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Fm(c)||zm(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const d=c;return o&&o.push(d.buffer),d}if(c instanceof p.ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const d=[];for(const f of c)d.push(Du(f,o));return d}if(typeof c=="object"){const d=c.constructor,f=d._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=d.serialize?d.serialize(c,o):{};if(!d.serialize){for(const b in c)c.hasOwnProperty(b)&&(il[f].omit.indexOf(b)>=0||(g[b]=Du(c[b],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function Jc(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Fm(c)||zm(c)||ArrayBuffer.isView(c)||c instanceof p.ImageData)return c;if(Array.isArray(c))return c.map(Jc);if(typeof c=="object"){const o=c.$name||"Object",{klass:d}=il[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(c);const f=Object.create(d.prototype);for(const g of Object.keys(c))g!=="$name"&&(f[g]=Jc(c[g]));return f}throw new Error("can't deserialize object of type "+typeof c)}const bn={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Nm(c){for(const o of c)if(Lu(o.charCodeAt(0)))return!0;return!1}function U_(c){for(const o of c)if(!$m(o.charCodeAt(0)))return!1;return!0}function $m(c){return!(bn.Arabic(c)||bn["Arabic Supplement"](c)||bn["Arabic Extended-A"](c)||bn["Arabic Presentation Forms-A"](c)||bn["Arabic Presentation Forms-B"](c))}function Lu(c){return!(c!==746&&c!==747&&(c<4352||!(bn["Bopomofo Extended"](c)||bn.Bopomofo(c)||bn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||bn["CJK Compatibility Ideographs"](c)||bn["CJK Compatibility"](c)||bn["CJK Radicals Supplement"](c)||bn["CJK Strokes"](c)||!(!bn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||bn["CJK Unified Ideographs Extension A"](c)||bn["CJK Unified Ideographs"](c)||bn["Enclosed CJK Letters and Months"](c)||bn["Hangul Compatibility Jamo"](c)||bn["Hangul Jamo Extended-A"](c)||bn["Hangul Jamo Extended-B"](c)||bn["Hangul Jamo"](c)||bn["Hangul Syllables"](c)||bn.Hiragana(c)||bn["Ideographic Description Characters"](c)||bn.Kanbun(c)||bn["Kangxi Radicals"](c)||bn["Katakana Phonetic Extensions"](c)||bn.Katakana(c)&&c!==12540||!(!bn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!bn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||bn["Unified Canadian Aboriginal Syllabics"](c)||bn["Unified Canadian Aboriginal Syllabics Extended"](c)||bn["Vertical Forms"](c)||bn["Yijing Hexagram Symbols"](c)||bn["Yi Syllables"](c)||bn["Yi Radicals"](c))))}function Vd(c){return!(Lu(c)||(function(o){return!!(bn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||bn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||bn["Letterlike Symbols"](o)||bn["Number Forms"](o)||bn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||bn["Control Pictures"](o)&&o!==9251||bn["Optical Character Recognition"](o)||bn["Enclosed Alphanumerics"](o)||bn["Geometric Shapes"](o)||bn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||bn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||bn["CJK Symbols and Punctuation"](o)||bn.Katakana(o)||bn["Private Use Area"](o)||bn["CJK Compatibility Forms"](o)||bn["Small Form Variants"](o)||bn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}function zg(c){return c>=1424&&c<=2303||bn["Arabic Presentation Forms-A"](c)||bn["Arabic Presentation Forms-B"](c)}function j_(c,o){return!(!o&&zg(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||bn.Khmer(c))}function Bd(c){for(const o of c)if(zg(o.charCodeAt(0)))return!0;return!1}const ve="deferred",z="loading",se="loaded";let Me=null,_="unavailable",u=null;const m=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(_="error"),Me&&Me(c)};function y(){S.fire(new qo("pluginStateChange",{pluginStatus:_,pluginURL:u}))}const S=new Nl,k=function(){return _},R=function(){if(_!==ve||!u)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_=z,y(),u&&Eo({url:u},(c=>{c?m(c):(_=se,y())}))},O={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_===se||O.applyArabicShaping!=null,isLoading:()=>_===z,setState(c){_=c.pluginStatus,u=c.pluginURL},isParsed:()=>O.applyArabicShaping!=null&&O.processBidirectionalText!=null&&O.processStyledBidirectionalText!=null,getPluginURL:()=>u};class U{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.transition=d.transition,this.pitch=d.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return(function(d,f){for(const g of d)if(!j_(g.charCodeAt(0),f))return!1;return!0})(o,O.isLoaded())}}class Y{constructor(o,d){this.property=o,this.value=d,this.expression=(function(f,g){if(Cd(f))return new Pd(f,g);if(Pu(f)){const b=Ad(f,g);if(b.result==="error")throw new Error(b.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return b.value}{let b=f;return typeof f=="string"&&g.type==="color"&&(b=Gi.parse(f)),{kind:"constant",evaluate:()=>b}}})(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,f){return this.property.possiblyEvaluate(this,o,d,f)}}class J{constructor(o){this.property=o,this.value=new Y(o,void 0)}transitioned(o,d){return new pe(this.property,this.value,d,ct({},o.transition,this.transition),o.now)}untransitioned(){return new pe(this.property,this.value,null,{},0)}}class ae{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return _e(this._values[o].value.value)}setValue(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new J(this._values[o].property)),this._values[o].value=new Y(this._values[o].property,d===null?void 0:_e(d))}getTransition(o){return _e(this._values[o].transition)}setTransition(o,d){this._values.hasOwnProperty(o)||(this._values[o]=new J(this._values[o].property)),this._values[o].transition=_e(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f);const g=this.getTransition(d);g!==void 0&&(o[`${d}-transition`]=g)}return o}transitioned(o,d){const f=new Te(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,d._values[g]);return f}untransitioned(){const o=new Te(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class pe{constructor(o,d,f,g,b){const w=g.delay||0,E=g.duration||0;b=b||0,this.property=o,this.value=d,this.begin=b+w,this.end=this.begin+E,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,d,f){const g=o.now||0,b=this.value.possiblyEvaluate(o,d,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(g<this.begin)return w.possiblyEvaluate(o,d,f);{const E=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,d,f),b,Ve(E))}}return b}}class Te{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,f){const g=new Ae(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class ke{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return _e(this._values[o].value)}setValue(o,d){this._values[o]=new Y(this._values[o].property,d===null?void 0:_e(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const f=this.getValue(d);f!==void 0&&(o[d]=f)}return o}possiblyEvaluate(o,d,f){const g=new Ae(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].possiblyEvaluate(o,d,f);return g}}class Se{constructor(o,d,f){this.property=o,this.value=d,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,f,g){return this.property.evaluate(this.value,this.parameters,o,d,f,g)}}class Ae{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class ce{constructor(o){this.specification=o}possiblyEvaluate(o,d){return o.expression.evaluate(d)}interpolate(o,d,f){const g=Zs[this.specification.type];return g?g(o,d,f):o}}class xe{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,f,g){return new Se(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},f,g)}:o.expression,d)}interpolate(o,d,f){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new Se(this,{kind:"constant",value:void 0},o.parameters);const g=Zs[this.specification.type];return g?new Se(this,{kind:"constant",value:g(o.value.value,d.value.value,f)},o.parameters):o}evaluate(o,d,f,g,b,w){return o.kind==="constant"?o.value:o.evaluate(d,f,g,b,w)}}class De{constructor(o){this.specification=o}possiblyEvaluate(o,d,f,g){return!!o.expression.evaluate(d,null,{},f,g)}interpolate(){return!1}}class Re{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const d=new U(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const b=this.defaultPropertyValues[f]=new Y(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new J(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=b.possiblyEvaluate(d)}}}function Ge(c,o){return 256*(c=Pe(Math.floor(c),0,255))+Pe(Math.floor(o),0,255)}Sn(xe,"DataDrivenProperty"),Sn(ce,"DataConstantProperty"),Sn(De,"ColorRampProperty");const Ye={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class et{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ht{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function lt(c,o=1){let d=0,f=0;return{members:c.map((g=>{const b=Ye[g.type].BYTES_PER_ELEMENT,w=d=xt(d,Math.max(o,b)),E=g.components||1;return f=Math.max(f,b),d+=b*E,{name:g.name,type:g.type,components:E,offset:w}})),size:xt(d,Math.max(f,o)),alignment:o}}function xt(c,o){return Math.ceil(c/o)*o}class Xt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.int16[g+0]=d,this.int16[g+1]=f,o}}Xt.prototype.bytesPerElement=4,Sn(Xt,"StructArrayLayout2i4");class ft extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.int16[b+0]=d,this.int16[b+1]=f,this.int16[b+2]=g,o}}ft.prototype.bytesPerElement=6,Sn(ft,"StructArrayLayout3i6");class Bt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.int16[w+0]=d,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=b,o}}Bt.prototype.bytesPerElement=8,Sn(Bt,"StructArrayLayout4i8");class Et extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const A=this.length;return this.resize(A+1),this.emplace(A,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,A){const L=6*o,N=12*o,W=3*o;return this.int16[L+0]=d,this.int16[L+1]=f,this.uint8[N+4]=g,this.uint8[N+5]=b,this.uint8[N+6]=w,this.uint8[N+7]=E,this.float32[W+2]=A,o}}Et.prototype.bytesPerElement=12,Sn(Et,"StructArrayLayout2i4ub1f12");class Jt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.float32[w+0]=d,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=b,o}}Jt.prototype.bytesPerElement=16,Sn(Jt,"StructArrayLayout4f16");class _t extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=6*o,A=3*o;return this.uint16[E+0]=d,this.uint16[E+1]=f,this.uint16[E+2]=g,this.uint16[E+3]=b,this.float32[A+2]=w,o}}_t.prototype.bytesPerElement=12,Sn(_t,"StructArrayLayout4ui1f12");class At extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=4*o;return this.uint16[w+0]=d,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=b,o}}At.prototype.bytesPerElement=8,Sn(At,"StructArrayLayout4ui8");class qt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const A=6*o;return this.int16[A+0]=d,this.int16[A+1]=f,this.int16[A+2]=g,this.int16[A+3]=b,this.int16[A+4]=w,this.int16[A+5]=E,o}}qt.prototype.bytesPerElement=12,Sn(qt,"StructArrayLayout6i12");class jt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,A,L,N,W,Q){const re=this.length;return this.resize(re+1),this.emplace(re,o,d,f,g,b,w,E,A,L,N,W,Q)}emplace(o,d,f,g,b,w,E,A,L,N,W,Q,re){const oe=12*o;return this.int16[oe+0]=d,this.int16[oe+1]=f,this.int16[oe+2]=g,this.int16[oe+3]=b,this.uint16[oe+4]=w,this.uint16[oe+5]=E,this.uint16[oe+6]=A,this.uint16[oe+7]=L,this.int16[oe+8]=N,this.int16[oe+9]=W,this.int16[oe+10]=Q,this.int16[oe+11]=re,o}}jt.prototype.bytesPerElement=24,Sn(jt,"StructArrayLayout4i4ui4i24");class Qt extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,f,g,b,w)}emplace(o,d,f,g,b,w,E){const A=10*o,L=5*o;return this.int16[A+0]=d,this.int16[A+1]=f,this.int16[A+2]=g,this.float32[L+2]=b,this.float32[L+3]=w,this.float32[L+4]=E,o}}Qt.prototype.bytesPerElement=20,Sn(Qt,"StructArrayLayout3i3f20");class Rn extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Rn.prototype.bytesPerElement=4,Sn(Rn,"StructArrayLayout1ul4");class Kn extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,A,L,N,W,Q,re){const oe=this.length;return this.resize(oe+1),this.emplace(oe,o,d,f,g,b,w,E,A,L,N,W,Q,re)}emplace(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe){const he=20*o,Ce=10*o;return this.int16[he+0]=d,this.int16[he+1]=f,this.int16[he+2]=g,this.int16[he+3]=b,this.int16[he+4]=w,this.float32[Ce+3]=E,this.float32[Ce+4]=A,this.float32[Ce+5]=L,this.float32[Ce+6]=N,this.int16[he+14]=W,this.uint32[Ce+8]=Q,this.uint16[he+18]=re,this.uint16[he+19]=oe,o}}Kn.prototype.bytesPerElement=40,Sn(Kn,"StructArrayLayout5i4f1i1ul2ui40");class En extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E){const A=this.length;return this.resize(A+1),this.emplace(A,o,d,f,g,b,w,E)}emplace(o,d,f,g,b,w,E,A){const L=8*o;return this.int16[L+0]=d,this.int16[L+1]=f,this.int16[L+2]=g,this.int16[L+4]=b,this.int16[L+5]=w,this.int16[L+6]=E,this.int16[L+7]=A,o}}En.prototype.bytesPerElement=16,Sn(En,"StructArrayLayout3i2i2i16");class Vn extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=4*o,A=8*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.int16[A+6]=b,this.int16[A+7]=w,o}}Vn.prototype.bytesPerElement=16,Sn(Vn,"StructArrayLayout2f1f2i16");class _i extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=12*o,E=3*o;return this.uint8[w+0]=d,this.uint8[w+1]=f,this.float32[E+1]=g,this.float32[E+2]=b,o}}_i.prototype.bytesPerElement=12,Sn(_i,"StructArrayLayout2ub2f12");class vi extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.float32[b+0]=d,this.float32[b+1]=f,this.float32[b+2]=g,o}}vi.prototype.bytesPerElement=12,Sn(vi,"StructArrayLayout3f12");class Mn extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,d,f)}emplace(o,d,f,g){const b=3*o;return this.uint16[b+0]=d,this.uint16[b+1]=f,this.uint16[b+2]=g,o}}Mn.prototype.bytesPerElement=6,Sn(Mn,"StructArrayLayout3ui6");class Bi extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt){const tt=this.length;return this.resize(tt+1),this.emplace(tt,o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt)}emplace(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt,tt){const Ct=30*o,St=15*o,$t=60*o;return this.int16[Ct+0]=d,this.int16[Ct+1]=f,this.int16[Ct+2]=g,this.float32[St+2]=b,this.float32[St+3]=w,this.uint16[Ct+8]=E,this.uint16[Ct+9]=A,this.uint32[St+5]=L,this.uint32[St+6]=N,this.uint32[St+7]=W,this.uint16[Ct+16]=Q,this.uint16[Ct+17]=re,this.uint16[Ct+18]=oe,this.float32[St+10]=he,this.float32[St+11]=Ce,this.uint8[$t+48]=Oe,this.uint8[$t+49]=qe,this.uint8[$t+50]=Be,this.uint32[St+13]=je,this.int16[Ct+28]=nt,this.uint8[$t+58]=tt,o}}Bi.prototype.bytesPerElement=60,Sn(Bi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class qi extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt,tt,Ct,St,$t,on,Mt,Wt,Ht,en){const dn=this.length;return this.resize(dn+1),this.emplace(dn,o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt,tt,Ct,St,$t,on,Mt,Wt,Ht,en)}emplace(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce,Oe,qe,Be,je,nt,tt,Ct,St,$t,on,Mt,Wt,Ht,en,dn){const Ft=38*o,yn=19*o;return this.int16[Ft+0]=d,this.int16[Ft+1]=f,this.int16[Ft+2]=g,this.float32[yn+2]=b,this.float32[yn+3]=w,this.int16[Ft+8]=E,this.int16[Ft+9]=A,this.int16[Ft+10]=L,this.int16[Ft+11]=N,this.int16[Ft+12]=W,this.int16[Ft+13]=Q,this.uint16[Ft+14]=re,this.uint16[Ft+15]=oe,this.uint16[Ft+16]=he,this.uint16[Ft+17]=Ce,this.uint16[Ft+18]=Oe,this.uint16[Ft+19]=qe,this.uint16[Ft+20]=Be,this.uint16[Ft+21]=je,this.uint16[Ft+22]=nt,this.uint16[Ft+23]=tt,this.uint16[Ft+24]=Ct,this.uint16[Ft+25]=St,this.uint16[Ft+26]=$t,this.uint16[Ft+27]=on,this.uint16[Ft+28]=Mt,this.uint32[yn+15]=Wt,this.float32[yn+16]=Ht,this.float32[yn+17]=en,this.float32[yn+18]=dn,o}}qi.prototype.bytesPerElement=76,Sn(qi,"StructArrayLayout3i2f6i15ui1ul3f76");class er extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}er.prototype.bytesPerElement=4,Sn(er,"StructArrayLayout1f4");class Ki extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,f,g,b){const w=this.length;return this.resize(w+1),this.emplace(w,o,d,f,g,b)}emplace(o,d,f,g,b,w){const E=5*o;return this.float32[E+0]=d,this.float32[E+1]=f,this.float32[E+2]=g,this.float32[E+3]=b,this.float32[E+4]=w,o}}Ki.prototype.bytesPerElement=20,Sn(Ki,"StructArrayLayout5f20");class Ws extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,f,g){const b=this.length;return this.resize(b+1),this.emplace(b,o,d,f,g)}emplace(o,d,f,g,b){const w=6*o;return this.uint32[3*o+0]=d,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=b,o}}Ws.prototype.bytesPerElement=12,Sn(Ws,"StructArrayLayout1ul3ui12");class Ms extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.uint16[g+0]=d,this.uint16[g+1]=f,o}}Ms.prototype.bytesPerElement=4,Sn(Ms,"StructArrayLayout2ui4");class Sa extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}Sa.prototype.bytesPerElement=2,Sn(Sa,"StructArrayLayout1ui2");class Js extends ht{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,d)}emplace(o,d,f){const g=2*o;return this.float32[g+0]=d,this.float32[g+1]=f,o}}Js.prototype.bytesPerElement=8,Sn(Js,"StructArrayLayout2f8");class sr extends et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}sr.prototype.size=40;class Xi extends Kn{get(o){return new sr(this,o)}}Sn(Xi,"CollisionBoxArray");class Mi extends et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}Mi.prototype.size=60;class Fr extends Bi{get(o){return new Mi(this,o)}}Sn(Fr,"PlacedSymbolArray");class Qs extends et{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Qs.prototype.size=76;class lr extends qi{get(o){return new Qs(this,o)}}Sn(lr,"SymbolInstanceArray");class fo extends er{getoffsetX(o){return this.float32[1*o+0]}}Sn(fo,"GlyphOffsetArray");class Fd extends Xt{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}Sn(Fd,"SymbolLineVertexArray");class Qc extends et{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Qc.prototype.size=12;class zd extends Ws{get(o){return new Qc(this,o)}}Sn(zd,"FeatureIndexArray");class rl extends Ms{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}Sn(rl,"FillExtrusionCentroidArray");const Kl=lt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Nd=lt([{name:"a_dash",components:4,type:"Uint16"}]);var Ng={exports:{}},Um={exports:{}};Um.exports=function(c,o){var d,f,g,b,w,E,A,L;for(f=c.length-(d=3&c.length),g=o,w=3432918353,E=461845907,L=0;L<f;)A=255&c.charCodeAt(L)|(255&c.charCodeAt(++L))<<8|(255&c.charCodeAt(++L))<<16|(255&c.charCodeAt(++L))<<24,++L,g=27492+(65535&(b=5*(65535&(g=(g^=A=(65535&(A=(A=(65535&A)*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*E+(((A>>>16)*E&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(A=0,d){case 3:A^=(255&c.charCodeAt(L+2))<<16;case 2:A^=(255&c.charCodeAt(L+1))<<8;case 1:g^=A=(65535&(A=(A=(65535&(A^=255&c.charCodeAt(L)))*w+(((A>>>16)*w&65535)<<16)&4294967295)<<15|A>>>17))*E+(((A>>>16)*E&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var W_=Um.exports,FM={exports:{}};FM.exports=function(c,o){for(var d,f=c.length,g=o^f,b=0;f>=4;)d=1540483477*(65535&(d=255&c.charCodeAt(b)|(255&c.charCodeAt(++b))<<8|(255&c.charCodeAt(++b))<<16|(255&c.charCodeAt(++b))<<24))+((1540483477*(d>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++b;switch(f){case 3:g^=(255&c.charCodeAt(b+2))<<16;case 2:g^=(255&c.charCodeAt(b+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(b)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var zM=W_,l$=FM.exports;Ng.exports=zM,Ng.exports.murmur3=zM,Ng.exports.murmur2=l$;var kS=q(Ng.exports);class ex{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,f,g){this.ids.push(NM(o)),this.positions.push(d,f,g)}getPositions(o){const d=NM(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=d?g=w:f=w+1}const b=[];for(;this.ids[f]===d;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(o,d){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return IS(f,g,0,f.length-1),d&&d.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const d=new ex;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function NM(c){const o=+c;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:kS(String(c))}function IS(c,o,d,f){for(;d<f;){const g=c[d+f>>1];let b=d-1,w=f+1;for(;;){do b++;while(c[b]<g);do w--;while(c[w]>g);if(b>=w)break;tx(c,b,w),tx(o,3*b,3*w),tx(o,3*b+1,3*w+1),tx(o,3*b+2,3*w+2)}w-d<f-w?(IS(c,o,d,w),d=w+1):(IS(c,o,w+1,f),f=w)}}function tx(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}Sn(ex,"FeaturePositionMap");class $d{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,d){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,d),this.initialized=!0),!!this.location}}class nx extends $d{constructor(o){super(o),this.current=0}set(o,d,f){this.fetchUniformLocation(o,d)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class $M extends $d{constructor(o){super(o),this.current=[0,0,0,0]}set(o,d,f){this.fetchUniformLocation(o,d)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class UM extends $d{constructor(o){super(o),this.current=Gi.transparent}set(o,d,f){this.fetchUniformLocation(o,d)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const c$=new Float32Array(16),u$=new Float32Array(9),d$=new Float32Array(4);function AS(c){return[Ge(255*c.r,255*c.g),Ge(255*c.b,255*c.a)]}class H_{constructor(o,d,f){this.value=o,this.uniformNames=d.map((g=>`u_${g}`)),this.type=f}setUniform(o,d,f,g,b){d.set(o,b,g.constantOr(this.value))}getBinding(o,d){return this.type==="color"?new UM(o):new nx(o)}}class $g{constructor(o,d){this.uniformNames=d.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,d,f,g,b){const w=b==="u_pattern"||b==="u_dash"?this.pattern:b==="u_pixel_ratio"?this.pixelRatio:null;w&&d.set(o,b,w)}getBinding(o,d){return d==="u_pattern"||d==="u_dash"?new $M(o):new nx(o)}}class Ud{constructor(o,d,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=d.map((b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(o,d,f,g,b,w){const E=this.paintVertexArray.length,A=this.expression.evaluate(new U(0),d,{},b,g,w);this.paintVertexArray.resize(o),this._setPaintValue(E,o,A)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:0},f,g,void 0,b);this._setPaintValue(o,d,w)}_setPaintValue(o,d,f){if(this.type==="color"){const g=AS(f);for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,g[0],g[1])}else{for(let g=o;g<d;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class eu{constructor(o,d,f,g,b,w){this.expression=o,this.uniformNames=d.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=d.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(o,d,f,g,b,w){const E=this.expression.evaluate(new U(this.zoom),d,{},b,g,w),A=this.expression.evaluate(new U(this.zoom+1),d,{},b,g,w),L=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(L,o,E,A)}updatePaintArray(o,d,f,g,b){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,b),E=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,b);this._setPaintValue(o,d,w,E)}_setPaintValue(o,d,f,g){if(this.type==="color"){const b=AS(f),w=AS(g);for(let E=o;E<d;E++)this.paintVertexArray.emplace(E,b[0],b[1],w[0],w[1])}else{for(let b=o;b<d;b++)this.paintVertexArray.emplace(b,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d,f,g,b){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=Pe(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);d.set(o,b,E)}getBinding(o,d){return new nx(o)}}class of{constructor(o,d,f,g,b){this.expression=o,this.layerId=b,this.paintVertexAttributes=(f==="array"?Nd:Kl).members;for(let w=0;w<d.length;++w);this.paintVertexArray=new g}populatePaintArray(o,d,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,d.patterns&&d.patterns[this.layerId],f)}updatePaintArray(o,d,f,g,b,w){this._setPaintValues(o,d,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,d,f,g){if(!g||!f)return;const b=g[f];if(!b)return;const{tl:w,br:E,pixelRatio:A}=b;for(let L=o;L<d;L++)this.paintVertexArray.emplace(L,w[0],w[1],E[0],E[1],A)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class af{constructor(o,d,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const b in o.paint._values){if(!f(b))continue;const w=o.paint.get(b);if(!(w instanceof Se&&Iu(w.property.specification)))continue;const E=f$(b,o.type),A=w.value,L=w.property.specification.type,N=!!w.property.useIntegerZoom,W=b==="line-dasharray"||b.endsWith("pattern"),Q=b==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(A.kind!=="constant"||Q)if(A.kind==="source"||Q||W){const re=jM(b,L,"source");this.binders[b]=W?new of(A,E,L,re,o.id):new Ud(A,E,L,re),g.push(`/a_${b}`)}else{const re=jM(b,L,"composite");this.binders[b]=new eu(A,E,L,N,d,re),g.push(`/z_${b}`)}else this.binders[b]=W?new $g(A.value,E):new H_(A.value,E,L),g.push(`/u_${b}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof Ud||d instanceof eu?d.maxValue:0}populatePaintArrays(o,d,f,g,b,w){for(const E in this.binders){const A=this.binders[E];(A instanceof Ud||A instanceof eu||A instanceof of)&&A.populatePaintArray(o,d,f,g,b,w)}}setConstantPatternPositions(o){for(const d in this.binders){const f=this.binders[d];f instanceof $g&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,d,f,g,b,w){let E=!1;for(const A in o){const L=d.getPositions(A);for(const N of L){const W=f.feature(N.index);for(const Q in this.binders){const re=this.binders[Q];if((re instanceof Ud||re instanceof eu||re instanceof of)&&re.expression.isStateDependent===!0){const oe=g.paint.get(Q);re.expression=oe.value,re.updatePaintArray(N.start,N.end,W,o[A],b,w),E=!0}}}}return E}defines(){const o=[];for(const d in this.binders){const f=this.binders[d];(f instanceof H_||f instanceof $g)&&o.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof Ud||f instanceof eu||f instanceof of)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof H_||f instanceof $g||f instanceof eu)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const d=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof H_||g instanceof $g||g instanceof eu)for(const b of g.uniformNames)d.push({name:b,property:f,binding:g.getBinding(o,b)})}return d}setUniforms(o,d,f,g,b){for(const{name:w,property:E,binding:A}of f)this.binders[E].setUniform(o,A,b,g.get(E),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const d=this.binders[o];(d instanceof Ud||d instanceof eu||d instanceof of)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const d in this.binders){const f=this.binders[d];(f instanceof Ud||f instanceof eu||f instanceof of)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof Ud||d instanceof eu||d instanceof of)&&d.destroy()}}}class jm{constructor(o,d,f=(()=>!0)){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new af(g,d,f);this.needsUpload=!1,this._featureMap=new ex,this._bufferOffset=0}populatePaintArrays(o,d,f,g,b,w,E){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(o,d,g,b,w,E);d.id!==void 0&&this._featureMap.add(d.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,f,g,b){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(o,this._featureMap,d,w,g,b)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const h$={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function f$(c,o){return h$[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const m$={"line-pattern":{source:_t,composite:_t},"fill-pattern":{source:_t,composite:_t},"fill-extrusion-pattern":{source:_t,composite:_t},"line-dasharray":{source:At,composite:At}},p$={color:{source:Js,composite:Jt},number:{source:er,composite:Js}};function jM(c,o,d){const f=m$[c];return f&&f[d]||p$[o][d]}Sn(H_,"ConstantBinder"),Sn($g,"PatternConstantBinder"),Sn(Ud,"SourceExpressionBinder"),Sn(of,"PatternCompositeBinder"),Sn(eu,"CompositeExpressionBinder"),Sn(af,"ProgramConfiguration",{omit:["_buffers"]}),Sn(jm,"ProgramConfigurationSet");const WM="-transition";class tu extends Nl{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&o.type!=="sky"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new ke(d.layout)),d.paint)){this._transitionablePaint=new ae(d.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ae(d.paint)}}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,f={}){d!=null&&this._validate(Bm,`layers.${this.id}.layout.${o}`,o,d,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return Ne(o,WM)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,f={}){if(d!=null&&this._validate(Bg,`layers.${this.id}.paint.${o}`,o,d,f))return!1;if(Ne(o,WM))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const g=this._transitionablePaint._values[o],b=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value,A=E.isDataDriven(),L=Ne(o,"pattern")||o==="line-dasharray";return A||b||L||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,d,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),we(o,((d,f)=>!(d===void 0||f==="layout"&&!Object.keys(d).length||f==="paint"&&!Object.keys(d).length)))}_validate(o,d,f,g,b={}){return(!b||b.validate!==!1)&&sf(this,o.call(Sc,{key:d,layerType:this.type,objectKey:f,value:g,styleSpec:Ot,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof Se&&Iu(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ef(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const g$=lt([{name:"a_pos",components:2,type:"Int16"}],4),v$=lt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ms{constructor(o=[]){this.segments=o}prepareSegment(o,d,f,g){let b=this.segments[this.segments.length-1];return o>ms.MAX_VERTEX_ARRAY_LENGTH&&Fe(`Max vertices per segment is ${ms.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!b||b.vertexLength+o>ms.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==g)&&(b={vertexOffset:d.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(b.sortKey=g),this.segments.push(b)),b}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,f,g){return new ms([{vertexOffset:o,primitiveOffset:d,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}ms.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sn(ms,"SegmentVector");var Nn=8192;class lf{constructor(o,d){o&&(d?this.setSouthWest(o).setNorthEast(d):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof cr?new cr(o.lng,o.lat):cr.convert(o),this}setSouthWest(o){return this._sw=o instanceof cr?new cr(o.lng,o.lat):cr.convert(o),this}extend(o){const d=this._sw,f=this._ne;let g,b;if(o instanceof cr)g=o,b=o;else{if(!(o instanceof lf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(lf.convert(o)):this.extend(cr.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(cr.convert(o)):this;if(g=o._sw,b=o._ne,!g||!b)return this}return d||f?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new cr(g.lng,g.lat),this._ne=new cr(b.lng,b.lat)),this}getCenter(){return new cr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new cr(this.getWest(),this.getNorth())}getSouthEast(){return new cr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:d,lat:f}=cr.convert(o);let g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof lf?o:new lf(o)}}var ix=1e-6,Tl=typeof Float32Array<"u"?Float32Array:Array;function HM(){var c=new Tl(9);return Tl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function GM(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],A=o[5],L=o[6],N=o[7],W=o[8],Q=d[0],re=d[1],oe=d[2],he=d[3],Ce=d[4],Oe=d[5],qe=d[6],Be=d[7],je=d[8];return c[0]=Q*f+re*w+oe*L,c[1]=Q*g+re*E+oe*N,c[2]=Q*b+re*A+oe*W,c[3]=he*f+Ce*w+Oe*L,c[4]=he*g+Ce*E+Oe*N,c[5]=he*b+Ce*A+Oe*W,c[6]=qe*f+Be*w+je*L,c[7]=qe*g+Be*E+je*N,c[8]=qe*b+Be*A+je*W,c}function nu(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function PS(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],A=o[6],L=o[7],N=o[8],W=o[9],Q=o[10],re=o[11],oe=o[12],he=o[13],Ce=o[14],Oe=o[15],qe=d*E-f*w,Be=d*A-g*w,je=d*L-b*w,nt=f*A-g*E,tt=f*L-b*E,Ct=g*L-b*A,St=N*he-W*oe,$t=N*Ce-Q*oe,on=N*Oe-re*oe,Mt=W*Ce-Q*he,Wt=W*Oe-re*he,Ht=Q*Oe-re*Ce,en=qe*Ht-Be*Wt+je*Mt+nt*on-tt*$t+Ct*St;return en?(c[0]=(E*Ht-A*Wt+L*Mt)*(en=1/en),c[1]=(g*Wt-f*Ht-b*Mt)*en,c[2]=(he*Ct-Ce*tt+Oe*nt)*en,c[3]=(Q*tt-W*Ct-re*nt)*en,c[4]=(A*on-w*Ht-L*$t)*en,c[5]=(d*Ht-g*on+b*$t)*en,c[6]=(Ce*je-oe*Ct-Oe*Be)*en,c[7]=(N*Ct-Q*je+re*Be)*en,c[8]=(w*Wt-E*on+L*St)*en,c[9]=(f*on-d*Wt-b*St)*en,c[10]=(oe*tt-he*je+Oe*qe)*en,c[11]=(W*je-N*tt-re*qe)*en,c[12]=(E*$t-w*Mt-A*St)*en,c[13]=(d*Mt-f*$t+g*St)*en,c[14]=(he*Be-oe*nt-Ce*qe)*en,c[15]=(N*nt-W*Be+Q*qe)*en,c):null}function Wm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3],E=o[4],A=o[5],L=o[6],N=o[7],W=o[8],Q=o[9],re=o[10],oe=o[11],he=o[12],Ce=o[13],Oe=o[14],qe=o[15],Be=d[0],je=d[1],nt=d[2],tt=d[3];return c[0]=Be*f+je*E+nt*W+tt*he,c[1]=Be*g+je*A+nt*Q+tt*Ce,c[2]=Be*b+je*L+nt*re+tt*Oe,c[3]=Be*w+je*N+nt*oe+tt*qe,c[4]=(Be=d[4])*f+(je=d[5])*E+(nt=d[6])*W+(tt=d[7])*he,c[5]=Be*g+je*A+nt*Q+tt*Ce,c[6]=Be*b+je*L+nt*re+tt*Oe,c[7]=Be*w+je*N+nt*oe+tt*qe,c[8]=(Be=d[8])*f+(je=d[9])*E+(nt=d[10])*W+(tt=d[11])*he,c[9]=Be*g+je*A+nt*Q+tt*Ce,c[10]=Be*b+je*L+nt*re+tt*Oe,c[11]=Be*w+je*N+nt*oe+tt*qe,c[12]=(Be=d[12])*f+(je=d[13])*E+(nt=d[14])*W+(tt=d[15])*he,c[13]=Be*g+je*A+nt*Q+tt*Ce,c[14]=Be*b+je*L+nt*re+tt*Oe,c[15]=Be*w+je*N+nt*oe+tt*qe,c}function G_(c,o,d){var f,g,b,w,E,A,L,N,W,Q,re,oe,he=d[0],Ce=d[1],Oe=d[2];return o===c?(c[12]=o[0]*he+o[4]*Ce+o[8]*Oe+o[12],c[13]=o[1]*he+o[5]*Ce+o[9]*Oe+o[13],c[14]=o[2]*he+o[6]*Ce+o[10]*Oe+o[14],c[15]=o[3]*he+o[7]*Ce+o[11]*Oe+o[15]):(g=o[1],b=o[2],w=o[3],E=o[4],A=o[5],L=o[6],N=o[7],W=o[8],Q=o[9],re=o[10],oe=o[11],c[0]=f=o[0],c[1]=g,c[2]=b,c[3]=w,c[4]=E,c[5]=A,c[6]=L,c[7]=N,c[8]=W,c[9]=Q,c[10]=re,c[11]=oe,c[12]=f*he+E*Ce+W*Oe+o[12],c[13]=g*he+A*Ce+Q*Oe+o[13],c[14]=b*he+L*Ce+re*Oe+o[14],c[15]=w*he+N*Ce+oe*Oe+o[15]),c}function Hm(c,o,d){var f=d[0],g=d[1],b=d[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*b,c[9]=o[9]*b,c[10]=o[10]*b,c[11]=o[11]*b,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function MS(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[4],w=o[5],E=o[6],A=o[7],L=o[8],N=o[9],W=o[10],Q=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=b*g+L*f,c[5]=w*g+N*f,c[6]=E*g+W*f,c[7]=A*g+Q*f,c[8]=L*g-b*f,c[9]=N*g-w*f,c[10]=W*g-E*f,c[11]=Q*g-A*f,c}function rx(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],A=o[3],L=o[8],N=o[9],W=o[10],Q=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g-L*f,c[1]=w*g-N*f,c[2]=E*g-W*f,c[3]=A*g-Q*f,c[8]=b*f+L*g,c[9]=w*f+N*g,c[10]=E*f+W*g,c[11]=A*f+Q*g,c}function qM(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function KM(c,o,d){var f,g,b,w=d[0],E=d[1],A=d[2],L=Math.hypot(w,E,A);return L<ix?null:(w*=L=1/L,E*=L,A*=L,f=Math.sin(o),g=Math.cos(o),c[0]=w*w*(b=1-g)+g,c[1]=E*w*b+A*f,c[2]=A*w*b-E*f,c[3]=0,c[4]=w*E*b-A*f,c[5]=E*E*b+g,c[6]=A*E*b+w*f,c[7]=0,c[8]=w*A*b+E*f,c[9]=E*A*b-w*f,c[10]=A*A*b+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var _$=Wm;function DS(){var c=new Tl(3);return Tl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function XM(c){var o=new Tl(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function q_(c){return Math.hypot(c[0],c[1],c[2])}function Ug(c,o,d){var f=new Tl(3);return f[0]=c,f[1]=o,f[2]=d,f}function jd(c,o,d){return c[0]=o[0]+d[0],c[1]=o[1]+d[1],c[2]=o[2]+d[2],c}function LS(c,o,d){return c[0]=o[0]-d[0],c[1]=o[1]-d[1],c[2]=o[2]-d[2],c}function YM(c,o,d){return c[0]=o[0]*d[0],c[1]=o[1]*d[1],c[2]=o[2]*d[2],c}function K_(c,o,d){return c[0]=Math.min(o[0],d[0]),c[1]=Math.min(o[1],d[1]),c[2]=Math.min(o[2],d[2]),c}function X_(c,o,d){return c[0]=Math.max(o[0],d[0]),c[1]=Math.max(o[1],d[1]),c[2]=Math.max(o[2],d[2]),c}function Xl(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c}function Y_(c,o,d,f){return c[0]=o[0]+d[0]*f,c[1]=o[1]+d[1]*f,c[2]=o[2]+d[2]*f,c}function Ea(c,o){var d=o[0],f=o[1],g=o[2],b=d*d+f*f+g*g;return b>0&&(b=1/Math.sqrt(b)),c[0]=o[0]*b,c[1]=o[1]*b,c[2]=o[2]*b,c}function Ec(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function RS(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[0],E=d[1],A=d[2];return c[0]=g*A-b*E,c[1]=b*w-f*A,c[2]=f*E-g*w,c}function ls(c,o,d){var f=o[0],g=o[1],b=o[2],w=d[3]*f+d[7]*g+d[11]*b+d[15];return c[0]=(d[0]*f+d[4]*g+d[8]*b+d[12])/(w=w||1),c[1]=(d[1]*f+d[5]*g+d[9]*b+d[13])/w,c[2]=(d[2]*f+d[6]*g+d[10]*b+d[14])/w,c}function ZM(c,o,d){var f=d[0],g=d[1],b=d[2],w=o[0],E=o[1],A=o[2],L=g*A-b*E,N=b*w-f*A,W=f*E-g*w,Q=g*W-b*N,re=b*L-f*W,oe=f*N-g*L,he=2*d[3];return N*=he,W*=he,re*=2,oe*=2,c[0]=w+(L*=he)+(Q*=2),c[1]=E+N+re,c[2]=A+W+oe,c}var Z_,iu=LS,y$=YM,b$=q_;function JM(c,o,d){return c[0]=o[0]*d,c[1]=o[1]*d,c[2]=o[2]*d,c[3]=o[3]*d,c}function QM(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d*d+f*f+g*g+b*b;return w>0&&(w=1/Math.sqrt(w)),c[0]=d*w,c[1]=f*w,c[2]=g*w,c[3]=b*w,c}function Gm(c,o,d){var f=o[0],g=o[1],b=o[2],w=o[3];return c[0]=d[0]*f+d[4]*g+d[8]*b+d[12]*w,c[1]=d[1]*f+d[5]*g+d[9]*b+d[13]*w,c[2]=d[2]*f+d[6]*g+d[10]*b+d[14]*w,c[3]=d[3]*f+d[7]*g+d[11]*b+d[15]*w,c}function eD(){var c=new Tl(4);return Tl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function tD(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function nD(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),A=Math.cos(d);return c[0]=f*A+w*E,c[1]=g*A+b*E,c[2]=b*A-g*E,c[3]=w*A-f*E,c}function iD(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),A=Math.cos(d);return c[0]=f*A-b*E,c[1]=g*A+w*E,c[2]=b*A+f*E,c[3]=w*A-g*E,c}DS(),Z_=new Tl(4),Tl!=Float32Array&&(Z_[0]=0,Z_[1]=0,Z_[2]=0,Z_[3]=0);var x$=QM;DS(),Ug(1,0,0),Ug(0,1,0),eD(),eD(),HM();const w$=lt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:rD}=w$,sD=lt([{name:"a_pos_3",components:3,type:"Int16"}]);var J_=lt([{name:"a_pos",type:"Int16",components:2}]);class OS{constructor(o,d){this.pos=o,this.dir=d}intersectsPlane(o,d,f){const g=Ec(d,this.dir);if(Math.abs(g)<1e-6)return!1;const b=((o[0]-this.pos[0])*d[0]+(o[1]-this.pos[1])*d[1]+(o[2]-this.pos[2])*d[2])/g;return f[0]=this.pos[0]+this.dir[0]*b,f[1]=this.pos[1]+this.dir[1]*b,f[2]=this.pos[2]+this.dir[2]*b,!0}closestPointOnSphere(o,d,f){if((function(re,oe){var he=re[0],Ce=re[1],Oe=re[2],qe=oe[0],Be=oe[1],je=oe[2];return Math.abs(he-qe)<=ix*Math.max(1,Math.abs(he),Math.abs(qe))&&Math.abs(Ce-Be)<=ix*Math.max(1,Math.abs(Ce),Math.abs(Be))&&Math.abs(Oe-je)<=ix*Math.max(1,Math.abs(Oe),Math.abs(je))})(this.pos,o)||d===0)return f[0]=f[1]=f[2]=0,!1;const[g,b,w]=this.dir,E=this.pos[0]-o[0],A=this.pos[1]-o[1],L=this.pos[2]-o[2],N=g*g+b*b+w*w,W=2*(E*g+A*b+L*w),Q=W*W-4*N*(E*E+A*A+L*L-d*d);if(Q<0){const re=Math.max(-W/2,0),oe=E+g*re,he=A+b*re,Ce=L+w*re,Oe=Math.hypot(oe,he,Ce);return f[0]=oe*d/Oe,f[1]=he*d/Oe,f[2]=Ce*d/Oe,!1}{const re=(-W-Math.sqrt(Q))/(2*N);if(re<0){const oe=Math.hypot(E,A,L);return f[0]=E*d/oe,f[1]=A*d/oe,f[2]=L*d/oe,!1}return f[0]=E+g*re,f[1]=A+b*re,f[2]=L+w*re,!0}}}class VS{constructor(o,d,f,g,b){this.TL=o,this.TR=d,this.BR=f,this.BL=g,this.horizon=b}static fromInvProjectionMatrix(o,d,f){const g=[-1,1,1],b=[1,1,1],w=[1,-1,1],E=[-1,-1,1],A=ls(g,g,o),L=ls(b,b,o),N=ls(w,w,o),W=ls(E,E,o);return new VS(A,L,N,W,d/f)}}class BS{constructor(o,d){this.points=o,this.planes=d}static fromInvProjectionMatrix(o,d,f,g){const b=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((A=>{const L=Gm([],A,o),N=1/L[3]/d*b;return(function(W,Q,re){return W[0]=Q[0]*re[0],W[1]=Q[1]*re[1],W[2]=Q[2]*re[2],W[3]=Q[3]*re[3],W})(L,L,[N,N,g?1/L[3]:N,N])})),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((A=>{const L=Ea([],RS([],iu([],w[A[0]],w[A[1]]),iu([],w[A[2]],w[A[1]]))),N=-Ec(L,w[A[1]]);return L.concat(N)}));return new BS(w,E)}}class Ca{static fromPoints(o){const d=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)K_(d,d,g),X_(f,f,g);return new Ca(d,f)}static applyTransform(o,d){const f=o.getCorners();for(let g=0;g<f.length;++g)ls(f[g],f[g],d);return Ca.fromPoints(f)}constructor(o,d){this.min=o,this.max=d,this.center=Xl([],jd([],this.min,this.max),.5)}quadrant(o){const d=[o%2==0,o<2],f=XM(this.min),g=XM(this.max);for(let b=0;b<d.length;b++)f[b]=d[b]?this.min[b]:this.center[b],g[b]=d[b]?this.center[b]:this.max[b];return g[2]=this.max[2],new Ca(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,d=this.max;return[[o[0],o[1],o[2]],[d[0],o[1],o[2]],[d[0],d[1],o[2]],[o[0],d[1],o[2]],[o[0],o[1],d[2]],[d[0],o[1],d[2]],[d[0],d[1],d[2]],[o[0],d[1],d[2]]]}intersects(o){const d=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const b=o.planes[g];let w=0;for(let E=0;E<d.length;E++)w+=Ec(b,d[E])+b[3]>=0;if(w===0)return 0;w!==d.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let b=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<o.points.length;E++){const A=o.points[E][g]-this.min[g];b=Math.min(b,A),w=Math.max(w,A)}if(w<0||b>this.max[g]-this.min[g])return 0}return 1}}const FS=5,oD=6,Ru=Nn/Math.PI/2,T$=16383,qm=64,Q_=[qm,32,16],Cc=-Ru,kc=Ru,S$=[new Ca([Cc,Cc,Cc],[kc,kc,kc]),new Ca([Cc,Cc,Cc],[0,0,kc]),new Ca([0,Cc,Cc],[kc,0,kc]),new Ca([Cc,0,Cc],[0,kc,kc]),new Ca([0,0,Cc],[kc,kc,kc])];function sx(c){return c*Ru/ny}function aD(c,o,d,f=!0){const g=Xl([],c._camera.position,c.worldSize),b=[o,d,1,1];Gm(b,b,c.pixelMatrixInverse),JM(b,b,1/b[3]);const w=Ea([],iu([],b,g)),E=c.globeMatrix,A=[E[12],E[13],E[14]],L=iu([],A,g),N=q_(L),W=Ea([],L),Q=c.worldSize/(2*Math.PI),re=Ec(W,w),oe=Math.asin(Q/N);if(oe<Math.acos(re)){if(!f)return null;const on=[],Mt=[];Xl(on,w,N/re),Ea(Mt,iu(Mt,on,L)),Ea(w,jd(w,L,Xl(w,Mt,Math.tan(oe)*N)))}const he=[];new OS(g,w).closestPointOnSphere(A,Q,he);const Ce=Ea([],gn(E,0)),Oe=Ea([],gn(E,1)),qe=Ea([],gn(E,2)),Be=Ec(Ce,he),je=Ec(Oe,he),nt=Ec(qe,he),tt=be(Math.asin(-je/Q));let Ct=be(Math.atan2(Be,nt));Ct=c.center.lng+(function(on,Mt){const Wt=(Mt-on+180)%360-180;return Wt<-180?Wt+360:Wt})(c.center.lng,Ct);const St=Vu(Ct),$t=Pe(Bu(tt),0,1);return new Gg(St,$t)}class E${constructor(o,d,f){this.a=iu([],o,f),this.b=iu([],d,f),this.center=f;const g=Ea([],this.a),b=Ea([],this.b);this.angle=Math.acos(Ec(g,b))}}function zS(c,o){if(c.angle===0)return null;let d;return d=c.a[o]===0?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),d<0||d>1?null:(function(f,g,b,w){const E=Math.sin(b);return f*(Math.sin((1-w)*b)/E)+g*(Math.sin(w*b)/E)})(c.a[o],c.b[o],c.angle,Pe(d,0,1))+c.center[o]}function Ou(c){if(c.z<=1)return S$[c.z+2*c.y+c.x];const o=NS(ox(c));return Ca.fromPoints(o)}function Km(c,o,d){return Xl(c,c,1-d),Y_(c,c,o,d)}function lD(c,o){const d=Hg(o.zoom);if(d===0)return Ou(c);const f=ox(c),g=NS(f),b=Vu(f.getWest())*o.worldSize,w=Vu(f.getEast())*o.worldSize,E=Bu(f.getNorth())*o.worldSize,A=Bu(f.getSouth())*o.worldSize,L=[b,E,0],N=[w,E,0],W=[b,A,0],Q=[w,A,0],re=PS([],o.globeMatrix);return ls(L,L,re),ls(N,N,re),ls(W,W,re),ls(Q,Q,re),g[0]=Km(g[0],W,d),g[1]=Km(g[1],Q,d),g[2]=Km(g[2],N,d),g[3]=Km(g[3],L,d),Ca.fromPoints(g)}function cD(c,o,d){for(const f of c)ls(f,f,o),Xl(f,f,d)}function C$(c,o,d){const f=o/c.worldSize,g=c.globeMatrix;if(d.z<=1){const St=Ou(d).getCorners();return cD(St,g,f),Ca.fromPoints(St)}const b=ox(d),w=NS(b);cD(w,g,f);const E=Number.MAX_VALUE,A=[-E,-E,-E],L=[E,E,E];if(b.contains(c.center)){for(const on of w)K_(L,L,on),X_(A,A,on);A[2]=0;const St=c.point,$t=[St.x*f,St.y*f,0];return K_(L,L,$t),X_(A,A,$t),new Ca(L,A)}const N=[g[12]*f,g[13]*f,g[14]*f],W=b.getCenter(),Q=Pe(c.center.lat,-Vo,Vo),re=Pe(W.lat,-Vo,Vo),oe=Vu(c.center.lng),he=Bu(Q);let Ce=oe-Vu(W.lng);const Oe=he-Bu(re);Ce>.5?Ce-=1:Ce<-.5&&(Ce+=1);let qe=0;Math.abs(Ce)>Math.abs(Oe)?qe=Ce>=0?1:3:(qe=Oe>=0?0:2,Y_(N,N,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(ee(Oe>=0?b.getSouth():b.getNorth()))*Ru));const Be=w[qe],je=w[(qe+1)%4],nt=new E$(Be,je,N),tt=[zS(nt,0)||Be[0],zS(nt,1)||Be[1],zS(nt,2)||Be[2]],Ct=Hg(c.zoom);if(Ct>0){const St=(function({x:on,y:Mt,z:Wt},Ht,en,dn,Ft){const yn=1/(1<<Wt);let kn=on*yn,wn=kn+yn,si=Mt*yn,hn=si+yn,Fn=0;const oi=(kn+wn)/2-dn;return oi>.5?Fn=-1:oi<-.5&&(Fn=1),kn=((kn+Fn)*Ht-(dn*=Ht))*en+dn,wn=((wn+Fn)*Ht-dn)*en+dn,si=(si*Ht-(Ft*=Ht))*en+Ft,hn=(hn*Ht-Ft)*en+Ft,[[kn,hn,0],[wn,hn,0],[wn,si,0],[kn,si,0]]})(d,o,c._pixelsPerMercatorPixel,oe,he);for(let on=0;on<w.length;on++)Km(w[on],St[on],Ct);const $t=jd([],St[qe],St[(qe+1)%4]);Xl($t,$t,.5),Km(tt,$t,Ct)}for(const St of w)K_(L,L,St),X_(A,A,St);return L[2]=Math.min(Be[2],je[2]),K_(L,L,tt),X_(A,A,tt),new Ca(L,A)}function ox({x:c,y:o,z:d}){const f=1/(1<<d),g=new cr(Yl(c*f),Oo((o+1)*f)),b=new cr(Yl((c+1)*f),Oo(o*f));return new lf(g,b)}function NS(c){const o=ee(c.getNorth()),d=ee(c.getSouth()),f=Math.cos(o),g=Math.cos(d),b=Math.sin(o),w=Math.sin(d),E=c.getWest(),A=c.getEast();return[jg(g,w,E),jg(g,w,A),jg(f,b,A),jg(f,b,E)]}function jg(c,o,d,f=Ru){return d=ee(d),[c*Math.sin(d)*f,-o*f,c*Math.cos(d)*f]}function Wg(c,o,d){return jg(Math.cos(ee(c)),Math.sin(ee(c)),o,d)}function ey(c,o,d,f){const g=1<<d.z,b=(c/Nn+d.x)/g;return Wg(Oo((o/Nn+d.y)/g),Yl(b),f)}function ax({min:c,max:o}){return T$/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const uD=new Float64Array(16);function ty(c){const o=ax(c),d=qM(uD,[o,o,o]);return G_(d,d,((f=[])[0]=-(g=c.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function $S(c){const o=(f=c.min,(d=uD)[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=f[0],d[13]=f[1],d[14]=f[2],d[15]=1,d);var d,f;const g=1/ax(c);return Hm(o,o,[g,g,g])}function dD(c,o,d,f,g){const b=(function(A){const L=Nn/(2*Math.PI);return A/(2*Math.PI)/L})(d),w=[c,o,-d/(2*Math.PI)],E=nu(new Float64Array(16));return G_(E,E,w),Hm(E,E,[b,b,b]),MS(E,E,ee(-g)),rx(E,E,ee(-f)),E}function Hg(c){return $e(FS,oD,c)}function hD(c,o){const d=Wg(o.lat,o.lng),f=(function(oe){const he=Wg(oe._center.lat,oe._center.lng);let Ce=RS([],Ug(0,1,0),he);const Oe=KM([],-oe.angle,he);Ce=ls(Ce,Ce,Oe),KM(Oe,-oe._pitch,Ce);const qe=Ea([],he);return Xl(qe,qe,sx(oe.cameraToCenterDistance/oe.pixelsPerMeter)),ls(qe,qe,Oe),jd([],he,qe)})(c);return w=(g=LS([],f,d))[0],E=g[1],A=g[2],L=(b=d)[0],N=b[1],W=b[2],re=(Q=Math.sqrt(w*w+E*E+A*A)*Math.sqrt(L*L+N*N+W*W))&&Ec(g,b)/Q,Math.acos(Math.min(Math.max(re,-1),1));var g,b,w,E,A,L,N,W,Q,re}function US(c,o){return hD(c,o)>Math.PI/2*1.01}const fD=ee(85),k$=Math.cos(fD),I$=Math.sin(fD),ny=63710088e-1,mD=2*Math.PI*ny;class cf{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cf(Ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,f=this.lat*d,g=o.lat*d,b=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*d);return ny*Math.acos(Math.min(b,1))}toBounds(o=0){const d=360*o/40075017,f=d/Math.cos(Math.PI/180*this.lat);return new lf(new cf(this.lng-f,this.lat-d),new cf(this.lng+f,this.lat+d))}toEcef(o){const d=sx(o);return Wg(this.lat,this.lng,Ru+d)}static convert(o){if(o instanceof cf)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new cf(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new cf(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var cr=cf;function jS(c){return mD*Math.cos(c*Math.PI/180)}function Vu(c){return(180+c)/360}function Bu(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function ru(c,o){return c/jS(o)}function Yl(c){return 360*c-180}function Oo(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function pD(c,o){return c*jS(Oo(o))}const Vo=85.051129;function gD(c){return 1/Math.cos(c*Math.PI/180)}class Gg{constructor(o,d,f=0){this.x=+o,this.y=+d,this.z=+f}static fromLngLat(o,d=0){const f=cr.convert(o);return new Gg(Vu(f.lng),Bu(f.lat),ru(d,f.lat))}toLngLat(){return new cr(Yl(this.x),Oo(this.y))}toAltitude(){return pD(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/mD*gD(Oo(this.y))}}function WS(c,o,d,f,g,b,w,E,A){const L=(o+f)/2,N=(d+g)/2,W=new j(L,N);E(W),(function(Q,re,oe,he,Ce,Oe){const qe=oe-Ce,Be=he-Oe;return Math.abs((he-re)*qe-(oe-Q)*Be)/Math.hypot(qe,Be)})(W.x,W.y,b.x,b.y,w.x,w.y)>=A?(WS(c,o,d,L,N,b,W,E,A),WS(c,L,N,f,g,W,w,E,A)):c.push(w)}function vD(c,o,d){let f=c[0],g=f.x,b=f.y;o(f);const w=[f];for(let E=1;E<c.length;E++){const A=c[E],{x:L,y:N}=A;o(A),WS(w,g,b,L,N,f,A,o,d),g=L,b=N,f=A}return w}function HS(c,o,d,f){if(f(o,d)){const g=o.add(d)._mult(.5);HS(c,o,g,f),HS(c,g,d,f)}else c.push(d)}function A$(c,o){let d=c[0];const f=[d];for(let g=1;g<c.length;g++){const b=c[g];HS(f,d,b,o),d=b}return f}const GS=Math.pow(2,14)-1,_D=-GS-1;function P$(c,o){const d=Math.round(c.x*o),f=Math.round(c.y*o);return c.x=Pe(d,_D,GS),c.y=Pe(f,_D,GS),(d<c.x||d>c.x+1||f<c.y||f>c.y+1)&&Fe("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Wd(c,o,d){const f=c.loadGeometry(),g=c.extent,b=Nn/g;if(o&&d&&d.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:E,x:A,y:L,projection:N}=d,W=Q=>{const re=Yl((o.x+Q.x/g)/w),oe=Oo((o.y+Q.y/g)/w),he=N.project(re,oe);Q.x=(he.x*E-A)*g,Q.y=(he.y*E-L)*g};for(let Q=0;Q<f.length;Q++)if(c.type!==1)f[Q]=vD(f[Q],W,1);else{const re=[];for(const oe of f[Q])oe.x<0||oe.x>=g||oe.y<0||oe.y>=g||(W(oe),re.push(oe));f[Q]=re}}for(const w of f)for(const E of w)P$(E,b);return f}function Xm(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Wd(c):[]}}function lx(c,o,d,f,g){c.emplaceBack(2*o+(f+1)/2,2*d+(g+1)/2)}function cx(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class qS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Xt,this.indexArray=new Mn,this.segments=new ms,this.programConfigurations=new jm(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){const b=this.layers[0],w=[];let E=null;b.type==="circle"&&(E=b.layout.get("circle-sort-key"));for(const{feature:L,id:N,index:W,sourceLayerIndex:Q}of o){const re=this.layers[0]._featureFilter.needGeometry,oe=Xm(L,re);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),oe,f))continue;const he=E?E.evaluate(oe,{},f):void 0,Ce={id:N,properties:L.properties,type:L.type,sourceLayerIndex:Q,index:W,geometry:re?oe.geometry:Wd(L,f,g),patterns:{},sortKey:he};w.push(Ce)}E&&w.sort(((L,N)=>L.sortKey-N.sortKey));let A=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new qt,A=g.projection);for(const L of w){const{geometry:N,index:W,sourceLayerIndex:Q}=L,re=o[W].feature;this.addFeature(L,N,W,d.availableImages,f,A),d.featureIndex.insert(re,N,W,Q,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,g$.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,v$.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,d,f,g,b,w){for(const E of d)for(const A of E){const L=A.x,N=A.y;if(L<0||L>=Nn||N<0||N>=Nn)continue;if(w){const re=w.projectTilePoint(L,N,b),oe=w.upVector(b,L,N),he=this.globeExtVertexArray;cx(he,re,oe),cx(he,re,oe),cx(he,re,oe),cx(he,re,oe)}const W=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Q=W.vertexLength;lx(this.layoutVertexArray,L,N,-1,-1),lx(this.layoutVertexArray,L,N,1,-1),lx(this.layoutVertexArray,L,N,1,1),lx(this.layoutVertexArray,L,N,-1,1),this.indexArray.emplaceBack(Q,Q+1,Q+2),this.indexArray.emplaceBack(Q,Q+2,Q+3),W.vertexLength+=4,W.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,b)}}function yD(c,o){for(let d=0;d<c.length;d++)if(Ym(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(Ym(c,o[d]))return!0;return!!KS(c,o)}function M$(c,o,d){return!!Ym(c,o)||!!XS(o,c,d)}function bD(c,o){if(c.length===1)return wD(o,c[0]);for(let d=0;d<o.length;d++){const f=o[d];for(let g=0;g<f.length;g++)if(Ym(c,f[g]))return!0}for(let d=0;d<c.length;d++)if(wD(o,c[d]))return!0;for(let d=0;d<o.length;d++)if(KS(c,o[d]))return!0;return!1}function D$(c,o,d){if(c.length>1){if(KS(c,o))return!0;for(let f=0;f<o.length;f++)if(XS(o[f],c,d))return!0}for(let f=0;f<c.length;f++)if(XS(c[f],o,d))return!0;return!1}function KS(c,o){if(c.length===0||o.length===0)return!1;for(let d=0;d<c.length-1;d++){const f=c[d],g=c[d+1];for(let b=0;b<o.length-1;b++)if(L$(f,g,o[b],o[b+1]))return!0}return!1}function L$(c,o,d,f){return rt(c,d,f)!==rt(o,d,f)&&rt(c,o,d)!==rt(c,o,f)}function XS(c,o,d){const f=d*d;if(o.length===1)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(xD(c,o[g-1],o[g])<f)return!0;return!1}function xD(c,o,d){const f=o.distSqr(d);if(f===0)return c.distSqr(o);const g=((c.x-o.x)*(d.x-o.x)+(c.y-o.y)*(d.y-o.y))/f;return c.distSqr(g<0?o:g>1?d:d.sub(o)._mult(g)._add(o))}function wD(c,o){let d,f,g,b=!1;for(let w=0;w<c.length;w++){d=c[w];for(let E=0,A=d.length-1;E<d.length;A=E++)f=d[E],g=d[A],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(b=!b)}return b}function Ym(c,o){let d=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const b=c[f],w=c[g];b.y>o.y!=w.y>o.y&&o.x<(w.x-b.x)*(o.y-b.y)/(w.y-b.y)+b.x&&(d=!d)}return d}function TD(c,o,d,f,g){for(const w of c)if(o<=w.x&&d<=w.y&&f>=w.x&&g>=w.y)return!0;const b=[new j(o,d),new j(o,g),new j(f,g),new j(f,d)];if(c.length>2){for(const w of b)if(Ym(c,w))return!0}for(let w=0;w<c.length-1;w++)if(R$(c[w],c[w+1],b))return!0;return!1}function R$(c,o,d){const f=d[0],g=d[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const b=rt(c,o,d[0]);return b!==rt(c,o,d[1])||b!==rt(c,o,d[2])||b!==rt(c,o,d[3])}function qg(c,o,d){const f=o.paint.get(c).value;return f.kind==="constant"?f.value:d.programConfigurations.get(o.id).getMaxValue(c)}function ux(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function SD(c,o,d,f,g){if(!o[0]&&!o[1])return c;const b=j.convert(o)._mult(g);d==="viewport"&&b._rotate(-f);const w=[];for(let E=0;E<c.length;E++)w.push(c[E].sub(b));return w}function ED(c,o,d,f){const g=j.convert(c)._mult(f);return o==="viewport"&&g._rotate(-d),g}Sn(qS,"CircleBucket",{omit:["layers"]});const O$=new Re({"circle-sort-key":new xe(Ot.layout_circle["circle-sort-key"])});var V$={paint:new Re({"circle-radius":new xe(Ot.paint_circle["circle-radius"]),"circle-color":new xe(Ot.paint_circle["circle-color"]),"circle-blur":new xe(Ot.paint_circle["circle-blur"]),"circle-opacity":new xe(Ot.paint_circle["circle-opacity"]),"circle-translate":new ce(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new ce(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ce(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ce(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xe(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xe(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xe(Ot.paint_circle["circle-stroke-opacity"])}),layout:O$};function CD(c,o,d,f,g,b,w,E,A){if(b&&c.queryGeometry.isAboveHorizon)return!1;b&&(A*=c.pixelToTileUnitsFactor);const L=c.tileID.canonical,N=d.projection.upVectorScale(L,d.center.lat,d.worldSize).metersToTile;for(const W of o)for(const Q of W){const re=Q.add(E),oe=g&&d.elevation?d.elevation.exaggeration()*g.getElevationAt(re.x,re.y,!0):0,he=d.projection.projectTilePoint(re.x,re.y,L);if(oe>0){const Be=d.projection.upVector(L,re.x,re.y);he.x+=Be[0]*N*oe,he.y+=Be[1]*N*oe,he.z+=Be[2]*N*oe}const Ce=b?re:B$(he.x,he.y,he.z,f),Oe=b?c.tilespaceRays.map((Be=>z$(Be,oe))):c.queryGeometry.screenGeometry,qe=Gm([],[he.x,he.y,he.z,1],f);if(!w&&b?A*=qe[3]/d.cameraToCenterDistance:w&&!b&&(A*=d.cameraToCenterDistance/qe[3]),b){const Be=Oo((Q.y/Nn+L.y)/(1<<L.z));A/=d.projection.pixelsPerMeter(Be,1)/ru(1,Be)}if(M$(Oe,Ce,A))return!0}return!1}function B$(c,o,d,f){const g=Gm([],[c,o,d,1],f);return new j(g[0]/g[3],g[1]/g[3])}const kD=Ug(0,0,0),F$=Ug(0,0,1);function z$(c,o){const d=DS();return kD[2]=o,c.intersectsPlane(kD,F$,d),new j(d[0],d[1])}class ID extends qS{}function AD(c,{width:o,height:d},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*d*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*d*f);return c.width=o,c.height=d,c.data=g,c}function PD(c,o,d){const{width:f,height:g}=o;f===c.width&&g===c.height||(YS(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,f),height:Math.min(c.height,g)},d),c.width=f,c.height=g,c.data=o.data)}function YS(c,o,d,f,g,b){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||d.x>c.width-g.width||d.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,E=o.data;for(let A=0;A<g.height;A++){const L=((d.y+A)*c.width+d.x)*b,N=((f.y+A)*o.width+f.x)*b;for(let W=0;W<g.width*b;W++)E[N+W]=w[L+W]}return o}Sn(ID,"HeatmapBucket",{omit:["layers"]});class Hd{constructor(o,d){AD(this,o,1,d)}resize(o){PD(this,new Hd(o),1)}clone(){return new Hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){YS(o,d,f,g,b,1)}}class Sl{constructor(o,d){AD(this,o,4,d)}resize(o){PD(this,new Sl(o),4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,f,g,b){YS(o,d,f,g,b,4)}}Sn(Hd,"AlphaImage"),Sn(Sl,"RGBAImage");var N$={paint:new Re({"heatmap-radius":new xe(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xe(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ce(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new De(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ce(Ot.paint_heatmap["heatmap-opacity"])})};function ZS(c){const o={},d=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new Sl({width:d,height:f}),b=(w,E,A)=>{o[c.evaluationKey]=A;const L=c.expression.evaluate(o);g.data[w+E+0]=Math.floor(255*L.r/L.a),g.data[w+E+1]=Math.floor(255*L.g/L.a),g.data[w+E+2]=Math.floor(255*L.b/L.a),g.data[w+E+3]=Math.floor(255*L.a)};if(c.clips)for(let w=0,E=0;w<f;++w,E+=4*d)for(let A=0,L=0;A<d;A++,L+=4){const N=A/(d-1),{start:W,end:Q}=c.clips[w];b(E,L,W*(1-N)+Q*N)}else for(let w=0,E=0;w<d;w++,E+=4)b(0,E,w/(d-1));return g}var $$={paint:new Re({"hillshade-illumination-direction":new ce(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ce(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ce(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ce(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ce(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ce(Ot.paint_hillshade["hillshade-accent-color"])})};const U$=lt([{name:"a_pos",components:2,type:"Int16"}],4),{members:j$}=U$;var JS={exports:{}};function dx(c,o,d){d=d||2;var f,g,b,w,E,A,L,N=o&&o.length,W=N?o[0]*d:c.length,Q=MD(c,0,W,d,!0),re=[];if(!Q||Q.next===Q.prev)return re;if(N&&(Q=(function(he,Ce,Oe,qe){var Be,je,nt,tt=[];for(Be=0,je=Ce.length;Be<je;Be++)(nt=MD(he,Ce[Be]*qe,Be<je-1?Ce[Be+1]*qe:he.length,qe,!1))===nt.next&&(nt.steiner=!0),tt.push(Z$(nt));for(tt.sort(K$),Be=0;Be<tt.length;Be++)Oe=X$(tt[Be],Oe);return Oe})(c,o,Q,d)),c.length>80*d){f=b=c[0],g=w=c[1];for(var oe=d;oe<W;oe+=d)(E=c[oe])<f&&(f=E),(A=c[oe+1])<g&&(g=A),E>b&&(b=E),A>w&&(w=A);L=(L=Math.max(b-f,w-g))!==0?32767/L:0}return iy(Q,re,d,f,g,L,0),re}function MD(c,o,d,f,g){var b,w;if(g===tE(c,o,d,f)>0)for(b=o;b<d;b+=f)w=RD(b,c[b],c[b+1],w);else for(b=d-f;b>=o;b-=f)w=RD(b,c[b],c[b+1],w);return w&&hx(w,w.next)&&(sy(w),w=w.next),w}function Zm(c,o){if(!c)return c;o||(o=c);var d,f=c;do if(d=!1,f.steiner||!hx(f,f.next)&&ps(f.prev,f,f.next)!==0)f=f.next;else{if(sy(f),(f=o=f.prev)===f.next)break;d=!0}while(d||f!==o);return o}function iy(c,o,d,f,g,b,w){if(c){!w&&b&&(function(N,W,Q,re){var oe=N;do oe.z===0&&(oe.z=QS(oe.x,oe.y,W,Q,re)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==N);oe.prevZ.nextZ=null,oe.prevZ=null,(function(he){var Ce,Oe,qe,Be,je,nt,tt,Ct,St=1;do{for(Oe=he,he=null,je=null,nt=0;Oe;){for(nt++,qe=Oe,tt=0,Ce=0;Ce<St&&(tt++,qe=qe.nextZ);Ce++);for(Ct=St;tt>0||Ct>0&&qe;)tt!==0&&(Ct===0||!qe||Oe.z<=qe.z)?(Be=Oe,Oe=Oe.nextZ,tt--):(Be=qe,qe=qe.nextZ,Ct--),je?je.nextZ=Be:he=Be,Be.prevZ=je,je=Be;Oe=qe}je.nextZ=null,St*=2}while(nt>1)})(oe)})(c,f,g,b);for(var E,A,L=c;c.prev!==c.next;)if(E=c.prev,A=c.next,b?H$(c,f,g,b):W$(c))o.push(E.i/d|0),o.push(c.i/d|0),o.push(A.i/d|0),sy(c),c=A.next,L=A.next;else if((c=A)===L){w?w===1?iy(c=G$(Zm(c),o,d),o,d,f,g,b,2):w===2&&q$(c,o,d,f,g,b):iy(Zm(c),o,d,f,g,b,1);break}}}function W$(c){var o=c.prev,d=c,f=c.next;if(ps(o,d,f)>=0)return!1;for(var g=o.x,b=d.x,w=f.x,E=o.y,A=d.y,L=f.y,N=g<b?g<w?g:w:b<w?b:w,W=E<A?E<L?E:L:A<L?A:L,Q=g>b?g>w?g:w:b>w?b:w,re=E>A?E>L?E:L:A>L?A:L,oe=f.next;oe!==o;){if(oe.x>=N&&oe.x<=Q&&oe.y>=W&&oe.y<=re&&Kg(g,E,b,A,w,L,oe.x,oe.y)&&ps(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function H$(c,o,d,f){var g=c.prev,b=c,w=c.next;if(ps(g,b,w)>=0)return!1;for(var E=g.x,A=b.x,L=w.x,N=g.y,W=b.y,Q=w.y,re=E<A?E<L?E:L:A<L?A:L,oe=N<W?N<Q?N:Q:W<Q?W:Q,he=E>A?E>L?E:L:A>L?A:L,Ce=N>W?N>Q?N:Q:W>Q?W:Q,Oe=QS(re,oe,o,d,f),qe=QS(he,Ce,o,d,f),Be=c.prevZ,je=c.nextZ;Be&&Be.z>=Oe&&je&&je.z<=qe;){if(Be.x>=re&&Be.x<=he&&Be.y>=oe&&Be.y<=Ce&&Be!==g&&Be!==w&&Kg(E,N,A,W,L,Q,Be.x,Be.y)&&ps(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,je.x>=re&&je.x<=he&&je.y>=oe&&je.y<=Ce&&je!==g&&je!==w&&Kg(E,N,A,W,L,Q,je.x,je.y)&&ps(je.prev,je,je.next)>=0))return!1;je=je.nextZ}for(;Be&&Be.z>=Oe;){if(Be.x>=re&&Be.x<=he&&Be.y>=oe&&Be.y<=Ce&&Be!==g&&Be!==w&&Kg(E,N,A,W,L,Q,Be.x,Be.y)&&ps(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;je&&je.z<=qe;){if(je.x>=re&&je.x<=he&&je.y>=oe&&je.y<=Ce&&je!==g&&je!==w&&Kg(E,N,A,W,L,Q,je.x,je.y)&&ps(je.prev,je,je.next)>=0)return!1;je=je.nextZ}return!0}function G$(c,o,d){var f=c;do{var g=f.prev,b=f.next.next;!hx(g,b)&&DD(g,f,f.next,b)&&ry(g,b)&&ry(b,g)&&(o.push(g.i/d|0),o.push(f.i/d|0),o.push(b.i/d|0),sy(f),sy(f.next),f=c=b),f=f.next}while(f!==c);return Zm(f)}function q$(c,o,d,f,g,b){var w=c;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&J$(w,E)){var A=LD(w,E);return w=Zm(w,w.next),A=Zm(A,A.next),iy(w,o,d,f,g,b,0),void iy(A,o,d,f,g,b,0)}E=E.next}w=w.next}while(w!==c)}function K$(c,o){return c.x-o.x}function X$(c,o){var d=(function(g,b){var w,E=b,A=g.x,L=g.y,N=-1/0;do{if(L<=E.y&&L>=E.next.y&&E.next.y!==E.y){var W=E.x+(L-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(W<=A&&W>N&&(N=W,w=E.x<E.next.x?E:E.next,W===A))return w}E=E.next}while(E!==b);if(!w)return null;var Q,re=w,oe=w.x,he=w.y,Ce=1/0;E=w;do A>=E.x&&E.x>=oe&&A!==E.x&&Kg(L<he?A:N,L,oe,he,L<he?N:A,L,E.x,E.y)&&(Q=Math.abs(L-E.y)/(A-E.x),ry(E,g)&&(Q<Ce||Q===Ce&&(E.x>w.x||E.x===w.x&&Y$(w,E)))&&(w=E,Ce=Q)),E=E.next;while(E!==re);return w})(c,o);if(!d)return o;var f=LD(d,c);return Zm(f,f.next),Zm(d,d.next)}function Y$(c,o){return ps(c.prev,c,o.prev)<0&&ps(o.next,c,c.next)<0}function QS(c,o,d,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-d)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Z$(c){var o=c,d=c;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==c);return d}function Kg(c,o,d,f,g,b,w,E){return(g-w)*(o-E)>=(c-w)*(b-E)&&(c-w)*(f-E)>=(d-w)*(o-E)&&(d-w)*(b-E)>=(g-w)*(f-E)}function J$(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(d,f){var g=d;do{if(g.i!==d.i&&g.next.i!==d.i&&g.i!==f.i&&g.next.i!==f.i&&DD(g,g.next,d,f))return!0;g=g.next}while(g!==d);return!1})(c,o)&&(ry(c,o)&&ry(o,c)&&(function(d,f){var g=d,b=!1,w=(d.x+f.x)/2,E=(d.y+f.y)/2;do g.y>E!=g.next.y>E&&g.next.y!==g.y&&w<(g.next.x-g.x)*(E-g.y)/(g.next.y-g.y)+g.x&&(b=!b),g=g.next;while(g!==d);return b})(c,o)&&(ps(c.prev,c,o.prev)||ps(c,o.prev,o))||hx(c,o)&&ps(c.prev,c,c.next)>0&&ps(o.prev,o,o.next)>0)}function ps(c,o,d){return(o.y-c.y)*(d.x-o.x)-(o.x-c.x)*(d.y-o.y)}function hx(c,o){return c.x===o.x&&c.y===o.y}function DD(c,o,d,f){var g=mx(ps(c,o,d)),b=mx(ps(c,o,f)),w=mx(ps(d,f,c)),E=mx(ps(d,f,o));return g!==b&&w!==E||!(g!==0||!fx(c,d,o))||!(b!==0||!fx(c,f,o))||!(w!==0||!fx(d,c,f))||!(E!==0||!fx(d,o,f))}function fx(c,o,d){return o.x<=Math.max(c.x,d.x)&&o.x>=Math.min(c.x,d.x)&&o.y<=Math.max(c.y,d.y)&&o.y>=Math.min(c.y,d.y)}function mx(c){return c>0?1:c<0?-1:0}function ry(c,o){return ps(c.prev,c,c.next)<0?ps(c,o,c.next)>=0&&ps(c,c.prev,o)>=0:ps(c,o,c.prev)<0||ps(c,c.next,o)<0}function LD(c,o){var d=new eE(c.i,c.x,c.y),f=new eE(o.i,o.x,o.y),g=c.next,b=o.prev;return c.next=o,o.prev=c,d.next=g,g.prev=d,f.next=d,d.prev=f,b.next=f,f.prev=b,f}function RD(c,o,d,f){var g=new eE(c,o,d);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function sy(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function eE(c,o,d){this.i=c,this.x=o,this.y=d,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tE(c,o,d,f){for(var g=0,b=o,w=d-f;b<d;b+=f)g+=(c[w]-c[b])*(c[b+1]+c[w+1]),w=b;return g}JS.exports=dx,JS.exports.default=dx,dx.deviation=function(c,o,d,f){var g=o&&o.length,b=Math.abs(tE(c,0,g?o[0]*d:c.length,d));if(g)for(var w=0,E=o.length;w<E;w++)b-=Math.abs(tE(c,o[w]*d,w<E-1?o[w+1]*d:c.length,d));var A=0;for(w=0;w<f.length;w+=3){var L=f[w]*d,N=f[w+1]*d,W=f[w+2]*d;A+=Math.abs((c[L]-c[W])*(c[N+1]-c[L+1])-(c[L]-c[N])*(c[W+1]-c[L+1]))}return b===0&&A===0?0:Math.abs((A-b)/b)},dx.flatten=function(c){for(var o=c[0][0].length,d={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var b=0;b<c[g].length;b++)for(var w=0;w<o;w++)d.vertices.push(c[g][b][w]);g>0&&d.holes.push(f+=c[g-1].length)}return d};var nE=q(JS.exports);function Q$(c,o,d,f,g){OD(c,o,d,f||c.length-1,g||eU)}function OD(c,o,d,f,g){for(;f>d;){if(f-d>600){var b=f-d+1,w=o-d+1,E=Math.log(b),A=.5*Math.exp(2*E/3),L=.5*Math.sqrt(E*A*(b-A)/b)*(w-b/2<0?-1:1);OD(c,o,Math.max(d,Math.floor(o-w*A/b+L)),Math.min(f,Math.floor(o+(b-w)*A/b+L)),g)}var N=c[o],W=d,Q=f;for(oy(c,d,o),g(c[f],N)>0&&oy(c,d,f);W<Q;){for(oy(c,W,Q),W++,Q--;g(c[W],N)<0;)W++;for(;g(c[Q],N)>0;)Q--}g(c[d],N)===0?oy(c,d,Q):oy(c,++Q,f),Q<=o&&(d=Q+1),o<=Q&&(f=Q-1)}}function oy(c,o,d){var f=c[o];c[o]=c[d],c[d]=f}function eU(c,o){return c<o?-1:c>o?1:0}function iE(c,o){const d=c.length;if(d<=1)return[c];const f=[];let g,b;for(let w=0;w<d;w++){const E=pt(c[w]);E!==0&&(c[w].area=Math.abs(E),b===void 0&&(b=E<0),b===E<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(Q$(f[w],o,1,f[w].length-1,tU),f[w]=f[w].slice(0,o));return f}function tU(c,o){return o.area-c.area}function rE(c,o,d){const f=d.patternDependencies;let g=!1;for(const b of o){const w=b.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const E=w.constantOr(null);E&&(g=!0,f[E]=!0)}return g}function sE(c,o,d,f,g){const b=g.patternDependencies;for(const w of o){const E=w.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let A=E.evaluate({zoom:f},d,{},g.availableImages);A=A&&A.name?A.name:A,b[A]=!0,d.patterns[w.id]=A}}return d}class px{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xt,this.indexArray=new Mn,this.indexArray2=new Ms,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ms,this.segments2=new ms,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.projection=o.projection}populate(o,d,f,g){this.hasPattern=rE("fill",this.layers,d);const b=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:E,id:A,index:L,sourceLayerIndex:N}of o){const W=this.layers[0]._featureFilter.needGeometry,Q=Xm(E,W);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),Q,f))continue;const re=b?b.evaluate(Q,{},f,d.availableImages):void 0,oe={id:A,properties:E.properties,type:E.type,sourceLayerIndex:N,index:L,geometry:W?Q.geometry:Wd(E,f,g),patterns:{},sortKey:re};w.push(oe)}b&&w.sort(((E,A)=>E.sortKey-A.sortKey));for(const E of w){const{geometry:A,index:L,sourceLayerIndex:N}=E;if(this.hasPattern){const W=sE("fill",this.layers,E,this.zoom,d);this.patternFeatures.push(W)}else this.addFeature(E,A,L,f,{},d.availableImages);d.featureIndex.insert(o[L].feature,A,L,N,this.index)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,j$),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,f,g,b,w=[]){for(const E of iE(d,500)){let A=0;for(const oe of E)A+=oe.length;const L=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),N=L.vertexLength,W=[],Q=[];for(const oe of E){if(oe.length===0)continue;oe!==E[0]&&Q.push(W.length/2);const he=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),Ce=he.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(Ce+oe.length-1,Ce),W.push(oe[0].x),W.push(oe[0].y);for(let Oe=1;Oe<oe.length;Oe++)this.layoutVertexArray.emplaceBack(oe[Oe].x,oe[Oe].y),this.indexArray2.emplaceBack(Ce+Oe-1,Ce+Oe),W.push(oe[Oe].x),W.push(oe[Oe].y);he.vertexLength+=oe.length,he.primitiveLength+=oe.length}const re=nE(W,Q);for(let oe=0;oe<re.length;oe+=3)this.indexArray.emplaceBack(N+re[oe],N+re[oe+1],N+re[oe+2]);L.vertexLength+=A,L.primitiveLength+=re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}}Sn(px,"FillBucket",{omit:["layers","patternFeatures"]});const nU=new Re({"fill-sort-key":new xe(Ot.layout_fill["fill-sort-key"])});var iU={paint:new Re({"fill-antialias":new ce(Ot.paint_fill["fill-antialias"]),"fill-opacity":new xe(Ot.paint_fill["fill-opacity"]),"fill-color":new xe(Ot.paint_fill["fill-color"]),"fill-outline-color":new xe(Ot.paint_fill["fill-outline-color"]),"fill-translate":new ce(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new ce(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new xe(Ot.paint_fill["fill-pattern"])}),layout:nU};const rU=lt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),sU=lt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),oU=lt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:aU}=rU;var gx={},lU=$,VD=Xg;function Xg(c,o,d,f,g){this.properties={},this.extent=d,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(cU,this,o)}function cU(c,o,d){c==1?o.id=d.readVarint():c==2?(function(f,g){for(var b=f.readVarint()+f.pos;f.pos<b;){var w=g._keys[f.readVarint()],E=g._values[f.readVarint()];g.properties[w]=E}})(d,o):c==3?o.type=d.readVarint():c==4&&(o._geometry=d.pos)}function uU(c){for(var o,d,f=0,g=0,b=c.length,w=b-1;g<b;w=g++)f+=((d=c[w]).x-(o=c[g]).x)*(o.y+d.y);return f}Xg.types=["Unknown","Point","LineString","Polygon"],Xg.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,d=c.readVarint()+c.pos,f=1,g=0,b=0,w=0,E=[];c.pos<d;){if(g<=0){var A=c.readVarint();f=7&A,g=A>>3}if(g--,f===1||f===2)b+=c.readSVarint(),w+=c.readSVarint(),f===1&&(o&&E.push(o),o=[]),o.push(new lU(b,w));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&E.push(o),E},Xg.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,d=1,f=0,g=0,b=0,w=1/0,E=-1/0,A=1/0,L=-1/0;c.pos<o;){if(f<=0){var N=c.readVarint();d=7&N,f=N>>3}if(f--,d===1||d===2)(g+=c.readSVarint())<w&&(w=g),g>E&&(E=g),(b+=c.readSVarint())<A&&(A=b),b>L&&(L=b);else if(d!==7)throw new Error("unknown command "+d)}return[w,A,E,L]},Xg.prototype.toGeoJSON=function(c,o,d){var f,g,b=this.extent*Math.pow(2,d),w=this.extent*c,E=this.extent*o,A=this.loadGeometry(),L=Xg.types[this.type];function N(re){for(var oe=0;oe<re.length;oe++){var he=re[oe];re[oe]=[360*(he.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+E)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(f=0;f<A.length;f++)W[f]=A[f][0];N(A=W);break;case 2:for(f=0;f<A.length;f++)N(A[f]);break;case 3:for(A=(function(re){var oe=re.length;if(oe<=1)return[re];for(var he,Ce,Oe=[],qe=0;qe<oe;qe++){var Be=uU(re[qe]);Be!==0&&(Ce===void 0&&(Ce=Be<0),Ce===Be<0?(he&&Oe.push(he),he=[re[qe]]):he.push(re[qe]))}return he&&Oe.push(he),Oe})(A),f=0;f<A.length;f++)for(g=0;g<A[f].length;g++)N(A[f][g])}A.length===1?A=A[0]:L="Multi"+L;var Q={type:"Feature",geometry:{type:L,coordinates:A},properties:this.properties};return"id"in this&&(Q.id=this.id),Q};var dU=VD,BD=FD;function FD(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(hU,this,o),this.length=this._features.length}function hU(c,o,d){c===15?o.version=d.readVarint():c===1?o.name=d.readString():c===5?o.extent=d.readVarint():c===2?o._features.push(d.pos):c===3?o._keys.push(d.readString()):c===4&&o._values.push((function(f){for(var g=null,b=f.readVarint()+f.pos;f.pos<b;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g})(d))}FD.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new dU(this._pbf,o,this.extent,this._keys,this._values)};var fU=BD;function mU(c,o,d){if(c===3){var f=new fU(d,d.readVarint()+d.pos);f.length&&(o[f.name]=f)}}var oE=gx.VectorTile=function(c,o){this.layers=c.readFields(mU,{},o)},vx=gx.VectorTileFeature=VD;function _x(c,o,d,f){const g=[],b=f===0?(w,E,A,L,N,W)=>{w.push(new j(W,A+(W-E)/(L-E)*(N-A)))}:(w,E,A,L,N,W)=>{w.push(new j(E+(W-A)/(N-A)*(L-E),W))};for(const w of c){const E=[];for(const A of w){if(A.length<=2)continue;const L=[];for(let Q=0;Q<A.length-1;Q++){const re=A[Q].x,oe=A[Q].y,he=A[Q+1].x,Ce=A[Q+1].y,Oe=f===0?re:oe,qe=f===0?he:Ce;Oe<o?qe>o&&b(L,re,oe,he,Ce,o):Oe>d?qe<d&&b(L,re,oe,he,Ce,d):L.push(A[Q]),qe<o&&Oe>=o&&b(L,re,oe,he,Ce,o),qe>d&&Oe<=d&&b(L,re,oe,he,Ce,d)}let N=A[A.length-1];const W=f===0?N.x:N.y;W>=o&&W<=d&&L.push(N),L.length&&(N=L[L.length-1],L[0].x===N.x&&L[0].y===N.y||L.push(L[0]),E.push(L))}E.length&&g.push(E)}return g}gx.VectorTileLayer=BD;const pU=vx.types,gU=Math.pow(2,13);function ay(c,o,d,f,g,b,w,E){c.emplaceBack((o<<1)+w,(d<<1)+b,(Math.floor(f*gU)<<1)+g,Math.round(E))}function ly(c,o,d){c.emplaceBack(o.x,o.y,o.z,d[0]*16384,d[1]*16384,d[2]*16384)}class zD{constructor(){this.acc=new j(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new j(o.x,o.y),this.max=new j(o.x,o.y))}append(o,d){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((o.x===0||o.x===Nn)&&o.x===d.x)!=((o.y===0||o.y===Nn)&&o.y===d.y)&&this.processBorderOverlap(o,d),d.x<0!=o.x<0&&this.addBorderIntersection(0,ti(d.y,o.y,(0-d.x)/(o.x-d.x))),d.x>Nn!=o.x>Nn&&this.addBorderIntersection(1,ti(d.y,o.y,(Nn-d.x)/(o.x-d.x))),d.y<0!=o.y<0&&this.addBorderIntersection(2,ti(d.x,o.x,(0-d.y)/(o.y-d.y))),d.y>Nn!=o.y>Nn&&this.addBorderIntersection(3,ti(d.x,o.x,(Nn-d.y)/(o.y-d.y)))}addBorderIntersection(o,d){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];d<f[0]&&(f[0]=d),d>f[1]&&(f[1]=d)}processBorderOverlap(o,d){if(o.x===d.x){if(o.y===d.y)return;const f=o.x===0?0:1;this.addBorderIntersection(f,d.y),this.addBorderIntersection(f,o.y)}else{const f=o.y===0?2:3;this.addBorderIntersection(f,d.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce(((d,f)=>d+f.edges),0);return o!==0?this.acc.div(o)._round():new j(0,0)}span(){return new j(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((o,d)=>o+ +(d[0]!==Number.MAX_VALUE)),0)}}class cy{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new Bt,this.centroidVertexArray=new rl,this.indexArray=new Mn,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ms,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id)),this.enableTerrain=o.enableTerrain}populate(o,d,f,g){this.features=[],this.hasPattern=rE("fill-extrusion",this.layers,d),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(b){const w=Math.exp(Math.PI*(1-b.y/(1<<b.z)*2));return 80150034*w/(w*w+1)/Nn/(1<<b.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:b,id:w,index:E,sourceLayerIndex:A}of o){const L=this.layers[0]._featureFilter.needGeometry,N=Xm(b,L);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),N,f))continue;const W={id:w,sourceLayerIndex:A,index:E,geometry:L?N.geometry:Wd(b,f,g),properties:b.properties,type:b.type,patterns:{}},Q=this.layoutVertexArray.length;this.hasPattern?this.features.push(sE("fill-extrusion",this.layers,W,this.zoom,d)):this.addFeature(W,W.geometry,E,f,{},d.availableImages,g),d.featureIndex.insert(b,W.geometry,E,A,this.index,Q)}this.sortBorders()}addFeatures(o,d,f,g,b){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,d,f,g,b)}this.sortBorders()}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,aU),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,oU.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,sU.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,f,g,b,w,E){const A=[new j(0,0),new j(Nn,Nn)],L=E.projection,N=L.name==="globe",W=this.enableTerrain&&!N?new zD:null,Q=pU[o.type]==="Polygon";N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new qt);const re=iE(d,500);for(let Oe=re.length-1;Oe>=0;Oe--){const qe=re[Oe];(qe.length===0||(oe=qe[0]).every((Be=>Be.x<=0))||oe.every((Be=>Be.x>=Nn))||oe.every((Be=>Be.y<=0))||oe.every((Be=>Be.y>=Nn)))&&re.splice(Oe,1)}var oe;let he;if(N)he=GD(re,A,g);else{he=[];for(const Oe of re)he.push({polygon:Oe,bounds:A})}const Ce=Q?this.edgeRadius:0;for(const{polygon:Oe,bounds:qe}of he){let Be=0,je=0;for(const tt of Oe)Q&&!tt[0].equals(tt[tt.length-1])&&tt.push(tt[0]),je+=Q?tt.length-1:tt.length;const nt=this.segments.prepareSegment((Q?5:4)*je,this.layoutVertexArray,this.indexArray);if(Q){const tt=[],Ct=[];Be=nt.vertexLength;for(const $t of Oe){let on,Mt;$t.length&&$t!==Oe[0]&&Ct.push(tt.length/2),on=$t[1].sub($t[0])._perp()._unit();for(let Wt=1;Wt<$t.length;Wt++){const Ht=$t[Wt],en=$t[Wt===$t.length-1?1:Wt+1];let{x:dn,y:Ft}=Ht;if(Ce){Mt=en.sub(Ht)._perp()._unit();const yn=on.add(Mt)._unit(),kn=Ce*Math.min(4,1/(on.x*yn.x+on.y*yn.y));dn+=kn*yn.x,Ft+=kn*yn.y,on=Mt}ay(this.layoutVertexArray,dn,Ft,0,0,1,1,0),nt.vertexLength++,tt.push(Ht.x,Ht.y),N&&ly(this.layoutVertexExtArray,L.projectTilePoint(dn,Ft,g),L.upVector(g,dn,Ft))}}const St=nE(tt,Ct);for(let $t=0;$t<St.length;$t+=3)this.indexArray.emplaceBack(Be+St[$t],Be+St[$t+2],Be+St[$t+1]),nt.primitiveLength++}for(const tt of Oe){W&&tt.length&&W.startRing(tt[0]);let Ct,St,$t,on=tt.length>4&&jD(tt[tt.length-2],tt[0],tt[1]),Mt=Ce?vU(tt[tt.length-2],tt[0],tt[1],Ce):0;St=tt[1].sub(tt[0])._perp()._unit();let Wt=!0;for(let Ht=1,en=0;Ht<tt.length;Ht++){let dn=tt[Ht-1],Ft=tt[Ht];const yn=tt[Ht===tt.length-1?1:Ht+1];if(W&&Q&&W.currentPolyCount.top++,UD(Ft,dn,qe)){Ce&&(St=yn.sub(Ft)._perp()._unit(),Wt=!Wt);continue}W&&W.append(Ft,dn);const kn=Ft.sub(dn)._perp(),wn=kn.x/(Math.abs(kn.x)+Math.abs(kn.y)),si=kn.y>0?1:0,hn=dn.dist(Ft);if(en+hn>32768&&(en=0),Ce){$t=yn.sub(Ft)._perp()._unit();let ai=$D(dn,Ft,yn,ND(St,$t),Ce);isNaN(ai)&&(ai=0);const Un=Ft.sub(dn)._unit();dn=dn.add(Un.mult(Mt))._round(),Ft=Ft.add(Un.mult(-ai))._round(),Mt=ai,St=$t}const Fn=nt.vertexLength,oi=tt.length>4&&jD(dn,Ft,yn);let Ri=WD(en,on,Wt);if(ay(this.layoutVertexArray,dn.x,dn.y,wn,si,0,0,Ri),ay(this.layoutVertexArray,dn.x,dn.y,wn,si,0,1,Ri),en+=hn,Ri=WD(en,oi,!Wt),on=oi,ay(this.layoutVertexArray,Ft.x,Ft.y,wn,si,0,0,Ri),ay(this.layoutVertexArray,Ft.x,Ft.y,wn,si,0,1,Ri),nt.vertexLength+=4,this.indexArray.emplaceBack(Fn+0,Fn+1,Fn+2),this.indexArray.emplaceBack(Fn+1,Fn+3,Fn+2),nt.primitiveLength+=2,Ce){const ai=Be+(Ht===1?tt.length-2:Ht-2),Un=Ht===1?Be:ai+1;if(this.indexArray.emplaceBack(Fn+1,ai,Fn+3),this.indexArray.emplaceBack(ai,Un,Fn+3),nt.primitiveLength+=2,Ct===void 0&&(Ct=Fn),!UD(yn,tt[Ht],qe)){const Er=Ht===tt.length-1?Ct:nt.vertexLength;this.indexArray.emplaceBack(Fn+2,Fn+3,Er),this.indexArray.emplaceBack(Fn+3,Er+1,Er),this.indexArray.emplaceBack(Fn+3,Un,Er+1),nt.primitiveLength+=3}Wt=!Wt}if(N){const ai=this.layoutVertexExtArray,Un=L.projectTilePoint(dn.x,dn.y,g),Er=L.projectTilePoint(Ft.x,Ft.y,g),ci=L.upVector(g,dn.x,dn.y),ui=L.upVector(g,Ft.x,Ft.y);ly(ai,Un,ci),ly(ai,Un,ci),ly(ai,Er,ui),ly(ai,Er,ui)}}Q&&(Be+=tt.length-1)}}if(W&&W.polyCount.length>0){if(W.borders){W.vertexArrayOffset=this.centroidVertexArray.length;const Oe=W.borders,qe=this.featuresOnBorder.push(W)-1;for(let Be=0;Be<4;Be++)Oe[Be][0]!==Number.MAX_VALUE&&this.borders[Be].push(qe)}this.encodeCentroid(W.borders?void 0:W.centroid(),W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort(((d,f)=>this.featuresOnBorder[d].borders[o][0]-this.featuresOnBorder[f].borders[o][0]))}encodeCentroid(o,d,f=!0){let g,b;if(o)if(o.y!==0){const E=d.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(E.x/10)),b=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else g=Math.ceil(7*(o.x+450)),b=0;else g=0,b=+f;let w=f?this.centroidVertexArray.length:d.vertexArrayOffset;for(const E of d.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let A=0;A<E.top;A++)this.centroidVertexArray.emplace(w++,g,b);for(let A=0;A<2*E.edges;A++)this.centroidVertexArray.emplace(w++,0,b),this.centroidVertexArray.emplace(w++,g,b)}}}function ND(c,o){const d=c.add(o)._unit();return c.x*d.x+c.y*d.y}function vU(c,o,d,f){const g=o.sub(c)._perp()._unit(),b=d.sub(o)._perp()._unit();return $D(c,o,d,ND(g,b),f)}function $D(c,o,d,f,g){const b=Math.sqrt(1-f*f);return Math.min(c.dist(o)/3,o.dist(d)/3,g*b/f)}function UD(c,o,d){return c.x<d[0].x&&o.x<d[0].x||c.x>d[1].x&&o.x>d[1].x||c.y<d[0].y&&o.y<d[0].y||c.y>d[1].y&&o.y>d[1].y}function jD(c,o,d){if(c.x<0||c.x>=Nn||o.x<0||o.x>=Nn||d.x<0||d.x>=Nn)return!1;const f=d.sub(o),g=f.perp(),b=c.sub(o);return(f.x*b.x+f.y*b.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(b.x*b.x+b.y*b.y))>-.866&&g.x*b.x+g.y*b.y<0}function WD(c,o,d){const f=o?2|c:-3&c;return d?1|f:-2&f}function HD(){const c=Math.PI/32,o=Math.tan(c),d=ny;return d*Math.sqrt(1+2*o*o)-d}function GD(c,o,d){const f=1<<d.z,g=Yl(d.x/f),b=Yl((d.x+1)/f),w=Oo(d.y/f),E=Oo((d.y+1)/f);return(function(A,L,N,W,Q=0,re){const oe=[];if(!A.length||!N||!W)return oe;const he=(tt,Ct)=>{for(const St of tt)oe.push({polygon:St,bounds:Ct})},Ce=Math.ceil(Math.log2(N)),Oe=Math.ceil(Math.log2(W)),qe=Ce-Oe,Be=[];for(let tt=0;tt<Math.abs(qe);tt++)Be.push(qe>0?0:1);for(let tt=0;tt<Math.min(Ce,Oe);tt++)Be.push(0),Be.push(1);let je=A;if(je=_x(je,L[0].y-Q,L[1].y+Q,1),je=_x(je,L[0].x-Q,L[1].x+Q,0),!je.length)return oe;const nt=[];for(Be.length?nt.push({polygons:je,bounds:L,depth:0}):he(je,L);nt.length;){const tt=nt.pop(),Ct=tt.depth,St=Be[Ct],$t=tt.bounds[0],on=tt.bounds[1],Mt=St===0?$t.x:$t.y,Wt=St===0?on.x:on.y,Ht=re?re(St,Mt,Wt):.5*(Mt+Wt),en=_x(tt.polygons,Mt-Q,Ht+Q,St),dn=_x(tt.polygons,Ht-Q,Wt+Q,St);if(en.length){const Ft=[$t,new j(St===0?Ht:on.x,St===1?Ht:on.y)];Be.length>Ct+1?nt.push({polygons:en,bounds:Ft,depth:Ct+1}):he(en,Ft)}if(dn.length){const Ft=[new j(St===0?Ht:$t.x,St===1?Ht:$t.y),on];Be.length>Ct+1?nt.push({polygons:dn,bounds:Ft,depth:Ct+1}):he(dn,Ft)}}return oe})(c,o,Math.ceil((b-g)/11.25),Math.ceil((w-E)/11.25),1,((A,L,N)=>{if(A===0)return .5*(L+N);{const W=Oo((d.y+L/Nn)/f);return(Bu(.5*(Oo((d.y+N/Nn)/f)+W))*f-d.y)*Nn}}))}Sn(cy,"FillExtrusionBucket",{omit:["layers","features"]}),Sn(zD,"PartMetadata");const _U=new Re({"fill-extrusion-edge-radius":new ce(Ot["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var yU={paint:new Re({"fill-extrusion-opacity":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xe(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xe(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xe(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xe(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ce(Ot["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:_U};function qD(c,o,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class yx{constructor(o,d,f){this.z=o,this.x=d,this.y=f,this.key=uy(0,o,o,d,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d){const f=(function(b,w,E){var A=qD(256*b,256*(w=Math.pow(2,E)-w-1),E),L=qD(256*(b+1),256*(w+1),E);return A[0]+","+A[1]+","+L[0]+","+L[1]})(this.x,this.y,this.z),g=(function(b,w,E){let A,L="";for(let N=b;N>0;N--)A=1<<N-1,L+=(w&A?1:0)+(E&A?2:0);return L})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class KD{constructor(o,d){this.wrap=o,this.canonical=d,this.key=uy(o,d.z,d.z,d.x,d.y)}}class ka{constructor(o,d,f,g,b){this.overscaledZ=o,this.wrap=d,this.canonical=new yx(f,+g,+b),this.key=d===0&&o===f?this.canonical.key:uy(d,o,f,g,b)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const d=this.canonical.z-o;return o>this.canonical.z?new ka(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ka(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d=!0){if(this.overscaledZ===o&&d)return this.key;if(o>this.canonical.z)return uy(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return uy(this.wrap*+d,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new ka(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new ka(d,this.wrap,d,f,g),new ka(d,this.wrap,d,f+1,g),new ka(d,this.wrap,d,f,g+1),new ka(d,this.wrap,d,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new ka(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new ka(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new KD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function uy(c,o,d,f,g){const b=1<<Math.min(d,22);let w=b*(g%b)+f%b;return c&&d<22&&(w+=b*b*((c<0?-2*c-1:2*c)%(1<<2*(22-d)))),16*(32*w+d)+(o-d)}Sn(yx,"CanonicalTileID"),Sn(ka,"OverscaledTileID",{omit:["projMatrix"]});class Yg extends j{constructor(o,d,f){super(o,d),this.z=f}}function dy(c,o){return c.x*o.x+c.y*o.y}function XD(c,o){if(c.length===1){let d=0;const f=o[d++];let g;for(;!g||f.equals(g);)if(g=o[d++],!g)return 1/0;for(;d<o.length;d++){const b=o[d],w=c[0],E=g.sub(f),A=b.sub(f),L=w.sub(f),N=dy(E,E),W=dy(E,A),Q=dy(A,A),re=dy(L,E),oe=dy(L,A),he=N*Q-W*W,Ce=(Q*re-W*oe)/he,Oe=(N*oe-W*re)/he,qe=f.z*(1-Ce-Oe)+g.z*Ce+b.z*Oe;if(isFinite(qe))return qe}return 1/0}{let d=1/0;for(const f of o)d=Math.min(d,f.z);return d}}function YD(c,o,d,f,g,b,w,E){const A=w*g.getElevationAt(c,o,!0,!0),L=b[0]!==0,N=L?b[1]===0?w*(b[0]/7-450):w*(function(W,Q,re){const oe=Math.floor(Q[0]/8),he=Math.floor(Q[1]/8),Ce=10*(Q[0]-8*oe),Oe=10*(Q[1]-8*he),qe=W.getElevationAt(oe,he,!0,!0),Be=W.getMeterToDEM(re),je=Math.floor(.5*(Ce*Be-1)),nt=Math.floor(.5*(Oe*Be-1)),tt=W.tileCoordToPixel(oe,he),Ct=2*je+1,St=2*nt+1,$t=(function(dn,Ft,yn,kn,wn){return[dn.getElevationAtPixel(Ft,yn,!0),dn.getElevationAtPixel(Ft+wn,yn,!0),dn.getElevationAtPixel(Ft,yn+wn,!0),dn.getElevationAtPixel(Ft+kn,yn+wn,!0)]})(W,tt.x-je,tt.y-nt,Ct,St),on=Math.abs($t[0]-$t[1]),Mt=Math.abs($t[2]-$t[3]),Wt=Math.abs($t[0]-$t[2])+Math.abs($t[1]-$t[3]),Ht=Math.min(.25,.5*Be*(on+Mt)/Ct),en=Math.min(.25,.5*Be*Wt/St);return qe+Math.max(Ht*Ce,en*Oe)})(g,b,E):A;return{base:A+(d===0)?-1:d,top:L?Math.max(N+f,A+d+2):A+f}}const bU=lt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:xU}=bU,wU=lt([{name:"a_packed",components:4,type:"Float32"}]),{members:TU}=wU,SU=vx.types,EU=Math.cos(Math.PI/180*37.5);class bx{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((d=>d.id)),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((d=>{this.gradients[d.id]={}})),this.layoutVertexArray=new Et,this.layoutVertexArray2=new Jt,this.indexArray=new Mn,this.programConfigurations=new jm(o.layers,o.zoom),this.segments=new ms,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((d=>d.isStateDependent())).map((d=>d.id))}populate(o,d,f,g){this.hasPattern=rE("line",this.layers,d);const b=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:N,id:W,index:Q,sourceLayerIndex:re}of o){const oe=this.layers[0]._featureFilter.needGeometry,he=Xm(N,oe);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),he,f))continue;const Ce=b?b.evaluate(he,{},f):void 0,Oe={id:W,properties:N.properties,type:N.type,sourceLayerIndex:re,index:Q,geometry:oe?he.geometry:Wd(N,f,g),patterns:{},sortKey:Ce};w.push(Oe)}b&&w.sort(((N,W)=>N.sortKey-W.sortKey));const{lineAtlas:E,featureIndex:A}=d,L=this.addConstantDashes(E);for(const N of w){const{geometry:W,index:Q,sourceLayerIndex:re}=N;if(L&&this.addFeatureDashes(N,E),this.hasPattern){const oe=sE("line",this.layers,N,this.zoom,d);this.patternFeatures.push(oe)}else this.addFeature(N,W,Q,f,E.positions,d.availableImages);A.insert(o[Q].feature,W,Q,re,this.index)}}addConstantDashes(o){let d=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,b=f.layout.get("line-cap").value;if(g.kind!=="constant"||b.kind!=="constant")d=!0;else{const w=b.value,E=g.value;if(!E)continue;o.addDash(E,w)}}return d}addFeatureDashes(o,d){const f=this.zoom;for(const g of this.layers){const b=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(b.kind==="constant"&&w.kind==="constant")continue;let E,A;if(b.kind==="constant"){if(E=b.value,!E)continue}else E=b.evaluate({zoom:f},o);A=w.kind==="constant"?w.value:w.evaluate({zoom:f},o),d.addDash(E,A),o.patterns[g.id]=d.getKey(E,A)}}update(o,d,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,f,g)}addFeatures(o,d,f,g,b){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,d,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,TU)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,xU),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,f,g,b,w){const E=this.layers[0].layout,A=E.get("line-join").evaluate(o,{}),L=E.get("line-cap").evaluate(o,{}),N=E.get("line-miter-limit"),W=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const Q of d)this.addLine(Q,o,A,L,N,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,b,w,g)}addLine(o,d,f,g,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<o.length-1;Oe++)this.totalDistance+=o[Oe].dist(o[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=SU[d.type]==="Polygon";let A=o.length;for(;A>=2&&o[A-1].equals(o[A-2]);)A--;let L=0;for(;L<A-1&&o[L].equals(o[L+1]);)L++;if(A<(E?3:2))return;f==="bevel"&&(b=1.05);const N=this.overscaling<=16?15*Nn/(512*this.overscaling):0,W=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let Q,re,oe,he,Ce;this.e1=this.e2=-1,E&&(Q=o[A-2],Ce=o[L].sub(Q)._unit()._perp());for(let Oe=L;Oe<A;Oe++){if(oe=Oe===A-1?E?o[L+1]:void 0:o[Oe+1],oe&&o[Oe].equals(oe))continue;Ce&&(he=Ce),Q&&(re=Q),Q=o[Oe],Ce=oe?oe.sub(Q)._unit()._perp():he,he=he||Ce;let qe=he.add(Ce);qe.x===0&&qe.y===0||qe._unit();const Be=he.x*Ce.x+he.y*Ce.y,je=qe.x*Ce.x+qe.y*Ce.y,nt=je!==0?1/je:1/0,tt=2*Math.sqrt(2-2*je),Ct=je<EU&&re&&oe,St=he.x*Ce.y-he.y*Ce.x>0;if(Ct&&Oe>L){const Mt=Q.dist(re);if(Mt>2*N){const Wt=Q.sub(Q.sub(re)._mult(N/Mt)._round());this.updateDistance(re,Wt),this.addCurrentVertex(Wt,he,0,0,W),re=Wt}}const $t=re&&oe;let on=$t?f:E?"butt":g;if($t&&on==="round"&&(nt<w?on="miter":nt<=2&&(on="fakeround")),on==="miter"&&nt>b&&(on="bevel"),on==="bevel"&&(nt>2&&(on="flipbevel"),nt<b&&(on="miter")),re&&this.updateDistance(re,Q),on==="miter")qe._mult(nt),this.addCurrentVertex(Q,qe,0,0,W);else if(on==="flipbevel"){if(nt>100)qe=Ce.mult(-1);else{const Mt=nt*he.add(Ce).mag()/he.sub(Ce).mag();qe._perp()._mult(Mt*(St?-1:1))}this.addCurrentVertex(Q,qe,0,0,W),this.addCurrentVertex(Q,qe.mult(-1),0,0,W)}else if(on==="bevel"||on==="fakeround"){const Mt=-Math.sqrt(nt*nt-1),Wt=St?Mt:0,Ht=St?0:Mt;if(re&&this.addCurrentVertex(Q,he,Wt,Ht,W),on==="fakeround"){const en=Math.round(180*tt/Math.PI/20);for(let dn=1;dn<en;dn++){let Ft=dn/en;if(Ft!==.5){const kn=Ft-.5;Ft+=Ft*kn*(Ft-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*kn*kn+(.848013+Be*(.215638*Be-1.06021)))}const yn=Ce.sub(he)._mult(Ft)._add(he)._unit()._mult(St?-1:1);this.addHalfVertex(Q,yn.x,yn.y,!1,St,0,W)}}oe&&this.addCurrentVertex(Q,Ce,-Wt,-Ht,W)}else if(on==="butt")this.addCurrentVertex(Q,qe,0,0,W);else if(on==="square"){const Mt=re?1:-1;re||this.addCurrentVertex(Q,qe,Mt,Mt,W),this.addCurrentVertex(Q,qe,0,0,W),re&&this.addCurrentVertex(Q,qe,Mt,Mt,W)}else on==="round"&&(re&&(this.addCurrentVertex(Q,he,0,0,W),this.addCurrentVertex(Q,he,1,1,W,!0)),oe&&(this.addCurrentVertex(Q,Ce,-1,-1,W,!0),this.addCurrentVertex(Q,Ce,0,0,W)));if(Ct&&Oe<A-1){const Mt=Q.dist(oe);if(Mt>2*N){const Wt=Q.add(oe.sub(Q)._mult(N/Mt)._round());this.updateDistance(Q,Wt),this.addCurrentVertex(Wt,Ce,0,0,W),Q=Wt}}}}addCurrentVertex(o,d,f,g,b,w=!1){const E=d.y*g-d.x,A=-d.y-d.x*g;this.addHalfVertex(o,d.x+d.y*f,d.y-d.x*f,w,!1,f,b),this.addHalfVertex(o,E,A,w,!0,-g,b)}addHalfVertex({x:o,y:d},f,g,b,w,E,A){this.layoutVertexArray.emplaceBack((o<<1)+(b?1:0),(d<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const L=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),A.primitiveLength++),w?this.e2=L:this.e1=L}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}Sn(bx,"LineBucket",{omit:["layers","patternFeatures"]});const CU=new Re({"line-cap":new xe(Ot.layout_line["line-cap"]),"line-join":new xe(Ot.layout_line["line-join"]),"line-miter-limit":new ce(Ot.layout_line["line-miter-limit"]),"line-round-limit":new ce(Ot.layout_line["line-round-limit"]),"line-sort-key":new xe(Ot.layout_line["line-sort-key"])});var ZD={paint:new Re({"line-opacity":new xe(Ot.paint_line["line-opacity"]),"line-color":new xe(Ot.paint_line["line-color"]),"line-translate":new ce(Ot.paint_line["line-translate"]),"line-translate-anchor":new ce(Ot.paint_line["line-translate-anchor"]),"line-width":new xe(Ot.paint_line["line-width"]),"line-gap-width":new xe(Ot.paint_line["line-gap-width"]),"line-offset":new xe(Ot.paint_line["line-offset"]),"line-blur":new xe(Ot.paint_line["line-blur"]),"line-dasharray":new xe(Ot.paint_line["line-dasharray"]),"line-pattern":new xe(Ot.paint_line["line-pattern"]),"line-gradient":new De(Ot.paint_line["line-gradient"]),"line-trim-offset":new ce(Ot.paint_line["line-trim-offset"])}),layout:CU};const JD=new class extends xe{possiblyEvaluate(c,o){return o=new U(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(c,o)}evaluate(c,o,d,f){return o=ct({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(c,o,d,f)}}(ZD.paint.properties["line-width"].specification);function QD(c,o){return o>0?o+2*c:c}JD.useIntegerZoom=!0;const kU=lt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),IU=lt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),AU=lt([{name:"a_projected_pos",components:4,type:"Float32"}],4);lt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const PU=lt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),MU=lt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);lt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const eL=lt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),DU=lt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);lt([{name:"triangle",components:3,type:"Uint16"}]),lt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),lt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),lt([{type:"Float32",name:"offsetX"}]),lt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var mo=24;const su=128;function aE(c,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new U(c+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=d;let b=0;for(;b<f.length&&f[b]<=c;)b++;b=Math.max(0,b-1);let w=b;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const E=f[b],A=f[w];return d.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:A,interpolationType:g}:{kind:"camera",minZoom:E,maxZoom:A,minSize:d.evaluate(new U(E)),maxSize:d.evaluate(new U(A)),interpolationType:g}}}function xx(c,{uSize:o,uSizeT:d},{lowerSize:f,upperSize:g}){return c.kind==="source"?f/su:c.kind==="composite"?ti(f/su,g/su,d):o}function Zg(c,o){let d=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:b,maxZoom:w}=c,E=g?Pe(yl.interpolationFactor(g,o,b,w),0,1):0;c.kind==="camera"?f=ti(c.minSize,c.maxSize,E):d=E}return{uSizeT:d,uSize:f}}var LU=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:su,evaluateSizeForFeature:xx,evaluateSizeForZoom:Zg,getSizeData:aE});function RU(c,o,d){return c.sections.forEach((f=>{f.text=(function(g,b,w){const E=b.layout.get("text-transform").evaluate(w,{});return E==="uppercase"?g=g.toLocaleUpperCase():E==="lowercase"&&(g=g.toLocaleLowerCase()),O.applyArabicShaping&&(g=O.applyArabicShaping(g)),g})(f.text,o,d)})),c}const hy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function OU(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}function VU(c){return c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""||c===""}var tL=yr,nL=function(c,o,d,f,g){var b,w,E=8*g-f-1,A=(1<<E)-1,L=A>>1,N=-7,W=g-1,Q=-1,re=c[o+W];for(W+=Q,b=re&(1<<-N)-1,re>>=-N,N+=E;N>0;b=256*b+c[o+W],W+=Q,N-=8);for(w=b&(1<<-N)-1,b>>=-N,N+=f;N>0;w=256*w+c[o+W],W+=Q,N-=8);if(b===0)b=1-L;else{if(b===A)return w?NaN:1/0*(re?-1:1);w+=Math.pow(2,f),b-=L}return(re?-1:1)*w*Math.pow(2,b-f)},iL=function(c,o,d,f,g,b){var w,E,A,L=8*b-g-1,N=(1<<L)-1,W=N>>1,Q=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=0,oe=1,he=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=N):(w=Math.floor(Math.log(o)/Math.LN2),o*(A=Math.pow(2,-w))<1&&(w--,A*=2),(o+=w+W>=1?Q/A:Q*Math.pow(2,1-W))*A>=2&&(w++,A/=2),w+W>=N?(E=0,w=N):w+W>=1?(E=(o*A-1)*Math.pow(2,g),w+=W):(E=o*Math.pow(2,W-1)*Math.pow(2,g),w=0));g>=8;c[d+re]=255&E,re+=oe,E/=256,g-=8);for(w=w<<g|E,L+=g;L>0;c[d+re]=255&w,re+=oe,w/=256,L-=8);c[d+re-oe]|=128*he};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function yr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}yr.Varint=0,yr.Fixed64=1,yr.Bytes=2,yr.Fixed32=5;var lE=4294967296,rL=1/lE,sL=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Gd(c){return c.type===yr.Bytes?c.readVarint()+c.pos:c.pos+1}function Jg(c,o,d){return d?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function oL(c,o,d){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));d.realloc(f);for(var g=d.pos-1;g>=c;g--)d.buf[g+f]=d.buf[g]}function BU(c,o){for(var d=0;d<c.length;d++)o.writeVarint(c[d])}function FU(c,o){for(var d=0;d<c.length;d++)o.writeSVarint(c[d])}function zU(c,o){for(var d=0;d<c.length;d++)o.writeFloat(c[d])}function NU(c,o){for(var d=0;d<c.length;d++)o.writeDouble(c[d])}function $U(c,o){for(var d=0;d<c.length;d++)o.writeBoolean(c[d])}function UU(c,o){for(var d=0;d<c.length;d++)o.writeFixed32(c[d])}function jU(c,o){for(var d=0;d<c.length;d++)o.writeSFixed32(c[d])}function WU(c,o){for(var d=0;d<c.length;d++)o.writeFixed64(c[d])}function HU(c,o){for(var d=0;d<c.length;d++)o.writeSFixed64(c[d])}function wx(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function Qg(c,o,d){c[d]=o,c[d+1]=o>>>8,c[d+2]=o>>>16,c[d+3]=o>>>24}function aL(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}yr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),g=f>>3,b=this.pos;this.type=7&f,c(g,o,this),this.pos===b&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=wx(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=aL(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=wx(this.buf,this.pos)+wx(this.buf,this.pos+4)*lE;return this.pos+=8,c},readSFixed64:function(){var c=wx(this.buf,this.pos)+aL(this.buf,this.pos+4)*lE;return this.pos+=8,c},readFloat:function(){var c=nL(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=nL(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,d,f=this.buf;return o=127&(d=f[this.pos++]),d<128?o:(o|=(127&(d=f[this.pos++]))<<7,d<128?o:(o|=(127&(d=f[this.pos++]))<<14,d<128?o:(o|=(127&(d=f[this.pos++]))<<21,d<128?o:(function(g,b,w){var E,A,L=w.buf;if(E=(112&(A=L[w.pos++]))>>4,A<128||(E|=(127&(A=L[w.pos++]))<<3,A<128)||(E|=(127&(A=L[w.pos++]))<<10,A<128)||(E|=(127&(A=L[w.pos++]))<<17,A<128)||(E|=(127&(A=L[w.pos++]))<<24,A<128)||(E|=(1&(A=L[w.pos++]))<<31,A<128))return Jg(g,E,b);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(d=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&sL?(function(d,f,g){return sL.decode(d.subarray(f,g))})(this.buf,o,c):(function(d,f,g){for(var b="",w=f;w<g;){var E,A,L,N=d[w],W=null,Q=N>239?4:N>223?3:N>191?2:1;if(w+Q>g)break;Q===1?N<128&&(W=N):Q===2?(192&(E=d[w+1]))==128&&(W=(31&N)<<6|63&E)<=127&&(W=null):Q===3?(A=d[w+2],(192&(E=d[w+1]))==128&&(192&A)==128&&((W=(15&N)<<12|(63&E)<<6|63&A)<=2047||W>=55296&&W<=57343)&&(W=null)):Q===4&&(A=d[w+2],L=d[w+3],(192&(E=d[w+1]))==128&&(192&A)==128&&(192&L)==128&&((W=(15&N)<<18|(63&E)<<12|(63&A)<<6|63&L)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,Q=1):W>65535&&(W-=65536,b+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),b+=String.fromCharCode(W),w+=Q}return b})(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==yr.Bytes)return c.push(this.readVarint(o));var d=Gd(this);for(c=c||[];this.pos<d;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==yr.Bytes)return c.push(this.readSVarint());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==yr.Bytes)return c.push(this.readBoolean());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==yr.Bytes)return c.push(this.readFloat());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==yr.Bytes)return c.push(this.readDouble());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==yr.Bytes)return c.push(this.readFixed32());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==yr.Bytes)return c.push(this.readSFixed32());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==yr.Bytes)return c.push(this.readFixed64());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==yr.Bytes)return c.push(this.readSFixed64());var o=Gd(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===yr.Varint)for(;this.buf[this.pos++]>127;);else if(o===yr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===yr.Fixed32)this.pos+=4;else{if(o!==yr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var d=new Uint8Array(o);d.set(this.buf),this.buf=d,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Qg(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Qg(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Qg(this.buf,-1&c,this.pos),Qg(this.buf,Math.floor(c*rL),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Qg(this.buf,-1&c,this.pos),Qg(this.buf,Math.floor(c*rL),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(o,d){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),(function(b,w,E){E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,b>>>=7,E.buf[E.pos++]=127&b|128,E.buf[E.pos]=127&(b>>>=7)})(f,0,d),(function(b,w){var E=(7&b)<<4;w.buf[w.pos++]|=E|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))})(g,d)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=(function(f,g,b){for(var w,E,A=0;A<g.length;A++){if((w=g.charCodeAt(A))>55295&&w<57344){if(!E){w>56319||A+1===g.length?(f[b++]=239,f[b++]=191,f[b++]=189):E=w;continue}if(w<56320){f[b++]=239,f[b++]=191,f[b++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(f[b++]=239,f[b++]=191,f[b++]=189,E=null);w<128?f[b++]=w:(w<2048?f[b++]=w>>6|192:(w<65536?f[b++]=w>>12|224:(f[b++]=w>>18|240,f[b++]=w>>12&63|128),f[b++]=w>>6&63|128),f[b++]=63&w|128)}return b})(this.buf,c,this.pos);var d=this.pos-o;d>=128&&oL(o,d,this),this.pos=o-1,this.writeVarint(d),this.pos+=d},writeFloat:function(c){this.realloc(4),iL(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),iL(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var d=0;d<o;d++)this.buf[this.pos++]=c[d]},writeRawMessage:function(c,o){this.pos++;var d=this.pos;c(o,this);var f=this.pos-d;f>=128&&oL(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,d){this.writeTag(c,yr.Bytes),this.writeRawMessage(o,d)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,BU,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,FU,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,$U,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,zU,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,NU,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,UU,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,jU,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,WU,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,HU,o)},writeBytesField:function(c,o){this.writeTag(c,yr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,yr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,yr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,yr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,yr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,yr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,yr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,yr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,yr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,yr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var Tx=q(tL);const cE=3;function GU(c,o,d){o.glyphs=[],c===1&&d.readMessage(qU,o)}function qU(c,o,d){if(c===3){const{id:f,bitmap:g,width:b,height:w,left:E,top:A,advance:L}=d.readMessage(KU,{});o.glyphs.push({id:f,bitmap:new Hd({width:b+2*cE,height:w+2*cE},g),metrics:{width:b,height:w,left:E,top:A,advance:L}})}else c===4?o.ascender=d.readSVarint():c===5&&(o.descender=d.readSVarint())}function KU(c,o,d){c===1?o.id=d.readVarint():c===2?o.bitmap=d.readBytes():c===3?o.width=d.readVarint():c===4?o.height=d.readVarint():c===5?o.left=d.readSVarint():c===6?o.top=d.readSVarint():c===7&&(o.advance=d.readVarint())}const lL=cE;function uE(c){let o=0,d=0;for(const w of c)o+=w.w*w.h,d=Math.max(d,w.w);c.sort(((w,E)=>E.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let g=0,b=0;for(const w of c)for(let E=f.length-1;E>=0;E--){const A=f[E];if(!(w.w>A.w||w.h>A.h)){if(w.x=A.x,w.y=A.y,b=Math.max(b,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===A.w&&w.h===A.h){const L=f.pop();E<f.length&&(f[E]=L)}else w.h===A.h?(A.x+=w.w,A.w-=w.w):w.w===A.w?(A.y+=w.h,A.h-=w.h):(f.push({x:A.x+w.w,y:A.y,w:A.w-w.w,h:w.h}),A.y+=w.h,A.h-=w.h);break}}return{w:g,h:b,fill:o/(g*b)||0}}const sl=1;class dE{constructor(o,{pixelRatio:d,version:f,stretchX:g,stretchY:b,content:w}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=g,this.stretchY=b,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+sl,this.paddedRect.y+sl]}get br(){return[this.paddedRect.x+this.paddedRect.w-sl,this.paddedRect.y+this.paddedRect.h-sl]}get displaySize(){return[(this.paddedRect.w-2*sl)/this.pixelRatio,(this.paddedRect.h-2*sl)/this.pixelRatio]}}class cL{constructor(o,d){const f={},g={};this.haveRenderCallbacks=[];const b=[];this.addImages(o,f,b),this.addImages(d,g,b);const{w,h:E}=uE(b),A=new Sl({width:w||1,height:E||1});for(const L in o){const N=o[L],W=f[L].paddedRect;Sl.copy(N.data,A,{x:0,y:0},{x:W.x+sl,y:W.y+sl},N.data)}for(const L in d){const N=d[L],W=g[L].paddedRect,Q=W.x+sl,re=W.y+sl,oe=N.data.width,he=N.data.height;Sl.copy(N.data,A,{x:0,y:0},{x:Q,y:re},N.data),Sl.copy(N.data,A,{x:0,y:he-1},{x:Q,y:re-1},{width:oe,height:1}),Sl.copy(N.data,A,{x:0,y:0},{x:Q,y:re+he},{width:oe,height:1}),Sl.copy(N.data,A,{x:oe-1,y:0},{x:Q-1,y:re},{width:1,height:he}),Sl.copy(N.data,A,{x:0,y:0},{x:Q+oe,y:re},{width:1,height:he})}this.image=A,this.iconPositions=f,this.patternPositions=g}addImages(o,d,f){for(const g in o){const b=o[g],w={x:0,y:0,w:b.data.width+2*sl,h:b.data.height+2*sl};f.push(w),d[g]=new dE(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>o.hasImage(f))),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),d),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),d)}patchUpdatedImage(o,d,f){if(!o||!d||o.version===d.version)return;o.version=d.version;const[g,b]=o.tl;f.update(d.data,void 0,{x:g,y:b})}}Sn(dE,"ImagePosition"),Sn(cL,"ImageAtlas");const Zl={horizontal:1,vertical:2,horizontalOnly:3},uL=-17;class fy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,d){const f=new fy;return f.scale=o||1,f.fontStack=d,f}static forImage(o){const d=new fy;return d.imageName=o,d}}class ev{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const f=new ev;for(let g=0;g<o.sections.length;g++){const b=o.sections[g];b.image?f.addImageSection(b):f.addTextSection(b,d)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=(function(d,f){let g="";for(let b=0;b<d.length;b++){const w=d.charCodeAt(b+1)||null,E=d.charCodeAt(b-1)||null;g+=!f&&(w&&Vd(w)&&!hy[d[b+1]]||E&&Vd(E)&&!hy[d[b-1]])||!hy[d[b]]?d[b]:hy[d[b]]}return g})(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&Sx[this.text.charCodeAt(f)];f++)o++;let d=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&Sx[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const f=new ev;return f.text=this.text.substring(o,d),f.sectionIndex=this.sectionIndex.slice(o,d),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,d)=>Math.max(o,this.sections[d].scale)),0)}addTextSection(o,d){this.text+=o.text,this.sections.push(fy.forText(o.scale,o.fontStack||d));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void Fe("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(fy.forImage(d)),this.sectionIndex.push(this.sections.length-1)):Fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hE(c,o,d,f,g,b,w,E,A,L,N,W,Q,re,oe){const he=ev.fromFeature(c,g);W===Zl.vertical&&he.verticalizePunctuation(Q);let Ce=[];const Oe=(function(tt,Ct,St,$t,on,Mt){if(!tt)return[];const Wt=[],Ht=(function(yn,kn,wn,si,hn,Fn){let oi=0;for(let Ri=0;Ri<yn.length();Ri++){const ai=yn.getSection(Ri);oi+=dL(yn.getCharCode(Ri),ai,si,hn,kn,Fn)}return oi/Math.max(1,Math.ceil(oi/wn))})(tt,Ct,St,$t,on,Mt),en=tt.text.indexOf("")>=0;let dn=0;for(let yn=0;yn<tt.length();yn++){const kn=tt.getSection(yn),wn=tt.getCharCode(yn);if(Sx[wn]||(dn+=dL(wn,kn,$t,on,Ct,Mt)),yn<tt.length()-1){const si=!((Ft=wn)<11904||!(bn["Bopomofo Extended"](Ft)||bn.Bopomofo(Ft)||bn["CJK Compatibility Forms"](Ft)||bn["CJK Compatibility Ideographs"](Ft)||bn["CJK Compatibility"](Ft)||bn["CJK Radicals Supplement"](Ft)||bn["CJK Strokes"](Ft)||bn["CJK Symbols and Punctuation"](Ft)||bn["CJK Unified Ideographs Extension A"](Ft)||bn["CJK Unified Ideographs"](Ft)||bn["Enclosed CJK Letters and Months"](Ft)||bn["Halfwidth and Fullwidth Forms"](Ft)||bn.Hiragana(Ft)||bn["Ideographic Description Characters"](Ft)||bn["Kangxi Radicals"](Ft)||bn["Katakana Phonetic Extensions"](Ft)||bn.Katakana(Ft)||bn["Vertical Forms"](Ft)||bn["Yi Radicals"](Ft)||bn["Yi Syllables"](Ft)));(XU[wn]||si||kn.imageName)&&Wt.push(fL(yn+1,dn,Ht,Wt,YU(wn,tt.getCharCode(yn+1),si&&en),!1))}}var Ft;return mL(fL(tt.length(),dn,Ht,Wt,0,!0))})(he,L,b,o,f,re),{processBidirectionalText:qe,processStyledBidirectionalText:Be}=O;if(qe&&he.sections.length===1){const tt=qe(he.toString(),Oe);for(const Ct of tt){const St=new ev;St.text=Ct,St.sections=he.sections;for(let $t=0;$t<Ct.length;$t++)St.sectionIndex.push(0);Ce.push(St)}}else if(Be){const tt=Be(he.text,he.sectionIndex,Oe);for(const Ct of tt){const St=new ev;St.text=Ct[0],St.sectionIndex=Ct[1],St.sections=he.sections,Ce.push(St)}}else Ce=(function(tt,Ct){const St=[],$t=tt.text;let on=0;for(const Mt of Ct)St.push(tt.substring(on,Mt)),on=Mt;return on<$t.length&&St.push(tt.substring(on,$t.length)),St})(he,Oe);const je=[],nt={positionedLines:je,text:he.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:W,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(tt,Ct,St,$t,on,Mt,Wt,Ht,en,dn,Ft,yn){let kn=0,wn=0,si=0;const hn=Ht==="right"?1:Ht==="left"?0:.5;let Fn=!1;for(const ci of on){const ui=ci.getSections();for(const ur of ui){if(ur.imageName)continue;const br=Ct[ur.fontStack];if(br&&(Fn=br.ascender!==void 0&&br.descender!==void 0,!Fn))break}if(!Fn)break}let oi=0;for(const ci of on){ci.trim();const ui=ci.getMaxScale(),ur=(ui-1)*mo,br={positionedGlyphs:[],lineOffset:0};tt.positionedLines[oi]=br;const xr=br.positionedGlyphs;let dr=0;if(!ci.length()){wn+=Mt,++oi;continue}let zr=0,Jr=0;for(let hr=0;hr<ci.length();hr++){const Ds=ci.getSection(hr),vs=ci.getSectionIndex(hr),qr=ci.getCharCode(hr);let Fi=Ds.scale,_s=null,wr=null,Ia=null,ys=mo,po=0;const eo=!(en===Zl.horizontal||!Ft&&!Lu(qr)||Ft&&(Sx[qr]||(Ri=qr,bn.Arabic(Ri)||bn["Arabic Supplement"](Ri)||bn["Arabic Extended-A"](Ri)||bn["Arabic Presentation Forms-A"](Ri)||bn["Arabic Presentation Forms-B"](Ri))));if(Ds.imageName){const Aa=$t[Ds.imageName];if(!Aa)continue;Ia=Ds.imageName,tt.iconsInText=tt.iconsInText||!0,wr=Aa.paddedRect;const to=Aa.displaySize;Fi=Fi*mo/yn,_s={width:to[0],height:to[1],left:sl,top:-lL,advance:eo?to[1]:to[0],localGlyph:!1},po=Fn?-_s.height*Fi:uL+ui*mo-to[1]*Fi,ys=_s.advance;const lu=(eo?to[0]:to[1])*Fi-mo*ui;lu>0&&lu>dr&&(dr=lu)}else{const Aa=St[Ds.fontStack];if(!Aa)continue;Aa[qr]&&(wr=Aa[qr]);const to=Ct[Ds.fontStack];if(!to)continue;const lu=to.glyphs[qr];if(!lu)continue;if(_s=lu.metrics,ys=qr!==8203?mo:0,Fn){const av=to.ascender!==void 0?Math.abs(to.ascender):0,Ty=to.descender!==void 0?Math.abs(to.descender):0,Sy=(av+Ty)*Fi;zr<Sy&&(zr=Sy,Jr=(av-Ty)/2*Fi),po=-av*Fi}else po=uL+(ui-Fi)*mo}eo?(tt.verticalizable=!0,xr.push({glyph:qr,imageName:Ia,x:kn,y:wn+po,vertical:eo,scale:Fi,localGlyph:_s.localGlyph,fontStack:Ds.fontStack,sectionIndex:vs,metrics:_s,rect:wr}),kn+=ys*Fi+dn):(xr.push({glyph:qr,imageName:Ia,x:kn,y:wn+po,vertical:eo,scale:Fi,localGlyph:_s.localGlyph,fontStack:Ds.fontStack,sectionIndex:vs,metrics:_s,rect:wr}),kn+=_s.advance*Fi+dn)}xr.length!==0&&(si=Math.max(kn-dn,si),Fn?pL(xr,hn,dr,Jr,Mt*ui/2):pL(xr,hn,dr,0,Mt/2)),kn=0;const gs=Mt*ui+dr;br.lineOffset=Math.max(dr,ur),wn+=gs,++oi}var Ri;const ai=wn,{horizontalAlign:Un,verticalAlign:Er}=fE(Wt);(function(ci,ui,ur,br,xr,dr){const zr=(ui-ur)*xr,Jr=-dr*br;for(const gs of ci)for(const hr of gs.positionedGlyphs)hr.x+=zr,hr.y+=Jr})(tt.positionedLines,hn,Un,Er,si,ai),tt.top+=-Er*ai,tt.bottom=tt.top+ai,tt.left+=-Un*si,tt.right=tt.left+si,tt.hasBaseline=Fn})(nt,o,d,f,Ce,w,E,A,W,L,Q,oe),!(function(tt){for(const Ct of tt)if(Ct.positionedGlyphs.length!==0)return!1;return!0})(je)&&nt}const Sx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},XU={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function dL(c,o,d,f,g,b){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*mo/b+g:0}{const w=d[o.fontStack],E=w&&w.glyphs[c];return E?E.metrics.advance*o.scale+g:0}}function hL(c,o,d,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(d)*d}function YU(c,o,d){let f=0;return c===10&&(f-=1e4),d&&(f+=150),c!==40&&c!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function fL(c,o,d,f,g,b){let w=null,E=hL(o,d,g,b);for(const A of f){const L=hL(o-A.x,d,g,b)+A.badness;L<=E&&(w=A,E=L)}return{index:c,x:o,priorBreak:w,badness:E}}function mL(c){return c?mL(c.priorBreak).concat(c.index):[]}function fE(c){let o=.5,d=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function pL(c,o,d,f,g){if(!(o||d||f||g))return;const b=c.length-1,w=c[b],E=(w.x+w.metrics.advance*w.scale)*o;for(let A=0;A<=b;A++)c[A].x-=E,c[A].y+=d+f+g}function ZU(c,o,d){const{horizontalAlign:f,verticalAlign:g}=fE(d),b=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:b,right:b+c.displaySize[0]}}function gL(c,o,d,f,g,b){const w=c.image;let E;if(w.content){const Ce=w.content,Oe=w.pixelRatio||1;E=[Ce[0]/Oe,Ce[1]/Oe,w.displaySize[0]-Ce[2]/Oe,w.displaySize[1]-Ce[3]/Oe]}const A=o.left*b,L=o.right*b;let N,W,Q,re;d==="width"||d==="both"?(re=g[0]+A-f[3],W=g[0]+L+f[1]):(re=g[0]+(A+L-w.displaySize[0])/2,W=re+w.displaySize[0]);const oe=o.top*b,he=o.bottom*b;return d==="height"||d==="both"?(N=g[1]+oe-f[0],Q=g[1]+he+f[2]):(N=g[1]+(oe+he-w.displaySize[1])/2,Q=N+w.displaySize[1]),{image:w,top:N,right:W,bottom:Q,left:re,collisionPadding:E}}class qd extends j{constructor(o,d,f,g,b){super(o,d),this.angle=g,this.z=f,b!==void 0&&(this.segment=b)}clone(){return new qd(this.x,this.y,this.z,this.angle,this.segment)}}function vL(c,o,d,f,g){if(o.segment===void 0)return!0;let b=o,w=o.segment+1,E=0;for(;E>-d/2;){if(w--,w<0)return!1;E-=c[w].dist(b),b=c[w]}E+=c[w].dist(c[w+1]),w++;const A=[];let L=0;for(;E<d/2;){const N=c[w],W=c[w+1];if(!W)return!1;let Q=c[w-1].angleTo(N)-N.angleTo(W);for(Q=Math.abs((Q+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:E,angleDelta:Q}),L+=Q;E-A[0].distance>f;)L-=A.shift().angleDelta;if(L>g)return!1;w++,E+=N.dist(W)}return!0}function _L(c){let o=0;for(let d=0;d<c.length-1;d++)o+=c[d].dist(c[d+1]);return o}function yL(c,o,d){return c?.6*o*d:0}function bL(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function JU(c,o,d,f,g,b){const w=yL(d,g,b),E=bL(d,f)*b;let A=0;const L=_L(c)/2;for(let N=0;N<c.length-1;N++){const W=c[N],Q=c[N+1],re=W.dist(Q);if(A+re>L){const oe=(L-A)/re,he=ti(W.x,Q.x,oe),Ce=ti(W.y,Q.y,oe),Oe=new qd(he,Ce,0,Q.angleTo(W),N);return!w||vL(c,Oe,E,w,o)?Oe:void 0}A+=re}}function QU(c,o,d,f,g,b,w,E,A){const L=yL(f,b,w),N=bL(f,g),W=N*w,Q=c[0].x===0||c[0].x===A||c[0].y===0||c[0].y===A;return o-W<o/4&&(o=W+o/4),xL(c,Q?o/2*E%o:(N/2+2*b)*w*E%o,o,L,d,W,Q,!1,A)}function xL(c,o,d,f,g,b,w,E,A){const L=b/2,N=_L(c);let W=0,Q=o-d,re=[];for(let oe=0;oe<c.length-1;oe++){const he=c[oe],Ce=c[oe+1],Oe=he.dist(Ce),qe=Ce.angleTo(he);for(;Q+d<W+Oe;){Q+=d;const Be=(Q-W)/Oe,je=ti(he.x,Ce.x,Be),nt=ti(he.y,Ce.y,Be);if(je>=0&&je<A&&nt>=0&&nt<A&&Q-L>=0&&Q+L<=N){const tt=new qd(je,nt,0,qe,oe);tt._round(),f&&!vL(c,tt,b,f,g)||re.push(tt)}}W+=Oe}return E||re.length||w||(re=xL(c,W/2,d,f,g,b,w,!0,A)),re}function wL(c,o,d,f,g){const b=[];for(let w=0;w<c.length;w++){const E=c[w];let A;for(let L=0;L<E.length-1;L++){let N=E[L],W=E[L+1];N.x<o&&W.x<o||(N.x<o?N=new j(o,N.y+(o-N.x)/(W.x-N.x)*(W.y-N.y))._round():W.x<o&&(W=new j(o,N.y+(o-N.x)/(W.x-N.x)*(W.y-N.y))._round()),N.y<d&&W.y<d||(N.y<d?N=new j(N.x+(d-N.y)/(W.y-N.y)*(W.x-N.x),d)._round():W.y<d&&(W=new j(N.x+(d-N.y)/(W.y-N.y)*(W.x-N.x),d)._round()),N.x>=f&&W.x>=f||(N.x>=f?N=new j(f,N.y+(f-N.x)/(W.x-N.x)*(W.y-N.y))._round():W.x>=f&&(W=new j(f,N.y+(f-N.x)/(W.x-N.x)*(W.y-N.y))._round()),N.y>=g&&W.y>=g||(N.y>=g?N=new j(N.x+(g-N.y)/(W.y-N.y)*(W.x-N.x),g)._round():W.y>=g&&(W=new j(N.x+(g-N.y)/(W.y-N.y)*(W.x-N.x),g)._round()),A&&N.equals(A[A.length-1])||(A=[N],b.push(A)),A.push(W)))))}}return b}Sn(qd,"Anchor");const my=1e20;function TL(c,o,d,f,g,b,w,E,A){for(let L=o;L<o+f;L++)SL(c,d*b+L,b,g,w,E,A);for(let L=d;L<d+g;L++)SL(c,L*b+o,1,f,w,E,A)}function SL(c,o,d,f,g,b,w){b[0]=0,w[0]=-my,w[1]=my,g[0]=c[o];for(let E=1,A=0,L=0;E<f;E++){g[E]=c[o+E*d];const N=E*E;do{const W=b[A];L=(g[E]-g[W]+N-W*W)/(E-W)/2}while(L<=w[A]&&--A>-1);A++,b[A]=E,w[A]=L,w[A+1]=my}for(let E=0,A=0;E<f;E++){for(;w[A+1]<E;)A++;const L=b[A],N=E-L;c[o+E*d]=g[L]+N*N}}const ou=2,mE={none:0,ideographs:1,all:2};class tv{constructor(o,d,f){this.requestManager=o,this.localGlyphMode=d,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,d){const f=[];for(const g in o)for(const b of o[g])f.push({stack:g,id:b});We(f,(({stack:g,id:b},w)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=E.glyphs[b];if(A!==void 0)return void w(null,{stack:g,id:b,glyph:A});if(A=this._tinySDF(E,g,b),A)return E.glyphs[b]=A,void w(null,{stack:g,id:b,glyph:A});const L=Math.floor(b/256);if(256*L>65535)return void w(new Error("glyphs > 65535 not supported"));if(E.ranges[L])return void w(null,{stack:g,id:b,glyph:A});let N=E.requests[L];N||(N=E.requests[L]=[],tv.loadGlyphRange(g,L,this.url,this.requestManager,((W,Q)=>{if(Q){E.ascender=Q.ascender,E.descender=Q.descender;for(const re in Q.glyphs)this._doesCharSupportLocalGlyph(+re)||(E.glyphs[+re]=Q.glyphs[+re]);E.ranges[L]=!0}for(const re of N)re(W,Q);delete E.requests[L]}))),N.push(((W,Q)=>{W?w(W):Q&&w(null,{stack:g,id:b,glyph:Q.glyphs[b]||null})}))}),((g,b)=>{if(g)d(g);else if(b){const w={};for(const{stack:E,id:A,glyph:L}of b)w[E]===void 0&&(w[E]={}),w[E].glyphs===void 0&&(w[E].glyphs={}),w[E].glyphs[A]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics},w[E].ascender=this.entries[E].ascender,w[E].descender=this.entries[E].descender;d(null,w)}}))}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==mE.none&&(this.localGlyphMode===mE.all?!!this.localFontFamily:!!this.localFontFamily&&(bn["CJK Unified Ideographs"](o)||bn["Hangul Syllables"](o)||bn.Hiragana(o)||bn.Katakana(o)||bn["CJK Symbols and Punctuation"](o)))}_tinySDF(o,d,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let b=o.tinySDF;if(!b){let he="400";/bold/i.test(d)?he="900":/medium/i.test(d)?he="500":/light/i.test(d)&&(he="200"),b=o.tinySDF=new tv.TinySDF({fontFamily:g,fontWeight:he,fontSize:24*ou,buffer:3*ou,radius:8*ou}),b.fontWeight=he}if(this.localGlyphs[b.fontWeight][f])return this.localGlyphs[b.fontWeight][f];const w=String.fromCharCode(f),{data:E,width:A,height:L,glyphWidth:N,glyphHeight:W,glyphLeft:Q,glyphTop:re,glyphAdvance:oe}=b.draw(w);return this.localGlyphs[b.fontWeight][f]={id:f,bitmap:new Hd({width:A,height:L},E),metrics:{width:N/ou,height:W/ou,left:Q/ou,top:re/ou-27,advance:oe/ou,localGlyph:!0}}}}tv.loadGlyphRange=function(c,o,d,f,g){const b=256*o,w=b+255,E=f.transformRequest(f.normalizeGlyphsURL(d).replace("{fontstack}",c).replace("{range}",`${b}-${w}`),fs.Glyphs);Eo(E,((A,L)=>{if(A)g(A);else if(L){const N={},W=(function(Q){return new Tx(Q).readFields(GU,{})})(L);for(const Q of W.glyphs)N[Q.id]=Q;g(null,{glyphs:N,ascender:W.ascender,descender:W.descender})}}))},tv.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:d=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:b="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=d;const E=this.size=c+4*o,A=this._createCanvas(E),L=this.ctx=A.getContext("2d",{willReadFrequently:!0});L.font=`${w} ${b} ${c}px ${g}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:b}=this.ctx.measureText(c),w=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-g))),A=Math.min(this.size-this.buffer,w+Math.ceil(f)),L=E+2*this.buffer,N=A+2*this.buffer,W=Math.max(L*N,0),Q=new Uint8ClampedArray(W),re={data:Q,width:L,height:N,glyphWidth:E,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(E===0||A===0)return re;const{ctx:oe,buffer:he,gridInner:Ce,gridOuter:Oe}=this;oe.clearRect(he,he,E,A),oe.fillText(c,he,he+w);const qe=oe.getImageData(he,he,E,A);Oe.fill(my,0,W),Ce.fill(0,0,W);for(let Be=0;Be<A;Be++)for(let je=0;je<E;je++){const nt=qe.data[4*(Be*E+je)+3]/255;if(nt===0)continue;const tt=(Be+he)*L+je+he;if(nt===1)Oe[tt]=0,Ce[tt]=my;else{const Ct=.5-nt;Oe[tt]=Ct>0?Ct*Ct:0,Ce[tt]=Ct<0?Ct*Ct:0}}TL(Oe,0,0,L,N,L,this.f,this.v,this.z),TL(Ce,he,he,E,A,L,this.f,this.v,this.z);for(let Be=0;Be<W;Be++){const je=Math.sqrt(Oe[Be])-Math.sqrt(Ce[Be]);Q[Be]=Math.round(255-255*(je/this.radius+this.cutoff))}return re}};const nv=sl;function EL(c,o,d,f){const g=[],b=c.image,w=b.pixelRatio,E=b.paddedRect.w-2*nv,A=b.paddedRect.h-2*nv,L=c.right-c.left,N=c.bottom-c.top,W=b.stretchX||[[0,E]],Q=b.stretchY||[[0,A]],re=(Mt,Wt)=>Mt+Wt[1]-Wt[0],oe=W.reduce(re,0),he=Q.reduce(re,0),Ce=E-oe,Oe=A-he;let qe=0,Be=oe,je=0,nt=he,tt=0,Ct=Ce,St=0,$t=Oe;if(b.content&&f){const Mt=b.content;qe=Ex(W,0,Mt[0]),je=Ex(Q,0,Mt[1]),Be=Ex(W,Mt[0],Mt[2]),nt=Ex(Q,Mt[1],Mt[3]),tt=Mt[0]-qe,St=Mt[1]-je,Ct=Mt[2]-Mt[0]-Be,$t=Mt[3]-Mt[1]-nt}const on=(Mt,Wt,Ht,en)=>{const dn=Cx(Mt.stretch-qe,Be,L,c.left),Ft=kx(Mt.fixed-tt,Ct,Mt.stretch,oe),yn=Cx(Wt.stretch-je,nt,N,c.top),kn=kx(Wt.fixed-St,$t,Wt.stretch,he),wn=Cx(Ht.stretch-qe,Be,L,c.left),si=kx(Ht.fixed-tt,Ct,Ht.stretch,oe),hn=Cx(en.stretch-je,nt,N,c.top),Fn=kx(en.fixed-St,$t,en.stretch,he),oi=new j(dn,yn),Ri=new j(wn,yn),ai=new j(wn,hn),Un=new j(dn,hn),Er=new j(Ft/w,kn/w),ci=new j(si/w,Fn/w),ui=o*Math.PI/180;if(ui){const xr=Math.sin(ui),dr=Math.cos(ui),zr=[dr,-xr,xr,dr];oi._matMult(zr),Ri._matMult(zr),Un._matMult(zr),ai._matMult(zr)}const ur=Mt.stretch+Mt.fixed,br=Wt.stretch+Wt.fixed;return{tl:oi,tr:Ri,bl:Un,br:ai,tex:{x:b.paddedRect.x+nv+ur,y:b.paddedRect.y+nv+br,w:Ht.stretch+Ht.fixed-ur,h:en.stretch+en.fixed-br},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Er,pixelOffsetBR:ci,minFontScaleX:Ct/w/L,minFontScaleY:$t/w/N,isSDF:d}};if(f&&(b.stretchX||b.stretchY)){const Mt=CL(W,Ce,oe),Wt=CL(Q,Oe,he);for(let Ht=0;Ht<Mt.length-1;Ht++){const en=Mt[Ht],dn=Mt[Ht+1];for(let Ft=0;Ft<Wt.length-1;Ft++)g.push(on(en,Wt[Ft],dn,Wt[Ft+1]))}}else g.push(on({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:A+1}));return g}function Ex(c,o,d){let f=0;for(const g of c)f+=Math.max(o,Math.min(d,g[1]))-Math.max(o,Math.min(d,g[0]));return f}function CL(c,o,d){const f=[{fixed:-nv,stretch:0}];for(const[g,b]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(b-g)})}return f.push({fixed:o+nv,stretch:d}),f}function Cx(c,o,d,f){return c/o*d+f}function kx(c,o,d,f){return c-o*d/f}function ej(c,o,d,f){const g=o+c.positionedLines[f].lineOffset;return f===0?d+g/2:d+(g+(o+c.positionedLines[f-1].lineOffset))/2}class tj{constructor(o=[],d=nj){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:f}=this,g=d[o];for(;o>0;){const b=o-1>>1,w=d[b];if(f(g,w)>=0)break;d[o]=w,o=b}d[o]=g}_down(o){const{data:d,compare:f}=this,g=this.length>>1,b=d[o];for(;o<g;){let w=1+(o<<1),E=d[w];const A=w+1;if(A<this.length&&f(d[A],E)<0&&(w=A,E=d[A]),f(E,b)>=0)break;d[o]=E,o=w}d[o]=b}}function nj(c,o){return c<o?-1:c>o?1:0}function ij(c,o=1,d=!1){let f=1/0,g=1/0,b=-1/0,w=-1/0;const E=c[0];for(let re=0;re<E.length;re++){const oe=E[re];(!re||oe.x<f)&&(f=oe.x),(!re||oe.y<g)&&(g=oe.y),(!re||oe.x>b)&&(b=oe.x),(!re||oe.y>w)&&(w=oe.y)}const A=Math.min(b-f,w-g);let L=A/2;const N=new tj([],rj);if(A===0)return new j(f,g);for(let re=f;re<b;re+=A)for(let oe=g;oe<w;oe+=A)N.push(new iv(re+L,oe+L,L,c));let W=(function(re){let oe=0,he=0,Ce=0;const Oe=re[0];for(let qe=0,Be=Oe.length,je=Be-1;qe<Be;je=qe++){const nt=Oe[qe],tt=Oe[je],Ct=nt.x*tt.y-tt.x*nt.y;he+=(nt.x+tt.x)*Ct,Ce+=(nt.y+tt.y)*Ct,oe+=3*Ct}return new iv(he/oe,Ce/oe,0,re)})(c),Q=N.length;for(;N.length;){const re=N.pop();(re.d>W.d||!W.d)&&(W=re,d&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Q)),re.max-W.d<=o||(L=re.h/2,N.push(new iv(re.p.x-L,re.p.y-L,L,c)),N.push(new iv(re.p.x+L,re.p.y-L,L,c)),N.push(new iv(re.p.x-L,re.p.y+L,L,c)),N.push(new iv(re.p.x+L,re.p.y+L,L,c)),Q+=4)}return d&&(console.log(`num probes: ${Q}`),console.log(`best distance: ${W.d}`)),W.p}function rj(c,o){return o.max-c.max}class iv{constructor(o,d,f,g){this.p=new j(o,d),this.h=f,this.d=(function(b,w){let E=!1,A=1/0;for(let L=0;L<w.length;L++){const N=w[L];for(let W=0,Q=N.length,re=Q-1;W<Q;re=W++){const oe=N[W],he=N[re];oe.y>b.y!=he.y>b.y&&b.x<(he.x-oe.x)*(b.y-oe.y)/(he.y-oe.y)+oe.x&&(E=!E),A=Math.min(A,xD(b,oe,he))}}return(E?1:-1)*Math.sqrt(A)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const rv=7,pE=Number.POSITIVE_INFINITY,sj=Math.sqrt(2);function kL(c,[o,d]){let f=0,g=0;if(d===pE){o<0&&(o=0);const b=o/sj;switch(c){case"top-right":case"top-left":g=b-rv;break;case"bottom-right":case"bottom-left":g=-b+rv;break;case"bottom":g=-o+rv;break;case"top":g=o-rv}switch(c){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),d=Math.abs(d),c){case"top-right":case"top-left":case"top":g=d-rv;break;case"bottom-right":case"bottom-left":case"bottom":g=-d+rv}switch(c){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function oj(c,o,d,f,g,b,w,E,A,L){c.createArrays(),c.tilePixelRatio=Nn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const N=c.layers[0].layout,W=c.layers[0]._unevaluatedLayout._values,Q={};if(c.textSizeData.kind==="composite"){const{minZoom:he,maxZoom:Ce}=c.textSizeData;Q.compositeTextSizes=[W["text-size"].possiblyEvaluate(new U(he),E),W["text-size"].possiblyEvaluate(new U(Ce),E)]}if(c.iconSizeData.kind==="composite"){const{minZoom:he,maxZoom:Ce}=c.iconSizeData;Q.compositeIconSizes=[W["icon-size"].possiblyEvaluate(new U(he),E),W["icon-size"].possiblyEvaluate(new U(Ce),E)]}Q.layoutTextSize=W["text-size"].possiblyEvaluate(new U(A+1),E),Q.layoutIconSize=W["icon-size"].possiblyEvaluate(new U(A+1),E),Q.textMaxSize=W["text-size"].possiblyEvaluate(new U(18),E);const re=N.get("text-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",oe=N.get("text-size");for(const he of c.features){const Ce=N.get("text-font").evaluate(he,{},E).join(","),Oe=oe.evaluate(he,{},E),qe=Q.layoutTextSize.evaluate(he,{},E),Be=(Q.layoutIconSize.evaluate(he,{},E),{horizontal:{},vertical:void 0}),je=he.text;let nt,tt=[0,0];if(je){const $t=je.toString(),on=N.get("text-letter-spacing").evaluate(he,{},E)*mo,Mt=N.get("text-line-height").evaluate(he,{},E)*mo,Wt=U_($t)?on:0,Ht=N.get("text-anchor").evaluate(he,{},E),en=N.get("text-variable-anchor");if(!en){const wn=N.get("text-radial-offset").evaluate(he,{},E);tt=wn?kL(Ht,[wn*mo,pE]):N.get("text-offset").evaluate(he,{},E).map((si=>si*mo))}let dn=re?"center":N.get("text-justify").evaluate(he,{},E);const Ft=N.get("symbol-placement")==="point",yn=Ft?N.get("text-max-width").evaluate(he,{},E)*mo:1/0,kn=wn=>{c.allowVerticalPlacement&&Nm($t)&&(Be.vertical=hE(je,o,d,g,Ce,yn,Mt,Ht,wn,Wt,tt,Zl.vertical,!0,qe,Oe))};if(!re&&en){const wn=dn==="auto"?en.map((hn=>gE(hn))):[dn];let si=!1;for(let hn=0;hn<wn.length;hn++){const Fn=wn[hn];if(!Be.horizontal[Fn])if(si)Be.horizontal[Fn]=Be.horizontal[0];else{const oi=hE(je,o,d,g,Ce,yn,Mt,"center",Fn,Wt,tt,Zl.horizontal,!1,qe,Oe);oi&&(Be.horizontal[Fn]=oi,si=oi.positionedLines.length===1)}}kn("left")}else{if(dn==="auto"&&(dn=gE(Ht)),Ft||N.get("text-writing-mode").indexOf("horizontal")>=0||!Nm($t)){const wn=hE(je,o,d,g,Ce,yn,Mt,Ht,dn,Wt,tt,Zl.horizontal,!1,qe,Oe);wn&&(Be.horizontal[dn]=wn)}kn(Ft?"left":dn)}}let Ct=!1;if(he.icon&&he.icon.name){const $t=f[he.icon.name];$t&&(nt=ZU(g[he.icon.name],N.get("icon-offset").evaluate(he,{},E),N.get("icon-anchor").evaluate(he,{},E)),Ct=$t.sdf,c.sdfIcons===void 0?c.sdfIcons=$t.sdf:c.sdfIcons!==$t.sdf&&Fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($t.pixelRatio!==c.pixelRatio||N.get("icon-rotate").constantOr(1)!==0)&&(c.iconsNeedLinear=!0))}const St=AL(Be.horizontal)||Be.vertical;c.iconsInText||(c.iconsInText=!!St&&St.iconsInText),(St||nt)&&aj(c,he,Be,nt,f,Q,qe,0,tt,Ct,w,E,L)}b&&c.generateCollisionDebugBuffers(A,c.collisionBoxArray)}function gE(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function aj(c,o,d,f,g,b,w,E,A,L,N,W,Q){let re=b.textMaxSize.evaluate(o,{},W);re===void 0&&(re=w);const oe=c.layers[0].layout,he=oe.get("icon-offset").evaluate(o,{},W),Ce=AL(d.horizontal)||d.vertical,Oe=Q.name==="globe",qe=mo,Be=w/qe,je=c.tilePixelRatio*re/qe,nt=(Ht=c.overscaling,c.zoom>18&&Ht>2&&(Ht>>=1),Math.max(Nn/(512*Ht),1)*oe.get("symbol-spacing")),tt=oe.get("text-padding")*c.tilePixelRatio,Ct=oe.get("icon-padding")*c.tilePixelRatio,St=ee(oe.get("text-max-angle")),$t=oe.get("text-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",on=oe.get("icon-rotation-alignment")==="map"&&oe.get("symbol-placement")!=="point",Mt=oe.get("symbol-placement"),Wt=nt/2;var Ht;const en=oe.get("icon-text-fit");let dn;f&&en!=="none"&&(c.allowVerticalPlacement&&d.vertical&&(dn=gL(f,d.vertical,en,oe.get("icon-text-fit-padding"),he,Be)),Ce&&(f=gL(f,Ce,en,oe.get("icon-text-fit-padding"),he,Be)));const Ft=(yn,kn,wn)=>{if(kn.x<0||kn.x>=Nn||kn.y<0||kn.y>=Nn)return;let si=null;if(Oe){const{x:hn,y:Fn,z:oi}=Q.projectTilePoint(kn.x,kn.y,wn);si={anchor:new qd(hn,Fn,oi,0,void 0),up:Q.upVector(wn,kn.x,kn.y)}}(function(hn,Fn,oi,Ri,ai,Un,Er,ci,ui,ur,br,xr,dr,zr,Jr,gs,hr,Ds,vs,qr,Fi,_s,wr,Ia,ys){const po=hn.addToLineVertexArray(Fn,Ri);let eo,Aa,to,lu,av,Ty,Sy,l3=0,c3=0,u3=0,d3=0,ME=-1,DE=-1;const $u={};let h3=kS("");const ep=oi?oi.anchor:Fn;let LE=0,RE=0;if(ui._unevaluatedLayout.getValue("text-radial-offset")===void 0?[LE,RE]=ui.layout.get("text-offset").evaluate(Fi,{},ys).map((El=>El*mo)):(LE=ui.layout.get("text-radial-offset").evaluate(Fi,{},ys)*mo,RE=pE),hn.allowVerticalPlacement&&ai.vertical){const El=ai.vertical;if(Jr)Ty=vE(El),ci&&(Sy=vE(ci));else{const Cl=ui.layout.get("text-rotate").evaluate(Fi,{},ys)+90;to=Ix(ur,ep,Fn,br,xr,dr,El,zr,Cl,gs),ci&&(lu=Ix(ur,ep,Fn,br,xr,dr,ci,Ds,Cl))}}if(Un){const El=ui.layout.get("icon-rotate").evaluate(Fi,{},ys),Cl=ui.layout.get("icon-text-fit")!=="none",Ey=EL(Un,El,wr,Cl),VE=ci?EL(ci,El,wr,Cl):void 0;Aa=Ix(ur,ep,Fn,br,xr,dr,Un,Ds,El),l3=4*Ey.length;const f3=hn.iconSizeData;let tp=null;f3.kind==="source"?(tp=[su*ui.layout.get("icon-size").evaluate(Fi,{},ys)],tp[0]>uf&&Fe(`${hn.layerIds[0]}: Value for "icon-size" is >= ${py}. Reduce your "icon-size".`)):f3.kind==="composite"&&(tp=[su*_s.compositeIconSizes[0].evaluate(Fi,{},ys),su*_s.compositeIconSizes[1].evaluate(Fi,{},ys)],(tp[0]>uf||tp[1]>uf)&&Fe(`${hn.layerIds[0]}: Value for "icon-size" is >= ${py}. Reduce your "icon-size".`)),hn.addSymbols(hn.icon,Ey,tp,qr,vs,Fi,!1,oi,Fn,po.lineStartIndex,po.lineLength,-1,Ia,ys),ME=hn.icon.placedSymbolArray.length-1,VE&&(c3=4*VE.length,hn.addSymbols(hn.icon,VE,tp,qr,vs,Fi,Zl.vertical,oi,Fn,po.lineStartIndex,po.lineLength,-1,Ia,ys),DE=hn.icon.placedSymbolArray.length-1)}for(const El in ai.horizontal){const Cl=ai.horizontal[El];eo||(h3=kS(Cl.text),Jr?av=vE(Cl):eo=Ix(ur,ep,Fn,br,xr,dr,Cl,zr,ui.layout.get("text-rotate").evaluate(Fi,{},ys),gs));const Ey=Cl.positionedLines.length===1;if(u3+=IL(hn,oi,Fn,Cl,Er,ui,Jr,Fi,gs,po,ai.vertical?Zl.horizontal:Zl.horizontalOnly,Ey?Object.keys(ai.horizontal):[El],$u,ME,_s,Ia,ys),Ey)break}ai.vertical&&(d3+=IL(hn,oi,Fn,ai.vertical,Er,ui,Jr,Fi,gs,po,Zl.vertical,["vertical"],$u,DE,_s,Ia,ys));let gf=-1;const OE=(El,Cl)=>El?Math.max(El,Cl):Cl;gf=OE(av,gf),gf=OE(Ty,gf),gf=OE(Sy,gf);const Oj=gf>-1?1:0;hn.glyphOffsetArray.length>=hf.MAX_GLYPHS&&Fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fi.sortKey!==void 0&&hn.addToSortKeyRanges(hn.symbolInstances.length,Fi.sortKey),hn.symbolInstances.emplaceBack(ep.x,ep.y,ep.z,Fn.x,Fn.y,$u.right>=0?$u.right:-1,$u.center>=0?$u.center:-1,$u.left>=0?$u.left:-1,$u.vertical>=0?$u.vertical:-1,ME,DE,h3,eo!==void 0?eo:hn.collisionBoxArray.length,eo!==void 0?eo+1:hn.collisionBoxArray.length,to!==void 0?to:hn.collisionBoxArray.length,to!==void 0?to+1:hn.collisionBoxArray.length,Aa!==void 0?Aa:hn.collisionBoxArray.length,Aa!==void 0?Aa+1:hn.collisionBoxArray.length,lu||hn.collisionBoxArray.length,lu?lu+1:hn.collisionBoxArray.length,br,u3,d3,l3,c3,Oj,0,LE,RE,gf)})(c,kn,si,yn,d,f,g,dn,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,tt,$t,A,0,Ct,on,he,o,b,L,N,W)};if(Mt==="line")for(const yn of wL(o.geometry,0,0,Nn,Nn)){const kn=QU(yn,nt,St,d.vertical||Ce,f,qe,je,c.overscaling,Nn);for(const wn of kn)Ce&&lj(c,Ce.text,Wt,wn)||Ft(yn,wn,W)}else if(Mt==="line-center"){for(const yn of o.geometry)if(yn.length>1){const kn=JU(yn,St,d.vertical||Ce,f,qe,je);kn&&Ft(yn,kn,W)}}else if(o.type==="Polygon")for(const yn of iE(o.geometry,0)){const kn=ij(yn,16);Ft(yn[0],new qd(kn.x,kn.y,0,0,void 0),W)}else if(o.type==="LineString")for(const yn of o.geometry)Ft(yn,new qd(yn[0].x,yn[0].y,0,0,void 0),W);else if(o.type==="Point")for(const yn of o.geometry)for(const kn of yn)Ft([kn],new qd(kn.x,kn.y,0,0,void 0),W)}const py=255,uf=py*su;function IL(c,o,d,f,g,b,w,E,A,L,N,W,Q,re,oe,he,Ce){const Oe=(function(je,nt,tt,Ct,St,$t,on,Mt){const Wt=[];if(nt.positionedLines.length===0)return Wt;const Ht=Ct.layout.get("text-rotate").evaluate($t,{})*Math.PI/180,en=(function(wn){const si=wn[0],hn=wn[1],Fn=si*hn;return Fn>0?[si,-hn]:Fn<0?[-si,hn]:si===0?[hn,si]:[hn,-si]})(tt);let dn=Math.abs(nt.top-nt.bottom);for(const wn of nt.positionedLines)dn-=wn.lineOffset;const Ft=nt.positionedLines.length,yn=dn/Ft;let kn=nt.top-tt[1];for(let wn=0;wn<Ft;++wn){const si=nt.positionedLines[wn];kn=ej(nt,yn,kn,wn);for(const hn of si.positionedGlyphs){if(!hn.rect)continue;const Fn=hn.rect||{};let oi=lL+1,Ri=!0,ai=1,Un=0;if(hn.imageName){const wr=on[hn.imageName];if(!wr)continue;if(wr.sdf){Fe("SDF images are not supported in formatted text and will be ignored.");continue}Ri=!1,ai=wr.pixelRatio,oi=sl/ai}const Er=(St||Mt)&&hn.vertical,ci=hn.metrics.advance*hn.scale/2,ui=hn.metrics,ur=hn.rect;if(ur===null)continue;Mt&&nt.verticalizable&&(Un=hn.imageName?ci-hn.metrics.width*hn.scale/2:0);const br=St?[hn.x+ci,hn.y]:[0,0];let xr=[0,0],dr=[0,0],zr=!1;St||(Er?(dr=[hn.x+ci+en[0],hn.y+en[1]-Un],zr=!0):xr=[hn.x+ci+tt[0],hn.y+tt[1]-Un]);const Jr=ur.w*hn.scale/(ai*(hn.localGlyph?ou:1)),gs=ur.h*hn.scale/(ai*(hn.localGlyph?ou:1));let hr,Ds,vs,qr;if(Er){const wr=hn.y-kn,Ia=new j(-ci,ci-wr),ys=-Math.PI/2,po=new j(...dr);hr=new j(-ci+xr[0],xr[1]),hr._rotateAround(ys,Ia)._add(po),hr.x+=-wr+ci,hr.y-=(ui.left-oi)*hn.scale;const eo=hn.imageName?ui.advance*hn.scale:mo*hn.scale,Aa=String.fromCharCode(hn.glyph);OU(Aa)?hr.x+=(1-oi)*hn.scale:VU(Aa)?hr.x+=eo-ui.height*hn.scale+(-oi-1)*hn.scale:hr.x+=hn.imageName||ui.width+2*oi===ur.w&&ui.height+2*oi===ur.h?(eo-gs)/2:(eo-(ui.height+2*oi)*hn.scale)/2,Ds=new j(hr.x,hr.y-Jr),vs=new j(hr.x+gs,hr.y),qr=new j(hr.x+gs,hr.y-Jr)}else{const wr=(ui.left-oi)*hn.scale-ci+xr[0],Ia=(-ui.top-oi)*hn.scale+xr[1],ys=wr+Jr,po=Ia+gs;hr=new j(wr,Ia),Ds=new j(ys,Ia),vs=new j(wr,po),qr=new j(ys,po)}if(Ht){let wr;wr=St?new j(0,0):zr?new j(en[0],en[1]):new j(tt[0],tt[1]),hr._rotateAround(Ht,wr),Ds._rotateAround(Ht,wr),vs._rotateAround(Ht,wr),qr._rotateAround(Ht,wr)}const Fi=new j(0,0),_s=new j(0,0);Wt.push({tl:hr,tr:Ds,bl:vs,br:qr,tex:Fn,writingMode:nt.writingMode,glyphOffset:br,sectionIndex:hn.sectionIndex,isSDF:Ri,pixelOffsetTL:Fi,pixelOffsetBR:_s,minFontScaleX:0,minFontScaleY:0})}}return Wt})(0,f,A,b,w,E,g,c.allowVerticalPlacement),qe=c.textSizeData;let Be=null;qe.kind==="source"?(Be=[su*b.layout.get("text-size").evaluate(E,{},Ce)],Be[0]>uf&&Fe(`${c.layerIds[0]}: Value for "text-size" is >= ${py}. Reduce your "text-size".`)):qe.kind==="composite"&&(Be=[su*oe.compositeTextSizes[0].evaluate(E,{},Ce),su*oe.compositeTextSizes[1].evaluate(E,{},Ce)],(Be[0]>uf||Be[1]>uf)&&Fe(`${c.layerIds[0]}: Value for "text-size" is >= ${py}. Reduce your "text-size".`)),c.addSymbols(c.text,Oe,Be,A,w,E,N,o,d,L.lineStartIndex,L.lineLength,re,he,Ce);for(const je of W)Q[je]=c.text.placedSymbolArray.length-1;return 4*Oe.length}function AL(c){for(const o in c)return c[o];return null}function Ix(c,o,d,f,g,b,w,E,A,L){let N=w.top,W=w.bottom,Q=w.left,re=w.right;const oe=w.collisionPadding;if(oe&&(Q-=oe[0],N-=oe[1],re+=oe[2],W+=oe[3]),A){const he=new j(Q,N),Ce=new j(re,N),Oe=new j(Q,W),qe=new j(re,W),Be=ee(A);let je=new j(0,0);L&&(je=new j(L[0],L[1])),he._rotateAround(Be,je),Ce._rotateAround(Be,je),Oe._rotateAround(Be,je),qe._rotateAround(Be,je),Q=Math.min(he.x,Ce.x,Oe.x,qe.x),re=Math.max(he.x,Ce.x,Oe.x,qe.x),N=Math.min(he.y,Ce.y,Oe.y,qe.y),W=Math.max(he.y,Ce.y,Oe.y,qe.y)}return c.emplaceBack(o.x,o.y,o.z,d.x,d.y,Q,N,re,W,E,f,g,b),c.length-1}function vE(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function lj(c,o,d,f){const g=c.compareText;if(o in g){const b=g[o];for(let w=b.length-1;w>=0;w--)if(f.dist(b[w])<d)return!0}else g[o]=[];return g[o].push(f),!1}function PL(c,o){const d=c.fovAboveCenter,f=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-f)/Math.cos(c._pitch),b=Math.sin(d)*g/Math.sin(Math.max(Math.PI/2-c._pitch-d,.01)),w=Math.sin(c._pitch)*b+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Jm(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const d=Math.pow(2,-c.z),f=c.x*d,g=(c.x+1)*d,b=c.y*d,w=(c.y+1)*d,E=Yl(f),A=Yl(g),L=Oo(b),N=Oo(w),W=o.project(E,L),Q=o.project(A,L),re=o.project(A,N),oe=o.project(E,N);let he=Math.min(W.x,Q.x,re.x,oe.x),Ce=Math.min(W.y,Q.y,re.y,oe.y),Oe=Math.max(W.x,Q.x,re.x,oe.x),qe=Math.max(W.y,Q.y,re.y,oe.y);const Be=d/16;function je(tt,Ct,St,$t,on,Mt){const Wt=(St+on)/2,Ht=($t+Mt)/2,en=o.project(Yl(Wt),Oo(Ht)),dn=Math.max(0,he-en.x,Ce-en.y,en.x-Oe,en.y-qe);he=Math.min(he,en.x),Oe=Math.max(Oe,en.x),Ce=Math.min(Ce,en.y),qe=Math.max(qe,en.y),dn>Be&&(je(tt,en,St,$t,Wt,Ht),je(en,Ct,Wt,Ht,on,Mt))}je(W,Q,f,b,g,b),je(Q,re,g,b,g,w),je(re,oe,g,w,f,w),je(oe,W,f,w,f,b),he-=Be,Ce-=Be,Oe+=Be,qe+=Be;const nt=1/Math.max(Oe-he,qe-Ce);return{scale:nt,x:he*nt,y:Ce*nt,x2:Oe*nt,y2:qe*nt,projection:o}}const cj=nu(new Float32Array(16));class df{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,d){return{x:0,y:0,z:0}}unproject(o,d){return new cr(0,0)}projectTilePoint(o,d,f){return{x:o,y:d,z:0}}locationPoint(o,d,f=!0){return o._coordinatePoint(o.locationCoordinate(d),f)}pixelsPerMeter(o,d){return ru(1,o)*d}pixelSpaceConversion(o,d,f){return 1}farthestPixelDistance(o){return PL(o,o.pixelsPerMeter)}pointCoordinate(o,d,f,g){const b=o.horizonLineFromTop(!1),w=new j(d,Math.max(b,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,d,f){const g=new j(d,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const b=this.pointCoordinate(o,g.x,g.y,0);return[b.x,b.y,b.z]}}isPointAboveHorizon(o,d){if(o.elevation)return!this.pointCoordinate3D(o,d.x,d.y);const f=o.horizonLineFromTop();return d.y<f}createInversionMatrix(o,d){return cj}createTileMatrix(o,d,f){let g,b,w;const E=f.canonical,A=nu(new Float64Array(16));if(this.isReprojectedInTileSpace){const L=Jm(E,this);g=1,b=L.x+f.wrap*L.scale,w=L.y,Hm(A,A,[g/L.scale,g/L.scale,o.pixelsPerMeter/d])}else g=d/o.zoomScale(E.z),b=(E.x+Math.pow(2,E.z)*f.wrap)*g,w=E.y*g;return G_(A,A,[b,w,0]),Hm(A,A,[g/Nn,g/Nn,1]),A}upVector(o,d,f){return[0,0,1]}upVectorScale(o,d,f){return{metersToTile:1}}}class uj extends df{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[d,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(ee(d));this.n=(g+Math.sin(ee(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,d){const{n:f,c:g,r0:b}=this,w=ee(o-this.center[0]),E=ee(d),A=Math.sqrt(g-2*f*Math.sin(E))/f;return{x:A*Math.sin(w*f),y:A*Math.cos(w*f)-b,z:0}}unproject(o,d){const{n:f,c:g,r0:b}=this,w=b+d;let E=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(E-=Math.PI*Math.sign(o)*Math.sign(w));const A=ee(this.center[0])*f;E=Ee(E,-Math.PI-A,Math.PI-A);const L=Pe(be(E/f)+this.center[0],-180,180),N=Math.asin(Pe((g-(o*o+w*w)*f*f)/(2*f),-1,1)),W=Pe(be(N),-Vo,Vo);return new cr(L,W)}}const gy=1.340264,vy=-.081106,_y=893e-6,yy=.003796,Ax=Math.sqrt(3)/2;class dj extends df{project(o,d){d=d/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(Ax*Math.sin(d)),g=f*f,b=g*g*g;return{x:.5*(o*Math.cos(f)/(Ax*(gy+3*vy*g+b*(7*_y+9*yy*g)))/Math.PI+.5),y:1-.5*(f*(gy+vy*g+b*(_y+yy*g))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=f*f,b=g*g*g;for(let N,W,Q,re=0;re<12&&(W=f*(gy+vy*g+b*(_y+yy*g))-d,Q=gy+3*vy*g+b*(7*_y+9*yy*g),N=W/Q,f=Pe(f-N,-Math.PI/3,Math.PI/3),g=f*f,b=g*g*g,!(Math.abs(N)<1e-12));++re);const w=Ax*o*(gy+3*vy*g+b*(7*_y+9*yy*g))/Math.cos(f),E=Math.asin(Math.sin(f)/Ax),A=Pe(180*w/Math.PI,-180,180),L=Pe(180*E/Math.PI,-Vo,Vo);return new cr(A,L)}}class hj extends df{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){return{x:.5+o/360,y:.5-d/360,z:0}}unproject(o,d){const f=360*(o-.5),g=Pe(360*(.5-d),-Vo,Vo);return new cr(f,g)}}const sv=Math.PI/2;function Px(c){return Math.tan((sv+c)/2)}class fj extends df{constructor(o){super(o),this.center=o.center||[0,30];const[d,f]=this.parallels=o.parallels||[30,30];let g=ee(d),b=ee(f);this.southernCenter=g+b<0,this.southernCenter&&(g=-g,b=-b);const w=Math.cos(g),E=Px(g);this.n=g===b?Math.sin(g):Math.log(w/Math.cos(b))/Math.log(Px(b)/E),this.f=w*Math.pow(Px(g),this.n)/this.n}project(o,d){d=ee(d),this.southernCenter&&(d=-d),o=ee(o-this.center[0]);const f=1e-6,{n:g,f:b}=this;b>0?d<-sv+f&&(d=-sv+f):d>sv-f&&(d=sv-f);const w=b/Math.pow(Px(d),g);let E=w*Math.sin(g*o),A=b-w*Math.cos(g*o);return E=.5*(E/Math.PI+.5),A=.5*(A/Math.PI+.5),{x:E,y:this.southernCenter?A:1-A,z:0}}unproject(o,d){o=(2*o-.5)*Math.PI,this.southernCenter&&(d=1-d),d=(2*(1-d)-.5)*Math.PI;const{n:f,f:g}=this,b=g-d,w=Math.sign(b),E=Math.sign(f)*Math.sqrt(o*o+b*b);let A=Math.atan2(o,Math.abs(b))*w;b*f<0&&(A-=Math.PI*Math.sign(o)*w);const L=Pe(be(A/f)+this.center[0],-180,180),N=Pe(be(2*Math.atan(Math.pow(g/E,1/f))-sv),-Vo,Vo);return new cr(L,this.southernCenter?-N:N)}}class ML extends df{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,d){return{x:Vu(o),y:Bu(d),z:0}}unproject(o,d){const f=Yl(o),g=Oo(d);return new cr(f,g)}}const DL=ee(Vo);class mj extends df{project(o,d){const f=(d=ee(d))*d,g=f*f;return{x:.5*((o=ee(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(d*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,d){o=(2*o-.5)*Math.PI;let f=d=(2*(1-d)-1)*Math.PI,g=25,b=0,w=f*f;do{w=f*f;const L=w*w;b=(f*(1.007226+w*(.015085+L*(.028874*w-.044475-.005916*L)))-d)/(1.007226+w*(.045255+L*(.259866*w-.311325-.005916*11*L))),f=Pe(f-b,-DL,DL)}while(Math.abs(b)>1e-6&&--g>0);w=f*f;const E=Pe(be(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),A=be(f);return new cr(E,A)}}const LL=ee(Vo);class pj extends df{project(o,d){d=ee(d),o=ee(o);const f=Math.cos(d),g=2/Math.PI,b=Math.acos(f*Math.cos(o/2)),w=Math.sin(b)/b,E=.5*(o*g+2*f*Math.sin(o/2)/w)||0,A=.5*(d+Math.sin(d)/w)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(o,d){let f=o=(2*o-.5)*Math.PI,g=d=(2*(1-d)-1)*Math.PI,b=25;const w=1e-6;let E=0,A=0;do{const L=Math.cos(g),N=Math.sin(g),W=2*N*L,Q=N*N,re=L*L,oe=Math.cos(f/2),he=Math.sin(f/2),Ce=2*oe*he,Oe=he*he,qe=1-re*oe*oe,Be=qe?1/qe:0,je=qe?Math.acos(L*oe)*Math.sqrt(1/qe):0,nt=.5*(2*je*L*he+2*f/Math.PI)-o,tt=.5*(je*N+g)-d,Ct=.5*Be*(re*Oe+je*L*oe*Q)+1/Math.PI,St=Be*(Ce*W/4-je*N*he),$t=.125*Be*(W*he-je*N*re*Ce),on=.5*Be*(Q*oe+je*Oe*L)+.5,Mt=St*$t-on*Ct;E=(tt*St-nt*on)/Mt,A=(nt*$t-tt*Ct)/Mt,f=Pe(f-E,-Math.PI,Math.PI),g=Pe(g-A,-LL,LL)}while((Math.abs(E)>w||Math.abs(A)>w)&&--b>0);return new cr(be(f),be(g))}}class RL extends df{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ee(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,d){const{scale:f,cosPhi:g}=this;return{x:ee(o)*g*f+.5,y:-Math.sin(ee(d))/g*f+.5,z:0}}unproject(o,d){const{scale:f,cosPhi:g}=this,b=-(d-.5)/f,w=Pe(be((o-.5)/f)/g,-180,180),E=Math.asin(Pe(b*g,-1,1)),A=Pe(be(E),-Vo,Vo);return new cr(w,A)}}class gj extends ML{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,d,f){const g=ey(o,d,f);return ls(g,g,ty(Ou(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,d){const f=Wg(d.lat,d.lng),g=Ea([],f),b=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(d),o._centerAltitude):o._centerAltitude;Y_(f,f,g,ru(1,0)*Nn*b);const w=nu(new Float64Array(16));return Wm(w,o.pixelMatrix,o.globeMatrix),ls(f,f,w),new j(f[0],f[1])}pixelsPerMeter(o,d){return ru(1,0)*d}pixelSpaceConversion(o,d,f){const g=ru(1,o)*d,b=ti(ru(1,45)*d,g,f);return this.pixelsPerMeter(o,d)/b}createTileMatrix(o,d,f){const g=$S(Ou(f.canonical));return Wm(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,d){const{center:f}=o,g=ty(Ou(d));return rx(g,g,ee(f.lng)),MS(g,g,ee(f.lat)),Hm(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,d,f,g){return aD(o,d,f,!0)||new Gg(0,0)}pointCoordinate3D(o,d,f){const g=this.pointCoordinate(o,d,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,d){return!aD(o,d.x,d.y,!1)}farthestPixelDistance(o){const d=(function(g,b){const w=g.cameraToCenterDistance,E=g._centerAltitude*b,A=g._camera,L=g._camera.forward(),N=jd([],Xl([],L,-w),[0,0,E]),W=g.worldSize/(2*Math.PI),Q=[0,0,-W],re=g.width/g.height,oe=Math.tan(g.fovAboveCenter),he=Xl([],A.up(),oe),Ce=Xl([],A.right(),oe*re),Oe=Ea([],jd([],jd([],L,he),Ce)),qe=[];let Be;if(new OS(N,Oe).closestPointOnSphere(Q,W,qe)){const je=jd([],qe,Q),nt=iu([],je,N);Be=Math.cos(g.fovAboveCenter)*q_(nt)}else{const je=iu([],N,Q),nt=iu([],Q,N);Ea(nt,nt);const tt=q_(je)-W;Be=Math.sqrt(tt*(tt+2*W));const Ct=Math.acos(Be/(W+tt))-Math.acos(Ec(L,nt));Be*=Math.cos(Ct)}return 1.01*Be})(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=Hg(o.zoom);if(f>0){const g=PL(o,ru(1,o.center.lat)*o.worldSize),b=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return ti(d,g+b*(1-Math.cos(w)),Math.pow(f,10))}return d}upVector(o,d,f){return ey(d,f,o,1)}upVectorScale(o){return{metersToTile:sx(ax(Ou(o)))}}}function OL(c){const o=c.parallels,d=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new ML(c);case"equirectangular":return new hj(c);case"naturalEarth":return new mj(c);case"equalEarth":return new dj(c);case"winkelTripel":return new pj(c);case"albers":return d?new RL(c):new uj(c);case"lambertConformalConic":return d?new RL(c):new fj(c);case"globe":return new gj(c)}throw new Error(`Invalid projection name: ${c.name}`)}const vj=vx.types,_j=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mx(c,o,d,f,g,b,w,E,A,L,N,W,Q){const re=E?Math.min(uf,Math.round(E[0])):0,oe=E?Math.min(uf,Math.round(E[1])):0;c.emplaceBack(o,d,Math.round(32*f),Math.round(32*g),b,w,(re<<1)+(A?1:0),oe,16*L,16*N,256*W,256*Q)}function Dx(c,o,d,f,g,b,w){c.emplaceBack(o,d,f,g,b,w)}function Lx(c,o,d,f,g){c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g),c.emplaceBack(o,d,f,g)}function yj(c){for(const o of c.sections)if(Bd(o.text))return!0;return!1}class _E{constructor(o){this.layoutVertexArray=new jt,this.indexArray=new Mn,this.programConfigurations=o,this.segments=new ms,this.dynamicLayoutVertexArray=new Jt,this.opacityVertexArray=new Rn,this.placedSymbolArray=new Fr,this.globeExtVertexArray=new Qt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,kU.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,AU.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,_j,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,IU.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Sn(_E,"SymbolBuffers");class yE{constructor(o,d,f){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new f,this.segments=new ms,this.collisionVertexArray=new _i,this.collisionVertexArrayExt=new vi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,PU.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,MU.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Sn(yE,"CollisionBuffers");class hf{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nu([]),this.placementViewportMatrix=nu([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=aE(this.zoom,d["text-size"]),this.iconSizeData=aE(this.zoom,d["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>Zl[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new _E(new jm(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new _E(new jm(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new fo,this.lineVertexArray=new Fd,this.symbolInstances=new lr}calculateGlyphDependencies(o,d,f,g,b){for(let w=0;w<o.length;w++)if(d[o.charCodeAt(w)]=!0,g&&b){const E=hy[o.charAt(w)];E&&(d[E.charCodeAt(0)]=!0)}}populate(o,d,f,g){const b=this.layers[0],w=b.layout,E=this.projection.name==="globe",A=w.get("text-font"),L=w.get("text-field"),N=w.get("icon-image"),W=(L.value.kind!=="constant"||L.value.value instanceof Zr&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),Q=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,re=w.get("symbol-sort-key");if(this.features=[],!W&&!Q)return;const oe=d.iconDependencies,he=d.glyphDependencies,Ce=d.availableImages,Oe=new U(this.zoom);for(const{feature:qe,id:Be,index:je,sourceLayerIndex:nt}of o){const tt=b._featureFilter.needGeometry,Ct=Xm(qe,tt);if(!b._featureFilter.filter(Oe,Ct,f))continue;if(tt||(Ct.geometry=Wd(qe,f,g)),E&&qe.type!==1&&f.z<=5){const Mt=Ct.geometry,Wt=.98078528056,Ht=(en,dn)=>Ec(ey(en.x,en.y,f,1),ey(dn.x,dn.y,f,1))<Wt;for(let en=0;en<Mt.length;en++)Mt[en]=A$(Mt[en],Ht)}let St,$t;if(W){const Mt=b.getValueAndResolveTokens("text-field",Ct,f,Ce),Wt=Zr.factory(Mt);yj(Wt)&&(this.hasRTLText=!0),(!this.hasRTLText||k()==="unavailable"||this.hasRTLText&&O.isParsed())&&(St=RU(Wt,b,Ct))}if(Q){const Mt=b.getValueAndResolveTokens("icon-image",Ct,f,Ce);$t=Mt instanceof as?Mt:as.fromString(Mt)}if(!St&&!$t)continue;const on=this.sortFeaturesByKey?re.evaluate(Ct,{},f):void 0;if(this.features.push({id:Be,text:St,icon:$t,index:je,sourceLayerIndex:nt,geometry:Ct.geometry,properties:qe.properties,type:vj[qe.type],sortKey:on}),$t&&(oe[$t.name]=!0),St){const Mt=A.evaluate(Ct,{},f).join(","),Wt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zl.vertical)>=0;for(const Ht of St.sections)if(Ht.image)oe[Ht.image.name]=!0;else{const en=Nm(St.toString()),dn=Ht.fontStack||Mt,Ft=he[dn]=he[dn]||{};this.calculateGlyphDependencies(Ht.text,Ft,Wt,this.allowVerticalPlacement,en)}}}w.get("symbol-placement")==="line"&&(this.features=(function(qe){const Be={},je={},nt=[];let tt=0;function Ct(Mt){nt.push(qe[Mt]),tt++}function St(Mt,Wt,Ht){const en=je[Mt];return delete je[Mt],je[Wt]=en,nt[en].geometry[0].pop(),nt[en].geometry[0]=nt[en].geometry[0].concat(Ht[0]),en}function $t(Mt,Wt,Ht){const en=Be[Wt];return delete Be[Wt],Be[Mt]=en,nt[en].geometry[0].shift(),nt[en].geometry[0]=Ht[0].concat(nt[en].geometry[0]),en}function on(Mt,Wt,Ht){const en=Ht?Wt[0][Wt[0].length-1]:Wt[0][0];return`${Mt}:${en.x}:${en.y}`}for(let Mt=0;Mt<qe.length;Mt++){const Wt=qe[Mt],Ht=Wt.geometry,en=Wt.text?Wt.text.toString():null;if(!en){Ct(Mt);continue}const dn=on(en,Ht),Ft=on(en,Ht,!0);if(dn in je&&Ft in Be&&je[dn]!==Be[Ft]){const yn=$t(dn,Ft,Ht),kn=St(dn,Ft,nt[yn].geometry);delete Be[dn],delete je[Ft],je[on(en,nt[kn].geometry,!0)]=kn,nt[yn].geometry=null}else dn in je?St(dn,Ft,Ht):Ft in Be?$t(dn,Ft,Ht):(Ct(Mt),Be[dn]=tt-1,je[Ft]=tt-1)}return nt.filter((Mt=>Mt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((qe,Be)=>qe.sortKey-Be.sortKey))}update(o,d,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=OL(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const f=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:g,y:b}of d)this.lineVertexArray.emplaceBack(g,b);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,d,f,g,b,w,E,A,L,N,W,Q,re,oe){const he=o.indexArray,Ce=o.layoutVertexArray,Oe=o.globeExtVertexArray,qe=o.segments.prepareSegment(4*d.length,Ce,he,this.canOverlap?w.sortKey:void 0),Be=this.glyphOffsetArray.length,je=qe.vertexLength,nt=this.allowVerticalPlacement&&E===Zl.vertical?Math.PI/2:0,tt=w.text&&w.text.sections;for(let St=0;St<d.length;St++){const{tl:$t,tr:on,bl:Mt,br:Wt,tex:Ht,pixelOffsetTL:en,pixelOffsetBR:dn,minFontScaleX:Ft,minFontScaleY:yn,glyphOffset:kn,isSDF:wn,sectionIndex:si}=d[St],hn=qe.vertexLength,Fn=kn[1];if(Mx(Ce,L.x,L.y,$t.x,Fn+$t.y,Ht.x,Ht.y,f,wn,en.x,en.y,Ft,yn),Mx(Ce,L.x,L.y,on.x,Fn+on.y,Ht.x+Ht.w,Ht.y,f,wn,dn.x,en.y,Ft,yn),Mx(Ce,L.x,L.y,Mt.x,Fn+Mt.y,Ht.x,Ht.y+Ht.h,f,wn,en.x,dn.y,Ft,yn),Mx(Ce,L.x,L.y,Wt.x,Fn+Wt.y,Ht.x+Ht.w,Ht.y+Ht.h,f,wn,dn.x,dn.y,Ft,yn),A){const{x:oi,y:Ri,z:ai}=A.anchor,[Un,Er,ci]=A.up;Dx(Oe,oi,Ri,ai,Un,Er,ci),Dx(Oe,oi,Ri,ai,Un,Er,ci),Dx(Oe,oi,Ri,ai,Un,Er,ci),Dx(Oe,oi,Ri,ai,Un,Er,ci),Lx(o.dynamicLayoutVertexArray,oi,Ri,ai,nt)}else Lx(o.dynamicLayoutVertexArray,L.x,L.y,L.z,nt);he.emplaceBack(hn,hn+1,hn+2),he.emplaceBack(hn+1,hn+2,hn+3),qe.vertexLength+=4,qe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kn[0]),St!==d.length-1&&si===d[St+1].sectionIndex||o.programConfigurations.populatePaintArrays(Ce.length,w,w.index,{},re,oe,tt&&tt[si])}const Ct=A?A.anchor:L;o.placedSymbolArray.emplaceBack(Ct.x,Ct.y,Ct.z,L.x,L.y,Be,this.glyphOffsetArray.length-Be,je,N,W,L.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],E,0,!1,0,Q,0)}_commitLayoutVertex(o,d,f,g,b,w,E){o.emplaceBack(d,f,g,b,w,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,d,f,g,b,w,E){const A=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),L=A.vertexLength,N=E.tileAnchorX,W=E.tileAnchorY;for(let re=0;re<4;re++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(d,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(d,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(d,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,W,new j(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,W,new j(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,W,new j(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,b,w,N,W,new j(o.x1,o.y2)),A.vertexLength+=4;const Q=f.indexArray;Q.emplaceBack(L,L+1),Q.emplaceBack(L+1,L+2),Q.emplaceBack(L+2,L+3),Q.emplaceBack(L+3,L),A.primitiveLength+=4}_addTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const A=f.get(E),L=this.getSymbolInstanceTextSize(o,w,d,E);this._addCollisionDebugVertices(A,L,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const A=f.get(E),L=this.getSymbolInstanceIconSize(o,d,w.placedIconSymbolIndex);this._addCollisionDebugVertices(A,L,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,d){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yE(En,eL.members,Ms),this.iconCollisionBox=new yE(En,eL.members,Ms);const f=Zg(this.iconSizeData,o),g=Zg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._addTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(o,d,f,g){const b=this.text.placedSymbolArray.get(d.rightJustifiedTextSymbolIndex>=0?d.rightJustifiedTextSymbolIndex:d.centerJustifiedTextSymbolIndex>=0?d.centerJustifiedTextSymbolIndex:d.leftJustifiedTextSymbolIndex>=0?d.leftJustifiedTextSymbolIndex:d.verticalPlacedTextSymbolIndex>=0?d.verticalPlacedTextSymbolIndex:g),w=xx(this.textSizeData,o,b)/mo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,d,f){const g=this.icon.placedSymbolArray.get(f),b=xx(this.iconSizeData,o,g);return this.tilePixelRatio*b}_commitDebugCollisionVertexUpdate(o,d,f){o.emplaceBack(d,-f,-f),o.emplaceBack(d,f,-f),o.emplaceBack(d,f,f),o.emplaceBack(d,-f,f)}_updateTextDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const A=f.get(E),L=this.getSymbolInstanceTextSize(o,w,d,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,L,A.padding)}}_updateIconDebugCollisionBoxes(o,d,f,g,b,w){for(let E=g;E<b;E++){const A=f.get(E),L=this.getSymbolInstanceIconSize(o,d,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,L,A.padding)}}updateCollisionDebugBuffers(o,d){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Zg(this.iconSizeData,o),g=Zg(this.textSizeData,o);for(let b=0;b<this.symbolInstances.length;b++){const w=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(g,o,d,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,o,d,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,o,d,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,d,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,d,f,g,b,w,E,A,L){const N={};if(d<f){const{x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je,featureIndex:nt}=o.get(d);N.textBox={x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je},N.textFeatureIndex=nt}if(g<b){const{x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je,featureIndex:nt}=o.get(g);N.verticalTextBox={x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je},N.verticalTextFeatureIndex=nt}if(w<E){const{x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je,featureIndex:nt}=o.get(w);N.iconBox={x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je},N.iconFeatureIndex=nt}if(A<L){const{x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je,featureIndex:nt}=o.get(A);N.verticalIconBox={x1:W,y1:Q,x2:re,y2:oe,padding:he,projectedAnchorX:Ce,projectedAnchorY:Oe,projectedAnchorZ:qe,tileAnchorX:Be,tileAnchorY:je},N.verticalIconFeatureIndex=nt}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const f=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const f=o.placedSymbolArray.get(d),g=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<g;b+=4)o.indexArray.emplaceBack(b,b+1,b+2),o.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),f=Math.cos(o),g=[],b=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const A=this.symbolInstances.get(E);g.push(0|Math.round(d*A.tileAnchorX+f*A.tileAnchorY)),b.push(A.featureIndex)}return w.sort(((E,A)=>g[E]-g[A]||b[A]-b[E])),w}addToSortKeyRanges(o,d){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===d?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const f=this.symbolInstances.get(d);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:b,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:L}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),b>=0&&b!==g&&this.addIndicesForPlacedSymbol(this.text,b),w>=0&&w!==b&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A),L>=0&&this.addIndicesForPlacedSymbol(this.icon,L)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Sn(hf,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),hf.MAX_GLYPHS=65535,hf.addDynamicAttributes=Lx;const bj=new Re({"symbol-placement":new ce(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new ce(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ce(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xe(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ce(Ot.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ce(Ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ce(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new ce(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ce(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new xe(Ot.layout_symbol["icon-size"]),"icon-text-fit":new ce(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ce(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new xe(Ot.layout_symbol["icon-image"]),"icon-rotate":new xe(Ot.layout_symbol["icon-rotate"]),"icon-padding":new ce(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new ce(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new xe(Ot.layout_symbol["icon-offset"]),"icon-anchor":new xe(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ce(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ce(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ce(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new xe(Ot.layout_symbol["text-field"]),"text-font":new xe(Ot.layout_symbol["text-font"]),"text-size":new xe(Ot.layout_symbol["text-size"]),"text-max-width":new xe(Ot.layout_symbol["text-max-width"]),"text-line-height":new xe(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new xe(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new xe(Ot.layout_symbol["text-justify"]),"text-radial-offset":new xe(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ce(Ot.layout_symbol["text-variable-anchor"]),"text-anchor":new xe(Ot.layout_symbol["text-anchor"]),"text-max-angle":new ce(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new ce(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new xe(Ot.layout_symbol["text-rotate"]),"text-padding":new ce(Ot.layout_symbol["text-padding"]),"text-keep-upright":new ce(Ot.layout_symbol["text-keep-upright"]),"text-transform":new xe(Ot.layout_symbol["text-transform"]),"text-offset":new xe(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new ce(Ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ce(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new ce(Ot.layout_symbol["text-optional"])});var bE={paint:new Re({"icon-opacity":new xe(Ot.paint_symbol["icon-opacity"]),"icon-color":new xe(Ot.paint_symbol["icon-color"]),"icon-halo-color":new xe(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new xe(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xe(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new ce(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new ce(Ot.paint_symbol["icon-translate-anchor"]),"text-opacity":new xe(Ot.paint_symbol["text-opacity"]),"text-color":new xe(Ot.paint_symbol["text-color"],{runtimeType:vr,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new xe(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new xe(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new xe(Ot.paint_symbol["text-halo-blur"]),"text-translate":new ce(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new ce(Ot.paint_symbol["text-translate-anchor"])}),layout:bj};class VL{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:ga,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Sn(VL,"FormatSectionOverride",{omit:["defaultValue"]});class Rx extends tu{constructor(o){super(o,bE)}recalculate(o,d){super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const b of f)g.indexOf(b)<0&&g.push(b);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,d,f,g){const b=this.layout.get(o).evaluate(d,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Pu(w.value)||!b?b:(function(E,A){return A.replace(/{([^{}]+)}/g,((L,N)=>N in E?String(E[N]):""))})(d.properties,b)}createBucket(o){return new hf(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of bE.paint.overridableProperties){if(!Rx.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),f=new VL(d),g=new Zh(f,d.property.specification);let b=null;b=d.value.kind==="constant"||d.value.kind==="source"?new Id("source",g):new xc("composite",g,d.value.zoomStops,d.value._interpolationType),this.paint._values[o]=new Se(d.property,b,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,f){return!(!this.layout||d.isDataDriven()||f.isDataDriven())&&Rx.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const f=o.get("text-field"),g=bE.paint.properties[d];let b=!1;const w=E=>{for(const A of E)if(g.overrides&&g.overrides.hasOverride(A))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Zr)w(f.value.value.sections);else if(f.value.kind==="source"){const E=L=>{b||(L instanceof pl&&_r(L.value)===Ko?w(L.value.sections):L instanceof _a?w(L.sections):L.eachChild(E))},A=f.value;A._styleExpression&&E(A._styleExpression.expression)}return b}getProgramConfiguration(o){return new af(this,o)}}var xj={paint:new Re({"background-color":new ce(Ot.paint_background["background-color"]),"background-pattern":new ce(Ot.paint_background["background-pattern"]),"background-opacity":new ce(Ot.paint_background["background-opacity"])})},wj={paint:new Re({"raster-opacity":new ce(Ot.paint_raster["raster-opacity"]),"raster-hue-rotate":new ce(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ce(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ce(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new ce(Ot.paint_raster["raster-saturation"]),"raster-contrast":new ce(Ot.paint_raster["raster-contrast"]),"raster-resampling":new ce(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new ce(Ot.paint_raster["raster-fade-duration"])})};class Tj extends tu{constructor(o){super(o,{}),this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var Sj={paint:new Re({"sky-type":new ce(Ot.paint_sky["sky-type"]),"sky-atmosphere-sun":new ce(Ot.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ce(Ot.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ce(Ot.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ce(Ot.paint_sky["sky-gradient-radius"]),"sky-gradient":new De(Ot.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ce(Ot.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ce(Ot.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ce(Ot.paint_sky["sky-opacity"])})};function xE(c,o,d){const f=[0,0,1],g=tD([]);return iD(g,g,d?-ee(c)+Math.PI:ee(c)),nD(g,g,-ee(o)),ZM(f,f,g),Ea(f,f)}const Ej={circle:class extends tu{constructor(c){super(c,V$)}createBucket(c){return new qS(c)}queryRadius(c){const o=c;return qg("circle-radius",this,o)+qg("circle-stroke-width",this,o)+ux(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,d,f,g,b,w,E){const A=ED(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),L=this.paint.get("circle-radius").evaluate(o,d)+this.paint.get("circle-stroke-width").evaluate(o,d);return CD(c,f,b,w,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",A,L)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new af(this,c)}},heatmap:class extends tu{createBucket(c){return new ID(c)}constructor(c){super(c,N$),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ZS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return qg("heatmap-radius",this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E){const A=this.paint.get("heatmap-radius").evaluate(o,d);return CD(c,f,b,w,E,!0,!0,new j(0,0),A)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new af(this,c)}},hillshade:class extends tu{constructor(c){super(c,$$)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends tu{constructor(c){super(c,iU)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),d=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&d.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),d}getProgramConfiguration(c){return new af(this,c)}recalculate(c,o){super.recalculate(c,o);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new px(c)}queryRadius(){return ux(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,d,f,g,b){return!c.queryGeometry.isAboveHorizon&&bD(SD(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends tu{constructor(c){super(c,yU)}createBucket(c){return new cy(c)}queryRadius(){return ux(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new af(this,c)}queryIntersectsFeature(c,o,d,f,g,b,w,E,A){const L=ED(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(o,d),W=this.paint.get("fill-extrusion-base").evaluate(o,d),Q=[0,0],re=E&&b.elevation,oe=b.elevation?b.elevation.exaggeration():1,he=c.tile.getBucket(this);if(re&&he instanceof cy){const je=he.centroidVertexArray,nt=A+1;nt<je.length&&(Q[0]=je.geta_centroid_pos0(nt),Q[1]=je.geta_centroid_pos1(nt))}if(Q[0]===0&&Q[1]===1)return!1;b.projection.name==="globe"&&(f=GD([f],[new j(0,0),new j(Nn,Nn)],c.tileID.canonical).map((je=>je.polygon)).flat());const Ce=re?E:null,[Oe,qe]=(function(je,nt,tt,Ct,St,$t,on,Mt,Wt,Ht,en){return je.projection.name==="globe"?(function(dn,Ft,yn,kn,wn,si,hn,Fn,oi,Ri,ai){const Un=[],Er=[],ci=dn.projection.upVectorScale(ai,dn.center.lat,dn.worldSize).metersToTile,ui=[0,0,0,1],ur=[0,0,0,1],br=(dr,zr,Jr,gs)=>{dr[0]=zr,dr[1]=Jr,dr[2]=gs,dr[3]=1},xr=HD();yn>0&&(yn+=xr),kn+=xr;for(const dr of Ft){const zr=[],Jr=[];for(const gs of dr){const hr=gs.x+wn.x,Ds=gs.y+wn.y,vs=dn.projection.projectTilePoint(hr,Ds,ai),qr=dn.projection.upVector(ai,gs.x,gs.y);let Fi=yn,_s=kn;if(hn){const wr=YD(hr,Ds,yn,kn,hn,Fn,oi,Ri);Fi+=wr.base,_s+=wr.top}yn!==0?br(ui,vs.x+qr[0]*ci*Fi,vs.y+qr[1]*ci*Fi,vs.z+qr[2]*ci*Fi):br(ui,vs.x,vs.y,vs.z),br(ur,vs.x+qr[0]*ci*_s,vs.y+qr[1]*ci*_s,vs.z+qr[2]*ci*_s),ls(ui,ui,si),ls(ur,ur,si),zr.push(new Yg(ui[0],ui[1],ui[2])),Jr.push(new Yg(ur[0],ur[1],ur[2]))}Un.push(zr),Er.push(Jr)}return[Un,Er]})(je,nt,tt,Ct,St,$t,on,Mt,Wt,Ht,en):on?(function(dn,Ft,yn,kn,wn,si,hn,Fn,oi){const Ri=[],ai=[],Un=[0,0,0,1];for(const Er of dn){const ci=[],ui=[];for(const ur of Er){const br=ur.x+kn.x,xr=ur.y+kn.y,dr=YD(br,xr,Ft,yn,si,hn,Fn,oi);Un[0]=br,Un[1]=xr,Un[2]=dr.base,Un[3]=1,Gm(Un,Un,wn),Un[3]=Math.max(Un[3],1e-5);const zr=new Yg(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);Un[0]=br,Un[1]=xr,Un[2]=dr.top,Un[3]=1,Gm(Un,Un,wn),Un[3]=Math.max(Un[3],1e-5);const Jr=new Yg(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);ci.push(zr),ui.push(Jr)}Ri.push(ci),ai.push(ui)}return[Ri,ai]})(nt,tt,Ct,St,$t,on,Mt,Wt,Ht):(function(dn,Ft,yn,kn,wn){const si=[],hn=[],Fn=wn[8]*Ft,oi=wn[9]*Ft,Ri=wn[10]*Ft,ai=wn[11]*Ft,Un=wn[8]*yn,Er=wn[9]*yn,ci=wn[10]*yn,ui=wn[11]*yn;for(const ur of dn){const br=[],xr=[];for(const dr of ur){const zr=dr.x+kn.x,Jr=dr.y+kn.y,gs=wn[0]*zr+wn[4]*Jr+wn[12],hr=wn[1]*zr+wn[5]*Jr+wn[13],Ds=wn[2]*zr+wn[6]*Jr+wn[14],vs=wn[3]*zr+wn[7]*Jr+wn[15],qr=gs+Fn,Fi=hr+oi,_s=Ds+Ri,wr=Math.max(vs+ai,1e-5),Ia=gs+Un,ys=hr+Er,po=Ds+ci,eo=Math.max(vs+ui,1e-5);br.push(new Yg(qr/wr,Fi/wr,_s/wr)),xr.push(new Yg(Ia/eo,ys/eo,po/eo))}si.push(br),hn.push(xr)}return[si,hn]})(nt,tt,Ct,St,$t)})(b,f,W,N,L,w,Ce,Q,oe,b.center.lat,c.tileID.canonical),Be=c.queryGeometry;return(function(je,nt,tt){let Ct=1/0;bD(tt,nt)&&(Ct=XD(tt,nt[0]));for(let St=0;St<nt.length;St++){const $t=nt[St],on=je[St];for(let Mt=0;Mt<$t.length-1;Mt++){const Wt=$t[Mt],Ht=[Wt,$t[Mt+1],on[Mt+1],on[Mt],Wt];yD(tt,Ht)&&(Ct=Math.min(Ct,XD(tt,Ht)))}}return Ct!==1/0&&Ct})(Oe,qe,Be.isPointQuery()?Be.screenBounds:Be.screenGeometry)}},line:class extends tu{constructor(c){super(c,ZD),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof ar,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=JD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new bx(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new af(this,c)}queryRadius(c){const o=c,d=QD(qg("line-width",this,o),qg("line-gap-width",this,o)),f=qg("line-offset",this,o);return d/2+Math.abs(f)+ux(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,d,f,g,b){if(c.queryGeometry.isAboveHorizon)return!1;const w=SD(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,c.pixelToTileUnitsFactor),E=c.pixelToTileUnitsFactor/2*QD(this.paint.get("line-width").evaluate(o,d),this.paint.get("line-gap-width").evaluate(o,d)),A=this.paint.get("line-offset").evaluate(o,d);return A&&(f=(function(L,N){const W=[],Q=new j(0,0);for(let re=0;re<L.length;re++){const oe=L[re],he=[];for(let Ce=0;Ce<oe.length;Ce++){const Oe=oe[Ce],qe=oe[Ce+1],Be=Ce===0?Q:Oe.sub(oe[Ce-1])._unit()._perp(),je=Ce===oe.length-1?Q:qe.sub(Oe)._unit()._perp(),nt=Be._add(je)._unit();nt._mult(1/(nt.x*je.x+nt.y*je.y)),he.push(nt._mult(N)._add(Oe))}W.push(he)}return W})(f,A*c.pixelToTileUnitsFactor)),(function(L,N,W){for(let Q=0;Q<N.length;Q++){const re=N[Q];if(L.length>=3){for(let oe=0;oe<re.length;oe++)if(Ym(L,re[oe]))return!0}if(D$(L,re,W))return!0}return!1})(w,f,E)}isTileClipped(){return!0}},symbol:Rx,background:class extends tu{constructor(c){super(c,xj)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends tu{constructor(c){super(c,wj)}getProgramIds(){return["raster"]}},sky:class extends tu{constructor(c){super(c,Sj),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="sky-gradient"?this._updateColorRamp():c!=="sky-atmosphere-sun"&&c!=="sky-atmosphere-halo-color"&&c!=="sky-atmosphere-color"&&c!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=ZS({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,b=c.style.light,w=b.properties.get("position");return g&&b.properties.get("anchor")==="viewport"&&Fe("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?xE(w.azimuthal,90-w.polar,o):xE(f[0],90-f[1],o)}const d=this.paint.get("sky-gradient-center");return xE(d[0],90-d[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return c==="atmosphere"?["skyboxCapture","skybox"]:c==="gradient"?["skyboxGradient"]:null}}};class by{constructor(o,d,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(d,g)}update(o,d,f){const{width:g,height:b}=o,{context:w}=this,{gl:E}=w,{HTMLImageElement:A,HTMLCanvasElement:L,HTMLVideoElement:N,ImageData:W,ImageBitmap:Q}=p;if(E.bindTexture(E.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!d||d.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===b){const{x:re,y:oe}=f||{x:0,y:0};o instanceof A||o instanceof L||o instanceof N||o instanceof W||Q&&o instanceof Q?E.texSubImage2D(E.TEXTURE_2D,0,re,oe,E.RGBA,E.UNSIGNED_BYTE,o):E.texSubImage2D(E.TEXTURE_2D,0,re,oe,g,b,E.RGBA,E.UNSIGNED_BYTE,o.data)}else this.size=[g,b],o instanceof A||o instanceof L||o instanceof N||o instanceof W||Q&&o instanceof Q?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,o):E.texImage2D(E.TEXTURE_2D,0,this.format,g,b,0,this.format,E.UNSIGNED_BYTE,o.data);this.useMipmap=!!(d&&d.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(o,d){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),d!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,d),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class Cj{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class kj{constructor(){this.tasks={},this.taskQueue=[],yt(["process"],this),this.invoker=new Cj(this.process),this.nextId=0}add(o,d){const f=this.nextId++,g=(function({type:b,isSymbolTile:w,zoom:E}){return E=E||0,b==="message"?0:b!=="maybePrepare"||w?b!=="parseTile"||w?b==="parseTile"&&w?300-E:b==="maybePrepare"&&w?400-E:500:200-E:100-E})(d);if(g===0){vt();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:d,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){vt();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const d=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!d)return;d.fn()}finally{}}pick(){let o=null,d=1/0;for(let g=0;g<this.taskQueue.length;g++){const b=this.tasks[this.taskQueue[g]];b.priority<d&&(d=b.priority,o=g)}if(o===null)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class BL{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const f=o[d];this._stringToNumber[f]=d,this._numberToString[d]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const Ij=["tile","layer","source","sourceLayer","state"];class FL{constructor(o,d,f,g,b){this.type="Feature",this._vectorTileFeature=o,this._z=d,this._x=f,this._y=g,this.properties=o.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(o.id=this.id);for(const d of Ij)this[d]!==void 0&&(o[d]=this[d]);return o}}const Ic=32,Fu=33,ff=new Uint16Array(8184);for(let c=0;c<2046;c++){let o=c+2,d=0,f=0,g=0,b=0,w=0,E=0;for(1&o?g=b=w=Ic:d=f=E=Ic;(o>>=1)>1;){const L=d+g>>1,N=f+b>>1;1&o?(g=d,b=f,d=w,f=E):(d=g,f=b,g=w,b=E),w=L,E=N}const A=4*c;ff[A+0]=d,ff[A+1]=f,ff[A+2]=g,ff[A+3]=b}const zu=new Uint16Array(2178),mf=new Uint8Array(1089),Ox=new Uint16Array(1089);function zL(c){return c===0?-.03125:c===32?.03125:0}var NL=lt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const $L={type:2,extent:Nn,loadGeometry:()=>[[new j(0,0),new j(Nn+1,0),new j(Nn+1,Nn+1),new j(0,Nn+1),new j(0,0)]]};class wE{constructor(o,d,f,g,b){this.tileID=o,this.uid=Nt(),this.uses=0,this.tileSize=d,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=b,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const d=o+this.timeAdded;d<ko.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Jm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,d,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=(function(g,b){const w={};if(!b)return w;for(const E of g){const A=E.layerIds.map((L=>b.getLayer(L))).filter(Boolean);if(A.length!==0){E.layers=A,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map((L=>A.filter((N=>N.id===L))[0])));for(const L of A)w[L.id]=E}}return w})(o.buckets,d.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const b=this.buckets[g];if(b instanceof hf){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const b=this.buckets[g];if(b instanceof hf&&b.hasRTLText){this.hasRTLText=!0,O.isLoading()||O.isLoaded()||k()!=="deferred"||R();break}}this.queryPadding=0;for(const g in this.buckets){const b=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new Xi}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const d=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new by(o,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new by(o,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new by(o,this.lineAtlas.image,d.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,d,f,g,b,w,E,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:E,transform:w,params:b,tileTransform:this.tileTransform},o,d,f):{}}querySourceFeatures(o,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),b=d?d.sourceLayer:"",w=g._geojsonTileLayer||g[b];if(!w)return;const E=ef(d&&d.filter),{z:A,x:L,y:N}=this.tileID.canonical,W={z:A,x:L,y:N};for(let Q=0;Q<w.length;Q++){const re=w.feature(Q);if(E.needGeometry){const Ce=Xm(re,!0);if(!E.filter(new U(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!E.filter(new U(this.tileID.overscaledZ),re))continue;const oe=f.getId(re,b),he=new FL(re,A,L,N,oe);he.tile=W,o.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const d=this.expirationTime;if(o.cacheControl){const f=gt(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{const b=this.expirationTime-d;b?this.expirationTime=f+Math.max(b,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0||!d)return;const f=this.latestFeatureIndex.loadVTLayers(),g=d.style.listImages();for(const b in this.buckets){if(!d.style.hasLayer(b))continue;const w=this.buckets[b],E=w.layers[0].sourceLayer||"_geojsonTileLayer",A=f[E],L=o[E];if(!A||!L||Object.keys(L).length===0)continue;if(w.update(L,A,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof bx||w instanceof px){const W=d.style._getSourceCache(w.layers[0].source);d._terrain&&d._terrain.enabled&&W&&w.programConfigurations.needsUpload&&d._terrain._clearRenderCacheForTile(W.id,this.tileID)}const N=d&&d.style&&d.style.getLayer(b);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ko.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=ko.now()+o}setTexture(o,d){const f=d.context,g=f.gl;this.texture=this.texture||d.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new by(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(o,d){const f={};for(const g of d)f[g]=!0;this.dependencies[o]=f}hasDependency(o,d){for(const f of o){const g=this.dependencies[f];if(g){for(const b of d)if(g[b])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const f=Wd($L,this.tileID.canonical,this.tileTransform)[0],g=new Xt,b=new Sa;for(let w=0;w<f.length;w++){const{x:E,y:A}=f[w];g.emplaceBack(E,A),b.emplaceBack(w)}b.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(b),this._tileDebugBuffer=o.createVertexBuffer(g,J_.members),this._tileDebugSegments=ms.simpleSegment(0,0,g.length,b.length)}_makeTileBoundsBuffers(o,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const f=Wd($L,this.tileID.canonical,this.tileTransform)[0];let g,b;if(this.isRaster){const w=(function(E,A){const L=Jm(E,A),N=Math.pow(2,E.z);for(let Ce=0;Ce<Fu;Ce++)for(let Oe=0;Oe<Fu;Oe++){const qe=Yl((E.x+(Oe+zL(Oe))/Ic)/N),Be=Oo((E.y+(Ce+zL(Ce))/Ic)/N),je=A.project(qe,Be),nt=Ce*Fu+Oe;zu[2*nt+0]=Math.round((je.x*L.scale-L.x)*Nn),zu[2*nt+1]=Math.round((je.y*L.scale-L.y)*Nn)}mf.fill(0),Ox.fill(0);for(let Ce=2045;Ce>=0;Ce--){const Oe=4*Ce,qe=ff[Oe+0],Be=ff[Oe+1],je=ff[Oe+2],nt=ff[Oe+3],tt=qe+je>>1,Ct=Be+nt>>1,St=tt+Ct-Be,$t=Ct+qe-tt,on=Be*Fu+qe,Mt=nt*Fu+je,Wt=Ct*Fu+tt,Ht=Math.hypot((zu[2*on+0]+zu[2*Mt+0])/2-zu[2*Wt+0],(zu[2*on+1]+zu[2*Mt+1])/2-zu[2*Wt+1])>=16;mf[Wt]=mf[Wt]||(Ht?1:0),Ce<1022&&(mf[Wt]=mf[Wt]||mf[(Be+$t>>1)*Fu+(qe+St>>1)]||mf[(nt+$t>>1)*Fu+(je+St>>1)])}const W=new Bt,Q=new Mn;let re=0;function oe(Ce,Oe){const qe=Oe*Fu+Ce;return Ox[qe]===0&&(W.emplaceBack(zu[2*qe+0],zu[2*qe+1],Ce*Nn/Ic,Oe*Nn/Ic),Ox[qe]=++re),Ox[qe]-1}function he(Ce,Oe,qe,Be,je,nt){const tt=Ce+qe>>1,Ct=Oe+Be>>1;if(Math.abs(Ce-je)+Math.abs(Oe-nt)>1&&mf[Ct*Fu+tt])he(je,nt,Ce,Oe,tt,Ct),he(qe,Be,je,nt,tt,Ct);else{const St=oe(Ce,Oe),$t=oe(qe,Be),on=oe(je,nt);Q.emplaceBack(St,$t,on)}}return he(0,0,Ic,Ic,Ic,0),he(Ic,Ic,0,0,0,Ic),{vertices:W,indices:Q}})(this.tileID.canonical,d);g=w.vertices,b=w.indices}else{g=new Bt,b=new Mn;for(const{x:E,y:A}of f)g.emplaceBack(E,A,0,0);const w=nE(g.int16,void 0,4);for(let E=0;E<w.length;E+=3)b.emplaceBack(w[E],w[E+1],w[E+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,NL.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(b),this._tileBoundsSegments=ms.simpleSegment(0,0,g.length,b.length)}_makeGlobeTileDebugBuffers(o,d){const f=d.projection;if(!f||f.name!=="globe"||d.freezeTileCoverage)return;const g=this.tileID.canonical,b=ty(lD(g,d)),w=Hg(d.zoom);let E;w>0&&(E=PS(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,d,b,E,w),this._makeGlobeTileDebugTextBuffer(o,g,d,b,E,w)}_globePoint(o,d,f,g,b,w,E){let A=ey(o,d,f);if(w){const L=1<<f.z,N=Vu(g.center.lng),W=Bu(g.center.lat),Q=(f.x+.5)/L-N;let re=0;Q>.5?re=-1:Q<-.5&&(re=1);let oe=(o/Nn+f.x)/L+re,he=(d/Nn+f.y)/L;oe=(oe-N)*g._pixelsPerMercatorPixel+N,he=(he-W)*g._pixelsPerMercatorPixel+W;const Ce=[oe*g.worldSize,he*g.worldSize,0];ls(Ce,Ce,w),A=Km(A,Ce,E)}return ls(A,A,b)}_makeGlobeTileDebugBorderBuffer(o,d,f,g,b,w){const E=new Xt,A=new Sa,L=new ft,N=(Q,re,oe,he,Ce)=>{const Oe=(oe-Q)/(Ce-1),qe=(he-re)/(Ce-1),Be=E.length;for(let je=0;je<Ce;je++){const nt=Q+je*Oe,tt=re+je*qe;E.emplaceBack(nt,tt);const Ct=this._globePoint(nt,tt,d,f,g,b,w);L.emplaceBack(Ct[0],Ct[1],Ct[2]),A.emplaceBack(Be+je)}},W=Nn;N(0,0,W,0,16),N(W,0,W,W,16),N(W,W,0,W,16),N(0,W,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(A),this._tileDebugBuffer=o.createVertexBuffer(E,J_.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(L,sD.members),this._tileDebugSegments=ms.simpleSegment(0,0,E.length,A.length)}_makeGlobeTileDebugTextBuffer(o,d,f,g,b,w){const E=Nn/4,A=new Xt,L=new Mn,N=new ft,W=25;L.reserve(32),A.reserve(W),N.reserve(W);const Q=(re,oe)=>W*re+oe;for(let re=0;re<W;re++){const oe=re*E;for(let he=0;he<W;he++){const Ce=he*E;A.emplaceBack(Ce,oe);const Oe=this._globePoint(Ce,oe,d,f,g,b,w);N.emplaceBack(Oe[0],Oe[1],Oe[2])}}for(let re=0;re<4;re++)for(let oe=0;oe<4;oe++){const he=Q(re,oe),Ce=Q(re,oe+1),Oe=Q(re+1,oe),qe=Q(re+1,oe+1);L.emplaceBack(he,Ce,Oe),L.emplaceBack(Oe,Ce,qe)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(L),this._tileDebugTextBuffer=o.createVertexBuffer(A,J_.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(N,sD.members),this._tileDebugTextSegments=ms.simpleSegment(0,0,W,32)}}class Aj{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,d,f){const g=String(d);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},ct(this.stateChanges[o][g],f),this.deletedStates[o]===null){this.deletedStates[o]={};for(const b in this.state[o])b!==g&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][g]===null){this.deletedStates[o][g]={};for(const b in this.state[o][g])f[b]||(this.deletedStates[o][g][b]=null)}else for(const b in f)this.deletedStates[o]&&this.deletedStates[o][g]&&this.deletedStates[o][g][b]===null&&delete this.deletedStates[o][g][b]}removeFeatureState(o,d,f){if(this.deletedStates[o]===null)return;const g=String(d);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&d!==void 0)this.deletedStates[o][g]!==null&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(d!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,d){const f=String(d),g=ct({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const b=this.deletedStates[o][d];if(b===null)return{};for(const w in b)delete g[w]}return g}initializeTileState(o,d){o.setFeatureState(this.state,d)}coalesceChanges(o,d){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const b={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),ct(this.state[g][w],this.stateChanges[g][w]),b[w]=this.state[g][w];f[g]=b}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const b={};if(this.deletedStates[g]===null)for(const w in this.state[g])b[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const E of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][E];b[w]=this.state[g][w]}f[g]=f[g]||{},ct(f[g],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in o)o[g].setFeatureState(f,d)}}class UL{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,d){const f=this.toIdx(o,d);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,d){return this.leaves[this.toIdx(o,d)]}toIdx(o,d){return d*this.size+o}}function jL(c,o,d,f){let g=0,b=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(d[w]<c[w]||d[w]>o[w])return null}else{const E=1/f[w];let A=(c[w]-d[w])*E,L=(o[w]-d[w])*E;if(A>L){const N=A;A=L,L=N}if(A>g&&(g=A),L<b&&(b=L),g>b)return null}return g}function WL(c,o,d,f,g,b,w,E,A,L,N){const W=f-c,Q=g-o,re=b-d,oe=w-c,he=E-o,Ce=A-d,Oe=N[1]*Ce-N[2]*he,qe=N[2]*oe-N[0]*Ce,Be=N[0]*he-N[1]*oe,je=W*Oe+Q*qe+re*Be;if(Math.abs(je)<1e-15)return null;const nt=1/je,tt=L[0]-c,Ct=L[1]-o,St=L[2]-d,$t=(tt*Oe+Ct*qe+St*Be)*nt;if($t<0||$t>1)return null;const on=Ct*re-St*Q,Mt=St*W-tt*re,Wt=tt*Q-Ct*W,Ht=(N[0]*on+N[1]*Mt+N[2]*Wt)*nt;return Ht<0||$t+Ht>1?null:(oe*on+he*Mt+Ce*Wt)*nt}function HL(c,o,d){return(c-o)/(d-o)}function GL(c,o,d,f,g,b,w,E,A){const L=1<<d,N=b-f,W=w-g,Q=(c+1)/L*N+f,re=(o+0)/L*W+g,oe=(o+1)/L*W+g;E[0]=(c+0)/L*N+f,E[1]=re,A[0]=Q,A[1]=oe}class qL{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const d=(function(b){const w=Math.ceil(Math.log2(b.dim/8)),E=[];let A=Math.ceil(Math.pow(2,w));const L=1/A,N=(re,oe,he,Ce,Oe)=>{const qe=Ce?1:0,Be=(re+1)*he-qe,je=oe*he,nt=(oe+1)*he-qe;Oe[0]=re*he,Oe[1]=je,Oe[2]=Be,Oe[3]=nt};let W=new UL(A);const Q=[];for(let re=0;re<A*A;re++){N(re%A,Math.floor(re/A),L,!1,Q);const oe=pf(Q[0],Q[1],b),he=pf(Q[2],Q[1],b),Ce=pf(Q[2],Q[3],b),Oe=pf(Q[0],Q[3],b);W.minimums.push(Math.min(oe,he,Ce,Oe)),W.maximums.push(Math.max(oe,he,Ce,Oe)),W.leaves.push(1)}for(E.push(W),A/=2;A>=1;A/=2){const re=E[E.length-1];W=new UL(A);for(let oe=0;oe<A*A;oe++){N(oe%A,Math.floor(oe/A),2,!0,Q);const he=re.getElevation(Q[0],Q[1]),Ce=re.getElevation(Q[2],Q[1]),Oe=re.getElevation(Q[2],Q[3]),qe=re.getElevation(Q[0],Q[3]),Be=re.isLeaf(Q[0],Q[1]),je=re.isLeaf(Q[2],Q[1]),nt=re.isLeaf(Q[2],Q[3]),tt=re.isLeaf(Q[0],Q[3]),Ct=Math.min(he.min,Ce.min,Oe.min,qe.min),St=Math.max(he.max,Ce.max,Oe.max,qe.max),$t=Be&&je&&nt&&tt;W.maximums.push(St),W.minimums.push(Ct),W.leaves.push(St-Ct<=5&&$t?1:0)}E.push(W)}return E})(this.dem),f=d.length-1,g=d[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(d,0,0,f,0)}raycastRoot(o,d,f,g,b,w,E=1){return jL([o,d,-100],[f,g,this.maximums[0]*E],b,w)}raycast(o,d,f,g,b,w,E=1){if(!this.nodeCount)return null;const A=this.raycastRoot(o,d,f,g,b,w,E);if(A==null)return null;const L=[],N=[],W=[],Q=[],re=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;re.length>0;){const{idx:oe,t:he,nodex:Ce,nodey:Oe,depth:qe}=re.pop();if(this.leaves[oe]){GL(Ce,Oe,qe,o,d,f,g,W,Q);const je=1<<qe,nt=(Ce+0)/je,tt=(Ce+1)/je,Ct=(Oe+0)/je,St=(Oe+1)/je,$t=pf(nt,Ct,this.dem)*E,on=pf(tt,Ct,this.dem)*E,Mt=pf(tt,St,this.dem)*E,Wt=pf(nt,St,this.dem)*E,Ht=WL(W[0],W[1],$t,Q[0],W[1],on,Q[0],Q[1],Mt,b,w),en=WL(Q[0],Q[1],Mt,W[0],Q[1],Wt,W[0],W[1],$t,b,w),dn=Math.min(Ht!==null?Ht:Number.MAX_VALUE,en!==null?en:Number.MAX_VALUE);if(dn!==Number.MAX_VALUE)return dn;{const Ft=Y_([],b,w,he);if(KL($t,on,Wt,Mt,HL(Ft[0],W[0],Q[0]),HL(Ft[1],W[1],Q[1]))>=Ft[2])return he}continue}let Be=0;for(let je=0;je<this._siblingOffset.length;je++){GL((Ce<<1)+this._siblingOffset[je][0],(Oe<<1)+this._siblingOffset[je][1],qe+1,o,d,f,g,W,Q),W[2]=-100,Q[2]=this.maximums[this.childOffsets[oe]+je]*E;const nt=jL(W,Q,b,w);if(nt!=null){const tt=nt;L[je]=tt;let Ct=!1;for(let St=0;St<Be&&!Ct;St++)tt>=L[N[St]]&&(N.splice(St,0,je),Ct=!0);Ct||(N[Be]=je),Be++}}for(let je=0;je<Be;je++){const nt=N[je];re.push({idx:this.childOffsets[oe]+nt,t:L[nt],nodex:(Ce<<1)+this._siblingOffset[nt][0],nodey:(Oe<<1)+this._siblingOffset[nt][1],depth:qe+1})}}return null}_addNode(o,d,f){return this.minimums.push(o),this.maximums.push(d),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,d,f,g,b){if(o[g].isLeaf(d,f)===1)return;this.childOffsets[b]||(this.childOffsets[b]=this.nodeCount);const w=g-1,E=o[w];let A=0,L=0;for(let N=0;N<this._siblingOffset.length;N++){const W=2*d+this._siblingOffset[N][0],Q=2*f+this._siblingOffset[N][1],re=E.getElevation(W,Q),oe=E.isLeaf(W,Q),he=this._addNode(re.min,re.max,oe);oe&&(A|=1<<N),L||(L=he)}for(let N=0;N<this._siblingOffset.length;N++)A&1<<N||this._construct(o,2*d+this._siblingOffset[N][0],2*f+this._siblingOffset[N][1],w,L+N)}}function KL(c,o,d,f,g,b){return ti(ti(c,d,b),ti(o,f,b),g)}function pf(c,o,d){const f=d.dim,g=Pe(c*f-.5,0,f-1),b=Pe(o*f-.5,0,f-1),w=Math.floor(g),E=Math.floor(b),A=Math.min(w+1,f-1),L=Math.min(E+1,f-1);return KL(d.get(w,E),d.get(A,E),d.get(w,L),d.get(A,L),g-w,b-E)}const XL={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Pj(c,o,d){return(256*c*256+256*o+d)/10-1e4}function Mj(c,o,d){return 256*c+o+d/256-32768}class Vx{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,d,f,g=!1,b=!1){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return Fe(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const w=this.dim=d.height-2,E=new Uint32Array(d.data.buffer);if(this.pixels=new Uint8Array(d.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let A=0;A<w;A++)E[this._idx(-1,A)]=E[this._idx(0,A)],E[this._idx(w,A)]=E[this._idx(w-1,A)],E[this._idx(A,-1)]=E[this._idx(A,0)],E[this._idx(A,w)]=E[this._idx(A,w-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(w,-1)]=E[this._idx(w-1,0)],E[this._idx(-1,w)]=E[this._idx(0,w-1)],E[this._idx(w,w)]=E[this._idx(w-1,w-1)],b&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new qL(this)}get(o,d,f=!1){f&&(o=Pe(o,-1,this.dim),d=Pe(d,-1,this.dim));const g=4*this._idx(o,d);return(this.encoding==="terrarium"?Mj:Pj)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return XL[o]}get unpackVector(){return XL[this.encoding]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}static pack(o,d){const f=[0,0,0,0],g=Vx.getUnpackVector(d);let b=Math.floor((o+g[3])/g[2]);return f[2]=b%256,b=Math.floor(b/256),f[1]=b%256,b=Math.floor(b/256),f[0]=b,f}getPixels(){return new Sl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,d,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=d*this.dim,b=d*this.dim+this.dim,w=f*this.dim,E=f*this.dim+this.dim;switch(d){case-1:g=b-1;break;case 1:b=g+1}switch(f){case-1:w=E-1;break;case 1:E=w+1}const A=-d*this.dim,L=-f*this.dim;for(let N=w;N<E;N++)for(let W=g;W<b;W++){const Q=4*this._idx(W,N),re=4*this._idx(W+A,N+L);this.pixels[Q+0]=o.pixels[re+0],this.pixels[Q+1]=o.pixels[re+1],this.pixels[Q+2]=o.pixels[re+2],this.pixels[Q+3]=o.pixels[re+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Sn(Vx,"DEMData"),Sn(qL,"DemMinMaxQuadTree",{omit:["dem"]});class Dj{constructor(o,d){this.max=o,this.onRemove=d,this.reset()}reset(){for(const o in this.data)for(const d of this.data[o])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(o,d,f){const g=o.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const b={value:d,timeout:void 0};if(f!==void 0&&(b.timeout=setTimeout((()=>{this.remove(o,b)}),f)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const d=this.data[o].shift();return d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),d.value}getByKey(o){const d=this.data[o];return d?d[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,d){if(!this.has(o))return this;const f=o.wrapped().key,g=d===void 0?0:this.data[f].indexOf(d),b=this.data[f][g];return this.data[f].splice(g,1),b.timeout&&clearTimeout(b.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(b.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(o){const d=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||d.push(g);for(const f of d)this.remove(f.value.tileID,f)}}class ov{constructor(o,d,f){this.func=o,this.mask=d,this.range=f}}ov.ReadOnly=!1,ov.ReadWrite=!0,ov.disabled=new ov(519,ov.ReadOnly,[0,1]);const TE=7680;class SE{constructor(o,d,f,g,b,w){this.test=o,this.ref=d,this.mask=f,this.fail=g,this.depthFail=b,this.pass=w}}SE.disabled=new SE({func:519,mask:0},0,0,TE,TE,TE);class Nu{constructor(o,d,f){this.blendFunction=o,this.blendColor=d,this.mask=f}}Nu.Replace=[1,0],Nu.disabled=new Nu(Nu.Replace,Gi.transparent,[!1,!1,!1,!1]),Nu.unblended=new Nu(Nu.Replace,Gi.transparent,[!0,!0,!0,!0]),Nu.alphaBlended=new Nu([1,771],Gi.transparent,[!0,!0,!0,!0]);const EE=1029,CE=2305;class au{constructor(o,d,f){this.enable=o,this.mode=d,this.frontFace=f}}au.disabled=new au(!1,EE,CE),au.backCCW=new au(!0,EE,CE),au.backCW=new au(!0,EE,2304),au.frontCW=new au(!0,1028,2304),au.frontCCW=new au(!0,1028,CE);class Qm extends Nl{constructor(o,d,f){super(),this.id=o,this._onlySymbols=f,d.on("data",(g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),d.on("error",(()=>{this._sourceErrored=!0})),this._source=d,this._tiles={},this._cache=new Dj(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Aj,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const d=this._tiles[o];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,d){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,d)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,(()=>{}))}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,(()=>{}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return Ze(this._tiles).map((o=>o.tileID)).sort(YL).map((o=>o.key))}getRenderableIds(o){const d=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&d.push(this._tiles[f]);return o?d.sort(((f,g)=>{const b=f.tileID,w=g.tileID,E=new j(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),A=new j(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-w.overscaledZ||A.y-E.y||A.x-E.x})).map((f=>f.tileID.key)):d.map((f=>f.tileID)).sort(YL).map((f=>f.key))}hasRenderableParent(o){const d=this.findLoadedParent(o,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(o,d){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(d||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,d){const f=this._tiles[o];f&&(f.state!=="loading"&&(f.state=d),this._loadTile(f,this._tileLoaded.bind(this,f,o,d)))}_tileLoaded(o,d,f,g){if(g)if(o.state="errored",g.status!==404)this._source.fire(new Io(g,{tile:o}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const b=this.map.painter.terrain;this.update(this.transform,b.getScaledDemTileSize(),!0),b.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=ko.now(),f==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(d,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new qo("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const d=this.getRenderableIds();for(let g=0;g<d.length;g++){const b=d[g];if(o.neighboringTiles&&o.neighboringTiles[b]){const w=this.getTileByID(b);f(o,w),f(w,o)}}function f(g,b){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=b.tileID.canonical.x-g.tileID.canonical.x;const E=b.tileID.canonical.y-g.tileID.canonical.y,A=Math.pow(2,g.tileID.canonical.z),L=b.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),b.dem&&g.dem&&(g.dem.backfillBorder(b.dem,w,E),g.neighboringTiles&&g.neighboringTiles[L]&&(g.neighboringTiles[L].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,d,f,g){for(const b in this._tiles){let w=this._tiles[b];if(g[b]||!w.hasData()||w.tileID.overscaledZ<=d||w.tileID.overscaledZ>f)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>d+1;){const L=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[L.key],w&&w.hasData()&&(E=L)}let A=E;for(;A.overscaledZ>d;)if(A=A.scaledTo(A.overscaledZ-1),o[A.key]){g[E.key]=E;break}}}findLoadedParent(o,d){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=o.overscaledZ-1;f>=d;f--){const g=o.scaledTo(f),b=this._getLoadedTile(g);if(b)return b}}_getLoadedTile(o){const d=this._tiles[o.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,d){d=d||this._source.tileSize;const f=Math.ceil(o.width/d)+1,g=Math.ceil(o.height/d)+1,b=Math.floor(f*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,b):b,E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(o){const d=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,d){const f={};for(const g in this._tiles){const b=this._tiles[g];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),f[b.tileID.key]=b}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,d,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map((E=>new ka(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y))):(g=o.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter((E=>this._source.hasTile(E))))):g=[];const b=this._updateRetainedTiles(g);if(ZL(this._source.type)&&g.length!==0){const E={},A={},L=Object.keys(b);for(const W of L){const Q=b[W],re=this._tiles[W];if(!re||re.fadeEndTime&&re.fadeEndTime<=ko.now())continue;const oe=this.findLoadedParent(Q,Math.max(Q.overscaledZ-Qm.maxOverzooming,this._source.minzoom));oe&&(this._addTile(oe.tileID),E[oe.tileID.key]=oe.tileID),A[W]=Q}const N=g[g.length-1].overscaledZ;for(const W in this._tiles){const Q=this._tiles[W];if(b[W]||!Q.hasData())continue;let re=Q.tileID;for(;re.overscaledZ>N;){re=re.scaledTo(re.overscaledZ-1);const oe=this._tiles[re.key];if(oe&&oe.hasData()&&A[re.key]){b[W]=Q.tileID;break}}}for(const W in E)b[W]||(this._coveredTiles[W]=!0,b[W]=E[W])}for(const E in b)this._tiles[E].clearFadeHold();const w=(function(E,A){const L=[];for(const N in E)N in A||L.push(N);return L})(this._tiles,b);for(const E of w){const A=this._tiles[E];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const d={};if(o.length===0)return d;const f={},g=o.reduce(((L,N)=>Math.min(L,N.overscaledZ)),1/0),b=o[0].overscaledZ,w=Math.max(b-Qm.maxOverzooming,this._source.minzoom),E=Math.max(b+Qm.maxUnderzooming,this._source.minzoom),A={};for(const L of o){const N=this._addTile(L);d[L.key]=L,N.hasData()||g<this._source.maxzoom&&(A[L.key]=L)}this._retainLoadedChildren(A,g,E,d);for(const L of o){let N=this._tiles[L.key];if(N.hasData())continue;if(L.canonical.z>=this._source.maxzoom){const Q=L.children(this._source.maxzoom)[0],re=this.getTile(Q);if(re&&re.hasData()){d[Q.key]=Q;continue}}else{const Q=L.children(this._source.maxzoom);if(d[Q[0].key]&&d[Q[1].key]&&d[Q[2].key]&&d[Q[3].key])continue}let W=N.wasRequested();for(let Q=L.overscaledZ-1;Q>=w;--Q){const re=L.scaledTo(Q);if(f[re.key]||(f[re.key]=!0,N=this.getTile(re),!N&&W&&(N=this._addTile(re)),N&&(d[re.key]=re,W=N.wasRequested(),N.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const d=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}d.push(g.key);const b=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(b),f)break;g=b}for(const b of d)this._loadedParentTiles[b]=f}}_addTile(o){let d=this._tiles[o.key];if(d)return d;d=this._cache.getAndRemove(o),d&&(this._setTileReloadTimer(o.key,d),d.tileID=o,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,d)));const f=!!d;if(!f){const g=this.map?this.map.painter:null;d=new wE(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,o.key,d.state))}return d?(d.uses++,this._tiles[o.key]=d,f||this._source.fire(new qo("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(o,d){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=d.getExpiryTimeout();f&&(this._timers[o]=setTimeout((()=>{this._reloadTile(o,"expired"),delete this._timers[o]}),f))}_removeTile(o){const d=this._tiles[o];d&&(d.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,d,f){const g=[],b=this.transform;if(!b)return g;const w=b.projection.name==="globe",E=Vu(b.center.lng);for(const A in this._tiles){const L=this._tiles[A];if(f&&L.clearQueryDebugViz(),L.holdingForFade())continue;let N;if(w){const W=L.tileID.canonical;if(W.z===0){const Q=[Math.abs(Pe(E,...xy(W,-1))-E),Math.abs(Pe(E,...xy(W,1))-E)];N=[0,2*Q.indexOf(Math.min(...Q))-1]}else{const Q=[Math.abs(Pe(E,...xy(W,-1))-E),Math.abs(Pe(E,...xy(W,0))-E),Math.abs(Pe(E,...xy(W,1))-E)];N=[Q.indexOf(Math.min(...Q))-1]}}else N=[0];for(const W of N){const Q=o.containsTile(L,b,d,W);Q&&g.push(Q)}}return g}getVisibleCoordinates(o){const d=this.getRenderableIds(o).map((f=>this._tiles[f].tileID));for(const f of d)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(ZL(this._source.type))for(const o in this._tiles){const d=this._tiles[o];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=ko.now())return!0}return!1}setFeatureState(o,d,f){this._state.updateState(o=o||"_geojsonTileLayer",d,f)}removeFeatureState(o,d,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",d,f)}getFeatureState(o,d){return this._state.getState(o=o||"_geojsonTileLayer",d)}setDependencies(o,d,f){const g=this._tiles[o];g&&g.setDependencies(d,f)}reloadTilesForDependencies(o,d){for(const f in this._tiles)this._tiles[f].hasDependency(o,d)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(o,d)))}_preloadTiles(o,d){if(!this._sourceLoaded){const E=()=>{this._sourceLoaded&&(this._source.off("data",E),this._preloadTiles(o,d))};return void this._source.on("data",E)}const f=new Map,g=Array.isArray(o)?o:[o],b=this.map.painter.terrain,w=this.usedForTerrain&&b?b.getScaledDemTileSize():this._source.tileSize;for(const E of g){const A=E.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const L of A)f.set(L.key,L);this.usedForTerrain&&E.updateElevation(!1)}We(Array.from(f.values()),((E,A)=>{const L=new wE(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(L,(N=>{this._source.type==="raster-dem"&&L.dem&&this._backfillDEM(L),A(N,L)}))}),d)}}function YL(c,o){const d=Math.abs(2*c.wrap)-+(c.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return c.overscaledZ-o.overscaledZ||f-d||o.canonical.y-c.canonical.y||o.canonical.x-c.canonical.x}function ZL(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function xy(c,o){const d=1<<c.z;return[c.x/d+o,(c.x+1)/d+o]}Qm.maxOverzooming=10,Qm.maxUnderzooming=3;class Bx{constructor(o,d,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=d,this._offset=f}static create(o,d,f){const g=f||o.findDEMTileFor(d);if(!g||!g.dem)return;const b=g.dem,w=g.tileID,E=1<<d.canonical.z-w.canonical.z;return new Bx(g,g.tileSize/Nn/E,[(d.canonical.x/E-w.canonical.x)*b.dim,(d.canonical.y/E-w.canonical.y)*b.dim])}tileCoordToPixel(o,d){const f=d*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),b=Math.floor(f);return new j(g,b)}getElevationAt(o,d,f,g){const b=o*this._scale+this._offset[0],w=d*this._scale+this._offset[1],E=Math.floor(b),A=Math.floor(w),L=this._dem;return g=!!g,f?ti(ti(L.get(E,A,g),L.get(E,A+1,g),w-A),ti(L.get(E+1,A,g),L.get(E+1,A+1,g),w-A),b-E):L.get(E,A,g)}getElevationAtPixel(o,d,f){return this._dem.get(o,d,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*ru(1,o)*this._dem.stride}}class JL{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ia(Nn,16,0),this.featureIndexArray=new zd,this.promoteId=d}insert(o,d,f,g,b,w=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,b,w);const A=this.grid;for(let L=0;L<d.length;L++){const N=d[L],W=[1/0,1/0,-1/0,-1/0];for(let Q=0;Q<N.length;Q++){const re=N[Q];W[0]=Math.min(W[0],re.x),W[1]=Math.min(W[1],re.y),W[2]=Math.max(W[2],re.x),W[3]=Math.max(W[3],re.y)}W[0]<Nn&&W[1]<Nn&&W[2]>=0&&W[3]>=0&&A.insert(E,W[0],W[1],W[2],W[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new oE(new Tx(this.rawTileData)).layers,this.sourceLayerCoder=new BL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,d,f,g){this.loadVTLayers();const b=o.params||{},w=ef(b.filter),E=o.tileResult,A=o.transform,L=E.bufferedTilespaceBounds,N=this.grid.query(L.min.x,L.min.y,L.max.x,L.max.y,((oe,he,Ce,Oe)=>TD(E.bufferedTilespaceGeometry,oe,he,Ce,Oe)));N.sort(Lj);let W=null;A.elevation&&N.length>0&&(W=Bx.create(A.elevation,this.tileID));const Q={};let re;for(let oe=0;oe<N.length;oe++){const he=N[oe];if(he===re)continue;re=he;const Ce=this.featureIndexArray.get(he);let Oe=null;this.loadMatchingFeature(Q,Ce,w,b.layers,b.availableImages,d,f,g,((qe,Be,je,nt=0)=>(Oe||(Oe=Wd(qe,this.tileID.canonical,o.tileTransform)),Be.queryIntersectsFeature(E,qe,je,Oe,this.z,o.transform,o.pixelPosMatrix,W,nt))))}return Q}loadMatchingFeature(o,d,f,g,b,w,E,A,L){const{featureIndex:N,bucketIndex:W,sourceLayerIndex:Q,layoutVertexArrayOffset:re}=d,oe=this.bucketLayerIDs[W];if(g&&!(function(qe,Be){for(let je=0;je<qe.length;je++)if(Be.indexOf(qe[je])>=0)return!0;return!1})(g,oe))return;const he=this.sourceLayerCoder.decode(Q),Ce=this.vtLayers[he].feature(N);if(f.needGeometry){const qe=Xm(Ce,!0);if(!f.filter(new U(this.tileID.overscaledZ),qe,this.tileID.canonical))return}else if(!f.filter(new U(this.tileID.overscaledZ),Ce))return;const Oe=this.getId(Ce,he);for(let qe=0;qe<oe.length;qe++){const Be=oe[qe];if(g&&g.indexOf(Be)<0)continue;const je=w[Be];if(!je)continue;let nt={};Oe!==void 0&&A&&(nt=A.getState(je.sourceLayer||"_geojsonTileLayer",Oe));const tt=ct({},E[Be]);tt.paint=QL(tt.paint,je.paint,Ce,nt,b),tt.layout=QL(tt.layout,je.layout,Ce,nt,b);const Ct=!L||L(Ce,je,nt,re);if(!Ct)continue;const St=new FL(Ce,this.z,this.x,this.y,Oe);St.layer=tt;let $t=o[Be];$t===void 0&&($t=o[Be]=[]),$t.push({featureIndex:N,feature:St,intersectionZ:Ct})}}lookupSymbolFeatures(o,d,f,g,b,w,E,A){const L={};this.loadVTLayers();const N=ef(b);for(const W of o)this.loadMatchingFeature(L,{bucketIndex:f,sourceLayerIndex:g,featureIndex:W,layoutVertexArrayOffset:0},N,w,E,A,d);return L}loadFeature(o){const{featureIndex:d,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),b=this.vtFeatures[g];if(b[d])return b[d];const w=this.vtLayers[g].feature(d);return b[d]=w,w}hasLayer(o){for(const d of this.bucketLayerIDs)for(const f of d)if(o===f)return!0;return!1}getId(o,d){let f=o.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[d];g!=null&&(f=o.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function QL(c,o,d,f,g){return le(c,((b,w)=>{const E=o instanceof Ae?o.get(w):null;return E&&E.evaluate?E.evaluate(d,f,g):E}))}function Lj(c,o){return o-c}Sn(JL,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class e3{constructor(o,d){this.width=o,this.height=d,this.nextRow=0,this.image=new Hd({width:o,height:d}),this.positions={},this.uploaded=!1}getDash(o,d){const f=this.getKey(o,d);return this.positions[f]}trim(){const o=this.width,d=this.height=dt(this.nextRow);this.image.resize({width:o,height:d})}getKey(o,d){return o.join(",")+d}getDashRanges(o,d,f){const g=[];let b=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,E=!0;g.push({left:b,right:w,isDash:E,zeroLength:o[0]===0});let A=o[0];for(let L=1;L<o.length;L++){E=!E;const N=o[L];b=A*f,A+=N,w=A*f,g.push({left:b,right:w,isDash:E,zeroLength:N===0})}return g}addRoundDash(o,d,f){const g=d/2;for(let b=-f;b<=f;b++){const w=this.width*(this.nextRow+f+b);let E=0,A=o[E];for(let L=0;L<this.width;L++){L/A.right>1&&(A=o[++E]);const N=Math.abs(L-A.left),W=Math.abs(L-A.right),Q=Math.min(N,W);let re;const oe=b/f*(g+1);if(A.isDash){const he=g-Math.abs(oe);re=Math.sqrt(Q*Q+he*he)}else re=g-Math.sqrt(Q*Q+oe*oe);this.image.data[w+L]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(o,d){for(let A=o.length-1;A>=0;--A){const L=o[A],N=o[A+1];L.zeroLength?o.splice(A,1):N&&N.isDash===L.isDash&&(N.left=L.left,o.splice(A,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const b=this.width*this.nextRow;let w=0,E=o[w];for(let A=0;A<this.width;A++){A/E.right>1&&(E=o[++w]);const L=Math.abs(A-E.left),N=Math.abs(A-E.right),W=Math.min(L,N);this.image.data[b+A]=Math.max(0,Math.min(255,(E.isDash?W:-W)+d+128))}}addDash(o,d){const f=this.getKey(o,d);if(this.positions[f])return this.positions[f];const g=d==="round",b=g?7:0,w=2*b+1;if(this.nextRow+w>this.height)return Fe("LineAtlas out of space"),null;o.length===0&&o.push(1);let E=0;for(let N=0;N<o.length;N++)o[N]<0&&(Fe("Negative value is found in line dasharray, replacing values with 0"),o[N]=0),E+=o[N];if(E!==0){const N=this.width/E,W=this.getDashRanges(o,this.width,N);g?this.addRoundDash(W,N,b):this.addRegularDash(W,d==="square"?.5*N:0)}const A=this.nextRow+b;this.nextRow+=w;const L={tl:[A,b],br:[E,0]};return this.positions[f]=L,L}}Sn(e3,"LineAtlas");const t3=1*ou;class n3{constructor(o){const d={},f=[];for(const E in o){const A=o[E],L=d[E]={};for(const N in A.glyphs){const W=A.glyphs[+N];if(!W||W.bitmap.width===0||W.bitmap.height===0)continue;const Q=W.metrics.localGlyph?t3:1,re={x:0,y:0,w:W.bitmap.width+2*Q,h:W.bitmap.height+2*Q};f.push(re),L[N]=re}}const{w:g,h:b}=uE(f),w=new Hd({width:g||1,height:b||1});for(const E in o){const A=o[E];for(const L in A.glyphs){const N=A.glyphs[+L];if(!N||N.bitmap.width===0||N.bitmap.height===0)continue;const W=d[E][L],Q=N.metrics.localGlyph?t3:1;Hd.copy(N.bitmap,w,{x:0,y:0},{x:W.x+Q,y:W.y+Q},N.bitmap)}}this.image=w,this.positions=d}}Sn(n3,"GlyphAtlas");class Rj{constructor(o){this.tileID=new ka(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Jm(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,d,f,g,b){this.status="parsing",this.data=o,this.collisionBoxArray=new Xi;const w=new BL(Object.keys(o.layers).sort()),E=new JL(this.tileID,this.promoteId);E.bucketLayerIDs=[];const A={},L=new e3(256,256),N={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:L,availableImages:f},W=d.familiesBySource[this.source];for(const nt in W){const tt=o.layers[nt];if(!tt)continue;let Ct=!1,St=!1;for(const Mt of W[nt])Mt[0].type==="symbol"?Ct=!0:St=!0;if(this.isSymbolTile===!0&&!Ct||this.isSymbolTile===!1&&!St)continue;tt.version===1&&Fe(`Vector tile source "${this.source}" layer "${nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $t=w.encode(nt),on=[];for(let Mt=0;Mt<tt.length;Mt++){const Wt=tt.feature(Mt),Ht=E.getId(Wt,nt);on.push({feature:Wt,id:Ht,index:Mt,sourceLayerIndex:$t})}for(const Mt of W[nt]){const Wt=Mt[0];this.isSymbolTile!==void 0&&Wt.type==="symbol"!==this.isSymbolTile||Wt.minzoom&&this.zoom<Math.floor(Wt.minzoom)||Wt.maxzoom&&this.zoom>=Wt.maxzoom||Wt.visibility!=="none"&&(kE(Mt,this.zoom,f),(A[Wt.id]=Wt.createBucket({index:E.bucketLayerIDs.length,layers:Mt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$t,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(on,N,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(Mt.map((Ht=>Ht.id))))}}let Q,re,oe,he;L.trim();const Ce={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Oe=()=>{if(Q)return b(Q);if(re&&oe&&he){const nt=new n3(re),tt=new cL(oe,he);for(const Ct in A){const St=A[Ct];St instanceof hf?(kE(St.layers,this.zoom,f),oj(St,re,nt.positions,oe,tt.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):St.hasPattern&&(St instanceof bx||St instanceof px||St instanceof cy)&&(kE(St.layers,this.zoom,f),St.addFeatures(N,this.tileID.canonical,tt.patternPositions,f,this.tileTransform))}this.status="done",b(null,{buckets:Ze(A).filter((Ct=>!Ct.isEmpty())),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nt.image,lineAtlas:L,imageAtlas:tt,glyphMap:this.returnDependencies?re:null,iconMap:this.returnDependencies?oe:null,glyphPositions:this.returnDependencies?nt.positions:null})}},qe=le(N.glyphDependencies,(nt=>Object.keys(nt).map(Number)));Object.keys(qe).length?g.send("getGlyphs",{uid:this.uid,stacks:qe},((nt,tt)=>{Q||(Q=nt,re=tt,Oe())}),void 0,!1,Ce):re={};const Be=Object.keys(N.iconDependencies);Be.length?g.send("getImages",{icons:Be,source:this.source,tileID:this.tileID,type:"icons"},((nt,tt)=>{Q||(Q=nt,oe=tt,Oe())}),void 0,!1,Ce):oe={};const je=Object.keys(N.patternDependencies);je.length?g.send("getImages",{icons:je,source:this.source,tileID:this.tileID,type:"patterns"},((nt,tt)=>{Q||(Q=nt,he=tt,Oe())}),void 0,!1,Ce):he={},Oe()}}function kE(c,o,d){const f=new U(o);for(const g of c)g.recalculate(f,d)}class i3{constructor(o){this.entries={},this.scheduler=o}request(o,d,f,g){const b=this.entries[o]=this.entries[o]||{callbacks:[]};if(b.result){const[w,E]=b.result;return this.scheduler?this.scheduler.add((()=>{g(w,E)}),d):g(w,E),()=>{}}return b.callbacks.push(g),b.cancel||(b.cancel=f(((w,E)=>{b.result=[w,E];for(const A of b.callbacks)this.scheduler?this.scheduler.add((()=>{A(w,E)}),d):A(w,E);setTimeout((()=>delete this.entries[o]),3e3)}))),()=>{b.result||(b.callbacks=b.callbacks.filter((w=>w!==g)),b.callbacks.length||(b.cancel(),delete this.entries[o]))}}}function r3(c,o,d){const f=JSON.stringify(c.request);return c.data&&(this.deduped.entries[f]={result:[null,c.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},(g=>{const b=Eo(c.request,((w,E,A,L)=>{w?g(w):E&&g(null,{vectorTile:d?void 0:new oE(new Tx(E)),rawData:E,cacheControl:A,expires:L})}));return()=>{b.cancel(),g()}}),o)}const s3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class IE{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,f]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const b=s3[15&f];if(!b)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[E]=new Uint32Array(o,4,1);return new IE(E,w,b,o)}constructor(o,d=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const b=s3.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,E=o*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+A,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+E+A),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+E+A,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=d,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return AE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:w,nodeSize:E}=this,A=[0,b.length-1,0],L=[];for(;A.length;){const N=A.pop()||0,W=A.pop()||0,Q=A.pop()||0;if(W-Q<=E){for(let Ce=Q;Ce<=W;Ce++){const Oe=w[2*Ce],qe=w[2*Ce+1];Oe>=o&&Oe<=f&&qe>=d&&qe<=g&&L.push(b[Ce])}continue}const re=Q+W>>1,oe=w[2*re],he=w[2*re+1];oe>=o&&oe<=f&&he>=d&&he<=g&&L.push(b[re]),(N===0?o<=oe:d<=he)&&(A.push(Q),A.push(re-1),A.push(1-N)),(N===0?f>=oe:g>=he)&&(A.push(re+1),A.push(W),A.push(1-N))}return L}within(o,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:b,nodeSize:w}=this,E=[0,g.length-1,0],A=[],L=f*f;for(;E.length;){const N=E.pop()||0,W=E.pop()||0,Q=E.pop()||0;if(W-Q<=w){for(let Ce=Q;Ce<=W;Ce++)a3(b[2*Ce],b[2*Ce+1],o,d)<=L&&A.push(g[Ce]);continue}const re=Q+W>>1,oe=b[2*re],he=b[2*re+1];a3(oe,he,o,d)<=L&&A.push(g[re]),(N===0?o-f<=oe:d-f<=he)&&(E.push(Q),E.push(re-1),E.push(1-N)),(N===0?o+f>=oe:d+f>=he)&&(E.push(re+1),E.push(W),E.push(1-N))}return A}}function AE(c,o,d,f,g,b){if(g-f<=d)return;const w=f+g>>1;o3(c,o,w,f,g,b),AE(c,o,d,f,w-1,1-b),AE(c,o,d,w+1,g,1-b)}function o3(c,o,d,f,g,b){for(;g>f;){if(g-f>600){const L=g-f+1,N=d-f+1,W=Math.log(L),Q=.5*Math.exp(2*W/3),re=.5*Math.sqrt(W*Q*(L-Q)/L)*(N-L/2<0?-1:1);o3(c,o,d,Math.max(f,Math.floor(d-N*Q/L+re)),Math.min(g,Math.floor(d+(L-N)*Q/L+re)),b)}const w=o[2*d+b];let E=f,A=g;for(wy(c,o,f,d),o[2*g+b]>w&&wy(c,o,f,g);E<A;){for(wy(c,o,E,A),E++,A--;o[2*E+b]<w;)E++;for(;o[2*A+b]>w;)A--}o[2*f+b]===w?wy(c,o,f,A):(A++,wy(c,o,A,g)),A<=d&&(f=A+1),d<=A&&(g=A-1)}}function wy(c,o,d,f){PE(c,d,f),PE(o,2*d,2*f),PE(o,2*d+1,2*f+1)}function PE(c,o,d){const f=c[o];c[o]=c[d],c[d]=f}function a3(c,o,d,f){const g=c-d,b=o-f;return g*g+b*b}s.ARRAY_TYPE=Tl,s.AUTH_ERR_MSG=Qe,s.Aabb=Ca,s.Actor=class{constructor(c,o,d){this.target=c,this.parent=o,this.mapId=d,this.callbacks={},this.cancelCallbacks={},yt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=vt()?c:p,this.scheduler=new kj}send(c,o,d,f,g=!1,b){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=b,this.callbacks[w]=d);const E=Vt(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!d,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Du(o,E)},E),{cancel:()=>{d&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const o=c.data,d=o.id;if(d&&(!o.targetMapId||this.mapId===o.targetMapId))if(o.type==="<cancel>"){const f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f.cancel()}else if(o.mustQueue||vt()){const f=this.callbacks[d];this.cancelCallbacks[d]=this.scheduler.add((()=>this.processTask(d,o)),f&&f.metadata||{type:"message"})}else this.processTask(d,o)}processTask(c,o){if(o.type==="<response>"){const d=this.callbacks[c];delete this.callbacks[c],d&&(o.error?d(Jc(o.error)):d(null,Jc(o.data)))}else{const d=Vt(this.globalScope)?void 0:[],f=o.hasCallback?(b,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:b?Du(b):null,data:Du(w,d)},d)}:b=>{},g=Jc(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const b=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,b[0],g.source)[b[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=yx,s.Color=Gi,s.ColorMode=Nu,s.CullFaceMode=au,s.DEMData=Vx,s.DataConstantProperty=ce,s.DedupedRequest=i3,s.DepthMode=ov,s.EXTENT=Nn,s.Elevation=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const d=o.getSource().maxzoom,f=1<<d,g=Math.floor(c.x),b=Math.floor((c.x-g)*f),w=Math.floor(c.y*f),E=this.findDEMTileFor(new ka(d,g,d,b,w));return!(!E||!E.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,d=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const f=this._source();if(!f||c.y<0||c.y>1)return o;const g=f.getSource().maxzoom,b=1<<g,w=Math.floor(c.x),E=c.x-w,A=new ka(g,w,g,Math.floor(E*b),Math.floor(c.y*b)),L=this.findDEMTileFor(A);if(!L||!L.dem)return o;const N=L.dem,W=1<<L.tileID.canonical.z,Q=(E*W-L.tileID.canonical.x)*N.dim,re=(c.y*W-L.tileID.canonical.y)*N.dim,oe=Math.floor(Q),he=Math.floor(re);return(d?this.exaggeration():1)*ti(ti(N.get(oe,he),N.get(oe,he+1),re-he),ti(N.get(oe+1,he),N.get(oe+1,he+1),re-he),Q-oe)}getAtTileOffset(c,o,d){const f=1<<c.canonical.z;return this.getAtPointOrZero(new Gg(c.wrap+(c.canonical.x+o/Nn)/f,(c.canonical.y+d/Nn)/f))}getAtTileOffsetFunc(c,o,d,f){return g=>{const b=this.getAtTileOffset(c,g.x,g.y),w=f.upVector(c.canonical,g.x,g.y);return Xl(w,w,b*f.upVectorScale(c.canonical,o,d).metersToTile),w}}getForTilePoints(c,o,d,f){if(this.isUsingMockSource())return!1;const g=Bx.create(this,c,f);return!!g&&(o.forEach((b=>{b[2]=this.exaggeration()*g.getElevationAt(b[0],b[1],d)})),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const d=o.dem.tree,f=o.tileID,g=1<<c.canonical.z-f.canonical.z;let b=c.canonical.x/g-f.canonical.x,w=c.canonical.y/g-f.canonical.y,E=0;for(let A=0;A<c.canonical.z-f.canonical.z&&!d.leaves[E];A++){b*=2,w*=2;const L=2*Math.floor(w)+Math.floor(b);E=d.childOffsets[E]+L,b%=1,w%=1}return{min:this.exaggeration()*d.minimums[E],max:this.exaggeration()*d.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,d){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Io,s.EvaluationParameters=U,s.Event=qo,s.Evented=Nl,s.FillExtrusionBucket=cy,s.Frustum=BS,s.FrustumCorners=VS,s.GLOBE_RADIUS=Ru,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=oD,s.GLOBE_ZOOM_THRESHOLD_MIN=FS,s.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,o){const d=new Xt,f=new Mn,g=[],b=c+1+2,w=o[0]+1,E=o[0]+1+(1+o.length),A=(L,N,W)=>{let Q=L===b-1?L-2:L===0?L:L-1;return Q+=W?24575:0,[Q,N]};for(let L=0;L<b;++L)d.emplaceBack(...A(L,0,!0));for(let L=0;L<w;++L)for(let N=0;N<b;++N)d.emplaceBack(...A(N,L,(N===0||N===b-1)&&!0));for(let L=0;L<o.length;++L){const N=o[L];for(let W=0;W<b;++W)d.emplaceBack(...A(W,N,!0))}for(let L=0;L<o.length;++L){const N=f.length,W=o[L]+1+2,Q=new Mn;for(let he=0;he<W-1;he++){const Ce=he===W-2,Oe=Ce?b*(E-o.length+L-he):b;for(let qe=0;qe<b-1;qe++){const Be=he*b+qe;he===0||Ce||qe===0||qe===b-2?(Q.emplaceBack(Be+1,Be,Be+Oe),Q.emplaceBack(Be+Oe,Be+Oe+1,Be+1)):(f.emplaceBack(Be+1,Be,Be+Oe),f.emplaceBack(Be+Oe,Be+Oe+1,Be+1))}}const re=ms.simpleSegment(0,N,d.length,f.length-N);for(let he=0;he<Q.uint16.length;he+=3)f.emplaceBack(Q.uint16[he],Q.uint16[he+1],Q.uint16[he+2]);const oe=ms.simpleSegment(0,N,d.length,f.length-N);g.push({withoutSkirts:re,withSkirts:oe})}return{vertices:d,indices:f,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(qm,Q_);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,J_.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new Mn;for(let g=0;g<=qm;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const d=new Ki,f=new Ki;this._poleSegments=[];for(let g=0,b=0;g<FS;g++){const w=360/(1<<g);d.emplaceBack(0,-Ru,0,.5,0),f.emplaceBack(0,-Ru,0,.5,1);for(let E=0;E<=qm;E++){const A=E/qm,L=ti(0,w,A),[N,W,Q]=jg(k$,I$,L,Ru);d.emplaceBack(N,W,Q,A,0),f.emplaceBack(N,W,Q,A,1)}this._poleSegments.push(ms.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(d,rD,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(f,rD,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,o){if(!this._wireframeSegments){const d=new Ms,f=qm,g=f+1+2,b=1;this._wireframeSegments=[];for(let w=0,E=0;w<Q_.length;w++){const A=Q_[w];for(let N=b;N<A+b;N++)for(let W=b;W<f+b;W++){const Q=N*g+W;d.emplaceBack(Q,Q+1),d.emplaceBack(Q,Q+g),d.emplaceBack(Q,Q+g+1)}const L=A*f*3;this._wireframeSegments.push(ms.simpleSegment(0,E,(A+1)*g,L)),E+=L}this._wireframeIndexBuffer=c.createIndexBuffer(d)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},s.GlyphManager=tv,s.ImagePosition=dE,s.KDBush=IE,s.LivePerformanceUtils=Cs,s.LngLat=cr,s.LngLatBounds=lf,s.LocalGlyphMode=mE,s.MAX_MERCATOR_LATITUDE=Vo,s.MercatorCoordinate=Gg,s.ONE_EM=mo,s.OverscaledTileID=ka,s.PerformanceMarkers=Gr,s.Point=j,s.Properties=Re,s.RGBAImage=Sl,s.Ray=OS,s.RequestManager=class{constructor(c,o,d){this._transformRequestFn=c,this._customAccessToken=o,this._silenceAuthErrors=!!d,this._createSkuToken()}_createSkuToken(){const c=(function(){let o="";for(let d=0;d<10;d++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",H,o].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,o){return this._transformRequestFn&&this._transformRequestFn(c,o)||{url:c}}normalizeStyleURL(c,o){if(!at(c))return c;const d=fn(c);return d.path=`/styles/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeGlyphsURL(c,o){if(!at(c))return c;const d=fn(c);return d.path=`/fonts/v1${d.path}`,this._makeAPIURL(d,this._customAccessToken||o)}normalizeSourceURL(c,o,d,f){if(!at(c))return c;const g=fn(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),d&&g.params.push(`language=${d}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(c,o,d,f){const g=fn(c);return at(c)?(g.path=`/styles/v1${g.path}/sprite${o}${d}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${d}`,sn(g))}normalizeTileURL(c,o,d){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!at(c))return c;const f=fn(c);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||d&&f.authority!=="raster"&&d===512?"@2x":""}${C.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${T.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${T.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||(function(b){for(const w of b){const E=w.match(/^access_token=(.*)$/);if(E)return E[1]}return null})(f.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(c,o){const d=fn(c);if(!d.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!d.path.match(/\.[\w]+$/))return c;let f="mapbox://";d.path.match(/^\/raster\/v1\//)?f+=`raster/${d.path.replace(`/${T.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${d.path.replace(`/${T.TILE_URL_VERSION}/`,"")}`;let g=d.params;return o&&(g=g.filter((b=>!b.match(/^access_token=/)))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(c,o){const d=!!o&&at(o),f=[];for(const g of c.tiles||[])wt(g)?f.push(this.canonicalizeTileURL(g,d)):f.push(g);return f}_makeAPIURL(c,o){const d="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=fn(T.API_URL);if(c.protocol=f.protocol,c.authority=f.authority,c.protocol==="http"){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if(f.path!=="/"&&(c.path=`${f.path}${c.path}`),!T.REQUIRE_ACCESS_TOKEN)return sn(c);if(o=o||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${d}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${d}`)}return c.params=c.params.filter((g=>g.indexOf("access_token")===-1)),c.params.push(`access_token=${o||""}`),sn(c)}},s.ResourceType=fs,s.SegmentVector=ms,s.SourceCache=Qm,s.StencilMode=SE,s.StructArrayLayout1ui2=Sa,s.StructArrayLayout2f1f2i16=Vn,s.StructArrayLayout2i4=Xt,s.StructArrayLayout2ui4=Ms,s.StructArrayLayout3f12=vi,s.StructArrayLayout3ui6=Mn,s.StructArrayLayout4i8=Bt,s.StructArrayLayout5f20=Ki,s.Texture=by,s.Tile=wE,s.Transitionable=ae,s.Uniform1f=nx,s.Uniform1i=class extends $d{constructor(c){super(c),this.current=0}set(c,o,d){this.fetchUniformLocation(c,o)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},s.Uniform2f=class extends $d{constructor(c){super(c),this.current=[0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}},s.Uniform3f=class extends $d{constructor(c){super(c),this.current=[0,0,0]}set(c,o,d){this.fetchUniformLocation(c,o)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}},s.Uniform4f=$M,s.UniformColor=UM,s.UniformMatrix2f=class extends $d{constructor(c){super(c),this.current=d$}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<4;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}},s.UniformMatrix3f=class extends $d{constructor(c){super(c),this.current=u$}set(c,o,d){if(this.fetchUniformLocation(c,o)){for(let f=0;f<9;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix3fv(this.location,!1,d);break}}}},s.UniformMatrix4f=class extends $d{constructor(c){super(c),this.current=c$}set(c,o,d){if(this.fetchUniformLocation(c,o)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let f=1;f<16;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}},s.UnwrappedTileID=KD,s.ValidationError=_n,s.VectorTileFeature=vx,s.VectorTileWorkerSource=class extends Nl{constructor(c,o,d,f,g){super(),this.actor=c,this.layerIndex=o,this.availableImages=d,this.loadVectorData=g||r3,this.loading={},this.loaded={},this.deduped=new i3(c.scheduler),this.isSpriteLoaded=f,this.scheduler=c.scheduler}loadTile(c,o){const d=c.uid,f=c&&c.request,g=f&&f.collectResourceTiming,b=this.loading[d]=new Rj(c);b.abort=this.loadVectorData(c,((w,E)=>{const A=!this.loading[d];if(delete this.loading[d],A||w||!E)return b.status="done",A||(this.loaded[d]=b),o(w);const L=E.rawData,N={};E.expires&&(N.expires=E.expires),E.cacheControl&&(N.cacheControl=E.cacheControl),b.vectorTile=E.vectorTile||new oE(new Tx(L));const W=()=>{b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,((Q,re)=>{if(Q||!re)return o(Q);const oe={};if(g){const he=ma(f);he.length>0&&(oe.resourceTiming=JSON.parse(JSON.stringify(he)))}o(null,ct({rawTileData:L.slice(0)},re,N,oe))}))};this.isSpriteLoaded?W():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(W,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):W()})),this.loaded=this.loaded||{},this.loaded[d]=b}))}reloadTile(c,o){const d=this.loaded,f=c.uid,g=this;if(d&&d[f]){const b=d[f];b.showCollisionBoxes=c.showCollisionBoxes,b.enableTerrain=!!c.enableTerrain,b.projection=c.projection,b.tileTransform=Jm(c.tileID.canonical,c.projection);const w=(E,A)=>{const L=b.reloadCallback;L&&(delete b.reloadCallback,b.parse(b.vectorTile,g.layerIndex,this.availableImages,g.actor,L)),o(E,A)};b.status==="parsing"?b.reloadCallback=w:b.status==="done"&&(b.vectorTile?b.parse(b.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,o){const d=c.uid,f=this.loading[d];f&&(f.abort&&f.abort(),delete this.loading[d]),o()}removeTile(c,o){const d=this.loaded,f=c.uid;d&&d[f]&&delete d[f],o()}},s.WritingMode=Zl,s.ZoomDependentExpression=xc,s.add=jd,s.addDynamicAttributes=Lx,s.adjoint=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=o[4],E=o[5],A=o[6],L=o[7],N=o[8];return c[0]=w*N-E*L,c[1]=g*L-f*N,c[2]=f*E-g*w,c[3]=E*A-b*N,c[4]=d*N-g*A,c[5]=g*b-d*E,c[6]=b*L-w*A,c[7]=f*A-d*L,c[8]=d*w-f*b,c},s.asyncAll=We,s.bezier=Ke,s.bindAll=yt,s.boundsAttributes=NL,s.bufferConvexPolygon=function(c,o){const d=[];for(let f=0;f<c.length;f++){const g=Ee(f-1,-1,c.length-1),b=Ee(f+1,-1,c.length-1),w=c[f],E=c[b],A=c[g].sub(w).unit(),L=E.sub(w).unit(),N=L.angleWithSep(A.x,A.y),W=A.add(L).unit().mult(-1*o/Math.sin(N/2));d.push(w.add(W))}return d},s.cacheEntryPossiblyAdded=function(c){hi++,hi>qn&&(c.getActor().send("enforceCacheSizeLimit",On),hi=0)},s.calculateGlobeLabelMatrix=function(c,o){const{x:d,y:f}=c.point,g=dD(d,f,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Wm(g,g,$S(Ou(o)))},s.calculateGlobeMatrix=function(c){const{x:o,y:d}=c.point,{lng:f,lat:g}=c._center;return dD(o,d,c.worldSize,f,g)},s.calculateGlobeMercatorMatrix=function(c){const o=c.pixelsPerMeter,d=o/ru(1,c.center.lat),f=nu(new Float64Array(16));return G_(f,f,[c.point.x,c.point.y,0]),Hm(f,f,[d,d,o]),Float32Array.from(f)},s.circumferenceAtLatitude=jS,s.clamp=Pe,s.clearTileCache=function(c){if(!An())return;const o=p.caches.delete(In);c&&o.catch(c).then((()=>c()))},s.clipLine=wL,s.clone=function(c){var o=new Tl(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},s.clone$1=_e,s.collisionCircleLayout=DU,s.config=T,s.conjugate=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},s.create=function(){var c=new Tl(16);return Tl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s.create$1=HM,s.createExpression=Mu,s.createLayout=lt,s.createStyleLayer=function(c){return c.type==="custom"?new Tj(c):new Ej[c.type](c)},s.cross=RS,s.degToRad=ee,s.distance=function(c,o){return Math.hypot(o[0]-c[0],o[1]-c[1],o[2]-c[2])},s.div=function(c,o,d){return c[0]=o[0]/d[0],c[1]=o[1]/d[1],c[2]=o[2]/d[2],c},s.dot=Ec,s.earthRadius=ny,s.ease=Xe,s.easeCubicInOut=Ve,s.ecefToLatLng=function([c,o,d]){const f=Math.hypot(c,o,d),g=Math.atan2(c,d),b=.5*Math.PI-Math.acos(-o/f);return new cr(be(g),be(b))},s.emitValidationErrors=sf,s.endsWith=Ne,s.enforceCacheSizeLimit=function(c){Ln(),zt&&zt.then((o=>{o.keys().then((d=>{for(let f=0;f<d.length-c;f++)o.delete(d[f])}))}))},s.evaluateSizeForFeature=xx,s.evaluateSizeForZoom=Zg,s.evaluateVariableOffset=kL,s.evented=S,s.exactEquals=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},s.exactEquals$1=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]},s.exported=ko,s.exported$1=C,s.extend=ct,s.extend$1=pa,s.fillExtrusionHeightLift=HD,s.filterObject=we,s.fromMat4=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},s.fromQuat=function(c,o){var d=o[0],f=o[1],g=o[2],b=o[3],w=d+d,E=f+f,A=g+g,L=d*w,N=f*w,W=f*E,Q=g*w,re=g*E,oe=g*A,he=b*w,Ce=b*E,Oe=b*A;return c[0]=1-W-oe,c[1]=N+Oe,c[2]=Q-Ce,c[3]=0,c[4]=N-Oe,c[5]=1-L-oe,c[6]=re+he,c[7]=0,c[8]=Q+Ce,c[9]=re-he,c[10]=1-L-W,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.fromRotation=function(c,o){var d=Math.sin(o),f=Math.cos(o);return c[0]=f,c[1]=d,c[2]=0,c[3]=-d,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},s.fromScaling=qM,s.furthestTileCorner=function(c){const o=Math.round((c+45+360)%360/90)%4;return Ie[o]},s.getAABBPointSquareDist=function(c,o,d){let f=0;for(let g=0;g<2;++g){const b=d?d[g]:0;c[g]>b&&(f+=(c[g]-b)*(c[g]-b)),o[g]<b&&(f+=(b-o[g])*(b-o[g]))}return f},s.getAnchorAlignment=fE,s.getAnchorJustification=gE,s.getBounds=function(c){let o=1/0,d=1/0,f=-1/0,g=-1/0;for(const b of c)o=Math.min(o,b.x),d=Math.min(d,b.y),f=Math.max(f,b.x),g=Math.max(g,b.y);return{min:new j(o,d),max:new j(f,g)}},s.getColumn=gn,s.getDefaultExportFromCjs=q,s.getGridMatrix=function(c,o,d,f){const g=o.getNorth(),b=o.getSouth(),w=o.getWest(),E=o.getEast(),A=1<<c.z,L=E-w,N=g-b,W=L/qm,Q=-N/Q_[d],re=[0,W,0,Q,0,0,g,w,0];if(c.z>0){const oe=180/f;GM(re,re,[oe/L+1,0,0,0,oe/N+1,0,-.5*oe/W,.5*oe/Q,1])}return re[2]=A,re[5]=c.x,re[8]=c.y,re},s.getImage=ze,s.getJSON=function(c,o){return Wo(ct(c,{type:"json"}),o)},s.getLatitudinalLod=function(c){const o=Vo-5;c=Pe(c,-o,o)/o*90;const d=Math.pow(Math.abs(Math.sin(ee(c))),3);return Math.round(d*(Q_.length-1))},s.getMapSessionAPI=ss,s.getPerformanceMeasurement=ma,s.getProjection=OL,s.getRTLTextPluginStatus=k,s.getReferrer=Tr,s.getTilePoint=function(c,{x:o,y:d},f=0){return new j(((o-f)*c.scale-c.x)*Nn,(d*c.scale-c.y)*Nn)},s.getTileVec3=function(c,o,d=0){return Ug(((o.x-d)*c.scale-c.x)*Nn,(o.y*c.scale-c.y)*Nn,pD(o.z,o.y))},s.getVideo=function(c,o){const d=p.document.createElement("video");d.muted=!0,d.onloadstart=function(){o(null,d)};for(let f=0;f<c.length;f++){const g=p.document.createElement("source");Uc(c[f])||(d.crossOrigin="Anonymous"),g.src=c[f],d.appendChild(g)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(c){const o=[0,0,0],d=nu(new Float64Array(16));return Wm(d,c.pixelMatrix,c.globeMatrix),ls(o,o,d),new j(o[0],o[1])},s.globeDenormalizeECEF=$S,s.globeECEFOrigin=function(c,o){const d=[0,0,0];return ls(d,d,ty(Ou(o.canonical))),ls(d,d,c),d},s.globeMetersToEcef=sx,s.globeNormalizeECEF=ty,s.globePixelsToTileUnits=function(c,o){return Nn/(512*Math.pow(2,c))*ax(Ou(o))},s.globePoleMatrixForTile=function(c,o,d){const f=nu(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return rx(f,d.globeMatrix,g),Float32Array.from(f)},s.globeTileBounds=Ou,s.globeTiltAtLngLat=hD,s.globeToMercatorTransition=Hg,s.globeUseCustomAntiAliasing=function(c,o,d){const f=Hg(d.zoom),g=c.style.map._antialias,b=!!o.extStandardDerivatives,w=o.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return f===0&&!g&&!w&&b},s.identity=nu,s.identity$1=tD,s.invert=PS,s.isFullscreen=function(){return!!p.document.fullscreenElement||!!p.document.webkitFullscreenElement},s.isLngLatBehindGlobe=US,s.isMapAuthenticated=function(c){return Vr.has(c)},s.isMapboxURL=at,s.isSafariWithAntialiasingBug=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!Vt(c)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Oo,s.latLngToECEF=Wg,s.len=b$,s.length=q_,s.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},s.lngFromMercatorX=Yl,s.loadVectorTile=r3,s.makeRequest=Wo,s.mapValue=function(c,o,d,f,g){return Pe((c-o)/(d-o)*(g-f)+f,f,g)},s.mercatorScale=gD,s.mercatorXfromLng=Vu,s.mercatorYfromLat=Bu,s.mercatorZfromAltitude=ru,s.mul=_$,s.mul$1=y$,s.multiply=Wm,s.multiply$1=GM,s.multiply$2=YM,s.nextPowerOfTwo=dt,s.normalize=Ea,s.normalize$1=x$,s.normalize$2=QM,s.number=ti,s.ortho=function(c,o,d,f,g,b,w){var E=1/(o-d),A=1/(f-g),L=1/(b-w);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*A,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*L,c[11]=0,c[12]=(o+d)*E,c[13]=(g+f)*A,c[14]=(w+b)*L,c[15]=1,c},s.pbf=tL,s.perspective=function(c,o,d,f,g){var b,w=1/Math.tan(o/2);return c[0]=w/d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+f)*(b=1/(f-g)),c[14]=2*g*f*b):(c[10]=-1,c[14]=-2*f),c},s.pick=function(c,o){const d={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(d[g]=c[g])}return d},s.plugin=O,s.pointGeometry=$,s.polesInViewport=function(c){const o=nu(new Float64Array(16));Wm(o,c.pixelMatrix,c.globeMatrix);const d=[0,Cc,0],f=[0,kc,0];return ls(d,d,o),ls(f,f,o),[d[0]>0&&d[0]<=c.width&&d[1]>0&&d[1]<=c.height&&!US(c,new cr(c.center.lat,90)),f[0]>0&&f[0]<=c.width&&f[1]>0&&f[1]<=c.height&&!US(c,new cr(c.center.lat,-90))]},s.polygonContainsPoint=Ym,s.polygonIntersectsBox=TD,s.polygonIntersectsPolygon=yD,s.polygonizeBounds=function(c,o,d=0,f=!0){const g=new j(d,d),b=c.sub(g),w=o.add(g),E=[b,new j(w.x,b.y),w,new j(b.x,w.y)];return f&&E.push(b.clone()),E},s.posAttributes=J_,s.postMapLoadEvent=gr,s.postPerformanceEvent=Sr,s.postTurnstileEvent=Zn,s.potpack=uE,s.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},s.radToDeg=be,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(c){return c({pluginStatus:_,pluginURL:u}),S.on("pluginStateChange",c),c},s.removeAuthState=function(c){Vr.delete(c)},s.renderColorRamp=ZS,s.resample=vD,s.rotateX=MS,s.rotateX$1=nD,s.rotateY=rx,s.rotateY$1=iD,s.rotateZ=function(c,o,d){var f=Math.sin(d),g=Math.cos(d),b=o[0],w=o[1],E=o[2],A=o[3],L=o[4],N=o[5],W=o[6],Q=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=b*g+L*f,c[1]=w*g+N*f,c[2]=E*g+W*f,c[3]=A*g+Q*f,c[4]=L*g-b*f,c[5]=N*g-w*f,c[6]=W*g-E*f,c[7]=Q*g-A*f,c},s.rotateZ$1=function(c,o,d){d*=.5;var f=o[0],g=o[1],b=o[2],w=o[3],E=Math.sin(d),A=Math.cos(d);return c[0]=f*A+g*E,c[1]=g*A-f*E,c[2]=b*A+w*E,c[3]=w*A-b*E,c},s.scale=Hm,s.scale$1=JM,s.scale$2=Xl,s.scaleAndAdd=Y_,s.set=function(c,o,d,f){return c[0]=o,c[1]=d,c[2]=f,c},s.setCacheLimits=function(c,o){On=c,qn=o},s.setColumn=function(c,o,d){c[4*o+0]=d[0],c[4*o+1]=d[1],c[4*o+2]=d[2],c[4*o+3]=d[3]},s.setRTLTextPlugin=function(c,o,d=!1){if(_===ve||_===z||_===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");u=ko.resolveURL(c),_=ve,Me=o,y(),d||R()},s.smoothstep=$e,s.spec=Ot,s.squaredLength=function(c){var o=c[0],d=c[1],f=c[2];return o*o+d*d+f*f},s.storeAuthState=function(c,o){o?Vr.add(c):Vr.delete(c)},s.sub=iu,s.subtract=LS,s.symbolSize=LU,s.tileAABB=function(c,o,d,f,g,b,w,E,A){if(A.name==="globe")return C$(c,o,new yx(d,f,g));const L=Jm({z:d,x:f,y:g},A);return new Ca([(b+L.x/L.scale)*o,o*(L.y/L.scale),w],[(b+L.x2/L.scale)*o,o*(L.y2/L.scale),E])},s.tileCornersToBounds=ox,s.tileTransform=Jm,s.transformMat3=function(c,o,d){var f=o[0],g=o[1],b=o[2];return c[0]=f*d[0]+g*d[3]+b*d[6],c[1]=f*d[1]+g*d[4]+b*d[7],c[2]=f*d[2]+g*d[5]+b*d[8],c},s.transformMat4=ls,s.transformMat4$1=Gm,s.transformQuat=ZM,s.transitionTileAABBinECEF=lD,s.translate=G_,s.transpose=function(c,o){if(c===o){var d=o[1],f=o[2],g=o[5];c[1]=o[3],c[2]=o[6],c[3]=d,c[5]=o[7],c[6]=f,c[7]=g}else c[0]=o[0],c[1]=o[3],c[2]=o[6],c[3]=o[1],c[4]=o[4],c[5]=o[7],c[6]=o[2],c[7]=o[5],c[8]=o[8];return c},s.triggerPluginCompletionEvent=m,s.uniqueId=Nt,s.updateGlobeVertexNormal=function(c,o,d,f,g){const b=5*o+2;c.float32[b+0]=d,c.float32[b+1]=f,c.float32[b+2]=g},s.validateCustomStyleLayer=function(c){const o=[],d=c.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},s.validateFilter=c=>ta(Od(c)),s.validateFog=c=>ta(Og(c)),s.validateLayer=c=>ta(Mg(c)),s.validateLight=c=>ta(Rg(c)),s.validateSource=c=>ta(Lg(c)),s.validateStyle=Sc,s.validateTerrain=c=>ta(rf(c)),s.values=Ze,s.vectorTile=gx,s.version=v,s.warnOnce=Fe,s.window=p,s.wrap=Ee})),l(["./shared"],(function(s){function p(Ue){if(typeof Ue=="number"||typeof Ue=="boolean"||typeof Ue=="string"||Ue==null)return JSON.stringify(Ue);if(Array.isArray(Ue)){let ye="[";for(const ze of Ue)ye+=`${p(ze)},`;return`${ye}]`}let ge="{";for(const ye of Object.keys(Ue).sort())ge+=`${ye}:${p(Ue[ye])},`;return`${ge}}`}function v(Ue){let ge="";for(const ye of s.refProperties)ge+=`/${p(Ue[ye])}`;return ge}class x{constructor(ge){this.keyCache={},ge&&this.replace(ge)}replace(ge){this._layerConfigs={},this._layers={},this.update(ge,[])}update(ge,ye){for(const Qe of ge)this._layerConfigs[Qe.id]=Qe,(this._layers[Qe.id]=s.createStyleLayer(Qe)).compileFilter(),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id];for(const Qe of ye)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const ze=(function(Qe,at){const wt={};for(let st=0;st<Qe.length;st++){const Pt=at&&at[Qe[st].id]||v(Qe[st]);at&&(at[Qe[st].id]=Pt);let rn=wt[Pt];rn||(rn=wt[Pt]=[]),rn.push(Qe[st])}const bt=[];for(const st in wt)bt.push(wt[st]);return bt})(s.values(this._layerConfigs),this.keyCache);for(const Qe of ze){const at=Qe.map((fn=>this._layers[fn.id])),wt=at[0];if(wt.visibility==="none")continue;const bt=wt.source||"";let st=this.familiesBySource[bt];st||(st=this.familiesBySource[bt]={});const Pt=wt.sourceLayer||"_geojsonTileLayer";let rn=st[Pt];rn||(rn=st[Pt]=[]),rn.push(at)}}}class T{loadTile(ge,ye){const{uid:ze,encoding:Qe,rawImageData:at,padding:wt,buildQuadTree:bt}=ge,st=s.window.ImageBitmap&&at instanceof s.window.ImageBitmap?this.getImageData(at,wt):at;ye(null,new s.DEMData(ze,st,Qe,wt<1,bt))}getImageData(ge,ye){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ge.width,ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ge.width,this.offscreenCanvas.height=ge.height,this.offscreenCanvasContext.drawImage(ge,0,0,ge.width,ge.height);const ze=this.offscreenCanvasContext.getImageData(-ye,-ye,ge.width+2*ye,ge.height+2*ye);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ze}}function C(Ue,ge){if(Ue.length!==0){I(Ue[0],ge);for(var ye=1;ye<Ue.length;ye++)I(Ue[ye],!ge)}}function I(Ue,ge){for(var ye=0,ze=0,Qe=0,at=Ue.length,wt=at-1;Qe<at;wt=Qe++){var bt=(Ue[Qe][0]-Ue[wt][0])*(Ue[wt][1]+Ue[Qe][1]),st=ye+bt;ze+=Math.abs(ye)>=Math.abs(bt)?ye-st+bt:bt-st+ye,ye=st}ye+ze>=0!=!!ge&&Ue.reverse()}var P=s.getDefaultExportFromCjs((function Ue(ge,ye){var ze,Qe=ge&&ge.type;if(Qe==="FeatureCollection")for(ze=0;ze<ge.features.length;ze++)Ue(ge.features[ze],ye);else if(Qe==="GeometryCollection")for(ze=0;ze<ge.geometries.length;ze++)Ue(ge.geometries[ze],ye);else if(Qe==="Feature")Ue(ge.geometry,ye);else if(Qe==="Polygon")C(ge.coordinates,ye);else if(Qe==="MultiPolygon")for(ze=0;ze<ge.coordinates.length;ze++)C(ge.coordinates[ze],ye);return ge}));const D=s.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},V=s.pointGeometry,H=s.vectorTile.VectorTileFeature,q=K;function K(Ue,ge){this.options=ge||{},this.features=Ue,this.length=Ue.length}function ie(Ue,ge){this.id=typeof Ue.id=="number"?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=Ue.type===1?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=ge||4096}K.prototype.feature=function(Ue){return new ie(this.features[Ue],this.options.extent)},ie.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var ge=0;ge<Ue.length;ge++){for(var ye=Ue[ge],ze=[],Qe=0;Qe<ye.length;Qe++)ze.push(new V(ye[Qe][0],ye[Qe][1]));this.geometry.push(ze)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,ge=1/0,ye=-1/0,ze=1/0,Qe=-1/0,at=0;at<Ue.length;at++)for(var wt=Ue[at],bt=0;bt<wt.length;bt++){var st=wt[bt];ge=Math.min(ge,st.x),ye=Math.max(ye,st.x),ze=Math.min(ze,st.y),Qe=Math.max(Qe,st.y)}return[ge,ze,ye,Qe]},ie.prototype.toGeoJSON=H.prototype.toGeoJSON;var X=s.pbf,$=q;function G(Ue){var ge=new X;return(function(ye,ze){for(var Qe in ye.layers)ze.writeMessage(3,j,ye.layers[Qe])})(Ue,ge),ge.finish()}function j(Ue,ge){var ye;ge.writeVarintField(15,Ue.version||1),ge.writeStringField(1,Ue.name||""),ge.writeVarintField(5,Ue.extent||4096);var ze={keys:[],values:[],keycache:{},valuecache:{}};for(ye=0;ye<Ue.length;ye++)ze.feature=Ue.feature(ye),ge.writeMessage(2,te,ze);var Qe=ze.keys;for(ye=0;ye<Qe.length;ye++)ge.writeStringField(3,Qe[ye]);var at=ze.values;for(ye=0;ye<at.length;ye++)ge.writeMessage(4,Ve,at[ye])}function te(Ue,ge){var ye=Ue.feature;ye.id!==void 0&&ge.writeVarintField(1,ye.id),ge.writeMessage(2,Z,Ue),ge.writeVarintField(3,ye.type),ge.writeMessage(4,Ie,ye)}function Z(Ue,ge){var ye=Ue.feature,ze=Ue.keys,Qe=Ue.values,at=Ue.keycache,wt=Ue.valuecache;for(var bt in ye.properties){var st=ye.properties[bt],Pt=at[bt];if(st!==null){Pt===void 0&&(ze.push(bt),at[bt]=Pt=ze.length-1),ge.writeVarint(Pt);var rn=typeof st;rn!=="string"&&rn!=="boolean"&&rn!=="number"&&(st=JSON.stringify(st));var fn=rn+":"+st,sn=wt[fn];sn===void 0&&(Qe.push(st),wt[fn]=sn=Qe.length-1),ge.writeVarint(sn)}}}function ee(Ue,ge){return(ge<<3)+(7&Ue)}function be(Ue){return Ue<<1^Ue>>31}function Ie(Ue,ge){for(var ye=Ue.loadGeometry(),ze=Ue.type,Qe=0,at=0,wt=ye.length,bt=0;bt<wt;bt++){var st=ye[bt],Pt=1;ze===1&&(Pt=st.length),ge.writeVarint(ee(1,Pt));for(var rn=ze===3?st.length-1:st.length,fn=0;fn<rn;fn++){fn===1&&ze!==1&&ge.writeVarint(ee(2,rn-1));var sn=st[fn].x-Qe,Yn=st[fn].y-at;ge.writeVarint(be(sn)),ge.writeVarint(be(Yn)),Qe+=sn,at+=Yn}ze===3&&ge.writeVarint(ee(7,1))}}function Ve(Ue,ge){var ye=typeof Ue;ye==="string"?ge.writeStringField(1,Ue):ye==="boolean"?ge.writeBooleanField(7,Ue):ye==="number"&&(Ue%1!=0?ge.writeDoubleField(3,Ue):Ue<0?ge.writeSVarintField(6,Ue):ge.writeVarintField(5,Ue))}F.exports=G,F.exports.fromVectorTileJs=G,F.exports.fromGeojsonVt=function(Ue,ge){ge=ge||{};var ye={};for(var ze in Ue)ye[ze]=new $(Ue[ze].features,ge),ye[ze].name=ze,ye[ze].version=ge.version,ye[ze].extent=ge.extent;return G({layers:ye})},F.exports.GeoJSONWrapper=$;var Ke=s.getDefaultExportFromCjs(F.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},Pe=Math.fround||($e=new Float32Array(1),Ue=>($e[0]=+Ue,$e[0]));var $e;const Ee=3,We=5,Ze=6;class ct{constructor(ge){this.options=Object.assign(Object.create(Xe),ge),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ge){const{log:ye,minZoom:ze,maxZoom:Qe}=this.options;ye&&console.time("total time");const at=`prepare ${ge.length} points`;ye&&console.time(at),this.points=ge;const wt=[];for(let st=0;st<ge.length;st++){const Pt=ge[st];if(!Pt.geometry)continue;const[rn,fn]=Pt.geometry.coordinates,sn=Pe(ot(rn)),Yn=Pe(dt(fn));wt.push(sn,Yn,1/0,st,-1,1),this.options.reduce&&wt.push(0)}let bt=this.trees[Qe+1]=this._createTree(wt);ye&&console.timeEnd(at);for(let st=Qe;st>=ze;st--){const Pt=+Date.now();bt=this.trees[st]=this._createTree(this._cluster(bt,st)),ye&&console.log("z%d: %d clusters in %dms",st,bt.numItems,+Date.now()-Pt)}return ye&&console.timeEnd("total time"),this}getClusters(ge,ye){let ze=((ge[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,ge[1]));let at=ge[2]===180?180:((ge[2]+180)%360+360)%360-180;const wt=Math.max(-90,Math.min(90,ge[3]));if(ge[2]-ge[0]>=360)ze=-180,at=180;else if(ze>at){const fn=this.getClusters([ze,Qe,180,wt],ye),sn=this.getClusters([-180,Qe,at,wt],ye);return fn.concat(sn)}const bt=this.trees[this._limitZoom(ye)],st=bt.range(ot(ze),dt(wt),ot(at),dt(Qe)),Pt=bt.data,rn=[];for(const fn of st){const sn=this.stride*fn;rn.push(Pt[sn+We]>1?kt(Pt,sn,this.clusterProps):this.points[Pt[sn+Ee]])}return rn}getChildren(ge){const ye=this._getOriginId(ge),ze=this._getOriginZoom(ge),Qe="No cluster with the specified id.",at=this.trees[ze];if(!at)throw new Error(Qe);const wt=at.data;if(ye*this.stride>=wt.length)throw new Error(Qe);const bt=this.options.radius/(this.options.extent*Math.pow(2,ze-1)),st=at.within(wt[ye*this.stride],wt[ye*this.stride+1],bt),Pt=[];for(const rn of st){const fn=rn*this.stride;wt[fn+4]===ge&&Pt.push(wt[fn+We]>1?kt(wt,fn,this.clusterProps):this.points[wt[fn+Ee]])}if(Pt.length===0)throw new Error(Qe);return Pt}getLeaves(ge,ye,ze){const Qe=[];return this._appendLeaves(Qe,ge,ye=ye||10,ze=ze||0,0),Qe}getTile(ge,ye,ze){const Qe=this.trees[this._limitZoom(ge)],at=Math.pow(2,ge),{extent:wt,radius:bt}=this.options,st=bt/wt,Pt=(ze-st)/at,rn=(ze+1+st)/at,fn={features:[]};return this._addTileFeatures(Qe.range((ye-st)/at,Pt,(ye+1+st)/at,rn),Qe.data,ye,ze,at,fn),ye===0&&this._addTileFeatures(Qe.range(1-st/at,Pt,1,rn),Qe.data,at,ze,at,fn),ye===at-1&&this._addTileFeatures(Qe.range(0,Pt,st/at,rn),Qe.data,-1,ze,at,fn),fn.features.length?fn:null}getClusterExpansionZoom(ge){let ye=this._getOriginZoom(ge)-1;for(;ye<=this.options.maxZoom;){const ze=this.getChildren(ge);if(ye++,ze.length!==1)break;ge=ze[0].properties.cluster_id}return ye}_appendLeaves(ge,ye,ze,Qe,at){const wt=this.getChildren(ye);for(const bt of wt){const st=bt.properties;if(st&&st.cluster?at+st.point_count<=Qe?at+=st.point_count:at=this._appendLeaves(ge,st.cluster_id,ze,Qe,at):at<Qe?at++:ge.push(bt),ge.length===ze)break}return at}_createTree(ge){const ye=new s.KDBush(ge.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ze=0;ze<ge.length;ze+=this.stride)ye.add(ge[ze],ge[ze+1]);return ye.finish(),ye.data=ge,ye}_addTileFeatures(ge,ye,ze,Qe,at,wt){for(const bt of ge){const st=bt*this.stride,Pt=ye[st+We]>1;let rn,fn,sn;if(Pt)rn=Nt(ye,st,this.clusterProps),fn=ye[st],sn=ye[st+1];else{const Wn=this.points[ye[st+Ee]];rn=Wn.properties;const[li,Zn]=Wn.geometry.coordinates;fn=ot(li),sn=dt(Zn)}const Yn={type:1,geometry:[[Math.round(this.options.extent*(fn*at-ze)),Math.round(this.options.extent*(sn*at-Qe))]],tags:rn};let ei;ei=Pt||this.options.generateId?ye[st+Ee]:this.points[ye[st+Ee]].id,ei!==void 0&&(Yn.id=ei),wt.features.push(Yn)}}_limitZoom(ge){return Math.max(this.options.minZoom,Math.min(Math.floor(+ge),this.options.maxZoom+1))}_cluster(ge,ye){const{radius:ze,extent:Qe,reduce:at,minPoints:wt}=this.options,bt=ze/(Qe*Math.pow(2,ye)),st=ge.data,Pt=[],rn=this.stride;for(let fn=0;fn<st.length;fn+=rn){if(st[fn+2]<=ye)continue;st[fn+2]=ye;const sn=st[fn],Yn=st[fn+1],ei=ge.within(st[fn],st[fn+1],bt),Wn=st[fn+We];let li=Wn;for(const Zn of ei){const Vi=Zn*rn;st[Vi+2]>ye&&(li+=st[Vi+We])}if(li>Wn&&li>=wt){let Zn,Vi=sn*Wn,gr=Yn*Wn,rs=-1;const Sr=((fn/rn|0)<<5)+(ye+1)+this.points.length;for(const Ho of ei){const ss=Ho*rn;if(st[ss+2]<=ye)continue;st[ss+2]=ye;const Vr=st[ss+We];Vi+=st[ss]*Vr,gr+=st[ss+1]*Vr,st[ss+4]=Sr,at&&(Zn||(Zn=this._map(st,fn,!0),rs=this.clusterProps.length,this.clusterProps.push(Zn)),at(Zn,this._map(st,ss)))}st[fn+4]=Sr,Pt.push(Vi/li,gr/li,1/0,Sr,-1,li),at&&Pt.push(rs)}else{for(let Zn=0;Zn<rn;Zn++)Pt.push(st[fn+Zn]);if(li>1)for(const Zn of ei){const Vi=Zn*rn;if(!(st[Vi+2]<=ye)){st[Vi+2]=ye;for(let gr=0;gr<rn;gr++)Pt.push(st[Vi+gr])}}}}return Pt}_getOriginId(ge){return ge-this.points.length>>5}_getOriginZoom(ge){return(ge-this.points.length)%32}_map(ge,ye,ze){if(ge[ye+We]>1){const wt=this.clusterProps[ge[ye+Ze]];return ze?Object.assign({},wt):wt}const Qe=this.points[ge[ye+Ee]].properties,at=this.options.map(Qe);return ze&&at===Qe?Object.assign({},at):at}}function kt(Ue,ge,ye){return{type:"Feature",id:Ue[ge+Ee],properties:Nt(Ue,ge,ye),geometry:{type:"Point",coordinates:[(ze=Ue[ge],360*(ze-.5)),Je(Ue[ge+1])]}};var ze}function Nt(Ue,ge,ye){const ze=Ue[ge+We],Qe=ze>=1e4?`${Math.round(ze/1e3)}k`:ze>=1e3?Math.round(ze/100)/10+"k":ze,at=Ue[ge+Ze],wt=at===-1?{}:Object.assign({},ye[at]);return Object.assign(wt,{cluster:!0,cluster_id:Ue[ge+Ee],point_count:ze,point_count_abbreviated:Qe})}function ot(Ue){return Ue/360+.5}function dt(Ue){const ge=Math.sin(Ue*Math.PI/180),ye=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return ye<0?0:ye>1?1:ye}function Je(Ue){const ge=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(ge))/Math.PI-90}function yt(Ue,ge,ye,ze){for(var Qe,at=ze,wt=ye-ge>>1,bt=ye-ge,st=Ue[ge],Pt=Ue[ge+1],rn=Ue[ye],fn=Ue[ye+1],sn=ge+3;sn<ye;sn+=3){var Yn=Ne(Ue[sn],Ue[sn+1],st,Pt,rn,fn);if(Yn>at)Qe=sn,at=Yn;else if(Yn===at){var ei=Math.abs(sn-wt);ei<bt&&(Qe=sn,bt=ei)}}at>ze&&(Qe-ge>3&&yt(Ue,ge,Qe,ze),Ue[Qe+2]=at,ye-Qe>3&&yt(Ue,Qe,ye,ze))}function Ne(Ue,ge,ye,ze,Qe,at){var wt=Qe-ye,bt=at-ze;if(wt!==0||bt!==0){var st=((Ue-ye)*wt+(ge-ze)*bt)/(wt*wt+bt*bt);st>1?(ye=Qe,ze=at):st>0&&(ye+=wt*st,ze+=bt*st)}return(wt=Ue-ye)*wt+(bt=ge-ze)*bt}function le(Ue,ge,ye,ze){var Qe={id:Ue===void 0?null:Ue,type:ge,geometry:ye,tags:ze,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(at){var wt=at.geometry,bt=at.type;if(bt==="Point"||bt==="MultiPoint"||bt==="LineString")we(at,wt);else if(bt==="Polygon"||bt==="MultiLineString")for(var st=0;st<wt.length;st++)we(at,wt[st]);else if(bt==="MultiPolygon")for(st=0;st<wt.length;st++)for(var Pt=0;Pt<wt[st].length;Pt++)we(at,wt[st][Pt])})(Qe),Qe}function we(Ue,ge){for(var ye=0;ye<ge.length;ye+=3)Ue.minX=Math.min(Ue.minX,ge[ye]),Ue.minY=Math.min(Ue.minY,ge[ye+1]),Ue.maxX=Math.max(Ue.maxX,ge[ye]),Ue.maxY=Math.max(Ue.maxY,ge[ye+1])}function _e(Ue,ge,ye,ze){if(ge.geometry){var Qe=ge.geometry.coordinates,at=ge.geometry.type,wt=Math.pow(ye.tolerance/((1<<ye.maxZoom)*ye.extent),2),bt=[],st=ge.id;if(ye.promoteId?st=ge.properties[ye.promoteId]:ye.generateId&&(st=ze||0),at==="Point")fe(Qe,bt);else if(at==="MultiPoint")for(var Pt=0;Pt<Qe.length;Pt++)fe(Qe[Pt],bt);else if(at==="LineString")Fe(Qe,bt,wt,!1);else if(at==="MultiLineString"){if(ye.lineMetrics){for(Pt=0;Pt<Qe.length;Pt++)Fe(Qe[Pt],bt=[],wt,!1),Ue.push(le(st,"LineString",bt,ge.properties));return}rt(Qe,bt,wt,!1)}else if(at==="Polygon")rt(Qe,bt,wt,!0);else{if(at!=="MultiPolygon"){if(at==="GeometryCollection"){for(Pt=0;Pt<ge.geometry.geometries.length;Pt++)_e(Ue,{id:st,geometry:ge.geometry.geometries[Pt],properties:ge.properties},ye,ze);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Pt=0;Pt<Qe.length;Pt++){var rn=[];rt(Qe[Pt],rn,wt,!0),bt.push(rn)}}Ue.push(le(st,at,bt,ge.properties))}}function fe(Ue,ge){ge.push(pt(Ue[0])),ge.push(vt(Ue[1])),ge.push(0)}function Fe(Ue,ge,ye,ze){for(var Qe,at,wt=0,bt=0;bt<Ue.length;bt++){var st=pt(Ue[bt][0]),Pt=vt(Ue[bt][1]);ge.push(st),ge.push(Pt),ge.push(0),bt>0&&(wt+=ze?(Qe*Pt-st*at)/2:Math.sqrt(Math.pow(st-Qe,2)+Math.pow(Pt-at,2))),Qe=st,at=Pt}var rn=ge.length-3;ge[2]=1,yt(ge,0,rn,ye),ge[rn+2]=1,ge.size=Math.abs(wt),ge.start=0,ge.end=ge.size}function rt(Ue,ge,ye,ze){for(var Qe=0;Qe<Ue.length;Qe++){var at=[];Fe(Ue[Qe],at,ye,ze),ge.push(at)}}function pt(Ue){return Ue/360+.5}function vt(Ue){var ge=Math.sin(Ue*Math.PI/180),ye=.5-.25*Math.log((1+ge)/(1-ge))/Math.PI;return ye<0?0:ye>1?1:ye}function gt(Ue,ge,ye,ze,Qe,at,wt,bt){if(ze/=ge,at>=(ye/=ge)&&wt<ze)return Ue;if(wt<ye||at>=ze)return null;for(var st=[],Pt=0;Pt<Ue.length;Pt++){var rn=Ue[Pt],fn=rn.geometry,sn=rn.type,Yn=Qe===0?rn.minX:rn.minY,ei=Qe===0?rn.maxX:rn.maxY;if(Yn>=ye&&ei<ze)st.push(rn);else if(!(ei<ye||Yn>=ze)){var Wn=[];if(sn==="Point"||sn==="MultiPoint")mt(fn,Wn,ye,ze,Qe);else if(sn==="LineString")Vt(fn,Wn,ye,ze,Qe,!1,bt.lineMetrics);else if(sn==="MultiLineString")gn(fn,Wn,ye,ze,Qe,!1);else if(sn==="Polygon")gn(fn,Wn,ye,ze,Qe,!0);else if(sn==="MultiPolygon")for(var li=0;li<fn.length;li++){var Zn=[];gn(fn[li],Zn,ye,ze,Qe,!0),Zn.length&&Wn.push(Zn)}if(Wn.length){if(bt.lineMetrics&&sn==="LineString"){for(li=0;li<Wn.length;li++)st.push(le(rn.id,sn,Wn[li],rn.tags));continue}sn!=="LineString"&&sn!=="MultiLineString"||(Wn.length===1?(sn="LineString",Wn=Wn[0]):sn="MultiLineString"),sn!=="Point"&&sn!=="MultiPoint"||(sn=Wn.length===3?"Point":"MultiPoint"),st.push(le(rn.id,sn,Wn,rn.tags))}}}return st.length?st:null}function mt(Ue,ge,ye,ze,Qe){for(var at=0;at<Ue.length;at+=3){var wt=Ue[at+Qe];wt>=ye&&wt<=ze&&(ge.push(Ue[at]),ge.push(Ue[at+1]),ge.push(Ue[at+2]))}}function Vt(Ue,ge,ye,ze,Qe,at,wt){for(var bt,st,Pt=Gt(Ue),rn=Qe===0?On:qn,fn=Ue.start,sn=0;sn<Ue.length-3;sn+=3){var Yn=Ue[sn],ei=Ue[sn+1],Wn=Ue[sn+2],li=Ue[sn+3],Zn=Ue[sn+4],Vi=Qe===0?Yn:ei,gr=Qe===0?li:Zn,rs=!1;wt&&(bt=Math.sqrt(Math.pow(Yn-li,2)+Math.pow(ei-Zn,2))),Vi<ye?gr>ye&&(st=rn(Pt,Yn,ei,li,Zn,ye),wt&&(Pt.start=fn+bt*st)):Vi>ze?gr<ze&&(st=rn(Pt,Yn,ei,li,Zn,ze),wt&&(Pt.start=fn+bt*st)):In(Pt,Yn,ei,Wn),gr<ye&&Vi>=ye&&(st=rn(Pt,Yn,ei,li,Zn,ye),rs=!0),gr>ze&&Vi<=ze&&(st=rn(Pt,Yn,ei,li,Zn,ze),rs=!0),!at&&rs&&(wt&&(Pt.end=fn+bt*st),ge.push(Pt),Pt=Gt(Ue)),wt&&(fn+=bt)}var Sr=Ue.length-3;Yn=Ue[Sr],ei=Ue[Sr+1],Wn=Ue[Sr+2],(Vi=Qe===0?Yn:ei)>=ye&&Vi<=ze&&In(Pt,Yn,ei,Wn),Sr=Pt.length-3,at&&Sr>=3&&(Pt[Sr]!==Pt[0]||Pt[Sr+1]!==Pt[1])&&In(Pt,Pt[0],Pt[1],Pt[2]),Pt.length&&ge.push(Pt)}function Gt(Ue){var ge=[];return ge.size=Ue.size,ge.start=Ue.start,ge.end=Ue.end,ge}function gn(Ue,ge,ye,ze,Qe,at){for(var wt=0;wt<Ue.length;wt++)Vt(Ue[wt],ge,ye,ze,Qe,at,!1)}function In(Ue,ge,ye,ze){Ue.push(ge),Ue.push(ye),Ue.push(ze)}function On(Ue,ge,ye,ze,Qe,at){var wt=(at-ge)/(ze-ge);return Ue.push(at),Ue.push(ye+(Qe-ye)*wt),Ue.push(1),wt}function qn(Ue,ge,ye,ze,Qe,at){var wt=(at-ye)/(Qe-ye);return Ue.push(ge+(ze-ge)*wt),Ue.push(at),Ue.push(1),wt}function zt(Ue,ge){for(var ye=[],ze=0;ze<Ue.length;ze++){var Qe,at=Ue[ze],wt=at.type;if(wt==="Point"||wt==="MultiPoint"||wt==="LineString")Qe=un(at.geometry,ge);else if(wt==="MultiLineString"||wt==="Polygon"){Qe=[];for(var bt=0;bt<at.geometry.length;bt++)Qe.push(un(at.geometry[bt],ge))}else if(wt==="MultiPolygon")for(Qe=[],bt=0;bt<at.geometry.length;bt++){for(var st=[],Pt=0;Pt<at.geometry[bt].length;Pt++)st.push(un(at.geometry[bt][Pt],ge));Qe.push(st)}ye.push(le(at.id,wt,Qe,at.tags))}return ye}function un(Ue,ge){var ye=[];ye.size=Ue.size,Ue.start!==void 0&&(ye.start=Ue.start,ye.end=Ue.end);for(var ze=0;ze<Ue.length;ze+=3)ye.push(Ue[ze]+ge,Ue[ze+1],Ue[ze+2]);return ye}function An(Ue,ge){if(Ue.transformed)return Ue;var ye,ze,Qe,at=1<<Ue.z,wt=Ue.x,bt=Ue.y;for(ye=0;ye<Ue.features.length;ye++){var st=Ue.features[ye],Pt=st.geometry,rn=st.type;if(st.geometry=[],rn===1)for(ze=0;ze<Pt.length;ze+=2)st.geometry.push(Ln(Pt[ze],Pt[ze+1],ge,at,wt,bt));else for(ze=0;ze<Pt.length;ze++){var fn=[];for(Qe=0;Qe<Pt[ze].length;Qe+=2)fn.push(Ln(Pt[ze][Qe],Pt[ze][Qe+1],ge,at,wt,bt));st.geometry.push(fn)}}return Ue.transformed=!0,Ue}function Ln(Ue,ge,ye,ze,Qe,at){return[Math.round(ye*(Ue*ze-Qe)),Math.round(ye*(ge*ze-at))]}function wi(Ue,ge,ye,ze,Qe){for(var at=ge===Qe.maxZoom?0:Qe.tolerance/((1<<ge)*Qe.extent),wt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ye,y:ze,z:ge,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},bt=0;bt<Ue.length;bt++){wt.numFeatures++,hi(wt,Ue[bt],at,Qe);var st=Ue[bt].minX,Pt=Ue[bt].minY,rn=Ue[bt].maxX,fn=Ue[bt].maxY;st<wt.minX&&(wt.minX=st),Pt<wt.minY&&(wt.minY=Pt),rn>wt.maxX&&(wt.maxX=rn),fn>wt.maxY&&(wt.maxY=fn)}return wt}function hi(Ue,ge,ye,ze){var Qe=ge.geometry,at=ge.type,wt=[];if(at==="Point"||at==="MultiPoint")for(var bt=0;bt<Qe.length;bt+=3)wt.push(Qe[bt]),wt.push(Qe[bt+1]),Ue.numPoints++,Ue.numSimplified++;else if(at==="LineString")fs(wt,Qe,Ue,ye,!1,!1);else if(at==="MultiLineString"||at==="Polygon")for(bt=0;bt<Qe.length;bt++)fs(wt,Qe[bt],Ue,ye,at==="Polygon",bt===0);else if(at==="MultiPolygon")for(var st=0;st<Qe.length;st++){var Pt=Qe[st];for(bt=0;bt<Pt.length;bt++)fs(wt,Pt[bt],Ue,ye,!0,bt===0)}if(wt.length){var rn=ge.tags||null;if(at==="LineString"&&ze.lineMetrics){for(var fn in rn={},ge.tags)rn[fn]=ge.tags[fn];rn.mapbox_clip_start=Qe.start/Qe.size,rn.mapbox_clip_end=Qe.end/Qe.size}var sn={geometry:wt,type:at==="Polygon"||at==="MultiPolygon"?3:at==="LineString"||at==="MultiLineString"?2:1,tags:rn};ge.id!==null&&(sn.id=ge.id),Ue.features.push(sn)}}function fs(Ue,ge,ye,ze,Qe,at){var wt=ze*ze;if(ze>0&&ge.size<(Qe?wt:ze))ye.numPoints+=ge.length/3;else{for(var bt=[],st=0;st<ge.length;st+=3)(ze===0||ge[st+2]>wt)&&(ye.numSimplified++,bt.push(ge[st]),bt.push(ge[st+1])),ye.numPoints++;Qe&&(function(Pt,rn){for(var fn=0,sn=0,Yn=Pt.length,ei=Yn-2;sn<Yn;ei=sn,sn+=2)fn+=(Pt[sn]-Pt[ei])*(Pt[sn+1]+Pt[ei+1]);if(fn>0===rn)for(sn=0,Yn=Pt.length;sn<Yn/2;sn+=2){var Wn=Pt[sn],li=Pt[sn+1];Pt[sn]=Pt[Yn-2-sn],Pt[sn+1]=Pt[Yn-1-sn],Pt[Yn-2-sn]=Wn,Pt[Yn-1-sn]=li}})(bt,at),Ue.push(bt)}}function Ji(Ue,ge){var ye=(ge=this.options=(function(Qe,at){for(var wt in at)Qe[wt]=at[wt];return Qe})(Object.create(this.options),ge)).debug;if(ye&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");var ze=(function(Qe,at){var wt=[];if(Qe.type==="FeatureCollection")for(var bt=0;bt<Qe.features.length;bt++)_e(wt,Qe.features[bt],at,bt);else _e(wt,Qe.type==="Feature"?Qe:{geometry:Qe},at);return wt})(Ue,ge);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ze=(function(Qe,at){var wt=at.buffer/at.extent,bt=Qe,st=gt(Qe,1,-1-wt,wt,0,-1,2,at),Pt=gt(Qe,1,1-wt,2+wt,0,-1,2,at);return(st||Pt)&&(bt=gt(Qe,1,-wt,1+wt,0,-1,2,at)||[],st&&(bt=zt(st,1).concat(bt)),Pt&&(bt=bt.concat(zt(Pt,-1)))),bt})(ze,ge),ze.length&&this.splitTile(ze,0,0,0),ye&&(ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tr(Ue,ge,ye){return 32*((1<<Ue)*ye+ge)+Ue}function Wo(Ue,ge){const ye=Ue.tileID.canonical;if(!this._geoJSONIndex)return ge(null,null);const ze=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!ze)return ge(null,null);const Qe=new class{constructor(wt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=wt.length,this._features=wt}feature(wt){return new class{constructor(bt){this._feature=bt,this.extent=s.EXTENT,this.type=bt.type,this.properties=bt.tags,"id"in bt&&!isNaN(bt.id)&&(this.id=parseInt(bt.id,10))}loadGeometry(){if(this._feature.type===1){const bt=[];for(const st of this._feature.geometry)bt.push([new s.Point(st[0],st[1])]);return bt}{const bt=[];for(const st of this._feature.geometry){const Pt=[];for(const rn of st)Pt.push(new s.Point(rn[0],rn[1]));bt.push(Pt)}return bt}}toGeoJSON(bt,st,Pt){return D.call(this,bt,st,Pt)}}(this._features[wt])}}(ze.features);let at=Ke(Qe);at.byteOffset===0&&at.byteLength===at.buffer.byteLength||(at=new Uint8Array(at)),ge(null,{vectorTile:Qe,rawData:at.buffer})}Ji.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ji.prototype.splitTile=function(Ue,ge,ye,ze,Qe,at,wt){for(var bt=[Ue,ge,ye,ze],st=this.options,Pt=st.debug;bt.length;){ze=bt.pop(),ye=bt.pop(),ge=bt.pop(),Ue=bt.pop();var rn=1<<ge,fn=Tr(ge,ye,ze),sn=this.tiles[fn];if(!sn&&(Pt>1&&console.time("creation"),sn=this.tiles[fn]=wi(Ue,ge,ye,ze,st),this.tileCoords.push({z:ge,x:ye,y:ze}),Pt)){Pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,ye,ze,sn.numFeatures,sn.numPoints,sn.numSimplified),console.timeEnd("creation"));var Yn="z"+ge;this.stats[Yn]=(this.stats[Yn]||0)+1,this.total++}if(sn.source=Ue,Qe){if(ge===st.maxZoom||ge===Qe)continue;var ei=1<<Qe-ge;if(ye!==Math.floor(at/ei)||ze!==Math.floor(wt/ei))continue}else if(ge===st.indexMaxZoom||sn.numPoints<=st.indexMaxPoints)continue;if(sn.source=null,Ue.length!==0){Pt>1&&console.time("clipping");var Wn,li,Zn,Vi,gr,rs,Sr=.5*st.buffer/st.extent,Ho=.5-Sr,ss=.5+Sr,Vr=1+Sr;Wn=li=Zn=Vi=null,gr=gt(Ue,rn,ye-Sr,ye+ss,0,sn.minX,sn.maxX,st),rs=gt(Ue,rn,ye+Ho,ye+Vr,0,sn.minX,sn.maxX,st),Ue=null,gr&&(Wn=gt(gr,rn,ze-Sr,ze+ss,1,sn.minY,sn.maxY,st),li=gt(gr,rn,ze+Ho,ze+Vr,1,sn.minY,sn.maxY,st),gr=null),rs&&(Zn=gt(rs,rn,ze-Sr,ze+ss,1,sn.minY,sn.maxY,st),Vi=gt(rs,rn,ze+Ho,ze+Vr,1,sn.minY,sn.maxY,st),rs=null),Pt>1&&console.timeEnd("clipping"),bt.push(Wn||[],ge+1,2*ye,2*ze),bt.push(li||[],ge+1,2*ye,2*ze+1),bt.push(Zn||[],ge+1,2*ye+1,2*ze),bt.push(Vi||[],ge+1,2*ye+1,2*ze+1)}}},Ji.prototype.getTile=function(Ue,ge,ye){var ze=this.options,Qe=ze.extent,at=ze.debug;if(Ue<0||Ue>24)return null;var wt=1<<Ue,bt=Tr(Ue,ge=(ge%wt+wt)%wt,ye);if(this.tiles[bt])return An(this.tiles[bt],Qe);at>1&&console.log("drilling down to z%d-%d-%d",Ue,ge,ye);for(var st,Pt=Ue,rn=ge,fn=ye;!st&&Pt>0;)Pt--,rn=Math.floor(rn/2),fn=Math.floor(fn/2),st=this.tiles[Tr(Pt,rn,fn)];return st&&st.source?(at>1&&console.log("found parent tile z%d-%d-%d",Pt,rn,fn),at>1&&console.time("drilling down"),this.splitTile(st.source,Pt,rn,fn,Ue,ge,ye),at>1&&console.timeEnd("drilling down"),this.tiles[bt]?An(this.tiles[bt],Qe):null):null};class Eo extends s.VectorTileWorkerSource{constructor(ge,ye,ze,Qe,at){super(ge,ye,ze,Qe,Wo),at&&(this.loadGeoJSON=at)}loadData(ge,ye){const ze=ge&&ge.request,Qe=ze&&ze.collectResourceTiming;this.loadGeoJSON(ge,((at,wt)=>{if(at||!wt)return ye(at);if(typeof wt!="object")return ye(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`));{P(wt,!0);try{if(ge.filter){const st=s.createExpression(ge.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(st.result==="error")throw new Error(st.value.map((rn=>`${rn.key}: ${rn.message}`)).join(", "));wt={type:"FeatureCollection",features:wt.features.filter((rn=>st.value.evaluate({zoom:0},rn)))}}this._geoJSONIndex=ge.cluster?new ct((function({superclusterOptions:st,clusterProperties:Pt}){if(!Pt||!st)return st;const rn={},fn={},sn={accumulated:null,zoom:0},Yn={properties:null},ei=Object.keys(Pt);for(const Wn of ei){const[li,Zn]=Pt[Wn],Vi=s.createExpression(Zn),gr=s.createExpression(typeof li=="string"?[li,["accumulated"],["get",Wn]]:li);rn[Wn]=Vi.value,fn[Wn]=gr.value}return st.map=Wn=>{Yn.properties=Wn;const li={};for(const Zn of ei)li[Zn]=rn[Zn].evaluate(sn,Yn);return li},st.reduce=(Wn,li)=>{Yn.properties=li;for(const Zn of ei)sn.accumulated=Wn[Zn],Wn[Zn]=fn[Zn].evaluate(sn,Yn)},st})(ge)).load(wt.features):(function(st,Pt){return new Ji(st,Pt)})(wt,ge.geojsonVtOptions)}catch(st){return ye(st)}this.loaded={};const bt={};if(Qe){const st=s.getPerformanceMeasurement(ze);st&&(bt.resourceTiming={},bt.resourceTiming[ge.source]=JSON.parse(JSON.stringify(st)))}ye(null,bt)}}))}reloadTile(ge,ye){const ze=this.loaded;return ze&&ze[ge.uid]?super.reloadTile(ge,ye):this.loadTile(ge,ye)}loadGeoJSON(ge,ye){if(ge.request)s.getJSON(ge.request,ye);else{if(typeof ge.data!="string")return ye(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`));try{return ye(null,JSON.parse(ge.data))}catch{return ye(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ge,ye){try{ye(null,this._geoJSONIndex.getClusterExpansionZoom(ge.clusterId))}catch(ze){ye(ze)}}getClusterChildren(ge,ye){try{ye(null,this._geoJSONIndex.getChildren(ge.clusterId))}catch(ze){ye(ze)}}getClusterLeaves(ge,ye){try{ye(null,this._geoJSONIndex.getLeaves(ge.clusterId,ge.limit,ge.offset))}catch(ze){ye(ze)}}}class Uc{constructor(ge){this.self=ge,this.actor=new s.Actor(ge,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Eo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ye,ze)=>{if(this.workerSourceTypes[ye])throw new Error(`Worker source with name "${ye}" already registered.`);this.workerSourceTypes[ye]=ze},this.self.registerRTLTextPlugin=ye=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=ye.applyArabicShaping,s.plugin.processBidirectionalText=ye.processBidirectionalText,s.plugin.processStyledBidirectionalText=ye.processStyledBidirectionalText}}clearCaches(ge,ye,ze){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge],ze()}checkIfReady(ge,ye,ze){ze()}setReferrer(ge,ye){this.referrer=ye}spriteLoaded(ge,ye){this.isSpriteLoaded[ge]=ye;for(const ze in this.workerSources[ge]){const Qe=this.workerSources[ge][ze];for(const at in Qe)Qe[at]instanceof s.VectorTileWorkerSource&&(Qe[at].isSpriteLoaded=ye,Qe[at].fire(new s.Event("isSpriteLoaded")))}}setImages(ge,ye,ze){this.availableImages[ge]=ye;for(const Qe in this.workerSources[ge]){const at=this.workerSources[ge][Qe];for(const wt in at)at[wt].availableImages=ye}ze()}enableTerrain(ge,ye,ze){this.terrain=ye,ze()}setProjection(ge,ye){this.projections[ge]=s.getProjection(ye)}setLayers(ge,ye,ze){this.getLayerIndex(ge).replace(ye),ze()}updateLayers(ge,ye,ze){this.getLayerIndex(ge).update(ye.layers,ye.removedIds),ze()}loadTile(ge,ye,ze){const Qe=this.enableTerrain?s.extend({enableTerrain:this.terrain},ye):ye;Qe.projection=this.projections[ge]||this.defaultProjection,this.getWorkerSource(ge,ye.type,ye.source).loadTile(Qe,ze)}loadDEMTile(ge,ye,ze){const Qe=this.enableTerrain?s.extend({buildQuadTree:this.terrain},ye):ye;this.getDEMWorkerSource(ge,ye.source).loadTile(Qe,ze)}reloadTile(ge,ye,ze){const Qe=this.enableTerrain?s.extend({enableTerrain:this.terrain},ye):ye;Qe.projection=this.projections[ge]||this.defaultProjection,this.getWorkerSource(ge,ye.type,ye.source).reloadTile(Qe,ze)}abortTile(ge,ye,ze){this.getWorkerSource(ge,ye.type,ye.source).abortTile(ye,ze)}removeTile(ge,ye,ze){this.getWorkerSource(ge,ye.type,ye.source).removeTile(ye,ze)}removeSource(ge,ye,ze){if(!this.workerSources[ge]||!this.workerSources[ge][ye.type]||!this.workerSources[ge][ye.type][ye.source])return;const Qe=this.workerSources[ge][ye.type][ye.source];delete this.workerSources[ge][ye.type][ye.source],Qe.removeSource!==void 0?Qe.removeSource(ye,ze):ze()}loadWorkerSource(ge,ye,ze){try{this.self.importScripts(ye.url),ze()}catch(Qe){ze(Qe.toString())}}syncRTLPluginState(ge,ye,ze){try{s.plugin.setState(ye);const Qe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Qe!=null){this.self.importScripts(Qe);const at=s.plugin.isParsed();ze(at?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Qe}`),at)}}catch(Qe){ze(Qe.toString())}}getAvailableImages(ge){let ye=this.availableImages[ge];return ye||(ye=[]),ye}getLayerIndex(ge){let ye=this.layerIndexes[ge];return ye||(ye=this.layerIndexes[ge]=new x),ye}getWorkerSource(ge,ye,ze){if(this.workerSources[ge]||(this.workerSources[ge]={}),this.workerSources[ge][ye]||(this.workerSources[ge][ye]={}),!this.workerSources[ge][ye][ze]){const Qe={send:(at,wt,bt,st,Pt,rn)=>{this.actor.send(at,wt,bt,ge,Pt,rn)},scheduler:this.actor.scheduler};this.workerSources[ge][ye][ze]=new this.workerSourceTypes[ye](Qe,this.getLayerIndex(ge),this.getAvailableImages(ge),this.isSpriteLoaded[ge])}return this.workerSources[ge][ye][ze]}getDEMWorkerSource(ge,ye){return this.demWorkerSources[ge]||(this.demWorkerSources[ge]={}),this.demWorkerSources[ge][ye]||(this.demWorkerSources[ge][ye]=new T),this.demWorkerSources[ge][ye]}enforceCacheSizeLimit(ge,ye){s.enforceCacheSizeLimit(ye)}getWorkerPerformanceMetrics(ge,ye,ze){ze(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Uc(self)),Uc})),l(["./shared"],(function(s){function p(_,u){if(Array.isArray(_)){if(!Array.isArray(u)||_.length!==u.length)return!1;for(let m=0;m<_.length;m++)if(!p(_[m],u[m]))return!1;return!0}if(typeof _=="object"&&_!==null&&u!==null){if(typeof u!="object"||Object.keys(_).length!==Object.keys(u).length)return!1;for(const m in _)if(!p(_[m],u[m]))return!1;return!0}return _===u}var v=x;function x(_){return!(function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,S,k=new Blob([""],{type:"text/javascript"}),R=URL.createObjectURL(k);try{S=new Worker(R),y=!0}catch{y=!1}return S&&S.terminate(),URL.revokeObjectURL(R),y})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var y=document.createElement("canvas");y.width=y.height=1;var S=y.getContext("2d");if(!S)return!1;var k=S.getImageData(0,0,1,1);return k&&k.width===y.width})()?(T[m=u&&u.failIfMajorPerformanceCaveat]===void 0&&(T[m]=(function(y){var S,k=(function(R){var O=document.createElement("canvas"),U=Object.create(x.webGLContextAttributes);return U.failIfMajorPerformanceCaveat=R,O.getContext("webgl",U)||O.getContext("experimental-webgl",U)})(y);if(!k)return!1;try{S=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!S||k.isContextLost())&&(k.shaderSource(S,"void main() {}"),k.compileShader(S),k.getShaderParameter(S,k.COMPILE_STATUS)===!0)})(m)),T[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m})(_)}var T={};function C(_,u,m){const y=s.window.document.createElement(_);return u!==void 0&&(y.className=u),m&&m.appendChild(y),y}function I(_,u,m){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const S of Object.keys(u))y.setAttributeNS(null,S,u[S]);return m&&m.appendChild(y),y}x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const P=s.window.document&&s.window.document.documentElement.style,D=P&&P.userSelect!==void 0?"userSelect":"WebkitUserSelect";let F;function V(){P&&D&&(F=P[D],P[D]="none")}function H(){P&&D&&(P[D]=F)}function q(_){_.preventDefault(),_.stopPropagation(),s.window.removeEventListener("click",q,!0)}function K(){s.window.addEventListener("click",q,!0),s.window.setTimeout((()=>{s.window.removeEventListener("click",q,!0)}),0)}function ie(_,u){const m=_.getBoundingClientRect();return G(_,m,u)}function X(_,u){const m=_.getBoundingClientRect(),y=[];for(let S=0;S<u.length;S++)y.push(G(_,m,u[S]));return y}function $(_){return s.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function G(_,u,m){const y=_.offsetWidth===u.width?1:_.offsetWidth/u.width;return new s.Point((m.clientX-u.left)*y,(m.clientY-u.top)*y)}function j(_,u){var m=u[0],y=u[1],S=u[2],k=u[3],R=m*k-S*y;return R?(_[0]=k*(R=1/R),_[1]=-y*R,_[2]=-S*R,_[3]=m*R,_):null}function te(_){const{userImage:u}=_;return!!(u&&u.render&&u.render())&&(_.data.replace(new Uint8Array(u.data.buffer)),!0)}class Z extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:m,callback:y}of this.requestors)this._notify(m,y);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,m){this._validate(u,m)&&(this.images[u]=m)}_validate(u,m){let y=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(m.content,m)||(this.fire(new s.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,m){if(!u)return!0;let y=0;for(const S of u){if(S[0]<y||S[1]<S[0]||m<S[1])return!1;y=S[1]}return!0}_validateContent(u,m){return!(u&&(u.length!==4||u[0]<0||m.data.width<u[0]||u[1]<0||m.data.height<u[1]||u[2]<0||m.data.width<u[2]||u[3]<0||m.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,m){m.version=this.images[u].version+1,this.images[u]=m,this.updatedImages[u]=!0}removeImage(u){const m=this.images[u];delete this.images[u],delete this.patterns[u],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,m){let y=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(y=!1);this.isLoaded()||y?this._notify(u,m):this.requestors.push({ids:u,callback:m})}_notify(u,m){const y={};for(const S of u){this.images[S]||this.fire(new s.Event("styleimagemissing",{id:S}));const k=this.images[S];k?y[S]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:!!(k.userImage&&k.userImage.render)}:s.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,y)}getPixelSize(){const{width:u,height:m}=this.atlasImage;return{width:u,height:m}}getPattern(u){const m=this.patterns[u],y=this.getImage(u);if(!y)return null;if(m&&m.position.version===y.version)return m.position;if(m)m.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},k=new s.ImagePosition(S,y);this.patterns[u]={bin:S,position:k}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const m=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(u,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const k in this.patterns)u.push(this.patterns[k].bin);const{w:m,h:y}=s.potpack(u),S=this.atlasImage;S.resize({width:m||1,height:y||1});for(const k in this.patterns){const{bin:R}=this.patterns[k],O=R.x+1,U=R.y+1,Y=this.images[k].data,J=Y.width,ae=Y.height;s.RGBAImage.copy(Y,S,{x:0,y:0},{x:O,y:U},{width:J,height:ae}),s.RGBAImage.copy(Y,S,{x:0,y:ae-1},{x:O,y:U-1},{width:J,height:1}),s.RGBAImage.copy(Y,S,{x:0,y:0},{x:O,y:U+ae},{width:J,height:1}),s.RGBAImage.copy(Y,S,{x:J-1,y:0},{x:O-1,y:U},{width:1,height:ae}),s.RGBAImage.copy(Y,S,{x:0,y:0},{x:O+J,y:U},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const m of u){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const y=this.images[m];te(y)&&this.updateImage(m,y)}}}const ee=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(_,u){return(function([m,y,S]){const k=s.degToRad(y+90),R=s.degToRad(S);return{x:m*Math.cos(k)*Math.sin(R),y:m*Math.sin(k)*Math.sin(R),z:m*Math.cos(R),azimuthal:y,polar:S}})(_.expression.evaluate(u))}interpolate(_,u,m){return{x:s.number(_.x,u.x,m),y:s.number(_.y,u.y,m),z:s.number(_.z,u.z,m),azimuthal:s.number(_.azimuthal,u.azimuthal,m),polar:s.number(_.polar,u.polar,m)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class be extends s.Evented{constructor(u){super(),this._transitionable=new s.Transitionable(ee),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,m={}){if(!this._validate(s.validateLight,u,m))for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Ie=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Ve=class extends s.Evented{constructor(_,u){super(),this._transitionable=new s.Transitionable(Ie),this.set(_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=u}get(){return this._transitionable.serialize()}set(_){for(const u in _){const m=_[u];s.endsWith(u,"-transition")?this._transitionable.setTransition(u.slice(0,-11),m):this._transitionable.setValue(u,m)}}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}};function Ke(_,u,m,y){const S=s.smoothstep(45,65,m),[k,R]=Xe(_,y),O=s.length(u);let U=1-Math.min(1,Math.exp((O-k)/(R-k)*-6));return U*=U*U,U=Math.min(1,1.00747*U),U*S*_.alpha}function Xe(_,u){const m=.5/Math.tan(.5*u);return[_.range[0]+m,_.range[1]+m]}const Pe=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class $e extends s.Evented{constructor(u,m){super(),this._transitionable=new s.Transitionable(Pe),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const u=this._transform,m=u.projection.name==="globe",y=s.globeToMercatorTransition(u.zoom),S=this.properties.get("range"),k=[.5,3];return{range:m?[s.number(k[0],S[0],y),s.number(k[1],S[1],y)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,m={}){if(!this._validate(s.validateFog,u,m)){for(const y of Object.keys(s.spec.fog))u&&u[y]===void 0&&(u[y]=s.spec.fog[y].default);for(const y in u){const S=u[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),S):this._transitionable.setValue(y,S)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,u))*m.a}getOpacityAtLatLng(u,m){return this._transform.projection.supportsFog?(function(y,S,k){const R=s.MercatorCoordinate.fromLngLat(S),O=k.elevation?k.elevation.getAtPointOrZero(R):0,U=[R.x,R.y,O];return s.transformMat4(U,U,k.mercatorFogMatrix),Ke(y,U,k.pitch,k._fov)})(this.state,u,m):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?Xe(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,m,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,u.call(s.validateStyle,s.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ee{constructor(u,m){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let S=0;S<y.length;S++){const k=new Ee.Actor(y[S],m,this.id);k.name=`Worker ${S}`,this.actors.push(k)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(u,m,y){s.asyncAll(this.actors,((S,k)=>{S.send(u,m,k)}),y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((u=>{u.remove()})),this.actors=[],this.workerPool.release(this.id)}}function We(_,u,m){return u*(s.EXTENT/(_.tileSize*Math.pow(2,m-_.tileID.overscaledZ)))}Ee.Actor=s.Actor;class Ze{constructor(u,m,y,S){this.screenBounds=u,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(u,m){let y,S;if(u instanceof s.Point||typeof u[0]=="number"){const k=s.Point.convert(u);y=[k],S=m.isPointAboveHorizon(k)}else{const k=s.Point.convert(u[0]),R=s.Point.convert(u[1]);y=[k,R],S=s.polygonizeBounds(k,R).every((O=>m.isPointAboveHorizon(O)))}return new Ze(y,m.getCameraPoint(),S,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<y.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?S[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(S[3]=this.cameraPoint)),s.bufferConvexPolygon(S,u)}bufferedCameraGeometryGlobe(u){const m=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],S=s.polygonizeBounds(m,y,u),k=this.cameraPoint.clone();switch(3*((k.y>m.y)+(k.y>y.y))+((k.x>m.x)+(k.x>y.x))){case 0:S[0]=k,S[4]=k.clone();break;case 1:S.splice(1,0,k);break;case 2:S[1]=k;break;case 3:S.splice(4,0,k);break;case 5:S.splice(2,0,k);break;case 6:S[3]=k;break;case 7:S.splice(3,0,k);break;case 8:S[2]=k}return S}containsTile(u,m,y,S=0){const k=u.queryPadding/m._pixelsPerMercatorPixel+1,R=y?this._bufferedCameraMercator(k,m):this._bufferedScreenMercator(k,m);let O=u.tileID.wrap+(R.unwrapped?S:0);const U=R.polygon.map((Ae=>s.getTilePoint(u.tileTransform,Ae,O)));if(!s.polygonIntersectsBox(U,0,0,s.EXTENT,s.EXTENT))return;O=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const Y=this.screenGeometryMercator.polygon.map((Ae=>s.getTileVec3(u.tileTransform,Ae,O))),J=Y.map((Ae=>new s.Point(Ae[0],Ae[1]))),ae=m.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),pe=s.getTileVec3(u.tileTransform,ae,O),Te=Y.map((Ae=>{const ce=s.sub(Ae,Ae,pe);return s.normalize(ce,ce),new s.Ray(pe,ce)})),ke=We(u,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:J,tilespaceRays:Te,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(Se=s.getBounds(U),Se.min.x=s.clamp(Se.min.x,0,s.EXTENT),Se.min.y=s.clamp(Se.min.y,0,s.EXTENT),Se.max.x=s.clamp(Se.max.x,0,s.EXTENT),Se.max.y=s.clamp(Se.max.y,0,s.EXTENT),Se),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:ke};var Se}_bufferedScreenMercator(u,m){const y=Nt(u);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),m):{polygon:this.bufferedScreenGeometry(u).map((k=>m.pointCoordinate3D(k))),unwrapped:!0},this._screenRaycastCache[y]=S,S}}_bufferedCameraMercator(u,m){const y=Nt(u);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),m):{polygon:this.bufferedCameraGeometry(u).map((k=>m.pointCoordinate3D(k))),unwrapped:!0},this._cameraRaycastCache[y]=S,S}}_projectAndResample(u,m){const y=(function(k,R){const O=s.multiply([],R.pixelMatrix,R.globeMatrix),U=[0,-s.GLOBE_RADIUS,0,1],Y=[0,s.GLOBE_RADIUS,0,1],J=[0,0,0,1];s.transformMat4$1(U,U,O),s.transformMat4$1(Y,Y,O),s.transformMat4$1(J,J,O);const ae=new s.Point(U[0]/U[3],U[1]/U[3]),pe=new s.Point(Y[0]/Y[3],Y[1]/Y[3]),Te=s.polygonContainsPoint(k,ae)&&U[3]<J[3],ke=s.polygonContainsPoint(k,pe)&&Y[3]<J[3];if(!Te&&!ke)return null;const Se=(function(et,ht,lt){for(let xt=1;xt<et.length;xt++){const Xt=kt(ht.pointCoordinate3D(et[xt-1]).x),ft=kt(ht.pointCoordinate3D(et[xt]).x);if(lt<0){if(Xt<ft)return{idx:xt,t:-Xt/(ft-1-Xt)}}else if(ft<Xt)return{idx:xt,t:(1-Xt)/(ft+1-Xt)}}return null})(k,R,Te?-1:1);if(!Se)return null;const{idx:Ae,t:ce}=Se;let xe=Ae>1?ct(k.slice(0,Ae),R):[],De=Ae<k.length?ct(k.slice(Ae),R):[];xe=xe.map((et=>new s.Point(kt(et.x),et.y))),De=De.map((et=>new s.Point(kt(et.x),et.y)));const Re=[...xe];Re.length===0&&Re.push(De[De.length-1]);const Ge=s.number(Re[Re.length-1].y,(De.length===0?xe[0]:De[0]).y,ce);let Ye;return Ye=Te?[new s.Point(0,Ge),new s.Point(0,0),new s.Point(1,0),new s.Point(1,Ge)]:[new s.Point(1,Ge),new s.Point(1,1),new s.Point(0,1),new s.Point(0,Ge)],Re.push(...Ye),De.length===0?Re.push(xe[0]):Re.push(...De),{polygon:Re.map((et=>new s.MercatorCoordinate(et.x,et.y))),unwrapped:!1}})(u,m);if(y)return y;const S=(function(k,R){let O=!1,U=-1/0,Y=0;for(let ae=0;ae<k.length-1;ae++)k[ae].x>U&&(U=k[ae].x,Y=ae);for(let ae=0;ae<k.length-1;ae++){const pe=(Y+ae)%(k.length-1),Te=k[pe],ke=k[pe+1];Math.abs(Te.x-ke.x)>.5&&(Te.x<ke.x?(Te.x+=1,pe===0&&(k[k.length-1].x+=1)):(ke.x+=1,pe+1===k.length-1&&(k[0].x+=1)),O=!0)}const J=s.mercatorXfromLng(R.center.lng);return O&&J<Math.abs(J-1)&&k.forEach((ae=>{ae.x-=1})),{polygon:k,unwrapped:O}})(ct(u,m).map((k=>new s.Point(kt(k.x),k.y))),m);return{polygon:S.polygon.map((k=>new s.MercatorCoordinate(k.x,k.y))),unwrapped:S.unwrapped}}}function ct(_,u){return s.resample(_,(m=>{const y=u.pointCoordinate3D(m);m.x=y.x,m.y=y.y}),1/256)}function kt(_){return _<0?1+_%1:_%1}function Nt(_){return 100*_|0}function ot(_,u,m,y,S){const k=function(R,O){if(R)return S(R);if(O){_.url&&O.tiles&&_.tiles&&delete _.tiles;const U=s.pick(s.extend(O,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(U.vectorLayers=O.vector_layers,U.vectorLayerIds=U.vectorLayers.map((Y=>Y.id))),U.tiles=u.canonicalizeTileset(U,_.url),S(null,U)}};return _.url?s.getJSON(u.transformRequest(u.normalizeSourceURL(_.url,null,m,y),s.ResourceType.Source),k):s.exported.frame((()=>k(null,_)))}class dt{constructor(u,m,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=m||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const m=Math.pow(2,u.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*m),S=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*m),k=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*m),R=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*m);return u.x>=y&&u.x<k&&u.y>=S&&u.y<R}}class Je{constructor(u,m,y){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ne{constructor(u,m,y,S){this.length=m.length,this.attributes=y,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=u;const k=u.gl;this.buffer=k.createBuffer(),u.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,m){for(let y=0;y<this.attributes.length;y++){const S=m.attributes[this.attributes[y].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,m,y){for(let S=0;S<this.attributes.length;S++){const k=this.attributes[S],R=m.attributes[k.name];R!==void 0&&u.vertexAttribPointer(R,k.components,u[yt[k.type]],!1,this.itemSize,k.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class le{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class we extends le{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class _e extends le{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class fe extends le{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Fe extends le{getDefault(){return[!0,!0,!0,!0]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class rt extends le{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class pt extends le{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class vt extends le{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const m=this.current;(u.func!==m.func||u.ref!==m.ref||u.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class gt extends le{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class mt extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=u,this.dirty=!1}}class Vt extends le{getDefault(){return[0,1]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Gt extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=u,this.dirty=!1}}class gn extends le{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class In extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.BLEND):m.disable(m.BLEND),this.current=u,this.dirty=!1}}class On extends le{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class qn extends le{getDefault(){return s.Color.transparent}set(u){const m=this.current;(u.r!==m.r||u.g!==m.g||u.b!==m.b||u.a!==m.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class zt extends le{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class un extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;u?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=u,this.dirty=!1}}class An extends le{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Ln extends le{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}let wi,hi=class extends le{getDefault(){return null}set(_){(_!==this.current||this.dirty)&&(this.gl.useProgram(_),this.current=_,this.dirty=!1)}};class fs extends le{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Ji extends le{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const m=this.current;(u[0]!==m[0]||u[1]!==m[1]||u[2]!==m[2]||u[3]!==m[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Tr extends le{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Wo extends le{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Eo extends le{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Uc extends le{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Ue extends le{getDefault(){return null}set(u){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ge extends le{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class ye extends le{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class ze extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Qe extends le{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class at extends le{constructor(u,m){super(u),this.context=u,this.parent=m}getDefault(){return null}}class wt extends at{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class bt extends at{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class st extends bt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Pt{constructor(u,m,y,S){this.context=u,this.width=m,this.height=y;const k=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new wt(u,k),S&&(this.depthAttachment=new bt(u,k))}destroy(){const u=this.context.gl,m=this.colorAttachment.get();if(m&&u.deleteTexture(m),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class rn{constructor(u,m=!1){if(this.gl=u,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const y=u;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(u),deleteVertexArrayOES:y.deleteVertexArray.bind(u),bindVertexArrayOES:y.bindVertexArray.bind(u)}}this.clearColor=new we(this),this.clearDepth=new _e(this),this.clearStencil=new fe(this),this.colorMask=new Fe(this),this.depthMask=new rt(this),this.stencilMask=new pt(this),this.stencilFunc=new vt(this),this.stencilOp=new gt(this),this.stencilTest=new mt(this),this.depthRange=new Vt(this),this.depthTest=new Gt(this),this.depthFunc=new gn(this),this.blend=new In(this),this.blendFunc=new On(this),this.blendColor=new qn(this),this.blendEquation=new zt(this),this.cullFace=new un(this),this.cullFaceSide=new An(this),this.frontFace=new Ln(this),this.program=new hi(this),this.activeTexture=new fs(this),this.viewport=new Ji(this),this.bindFramebuffer=new Tr(this),this.bindRenderbuffer=new Wo(this),this.bindTexture=new Eo(this),this.bindVertexBuffer=new Uc(this),this.bindElementBuffer=new Ue(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ye(this),this.pixelStoreUnpackPremultiplyAlpha=new ze(this),this.pixelStoreUnpackFlipY=new Qe(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,m){return new Je(this,u,m)}createVertexBuffer(u,m,y){return new Ne(this,u,m,y)}createRenderbuffer(u,m,y){const S=this.gl,k=S.createRenderbuffer();return this.bindRenderbuffer.set(k),S.renderbufferStorage(S.RENDERBUFFER,u,m,y),this.bindRenderbuffer.set(null),k}createFramebuffer(u,m,y){return new Pt(this,u,m,y)}clear({color:u,depth:m,stencil:y}){const S=this.gl;let k=0;u&&(k|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(k|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),y!==void 0&&(k|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),S.clear(k)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){p(u.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class fn extends s.Evented{constructor(u,m,y,S){if(super(),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(m,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=ot(this._options,this.map._requestManager,m,y,((S,k)=>{this._tileJSONRequest=null,this._loaded=!0,S?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(S))):k&&(s.extend(this,k),k.bounds&&(this.tileBounds=new dt(k.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(k.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(S)}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(u,m){const y=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),S={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=m:u.request=u.actor.send("reloadTile",S,k.bind(this));else if(u.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",S,k.bind(this),void 0,!0);else{const R=s.loadVectorTile.call({deduped:this._deduped},S,((O,U)=>{O||!U?k.call(this,O):(S.data={cacheControl:U.cacheControl,expires:U.expires,rawData:U.rawData.slice(0)},u.actor&&u.actor.send("loadTile",S,k.bind(this),void 0,!0))}),!0);u.request={cancel:R}}function k(R,O){return delete u.request,u.aborted?m(null):R&&R.status!==404?m(R):(O&&O.resourceTiming&&(u.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&u.setExpiryData(O),u.loadVectorData(O,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class sn extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},m),s.extend(this,s.pick(m,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ot(this._options,this.map._requestManager,null,null,((m,y)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new s.ErrorEvent(m)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new dt(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(m)}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,m){const y=s.exported.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);u.request=s.getImage(this.map._requestManager.transformRequest(S,s.ResourceType.Tile),((k,R,O,U)=>(delete u.request,u.aborted?(u.state="unloaded",m(null)):k?(u.state="errored",m(k)):R?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:O,expires:U}),u.setTexture(R,this.map.painter),u.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null))))}static loadTileData(u,m,y){u.setTexture(m,y)}static unloadTileData(u,m){u.texture&&m.saveTileTexture(u.texture)}abortTile(u,m){u.request&&(u.request.cancel(),delete u.request),m()}unloadTile(u,m){u.texture&&this.map.painter.saveTileTexture(u.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Yn(_,u,m,y,S,k,R,O){const U=[_,m,S,u,y,k,1,1,1],Y=[R,O,1],J=s.adjoint([],U),[ae,pe,Te]=s.transformMat3(Y,Y,s.transpose(J,J));return s.multiply$1(U,[ae,0,0,0,pe,0,0,0,Te],U)}class ei extends s.Evented{constructor(u,m,y,S){super(),this.id=u,this.dispatcher=y,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m,this._dirty=!1}load(u,m){this._loaded=m||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),((y,S)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(S){const{HTMLImageElement:k}=s.window;this.image=S instanceof k?s.exported.getImageData(S):S,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const m=u.map(s.MercatorCoordinate.fromLngLat);return this.tileID=(function(y){let S=1/0,k=1/0,R=-1/0,O=-1/0;for(const ae of y)S=Math.min(S,ae.x),k=Math.min(k,ae.y),R=Math.max(R,ae.x),O=Math.max(O,ae.y);const U=Math.max(R-S,O-k),Y=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),J=Math.pow(2,Y);return new s.CanonicalTileID(Y,Math.floor((S+R)/2*J),Math.floor((k+O)/2*J))})(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const U in this.tiles){const Y=this.tiles[U];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const m=s.tileTransform(this.tileID,this.map.transform.projection),[y,S,k,R]=this.coordinates.map((U=>{const Y=m.projection.project(U[0],U[1]);return s.getTilePoint(m,Y)._round()}));this.perspectiveTransform=(function(U,Y,J,ae,pe,Te,ke,Se,Ae,ce){const xe=Yn(0,0,U,0,0,Y,U,Y),De=Yn(J,ae,pe,Te,ke,Se,Ae,ce);return s.multiply$1(De,s.adjoint(xe,xe),De),[De[6]/De[8]*U/s.EXTENT,De[7]/De[8]*Y/s.EXTENT]})(this.width,this.height,y.x,y.y,S.x,S.y,R.x,R.y,k.x,k.y);const O=this._boundsArray=new s.StructArrayLayout4i8;O.emplaceBack(y.x,y.y,0,0),O.emplaceBack(S.x,S.y,s.EXTENT,0),O.emplaceBack(R.x,R.y,0,s.EXTENT),O.emplaceBack(k.x,k.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(O,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,m=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(u,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,m){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},m(null)):(u.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Wn={vector:fn,raster:sn,"raster-dem":class extends sn{constructor(_,u,m,y){super(_,u,m,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(_,u){const m=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(S,k){S&&(_.state="errored",u(S)),k&&(_.dem=k,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",u(null))}_.request=s.getImage(this.map._requestManager.transformRequest(m,s.ResourceType.Tile),(function(S,k,R,O){if(delete _.request,_.aborted)_.state="unloaded",u(null);else if(S)_.state="errored",u(S);else if(k){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:R,expires:O});const U=s.window.ImageBitmap&&k instanceof s.window.ImageBitmap&&(wi==null&&(wi=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),wi),Y=1-(k.width-s.prevPowerOfTwo(k.width))/2;Y<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const J=U?k:s.exported.getImageData(k,Y),ae={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:J,encoding:this.encoding,padding:Y};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",ae,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(_){const u=_.canonical,m=Math.pow(2,u.z),y=(u.x-1+m)%m,S=u.x===0?_.wrap-1:_.wrap,k=(u.x+1+m)%m,R=u.x+1===m?_.wrap+1:_.wrap,O={};return O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,k,u.y).key]={backfilled:!1},u.y>0&&(O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,_.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,k,u.y-1).key]={backfilled:!1}),u.y+1<m&&(O[new s.OverscaledTileID(_.overscaledZ,S,u.z,y,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,_.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new s.OverscaledTileID(_.overscaledZ,R,u.z,k,u.y+1).key]={backfilled:!1}),O}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends s.Evented{constructor(_,u,m,y){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(y),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},u),this}getClusterChildren(_,u){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},u),this}getClusterLeaves(_,u,m,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:u,offset:m},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=s.extend({},this.workerOptions),u=this._data;typeof u=="string"?(_.request=this.map._requestManager.transformRequest(s.exported.resolveURL(u),s.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,((m,y)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new s.ErrorEvent(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(S.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",S)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(_,u){const m=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(m,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((y,S)=>(delete _.request,_.unloadVectorData(),_.aborted?u(null):y?u(y):(_.loadVectorData(S,this.map.painter,m==="reloadTile"),u(null)))),void 0,m==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ei{constructor(_,u,m,y){super(_,u,m,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const u of _.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,((u,m)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const u=this.video.seekable;_<u.start(0)||_>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,u=_.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(_,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ei,canvas:class extends ei{constructor(_,u,m,y){super(_,u,m,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((k=>typeof k!="number"))))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends s.Evented{constructor(_,u,m,y){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=u,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new dt(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:u,y:m,z:y}=_.canonical;return this._implementation.hasTile({x:u,y:m,z:y})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,u){const{x:m,y,z:S}=_.tileID.canonical,k=new s.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:m,y,z:S},{signal:k.signal})).then((function(R){return delete _.request,_.aborted?(_.state="unloaded",u(null)):R===void 0?(_.state="errored",u(null)):R===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",u(null)):(function(O){return O instanceof s.window.ImageData||O instanceof s.window.HTMLCanvasElement||O instanceof s.window.ImageBitmap||O instanceof s.window.HTMLImageElement})(R)?(this.loadTileData(_,R),_.state="loaded",void u(null)):(_.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((R=>{R.code!==20&&(_.state="errored",u(R))})),_.request.cancel=()=>k.abort()}loadTileData(_,u){sn.loadTileData(_,u,this._map.painter)}unloadTileData(_){sn.unloadTileData(_,this._map.painter)}unloadTile(_,u){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:m,y,z:S}=_.tileID.canonical;this._implementation.unloadTile({x:m,y,z:S})}u()}abortTile(_,u){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},li=function(_,u,m,y){const S=new Wn[u.type](_,u,m,y);if(S.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${S.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],S),S};function Zn(_,u){const m=s.identity([]);return s.scale(m,m,[.5*_.width,.5*-_.height,1]),s.translate(m,m,[1,-1,0]),s.multiply(m,m,_.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(m)}function Vi(_,u,m,y,S,k,R,O=!1){const U=_.tilesIn(y,R,O);U.sort(rs);const Y=[];for(const ae of U)Y.push({wrappedTileID:ae.tile.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(u,m,_._state,ae,S,k,Zn(_.transform,ae.tile.tileID),O)});const J=(function(ae){const pe={},Te={};for(const ke of ae){const Se=ke.queryResults,Ae=ke.wrappedTileID,ce=Te[Ae]=Te[Ae]||{};for(const xe in Se){const De=Se[xe],Re=ce[xe]=ce[xe]||{},Ge=pe[xe]=pe[xe]||[];for(const Ye of De)Re[Ye.featureIndex]||(Re[Ye.featureIndex]=!0,Ge.push(Ye))}}return pe})(Y);for(const ae in J)J[ae].forEach((pe=>{const Te=pe.feature,ke=Te.layer;ke&&ke.type!=="background"&&ke.type!=="sky"&&(Te.source=ke.source,ke["source-layer"]&&(Te.sourceLayer=ke["source-layer"]),Te.state=Te.id!==void 0?_.getFeatureState(ke["source-layer"],Te.id):{})}));return J}function gr(_,u){const m=_.getRenderableIds().map((k=>_.getTileByID(k))),y=[],S={};for(let k=0;k<m.length;k++){const R=m[k],O=R.tileID.canonical.key;S[O]||(S[O]=!0,R.querySourceFeatures(y,u))}return y}function rs(_,u){const m=_.tileID,y=u.tileID;return m.overscaledZ-y.overscaledZ||m.canonical.y-y.canonical.y||m.wrap-y.wrap||m.canonical.x-y.canonical.x}function Sr(){return Me.workerClass!=null?new Me.workerClass:new s.window.Worker(Me.workerUrl)}const Ho="mapboxgl_preloaded_worker_pool";class ss{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ss.workerCount;)this.workers.push(new Sr);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ho]}numActive(){return Object.keys(this.active).length}}let Vr;function Gr(){return Vr||(Vr=new ss),Vr}function Cs(_,u){const m={};for(const y in _)y!=="ref"&&(m[y]=_[y]);return s.refProperties.forEach((y=>{y in u&&(m[y]=u[y])})),m}function Ns(_){_=_.slice();const u=Object.create(null);for(let m=0;m<_.length;m++)u[_[m].id]=_[m];for(let m=0;m<_.length;m++)"ref"in _[m]&&(_[m]=Cs(_[m],u[_[m].ref]));return _}ss.workerCount=2;const Xn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ma(_,u,m){m.push({command:Xn.addSource,args:[_,u[_]]})}function ks(_,u,m){u.push({command:Xn.removeSource,args:[_]}),m[_]=!0}function Go(_,u,m,y){ks(_,m,y),ma(_,u,m)}function Xa(_,u,m){let y;for(y in _[m])if(_[m].hasOwnProperty(y)&&y!=="data"&&!p(_[m][y],u[m][y]))return!1;for(y in u[m])if(u[m].hasOwnProperty(y)&&y!=="data"&&!p(_[m][y],u[m][y]))return!1;return!0}function Co(_,u,m,y,S,k){let R;for(R in u=u||{},_=_||{})_.hasOwnProperty(R)&&(p(_[R],u[R])||m.push({command:k,args:[y,R,u[R],S]}));for(R in u)u.hasOwnProperty(R)&&!_.hasOwnProperty(R)&&(p(_[R],u[R])||m.push({command:k,args:[y,R,u[R],S]}))}function ko(_){return _.id}function Ya(_,u){return _[u.id]=u,_}class mc{constructor(u,m){this.reset(u,m)}reset(u,m){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=s.clamp(u,0,1);let m=1,y=this._distances[m];const S=u*this.paddedLength+this.padding;for(;y<S&&m<this._distances.length;)y=this._distances[++m];const k=m-1,R=this._distances[k],O=y-R,U=O>0?(S-R)/O:0;return this.points[k].mult(1-U).add(this.points[m].mult(U))}}class qo{constructor(u,m,y){const S=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(m/y);for(let R=0;R<this.xCellCount*this.yCellCount;R++)S.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=m,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,m,y,S,k){this._forEachCell(m,y,S,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(k)}insertCircle(u,m,y,S){this._forEachCell(m-S,y-S,m+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(m),this.circles.push(y),this.circles.push(S)}_insertBoxCell(u,m,y,S,k,R){this.boxCells[k].push(R)}_insertCircleCell(u,m,y,S,k,R){this.circleCells[k].push(R)}_query(u,m,y,S,k,R){if(y<0||u>this.width||S<0||m>this.height)return!k&&[];const O=[];if(u<=0&&m<=0&&this.width<=y&&this.height<=S){if(k)return!0;for(let U=0;U<this.boxKeys.length;U++)O.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const Y=this.circles[3*U],J=this.circles[3*U+1],ae=this.circles[3*U+2];O.push({key:this.circleKeys[U],x1:Y-ae,y1:J-ae,x2:Y+ae,y2:J+ae})}return R?O.filter(R):O}return this._forEachCell(u,m,y,S,this._queryCell,O,{hitTest:k,seenUids:{box:{},circle:{}}},R),k?O.length>0:O}_queryCircle(u,m,y,S,k){const R=u-y,O=u+y,U=m-y,Y=m+y;if(O<0||R>this.width||Y<0||U>this.height)return!S&&[];const J=[];return this._forEachCell(R,U,O,Y,this._queryCellCircle,J,{hitTest:S,circle:{x:u,y:m,radius:y},seenUids:{box:{},circle:{}}},k),S?J.length>0:J}query(u,m,y,S,k){return this._query(u,m,y,S,!1,k)}hitTest(u,m,y,S,k){return this._query(u,m,y,S,!0,k)}hitTestCircle(u,m,y,S){return this._queryCircle(u,m,y,!0,S)}_queryCell(u,m,y,S,k,R,O,U){const Y=O.seenUids,J=this.boxCells[k];if(J!==null){const pe=this.bboxes;for(const Te of J)if(!Y.box[Te]){Y.box[Te]=!0;const ke=4*Te;if(u<=pe[ke+2]&&m<=pe[ke+3]&&y>=pe[ke+0]&&S>=pe[ke+1]&&(!U||U(this.boxKeys[Te]))){if(O.hitTest)return R.push(!0),!0;R.push({key:this.boxKeys[Te],x1:pe[ke],y1:pe[ke+1],x2:pe[ke+2],y2:pe[ke+3]})}}}const ae=this.circleCells[k];if(ae!==null){const pe=this.circles;for(const Te of ae)if(!Y.circle[Te]){Y.circle[Te]=!0;const ke=3*Te;if(this._circleAndRectCollide(pe[ke],pe[ke+1],pe[ke+2],u,m,y,S)&&(!U||U(this.circleKeys[Te]))){if(O.hitTest)return R.push(!0),!0;{const Se=pe[ke],Ae=pe[ke+1],ce=pe[ke+2];R.push({key:this.circleKeys[Te],x1:Se-ce,y1:Ae-ce,x2:Se+ce,y2:Ae+ce})}}}}}_queryCellCircle(u,m,y,S,k,R,O,U){const Y=O.circle,J=O.seenUids,ae=this.boxCells[k];if(ae!==null){const Te=this.bboxes;for(const ke of ae)if(!J.box[ke]){J.box[ke]=!0;const Se=4*ke;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,Te[Se+0],Te[Se+1],Te[Se+2],Te[Se+3])&&(!U||U(this.boxKeys[ke])))return R.push(!0),!0}}const pe=this.circleCells[k];if(pe!==null){const Te=this.circles;for(const ke of pe)if(!J.circle[ke]){J.circle[ke]=!0;const Se=3*ke;if(this._circlesCollide(Te[Se],Te[Se+1],Te[Se+2],Y.x,Y.y,Y.radius)&&(!U||U(this.circleKeys[ke])))return R.push(!0),!0}}}_forEachCell(u,m,y,S,k,R,O,U){const Y=this._convertToXCellCoord(u),J=this._convertToYCellCoord(m),ae=this._convertToXCellCoord(y),pe=this._convertToYCellCoord(S);for(let Te=Y;Te<=ae;Te++)for(let ke=J;ke<=pe;ke++)if(k.call(this,u,m,y,S,this.xCellCount*ke+Te,R,O,U))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,m,y,S,k,R){const O=S-u,U=k-m,Y=y+R;return Y*Y>O*O+U*U}_circleAndRectCollide(u,m,y,S,k,R,O){const U=(R-S)/2,Y=Math.abs(u-(S+U));if(Y>U+y)return!1;const J=(O-k)/2,ae=Math.abs(m-(k+J));if(ae>J+y)return!1;if(Y<=U||ae<=J)return!0;const pe=Y-U,Te=ae-J;return pe*pe+Te*Te<=y*y}}const Io={unknown:0,flipRequired:1,flipNotRequired:2},Nl=Math.tan(85*Math.PI/180);function Ot(_,u,m,y,S,k,R){const O=s.create();if(m)if(k.name==="globe"){const U=s.calculateGlobeLabelMatrix(S,u);s.multiply(O,O,U)}else{const U=j([],R);O[0]=U[0],O[1]=U[1],O[4]=U[2],O[5]=U[3],y||s.rotateZ(O,O,S.angle)}else s.multiply(O,S.labelPlaneMatrix,_);return O}function pa(_,u,m,y,S,k,R){const O=Ot(_,u,m,y,S,k,R);return k.name==="globe"&&m||(O[2]=O[6]=O[10]=O[14]=0),O}function Wi(_,u,m,y,S,k,R){if(m){if(k.name==="globe"){const O=Ot(_,u,m,y,S,k,R);return s.invert(O,O),s.multiply(O,_,O),O}{const O=s.clone(_),U=s.identity([]);return U[0]=R[0],U[1]=R[1],U[4]=R[2],U[5]=R[3],s.multiply(O,O,U),y||s.rotateZ(O,O,-S.angle),O}}return S.glCoordMatrix}function Qi(_,u,m,y){const S=[_,u,m,1];m?s.transformMat4$1(S,S,y):ri(S,S,y);const k=S[3];return S[0]/=k,S[1]/=k,S[2]/=k,S}function $l(_,u){return Math.min(.5+_/u*.5,1.5)}function $s(_,u){const m=_[0]/_[3],y=_[1]/_[3];return m>=-u[0]&&m<=u[0]&&y>=-u[1]&&y<=u[1]}function pc(_,u,m,y,S,k,R,O,U,Y){const J=m.transform,ae=y?_.textSizeData:_.iconSizeData,pe=s.evaluateSizeForZoom(ae,m.transform.zoom),Te=J.projection.name==="globe",ke=[256/m.width*2+1,256/m.height*2+1],Se=y?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Se.clear();let Ae=null;Te&&(Ae=y?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const ce=_.lineVertexArray,xe=y?_.text.placedSymbolArray:_.icon.placedSymbolArray,De=m.transform.width/m.transform.height;let Re,Ge=!1;for(let Ye=0;Ye<xe.length;Ye++){const et=xe.get(Ye),{numGlyphs:ht,writingMode:lt}=et;if(lt!==s.WritingMode.vertical||Ge||Re===s.WritingMode.horizontal||(Ge=!0),Re=lt,(et.hidden||lt===s.WritingMode.vertical)&&!Ge){co(ht,Se);continue}Ge=!1;const xt=new s.Point(et.tileAnchorX,et.tileAnchorY);let{x:Xt,y:ft,z:Bt}=J.projection.projectTilePoint(xt.x,xt.y,Y.canonical);if(U){const[Kn,En,Vn]=U(xt);Xt+=Kn,ft+=En,Bt+=Vn}const Et=[Xt,ft,Bt,1];if(s.transformMat4$1(Et,Et,u),!$s(Et,ke)){co(ht,Se);continue}const Jt=$l(m.transform.cameraToCenterDistance,Et[3]),_t=s.evaluateSizeForFeature(ae,pe,et),At=R?_t/Jt:_t*Jt,qt=Qi(Xt,ft,Bt,S);if(qt[3]<=0){co(ht,Se);continue}let jt={};const Qt=R?null:U,Rn=mn(et,At,!1,O,u,S,k,_.glyphOffsetArray,ce,Se,Ae,qt,xt,jt,De,Qt,J.projection,Y,R);Ge=Rn.useVertical,Qt&&Rn.needsFlipping&&(jt={}),(Rn.notEnoughRoom||Ge||Rn.needsFlipping&&mn(et,At,!0,O,u,S,k,_.glyphOffsetArray,ce,Se,Ae,qt,xt,jt,De,Qt,J.projection,Y,R).notEnoughRoom)&&co(ht,Se)}y?(_.text.dynamicLayoutVertexBuffer.updateData(Se),Ae&&_.text.globeExtVertexBuffer.updateData(Ae)):(_.icon.dynamicLayoutVertexBuffer.updateData(Se),Ae&&_.icon.globeExtVertexBuffer.updateData(Ae))}function ir(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se){const{lineStartIndex:Ae,glyphStartIndex:ce,segment:xe}=O,De=ce+O.numGlyphs,Re=Ae+O.lineLength,Ge=u.getoffsetX(ce),Ye=u.getoffsetX(De-1),et=vr(_*Ge,m,y,S,k,R,xe,Ae,Re,U,Y,J,ae,pe,!0,Te,ke,Se);if(!et)return null;const ht=vr(_*Ye,m,y,S,k,R,xe,Ae,Re,U,Y,J,ae,pe,!0,Te,ke,Se);return ht?{first:et,last:ht}:null}function ga(_,u,m,y){return _===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(m)?{useVertical:!0}:_===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:u!==Io.unknown&&(function(S,k){return S===0||Math.abs(k/S)>Nl})(m,y)?u===Io.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function mn(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se,Ae,ce,xe){const De=u/24,Re=_.lineOffsetX*De,Ge=_.lineOffsetY*De,{lineStartIndex:Ye,glyphStartIndex:et,numGlyphs:ht,segment:lt,writingMode:xt,flipState:Xt}=_,ft=Ye+_.lineLength,Bt=Et=>{if(J){const[qt,jt,Qt]=Et.up,Rn=Y.length;s.updateGlobeVertexNormal(J,Rn+0,qt,jt,Qt),s.updateGlobeVertexNormal(J,Rn+1,qt,jt,Qt),s.updateGlobeVertexNormal(J,Rn+2,qt,jt,Qt),s.updateGlobeVertexNormal(J,Rn+3,qt,jt,Qt)}const[Jt,_t,At]=Et.point;s.addDynamicAttributes(Y,Jt,_t,At,Et.angle)};if(ht>1){const Et=ir(De,O,Re,Ge,m,ae,pe,_,U,k,Te,Se,!1,Ae,ce,xe);if(!Et)return{notEnoughRoom:!0};if(y&&!m){let[Jt,_t,At]=Et.first.point,[qt,jt,Qt]=Et.last.point;[Jt,_t]=Qi(Jt,_t,At,R),[qt,jt]=Qi(qt,jt,Qt,R);const Rn=ga(xt,Xt,(qt-Jt)*ke,jt-_t);if(_.flipState=Rn&&Rn.needsFlipping?Io.flipRequired:Io.flipNotRequired,Rn)return Rn}Bt(Et.first);for(let Jt=et+1;Jt<et+ht-1;Jt++){const _t=vr(De*O.getoffsetX(Jt),Re,Ge,m,ae,pe,lt,Ye,ft,U,k,Te,Se,!1,!1,Ae,ce,xe);if(!_t)return Y.length-=4*(Jt-et),{notEnoughRoom:!0};Bt(_t)}Bt(Et.last)}else{if(y&&!m){const Jt=Qi(pe.x,pe.y,0,S),_t=Ye+lt+1,At=new s.Point(U.getx(_t),U.gety(_t)),qt=Qi(At.x,At.y,0,S),jt=qt[3]>0?qt:Jn(pe,At,Jt,1,S,void 0,Ae,ce.canonical),Qt=ga(xt,Xt,(jt[0]-Jt[0])*ke,jt[1]-Jt[1]);if(_.flipState=Qt&&Qt.needsFlipping?Io.flipRequired:Io.flipNotRequired,Qt)return Qt}const Et=vr(De*O.getoffsetX(et),Re,Ge,m,ae,pe,lt,Ye,ft,U,k,Te,Se,!1,!1,Ae,ce,xe);if(!Et)return{notEnoughRoom:!0};Bt(Et)}return{}}function $n(_,u,m,y,S){const{x:k,y:R,z:O}=y.projectTilePoint(_.x,_.y,u);if(!S)return Qi(k,R,O,m);const[U,Y,J]=S(_);return Qi(k+U,R+Y,O+J,m)}function Jn(_,u,m,y,S,k,R,O){const U=$n(_.sub(u)._unit()._add(_),O,S,R,k);return s.sub(U,m,U),s.normalize(U,U),s.scaleAndAdd(U,m,U,y)}function vr(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se,Ae,ce){const xe=y?_-u:_+u;let De=xe>0?1:-1,Re=0;y&&(De*=-1,Re=Math.PI),De<0&&(Re+=Math.PI);let Ge=O+R+(De>0?0:1)|0,Ye=S,et=S,ht=0,lt=0;const xt=Math.abs(xe),Xt=[],ft=[];let Bt=k,Et=Bt;const Jt=()=>Jn(Et,Bt,et,xt-ht+1,J,pe,Se,Ae.canonical);for(;ht+lt<=xt;){if(Ge+=De,Ge<O||Ge>=U)return null;if(et=Ye,Et=Bt,Xt.push(et),Te&&ft.push(Et),Bt=new s.Point(Y.getx(Ge),Y.gety(Ge)),Ye=ae[Ge],!Ye){const Vn=$n(Bt,Ae.canonical,J,Se,pe);Ye=Vn[3]>0?ae[Ge]=Vn:Jt()}ht+=lt,lt=s.distance(et,Ye)}ke&&pe&&(ae[Ge]&&(Ye=Jt(),lt=s.distance(et,Ye)),ae[Ge]=Ye);const _t=(xt-ht)/lt,At=Bt.sub(Et)._mult(_t)._add(Et),qt=s.sub([],Ye,et),jt=s.scaleAndAdd([],et,qt,_t);let Qt=[0,0,1],Rn=qt[0],Kn=qt[1];if(ce&&(Qt=Se.upVector(Ae.canonical,At.x,At.y),Qt[0]!==0||Qt[1]!==0||Qt[2]!==1)){const Vn=[Qt[2],0,-Qt[0]],_i=s.cross([],Qt,Vn);s.normalize(Vn,Vn),s.normalize(_i,_i),Rn=s.dot(qt,Vn),Kn=s.dot(qt,_i)}if(m){const Vn=s.cross([],Qt,qt);s.normalize(Vn,Vn),s.scaleAndAdd(jt,jt,Vn,m*De)}const En=Re+Math.atan2(Kn,Rn);return Xt.push(jt),Te&&ft.push(At),{point:jt,angle:En,path:Xt,tilePath:ft,up:Qt}}function co(_,u){const m=u.length,y=m+4*_;u.resize(y),u.float32.fill(-1/0,4*m,4*y)}function ri(_,u,m){const y=u[0],S=u[1];return _[0]=m[0]*y+m[4]*S+m[12],_[1]=m[1]*y+m[5]*S+m[13],_[3]=m[3]*y+m[7]*S+m[15],_}const Lr=100;class Ko{constructor(u,m,y=new qo(u.width+200,u.height+200,25),S=new qo(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=S,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Lr,this.screenBottomBoundary=u.height+Lr,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=m}placeCollisionBox(u,m,y,S,k,R,O,U){let Y=y.projectedAnchorX,J=y.projectedAnchorY,ae=y.projectedAnchorZ;const pe=y.elevation,Te=y.tileID,ke=u.getProjection();if(pe&&Te){const[Ye,et,ht]=ke.upVector(Te.canonical,y.tileAnchorX,y.tileAnchorY),lt=ke.upVectorScale(Te.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=Ye*pe*lt,J+=et*pe*lt,ae+=ht*pe*lt}const Se=this.projectAndGetPerspectiveRatio(O,Y,J,ae,y.tileID,ke.name==="globe"||!!pe||this.transform.pitch>0,ke),Ae=R*Se.perspectiveRatio,ce=(y.x1*m+S.x-y.padding)*Ae+Se.point.x,xe=(y.y1*m+S.y-y.padding)*Ae+Se.point.y,De=(y.x2*m+S.x+y.padding)*Ae+Se.point.x,Re=(y.y2*m+S.y+y.padding)*Ae+Se.point.y,Ge=Se.perspectiveRatio<=.55||Se.occluded;return!this.isInsideGrid(ce,xe,De,Re)||!k&&this.grid.hitTest(ce,xe,De,Re,U)||Ge?{box:[],offscreen:!1,occluded:Se.occluded}:{box:[ce,xe,De,Re],offscreen:this.isOffscreen(ce,xe,De,Re),occluded:!1}}placeCollisionCircles(u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se){const Ae=[],ce=this.transform.elevation,xe=u.getProjection(),De=ce?ce.getAtTileOffsetFunc(Se,this.transform.center.lat,this.transform.worldSize,xe):null,Re=new s.Point(y.tileAnchorX,y.tileAnchorY);let{x:Ge,y:Ye,z:et}=xe.projectTilePoint(Re.x,Re.y,Se.canonical);if(De){const[At,qt,jt]=De(Re);Ge+=At,Ye+=qt,et+=jt}const ht=xe.name==="globe",lt=this.projectAndGetPerspectiveRatio(O,Ge,Ye,et,Se,ht||!!ce||this.transform.pitch>0,xe),{perspectiveRatio:xt}=lt,Xt=(ae?R/xt:R*xt)/s.ONE_EM,ft=Qi(Ge,Ye,et,U),Bt=lt.signedDistanceFromCamera>0?ir(Xt,k,y.lineOffsetX*Xt,y.lineOffsetY*Xt,!1,ft,Re,y,S,U,{},ce&&!ae?De:null,ae&&!!ce,xe,Se,ae):null;let Et=!1,Jt=!1,_t=!0;if(Bt&&!lt.occluded){const At=.5*Te*xt+ke,qt=new s.Point(-100,-100),jt=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),Qt=new mc,{first:Rn,last:Kn}=Bt,En=Rn.path.length;let Vn=[];for(let Mn=En-1;Mn>=1;Mn--)Vn.push(Rn.path[Mn]);for(let Mn=1;Mn<Kn.path.length;Mn++)Vn.push(Kn.path[Mn]);const _i=2.5*At;Y&&(Vn=Vn.map((([Mn,Bi,qi],er)=>(De&&!ht&&(qi=De(er<En-1?Rn.tilePath[En-1-er]:Kn.tilePath[er-En+2])[2]),Qi(Mn,Bi,qi,Y)))),Vn.some((Mn=>Mn[3]<=0))&&(Vn=[]));let vi=[];if(Vn.length>0){let Mn=1/0,Bi=-1/0,qi=1/0,er=-1/0;for(const Ki of Vn)Mn=Math.min(Mn,Ki[0]),qi=Math.min(qi,Ki[1]),Bi=Math.max(Bi,Ki[0]),er=Math.max(er,Ki[1]);Bi>=qt.x&&Mn<=jt.x&&er>=qt.y&&qi<=jt.y&&(vi=[Vn.map((Ki=>new s.Point(Ki[0],Ki[1])))],(Mn<qt.x||Bi>jt.x||qi<qt.y||er>jt.y)&&(vi=s.clipLine(vi,qt.x,qt.y,jt.x,jt.y)))}for(const Mn of vi){Qt.reset(Mn,.25*At);let Bi=0;Bi=Qt.length<=.5*At?1:Math.ceil(Qt.paddedLength/_i)+1;for(let qi=0;qi<Bi;qi++){const er=qi/Math.max(Bi-1,1),Ki=Qt.lerp(er),Ws=Ki.x+Lr,Ms=Ki.y+Lr;Ae.push(Ws,Ms,At,0);const Sa=Ws-At,Js=Ms-At,sr=Ws+At,Xi=Ms+At;if(_t=_t&&this.isOffscreen(Sa,Js,sr,Xi),Jt=Jt||this.isInsideGrid(Sa,Js,sr,Xi),!m&&this.grid.hitTestCircle(Ws,Ms,At,pe)&&(Et=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Et,occluded:!1}}}}return{circles:!J&&Et||!Jt?[]:Ae,offscreen:_t,collisionDetected:Et,occluded:lt.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let y=1/0,S=1/0,k=-1/0,R=-1/0;for(const J of u){const ae=new s.Point(J.x+Lr,J.y+Lr);y=Math.min(y,ae.x),S=Math.min(S,ae.y),k=Math.max(k,ae.x),R=Math.max(R,ae.y),m.push(ae)}const O=this.grid.query(y,S,k,R).concat(this.ignoredGrid.query(y,S,k,R)),U={},Y={};for(const J of O){const ae=J.key;if(U[ae.bucketInstanceId]===void 0&&(U[ae.bucketInstanceId]={}),U[ae.bucketInstanceId][ae.featureIndex])continue;const pe=[new s.Point(J.x1,J.y1),new s.Point(J.x2,J.y1),new s.Point(J.x2,J.y2),new s.Point(J.x1,J.y2)];s.polygonIntersectsPolygon(m,pe)&&(U[ae.bucketInstanceId][ae.featureIndex]=!0,Y[ae.bucketInstanceId]===void 0&&(Y[ae.bucketInstanceId]=[]),Y[ae.bucketInstanceId].push(ae.featureIndex))}return Y}insertCollisionBox(u,m,y,S,k){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:S,collisionGroupID:k},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,m,y,S,k){const R=m?this.ignoredGrid:this.grid,O={bucketInstanceId:y,featureIndex:S,collisionGroupID:k};for(let U=0;U<u.length;U+=4)R.insertCircle(O,u[U],u[U+1],u[U+2])}projectAndGetPerspectiveRatio(u,m,y,S,k,R,O){const U=[m,y,S,1];let Y=!1;S||this.transform.pitch>0?(s.transformMat4$1(U,U,u),this.fogState&&k&&O.name!=="globe"&&(Y=(function(pe,Te,ke,Se,Ae,ce){const xe=ce.calculateFogTileMatrix(Ae),De=[Te,ke,Se];return s.transformMat4(De,De,xe),Ke(pe,De,ce.pitch,ce._fov)})(this.fogState,m,y,S,k.toUnwrapped(),this.transform)>.9)):ri(U,U,u);const J=U[3];return{point:new s.Point((U[0]/J+1)/2*this.transform.width+Lr,(-U[1]/J+1)/2*this.transform.height+Lr),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/J*.5,1.5),signedDistanceFromCamera:J,occluded:R&&U[2]>J||Y}}isOffscreen(u,m,y,S){return y<Lr||u>=this.screenRightBoundary||S<Lr||m>this.screenBottomBoundary}isInsideGrid(u,m,y,S){return y>=0&&u<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const u=s.identity([]);return s.translate(u,u,[-100,-100,0]),u}}function Ys(_,u,m){const y=u.createTileMatrix(_,_.worldSize,m.toUnwrapped());return s.multiply(new Float32Array(16),_.projMatrix,y)}function Ar(_,u,m){if(u.projection.name===m.projection.name)return _.projMatrix;const y=m.clone();return y.setProjection(u.projection),Ys(y,u.getProjection(),_)}function Hi(_,u,m){return u.name===m.projection.name?_.projMatrix:Ys(m,u,_)}class xu{constructor(u,m,y,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?m:-m))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Us{constructor(u,m,y,S,k,R=!1){this.text=new xu(u?u.text:null,m,y,k),this.icon=new xu(u?u.icon:null,m,S,k),this.clipped=R}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dl{constructor(u,m,y,S=!1){this.text=u,this.icon=m,this.skipFade=y,this.clipped=S}}class Ul{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Is{constructor(u,m,y,S,k){this.bucketInstanceId=u,this.featureIndex=m,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=k}}class Fh{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const m=++this.maxGroupID;this.collisionGroups[u]={ID:m,predicate:y=>y.collisionGroupID===m}}return this.collisionGroups[u]}}function Ao(_,u,m,y,S){const{horizontalAlign:k,verticalAlign:R}=s.getAnchorAlignment(_),O=-(k-.5)*u,U=-(R-.5)*m,Y=s.evaluateVariableOffset(_,y);return new s.Point(O+Y[0]*S,U+Y[1]*S)}function hl(_,u,m,y,S){const k=new s.Point(_,u);return m&&k._rotate(y?S:-S),k}class Po{constructor(u,m,y,S,k){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new Ko(this.transform,k),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Fh(y),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,m,y,S){const k=y.getBucket(m),R=y.latestFeatureIndex;if(!k||!R||m.id!==k.layerIds[0])return;const O=k.layers[0].layout,U=y.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),J=y.tileSize/s.EXTENT,ae=y.tileID.toUnwrapped();this.transform.setProjection(k.projection);const pe=(Te=y.tileID,ke=k.getProjection(),Se=this.transform,ke.name===this.projection?Se.calculateProjMatrix(Te.toUnwrapped()):Ys(Se,ke,Te));var Te,ke,Se;const Ae=O.get("text-pitch-alignment")==="map",ce=O.get("text-rotation-alignment")==="map";m.compileFilter();const xe=m.dynamicFilter(),De=m.dynamicFilterNeedsFeature(),Re=this.transform.calculatePixelsToTileUnitsMatrix(y),Ge=pa(pe,y.tileID.canonical,Ae,ce,this.transform,k.getProjection(),Re);let Ye=null;if(Ae){const lt=Wi(pe,y.tileID.canonical,Ae,ce,this.transform,k.getProjection(),Re);Ye=s.multiply([],this.transform.labelPlaneMatrix,lt)}let et=null;xe&&y.latestFeatureIndex&&(et={unwrappedTileID:ae,dynamicFilter:xe,dynamicFilterNeedsFeature:De,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[k.bucketInstanceId]=new Is(k.bucketInstanceId,R,k.sourceLayerIndex,k.index,y.tileID);const ht={bucket:k,layout:O,posMatrix:pe,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Ye,clippingData:et,scale:Y,textPixelRatio:J,holdingForFade:y.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(k.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(S)for(const lt of k.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Xt,symbolInstanceEnd:ft}=lt;u.push({sortKey:xt,symbolInstanceStart:Xt,symbolInstanceEnd:ft,parameters:ht})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:ht})}attemptAnchorPlacement(u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se,Ae,ce,xe){const{textOffset0:De,textOffset1:Re,crossTileID:Ge}=pe,Ye=[De,Re],et=Ao(u,y,S,Ye,k),ht=this.collisionIndex.placeCollisionBox(ke,k,m,hl(et.x,et.y,R,O,this.transform.angle),ae,U,Y,J.predicate);if(Ae){const lt=ke.getSymbolInstanceIconSize(xe,this.transform.zoom,pe.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ke,lt,Ae,hl(et.x,et.y,R,O,this.transform.angle),ae,U,Y,J.predicate).box.length===0)return}if(ht.box.length>0){let lt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ge]&&this.prevPlacement.placements[Ge]&&this.prevPlacement.placements[Ge].text&&(lt=this.prevPlacement.variableOffsets[Ge].anchor),this.variableOffsets[Ge]={textOffset:Ye,width:y,height:S,anchor:u,textScale:k,prevAnchor:lt},this.markUsedJustification(ke,u,pe,Se),ke.allowVerticalPlacement&&(this.markUsedOrientation(ke,Se,pe),this.placedOrientations[Ge]=Se),{shift:et,placedGlyphBoxes:ht}}}placeLayerBucketPart(u,m,y,S){const{bucket:k,layout:R,posMatrix:O,textLabelPlaneMatrix:U,labelToScreenMatrix:Y,clippingData:J,textPixelRatio:ae,holdingForFade:pe,collisionBoxArray:Te,partiallyEvaluatedTextSize:ke,partiallyEvaluatedIconSize:Se,collisionGroup:Ae}=u.parameters,ce=R.get("text-optional"),xe=R.get("icon-optional"),De=R.get("text-allow-overlap"),Re=R.get("icon-allow-overlap"),Ge=R.get("text-rotation-alignment")==="map",Ye=R.get("text-pitch-alignment")==="map",et=R.get("icon-text-fit")!=="none",ht=R.get("symbol-z-order")==="viewport-y";this.transform.setProjection(k.projection);let lt=De&&(Re||!k.hasIconData()||xe),xt=Re&&(De||!k.hasTextData()||ce);!k.collisionArrays&&Te&&k.deserializeCollisionBoxes(Te),y&&S&&k.updateCollisionDebugBuffers(this.transform.zoom,Te);const Xt=(ft,Bt,Et)=>{const{crossTileID:Jt,numVerticalGlyphVertices:_t}=ft;if(J){const sr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Xi=null;if(J.dynamicFilterNeedsFeature){const Mi=this.retainedQueryData[k.bucketInstanceId];Xi=J.featureIndex.loadFeature({featureIndex:ft.featureIndex,bucketIndex:Mi.bucketIndex,sourceLayerIndex:Mi.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,J.dynamicFilter)(sr,Xi,this.retainedQueryData[k.bucketInstanceId].tileID.canonical,new s.Point(ft.tileAnchorX,ft.tileAnchorY),this.transform.calculateDistanceTileData(J.unwrappedTileID)))return this.placements[Jt]=new dl(!1,!1,!1,!0),void m.add(Jt)}if(m.has(Jt))return;if(pe)return void(this.placements[Jt]=new dl(!1,!1,!1));let At=!1,qt=!1,jt=!0,Qt=!1,Rn=!1,Kn=null,En={box:null,offscreen:null,occluded:null},Vn={box:null},_i=null,vi=null,Mn=null,Bi=0,qi=0,er=0;Et.textFeatureIndex?Bi=Et.textFeatureIndex:ft.useRuntimeCollisionCircles&&(Bi=ft.featureIndex),Et.verticalTextFeatureIndex&&(qi=Et.verticalTextFeatureIndex);const Ki=sr=>{sr.tileID=this.retainedQueryData[k.bucketInstanceId].tileID;const Xi=this.transform.elevation;(Xi||sr.elevation)&&(sr.elevation=Xi?Xi.getAtTileOffset(sr.tileID,sr.tileAnchorX,sr.tileAnchorY):0)},Ws=Et.textBox;if(Ws){Ki(Ws);const sr=Mi=>{let Fr=s.WritingMode.horizontal;if(k.allowVerticalPlacement&&!Mi&&this.prevPlacement){const Qs=this.prevPlacement.placedOrientations[Jt];Qs&&(this.placedOrientations[Jt]=Qs,Fr=Qs,this.markUsedOrientation(k,Fr,ft))}return Fr},Xi=(Mi,Fr)=>{if(k.allowVerticalPlacement&&_t>0&&Et.verticalTextBox){for(const Qs of k.writingModes)if(Qs===s.WritingMode.vertical?(En=Fr(),Vn=En):En=Mi(),En&&En.box&&En.box.length)break}else En=Mi()};if(R.get("text-variable-anchor")){let Mi=R.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Jt]){const lr=this.prevPlacement.variableOffsets[Jt];Mi.indexOf(lr.anchor)>0&&(Mi=Mi.filter((fo=>fo!==lr.anchor)),Mi.unshift(lr.anchor))}const Fr=(lr,fo,Fd)=>{const Qc=k.getSymbolInstanceTextSize(ke,ft,this.transform.zoom,Bt),zd=(lr.x2-lr.x1)*Qc+2*lr.padding,rl=(lr.y2-lr.y1)*Qc+2*lr.padding,Kl=et&&!Re?fo:null;Kl&&Ki(Kl);let Nd={box:[],offscreen:!1,occluded:!1};const Ng=De?2*Mi.length:Mi.length;for(let Um=0;Um<Ng;++Um){const W_=this.attemptAnchorPlacement(Mi[Um%Mi.length],lr,zd,rl,Qc,Ge,Ye,ae,O,Ae,Um>=Mi.length,ft,Bt,k,Fd,Kl,ke,Se);if(W_&&(Nd=W_.placedGlyphBoxes,Nd&&Nd.box&&Nd.box.length)){At=!0,Kn=W_.shift;break}}return Nd};Xi((()=>Fr(Ws,Et.iconBox,s.WritingMode.horizontal)),(()=>{const lr=Et.verticalTextBox;return lr&&Ki(lr),k.allowVerticalPlacement&&!(En&&En.box&&En.box.length)&&_t>0&&lr?Fr(lr,Et.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),En&&(At=En.box,jt=En.offscreen,Qt=En.occluded);const Qs=sr(!(!En||!En.box));if(!At&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Jt];lr&&(this.variableOffsets[Jt]=lr,this.markUsedJustification(k,lr.anchor,ft,Qs))}}else{const Mi=(Fr,Qs)=>{const lr=k.getSymbolInstanceTextSize(ke,ft,this.transform.zoom,Bt),fo=this.collisionIndex.placeCollisionBox(k,lr,Fr,new s.Point(0,0),De,ae,O,Ae.predicate);return fo&&fo.box&&fo.box.length&&(this.markUsedOrientation(k,Qs,ft),this.placedOrientations[Jt]=Qs),fo};Xi((()=>Mi(Ws,s.WritingMode.horizontal)),(()=>{const Fr=Et.verticalTextBox;return k.allowVerticalPlacement&&_t>0&&Fr?(Ki(Fr),Mi(Fr,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),sr(!!(En&&En.box&&En.box.length))}}if(_i=En,At=_i&&_i.box&&_i.box.length>0,jt=_i&&_i.offscreen,Qt=_i&&_i.occluded,ft.useRuntimeCollisionCircles){const sr=k.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex>=0?ft.centerJustifiedTextSymbolIndex:ft.verticalPlacedTextSymbolIndex),Xi=s.evaluateSizeForFeature(k.textSizeData,ke,sr),Mi=R.get("text-padding");vi=this.collisionIndex.placeCollisionCircles(k,De,sr,k.lineVertexArray,k.glyphOffsetArray,Xi,O,U,Y,y,Ye,Ae.predicate,ft.collisionCircleDiameter*Xi/s.ONE_EM,Mi,this.retainedQueryData[k.bucketInstanceId].tileID),At=De||vi.circles.length>0&&!vi.collisionDetected,jt=jt&&vi.offscreen,Qt=vi.occluded}if(Et.iconFeatureIndex&&(er=Et.iconFeatureIndex),Et.iconBox){const sr=Xi=>{Ki(Xi);const Mi=et&&Kn?hl(Kn.x,Kn.y,Ge,Ye,this.transform.angle):new s.Point(0,0),Fr=k.getSymbolInstanceIconSize(Se,this.transform.zoom,ft.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(k,Fr,Xi,Mi,Re,ae,O,Ae.predicate)};Vn&&Vn.box&&Vn.box.length&&Et.verticalIconBox?(Mn=sr(Et.verticalIconBox),qt=Mn.box.length>0):(Mn=sr(Et.iconBox),qt=Mn.box.length>0),jt=jt&&Mn.offscreen,Rn=Mn.occluded}const Ms=ce||ft.numHorizontalGlyphVertices===0&&_t===0,Sa=xe||ft.numIconVertices===0;if(Ms||Sa?Sa?Ms||(qt=qt&&At):At=qt&&At:qt=At=qt&&At,At&&_i&&_i.box&&this.collisionIndex.insertCollisionBox(_i.box,R.get("text-ignore-placement"),k.bucketInstanceId,Vn&&Vn.box&&qi?qi:Bi,Ae.ID),qt&&Mn&&this.collisionIndex.insertCollisionBox(Mn.box,R.get("icon-ignore-placement"),k.bucketInstanceId,er,Ae.ID),vi&&(At&&this.collisionIndex.insertCollisionCircles(vi.circles,R.get("text-ignore-placement"),k.bucketInstanceId,Bi,Ae.ID),y)){const sr=k.bucketInstanceId;let Xi=this.collisionCircleArrays[sr];Xi===void 0&&(Xi=this.collisionCircleArrays[sr]=new Ul);for(let Mi=0;Mi<vi.circles.length;Mi+=4)Xi.circles.push(vi.circles[Mi+0]),Xi.circles.push(vi.circles[Mi+1]),Xi.circles.push(vi.circles[Mi+2]),Xi.circles.push(vi.collisionDetected?1:0)}const Js=k.projection.name!=="globe";lt=lt&&(Js||!Qt),xt=xt&&(Js||!Rn),this.placements[Jt]=new dl(At||lt,qt||xt,jt||k.justReloaded),m.add(Jt)};if(ht){const ft=k.getSortedSymbolIndexes(this.transform.angle);for(let Bt=ft.length-1;Bt>=0;--Bt){const Et=ft[Bt];Xt(k.symbolInstances.get(Et),Et,k.collisionArrays[Et])}}else for(let ft=u.symbolInstanceStart;ft<u.symbolInstanceEnd;ft++)Xt(k.symbolInstances.get(ft),ft,k.collisionArrays[ft]);if(y&&k.bucketInstanceId in this.collisionCircleArrays){const ft=this.collisionCircleArrays[k.bucketInstanceId];s.invert(ft.invProjMatrix,O),ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(u,m,y,S){const{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U,crossTileID:Y}=y,J=s.getAnchorJustification(m),ae=S===s.WritingMode.vertical?U:J==="left"?k:J==="center"?R:J==="right"?O:-1;k>=0&&(u.text.placedSymbolArray.get(k).crossTileID=ae>=0&&k!==ae?0:Y),R>=0&&(u.text.placedSymbolArray.get(R).crossTileID=ae>=0&&R!==ae?0:Y),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=ae>=0&&O!==ae?0:Y),U>=0&&(u.text.placedSymbolArray.get(U).crossTileID=ae>=0&&U!==ae?0:Y)}markUsedOrientation(u,m,y){const S=m===s.WritingMode.horizontal||m===s.WritingMode.horizontalOnly?m:0,k=m===s.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:R,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:Y}=y,J=u.text.placedSymbolArray;R>=0&&(J.get(R).placedOrientation=S),O>=0&&(J.get(O).placedOrientation=S),U>=0&&(J.get(U).placedOrientation=S),Y>=0&&(J.get(Y).placedOrientation=k)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let y=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(u):1,k=m?m.opacities:{},R=m?m.variableOffsets:{},O=m?m.placedOrientations:{};for(const U in this.placements){const Y=this.placements[U],J=k[U];J?(this.opacities[U]=new Us(J,S,Y.text,Y.icon,null,Y.clipped),y=y||Y.text!==J.text.placed||Y.icon!==J.icon.placed):(this.opacities[U]=new Us(null,S,Y.text,Y.icon,Y.skipFade,Y.clipped),y=y||Y.text||Y.icon)}for(const U in k){const Y=k[U];if(!this.opacities[U]){const J=new Us(Y,S,!1,!1);J.isHidden()||(this.opacities[U]=J,y=y||Y.text.placed||Y.icon.placed)}}for(const U in R)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=R[U]);for(const U in O)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=O[U]);y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:u)}updateLayerOpacities(u,m){const y=new Set;for(const S of m){const k=S.getBucket(u);k&&S.latestFeatureIndex&&u.id===k.layerIds[0]&&this.updateBucketOpacities(k,y,S.collisionBoxArray)}}updateBucketOpacities(u,m,y){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,k=!!u.layers[0].dynamicFilter(),R=new Us(null,0,!1,!1,!0),O=S.get("text-allow-overlap"),U=S.get("icon-allow-overlap"),Y=S.get("text-variable-anchor"),J=S.get("text-rotation-alignment")==="map",ae=S.get("text-pitch-alignment")==="map",pe=S.get("icon-text-fit")!=="none",Te=new Us(null,0,O&&(U||!u.hasIconData()||S.get("icon-optional")),U&&(O||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const ke=(Ae,ce,xe)=>{for(let De=0;De<ce/4;De++)Ae.opacityVertexArray.emplaceBack(xe)};let Se=0;for(let Ae=0;Ae<u.symbolInstances.length;Ae++){const ce=u.symbolInstances.get(Ae),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:De,crossTileID:Re,numIconVertices:Ge}=ce,Ye=m.has(Re);let et=this.opacities[Re];Ye?et=R:et||(et=Te,this.opacities[Re]=et),m.add(Re);const ht=xe>0||De>0,lt=Ge>0,xt=this.placedOrientations[Re],Xt=xt===s.WritingMode.vertical,ft=xt===s.WritingMode.horizontal||xt===s.WritingMode.horizontalOnly;if(!ht&&!lt||et.isHidden()||Se++,ht){const Bt=rr(et.text);ke(u.text,xe,Xt?_r:Bt),ke(u.text,De,ft?_r:Bt);const Et=et.text.isHidden(),{leftJustifiedTextSymbolIndex:Jt,centerJustifiedTextSymbolIndex:_t,rightJustifiedTextSymbolIndex:At,verticalPlacedTextSymbolIndex:qt}=ce,jt=u.text.placedSymbolArray,Qt=Et||Xt?1:0;Jt>=0&&(jt.get(Jt).hidden=Qt),_t>=0&&(jt.get(_t).hidden=Qt),At>=0&&(jt.get(At).hidden=Qt),qt>=0&&(jt.get(qt).hidden=Et||ft?1:0);const Rn=this.variableOffsets[Re];Rn&&this.markUsedJustification(u,Rn.anchor,ce,xt);const Kn=this.placedOrientations[Re];Kn&&(this.markUsedJustification(u,"left",ce,Kn),this.markUsedOrientation(u,Kn,ce))}if(lt){const Bt=rr(et.icon),{placedIconSymbolIndex:Et,verticalPlacedIconSymbolIndex:Jt}=ce,_t=u.icon.placedSymbolArray,At=et.icon.isHidden()?1:0;Et>=0&&(ke(u.icon,Ge,Xt?_r:Bt),_t.get(Et).hidden=At),Jt>=0&&(ke(u.icon,ce.numVerticalIconVertices,ft?_r:Bt),_t.get(Jt).hidden=At)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Bt=u.collisionArrays[Ae];if(Bt){let Et=new s.Point(0,0),Jt=!0;if(Bt.textBox||Bt.verticalTextBox){if(Y){const At=this.variableOffsets[Re];At?(Et=Ao(At.anchor,At.width,At.height,At.textOffset,At.textScale),J&&Et._rotate(ae?this.transform.angle:-this.transform.angle)):Jt=!1}k&&(Jt=!et.clipped),Bt.textBox&&va(u.textCollisionBox.collisionVertexArray,et.text.placed,!Jt||Xt,Et.x,Et.y),Bt.verticalTextBox&&va(u.textCollisionBox.collisionVertexArray,et.text.placed,!Jt||ft,Et.x,Et.y)}const _t=Jt&&!!(!ft&&Bt.verticalIconBox);Bt.iconBox&&va(u.iconCollisionBox.collisionVertexArray,et.icon.placed,_t,pe?Et.x:0,pe?Et.y:0),Bt.verticalIconBox&&va(u.iconCollisionBox.collisionVertexArray,et.icon.placed,!_t,pe?Et.x:0,pe?Et.y:0)}}}if(u.fullyClipped=Se===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Ae.invProjMatrix,u.placementViewportMatrix=Ae.viewportMatrix,u.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,m){const y=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function va(_,u,m,y,S){_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0),_.emplaceBack(u?1:0,m?1:0,y||0,S||0)}const os=Math.pow(2,25),Gi=Math.pow(2,24),jc=Math.pow(2,17),fl=Math.pow(2,16),Zr=Math.pow(2,9),as=Math.pow(2,8),wu=Math.pow(2,1);function rr(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const u=_.placed?1:0,m=Math.floor(127*_.opacity);return m*os+u*Gi+m*jc+u*fl+m*Zr+u*as+m*wu+u}const _r=0;class ml{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(u,m,y,S,k){const R=this._bucketParts;for(;this._currentTileIndex<u.length;)if(m.getBucketParts(R,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,R.sort(((O,U)=>O.sortKey-U.sortKey)));this._currentPartIndex<R.length;){const O=R[this._currentPartIndex];if(m.placeLayerBucketPart(O,this._seenCrossTileIDs,y,O.symbolInstanceStart===0),this._currentPartIndex++,k())return!0}return!1}}class gc{constructor(u,m,y,S,k,R,O,U){this.placement=new Po(u,k,R,O,U),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(u,m,y){const S=s.exported.now(),k=()=>{const R=s.exported.now()-S;return!this._forceFullPlacement&&R>2};for(;this._currentPlacementIndex>=0;){const R=m[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(R.type==="symbol"&&(!R.minzoom||R.minzoom<=O)&&(!R.maxzoom||R.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new ml(R)),this._inProgressLayer.continuePlacement(y[R.source],this.placement,this._showCollisionBoxes,R,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const pl=512/s.EXTENT/2;class Br{constructor(u,m,y){this.tileID=u,this.bucketInstanceId=y,this.index=new s.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=u.canonical.x*s.EXTENT,k=u.canonical.y*s.EXTENT;for(let R=0;R<m.length;R++){const{key:O,crossTileID:U,tileAnchorX:Y,tileAnchorY:J}=m.get(R),ae=Math.floor((S+Y)*pl),pe=Math.floor((k+J)*pl);this.index.add(ae,pe),this.keys.push(O),this.crossTileIDs.push(U)}this.index.finish()}findMatches(u,m,y){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),k=pl/Math.pow(2,m.canonical.z-this.tileID.canonical.z),R=m.canonical.x*s.EXTENT,O=m.canonical.y*s.EXTENT;for(let U=0;U<u.length;U++){const Y=u.get(U);if(Y.crossTileID)continue;const{key:J,tileAnchorX:ae,tileAnchorY:pe}=Y,Te=Math.floor((R+ae)*k),ke=Math.floor((O+pe)*k),Se=this.index.range(Te-S,ke-S,Te+S,ke+S);for(const Ae of Se){const ce=this.crossTileIDs[Ae];if(this.keys[Ae]===J&&!y.has(ce)){y.add(ce),Y.crossTileID=ce;break}}}}}class vc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const m=Math.round((u-this.lng)/360);if(m!==0)for(const y in this.indexes){const S=this.indexes[y],k={};for(const R in S){const O=S[R];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+m),k[O.tileID.key]=O}this.indexes[y]=k}this.lng=u}addBucket(u,m,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let k=0;k<m.symbolInstances.length;k++)m.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]=new Set);const S=this.usedCrossTileIDs[u.overscaledZ];for(const k in this.indexes){const R=this.indexes[k];if(Number(k)>u.overscaledZ)for(const O in R){const U=R[O];U.tileID.isChildOf(u)&&U.findMatches(m.symbolInstances,u,S)}else{const O=R[u.scaledTo(Number(k)).key];O&&O.findMatches(m.symbolInstances,u,S)}}for(let k=0;k<m.symbolInstances.length;k++){const R=m.symbolInstances.get(k);R.crossTileID||(R.crossTileID=y.generate(),S.add(R.crossTileID))}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Br(u,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(u,m){for(const y of m.crossTileIDs)this.usedCrossTileIDs[u].delete(y)}removeStaleBuckets(u){let m=!1;for(const y in this.indexes){const S=this.indexes[y];for(const k in S)u[S[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[k]),delete S[k],m=!0)}return m}}class Mo{constructor(){this.layerIndexes={},this.crossTileIDs=new vc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,m,y,S){let k=this.layerIndexes[u.id];k===void 0&&(k=this.layerIndexes[u.id]=new Xo);let R=!1;const O={};S.name!=="globe"&&k.handleWrapJump(y);for(const U of m){const Y=U.getBucket(u);Y&&u.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(U.tileID,Y,this.crossTileIDs)&&(R=!0),O[Y.bucketInstanceId]=!0)}return k.removeStaleBuckets(O)&&(R=!0),R}pruneUnusedLayers(u){const m={};u.forEach((y=>{m[y]=!0}));for(const y in this.layerIndexes)m[y]||delete this.layerIndexes[y]}}const _a=(_,u)=>s.emitValidationErrors(_,u&&u.filter((m=>m.identifier!=="source.canvas"))),ya=s.pick(Xn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),vd=s.pick(Xn,["setCenter","setZoom","setBearing","setPitch"]),Za={version:8,layers:[],sources:{}},Yo={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Do extends s.Evented{constructor(u,m={}){super(),this.map=u,this.dispatcher=new Ee(Gr(),this),this.imageManager=new Z,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(u._requestManager,m.localFontFamily?s.LocalGlyphMode.all:m.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new Mo,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=Do.registerForPluginStateChange((S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((k,R)=>{if(s.triggerPluginCompletionEvent(k),R&&R.every((O=>O)))for(const O in y._sourceCaches){const U=y._sourceCaches[O],Y=U.getSource().type;Y!=="vector"&&Y!=="geojson"||U.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const k=this.getSource(S.sourceId);if(k&&k.vectorLayerIds)for(const R in this._layers){const O=this._layers[R];O.source===k.id&&this._validateLayer(O)}}))}loadURL(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof m.validate=="boolean"?m.validate:!s.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,m.accessToken);const S=this.map._requestManager.transformRequest(u,s.ResourceType.Style);this._request=s.getJSON(S,((k,R)=>{this._request=null,k?this.fire(new s.ErrorEvent(k)):R&&this._load(R,y)}))}loadJSON(u,m={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame((()=>{this._request=null,this._load(u,m.validate!==!1)}))}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Za,!1)}_updateLayerCount(u,m){const y=m?1:-1;u.is3D()&&(this._num3DLayers+=y),u.type==="circle"&&(this._numCircleLayers+=y),u.type==="symbol"&&(this._numSymbolLayers+=y)}_load(u,m){if(m&&_a(this,s.validateStyle(u)))return;this._loaded=!0,this.stylesheet=s.clone$1(u),this._updateMapProjection();for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const y=Ns(this.stylesheet.layers);this._order=y.map((S=>S.id)),this._layers={},this._serializedLayers={};for(const S of y){const k=s.createStyleLayer(S);k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new be(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=(function(m,y,S){let k,R,O;const U=s.exported.devicePixelRatio>1?"@2x":"";let Y=s.getJSON(y.transformRequest(y.normalizeSpriteURL(m,U,".json"),s.ResourceType.SpriteJSON),((pe,Te)=>{Y=null,O||(O=pe,k=Te,ae())})),J=s.getImage(y.transformRequest(y.normalizeSpriteURL(m,U,".png"),s.ResourceType.SpriteImage),((pe,Te)=>{J=null,O||(O=pe,R=Te,ae())}));function ae(){if(O)S(O);else if(k&&R){const pe=s.exported.getImageData(R),Te={};for(const ke in k){const{width:Se,height:Ae,x:ce,y:xe,sdf:De,pixelRatio:Re,stretchX:Ge,stretchY:Ye,content:et}=k[ke],ht=new s.RGBAImage({width:Se,height:Ae});s.RGBAImage.copy(pe,ht,{x:ce,y:xe},{x:0,y:0},{width:Se,height:Ae}),Te[ke]={data:ht,pixelRatio:Re,sdf:De,stretchX:Ge,stretchY:Ye,content:et}}S(null,Te)}}return{cancel(){Y&&(Y.cancel(),Y=null),J&&(J.cancel(),J=null)}}})(u,this.map._requestManager,((m,y)=>{if(this._spriteRequest=null,m)this.fire(new s.ErrorEvent(m));else if(y)for(const S in y)this.imageManager.addImage(S,y[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))}))}_validateLayer(u){const m=this.getSource(u.source);if(!m)return;const y=u.sourceLayer;y&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${m.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const m=[];for(const y of u){const S=this._layers[y];S.type!=="custom"&&m.push(S.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():Yo[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const m=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(S.length||k.length)&&this._updateWorkerLayers(S,k);for(const R in this._updatedSources){const O=this._updatedSources[R];O==="reload"?this._reloadSource(R):O==="clear"&&this._clearSource(R)}this._updateTilesForChangedImages();for(const R in this._updatedPaintProps)this._layers[R].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const y={};for(const S in this._sourceCaches){const k=this._sourceCaches[S];y[S]=k.used,k.used=!1}for(const S of this._order){const k=this._layers[S];if(k.recalculate(u,this._availableImages),!k.isHidden(u.zoom)){const O=this._getLayerSourceCache(k);O&&(O.used=!0)}const R=this.map.painter;if(R){const O=k.getProgramIds();if(!O)continue;const U=k.getProgramConfiguration(u.zoom);for(const Y of O)R.useProgram(Y,U)}}for(const S in y){const k=this._sourceCaches[S];y[S]!==k.used&&k.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),_a(this,s.validateStyle(u)))return!1;(u=s.clone$1(u)).layers=Ns(u.layers);const m=(function(S,k){if(!S)return[{command:Xn.setStyle,args:[k]}];let R=[];try{if(!p(S.version,k.version))return[{command:Xn.setStyle,args:[k]}];p(S.center,k.center)||R.push({command:Xn.setCenter,args:[k.center]}),p(S.zoom,k.zoom)||R.push({command:Xn.setZoom,args:[k.zoom]}),p(S.bearing,k.bearing)||R.push({command:Xn.setBearing,args:[k.bearing]}),p(S.pitch,k.pitch)||R.push({command:Xn.setPitch,args:[k.pitch]}),p(S.sprite,k.sprite)||R.push({command:Xn.setSprite,args:[k.sprite]}),p(S.glyphs,k.glyphs)||R.push({command:Xn.setGlyphs,args:[k.glyphs]}),p(S.transition,k.transition)||R.push({command:Xn.setTransition,args:[k.transition]}),p(S.light,k.light)||R.push({command:Xn.setLight,args:[k.light]}),p(S.fog,k.fog)||R.push({command:Xn.setFog,args:[k.fog]}),p(S.projection,k.projection)||R.push({command:Xn.setProjection,args:[k.projection]});const O={},U=[];(function(ae,pe,Te,ke){let Se;for(Se in pe=pe||{},ae=ae||{})ae.hasOwnProperty(Se)&&(pe.hasOwnProperty(Se)||ks(Se,Te,ke));for(Se in pe){if(!pe.hasOwnProperty(Se))continue;const Ae=pe[Se];ae.hasOwnProperty(Se)?p(ae[Se],Ae)||(ae[Se].type==="geojson"&&Ae.type==="geojson"&&Xa(ae,pe,Se)?Te.push({command:Xn.setGeoJSONSourceData,args:[Se,Ae.data]}):Go(Se,pe,Te,ke)):ma(Se,pe,Te)}})(S.sources,k.sources,U,O);const Y=[];S.layers&&S.layers.forEach((ae=>{ae.source&&O[ae.source]?R.push({command:Xn.removeLayer,args:[ae.id]}):Y.push(ae)}));let J=S.terrain;J&&O[J.source]&&(R.push({command:Xn.setTerrain,args:[void 0]}),J=void 0),R=R.concat(U),p(J,k.terrain)||R.push({command:Xn.setTerrain,args:[k.terrain]}),(function(ae,pe,Te){pe=pe||[];const ke=(ae=ae||[]).map(ko),Se=pe.map(ko),Ae=ae.reduce(Ya,{}),ce=pe.reduce(Ya,{}),xe=ke.slice(),De=Object.create(null);let Re,Ge,Ye,et,ht,lt,xt;for(Re=0,Ge=0;Re<ke.length;Re++)Ye=ke[Re],ce.hasOwnProperty(Ye)?Ge++:(Te.push({command:Xn.removeLayer,args:[Ye]}),xe.splice(xe.indexOf(Ye,Ge),1));for(Re=0,Ge=0;Re<Se.length;Re++)Ye=Se[Se.length-1-Re],xe[xe.length-1-Re]!==Ye&&(Ae.hasOwnProperty(Ye)?(Te.push({command:Xn.removeLayer,args:[Ye]}),xe.splice(xe.lastIndexOf(Ye,xe.length-Ge),1)):Ge++,lt=xe[xe.length-Re],Te.push({command:Xn.addLayer,args:[ce[Ye],lt]}),xe.splice(xe.length-Re,0,Ye),De[Ye]=!0);for(Re=0;Re<Se.length;Re++)if(Ye=Se[Re],et=Ae[Ye],ht=ce[Ye],!De[Ye]&&!p(et,ht))if(p(et.source,ht.source)&&p(et["source-layer"],ht["source-layer"])&&p(et.type,ht.type)){for(xt in Co(et.layout,ht.layout,Te,Ye,null,Xn.setLayoutProperty),Co(et.paint,ht.paint,Te,Ye,null,Xn.setPaintProperty),p(et.filter,ht.filter)||Te.push({command:Xn.setFilter,args:[Ye,ht.filter]}),p(et.minzoom,ht.minzoom)&&p(et.maxzoom,ht.maxzoom)||Te.push({command:Xn.setLayerZoomRange,args:[Ye,ht.minzoom,ht.maxzoom]}),et)et.hasOwnProperty(xt)&&xt!=="layout"&&xt!=="paint"&&xt!=="filter"&&xt!=="metadata"&&xt!=="minzoom"&&xt!=="maxzoom"&&(xt.indexOf("paint.")===0?Co(et[xt],ht[xt],Te,Ye,xt.slice(6),Xn.setPaintProperty):p(et[xt],ht[xt])||Te.push({command:Xn.setLayerProperty,args:[Ye,xt,ht[xt]]}));for(xt in ht)ht.hasOwnProperty(xt)&&!et.hasOwnProperty(xt)&&xt!=="layout"&&xt!=="paint"&&xt!=="filter"&&xt!=="metadata"&&xt!=="minzoom"&&xt!=="maxzoom"&&(xt.indexOf("paint.")===0?Co(et[xt],ht[xt],Te,Ye,xt.slice(6),Xn.setPaintProperty):p(et[xt],ht[xt])||Te.push({command:Xn.setLayerProperty,args:[Ye,xt,ht[xt]]}))}else Te.push({command:Xn.removeLayer,args:[Ye]}),lt=xe[xe.lastIndexOf(Ye)+1],Te.push({command:Xn.addLayer,args:[ht,lt]})})(Y,k.layers,R)}catch(O){console.warn("Unable to compute style diff:",O),R=[{command:Xn.setStyle,args:[k]}]}return R})(this.serialize(),u).filter((S=>!(S.command in vd)));if(m.length===0)return!1;const y=m.filter((S=>!(S.command in ya)));if(y.length>0)throw new Error(`Unimplemented: ${y.map((S=>S.command)).join(", ")}.`);return m.forEach((S=>{S.command!=="setTransition"&&S.command!=="setProjection"&&this[S.command].apply(this,S.args)})),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,m){return this.getImage(u)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,m),this._afterImageUpdated(u),this)}updateImage(u,m){this.imageManager.updateImage(u,m)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,m,y={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.validateSource,`sources.${u}`,m,null,y))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=li(u,m,this.dispatcher,this);S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:S.serialize(),sourceId:u})));const k=R=>{const O=(R?"symbol:":"other:")+u,U=this._sourceCaches[O]=new s.SourceCache(O,S,R);(R?this._symbolSourceCaches:this._otherSourceCaches)[u]=U,U.style=this,U.onAdd(this.map)};k(!1),m.type!=="vector"&&m.type!=="geojson"||k(!0),S.onAdd&&S.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const m=this.getSource(u);if(!m)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new s.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(u);for(const S of y)delete this._sourceCaches[S.id],delete this._updatedSources[S.id],S.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,m){this._checkLoaded(),this.getSource(u).setData(m),this._changed=!0}getSource(u){const m=this._getSourceCache(u);return m&&m.getSource()}_getSources(){const u=[];for(const m in this._otherSourceCaches){const y=this._getSourceCache(m);y&&u.push(y.getSource())}return u}addLayer(u,m,y={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${S}" already exists on this map`)));let k;if(u.type==="custom"){if(_a(this,s.validateCustomStyleLayer(u)))return;k=s.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=s.clone$1(u),u=s.extend(u,{source:S})),this._validate(s.validateLayer,`layers.${S}`,u,{arrayIndex:-1},y))return;k=s.createStyleLayer(u),this._validateLayer(k),k.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}const R=m?this._order.indexOf(m):this._order.length;if(m&&R===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(R,0,S),this._layerOrderChanged=!0,this._layers[S]=k;const O=this._getLayerSourceCache(k);if(this._removedLayers[S]&&k.source&&O&&k.type!=="custom"){const U=this._removedLayers[S];delete this._removedLayers[S],U.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",O.pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,m){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===m)return;const y=this._order.indexOf(u);this._order.splice(y,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const m=this._layers[u];if(!m)return void this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=m,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const m in this._layers)if(this._layers[m].type===u)return!0;return!1}setLayerZoomRange(u,m,y){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===m&&S.maxzoom===y||(m!=null&&(S.minzoom=m),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,m,y={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!p(S.filter,m))return m==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(s.validateFilter,`layers.${S.id}.filter`,m,{layerType:S.type},y)||(S.filter=s.clone$1(m),this._updateLayer(S)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const m=this.getLayer(u);return m&&s.clone$1(m.filter)}setLayoutProperty(u,m,y,S={}){this._checkLoaded();const k=this.getLayer(u);k?p(k.getLayoutProperty(m),y)||(k.setLayoutProperty(m,y,S),this._updateLayer(k)):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,m){const y=this.getLayer(u);if(y)return y.getLayoutProperty(m);this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,m,y,S={}){this._checkLoaded();const k=this.getLayer(u);k?p(k.getPaintProperty(m),y)||(k.setPaintProperty(m,y,S)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,m){const y=this.getLayer(u);return y&&y.getPaintProperty(m)}setFeatureState(u,m){this._checkLoaded();const y=u.source,S=u.sourceLayer,k=this.getSource(y);if(!k)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const R=k.type;if(R==="geojson"&&S)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(R==="vector"&&!S)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(y);for(const U of O)U.setFeatureState(S,u.id,m)}removeFeatureState(u,m){this._checkLoaded();const y=u.source,S=this.getSource(y);if(!S)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const k=S.type,R=k==="vector"?u.sourceLayer:void 0;if(k==="vector"&&!R)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(y);for(const U of O)U.removeFeatureState(R,u.id,m)}getFeatureState(u){this._checkLoaded();const m=u.source,y=u.sourceLayer,S=this.getSource(m);if(S){if(S.type!=="vector"||y)return u.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(y,u.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const m in this._sourceCaches){const y=this._sourceCaches[m].getSource();u[y.id]||(u[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},(m=>m!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0;const m=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",m.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const m=R=>this._layers[R].type==="fill-extrusion",y={},S=[];for(let R=this._order.length-1;R>=0;R--){const O=this._order[R];if(m(O)){y[O]=R;for(const U of u){const Y=U[O];if(Y)for(const J of Y)S.push(J)}}}S.sort(((R,O)=>O.intersectionZ-R.intersectionZ));const k=[];for(let R=this._order.length-1;R>=0;R--){const O=this._order[R];if(m(O))for(let U=S.length-1;U>=0;U--){const Y=S[U].feature;if(y[Y.layer.id]<R)break;k.push(Y),S.pop()}else for(const U of u){const Y=U[O];if(Y)for(const J of Y)k.push(J.feature)}}return k}queryRenderedFeatures(u,m,y){m&&m.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const U of m.layers){const Y=this._layers[U];if(!Y)return this.fire(new s.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];S[Y.source]=!0}}const k=[];m.availableImages=this._availableImages;const R=m&&m.layers?m.layers.some((U=>{const Y=this.getLayer(U);return Y&&Y.is3D()})):this.has3DLayers(),O=Ze.createFromScreenPoints(u,y);for(const U in this._sourceCaches){const Y=this._sourceCaches[U].getSource().id;m.layers&&!S[Y]||k.push(Vi(this._sourceCaches[U],this._layers,this._serializedLayers,O,m,y,R,!!this.map._showQueryGeometry))}return this.placement&&k.push((function(U,Y,J,ae,pe,Te,ke){const Se={},Ae=Te.queryRenderedSymbols(ae),ce=[];for(const xe of Object.keys(Ae).map(Number))ce.push(ke[xe]);ce.sort(rs);for(const xe of ce){const De=xe.featureIndex.lookupSymbolFeatures(Ae[xe.bucketInstanceId],Y,xe.bucketIndex,xe.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,U);for(const Re in De){const Ge=Se[Re]=Se[Re]||[],Ye=De[Re];Ye.sort(((et,ht)=>{const lt=xe.featureSortOrder;if(lt){const xt=lt.indexOf(et.featureIndex);return lt.indexOf(ht.featureIndex)-xt}return ht.featureIndex-et.featureIndex}));for(const et of Ye)Ge.push(et)}}for(const xe in Se)Se[xe].forEach((De=>{const Re=De.feature,Ge=J(U[xe]);if(!Ge)return;const Ye=Ge.getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Ye}));return Se})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(u,m){m&&m.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const y=this._getSourceCaches(u);let S=[];for(const k of y)S=S.concat(gr(k,m));return S}addSourceType(u,m,y){return Do.getSourceType(u)?y(new Error(`A source type called "${u}" already exists.`)):(Do.setSourceType(u,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:m.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,m={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const R in u)if(!p(u[R],y[R])){S=!0;break}if(!S)return;const k=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,m),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,m=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=u;if(m===1){if(typeof y.source=="object"){const S="terrain-dem-src";this.addSource(S,y.source),y=s.clone$1(y),y=s.extend(y,{source:S})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,m)}else{const S=this.terrain,k=S.get();for(const R of Object.keys(s.spec.terrain))!y.hasOwnProperty(R)&&s.spec.terrain[R].default&&(y[R]=s.spec.terrain[R].default);for(const R in y)if(!p(y[R],k[R])){S.set(y),this.stylesheet.terrain=y;const O=this._setTransitionParameters({duration:0});S.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const m=this.fog=new $e(u,this.map.transform);this.stylesheet.fog=u;const y=this._setTransitionParameters({duration:0});m.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const u of this.map._markers)u._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,y=m.get();Object.keys(u).length===0&&m.set(u);for(const S in u)if(!p(u[S],y[S])){m.set(u),this.stylesheet.fog=u;const k=this._setTransitionParameters({duration:0});m.updateTransitions(k);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:s.exported.now(),transition:s.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter((y=>this.isLayerDraped(this._layers[y]))),m=this._order.filter((y=>!this.isLayerDraped(this._layers[y])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...m)}_createTerrain(u,m){const y=this.terrain=new Ve(u,m);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const S=this._setTransitionParameters({duration:0});y.updateTransitions(S)}_force3DLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const m=this._layers[u];m.type==="symbol"&&this._updateLayer(m)}}_validate(u,m,y,S,k={}){return(!k||k.validate!==!1)&&_a(this,u.call(s.validateStyle,s.extend({key:m,style:this.serialize(),value:y,styleSpec:s.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const m=this._getSourceCaches(u);for(const y of m)y.clearTiles()}_reloadSource(u){const m=this._getSourceCaches(u);for(const y of m)y.resume(),y.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const m in this._sourceCaches)this._sourceCaches[m].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const m=this._sourceCaches[u];m.resume(),m.reload()}}_updatePlacement(u,m,y,S,k=!1){let R=!1,O=!1;const U={};for(const Y of this._order){const J=this._layers[Y];if(J.type!=="symbol")continue;if(!U[J.source]){const pe=this._getLayerSourceCache(J);if(!pe)continue;U[J.source]=pe.getRenderableIds(!0).map((Te=>pe.getTileByID(Te))).sort(((Te,ke)=>ke.tileID.overscaledZ-Te.tileID.overscaledZ||(Te.tileID.isLessThan(ke.tileID)?-1:1)))}const ae=this.crossTileSymbolIndex.addLayer(J,U[J.source],u.center.lng,u.projection);R=R||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),k=k||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),u.zoom))&&(this.pauseablePlacement=new gc(u,this._order,k,m,y,S,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),O=!0),R&&this.pauseablePlacement.placement.setStale()),O||R)for(const Y of this._order){const J=this._layers[Y];J.type==="symbol"&&this.placement.updateLayerOpacities(J,U[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,m,y){this.imageManager.getImages(m.icons,y),this._updateTilesForChangedImages();const S=k=>{k&&k.setDependencies(m.tileID.key,m.type,m.icons)};S(this._otherSourceCaches[m.source]),S(this._symbolSourceCaches[m.source])}getGlyphs(u,m,y){this.glyphManager.getGlyphs(m.stacks,y)}getResource(u,m,y){return s.makeRequest(m,y)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const m=[];return this._otherSourceCaches[u]&&m.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&m.push(this._symbolSourceCaches[u]),m}_isSourceCacheLoaded(u){const m=this._getSourceCaches(u);return m.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):m.every((y=>y.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Do.getSourceType=function(_){return Wn[_]},Do.setSourceType=function(_,u){Wn[_]=u},Do.registerForPluginStateChange=s.registerForPluginStateChange;var jl=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Lo="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ba=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,xa=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Zo=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let _c={},Ja={};const gl=[];uo(jl,gl),uo(ba,gl),uo(xa,gl),uo(Zo,gl),_c=Ii("",ba),Ja=Ii(Zo,xa);const Wc=Ii(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),vl=jl,Tu=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Su={background:Ii(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ii(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ii(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ii("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ii(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ii(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ii("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ii("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ii("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ii(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ii(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ii(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ii(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ii(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Ii(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Ii(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ii(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ii(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ii(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ii(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Ii(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Ii(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Ii(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Ii(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Ii(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ii(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lo),skyboxGradient:Ii(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lo),skyboxCapture:Ii(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ii(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ii(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function uo(_,u){const m=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of m)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=y.split(" ");for(const k of S)u.includes(k)||u.push(k)}}function Ii(_,u){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S={},k=[...gl];return uo(_,k),uo(u,k),{fragmentSource:_=_.replace(m,((R,O,U,Y,J)=>(S[J]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${U} ${Y} ${J};
#else
uniform ${U} ${Y} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${U} ${Y} ${J} = u_${J};
#endif
`))),vertexSource:u=u.replace(m,((R,O,U,Y,J)=>{const ae=Y==="float"?"vec2":"vec4",pe=J.match(/color/)?"color":ae;return S[J]?O==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${U} ${ae} a_${J};
varying ${U} ${Y} ${J};
#else
uniform ${U} ${Y} u_${J};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${U} ${Y} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${pe}(a_${J}, u_${J}_t);
#else
    ${U} ${Y} ${J} = u_${J};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${U} ${ae} a_${J};
#else
uniform ${U} ${Y} u_${J};
#endif
`:pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${U} ${Y} ${J} = a_${J};
#else
    ${U} ${Y} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${U} ${Y} ${J} = unpack_mix_${pe}(a_${J}, u_${J}_t);
#else
    ${U} ${Y} ${J} = u_${J};
#endif
`})),staticAttributes:y,usedDefines:k}}class Hc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,m,y,S,k,R,O){this.context=u;let U=this.boundPaintVertexBuffers.length!==S.length;for(let J=0;!U&&J<S.length;J++)this.boundPaintVertexBuffers[J]!==S[J]&&(U=!0);let Y=this.boundDynamicVertexBuffers.length!==O.length;for(let J=0;!Y&&J<O.length;J++)this.boundDynamicVertexBuffers[J]!==O[J]&&(Y=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==y||U||Y||this.boundIndexBuffer!==k||this.boundVertexOffset!==R)this.freshBind(m,y,S,k,R,O);else{u.bindVertexArrayOES.set(this.vao);for(const J of O)J&&J.bind();k&&k.dynamicDraw&&k.bind()}}freshBind(u,m,y,S,k,R){let O;const U=u.numAttributes,Y=this.context,J=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=k,this.boundDynamicVertexBuffers=R;else{O=Y.currentNumAttributes||0;for(let ae=U;ae<O;ae++)J.disableVertexAttribArray(ae)}m.enableAttributes(J,u),m.bind(),m.setVertexAttribPointers(J,u,k);for(const ae of y)ae.enableAttributes(J,u),ae.bind(),ae.setVertexAttribPointers(J,u,k);for(const ae of R)ae&&(ae.enableAttributes(J,u),ae.bind(),ae.setVertexAttribPointers(J,u,k));S&&S.bind(),Y.currentNumAttributes=U}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Eu(_,u){const m=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new s.MercatorCoordinate(0,y/m).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/m).toLngLat().lat]}function _d(_,u,m,y,S,k,R){const O=_.context,U=O.gl,Y=m.fbo;if(!Y)return;_.prepareDrawTile();const J=_.useProgram("hillshade");O.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Y.colorAttachment.get());const ae=((Se,Ae,ce,xe)=>{const De=ce.paint.get("hillshade-shadow-color"),Re=ce.paint.get("hillshade-highlight-color"),Ge=ce.paint.get("hillshade-accent-color");let Ye=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ye-=Se.transform.angle);const et=!Se.options.moving;return{u_matrix:xe||Se.transform.calculateProjMatrix(Ae.tileID.toUnwrapped(),et),u_image:0,u_latrange:Eu(0,Ae.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),Ye],u_shadow:De,u_highlight:Re,u_accent:Ge}})(_,m,y,_.terrain?u.projMatrix:null);_.prepareDrawProgram(O,J,u.toUnwrapped());const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:Te,tileBoundsSegments:ke}=_.getTileBoundsBuffers(m);J.draw(O,U.TRIANGLES,S,k,R,s.CullFaceMode.disabled,ae,y.id,pe,Te,ke)}function _l(_,u,m){if(!u.needsDEMTextureUpload)return;const y=_.context,S=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||_.getTileTexture(m.stride);const k=m.getPixels();u.demTexture?u.demTexture.update(k,{premultiply:!1}):u.demTexture=new s.Texture(y,k,S.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function js(_,u,m,y,S,k){const R=_.context,O=R.gl;if(!u.dem)return;const U=u.dem;if(R.activeTexture.set(O.TEXTURE1),_l(_,u,U),!u.demTexture)return;u.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const Y=U.dim;R.activeTexture.set(O.TEXTURE0);let J=u.fbo;if(!J){const ke=new s.Texture(R,{width:Y,height:Y,data:null},O.RGBA);ke.bind(O.LINEAR,O.CLAMP_TO_EDGE),J=u.fbo=R.createFramebuffer(Y,Y,!0),J.colorAttachment.set(ke.texture)}R.bindFramebuffer.set(J.framebuffer),R.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:pe,tileBoundsSegments:Te}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(R,O.TRIANGLES,y,S,k,s.CullFaceMode.disabled,((ke,Se)=>{const Ae=Se.stride,ce=s.create();return s.ortho(ce,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ce,ce,[0,-s.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[Ae,Ae],u_zoom:ke.overscaledZ,u_unpack:Se.unpackVector}})(u.tileID,U),m.id,ae,pe,Te),u.needsHillshadePrepare=!1}const Gc=_=>({u_matrix:new s.UniformMatrix4f(_),u_image0:new s.Uniform1i(_),u_skirt_height:new s.Uniform1f(_)}),ho=(_,u)=>({u_matrix:_,u_image0:0,u_skirt_height:u}),Jo=(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:m,u_zoom_transition:S,u_merc_center:k,u_image0:0,u_frustum_tl:R,u_frustum_tr:O,u_frustum_br:U,u_frustum_bl:Y,u_globe_pos:J,u_globe_radius:ae,u_viewport:pe,u_grid_matrix:ke?Float32Array.from(ke):new Float32Array(9),u_skirt_height:Te});function M(_,u){return _!=null&&u!=null&&!(!_.hasData()||!u.hasData())&&_.demTexture!=null&&u.demTexture!=null&&_.tileID.key!==u.tileID.key}const ne=new class{constructor(){this.operations={}}newMorphing(_,u,m,y,S){if(_ in this.operations){const k=this.operations[_];k.to.tileID.key!==m.tileID.key&&(k.queued=m)}else this.operations[_]={startTime:y,phase:0,duration:S,from:u,to:m,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const u=this.operations[_];return{from:u.from,to:u.to,phase:u.phase}}update(_){for(const u in this.operations){const m=this.operations[u];for(m.phase=(_-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,_)){delete this.operations[u];break}}}_nextOp(_,u){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=u,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},de={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Le(_){return 6*Math.pow(1.5,22-_)}function It(_,u){const m=1<<_.z;return!u&&(_.x===0||_.x===m-1)||_.y===0||_.y===m-1}const Rt=_=>({u_matrix:_});function xn(_,u,m,y,S){if(S>0){const k=s.exported.now(),R=(k-_.timeAdded)/S,O=u?(k-u.timeAdded)/S:-1,U=m.getSource(),Y=y.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),J=!u||Math.abs(u.tileID.overscaledZ-Y)>Math.abs(_.tileID.overscaledZ-Y),ae=J&&_.refreshedUponExpiration?1:s.clamp(J?R:1-O,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ae}:{opacity:ae,mix:0}}return{opacity:1,mix:0}}class fi extends s.SourceCache{constructor(u){const m={type:"raster-dem",maxzoom:u.transform.maxZoom},y=new Ee(Gr(),null),S=li("mock-dem",m,y,u.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,m){u.state="loaded",m(null)}}class Rr extends s.SourceCache{constructor(u){const m=li("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new Ee(Gr(),null),u.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,m,y){if(u.freezeTileCoverage)return;this.transform=u;const S=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((k,R)=>{if(k[R.key]="",!this._tiles[R.key]){const O=new s.Tile(R,this._source.tileSize*R.overscaleFactor(),u.tileZoom);O.state="loaded",this._tiles[R.key]=O}return k}),{});for(const k in this._tiles)k in S||(this.freeFBO(k),this._tiles[k].unloadVectorData(),delete this._tiles[k])}freeFBO(u){const m=this.proxyCachedFBO[u];if(m!==void 0){const y=Object.values(m);this.renderCachePool.push(...y),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach((u=>u.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ai extends s.OverscaledTileID{constructor(u,m,y){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=m,this.projMatrix=y}}class ar extends s.Elevation{constructor(u,m){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,S,k]=(function(U){const Y=new s.StructArrayLayout2i4,J=new s.StructArrayLayout3ui6,ae=131;Y.reserve(17161),J.reserve(33800);const pe=s.EXTENT/128,Te=s.EXTENT+pe/2,ke=Te+pe;for(let Ae=-pe;Ae<ke;Ae+=pe)for(let ce=-pe;ce<ke;ce+=pe){const xe=ce<0||ce>Te||Ae<0||Ae>Te?24575:0,De=s.clamp(Math.round(ce),0,s.EXTENT),Re=s.clamp(Math.round(Ae),0,s.EXTENT);Y.emplaceBack(De+xe,Re)}const Se=(Ae,ce)=>{const xe=ce*ae+Ae;J.emplaceBack(xe+1,xe,xe+ae),J.emplaceBack(xe+ae,xe+ae+1,xe+1)};for(let Ae=1;Ae<129;Ae++)for(let ce=1;ce<129;ce++)Se(ce,Ae);return[0,129].forEach((Ae=>{for(let ce=0;ce<130;ce++)Se(ce,Ae),Se(Ae,ce)})),[Y,J,32768]})(),R=u.context;this.gridBuffer=R.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=R.createIndexBuffer(S),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,S.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,k),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Rr(m.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const O=R.gl;this._overlapStencilMode=new s.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new fi(m.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(u,m,y){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const S=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(S.get("source")),this._exaggeration=S.get("exaggeration");const k=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const R=this.getScaledDemTileSize();this.sourceCache.update(m,R,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,k(),this._initializing=!0),k(),m.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((u=>u.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=m.getIds().map((U=>{const Y=m.getTileByID(U).tileID;return Y.projMatrix=y.calculateProjMatrix(Y.toUnwrapped()),Y}));(function(U,Y){const J=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),ae=new s.Point(J.x,J.y);U.sort(((pe,Te)=>{if(Te.overscaledZ-pe.overscaledZ)return Te.overscaledZ-pe.overscaledZ;const ke=new s.Point(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),Se=new s.Point(Te.canonical.x+(1<<Te.canonical.z)*Te.wrap,Te.canonical.y),Ae=ae.mult(1<<pe.canonical.z);return Ae.x-=.5,Ae.y-=.5,Ae.distSqr(ke)-Ae.distSqr(Se)}))})(S,this.painter),this._previousZoom=y.zoom;const k=this.proxyToSource||{};this.proxyToSource={},S.forEach((U=>{this.proxyToSource[U.key]={}})),this.terrainTileForTile={};const R=this._style._sourceCaches;for(const U in R){const Y=R[U];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,u[U],k),Y.usedForTerrain))continue;const J=u[U];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(J)}this.proxiedCoords[m.id]=S.map((U=>new Ai(U,U.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(k),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const O={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const Y=this.terrainTileForTile[U.key];if(!Y)continue;const J=Y.tileID.key;J in O||(this._visibleDemTiles.push(Y),O[J]=J)}}_assignTerrainTiles(u){this._initializing||u.forEach((m=>{if(this.terrainTileForTile[m.key])return;const y=this._findTileCoveringTileID(m,this.sourceCache);y&&(this.terrainTileForTile[m.key]=y)}))}_prepareDEMTextures(){const u=this.painter.context,m=u.gl;for(const y in this.terrainTileForTile){const S=this.terrainTileForTile[y],k=S.dem;!k||S.demTexture&&!S.needsDEMTextureUpload||(u.activeTexture.set(m.TEXTURE1),_l(this.painter,S,k))}}_prepareDemTileUniforms(u,m,y,S){if(!m||m.demTexture==null)return!1;const k=u.tileID.canonical,R=Math.pow(2,m.tileID.canonical.z-k.z),O=S||"";return y[`u_dem_tl${O}`]=[k.x*R%1,k.y*R%1],y[`u_dem_scale${O}`]=R,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,m=u.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(u,y,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const m=this._visibleDemTiles.reduce(((y,S)=>{if(!S.dem)return y;const k=S.dem.tree.minimums[0];return k>0&&u++,y+k}),0);return u?m/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,m=u.gl;u.activeTexture.set(m.TEXTURE2);const y=this._getLoadedAreaMinimum(),S=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(S,{premultiply:!1}):k=this._emptyDEMTexture=new s.Texture(u,S,m.RGBA,{premultiply:!1}),k}setupElevationDraw(u,m,y){const S=this.painter.context,k=S.gl,R=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;R.u_dem_size=this.sourceCache.getSource().tileSize,R.u_exaggeration=this.exaggeration();let U=null,Y=null,J=1;if(y&&y.morphing&&this._useVertexMorphing){const ae=y.morphing.srcDemTile,pe=y.morphing.dstDemTile;J=y.morphing.phase,ae&&pe&&(this._prepareDemTileUniforms(u,ae,R,"_prev")&&(Y=ae),this._prepareDemTileUniforms(u,pe,R)&&(U=pe))}if(Y&&U?(S.activeTexture.set(k.TEXTURE2),U.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),S.activeTexture.set(k.TEXTURE4),Y.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),R.u_dem_lerp=J):(U=this.terrainTileForTile[u.tileID.key],S.activeTexture.set(k.TEXTURE2),(this._prepareDemTileUniforms(u,U,R)?U.demTexture:this.emptyDEMTexture).bind(k.NEAREST,k.CLAMP_TO_EDGE)),S.activeTexture.set(k.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),this._depthFBO&&(R.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),R.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&U){const ae=(1<<U.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;R.u_meter_to_dem=ae}if(y&&y.labelPlaneMatrixInv&&(R.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),m.setTerrainUniformValues(S,R),this.painter.transform.projection.name==="globe"){const ae=this.globeUniformValues(this.painter.transform,u.tileID.canonical,y&&y.useDenormalizedUpVectorScale);m.setGlobeUniformValues(S,ae)}}globeUniformValues(u,m,y){const S=u.projection;return{u_tile_tl_up:S.upVector(m,0,0),u_tile_tr_up:S.upVector(m,s.EXTENT,0),u_tile_br_up:S.upVector(m,s.EXTENT,s.EXTENT),u_tile_bl_up:S.upVector(m,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):S.upVectorScale(m,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const m=this.painter,y=this.painter.context;u.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,k,R,O,U){if(S.transform.projection.name==="globe")(function(Y,J,ae,pe,Te){const ke=Y.context,Se=ke.gl;let Ae,ce;const xe=Y.options.showTerrainWireframe?2:0,De=Y.transform,Re=s.globeUseCustomAntiAliasing(Y,ke,De),Ge=(Jt,_t)=>{if(ce===Jt)return;const At=[de[Jt],"PROJECTION_GLOBE_VIEW"];Re&&At.push("CUSTOM_ANTIALIASING"),_t&&At.push(de[xe]),Ae=Y.useProgram("globeRaster",null,At),ce=Jt},Ye=Y.colorModeForRenderPass(),et=new s.DepthMode(Se.LEQUAL,s.DepthMode.ReadWrite,Y.depthRangeFor3D);ne.update(Te);const ht=s.calculateGlobeMercatorMatrix(De),lt=[s.mercatorXfromLng(De.center.lng),s.mercatorYfromLat(De.center.lat)],xt=xe?[!1,!0]:[!1],Xt=Y.globeSharedBuffers,ft=[De.width*s.exported.devicePixelRatio,De.height*s.exported.devicePixelRatio],Bt=Float32Array.from(De.globeMatrix),Et={useDenormalizedUpVectorScale:!0};if(xt.forEach((Jt=>{const _t=Y.transform,At=Le(_t.zoom)*J.exaggeration();ce=-1;const qt=Jt?Se.LINES:Se.TRIANGLES;for(const jt of pe){const Qt=ae.getTile(jt),Rn=s.StencilMode.disabled,Kn=J.prevTerrainTileForTile[jt.key],En=J.terrainTileForTile[jt.key];M(Kn,En)&&ne.newMorphing(jt.key,Kn,En,Te,250),ke.activeTexture.set(Se.TEXTURE0),Qt.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const Vn=ne.getMorphValuesForProxy(jt.key),_i=Vn?1:0;Vn&&s.extend$1(Et,{morphing:{srcDemTile:Vn.from,dstDemTile:Vn.to,phase:s.easeCubicInOut(Vn.phase)}});const vi=s.tileCornersToBounds(jt.canonical),Mn=s.getLatitudinalLod(vi.getCenter().lat),Bi=s.getGridMatrix(jt.canonical,vi,Mn,_t.worldSize/_t._pixelsPerMercatorPixel),qi=s.globeNormalizeECEF(s.globeTileBounds(jt.canonical)),er=Jo(_t.projMatrix,Bt,ht,qi,s.globeToMercatorTransition(_t.zoom),lt,_t.frustumCorners.TL,_t.frustumCorners.TR,_t.frustumCorners.BR,_t.frustumCorners.BL,_t.globeCenterInViewSpace,_t.globeRadius,ft,At,Bi);if(Ge(_i,Jt),J.setupElevationDraw(Qt,Ae,Et),Y.prepareDrawProgram(ke,Ae,jt.toUnwrapped()),Xt){const[Ki,Ws,Ms]=Jt?Xt.getWirefameBuffers(Y.context,Mn):Xt.getGridBuffers(Mn,At!==0);Ae.draw(ke,qt,et,Rn,Ye,s.CullFaceMode.backCCW,er,"globe_raster",Ki,Ws,Ms)}}})),Xt){const Jt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Re&&Jt.push("CUSTOM_ANTIALIASING"),Ae=Y.useProgram("globeRaster",null,Jt);for(const _t of pe){const{x:At,y:qt,z:jt}=_t.canonical,Qt=qt===0,Rn=qt===(1<<jt)-1,[Kn,En,Vn,_i]=Xt.getPoleBuffers(jt);if(_i&&(Qt||Rn)){const vi=ae.getTile(_t);ke.activeTexture.set(Se.TEXTURE0),vi.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);let Mn=s.globePoleMatrixForTile(jt,At,De);const Bi=s.globeNormalizeECEF(s.globeTileBounds(_t.canonical)),qi=(er,Ki)=>er.draw(ke,Se.TRIANGLES,et,s.StencilMode.disabled,Ye,s.CullFaceMode.disabled,Jo(De.projMatrix,Mn,Mn,Bi,0,lt,De.frustumCorners.TL,De.frustumCorners.TR,De.frustumCorners.BR,De.frustumCorners.BL,De.globeCenterInViewSpace,De.globeRadius,ft,0),"globe_pole_raster",Ki,Vn,_i);J.setupElevationDraw(vi,Ae,Et),Y.prepareDrawProgram(ke,Ae,_t.toUnwrapped()),Qt&&qi(Ae,Kn),Rn&&(Mn=s.scale(s.create(),Mn,[1,-1,1]),qi(Ae,En))}}}})(S,k,R,O,U);else{const Y=S.context,J=Y.gl;let ae,pe;const Te=S.options.showTerrainWireframe?2:0,ke=(De,Re)=>{if(pe===De)return;const Ge=[de[De]];Re&&Ge.push(de[Te]),ae=S.useProgram("terrainRaster",null,Ge),pe=De},Se=S.colorModeForRenderPass(),Ae=new s.DepthMode(J.LEQUAL,s.DepthMode.ReadWrite,S.depthRangeFor3D);ne.update(U);const ce=S.transform,xe=Le(ce.zoom)*k.exaggeration();(Te?[!1,!0]:[!1]).forEach((De=>{pe=-1;const Re=De?J.LINES:J.TRIANGLES,[Ge,Ye]=De?k.getWirefameBuffer():[k.gridIndexBuffer,k.gridSegments];for(const et of O){const ht=R.getTile(et),lt=s.StencilMode.disabled,xt=k.prevTerrainTileForTile[et.key],Xt=k.terrainTileForTile[et.key];M(xt,Xt)&&ne.newMorphing(et.key,xt,Xt,U,250),Y.activeTexture.set(J.TEXTURE0),ht.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);const ft=ne.getMorphValuesForProxy(et.key),Bt=ft?1:0;let Et;ft&&(Et={morphing:{srcDemTile:ft.from,dstDemTile:ft.to,phase:s.easeCubicInOut(ft.phase)}});const Jt=ho(et.projMatrix,It(et.canonical,ce.renderWorldCopies)?xe/10:xe);ke(Bt,De),k.setupElevationDraw(ht,ae,Et),S.prepareDrawProgram(Y,ae,et.toUnwrapped()),ae.draw(Y,Re,Ae,lt,Se,s.CullFaceMode.backCCW,Jt,"terrain_raster",k.gridBuffer,Ge,Ye)}}))}})(m,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const m=this.painter,y=this.painter.context,S=this.proxySourceCache,k=this.proxiedCoords[S.id],R=this._drapedRenderBatches.shift(),O=[],U=m.style.order;let Y=0;for(const J of k){const ae=S.getTileByID(J.proxyTileKey),pe=S.proxyCachedFBO[J.key]?S.proxyCachedFBO[J.key][u]:void 0,Te=pe!==void 0?S.renderCache[pe]:this.pool[Y++],ke=pe!==void 0;if(ae.texture=Te.tex,ke&&!Te.dirty){O.push(ae.tileID);continue}let Se;y.bindFramebuffer.set(Te.fb.framebuffer),this.renderedToTile=!1,Te.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),Te.dirty=!1);for(let Ae=R.start;Ae<=R.end;++Ae){const ce=m.style._layers[U[Ae]];if(ce.isHidden(m.transform.zoom))continue;const xe=m.style._getLayerSourceCache(ce),De=xe?this.proxyToSource[J.key][xe.id]:[J];if(!De)continue;const Re=De;y.viewport.set([0,0,Te.fb.width,Te.fb.height]),Se!==(xe?xe.id:null)&&(this._setupStencil(Te,De,ce,xe),Se=xe?xe.id:null),m.renderLayer(m,xe,ce,Re)}this.renderedToTile?(Te.dirty=!0,O.push(ae.tileID)):ke||--Y,Y===5&&(Y=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,m.width,m.height]),R.end+1}postRender(){}renderCacheEfficiency(u){const m=u.order.length;if(m===0)return{efficiency:100};let y,S=0,k=0,R=!1;for(let O=0;O<m;++O){const U=u._layers[u.order[O]];this._style.isLayerDraped(U)?(R&&++S,++k):R||(R=!0,y=U.id)}return k===0?{efficiency:100}:{efficiency:100*(1-S/k),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter((m=>m.dem)).forEach((m=>{u=Math.min(u,m.dem.tree.minimums[0])})),u===0?u:(u-30)*this._exaggeration}raycast(u,m,y){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((k=>k.dem)).map((k=>{const R=k.tileID,O=1<<R.overscaledZ,{x:U,y:Y}=R.canonical,J=U/O,ae=(U+1)/O,pe=Y/O,Te=(Y+1)/O;return{minx:J,miny:pe,maxx:ae,maxy:Te,t:k.dem.tree.raycastRoot(J,pe,ae,Te,u,m,y),tile:k}}));S.sort(((k,R)=>(k.t!==null?k.t:Number.MAX_VALUE)-(R.t!==null?R.t:Number.MAX_VALUE)));for(const k of S){if(k.t==null)return null;const R=k.tile.dem.tree.raycast(k.minx,k.miny,k.maxx,k.maxy,u,m,y);if(R!=null)return R}return null}_createFBO(){const u=this.painter.context,m=u.gl,y=this.drapeBufferSize;u.activeTexture.set(m.TEXTURE0);const S=new s.Texture(u,{width:y[0],height:y[1],data:null},m.RGBA);S.bind(m.LINEAR,m.CLAMP_TO_EDGE);const k=u.createFramebuffer(y[0],y[1],!1);return k.colorAttachment.set(S.texture),k.depthAttachment=new st(u,k.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,k.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):k.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:k,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some((u=>{const m=this._style._layers[u],y=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!y&&m.shouldRedrape():!y&&m.hasTransition()}))}_clearLineLayersFromRenderCache(){let u=!1;for(const y of this._style._getSources())if(y instanceof fn){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],k=this._style._getLayerSourceCache(S);if(k&&!m[k.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof s.ZoomDependentExpression){m[k.id]=!0;for(const R of this.proxyCoords){const O=this.proxyToSource[R.key][k.id];if(O)for(const U of O)this._clearRenderCacheForTile(k.id,U)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof sn){u=!0;break}if(!u)return;const m={};for(let y=0;y<this._style.order.length;++y){const S=this._style._layers[this._style.order[y]],k=this._style._getLayerSourceCache(S);if(!k||m[k.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const R=S.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const U=this.proxyToSource[O.key][k.id];if(U)for(const Y of U){const J=xn(k.getTile(Y),k.findLoadedParent(Y,0),k,this.painter.transform,R);(J.opacity!==1||J.mix!==0)&&this._clearRenderCacheForTile(k.id,Y)}}}}_setupDrapedRenderBatches(){const u=this._style.order,m=u.length;if(m===0)return;const y=[];let S,k=0,R=this._style._layers[u[k]];for(;!this._style.isLayerDraped(R)&&R.isHidden(this.painter.transform.zoom)&&++k<m;)R=this._style._layers[u[k]];for(;k<m;++k){const O=this._style._layers[u[k]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?S===void 0&&(S=k):S!==void 0&&(y.push({start:S,end:k-1}),S=void 0))}S!==void 0&&y.push({start:S,end:k-1}),this._drapedRenderBatches=y}_setupRenderCache(u){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const R=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let O=0;O<R.length;++O){const U=Object.values(R[O]);m.renderCachePool.push(...U)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,S=this._tilesDirty;for(let R=y.length-1;R>=0;R--){const O=y[R];if(m.getTileByID(O.key),m.proxyCachedFBO[O.key]!==void 0){const U=u[O.key],Y=this.proxyToSource[O.key];let J=0;for(const ae in Y){const pe=Y[ae],Te=U[ae];if(!Te||Te.length!==pe.length||pe.some(((ke,Se)=>ke!==Te[Se]||S[ae]&&S[ae].hasOwnProperty(ke.key)))){J=-1;break}++J}for(const ae in m.proxyCachedFBO[O.key])m.renderCache[m.proxyCachedFBO[O.key][ae]].dirty=J<0||J!==Object.values(U).length}}const k=[...this._drapedRenderBatches];k.sort(((R,O)=>O.end-O.start-(R.end-R.start)));for(const R of k)for(const O of y){if(m.proxyCachedFBO[O.key])continue;let U=m.renderCachePool.pop();U===void 0&&m.renderCache.length<50&&(U=m.renderCache.length,m.renderCache.push(this._createFBO())),U!==void 0&&(m.proxyCachedFBO[O.key]={},m.proxyCachedFBO[O.key][R.start]=U,m.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(u,m,y,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const k=this.painter.context,R=k.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let O;if(y.isTileClipped())O=m.length,this._overlapStencilMode.test={func:R.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:R.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(k.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(u,m){const y=this.painter,S=this.painter.context,k=S.gl;y._tileClippingMaskIDs={},S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const R=y.useProgram("clippingMask");for(const O of u){const U=y._tileClippingMaskIDs[O.key]=--m;R.draw(S,k.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:k.ALWAYS,mask:0},U,255,k.KEEP,k.KEEP,k.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(O.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(u){const m=this.painter.transform;if(u.x<0||u.x>m.width||u.y<0||u.y>m.height)return null;const y=[u.x,u.y,1,1];s.transformMat4$1(y,y,m.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=m.worldSize,y[1]/=m.worldSize;const S=m._camera.position,k=s.mercatorZfromAltitude(1,m.center.lat),R=[S[0],S[1],S[2]/k,0],O=s.subtract([],y.slice(0,3),R);s.normalize(O,O);const U=this.raycast(R,O,this._exaggeration);return U!==null&&U?(s.scaleAndAdd(R,R,O,U),R[3]=R[2],R[2]*=k,R):null}drawDepth(){const u=this.painter,m=u.context,y=this.proxySourceCache,S=Math.ceil(u.width),k=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===S&&this._depthFBO.height===k||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const R=m.gl,O=m.createFramebuffer(S,k,!0);m.activeTexture.set(R.TEXTURE0);const U=new s.Texture(m,{width:S,height:k,data:null},R.RGBA);U.bind(R.NEAREST,R.CLAMP_TO_EDGE),O.colorAttachment.set(U.texture);const Y=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,S,k);O.depthAttachment.set(Y),this._depthFBO=O,this._depthTexture=U}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,S,k]),(function(R,O,U,Y){if(R.transform.projection.name==="globe")return;const J=R.context,ae=J.gl;J.clear({depth:1});const pe=R.useProgram("terrainDepth"),Te=new s.DepthMode(ae.LESS,s.DepthMode.ReadWrite,R.depthRangeFor3D);for(const ke of Y){const Se=U.getTile(ke),Ae=ho(ke.projMatrix,0);O.setupElevationDraw(Se,pe),pe.draw(J,ae.TRIANGLES,Te,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Ae,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}})(u,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,m,y){if(u.getSource()instanceof ei)return this._setupProxiedCoordsForImageSource(u,m,y);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const S=this.proxiedCoords[u.id]=[],k=this.proxyCoords;for(let O=0;O<k.length;O++){const U=k[O],Y=this._findTileCoveringTileID(U,u);if(Y){const J=this._createProxiedId(U,Y,y[U.key]&&y[U.key][u.id]);S.push(J),this.proxyToSource[U.key][u.id]=[J]}}let R=!1;for(let O=0;O<m.length;O++){const U=u.getTile(m[O]);if(!U||!U.hasData())continue;const Y=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==U.tileID.canonical.z){const J=this.proxyToSource[Y.tileID.key][u.id],ae=this._createProxiedId(Y.tileID,U,y[Y.tileID.key]&&y[Y.tileID.key][u.id]);J?J.splice(J.length-1,0,ae):this.proxyToSource[Y.tileID.key][u.id]=[ae],S.push(ae),R=!0}}this._sourceTilesOverlap[u.id]=R}_setupProxiedCoordsForImageSource(u,m,y){if(!u.getSource().loaded())return;const S=this.proxiedCoords[u.id]=[],k=this.proxyCoords,R=u.getSource(),O=new s.Point(R.tileID.x,R.tileID.y)._div(1<<R.tileID.z),U=R.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce(((J,ae)=>(J.min.x=Math.min(J.min.x,ae.x-O.x),J.min.y=Math.min(J.min.y,ae.y-O.y),J.max.x=Math.max(J.max.x,ae.x-O.x),J.max.y=Math.max(J.max.y,ae.y-O.y),J)),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(J,ae)=>{const pe=J.wrap+J.canonical.x/(1<<J.canonical.z),Te=J.canonical.y/(1<<J.canonical.z),ke=s.EXTENT/(1<<J.canonical.z),Se=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Ae=ae.canonical.y/(1<<ae.canonical.z);return pe+ke<Se+U.min.x||pe>Se+U.max.x||Te+ke<Ae+U.min.y||Te>Ae+U.max.y};for(let J=0;J<k.length;J++){const ae=k[J];for(let pe=0;pe<m.length;pe++){const Te=u.getTile(m[pe]);if(!Te||!Te.hasData()||Y(ae,Te.tileID))continue;const ke=this._createProxiedId(ae,Te,y[ae.key]&&y[ae.key][u.id]),Se=this.proxyToSource[ae.key][u.id];Se?Se.push(ke):this.proxyToSource[ae.key][u.id]=[ke],S.push(ke)}}}_createProxiedId(u,m,y){let S=this.orthoMatrix;if(y){const k=y.find((R=>R.key===m.tileID.key));if(k)return k}if(m.tileID.key!==u.key){const k=u.canonical.z-m.tileID.canonical.z;let R,O,U;S=s.create();const Y=m.tileID.wrap-u.wrap<<u.overscaledZ;k>0?(R=s.EXTENT>>k,O=R*((m.tileID.canonical.x<<k)-u.canonical.x+Y),U=R*((m.tileID.canonical.y<<k)-u.canonical.y)):(R=s.EXTENT<<-k,O=s.EXTENT*(m.tileID.canonical.x-(u.canonical.x+Y<<-k)),U=s.EXTENT*(m.tileID.canonical.y-(u.canonical.y<<-k))),s.ortho(S,0,R,0,R,0,1),s.translate(S,S,[O,U,0])}return new Ai(m.tileID,u.key,S)}_findTileCoveringTileID(u,m){let y=m.getTile(u);if(y&&y.hasData())return y;const S=this._findCoveringTileCache[m.id],k=S[u.key];if(y=k?m.getTileByID(k):null,y&&y.hasData()||k===null)return y;let R=y?y.tileID:u,O=R.overscaledZ;const U=m.getSource().minzoom,Y=[];if(!k){const ae=m.getSource().maxzoom;if(u.canonical.z>=ae){const pe=u.canonical.z-ae;m.getSource().reparseOverscaled?(O=Math.max(u.canonical.z+2,m.transform.tileZoom),R=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>pe,u.canonical.y>>pe)):pe!==0&&(O=ae,R=new s.OverscaledTileID(O,u.wrap,ae,u.canonical.x>>pe,u.canonical.y>>pe))}R.key!==u.key&&(Y.push(R.key),y=m.getTile(R))}const J=ae=>{Y.forEach((pe=>{S[pe]=ae})),Y.length=0};for(O-=1;O>=U&&(!y||!y.hasData());O--){y&&J(y.tileID.key);const ae=R.calculateScaledKey(O);if(y=m.getTileByID(ae),y&&y.hasData())break;const pe=S[ae];if(pe===null)break;pe===void 0?Y.push(ae):y=m.getTileByID(pe)}return J(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,m){let y=this._tilesDirty[u];y||(y=this._tilesDirty[u]={}),y[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=(function(m){let y=0;const S=new s.StructArrayLayout2ui4,k=131;for(let R=1;R<129;R++){for(let O=1;O<129;O++)y=R*k+O,S.emplaceBack(y,y+1),S.emplaceBack(y,y+k),S.emplaceBack(y+1,y+k),R===128&&S.emplaceBack(y+k,y+k+1);S.emplaceBack(y+1,y+1+k)}return S})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class ti{static cacheKey(u,m,y,S){let k=`${m}${S?S.cacheKey:""}`;for(const R of y)u.usedDefines.includes(R)&&(k+=`/${R}`);return k}constructor(u,m,y,S,k,R){const O=u.gl;this.program=O.createProgram();const U=(function(ce){const xe=[];for(let De=0;De<ce.length;De++){if(ce[De]===null)continue;const Re=ce[De].split(" ");xe.push(Re.pop())}return xe})(y.staticAttributes),Y=S?S.getBinderAttributes():[],J=U.concat(Y);let ae=S?S.defines():[];ae=ae.concat(R.map((ce=>`#define ${ce}`)));const pe=u.isWebGL2?`#version 300 es
`:"",Te=pe+ae.concat(u.extStandardDerivatives&&pe.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Tu):Tu,Tu,vl,Wc.fragmentSource,Ja.fragmentSource,y.fragmentSource).join(`
`),ke=pe+ae.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,vl,Wc.vertexSource,Ja.vertexSource,_c.vertexSource,y.vertexSource).join(`
`),Se=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(Se,Te),O.compileShader(Se),O.attachShader(this.program,Se);const Ae=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(Ae,ke),O.compileShader(Ae),O.attachShader(this.program,Ae),this.attributes={},this.numAttributes=J.length;for(let ce=0;ce<this.numAttributes;ce++)J[ce]&&(O.bindAttribLocation(this.program,ce,J[ce]),this.attributes[J[ce]]=ce);O.linkProgram(this.program),O.deleteShader(Ae),O.deleteShader(Se),this.fixedUniforms=k(u),this.binderUniforms=S?S.getUniforms(u):[],R.includes("TERRAIN")&&(this.terrainUniforms=(ce=>({u_dem:new s.Uniform1i(ce),u_dem_prev:new s.Uniform1i(ce),u_dem_unpack:new s.Uniform4f(ce),u_dem_tl:new s.Uniform2f(ce),u_dem_scale:new s.Uniform1f(ce),u_dem_tl_prev:new s.Uniform2f(ce),u_dem_scale_prev:new s.Uniform1f(ce),u_dem_size:new s.Uniform1f(ce),u_dem_lerp:new s.Uniform1f(ce),u_exaggeration:new s.Uniform1f(ce),u_depth:new s.Uniform1i(ce),u_depth_size_inv:new s.Uniform2f(ce),u_meter_to_dem:new s.Uniform1f(ce),u_label_plane_matrix_inv:new s.UniformMatrix4f(ce)}))(u)),R.includes("GLOBE")&&(this.globeUniforms=(ce=>({u_tile_tl_up:new s.Uniform3f(ce),u_tile_tr_up:new s.Uniform3f(ce),u_tile_br_up:new s.Uniform3f(ce),u_tile_bl_up:new s.Uniform3f(ce),u_tile_up_scale:new s.Uniform1f(ce)}))(u)),R.includes("FOG")&&(this.fogUniforms=(ce=>({u_fog_matrix:new s.UniformMatrix4f(ce),u_fog_range:new s.Uniform2f(ce),u_fog_color:new s.Uniform4f(ce),u_fog_horizon_blend:new s.Uniform1f(ce),u_fog_temporal_offset:new s.Uniform1f(ce),u_frustum_tl:new s.Uniform3f(ce),u_frustum_tr:new s.Uniform3f(ce),u_frustum_br:new s.Uniform3f(ce),u_frustum_bl:new s.Uniform3f(ce),u_globe_pos:new s.Uniform3f(ce),u_globe_radius:new s.Uniform1f(ce),u_globe_transition:new s.Uniform1f(ce),u_is_globe:new s.Uniform1i(ce),u_viewport:new s.Uniform2f(ce)}))(u))}}setTerrainUniformValues(u,m){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setGlobeUniformValues(u,m){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S]&&y[S].set(this.program,S,m[S])}}setFogUniformValues(u,m){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const S in m)y[S].set(this.program,S,m[S])}}draw(u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se){const Ae=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(S),u.setColorMode(k),u.setCullFace(R);for(const xe of Object.keys(this.fixedUniforms))this.fixedUniforms[xe].set(this.program,xe,O[xe]);ke&&ke.setUniforms(this.program,u,this.binderUniforms,pe,{zoom:Te});const ce={[Ae.LINES]:2,[Ae.TRIANGLES]:3,[Ae.LINE_STRIP]:1}[m];for(const xe of ae.get()){const De=xe.vaos||(xe.vaos={});(De[U]||(De[U]=new Hc)).bind(u,this,Y,ke?ke.getPaintVertexBuffers():[],J,xe.vertexOffset,Se||[]),Ae.drawElements(m,xe.primitiveLength*ce,Ae.UNSIGNED_SHORT,xe.primitiveOffset*ce*2)}}}function Zs(_,u){const m=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,_.transform.tileZoom)/m,S=y*(u.tileID.canonical.x+u.tileID.wrap*m),k=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/We(u,1,_.transform.tileZoom),u_pixel_coord_upper:[S>>16,k>>16],u_pixel_coord_lower:[65535&S,65535&k]}}const Qa=s.create(),wa=(_,u,m,y,S,k,R,O,U,Y,J)=>{const ae=u.style.light,pe=ae.properties.get("position"),Te=[pe.x,pe.y,pe.z],ke=s.create$1();ae.properties.get("anchor")==="viewport"&&(s.fromRotation(ke,-u.transform.angle),s.transformMat3(Te,Te,ke));const Se=ae.properties.get("color"),Ae=u.transform,ce={u_matrix:_,u_lightpos:Te,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Se.r,Se.g,Se.b],u_vertical_gradient:+m,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qa,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:S,u_edge_radius:k};return Ae.projection.name==="globe"&&(ce.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],ce.u_zoom_transition=U,ce.u_inv_rot_matrix=J,ce.u_merc_center=Y,ce.u_up_dir=Ae.projection.upVector(new s.CanonicalTileID(0,0,0),Y[0]*s.EXTENT,Y[1]*s.EXTENT),ce.u_height_lift=O),ce},qc=(_,u,m,y,S,k,R,O,U,Y,J,ae)=>{const pe=wa(_,u,m,y,S,k,R,U,Y,J,ae),Te={u_height_factor:-Math.pow(2,R.overscaledZ)/O.tileSize/8};return s.extend(pe,Zs(u,O),Te)},el=_=>({u_matrix:_}),bm=(_,u,m)=>s.extend(el(_),Zs(u,m)),O_=(_,u)=>({u_matrix:_,u_world:u}),V_=(_,u,m,y)=>s.extend(bm(_,u,m),{u_world:y}),B_=s.create(),Qo=(_,u,m,y,S,k)=>{const R=_.transform,O=R.projection.name==="globe";let U;if(k.paint.get("circle-pitch-alignment")==="map")if(O){const J=s.globePixelsToTileUnits(R.zoom,u.canonical)*R._pixelsPerMercatorPixel;U=Float32Array.from([J,0,0,J])}else U=R.calculatePixelsToTileUnitsMatrix(m);else U=new Float32Array([R.pixelsToGLUnits[0],0,0,R.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:R.cameraToCenterDistance,u_matrix:_.translatePosMatrix(u.projMatrix,m,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:U,u_inv_rot_matrix:B_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){Y.u_inv_rot_matrix=y,Y.u_merc_center=S,Y.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],Y.u_zoom_transition=s.globeToMercatorTransition(R.zoom);const J=S[0]*s.EXTENT,ae=S[1]*s.EXTENT;Y.u_up_dir=R.projection.upVector(new s.CanonicalTileID(0,0,0),J,ae)}return Y},zh=_=>{const u=[];return _.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},Nh=(_,u,m,y)=>{const S=s.EXTENT/m.tileSize;return{u_matrix:_,u_camera_to_center_distance:u.getCameraToCenterDistance(y),u_extrude_scale:[u.pixelsToGLUnits[0]/S,u.pixelsToGLUnits[1]/S]}},yd=(_,u,m=1)=>({u_matrix:_,u_color:u,u_overlay:0,u_overlay_scale:m}),bg=s.create(),xg=(_,u,m,y,S,k,R)=>{const O=_.transform,U=O.projection.name==="globe",Y=U?s.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel:We(m,1,k),J={u_matrix:u.projMatrix,u_extrude_scale:Y,u_intensity:R,u_inv_rot_matrix:bg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){J.u_inv_rot_matrix=y,J.u_merc_center=S,J.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],J.u_zoom_transition=s.globeToMercatorTransition(O.zoom);const ae=S[0]*s.EXTENT,pe=S[1]*s.EXTENT;J.u_up_dir=O.projection.upVector(new s.CanonicalTileID(0,0,0),ae,pe)}return J},wg=(_,u,m,y,S,k,R)=>{const O=_.transform,U=O.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:xm(_,u,m,y),u_pixels_to_tile_units:U,u_device_pixel_ratio:k,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:S,u_texsize:ku(m)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Cu(u,_.transform),u_alpha_discard_threshold:0,u_trim_offset:R}},yc=(_,u,m,y,S)=>{const k=_.transform;return{u_matrix:xm(_,u,m,y),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:S,u_image:0,u_tile_units_to_pixels:Cu(u,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Cu(_,u){return 1/We(_,1,u.tileZoom)}function xm(_,u,m,y){return _.translatePosMatrix(y||u.tileID.projMatrix,u,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function ku(_){const u=_.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const wm=(_,u,m,y,S,k)=>{return{u_matrix:_,u_tl_parent:u,u_scale_parent:m,u_fade_t:y.mix,u_opacity:y.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(O=S.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(R=S.paint.get("raster-contrast"),R>0?1/(1-R):1+R),u_spin_weights:yl(S.paint.get("raster-hue-rotate")),u_perspective_transform:k};var R,O};function yl(_){_*=Math.PI/180;const u=Math.sin(_),m=Math.cos(_);return[(2*m+1)/3,(-Math.sqrt(3)*u-m+1)/3,(Math.sqrt(3)*u-m+1)/3]}const bd=s.create(),$h=(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se)=>{const Ae=S.transform,ce={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:R,u_coord_matrix:O,u_is_text:+U,u_pitch_with_map:+y,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bd,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:bd,u_up_vector:[0,-1,0]};return Se.name==="globe"&&(ce.u_tile_id=[J.canonical.x,J.canonical.y,1<<J.canonical.z],ce.u_zoom_transition=ae,ce.u_inv_rot_matrix=Te,ce.u_merc_center=pe,ce.u_camera_forward=Ae._camera.forward(),ce.u_ecef_origin=s.globeECEFOrigin(Ae.globeMatrix,J.toUnwrapped()),ce.u_tile_matrix=Float32Array.from(Ae.globeMatrix),ce.u_up_vector=ke),ce},xd=(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se,Ae)=>s.extend($h(_,u,m,y,S,k,R,O,U,Y,ae,pe,Te,ke,Se,Ae),{u_gamma_scale:y?S.transform.cameraToCenterDistance*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:1}),wd=(_,u,m,y,S,k,R,O,U,Y,J,ae,pe,Te,ke,Se)=>s.extend(xd(_,u,m,y,S,k,R,O,!0,U,!0,J,ae,pe,Te,ke,Se),{u_texsize_icon:Y,u_texture_icon:1}),Uh=(_,u,m)=>({u_matrix:_,u_opacity:u,u_color:m}),Tm=(_,u,m,y,S)=>s.extend((function(k,R,O){const U=R.imageManager.getPattern(k.toString()),{width:Y,height:J}=R.imageManager.getPixelSize(),ae=Math.pow(2,O.tileID.overscaledZ),pe=O.tileSize*Math.pow(2,R.transform.tileZoom)/ae,Te=pe*(O.tileID.canonical.x+O.tileID.wrap*ae),ke=pe*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:U.tl,u_pattern_br:U.br,u_texsize:[Y,J],u_pattern_size:U.displaySize,u_tile_units_to_pixels:1/We(O,1,R.transform.tileZoom),u_pixel_coord_upper:[Te>>16,ke>>16],u_pixel_coord_lower:[65535&Te,65535&ke]}})(y,m,S),{u_matrix:_,u_opacity:u}),Ro={fillExtrusion:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_height_factor:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_)}),fill:_=>({u_matrix:new s.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),fillOutline:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),collisionBox:_=>({u_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new s.UniformMatrix4f(_),u_inv_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_viewport_size:new s.Uniform2f(_)}),debug:_=>({u_color:new s.UniformColor(_),u_matrix:new s.UniformMatrix4f(_),u_overlay:new s.Uniform1i(_),u_overlay_scale:new s.Uniform1f(_)}),clippingMask:_=>({u_matrix:new s.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new s.Uniform1f(_),u_intensity:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),heatmapTexture:_=>({u_image:new s.Uniform1i(_),u_color_ramp:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_)}),hillshade:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_latrange:new s.Uniform2f(_),u_light:new s.Uniform2f(_),u_shadow:new s.UniformColor(_),u_highlight:new s.UniformColor(_),u_accent:new s.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_dimension:new s.Uniform2f(_),u_zoom:new s.Uniform1f(_),u_unpack:new s.Uniform4f(_)}),line:_=>({u_matrix:new s.UniformMatrix4f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_units_to_pixels:new s.Uniform2f(_),u_dash_image:new s.Uniform1i(_),u_gradient_image:new s.Uniform1i(_),u_image_height:new s.Uniform1f(_),u_texsize:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_),u_trim_offset:new s.Uniform2f(_)}),linePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_texsize:new s.Uniform2f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_units_to_pixels:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_)}),raster:_=>({u_matrix:new s.UniformMatrix4f(_),u_tl_parent:new s.Uniform2f(_),u_scale_parent:new s.Uniform1f(_),u_fade_t:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_image0:new s.Uniform1i(_),u_image1:new s.Uniform1i(_),u_brightness_low:new s.Uniform1f(_),u_brightness_high:new s.Uniform1f(_),u_saturation_factor:new s.Uniform1f(_),u_contrast_factor:new s.Uniform1f(_),u_spin_weights:new s.Uniform3f(_),u_perspective_transform:new s.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_texture:new s.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_is_halo:new s.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texsize_icon:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_texture_icon:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_is_halo:new s.Uniform1i(_)}),background:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_color:new s.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_pattern_tl:new s.Uniform2f(_),u_pattern_br:new s.Uniform2f(_),u_texsize:new s.Uniform2f(_),u_pattern_size:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),terrainRaster:Gc,terrainDepth:Gc,skybox:_=>({u_matrix:new s.UniformMatrix4f(_),u_sun_direction:new s.Uniform3f(_),u_cubemap:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new s.UniformMatrix4f(_),u_color_ramp:new s.Uniform1i(_),u_center_direction:new s.Uniform3f(_),u_radius:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new s.UniformMatrix3f(_),u_sun_direction:new s.Uniform3f(_),u_sun_intensity:new s.Uniform1f(_),u_color_tint_r:new s.Uniform4f(_),u_color_tint_m:new s.Uniform4f(_),u_luminance:new s.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new s.UniformMatrix4f(_),u_globe_matrix:new s.UniformMatrix4f(_),u_normalize_matrix:new s.UniformMatrix4f(_),u_merc_matrix:new s.UniformMatrix4f(_),u_zoom_transition:new s.Uniform1f(_),u_merc_center:new s.Uniform2f(_),u_image0:new s.Uniform1i(_),u_grid_matrix:new s.UniformMatrix3f(_),u_skirt_height:new s.Uniform1f(_),u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_globe_pos:new s.Uniform3f(_),u_globe_radius:new s.Uniform1f(_),u_viewport:new s.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_horizon:new s.Uniform1f(_),u_transition:new s.Uniform1f(_),u_fadeout_range:new s.Uniform1f(_),u_color:new s.Uniform4f(_),u_high_color:new s.Uniform4f(_),u_space_color:new s.Uniform4f(_),u_star_intensity:new s.Uniform1f(_),u_star_density:new s.Uniform1f(_),u_star_size:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_),u_horizon_angle:new s.Uniform1f(_),u_rotation_matrix:new s.UniformMatrix4f(_)})};let jh;function Td(_,u,m,y,S,k,R){const O=_.context,U=O.gl,Y=_.transform,J=_.useProgram("collisionBox"),ae=[];let pe=0,Te=0;for(let Re=0;Re<y.length;Re++){const Ge=y[Re],Ye=u.getTile(Ge),et=Ye.getBucket(m);if(!et)continue;const ht=Ar(Ge,et,Y);let lt=ht;S[0]===0&&S[1]===0||(lt=_.translatePosMatrix(ht,Ye,S,k));const xt=R?et.textCollisionBox:et.iconCollisionBox,Xt=et.collisionCircleArray;if(Xt.length>0){const ft=s.create(),Bt=lt;s.mul(ft,et.placementInvProjMatrix,Y.glCoordMatrix),s.mul(ft,ft,et.placementViewportMatrix),ae.push({circleArray:Xt,circleOffset:Te,transform:Bt,invTransform:ft,projection:et.getProjection()}),pe+=Xt.length/4,Te=pe}xt&&(_.terrain&&_.terrain.setupElevationDraw(Ye,J),J.draw(O,U.LINES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,Nh(lt,Y,Ye,et.getProjection()),m.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,null,Y.zoom,null,[xt.collisionVertexBuffer,xt.collisionVertexBufferExt]))}if(!R||!ae.length)return;const ke=_.useProgram("collisionCircle"),Se=new s.StructArrayLayout2f1f2i16;Se.resize(4*pe),Se._trim();let Ae=0;for(const Re of ae)for(let Ge=0;Ge<Re.circleArray.length/4;Ge++){const Ye=4*Ge,et=Re.circleArray[Ye+0],ht=Re.circleArray[Ye+1],lt=Re.circleArray[Ye+2],xt=Re.circleArray[Ye+3];Se.emplace(Ae++,et,ht,lt,xt,0),Se.emplace(Ae++,et,ht,lt,xt,1),Se.emplace(Ae++,et,ht,lt,xt,2),Se.emplace(Ae++,et,ht,lt,xt,3)}(!jh||jh.length<2*pe)&&(jh=(function(Re){const Ge=2*Re,Ye=new s.StructArrayLayout3ui6;Ye.resize(Ge),Ye._trim();for(let et=0;et<Ge;et++){const ht=6*et;Ye.uint16[ht+0]=4*et+0,Ye.uint16[ht+1]=4*et+1,Ye.uint16[ht+2]=4*et+2,Ye.uint16[ht+3]=4*et+2,Ye.uint16[ht+4]=4*et+3,Ye.uint16[ht+5]=4*et+0}return Ye})(pe));const ce=O.createIndexBuffer(jh,!0),xe=O.createVertexBuffer(Se,s.collisionCircleLayout.members,!0);for(const Re of ae){const Ge={u_matrix:Re.transform,u_inv_matrix:Re.invTransform,u_camera_to_center_distance:(De=Y).getCameraToCenterDistance(Re.projection),u_viewport_size:[De.width,De.height]};ke.draw(O,U.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,Ge,m.id,xe,ce,s.SegmentVector.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,Y.zoom)}var De;xe.destroy(),ce.destroy()}const Sm=s.create();function Wh({width:_,height:u,anchor:m,textOffset:y,textScale:S},k){const{horizontalAlign:R,verticalAlign:O}=s.getAnchorAlignment(m),U=-(R-.5)*_,Y=-(O-.5)*u,J=s.evaluateVariableOffset(m,y);return new s.Point((U/S+J[0])*k,(Y/S+J[1])*k)}function F_(_,u,m,y,S,k,R,O,U,Y,J){const ae=_.text.placedSymbolArray,pe=_.text.dynamicLayoutVertexArray,Te=_.icon.dynamicLayoutVertexArray,ke={},Se=_.getProjection(),Ae=Hi(O,Se,k),ce=k.elevation,xe=Se.upVectorScale(O.canonical,k.center.lat,k.worldSize).metersToTile;pe.clear();for(let De=0;De<ae.length;De++){const Re=ae.get(De),{tileAnchorX:Ge,tileAnchorY:Ye,numGlyphs:et}=Re,ht=Re.hidden||!Re.crossTileID||_.allowVerticalPlacement&&!Re.placedOrientation?null:y[Re.crossTileID];if(ht){let lt=0,xt=0,Xt=0;if(ce){const Qt=ce?ce.getAtTileOffset(O,Ge,Ye):0,[Rn,Kn,En]=Se.upVector(O.canonical,Ge,Ye);lt=Qt*Rn*xe,xt=Qt*Kn*xe,Xt=Qt*En*xe}let[ft,Bt,Et,Jt]=Qi(Re.projectedAnchorX+lt,Re.projectedAnchorY+xt,Re.projectedAnchorZ+Xt,m?Ae:R);const _t=$l(k.getCameraToCenterDistance(Se),Jt);let At=S.evaluateSizeForFeature(_.textSizeData,Y,Re)*_t/s.ONE_EM;m&&(At*=_.tilePixelRatio/U);const qt=Wh(ht,At);m?({x:ft,y:Bt,z:Et}=Se.projectTilePoint(Ge+qt.x,Ye+qt.y,O.canonical),[ft,Bt,Et]=Qi(ft+lt,Bt+xt,Et+Xt,R)):(u&&qt._rotate(-k.angle),ft+=qt.x,Bt+=qt.y,Et=0);const jt=_.allowVerticalPlacement&&Re.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Qt=0;Qt<et;Qt++)s.addDynamicAttributes(pe,ft,Bt,Et,jt);J&&Re.associatedIconIndex>=0&&(ke[Re.associatedIconIndex]={x:ft,y:Bt,z:Et,angle:jt})}else co(et,pe)}if(J){Te.clear();const De=_.icon.placedSymbolArray;for(let Re=0;Re<De.length;Re++){const Ge=De.get(Re),{numGlyphs:Ye}=Ge,et=ke[Re];if(Ge.hidden||!et)co(Ye,Te);else{const{x:ht,y:lt,z:xt,angle:Xt}=et;for(let ft=0;ft<Ye;ft++)s.addDynamicAttributes(Te,ht,lt,xt,Xt)}}_.icon.dynamicLayoutVertexBuffer.updateData(Te)}_.text.dynamicLayoutVertexBuffer.updateData(pe)}function Em(_,u,m){return m.iconsInText&&u?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Tg(_,u,m,y,S,k,R,O,U,Y,J,ae){const pe=_.context,Te=pe.gl,ke=_.transform,Se=O==="map",Ae=U==="map",ce=Se&&m.layout.get("symbol-placement")!=="point",xe=Se&&!Ae&&!ce,De=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Re=!1;const Ge=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),Ye=[s.mercatorXfromLng(ke.center.lng),s.mercatorYfromLat(ke.center.lat)],et=m.layout.get("text-variable-anchor"),ht=ke.projection.name==="globe",lt=[],xt=[0,-1,0];let Xt=xt;!ht&&!ke.mercatorFromTransition||Se||(Xt=(function(ft){const Bt=ft._camera.getWorldToCamera(ft.worldSize,1),Et=s.multiply([],Bt,ft.globeMatrix);s.invert(Et,Et);const Jt=[0,0,0],_t=[0,1,0,0];return s.transformMat4$1(_t,_t,Et),Jt[0]=_t[0],Jt[1]=_t[1],Jt[2]=_t[2],s.normalize(Jt,Jt),Jt})(ke));for(const ft of y){const Bt=u.getTile(ft),Et=Bt.getBucket(m);if(!Et||Et.projection.name==="mercator"&&ht)continue;const Jt=S?Et.text:Et.icon;if(!Jt||Et.fullyClipped||!Jt.segments.get().length)continue;const _t=Jt.programConfigurations.get(m.id),At=S||Et.sdfIcons,qt=S?Et.textSizeData:Et.iconSizeData,jt=Ae||ke.pitch!==0,Qt=s.evaluateSizeForZoom(qt,ke.zoom);let Rn,Kn,En,Vn,_i=[0,0],vi=null;if(S)Kn=Bt.glyphAtlasTexture,En=Te.LINEAR,Rn=Bt.glyphAtlasTexture.size,Et.iconsInText&&(_i=Bt.imageAtlasTexture.size,vi=Bt.imageAtlasTexture,Vn=jt||_.options.rotating||_.options.zooming||qt.kind==="composite"||qt.kind==="camera"?Te.LINEAR:Te.NEAREST);else{const rl=m.layout.get("icon-size").constantOr(0)!==1||Et.iconsNeedLinear;Kn=Bt.imageAtlasTexture,En=At||_.options.rotating||_.options.zooming||rl||jt?Te.LINEAR:Te.NEAREST,Rn=Bt.imageAtlasTexture.size}const Mn=Et.projection.name==="globe",Bi=Mn?Xt:xt,qi=Mn?s.globeToMercatorTransition(ke.zoom):0,er=Hi(ft,Et.getProjection(),ke),Ki=ke.calculatePixelsToTileUnitsMatrix(Bt),Ws=Ot(er,Bt.tileID.canonical,Ae,Se,ke,Et.getProjection(),Ki),Ms=_.terrain&&Ae&&ce?s.invert(s.create(),Ws):Sm,Sa=Wi(er,Bt.tileID.canonical,Ae,Se,ke,Et.getProjection(),Ki),Js=et&&Et.hasTextData(),sr=m.layout.get("icon-text-fit")!=="none"&&Js&&Et.hasIconData();if(ce){const rl=ke.elevation,Kl=rl?rl.getAtTileOffsetFunc(ft,ke.center.lat,ke.worldSize,Et.getProjection()):null,Nd=pa(er,Bt.tileID.canonical,Ae,Se,ke,Et.getProjection(),Ki);pc(Et,er,_,S,Nd,Sa,Ae,Y,Kl,ft)}const Xi=ce||S&&et||sr,Mi=_.translatePosMatrix(er,Bt,k,R),Fr=Xi?Sm:Ws,Qs=_.translatePosMatrix(Sa,Bt,k,R,!0),lr=Et.getProjection().createInversionMatrix(ke,ft.canonical),fo=[];_.terrainRenderModeElevated()&&Ae&&fo.push("PITCH_WITH_MAP_TERRAIN"),Mn&&fo.push("PROJECTION_GLOBE_VIEW"),Xi&&fo.push("PROJECTED_POS_ON_VIEWPORT");const Fd=At&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qc;Qc=At?Et.iconsInText?wd(qt.kind,Qt,xe,Ae,_,Mi,Fr,Qs,Rn,_i,ft,qi,Ye,lr,Bi,Et.getProjection()):xd(qt.kind,Qt,xe,Ae,_,Mi,Fr,Qs,S,Rn,!0,ft,qi,Ye,lr,Bi,Et.getProjection()):$h(qt.kind,Qt,xe,Ae,_,Mi,Fr,Qs,S,Rn,ft,qi,Ye,lr,Bi,Et.getProjection());const zd={program:_.useProgram(Em(At,S,Et),_t,fo),buffers:Jt,uniformValues:Qc,atlasTexture:Kn,atlasTextureIcon:vi,atlasInterpolation:En,atlasInterpolationIcon:Vn,isSDF:At,hasHalo:Fd,tile:Bt,labelPlaneMatrixInv:Ms};if(De&&Et.canOverlap){Re=!0;const rl=Jt.segments.get();for(const Kl of rl)lt.push({segments:new s.SegmentVector([Kl]),sortKey:Kl.sortKey,state:zd})}else lt.push({segments:Jt.segments,sortKey:0,state:zd})}Re&&lt.sort(((ft,Bt)=>ft.sortKey-Bt.sortKey));for(const ft of lt){const Bt=ft.state;if(_.terrain&&_.terrain.setupElevationDraw(Bt.tile,Bt.program,{useDepthForOcclusion:!ht,labelPlaneMatrixInv:Bt.labelPlaneMatrixInv}),pe.activeTexture.set(Te.TEXTURE0),Bt.atlasTexture.bind(Bt.atlasInterpolation,Te.CLAMP_TO_EDGE),Bt.atlasTextureIcon&&(pe.activeTexture.set(Te.TEXTURE1),Bt.atlasTextureIcon&&Bt.atlasTextureIcon.bind(Bt.atlasInterpolationIcon,Te.CLAMP_TO_EDGE)),Bt.isSDF){const Et=Bt.uniformValues;Bt.hasHalo&&(Et.u_is_halo=1,Sd(Bt.buffers,ft.segments,m,_,Bt.program,Ge,J,ae,Et)),Et.u_is_halo=0}Sd(Bt.buffers,ft.segments,m,_,Bt.program,Ge,J,ae,Bt.uniformValues)}}function Sd(_,u,m,y,S,k,R,O,U){const Y=y.context,J=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];S.draw(Y,Y.gl.TRIANGLES,k,R,O,s.CullFaceMode.disabled,U,m.id,_.layoutVertexBuffer,_.indexBuffer,u,m.paint,y.transform.zoom,_.programConfigurations.get(m.id),J)}function Sg(_,u,m,y,S,k,R){const O=_.context.gl,U=m.paint.get("fill-pattern"),Y=U&&U.constantOr(1);let J,ae,pe,Te,ke;R?(ae=Y&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=O.LINES):(ae=Y?"fillPattern":"fill",J=O.TRIANGLES);for(const Se of y){const Ae=u.getTile(Se);if(Y&&!Ae.patternsLoaded())continue;const ce=Ae.getBucket(m);if(!ce)continue;_.prepareDrawTile();const xe=ce.programConfigurations.get(m.id),De=_.useProgram(ae,xe);Y&&(_.context.activeTexture.set(O.TEXTURE0),Ae.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),xe.updatePaintBuffers());const Re=U.constantOr(null);if(Re&&Ae.imageAtlas){const Ye=Ae.imageAtlas.patternPositions[Re.toString()];Ye&&xe.setConstantPatternPositions(Ye)}const Ge=_.translatePosMatrix(Se.projMatrix,Ae,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(R){Te=ce.indexBuffer2,ke=ce.segments2;const Ye=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];pe=ae==="fillOutlinePattern"&&Y?V_(Ge,_,Ae,Ye):O_(Ge,Ye)}else Te=ce.indexBuffer,ke=ce.segments,pe=Y?bm(Ge,_,Ae):el(Ge);_.prepareDrawProgram(_.context,De,Se.toUnwrapped()),De.draw(_.context,J,S,_.stencilModeForClipping(Se),k,s.CullFaceMode.disabled,pe,m.id,ce.layoutVertexBuffer,Te,ke,m.paint,_.transform.zoom,xe)}}function Hh(_,u,m,y,S,k,R){const O=_.context,U=O.gl,Y=_.transform,J=m.paint.get("fill-extrusion-pattern"),ae=J.constantOr(1),pe=m.paint.get("fill-extrusion-opacity"),Te=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],ke=m.layout.get("fill-extrusion-edge-radius"),Se=ke>0&&!m.paint.get("fill-extrusion-rounded-roof"),Ae=Se?0:ke,ce=Y.projection.name==="globe"?s.fillExtrusionHeightLift():0,xe=Y.projection.name==="globe",De=xe?s.globeToMercatorTransition(Y.zoom):0,Re=[s.mercatorXfromLng(Y.center.lng),s.mercatorYfromLat(Y.center.lat)],Ge=[];xe&&Ge.push("PROJECTION_GLOBE_VIEW"),Te[0]>0&&Ge.push("FAUX_AO"),Se&&Ge.push("ZERO_ROOF_RADIUS");for(const Ye of y){const et=u.getTile(Ye),ht=et.getBucket(m);if(!ht||ht.projection.name!==Y.projection.name)continue;const lt=ht.programConfigurations.get(m.id),xt=_.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",lt,Ge);if(_.terrain){const At=_.terrain;if(_.style.terrainSetForDrapingOnly())At.setupElevationDraw(et,xt,{useMeterToDem:!0});else{if(!ht.enableTerrain)continue;if(At.setupElevationDraw(et,xt,{useMeterToDem:!0}),Cm(O,u,Ye,ht,m,At),!ht.centroidVertexBuffer){const qt=xt.attributes.a_centroid_pos;qt!==void 0&&U.vertexAttrib2f(qt,0,0)}}}ae&&(_.context.activeTexture.set(U.TEXTURE0),et.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),lt.updatePaintBuffers());const Xt=J.constantOr(null);if(Xt&&et.imageAtlas){const At=et.imageAtlas.patternPositions[Xt.toString()];At&&lt.setConstantPatternPositions(At)}const ft=_.translatePosMatrix(Ye.projMatrix,et,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),Bt=Y.projection.createInversionMatrix(Y,Ye.canonical),Et=m.paint.get("fill-extrusion-vertical-gradient"),Jt=ae?qc(ft,_,Et,pe,Te,Ae,Ye,et,ce,De,Re,Bt):wa(ft,_,Et,pe,Te,Ae,Ye,ce,De,Re,Bt);_.prepareDrawProgram(O,xt,Ye.toUnwrapped());const _t=[];_.terrain&&_t.push(ht.centroidVertexBuffer),xe&&_t.push(ht.layoutVertexExtBuffer),xt.draw(O,O.gl.TRIANGLES,S,k,R,s.CullFaceMode.backCCW,Jt,m.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,m.paint,_.transform.zoom,lt,_t)}}function Cm(_,u,m,y,S,k){const R=[ce=>{let xe=ce.canonical.x-1,De=ce.wrap;return xe<0&&(xe=(1<<ce.canonical.z)-1,De--),new s.OverscaledTileID(ce.overscaledZ,De,ce.canonical.z,xe,ce.canonical.y)},ce=>{let xe=ce.canonical.x+1,De=ce.wrap;return xe===1<<ce.canonical.z&&(xe=0,De++),new s.OverscaledTileID(ce.overscaledZ,De,ce.canonical.z,xe,ce.canonical.y)},ce=>new s.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,(ce.canonical.y===0?1<<ce.canonical.z:ce.canonical.y)-1),ce=>new s.OverscaledTileID(ce.overscaledZ,ce.wrap,ce.canonical.z,ce.canonical.x,ce.canonical.y===(1<<ce.canonical.z)-1?0:ce.canonical.y+1)],O=ce=>{const xe=u.getSource().minzoom,De=Ge=>{const Ye=u.getTileByID(Ge);if(Ye&&Ye.hasData())return Ye.getBucket(S)},Re=[0,-1,1];for(const Ge of Re){if(ce.overscaledZ+Ge<xe)continue;const Ye=De(ce.calculateScaledKey(ce.overscaledZ+Ge));if(Ye)return Ye}},U=[0,0,0],Y=(ce,xe)=>(U[0]=Math.min(ce.min.y,xe.min.y),U[1]=Math.max(ce.max.y,xe.max.y),U[2]=s.EXTENT-xe.min.x>ce.max.x?xe.min.x-s.EXTENT:ce.max.x,U),J=(ce,xe)=>(U[0]=Math.min(ce.min.x,xe.min.x),U[1]=Math.max(ce.max.x,xe.max.x),U[2]=s.EXTENT-xe.min.y>ce.max.y?xe.min.y-s.EXTENT:ce.max.y,U),ae=[(ce,xe)=>Y(ce,xe),(ce,xe)=>Y(xe,ce),(ce,xe)=>J(ce,xe),(ce,xe)=>J(xe,ce)],pe=new s.Point(0,0);let Te,ke,Se;const Ae=(ce,xe,De,Re,Ge)=>{const Ye=[[Re?De:ce,Re?ce:De,0],[Re?De:xe,Re?xe:De,0]],et=Ge<0?s.EXTENT+Ge:Ge,ht=[Re?et:(ce+xe)/2,Re?(ce+xe)/2:et,0];return De===0&&Ge<0||De!==0&&Ge>0?k.getForTilePoints(Se,[ht],!0,ke):Ye.push(ht),k.getForTilePoints(m,Ye,!0,Te),Math.max(Ye[0][2],Ye[1][2],ht[2])/k.exaggeration()};for(let ce=0;ce<4;ce++){const xe=(ce<2?1:5)-ce,De=y.borders[ce];if(De.length===0)continue;const Re=Se=R[ce](m),Ge=O(Re);if(!(Ge&&Ge instanceof s.FillExtrusionBucket&&Ge.enableTerrain)||y.borderDoneWithNeighborZ[ce]===Ge.canonical.z&&Ge.borderDoneWithNeighborZ[xe]===y.canonical.z||(ke=k.findDEMTileFor(Re),!ke||!ke.dem))continue;if(!Te){const lt=k.findDEMTileFor(m);if(!lt||!lt.dem)return;Te=lt}const Ye=Ge.borders[xe];let et=0;const ht=Ge.borderDoneWithNeighborZ[xe]!==y.canonical.z;if(y.canonical.z===Ge.canonical.z){for(let lt=0;lt<De.length;lt++){const xt=y.featuresOnBorder[De[lt]],Xt=xt.borders[ce];let ft;for(;et<Ye.length&&(ft=Ge.featuresOnBorder[Ye[et]],!(ft.borders[xe][1]>Xt[0]+3));)ht&&Ge.encodeCentroid(void 0,ft,!1),et++;if(ft&&et<Ye.length){const Bt=et;let Et=0;for(;!(ft.borders[xe][0]>Xt[1]-3)&&(Et++,++et!==Ye.length);)ft=Ge.featuresOnBorder[Ye[et]];if(ft=Ge.featuresOnBorder[Ye[Bt]],xt.intersectsCount()>1||ft.intersectsCount()>1||Et!==1){Et!==1&&(et=Bt),y.encodeCentroid(void 0,xt,!1),ht&&Ge.encodeCentroid(void 0,ft,!1);continue}const Jt=ae[ce](xt,ft),_t=ce%2?s.EXTENT-1:0;pe.x=Ae(Jt[0],Math.min(s.EXTENT-1,Jt[1]),_t,ce<2,Jt[2]),pe.y=0,y.encodeCentroid(pe,xt,!1),ht&&Ge.encodeCentroid(pe,ft,!1)}else y.encodeCentroid(void 0,xt,!1)}y.borderDoneWithNeighborZ[ce]=Ge.canonical.z,y.needsCentroidUpdate=!0,ht&&(Ge.borderDoneWithNeighborZ[xe]=y.canonical.z,Ge.needsCentroidUpdate=!0)}else{for(const lt of De)y.encodeCentroid(void 0,y.featuresOnBorder[lt],!1);if(ht){for(const lt of Ye)Ge.encodeCentroid(void 0,Ge.featuresOnBorder[lt],!1);Ge.borderDoneWithNeighborZ[xe]=y.canonical.z,Ge.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[ce]=Ge.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(_)}const Kc=new s.Color(1,0,0,1),km=new s.Color(0,1,0,1),z_=new s.Color(0,0,1,1),N_=new s.Color(1,0,1,1),Xc=new s.Color(0,1,1,1);function Wl(_,u,m){const y=_.context,S=_.transform,k=y.gl,R=S.projection.name==="globe",O=R?["PROJECTION_GLOBE_VIEW"]:null;let U=m.projMatrix;if(R&&s.globeToMercatorTransition(S.zoom)>0){const xt=s.transitionTileAABBinECEF(m.canonical,S),Xt=s.globeDenormalizeECEF(xt);U=s.multiply(new Float32Array(16),S.globeMatrix,Xt),s.multiply(U,S.projMatrix,U)}const Y=_.useProgram("debug",null,O),J=u.getTileByID(m.key);_.terrain&&_.terrain.setupElevationDraw(J,Y);const ae=s.DepthMode.disabled,pe=s.StencilMode.disabled,Te=_.colorModeForRenderPass(),ke="$debug";y.activeTexture.set(k.TEXTURE0),_.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),R?J._makeGlobeTileDebugBuffers(_.context,S):J._makeDebugTileBoundsBuffers(_.context,S.projection);const Se=J._tileDebugBuffer||_.debugBuffer,Ae=J._tileDebugIndexBuffer||_.debugIndexBuffer,ce=J._tileDebugSegments||_.debugSegments;Y.draw(y,k.LINE_STRIP,ae,pe,Te,s.CullFaceMode.disabled,yd(U,s.Color.red),ke,Se,Ae,ce,null,null,null,[J._globeTileDebugBorderBuffer]);const xe=J.latestRawTileData,De=Math.floor((xe&&xe.byteLength||0)/1024),Re=u.getTile(m).tileSize,Ge=512/Math.min(Re,512)*(m.overscaledZ/S.zoom)*.5;let Ye=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Ye+=` => ${m.overscaledZ}`),Ye+=` ${De}kb`,(function(xt,Xt){xt.initDebugOverlayCanvas();const ft=xt.debugOverlayCanvas,Bt=xt.context.gl,Et=xt.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,ft.width,ft.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(Xt,5,5),Et.strokeText(Xt,5,5),xt.debugOverlayTexture.update(ft),xt.debugOverlayTexture.bind(Bt.LINEAR,Bt.CLAMP_TO_EDGE)})(_,Ye);const et=J._tileDebugTextBuffer||_.debugBuffer,ht=J._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,lt=J._tileDebugTextSegments||_.debugSegments;Y.draw(y,k.TRIANGLES,ae,pe,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,yd(U,s.Color.transparent,Ge),ke,et,ht,lt,null,null,null,[J._globeTileDebugTextBuffer])}function Im(_,u,m,y){Yc(_,0,u+m/2,_.transform.width,m,y)}function Gh(_,u,m,y){Yc(_,u-m/2,0,m,_.transform.height,y)}function Yc(_,u,m,y,S,k){const R=_.context,O=R.gl;O.enable(O.SCISSOR_TEST),O.scissor(u*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,S*s.exported.devicePixelRatio),R.clear({color:k}),O.disable(O.SCISSOR_TEST)}const Am=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Pm}=Am;function bl(_,u,m,y){_.emplaceBack(u,m,y)}class qh{constructor(u){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,bl(this.vertexArray,-1,-1,1),bl(this.vertexArray,1,-1,1),bl(this.vertexArray,-1,1,1),bl(this.vertexArray,1,1,1),bl(this.vertexArray,-1,-1,-1),bl(this.vertexArray,1,-1,-1),bl(this.vertexArray,-1,1,-1),bl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,Pm),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Ta(_,u,m,y,S,k){const R=_.gl,O=u.paint.get("sky-atmosphere-color"),U=u.paint.get("sky-atmosphere-halo-color"),Y=u.paint.get("sky-atmosphere-sun-intensity"),J=((ae,pe,Te,ke,Se)=>({u_matrix_3f:ae,u_sun_direction:pe,u_sun_intensity:Te,u_color_tint_r:[ke.r,ke.g,ke.b,ke.a],u_color_tint_m:[Se.r,Se.g,Se.b,Se.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),S,Y,O,U);R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_CUBE_MAP_POSITIVE_X+k,u.skyboxTexture,0),m.draw(_,R.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,J,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const Ed=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Mm{constructor(u){const m=new s.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(m,Ed.members),this.indexBuffer=u.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const bc={symbol:function(_,u,m,y,S){if(_.renderPass!=="translucent")return;const k=s.StencilMode.disabled,R=_.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(O,U,Y,J,ae,pe,Te){const ke=U.transform,Se=ae==="map",Ae=pe==="map";for(const ce of O){const xe=J.getTile(ce),De=xe.getBucket(Y);if(!De||!De.text||!De.text.segments.get().length)continue;const Re=s.evaluateSizeForZoom(De.textSizeData,ke.zoom),Ge=Hi(ce,De.getProjection(),ke),Ye=ke.calculatePixelsToTileUnitsMatrix(xe),et=Ot(Ge,xe.tileID.canonical,Ae,Se,ke,De.getProjection(),Ye),ht=Y.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(Re){const lt=Math.pow(2,ke.zoom-xe.tileID.overscaledZ);F_(De,Se,Ae,Te,s.symbolSize,ke,et,ce,lt,Re,ht)}}})(y,_,m,u,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),S),m.paint.get("icon-opacity").constantOr(1)!==0&&Tg(_,u,m,y,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),k,R),m.paint.get("text-opacity").constantOr(1)!==0&&Tg(_,u,m,y,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),k,R),u.map.showCollisionBoxes&&(Td(_,u,m,y,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),Td(_,u,m,y,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(_,u,m,y){if(_.renderPass!=="translucent")return;const S=m.paint.get("circle-opacity"),k=m.paint.get("circle-stroke-width"),R=m.paint.get("circle-stroke-opacity"),O=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(S.constantOr(1)===0&&(k.constantOr(1)===0||R.constantOr(1)===0))return;const U=_.context,Y=U.gl,J=_.transform,ae=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),pe=s.StencilMode.disabled,Te=_.colorModeForRenderPass(),ke=J.projection.name==="globe",Se=[s.mercatorXfromLng(J.center.lng),s.mercatorYfromLat(J.center.lat)],Ae=[];for(let xe=0;xe<y.length;xe++){const De=y[xe],Re=u.getTile(De),Ge=Re.getBucket(m);if(!Ge||Ge.projection.name!==J.projection.name)continue;const Ye=Ge.programConfigurations.get(m.id),et=zh(m);ke&&et.push("PROJECTION_GLOBE_VIEW");const ht=_.useProgram("circle",Ye,et),lt=Ge.layoutVertexBuffer,xt=Ge.globeExtVertexBuffer,Xt=Ge.indexBuffer,ft=J.projection.createInversionMatrix(J,De.canonical),Bt={programConfiguration:Ye,program:ht,layoutVertexBuffer:lt,globeExtVertexBuffer:xt,indexBuffer:Xt,uniformValues:Qo(_,De,Re,ft,Se,m),tile:Re};if(O){const Et=Ge.segments.get();for(const Jt of Et)Ae.push({segments:new s.SegmentVector([Jt]),sortKey:Jt.sortKey,state:Bt})}else Ae.push({segments:Ge.segments,sortKey:0,state:Bt})}O&&Ae.sort(((xe,De)=>xe.sortKey-De.sortKey));const ce={useDepthForOcclusion:!ke};for(const xe of Ae){const{programConfiguration:De,program:Re,layoutVertexBuffer:Ge,globeExtVertexBuffer:Ye,indexBuffer:et,uniformValues:ht,tile:lt}=xe.state,xt=xe.segments;_.terrain&&_.terrain.setupElevationDraw(lt,Re,ce),_.prepareDrawProgram(U,Re,lt.tileID.toUnwrapped()),Re.draw(U,Y.TRIANGLES,ae,pe,Te,s.CullFaceMode.disabled,ht,m.id,Ge,et,xt,m.paint,J.zoom,De,[Ye])}},heatmap:function(_,u,m,y){if(m.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const S=_.context,k=S.gl,R=s.StencilMode.disabled,O=new s.ColorMode([k.ONE,k.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(Te,ke,Se,Ae){const ce=Te.gl,xe=ke.width*Ae,De=ke.height*Ae;Te.activeTexture.set(ce.TEXTURE1),Te.viewport.set([0,0,xe,De]);let Re=Se.heatmapFbo;if(!Re||Re&&(Re.width!==xe||Re.height!==De)){Re&&Re.destroy();const Ge=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Ge),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),Re=Se.heatmapFbo=Te.createFramebuffer(xe,De,!1),(function(Ye,et,ht,lt,xt,Xt){const ft=Ye.gl;ft.texImage2D(ft.TEXTURE_2D,0,Ye.isWebGL2&&Ye.extRenderToTextureHalfFloat?ft.RGBA16F:ft.RGBA,xt,Xt,0,ft.RGBA,Ye.extRenderToTextureHalfFloat?Ye.isWebGL2?ft.HALF_FLOAT:Ye.extTextureHalfFloat.HALF_FLOAT_OES:ft.UNSIGNED_BYTE,null),lt.colorAttachment.set(ht)})(Te,0,Ge,Re,xe,De)}else ce.bindTexture(ce.TEXTURE_2D,Re.colorAttachment.get()),Te.bindFramebuffer.set(Re.framebuffer)})(S,_,m,_.transform.projection.name==="globe"?.5:.25),S.clear({color:s.Color.transparent});const U=_.transform,Y=U.projection.name==="globe",J=Y?["PROJECTION_GLOBE_VIEW"]:null,ae=Y?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,pe=[s.mercatorXfromLng(U.center.lng),s.mercatorYfromLat(U.center.lat)];for(let Te=0;Te<y.length;Te++){const ke=y[Te];if(u.hasRenderableParent(ke))continue;const Se=u.getTile(ke),Ae=Se.getBucket(m);if(!Ae||Ae.projection.name!==U.projection.name)continue;const ce=Ae.programConfigurations.get(m.id),xe=_.useProgram("heatmap",ce,J),{zoom:De}=_.transform;_.terrain&&_.terrain.setupElevationDraw(Se,xe),_.prepareDrawProgram(S,xe,ke.toUnwrapped());const Re=U.projection.createInversionMatrix(U,ke.canonical);xe.draw(S,k.TRIANGLES,s.DepthMode.disabled,R,O,ae,xg(_,ke,Se,Re,pe,De,m.paint.get("heatmap-intensity")),m.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,m.paint,_.transform.zoom,ce,Y?[Ae.globeExtVertexBuffer]:null)}S.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),(function(S,k){const R=S.context,O=R.gl,U=k.heatmapFbo;if(!U)return;R.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get()),R.activeTexture.set(O.TEXTURE1);let Y=k.colorRampTexture;Y||(Y=k.colorRampTexture=new s.Texture(R,k.colorRamp,O.RGBA)),Y.bind(O.LINEAR,O.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(R,O.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,S.colorModeForRenderPass(),s.CullFaceMode.disabled,((J,ae,pe,Te)=>({u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}))(0,k),k.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,k.paint,S.transform.zoom)})(_,m))},line:function(_,u,m,y){if(_.renderPass!=="translucent")return;const S=m.paint.get("line-opacity"),k=m.paint.get("line-width");if(S.constantOr(1)===0||k.constantOr(1)===0)return;const R=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),O=_.colorModeForRenderPass(),U=_.terrain&&_.terrain.renderingToTexture?1:s.exported.devicePixelRatio,Y=m.paint.get("line-dasharray"),J=Y.constantOr(1),ae=m.layout.get("line-cap"),pe=m.paint.get("line-pattern"),Te=pe.constantOr(1),ke=m.paint.get("line-gradient"),Se=Te?"linePattern":"line",Ae=_.context,ce=Ae.gl,xe=(Re=>{const Ge=[];ku(Re)&&Ge.push("RENDER_LINE_DASH"),Re.paint.get("line-gradient")&&Ge.push("RENDER_LINE_GRADIENT");const Ye=Re.paint.get("line-trim-offset");Ye[0]===0&&Ye[1]===0||Ge.push("RENDER_LINE_TRIM_OFFSET");const et=Re.paint.get("line-pattern").constantOr(1),ht=Re.paint.get("line-opacity").constantOr(1)!==1;return!et&&ht&&Ge.push("RENDER_LINE_ALPHA_DISCARD"),Ge})(m);let De=xe.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(De=!1);for(const Re of y){const Ge=u.getTile(Re);if(Te&&!Ge.patternsLoaded())continue;const Ye=Ge.getBucket(m);if(!Ye)continue;_.prepareDrawTile();const et=Ye.programConfigurations.get(m.id),ht=_.useProgram(Se,et,xe),lt=pe.constantOr(null);if(lt&&Ge.imageAtlas){const At=Ge.imageAtlas.patternPositions[lt.toString()];At&&et.setConstantPatternPositions(At)}const xt=Y.constantOr(null),Xt=ae.constantOr(null);if(!Te&&xt&&Xt&&Ge.lineAtlas){const At=Ge.lineAtlas.getDash(xt,Xt);At&&et.setConstantPatternPositions(At)}let[ft,Bt]=m.paint.get("line-trim-offset");(Xt==="round"||Xt==="square")&&ft!==Bt&&(ft===0&&(ft-=1),Bt===1&&(Bt+=1));const Et=_.terrain?Re.projMatrix:null,Jt=Te?yc(_,Ge,m,Et,U):wg(_,Ge,m,Et,Ye.lineClipsArray.length,U,[ft,Bt]);if(ke){const At=Ye.gradients[m.id];let qt=At.texture;if(m.gradientVersion!==At.version){let jt=256;if(m.stepInterpolant){const Qt=u.getSource().maxzoom,Rn=Re.canonical.z===Qt?Math.ceil(1<<_.transform.maxZoom-Re.canonical.z):1;jt=s.clamp(s.nextPowerOfTwo(Ye.maxLineLength/s.EXTENT*1024*Rn),256,Ae.maxTextureSize)}At.gradient=s.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:jt,image:At.gradient||void 0,clips:Ye.lineClipsArray}),At.texture?At.texture.update(At.gradient):At.texture=new s.Texture(Ae,At.gradient,ce.RGBA),At.version=m.gradientVersion,qt=At.texture}Ae.activeTexture.set(ce.TEXTURE1),qt.bind(m.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}J&&(Ae.activeTexture.set(ce.TEXTURE0),Ge.lineAtlasTexture.bind(ce.LINEAR,ce.REPEAT),et.updatePaintBuffers()),Te&&(Ae.activeTexture.set(ce.TEXTURE0),Ge.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),et.updatePaintBuffers()),_.prepareDrawProgram(Ae,ht,Re.toUnwrapped());const _t=At=>{ht.draw(Ae,ce.TRIANGLES,R,At,O,s.CullFaceMode.disabled,Jt,m.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,m.paint,_.transform.zoom,et,[Ye.layoutVertexBuffer2])};if(De){const At=_.stencilModeForClipping(Re).ref;At===0&&_.terrain&&Ae.clear({stencil:0});const qt={func:ce.EQUAL,mask:255};Jt.u_alpha_discard_threshold=.8,_t(new s.StencilMode(qt,At,255,ce.KEEP,ce.KEEP,ce.INVERT)),Jt.u_alpha_discard_threshold=0,_t(new s.StencilMode(qt,At,255,ce.KEEP,ce.KEEP,ce.KEEP))}else _t(_.stencilModeForClipping(Re))}De&&(_.resetStencilClippingMasks(),_.terrain&&Ae.clear({stencil:0}))},fill:function(_,u,m,y){const S=m.paint.get("fill-color"),k=m.paint.get("fill-opacity");if(k.constantOr(1)===0)return;const R=_.colorModeForRenderPass(),O=m.paint.get("fill-pattern"),U=_.opaquePassEnabledForLayer()&&!O.constantOr(1)&&S.constantOr(s.Color.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===U){const Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Sg(_,u,m,y,Y,R,!1)}if(_.renderPass==="translucent"&&m.paint.get("fill-antialias")){const Y=_.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Sg(_,u,m,y,Y,R,!0)}},"fill-extrusion":function(_,u,m,y){const S=m.paint.get("fill-extrusion-opacity");if(S!==0&&_.renderPass==="translucent"){const k=new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D);if(S!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Hh(_,u,m,y,k,s.StencilMode.disabled,s.ColorMode.disabled),Hh(_,u,m,y,k,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const R=_.colorModeForRenderPass();Hh(_,u,m,y,k,s.StencilMode.disabled,R)}}},hillshade:function(_,u,m,y){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const S=_.context,k=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),R=_.colorModeForRenderPass(),O=_.terrain&&_.terrain.renderingToTexture,[U,Y]=_.renderPass!=="translucent"||O?[{},y]:_.stencilConfigForOverlap(y);for(const J of Y){const ae=u.getTile(J);if(ae.needsHillshadePrepare&&_.renderPass==="offscreen")js(_,ae,m,k,s.StencilMode.disabled,R);else if(_.renderPass==="translucent"){const pe=O&&_.terrain?_.terrain.stencilModeForRTTOverlap(J):U[J.overscaledZ];_d(_,J,ae,m,k,pe,R)}}S.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,u,m,y,S,k){if(_.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!y.length)return;const R=_.context,O=R.gl,U=u.getSource(),Y=_.useProgram("raster"),J=_.colorModeForRenderPass(),ae=_.terrain&&_.terrain.renderingToTexture,[pe,Te]=U instanceof ei||ae?[{},y]:_.stencilConfigForOverlap(y),ke=Te[Te.length-1].overscaledZ,Se=!_.options.moving;for(const Ae of Te){const ce=ae?s.DepthMode.disabled:_.depthModeForSublayer(Ae.overscaledZ-ke,m.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,O.LESS),xe=Ae.toUnwrapped(),De=u.getTile(Ae);if(ae&&(!De||!De.hasData()))continue;const Re=ae?Ae.projMatrix:_.transform.calculateProjMatrix(xe,Se),Ge=_.terrain&&ae?_.terrain.stencilModeForRTTOverlap(Ae):pe[Ae.overscaledZ],Ye=k?0:m.paint.get("raster-fade-duration");De.registerFadeDuration(Ye);const et=u.findLoadedParent(Ae,0),ht=xn(De,et,u,_.transform,Ye);let lt,xt;_.terrain&&_.terrain.prepareDrawTile();const Xt=m.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;R.activeTexture.set(O.TEXTURE0),De.texture.bind(Xt,O.CLAMP_TO_EDGE),R.activeTexture.set(O.TEXTURE1),et?(et.texture.bind(Xt,O.CLAMP_TO_EDGE),lt=Math.pow(2,et.tileID.overscaledZ-De.tileID.overscaledZ),xt=[De.tileID.canonical.x*lt%1,De.tileID.canonical.y*lt%1]):De.texture.bind(Xt,O.CLAMP_TO_EDGE),De.texture.useMipmap&&R.extTextureFilterAnisotropic&&_.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax);const ft=wm(Re,xt||[0,0],lt||1,ht,m,U instanceof ei?U.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(R,Y,xe),U instanceof ei)U.boundsBuffer&&U.boundsSegments&&Y.draw(R,O.TRIANGLES,ce,s.StencilMode.disabled,J,s.CullFaceMode.disabled,ft,m.id,U.boundsBuffer,_.quadTriangleIndexBuffer,U.boundsSegments);else{const{tileBoundsBuffer:Bt,tileBoundsIndexBuffer:Et,tileBoundsSegments:Jt}=_.getTileBoundsBuffers(De);Y.draw(R,O.TRIANGLES,ce,Ge,J,s.CullFaceMode.disabled,ft,m.id,Bt,Et,Jt)}}_.resetStencilClippingMasks()},background:function(_,u,m,y){const S=m.paint.get("background-color"),k=m.paint.get("background-opacity");if(k===0)return;const R=_.context,O=R.gl,U=_.transform,Y=U.tileSize,J=m.paint.get("background-pattern");if(_.isPatternMissing(J))return;const ae=!J&&S.a===1&&k===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const pe=s.StencilMode.disabled,Te=_.depthModeForSublayer(0,ae==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),ke=_.colorModeForRenderPass(),Se=_.useProgram(J?"backgroundPattern":"background");let Ae,ce=y;ce||(Ae=_.getBackgroundTiles(),ce=Object.values(Ae).map((xe=>xe.tileID))),J&&(R.activeTexture.set(O.TEXTURE0),_.imageManager.bind(_.context));for(const xe of ce){const De=xe.toUnwrapped(),Re=y?xe.projMatrix:_.transform.calculateProjMatrix(De);_.prepareDrawTile();const Ge=u?u.getTile(xe):Ae?Ae[xe.key]:new s.Tile(xe,Y,U.zoom,_),Ye=J?Tm(Re,k,_,J,{tileID:xe,tileSize:Y}):Uh(Re,k,S);_.prepareDrawProgram(R,Se,De);const{tileBoundsBuffer:et,tileBoundsIndexBuffer:ht,tileBoundsSegments:lt}=_.getTileBoundsBuffers(Ge);Se.draw(R,O.TRIANGLES,Te,pe,ke,s.CullFaceMode.disabled,Ye,m.id,et,ht,lt)}},sky:function(_,u,m){const y=_.transform,S=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),k=m.paint.get("sky-opacity")*S;if(k===0)return;const R=_.context,O=m.paint.get("sky-type"),U=new s.DepthMode(R.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),Y=_.frameCounter/1e3%1;O==="atmosphere"?_.renderPass==="offscreen"?m.needsSkyboxCapture(_)&&((function(J,ae,pe,Te){const ke=J.context,Se=ke.gl;let Ae=ae.skyboxFbo;if(!Ae){Ae=ae.skyboxFbo=ke.createFramebuffer(32,32,!1),ae.skyboxGeometry=new qh(ke),ae.skyboxTexture=ke.gl.createTexture(),Se.bindTexture(Se.TEXTURE_CUBE_MAP,ae.skyboxTexture),Se.texParameteri(Se.TEXTURE_CUBE_MAP,Se.TEXTURE_WRAP_S,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_CUBE_MAP,Se.TEXTURE_WRAP_T,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_CUBE_MAP,Se.TEXTURE_MIN_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_CUBE_MAP,Se.TEXTURE_MAG_FILTER,Se.LINEAR);for(let Re=0;Re<6;++Re)Se.texImage2D(Se.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,Se.RGBA,32,32,0,Se.RGBA,Se.UNSIGNED_BYTE,null)}ke.bindFramebuffer.set(Ae.framebuffer),ke.viewport.set([0,0,32,32]);const ce=ae.getCenter(J,!0),xe=J.useProgram("skyboxCapture"),De=new Float64Array(16);s.identity(De),s.rotateY(De,De,.5*-Math.PI),Ta(ke,ae,xe,De,ce,0),s.identity(De),s.rotateY(De,De,.5*Math.PI),Ta(ke,ae,xe,De,ce,1),s.identity(De),s.rotateX(De,De,.5*-Math.PI),Ta(ke,ae,xe,De,ce,2),s.identity(De),s.rotateX(De,De,.5*Math.PI),Ta(ke,ae,xe,De,ce,3),s.identity(De),Ta(ke,ae,xe,De,ce,4),s.identity(De),s.rotateY(De,De,Math.PI),Ta(ke,ae,xe,De,ce,5),ke.viewport.set([0,0,J.width,J.height])})(_,m),m.markSkyboxValid(_)):_.renderPass==="sky"&&(function(J,ae,pe,Te,ke){const Se=J.context,Ae=Se.gl,ce=J.transform,xe=J.useProgram("skybox");Se.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_CUBE_MAP,ae.skyboxTexture);const De=((Re,Ge,Ye,et,ht)=>({u_matrix:Re,u_sun_direction:Ge,u_cubemap:0,u_opacity:et,u_temporal_offset:ht}))(ce.skyboxMatrix,ae.getCenter(J,!1),0,Te,ke);J.prepareDrawProgram(Se,xe),xe.draw(Se,Ae.TRIANGLES,pe,s.StencilMode.disabled,J.colorModeForRenderPass(),s.CullFaceMode.backCW,De,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(_,m,U,k,Y):O==="gradient"&&_.renderPass==="sky"&&(function(J,ae,pe,Te,ke){const Se=J.context,Ae=Se.gl,ce=J.transform,xe=J.useProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new qh(Se)),Se.activeTexture.set(Ae.TEXTURE0);let De=ae.colorRampTexture;De||(De=ae.colorRampTexture=new s.Texture(Se,ae.colorRamp,Ae.RGBA)),De.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE);const Re=((Ge,Ye,et,ht,lt)=>({u_matrix:Ge,u_color_ramp:0,u_center_direction:Ye,u_radius:s.degToRad(et),u_opacity:ht,u_temporal_offset:lt}))(ce.skyboxMatrix,ae.getCenter(J,!1),ae.paint.get("sky-gradient-radius"),Te,ke);J.prepareDrawProgram(Se,xe),xe.draw(Se,Ae.TRIANGLES,pe,s.StencilMode.disabled,J.colorModeForRenderPass(),s.CullFaceMode.backCW,Re,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)})(_,m,U,k,Y)},debug:function(_,u,m){for(let y=0;y<m.length;y++)Wl(_,u,m[y])},custom:function(_,u,m,y){const S=_.context,k=m.implementation;if(!_.transform.projection.unsupportedLayers||!_.transform.projection.unsupportedLayers.includes("custom")||_.terrain&&(_.terrain.renderingToTexture||_.renderPass==="offscreen")&&m.isLayerDraped()){if(_.renderPass==="offscreen"){const R=k.prerender;if(R){if(_.setCustomLayerDefaults(),S.setColorMode(_.colorModeForRenderPass()),_.transform.projection.name==="globe"){const O=_.transform.pointMerc;R.call(k,S.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[O.x,O.y],_.transform.pixelsPerMeterRatio)}else R.call(k,S.gl,_.transform.customLayerMatrix());S.setDirty(),_.setBaseState()}}else if(_.renderPass==="translucent"){if(_.terrain&&_.terrain.renderingToTexture){const O=k.renderToTile;if(O){const U=y[0].canonical,Y=new s.MercatorCoordinate(U.x+y[0].wrap*(1<<U.z),U.y,U.z);S.setDepthMode(s.DepthMode.disabled),S.setStencilMode(s.StencilMode.disabled),S.setColorMode(_.colorModeForRenderPass()),_.setCustomLayerDefaults(),O.call(k,S.gl,Y),S.setDirty(),_.setBaseState()}return}_.setCustomLayerDefaults(),S.setColorMode(_.colorModeForRenderPass()),S.setStencilMode(s.StencilMode.disabled);const R=k.renderingMode==="3d"?new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(S.setDepthMode(R),_.transform.projection.name==="globe"){const O=_.transform.pointMerc;k.render(S.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[O.x,O.y],_.transform.pixelsPerMeterRatio)}else k.render(S.gl,_.transform.customLayerMatrix());S.setDirty(),_.setBaseState(),S.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Iu{constructor(u,m,y=!1){this.context=new rn(u,y),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,m){const y=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ar(this,u));const S=this._terrain;this.transform.elevation=y?S:null,S.update(u,this.transform,m)}_updateFog(u){const m=u.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,S]=m.getFovAdjustedRange(this.transform._fov);if(y>S)return void(this.transform.fogCullDistSq=null);const k=y+.78*(S-y);this.transform.fogCullDistSq=k*k}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,m){if(this.width=u*s.exported.devicePixelRatio,this.height=m*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const u=this.context,m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(m,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=u.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const S=new s.StructArrayLayout2i4;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(S,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const k=new s.StructArrayLayout4i8;k.emplaceBack(0,0,0,0),k.emplaceBack(s.EXTENT,0,s.EXTENT,0),k.emplaceBack(0,s.EXTENT,0,s.EXTENT),k.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(k,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const R=new s.StructArrayLayout3ui6;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(R);const O=new s.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])O.emplaceBack(Y);this.debugIndexBuffer=u.createIndexBuffer(O),this.emptyTexture=new s.Texture(u,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=s.create();const U=this.context.gl;this.stencilClearMode=new s.StencilMode({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Mm(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,m=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,m.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,m,y){if(!m||this.currentStencilSource===m.id||!u.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const U of y)if(this._tileClippingMaskIDs[U.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=m.id;const S=this.context,k=S.gl;this.nextStencilID+y.length>256&&this.clearStencil(),S.setColorMode(s.ColorMode.disabled),S.setDepthMode(s.DepthMode.disabled);const R=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of y){const U=m.getTile(O),Y=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:J,tileBoundsIndexBuffer:ae,tileBoundsSegments:pe}=this.getTileBoundsBuffers(U);R.draw(S,k.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:k.ALWAYS,mask:0},Y,255,k.KEEP,k.KEEP,k.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rt(O.projMatrix),"$clipping",J,ae,pe)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,m=this.context.gl;return new s.StencilMode({func:m.NOTEQUAL,mask:255},u,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const m=this.context.gl;return new s.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(u){const m=this.context.gl,y=u.sort(((R,O)=>O.overscaledZ-R.overscaledZ)),S=y[y.length-1].overscaledZ,k=y[0].overscaledZ-S+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const R={};for(let O=0;O<k;O++)R[O+S]=new s.StencilMode({func:m.GEQUAL,mask:255},O+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=k,[R,y]}return[{[S]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([u.CONSTANT_COLOR,u.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(u,m,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,m,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,m){this.style=u,this.options=m,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,S=this.style._sourceCaches;for(const Y in S){const J=S[Y];J.used&&J.prepare(this.context)}const k={},R={},O={};for(const Y in S){const J=S[Y];k[Y]=J.getVisibleCoordinates(),R[Y]=k[Y].slice().reverse(),O[Y]=J.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<y.length;Y++)if(this.style._layers[y[Y]].is3D()){this.opaquePassCutoff=Y;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const Y of y){const J=this.style._layers[Y],ae=u._getLayerSourceCache(J);if(!J.hasOffscreenPass()||J.isHidden(this.transform.zoom))continue;const pe=ae?R[ae.id]:void 0;(J.type==="custom"||J.isSky()||pe&&pe.length)&&this.renderLayer(this,ae,J,pe)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const U=this.terrain;if(U&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&U.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[y[this.currentLayer]],J=u._getLayerSourceCache(Y);if(Y.isSky())continue;const ae=J?R[J.id]:void 0;this._renderTileClippingMasks(Y,J,ae),this.renderLayer(this,J,Y,ae)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(Y,J){const ae=Y.context,pe=ae.gl,Te=Y.transform,ke=new s.DepthMode(pe.LEQUAL,s.DepthMode.ReadOnly,[0,1]),Se=Y.useProgram("globeAtmosphere",null,Te.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ae=s.globeToMercatorTransition(Te.zoom),ce=J.properties.get("color").toArray01(),xe=J.properties.get("high-color").toArray01(),De=J.properties.get("space-color").toArray01PremultipliedAlpha(),Re=s.identity$1([]);s.rotateY$1(Re,Re,-s.degToRad(Te._center.lng)),s.rotateX$1(Re,Re,s.degToRad(Te._center.lat)),s.rotateZ$1(Re,Re,Te.angle),s.rotateX$1(Re,Re,-Te._pitch);const Ge=s.fromQuat(new Float32Array(16),Re),Ye=s.mapValue(J.properties.get("star-intensity"),0,1,0,.25),et=5e-4,ht=s.mapValue(J.properties.get("horizon-blend"),0,1,et,.25),lt=s.globeUseCustomAntiAliasing(Y,ae,Te)&&ht===et?Te.worldSize/(2*Math.PI*1.025)-1:Te.globeRadius,xt=Y.frameCounter/1e3%1,Xt=s.length(Te.globeCenterInViewSpace),ft=Math.sqrt(Math.pow(Xt,2)-Math.pow(lt,2)),Bt=Math.acos(ft/Xt),Et=((_t,At,qt,jt,Qt,Rn,Kn,En,Vn,_i,vi,Mn,Bi,qi)=>({u_frustum_tl:_t,u_frustum_tr:At,u_frustum_br:qt,u_frustum_bl:jt,u_horizon:Qt,u_transition:Rn,u_fadeout_range:Kn,u_color:En,u_high_color:Vn,u_space_color:_i,u_star_intensity:vi,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mn,u_horizon_angle:Bi,u_rotation_matrix:qi}))(Te.frustumCorners.TL,Te.frustumCorners.TR,Te.frustumCorners.BR,Te.frustumCorners.BL,Te.frustumCorners.horizon,Ae,ht,ce,xe,De,Ye,xt,Bt,Ge);Y.prepareDrawProgram(ae,Se);const Jt=Y.atmosphereBuffer;Jt&&Se.draw(ae,pe.TRIANGLES,ke,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,Et,"skybox",Jt.vertexBuffer,Jt.indexBuffer,Jt.segments)})(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const Y=this.style._layers[y[this.currentLayer]],J=u._getLayerSourceCache(Y);Y.isSky()&&this.renderLayer(this,J,Y,J?R[J.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const Y=this.style._layers[y[this.currentLayer]],J=u._getLayerSourceCache(Y);if(Y.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Y)){if(Y.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ae=J?(Y.type==="symbol"?O:R)[J.id]:void 0;this._renderTileClippingMasks(Y,J,J?k[J.id]:void 0),this.renderLayer(this,J,Y,ae),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Y=null;s.values(this.style._layers).forEach((J=>{const ae=u._getLayerSourceCache(J);ae&&!J.isHidden(this.transform.zoom)&&(!Y||Y.getSource().maxzoom<ae.getSource().maxzoom)&&(Y=ae)})),Y&&this.options.showTileBoundaries&&bc.debug(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&(function(Y){const J=Y.transform.padding;Im(Y,Y.transform.height-(J.top||0),3,Kc),Im(Y,J.bottom||0,3,km),Gh(Y,J.left||0,3,z_),Gh(Y,Y.transform.width-(J.right||0),3,N_);const ae=Y.transform.centerPoint;(function(pe,Te,ke,Se){Yc(pe,Te-1,ke-10,2,20,Se),Yc(pe,Te-10,ke-1,20,2,Se)})(Y,ae.x,Y.transform.height-ae.y,Xc)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,m,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||S&&S.length)&&(this.id=y.id,this.gpuTimingStart(y),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(y.type)||u.terrain&&y.type==="custom")&&bc[y.type](u,m,y,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let y=this.gpuTimers[u.id];y||(y=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),y.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,m=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),u.beginQueryEXT(u.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const m={};for(const y in u){const S=u[y],k=this.context.extTimerQuery,R=k.getQueryObjectEXT(S.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(S.query),m[y]=R}return m}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let y=0;for(const S of u)y+=m.getQueryObjectEXT(S,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(S);return y}translatePosMatrix(u,m,y,S,k){if(!y[0]&&!y[1])return u;const R=k?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(R){const Y=Math.sin(R),J=Math.cos(R);y=[y[0]*J-y[1]*Y,y[0]*Y+y[1]*J]}const O=[k?y[0]:We(m,y[0],this.transform.zoom),k?y[1]:We(m,y[1],this.transform.zoom),0],U=new Float32Array(16);return s.translate(U,u,O),U}saveTileTexture(u){const m=this._tileTextures[u.size[0]];m?m.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const m=this._tileTextures[u];return m&&m.length>0?m.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,S=[];return this.terrainRenderModeElevated()&&S.push("TERRAIN"),this.transform.projection.name==="globe"&&S.push("GLOBE"),m&&S.push("ZERO_EXAGGERATION"),y&&!u&&y.getOpacity(this.transform.pitch)!==0&&S.push("FOG"),u&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}useProgram(u,m,y){this.cache=this.cache||{};const S=y||[],k=this.currentGlobalDefines().concat(S),R=ti.cacheKey(Su[u],u,k,m);return this.cache[R]||(this.cache[R]=new ti(this.context,u,Su[u],m,Ro[u],k)),this.cache[R]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,m,y){if(this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const k=S.getOpacity(this.transform.pitch),R=((O,U,Y,J,ae,pe,Te,ke,Se,Ae,ce)=>{const xe=O.transform,De=U.properties.get("color").toArray01();De[3]=J;const Re=O.frameCounter/1e3%1;return{u_fog_matrix:Y?xe.calculateFogTileMatrix(Y):O.identityMat,u_fog_range:U.getFovAdjustedRange(xe._fov),u_fog_color:De,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_temporal_offset:Re,u_frustum_tl:ae,u_frustum_tr:pe,u_frustum_br:Te,u_frustum_bl:ke,u_globe_pos:Se,u_globe_radius:Ae,u_viewport:ce,u_globe_transition:s.globeToMercatorTransition(xe.zoom),u_is_globe:+(xe.projection.name==="globe")}})(this,S,y,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);m.setFogUniformValues(u,R)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,m=u.createTexture();return u.bindTexture(u.TEXTURE_2D,m),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,m=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const S of y)m[S.key]=u[S.key]||new s.Tile(S,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class Kh{constructor(u=0,m=0,y=0,S=0){if(isNaN(u)||u<0||isNaN(m)||m<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=m,this.left=y,this.right=S}interpolate(u,m,y){return m.top!=null&&u.top!=null&&(this.top=s.number(u.top,m.top,y)),m.bottom!=null&&u.bottom!=null&&(this.bottom=s.number(u.bottom,m.bottom,y)),m.left!=null&&u.left!=null&&(this.left=s.number(u.left,m.left,y)),m.right!=null&&u.right!=null&&(this.right=s.number(u.right,m.right,y)),this}getCenter(u,m){const y=s.clamp((this.left+u-this.right)/2,0,u),S=s.clamp((this.top+m-this.bottom)/2,0,m);return new s.Point(y,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Kh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Xh(_,u){const m=s.getColumn(_,3);s.fromQuat(_,u),s.setColumn(_,3,m)}function Pi(_,u){const m=s.identity$1([]);return s.rotateZ$1(m,m,-u),s.rotateX$1(m,m,-_),m}function Cd(_,u){const m=[_[0],_[1],0],y=[u[0],u[1],0];if(s.length(m)>=1e-15){const R=s.normalize([],m);s.scale$2(y,R,s.dot(y,R)),u[0]=y[0],u[1]=y[1]}const S=s.cross([],u,_);if(s.len(S)<1e-15)return null;const k=Math.atan2(-S[1],S[0]);return Pi(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),k)}class xl{constructor(u,m){this.position=u,this.orientation=m}get position(){return this._position}set position(u){if(u){const m=u instanceof s.MercatorCoordinate?u:new s.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(m.x=s.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(u,m){if(this.orientation=null,!this.position)return;const y=this.position,S=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(u)):0,k=s.MercatorCoordinate.fromLngLat(u,S),R=[k.x-y.x,k.y-y.y,k.z-y.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Cd(R,m)}setPitchBearing(u,m){this.orientation=Pi(s.degToRad(u),s.degToRad(-m))}}class kd{constructor(u,m){this._transform=s.identity([]),this.orientation=m,this.position=u}get mercatorPosition(){const u=this.position;return new s.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=s.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var m;u&&s.setColumn(this._transform,3,[(m=u)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||s.identity$1([]),u&&Xh(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,m){this._orientation=Pi(u,m),Xh(this._transform,this._orientation)}forward(){const u=s.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=s.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=s.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,m){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(u,m)),y}getWorldToCameraPosition(u,m,y){const S=this.position;s.scale$2(S,S,-u);const k=new Float64Array(16);return s.fromScaling(k,[y,y,y]),s.translate(k,k,S),k[10]*=m,k}getWorldToCamera(u,m){const y=new Float64Array(16),S=new Float64Array(4),k=this.position;return s.conjugate(S,this._orientation),s.scale$2(k,k,-u),s.fromQuat(y,S),s.translate(y,y,k),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=m,y[9]*=m,y[10]*=m,y[11]*=m,y}getCameraToClipPerspective(u,m,y,S){const k=new Float64Array(16);return s.perspective(k,u,m,y,S),k}getDistanceToElevation(u,m=!1){const y=u===0?0:s.mercatorZfromAltitude(u,m?s.latFromMercatorY(this.position[1]):this.position[1]),S=this.forward();return(y-this.position[2])/S[2]}clone(){return new kd([...this.position],[...this.orientation])}}function Au(_,u){const m=Yh(_.projection,_.zoom,_.width,_.height),y=(function(k,R,O,U,Y){const J=new s.LngLat(O.lng-180*Hl,O.lat),ae=new s.LngLat(O.lng+180*Hl,O.lat),pe=k.project(J.lng,J.lat),Te=k.project(ae.lng,ae.lat),ke=-Math.atan2(Te.y-pe.y,Te.x-pe.x),Se=s.MercatorCoordinate.fromLngLat(O);Se.y=s.clamp(Se.y,-1+Hl,1-Hl);const Ae=Se.toLngLat(),ce=k.project(Ae.lng,Ae.lat),xe=s.MercatorCoordinate.fromLngLat(Ae);xe.x+=Hl;const De=xe.toLngLat(),Re=k.project(De.lng,De.lat),Ge=Zh(Re.x-ce.x,Re.y-ce.y,ke),Ye=s.MercatorCoordinate.fromLngLat(Ae);Ye.y+=Hl;const et=Ye.toLngLat(),ht=k.project(et.lng,et.lat),lt=Zh(ht.x-ce.x,ht.y-ce.y,ke),xt=Math.abs(Ge.x)/Math.abs(lt.y),Xt=s.identity([]);s.rotateZ(Xt,Xt,-ke*(1-(Y?0:U)));const ft=s.identity([]);return s.scale(ft,ft,[1,1-(1-xt)*U,1]),ft[4]=-lt.x/lt.y*U,s.rotateZ(ft,ft,ke),s.multiply(ft,Xt,ft),ft})(_.projection,0,_.center,m,u),S=Eg(_);return s.scale(y,y,[S,S,1]),y}function Eg(_){const u=_.projection,m=Yh(_.projection,_.zoom,_.width,_.height),y=Cg(u,_.center),S=Cg(u,s.LngLat.convert(u.center));return Math.pow(2,y*m+(1-m)*S)}function Yh(_,u,m,y,S=1/0){const k=_.range;if(!k)return 0;const R=Math.min(S,Math.max(m,y)),O=Math.log(R/1024)/Math.LN2;return s.smoothstep(k[0]+O,k[1]+O,u)}const Hl=1/4e4;function Cg(_,u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(u.lng-180*Hl,m),S=new s.LngLat(u.lng+180*Hl,m),k=_.project(y.lng,m),R=_.project(S.lng,m),O=s.MercatorCoordinate.fromLngLat(y),U=s.MercatorCoordinate.fromLngLat(S),Y=R.x-k.x,J=R.y-k.y,ae=U.x-O.x,pe=U.y-O.y,Te=Math.sqrt((ae*ae+pe*pe)/(Y*Y+J*J));return Math.log(Te)/Math.LN2}function Zh(_,u,m){const y=Math.cos(m),S=Math.sin(m);return{x:_*y-u*S,y:_*S+u*y}}class Pu{constructor(u,m,y,S,k,R,O){this.tileSize=512,this._renderWorldCopies=k===void 0||k,this._minZoom=u||0,this._maxZoom=m||22,this._minPitch=y??0,this._maxPitch=S??60,this.setProjection(R),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Kh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new kd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Pu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,m=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(u||y)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!p(m,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const m=u!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const m=-u*Math.PI/180;var y;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),(function(S,k,R){var O=k[0],U=k[1],Y=k[2],J=k[3],ae=Math.sin(R),pe=Math.cos(R);S[0]=O*pe+Y*ae,S[1]=U*pe+J*ae,S[2]=O*-ae+Y*pe,S[3]=U*-ae+J*pe})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const m=s.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=s.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const m=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let S=0,k=0;for(let R=0;R<m.length;R++){const O=new s.Point(m[R][0]*this.width,y+m[R][1]*(this.height-y)),U=u.pointCoordinate(O);if(!U)continue;const Y=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);S+=U[3]*Y,k+=Y}return k===0?NaN:S/k}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*m,S=this._mercatorZfromZoom(u),k=this._mercatorZfromZoom(this._maxZoom),R=Math.max(S-y,k);this._setZoom(this._zoomFromMercatorZ(R))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let y;y=u.z<this._camera.position[2]?[m.x,m.y,m.z]:[u.x,u.y,u.z];const S=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let m=!1;if(u.orientation&&!s.exactEquals(u.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(u.orientation)),u.position){const y=[u.position.x,u.position.y,u.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,m=new xl;return m.position=new s.MercatorCoordinate(u[0],u[1],u[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(u){if(!s.length$1(u))return!1;s.normalize$1(u,u);const m=s.transformQuat([],[0,0,-1],u),y=s.transformQuat([],[0,-1,0],u);if(y[2]<0)return!1;const S=Cd(m,y);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(u){const m=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;u[2]=s.clamp(u[2],S/y,S/m),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,m,y){this._unmodified=!1,this._edgeInsets.interpolate(u,m,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const m=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(u){const m=[new s.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.Point(0,0)),S=this.pointCoordinate(new s.Point(this.width,0)),k=this.pointCoordinate(new s.Point(this.width,this.height)),R=this.pointCoordinate(new s.Point(0,this.height)),O=Math.floor(Math.min(y.x,S.x,k.x,R.x)),U=Math.floor(Math.max(y.x,S.x,k.x,R.x)),Y=1;for(let J=O-Y;J<=U+Y;J++)J!==0&&m.push(new s.UnwrappedTileID(J,u))}return m}coveringTiles(u){let m=this.coveringZoomLevel(u);const y=m,S=this.elevation&&!u.isTerrainDEM,k=this.projection.name==="mercator";if(u.minzoom!==void 0&&m<u.minzoom)return[];u.maxzoom!==void 0&&m>u.maxzoom&&(m=u.maxzoom);const R=this.locationCoordinate(this.center),O=this.center.lat,U=1<<m,Y=[U*R.x,U*R.y,0],J=this.projection.name==="globe",ae=!J,pe=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,ae),Te=J?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ke=U*s.mercatorZfromAltitude(1,this.center.lat),Se=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Ae=[U*Te.x,U*Te.y,Se*(ae?1:ke)],ce=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),xe=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,De=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Re=u.isTerrainDEM?-De:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ge=this.projection.isReprojectedInTileSpace?Eg(this):1,Ye=_t=>{const qt=new s.MercatorCoordinate(_t.x+25e-6,_t.y,_t.z),jt=new s.MercatorCoordinate(_t.x,_t.y+25e-6,_t.z),Qt=_t.toLngLat(),Rn=qt.toLngLat(),Kn=jt.toLngLat(),En=this.locationCoordinate(Qt),Vn=this.locationCoordinate(Rn),_i=this.locationCoordinate(Kn),vi=Math.hypot(Vn.x-En.x,Vn.y-En.y),Mn=Math.hypot(_i.x-En.x,_i.y-En.y);return Math.sqrt(vi*Mn)*Ge/25e-6},et=_t=>{const At=De,qt=Re;return{aabb:s.tileAABB(this,U,0,0,0,_t,qt,At,this.projection),zoom:0,x:0,y:0,minZ:qt,maxZ:At,wrap:_t,fullyVisible:!1}},ht=[];let lt=[];const xt=m,Xt=u.reparseOverscaled?y:m,ft=_t=>_t*_t,Bt=ft((Se-this._centerAltitude)*ke),Et=_t=>{if(!this._elevation||!_t.tileID||!k)return;const At=this._elevation.getMinMaxForTile(_t.tileID),qt=_t.aabb;At?(qt.min[2]=At.min,qt.max[2]=At.max,qt.center[2]=(qt.min[2]+qt.max[2])/2):(_t.shouldSplit=Jt(_t),_t.shouldSplit||(qt.min[2]=qt.max[2]=qt.center[2]=this._centerAltitude))},Jt=_t=>{if(_t.zoom<xe)return!0;if(_t.zoom===xt)return!1;if(_t.shouldSplit!=null)return _t.shouldSplit;const At=_t.aabb.distanceX(Ae),qt=_t.aabb.distanceY(Ae);let jt=Bt,Qt=1;if(J){jt=ft(_t.aabb.distanceZ(Ae));const En=Math.pow(2,_t.zoom),Vn=s.latFromMercatorY((_t.y+1)/En),_i=s.latFromMercatorY(_t.y/En),vi=Math.min(Math.max(O,Vn),_i),Mn=s.circumferenceAtLatitude(vi)/s.circumferenceAtLatitude(O);if(Qt=vi===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mn/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&_t.zoom===xt-1&&Mn>=.9)return!0}else if(S&&(jt=ft(_t.aabb.distanceZ(Ae)*ke)),this.projection.isReprojectedInTileSpace&&y<=5){const En=Math.pow(2,_t.zoom),Vn=Ye(new s.MercatorCoordinate((_t.x+.5)/En,(_t.y+.5)/En));Qt=Vn>.85?1:Vn}const Rn=At*At+qt*qt+jt,Kn=ft((1<<xt-_t.zoom)*ce*Qt*((En,Vn)=>{if(Vn*ft(.707)<En)return 1;const _i=Math.sqrt(Vn/En);return _i/(1.4144271570014144+(Math.pow(1.1,_i-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(jt,Bt),Rn));return Rn<Kn};if(this.renderWorldCopies)for(let _t=1;_t<=3;_t++)ht.push(et(-_t)),ht.push(et(_t));for(ht.push(et(0));ht.length>0;){const _t=ht.pop(),At=_t.x,qt=_t.y;let jt=_t.fullyVisible;if(!jt){const Qt=_t.aabb.intersects(pe);if(Qt===0)continue;jt=Qt===2}if(_t.zoom!==xt&&Jt(_t))for(let Qt=0;Qt<4;Qt++){const Rn=(At<<1)+Qt%2,Kn=(qt<<1)+(Qt>>1),En={aabb:k?_t.aabb.quadrant(Qt):s.tileAABB(this,U,_t.zoom+1,Rn,Kn,_t.wrap,_t.minZ,_t.maxZ,this.projection),zoom:_t.zoom+1,x:Rn,y:Kn,wrap:_t.wrap,fullyVisible:jt,tileID:void 0,shouldSplit:void 0,minZ:_t.minZ,maxZ:_t.maxZ};S&&!J&&(En.tileID=new s.OverscaledTileID(_t.zoom+1===xt?Xt:_t.zoom+1,_t.wrap,_t.zoom+1,Rn,Kn),Et(En)),ht.push(En)}else{const Qt=_t.zoom===xt?Xt:_t.zoom;if(u.minzoom&&u.minzoom>Qt)continue;const Rn=Y[0]-(.5+At+(_t.wrap<<_t.zoom))*(1<<m-_t.zoom),Kn=Y[1]-.5-qt,En=_t.tileID?_t.tileID:new s.OverscaledTileID(Qt,_t.wrap,_t.zoom,At,qt);lt.push({tileID:En,distanceSq:Rn*Rn+Kn*Kn})}}if(this.fogCullDistSq){const _t=this.fogCullDistSq,At=this.horizonLineFromTop();lt=lt.filter((qt=>{const jt=[0,0,0,1],Qt=[s.EXTENT,s.EXTENT,0,1],Rn=this.calculateFogTileMatrix(qt.tileID.toUnwrapped());s.transformMat4$1(jt,jt,Rn),s.transformMat4$1(Qt,Qt,Rn);const Kn=s.getAABBPointSquareDist(jt,Qt);if(Kn===0)return!0;let En=!1;const Vn=this._elevation;if(Vn&&Kn>_t&&At!==0){const _i=this.calculateProjMatrix(qt.tileID.toUnwrapped());let vi;u.isTerrainDEM||(vi=Vn.getMinMaxForTile(qt.tileID)),vi||(vi={min:Re,max:De});const Mn=s.furthestTileCorner(this.rotation),Bi=[Mn[0]*s.EXTENT,Mn[1]*s.EXTENT,vi.max];s.transformMat4(Bi,Bi,_i),En=(1-Bi[1])*this.height*.5<At}return Kn<_t||En}))}return lt.sort(((_t,At)=>_t.distanceSq-At.distanceSq)).map((_t=>_t.tileID))}resize(u,m){this.width=u,this.height=m,this.pixelsToGLUnits=[2/u,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const m=s.clamp(u.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(u.lng,m);return new s.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,m){let y,S;const k=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;y=(m.x-k.x)/O,S=(m.y-k.y)/O}else{const O=this.pointCoordinate(m),U=this.pointCoordinate(k);y=O.x-U.x,S=O.y-U.y}const R=this.locationCoordinate(u);this.setLocation(new s.MercatorCoordinate(R.x-y,R.y-S))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,m){const y=m?s.mercatorZfromAltitude(m,u.lat):void 0,S=this.projection.project(u.lng,u.lat);return new s.MercatorCoordinate(S.x,S.y,y)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,m){const y=m??this._centerAltitude,S=[u.x,u.y,0,1],k=[u.x,u.y,1,1];s.transformMat4$1(S,S,this.pixelMatrixInverse),s.transformMat4$1(k,k,this.pixelMatrixInverse);const R=k[3];s.scale$1(S,S,1/S[3]),s.scale$1(k,k,1/R);const O=S[2],U=k[2];return{p0:S,p1:k,t:O===U?0:(y-O)/(U-O)}}screenPointToMercatorRay(u){const m=[u.x,u.y,0,1],y=[u.x,u.y,1,1];return s.transformMat4$1(m,m,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),s.scale$1(y,y,1/y[3]),m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(m,m,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([m[0],m[1],m[2]],s.normalize([],s.sub([],y,m)))}rayIntersectionCoordinate(u){const{p0:m,p1:y,t:S}=u,k=s.mercatorZfromAltitude(m[2],this._center.lat),R=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(m[0],y[0],S)/this.worldSize,s.number(m[1],y[1],S)/this.worldSize,s.number(k,R,S))}pointCoordinate(u,m=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,m)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let m=this.projection.pointCoordinate3D(this,u.x,u.y);if(m)return new s.MercatorCoordinate(m[0],m[1],m[2]);let y=0,S=this.horizonLineFromTop();if(u.y>S)return this.pointCoordinate(u);const k=.02*S,R=u.clone();for(let O=0;O<10&&S-y>k;O++){R.y=s.number(y,S,.66);const U=this.projection.pointCoordinate3D(this,R.x,R.y);U?(S=R.y,m=U):y=R.y}return m?new s.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}isPointOnSurface(u){if(u.y<0||u.y>this.height||u.x<0||u.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(u);const m=this.pointCoordinate(u);return m.y>=0&&m.y<=1}_coordinatePoint(u,m){const y=m&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,S=[u.x*this.worldSize,u.y*this.worldSize,y+u.toAltitude(),1];return s.transformMat4$1(S,S,this.pixelMatrix),S[3]>0?new s.Point(S[0]/S[3],S[1]/S[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:m}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,k=this.pointLocation3D(new s.Point(m,u)),R=this.pointLocation3D(new s.Point(S,u)),O=this.pointLocation3D(new s.Point(S,y)),U=this.pointLocation3D(new s.Point(m,y));let Y=Math.min(k.lng,R.lng,O.lng,U.lng),J=Math.max(k.lng,R.lng,O.lng,U.lng),ae=Math.min(k.lat,R.lat,O.lat,U.lat),pe=Math.max(k.lat,R.lat,O.lat,U.lat);const Te=Math.pow(2,-this.zoom)/16*270,ke=this.projection.name==="globe"?1:4,Se=(Ae,ce,xe,De,Re)=>{const Ge=(Ae+xe)/2,Ye=(ce+De)/2,et=new s.Point(Ge,Ye),{lng:ht,lat:lt}=this.pointLocation3D(et),xt=Math.max(0,Y-ht,ae-lt,ht-J,lt-pe);Y=Math.min(Y,ht),J=Math.max(J,ht),ae=Math.min(ae,lt),pe=Math.max(pe,lt),(Re<ke||xt>Te)&&(Se(Ae,ce,Ge,Ye,Re+1),Se(Ge,Ye,xe,De,Re+1))};if(Se(m,u,S,u,1),Se(S,u,S,y,1),Se(S,y,m,y,1),Se(m,y,m,u,1),this.projection.name==="globe"){const[Ae,ce]=s.polesInViewport(this);Ae?(pe=90,J=180,Y=-180):ce&&(ae=-90,J=180,Y=-180)}return new s.LngLatBounds(new s.LngLat(Y,ae),new s.LngLat(J,pe))}_getBoundsRectangular(u,m){const{top:y,left:S}=this._edgeInsets,k=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,O=new s.Point(S,y),U=new s.Point(R,y),Y=new s.Point(R,k),J=new s.Point(S,k);let ae=this.pointCoordinate(O,u),pe=this.pointCoordinate(U,u);const Te=this.pointCoordinate(Y,m),ke=this.pointCoordinate(J,m),Se=(Ae,ce)=>(ce.y-Ae.y)/(ce.x-Ae.x);return ae.y>1&&pe.y>=0?ae=new s.MercatorCoordinate((1-ke.y)/Se(ke,ae)+ke.x,1):ae.y<0&&pe.y<=1&&(ae=new s.MercatorCoordinate(-ke.y/Se(ke,ae)+ke.x,0)),pe.y>1&&ae.y>=0?pe=new s.MercatorCoordinate((1-Te.y)/Se(Te,pe)+Te.x,1):pe.y<0&&ae.y<=1&&(pe=new s.MercatorCoordinate(-Te.y/Se(Te,pe)+Te.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(ke)).extend(this.coordinateLocation(Te))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=u.visibleDemTiles.reduce(((y,S)=>{if(S.dem){const k=S.dem.tree;y.min=Math.min(y.min,k.minimums[0]),y.max=Math.max(y.max,k.maximums[0])}return y}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*u.exaggeration(),m.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-m*(1-this._horizonShift);return u?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,m){return this.projection.createTileMatrix(this,m,u)}calculateDistanceTileData(u){const m=u.key,y=this._distanceTileDataCache;if(y[m])return y[m];const S=u.canonical,k=1/this.height,R=this.cameraWorldSize,O=R/this.zoomScale(S.z),U=(S.x+Math.pow(2,S.z)*u.wrap)*O,Y=S.y*O,J=this.point;J.x*=R/this.worldSize,J.y*=R/this.worldSize;const ae=this.angle,pe=Math.sin(-ae),Te=-Math.cos(-ae);return y[m]={bearing:[pe,Te],center:[(J.x-U)*k,(J.y-Y)*k],scale:O/s.EXTENT*k},y[m]}calculateFogTileMatrix(u){const m=u.key,y=this._fogTileMatrixCache;if(y[m])return y[m];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return s.multiply(S,this.worldToFogMatrix,S),y[m]=new Float32Array(S),y[m]}calculateProjMatrix(u,m=!1){const y=u.key,S=m?this._alignedProjMatrixCache:this._projMatrixCache;if(S[y])return S[y];const k=this.calculatePosMatrix(u,this.worldSize);return s.multiply(k,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,k),S[y]=new Float32Array(k),S[y]}calculatePixelsToTileUnitsMatrix(u){const m=u.tileID.key,y=this._pixelsToTileUnitsCache;if(y[m])return y[m];const S=(function(k,R){const{scale:O}=k.tileTransform,U=O*s.EXTENT/(k.tileSize*Math.pow(2,R.zoom-k.tileID.overscaledZ+k.tileID.canonical.z));return Y=new Float32Array(4),pe=(J=R.inverseAdjustmentMatrix)[1],Te=J[2],ke=J[3],Ae=(ae=[U,U])[1],Y[0]=J[0]*(Se=ae[0]),Y[1]=pe*Se,Y[2]=Te*Ae,Y[3]=ke*Ae,Y;var Y,J,ae,pe,Te,ke,Se,Ae})(u,this);return y[m]=S,y[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,m=s.fromScaling([],[u,u,u]);return s.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(m),S=this._camera.forward(),k=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=k,S[2]/=k,s.normalize(S,S);const R=u.raycast(y,S,u.exaggeration());if(R){const O=s.scaleAndAdd([],y,S,R),U=new s.MercatorCoordinate(O[0],O[1],s.mercatorZfromAltitude(O[2],s.latFromMercatorY(O[1]))),Y=(U.z+s.length([U.x-y[0],U.y-y[1],U.z-y[2]*k]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const m=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(y),k=m.getAtPointOrZero(new s.MercatorCoordinate(...S)),R=this.pixelsPerMeter/this.worldSize*k,O=this._minimumHeightOverTerrain(),U=S[2]-R;if(U<=O)if(U<0||u){const Y=this.locationCoordinate(this._center,this._centerAltitude),J=[S[0],S[1],Y.z-S[2]],ae=s.length(J);J[2]-=(O-U)/this._pixelsPerMercatorPixel;const pe=s.length(J);if(pe===0)return;s.scale$2(J,J,ae/pe*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],Y.z*this._pixelsPerMercatorPixel-J[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const pe=this.center;return pe.lat=s.clamp(pe.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(pe.lng=s.clamp(pe.lng,this.minLng,this.maxLng)),this.center=pe,void(this._constraining=!1)}const m=this._unmodified,{x:y,y:S}=this.point;let k=0,R=y,O=S;const U=this.width/2,Y=this.height/2,J=this.worldMinY*this.scale,ae=this.worldMaxY*this.scale;if(S-Y<J&&(O=J+Y),S+Y>ae&&(O=ae-Y),ae-J<this.height&&(k=Math.max(k,this.height/(ae-J)),O=(ae+J)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const pe=this.worldMinX*this.scale,Te=this.worldMaxX*this.scale,ke=this.worldSize/2-(pe+Te)/2;R=(y+ke+this.worldSize)%this.worldSize-ke,R-U<pe&&(R=pe+U),R+U>Te&&(R=Te-U),Te-pe<this.width&&(k=Math.max(k,this.width/(Te-pe)),R=(Te+pe)/2)}R===y&&O===S||(this.center=this.unproject(new s.Point(R,O))),k&&(this.zoom+=this.scaleZoom(k)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=Yh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,k=this._camera.getWorldToCamera(this.worldSize,S),R=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);R[8]=2*-u.x/this.width,R[9]=2*u.y/this.height;let O=s.mul([],R,k);if(this.projection.isReprojectedInTileSpace){const Ye=this.locationCoordinate(this.center),et=s.identity([]);s.translate(et,et,[Ye.x*this.worldSize,Ye.y*this.worldSize,0]),s.multiply(et,et,Au(this)),s.translate(et,et,[-Ye.x*this.worldSize,-Ye.y*this.worldSize,0]),s.multiply(O,O,et),this.inverseAdjustmentMatrix=(function(ht){const lt=Au(ht,!0);return j([],[lt[0],lt[1],lt[4],lt[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],O,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=O,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const U=s.invert([],R);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(U,this.horizonLineFromTop(),this.height);const Y=new Float32Array(16);s.identity(Y),s.scale(Y,Y,[1,-1,1]),s.rotateX(Y,Y,this._pitch),s.rotateZ(Y,Y,this.angle);const J=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ae=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;J[8]=2*-u.x/this.width,J[9]=2*(u.y+ae)/this.height,this.skyboxMatrix=s.multiply(Y,J,Y);const pe=this.point,Te=pe.x,ke=pe.y,Se=this.width%2/2,Ae=this.height%2/2,ce=Math.cos(this.angle),xe=Math.sin(this.angle),De=Te-Math.round(Te)+ce*Se+xe*Ae,Re=ke-Math.round(ke)+ce*Ae+xe*Se,Ge=new Float64Array(O);if(s.translate(Ge,Ge,[De>.5?De-1:De,Re>.5?Re-1:Re,0]),this.alignedProjMatrix=Ge,O=s.create(),s.scale(O,O,[this.width/2,-this.height/2,1]),s.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=s.create(),s.scale(O,O,[1,-1,1]),s.translate(O,O,[-1,-1,0]),s.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=s.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const Ye=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(Ye,Ye,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,y=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,k=[u,u,m];s.scale$2(k,k,S),s.scale$2(y,y,-1),s.multiply$2(y,y,k);const R=s.create();s.translate(R,R,y),s.scale(R,R,k),this.mercatorFogMatrix=R,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,m,S)}_computeCameraPosition(u){const m=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),S=this.point,k=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-u/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-y[0]*k,S.y/this.worldSize-y[1]*k,u/this.worldSize*this._centerAltitude-y[2]*k]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],S=u[2];let k=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(k=Math.min((m-y)/S,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,u,k),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,m=this._camera.forward(),{pitch:y,bearing:S}=this._camera.getPitchBearing(),k=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,R=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),O=Math.max((u[2]-k)/Math.cos(y),R),U=this._zoomFromMercatorZ(O);s.scaleAndAdd(u,u,m,O),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(S,-Math.PI,Math.PI),this._setZoom(s.clamp(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let m=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,S=0,k=1/0;for(;y-m>1e-6&&y>m;){const R=m+.5*(y-m),O=this.tileSize*Math.pow(2,R),U=this.getCameraToCenterDistance(this.projection,R,O),Y=this.scaleZoom(U/(u*this.tileSize)),J=Math.abs(R-Y);J<k&&(k=J,S=R),R<Y?m=R:y=R}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,m){const y=Math.min(u.x,m.x),S=Math.max(u.x,m.x),k=Math.min(u.y,m.y),R=Math.max(u.y,m.y);if(k<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new s.Point(y,k),new s.Point(S,R),new s.Point(y,R),new s.Point(S,k)],U=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const J of O){const ae=this.pointRayIntersection(J);if(ae.t<0)return!0;const pe=this.rayIntersectionCoordinate(ae);if(pe.x<U||pe.y<0||pe.x>Y||pe.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(u,m){const y=s.length(s.sub([],this._camera.position,u)),S=this._zoomFromMercatorZ(y)+m;return y-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const u=(function([m,y,S],k){const R=[m,y,S,1];s.transformMat4$1(R,R,k);const O=R[3]=Math.max(R[3],1e-6);return R[0]/=O,R[1]/=O,R[2]/=O,R})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,u))}}getCameraToCenterDistance(u,m=this.zoom,y=this.worldSize){const S=Yh(u,m,this.width,this.height,1024),k=u.pixelSpaceConversion(this.center.lat,y,S);return .5/Math.tan(.5*this._fov)*this.height*k}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(u,u,this.globeMatrix),u}}function Mu(_,u){let m=!1,y=null;const S=()=>{y=null,m&&(_(),y=setTimeout(S,u),m=!1)};return()=>(m=!0,y||S(),y)}class Id{constructor(u){this._hashName=u&&encodeURIComponent(u),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Mu(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,s.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const m=xc(u);if(this._hashName){const y=this._hashName;let S=!1;const k=s.window.location.hash.slice(1).split("&").map((R=>{const O=R.split("=")[0];return O===y?(S=!0,`${O}=${m}`):R})).filter((R=>R));return S||k.push(`${y}=${m}`),`#${k.join("&")}`}return`#${m}`}_getCurrentHash(){const u=s.window.location.hash.replace("#","");if(this._hashName){let m;return u.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(m=y)})),(m&&m[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some((y=>isNaN(y)))){const y=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(m[3]||0):u.getBearing();return u.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:y,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,u)}}function xc(_,u){const m=_.getCenter(),y=Math.round(100*_.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,S),R=Math.round(m.lng*k)/k,O=Math.round(m.lat*k)/k,U=_.getBearing(),Y=_.getPitch();let J=u?`/${R}/${O}/${y}`:`${y}/${O}/${R}`;return(U||Y)&&(J+="/"+Math.round(10*U)/10),Y&&(J+=`/${Math.round(Y)}`),J}const Ad={linearity:.3,easing:s.bezier(0,0,.3,1)},Pd=s.extend({deceleration:2500,maxSpeed:1400},Ad),Md=s.extend({deceleration:20,maxSpeed:1400},Ad),_n=s.extend({deceleration:1e3,maxSpeed:360},Ad),ea=s.extend({deceleration:1e3,maxSpeed:90},Ad);class Jh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,m=s.exported.now();for(;u.length>0&&m-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)m.zoom+=k.zoomDelta||0,m.bearing+=k.bearingDelta||0,m.pitch+=k.pitchDelta||0,k.panDelta&&m.pan._add(k.panDelta),k.around&&(m.around=k.around),k.pinchAround&&(m.pinchAround=k.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const k=Ld(m.pan.mag(),y,s.extend({},Pd,u||{}));S.offset=m.pan.mult(k.amount/m.pan.mag()),S.center=this._map.transform.center,Dd(S,k)}if(m.zoom){const k=Ld(m.zoom,y,Md);S.zoom=this._map.transform.zoom+k.amount,Dd(S,k)}if(m.bearing){const k=Ld(m.bearing,y,_n);S.bearing=this._map.transform.bearing+s.clamp(k.amount,-179,179),Dd(S,k)}if(m.pitch){const k=Ld(m.pitch,y,ea);S.pitch=this._map.transform.pitch+k.amount,Dd(S,k)}if(S.zoom||S.bearing){const k=m.pinchAround===void 0?m.around:m.pinchAround;S.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function Dd(_,u){(!_.duration||_.duration<u.duration)&&(_.duration=u.duration,_.easing=u.easing)}function Ld(_,u,m){const{maxSpeed:y,linearity:S,deceleration:k}=m,R=s.clamp(_*S/(u/1e3),-y,y),O=Math.abs(R)/(k*S);return{easing:m.easing,duration:1e3*O,amount:R*(O/2)}}class As extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y,S={}){const k=ie(m.getCanvasContainer(),y),R=m.unproject(k);super(u,s.extend({point:k,lngLat:R,originalEvent:y},S)),this._defaultPrevented=!1,this.target=m}}class tl extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){const S=u==="touchend"?y.changedTouches:y.touches,k=X(m.getCanvasContainer(),S),R=k.map((U=>m.unproject(U))),O=k.reduce(((U,Y,J,ae)=>U.add(Y.div(ae.length))),new s.Point(0,0));super(u,{points:k,point:O,lngLats:R,lngLat:m.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class Qh extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,m,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}}class Dm{constructor(u,m){this._map=u,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Qh(u.type,this._map,u))}mousedown(u,m){return this._mousedownPos=m,this._firePreventable(new As(u.type,this._map,u))}mouseup(u){this._map.fire(new As(u.type,this._map,u))}preclick(u){const m=s.extend({},u);m.type="preclick",this._map.fire(new As(m.type,this._map,m))}click(u,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(u),this._map.fire(new As(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new As(u.type,this._map,u))}mouseover(u){this._map.fire(new As(u.type,this._map,u))}mouseout(u){this._map.fire(new As(u.type,this._map,u))}touchstart(u){return this._firePreventable(new tl(u.type,this._map,u))}touchmove(u){this._map.fire(new tl(u.type,this._map,u))}touchend(u){this._map.fire(new tl(u.type,this._map,u))}touchcancel(u){this._map.fire(new tl(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ef{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new As(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new As("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new As(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kg{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,m){this.isEnabled()&&u.shiftKey&&u.button===0&&(V(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(u,m){if(!this._active)return;const y=m,S=this._startPos,k=this._lastPos;if(!S||!k||k.equals(y)||!this._box&&y.dist(S)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=C("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const R=Math.min(S.x,y.x),O=Math.max(S.x,y.x),U=Math.min(S.y,y.y),Y=Math.max(S.y,y.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${R}px,${U}px)`,this._box.style.width=O-R+"px",this._box.style.height=Y-U+"px")}))}mouseupWindow(u,m){if(!this._active)return;const y=this._startPos,S=m;if(y&&u.button===0){if(this.reset(),K(),y.x!==S.x||y.y!==S.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:k=>k.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),H(),delete this._startPos,delete this._lastPos}_fireEvent(u,m){return this._map.fire(new s.Event(u,{originalEvent:m}))}}function Zc(_,u){const m={};for(let y=0;y<_.length;y++)m[_[y].identifier]=u[y];return m}class wc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,m,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=(function(S){const k=new s.Point(0,0);for(const R of S)k._add(R);return k.div(S.length)})(m),this.touches=Zc(y,m)))}touchmove(u,m,y){if(this.aborted||!this.centroid)return;const S=Zc(y,m);for(const k in this.touches){const R=S[k];(!R||R.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(u,m,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class Lm{constructor(u){this.singleTap=new wc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,m,y){this.singleTap.touchstart(u,m,y)}touchmove(u,m,y){this.singleTap.touchmove(u,m,y)}touchend(u,m,y){const S=this.singleTap.touchend(u,m,y);if(S){const k=u.timeStamp-this.lastTime<500,R=!this.lastTap||this.lastTap.dist(S)<30;if(k&&R||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Ig{constructor(){this._zoomIn=new Lm({numTouches:1,numTaps:2}),this._zoomOut=new Lm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,m,y){this._zoomIn.touchstart(u,m,y),this._zoomOut.touchstart(u,m,y)}touchmove(u,m,y){this._zoomIn.touchmove(u,m,y),this._zoomOut.touchmove(u,m,y)}touchend(u,m,y){const S=this._zoomIn.touchend(u,m,y),k=this._zoomOut.touchend(u,m,y);return S?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()+1,around:R.unproject(S)},{originalEvent:u})}):k?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:R.getZoom()-1,around:R.unproject(k)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ag={0:1,2:2};class nl{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,m){return!1}_move(u,m){return{}}mousedown(u,m){if(this._lastPoint)return;const y=$(u);this._correctButton(u,y)&&(this._lastPoint=m,this._eventButton=y)}mousemoveWindow(u,m){const y=this._lastPoint;if(y){if(u.preventDefault(),this._eventButton!=null&&(function(S,k){const R=Ag[k];return S.buttons===void 0||(S.buttons&R)!==R})(u,this._eventButton))this.reset();else if(this._moved||!(m.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(y,m)}}mouseupWindow(u){this._lastPoint&&$(u)===this._eventButton&&(this._moved&&K(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rd extends nl{mousedown(u,m){super.mousedown(u,m),this._lastPoint&&(this._active=!0)}_correctButton(u,m){return m===0&&!u.ctrlKey}_move(u,m){return{around:m,panDelta:m.sub(u)}}}class tf extends nl{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=.8*(m.x-u.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(u){u.preventDefault()}}class Rm extends nl{_correctButton(u,m){return m===0&&u.ctrlKey||m===2}_move(u,m){const y=-.5*(m.y-u.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(u){u.preventDefault()}}class nf{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(u,m,y){return this._calculateTransform(u,m,y)}touchmove(u,m,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,m,y)}}touchend(u,m,y){this._calculateTransform(u,m,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,m,y){y.length>0&&(this._active=!0);const S=Zc(y,m),k=new s.Point(0,0),R=new s.Point(0,0);let O=0;for(const Y in S){const J=S[Y],ae=this._touches[Y];ae&&(k._add(J),R._add(J.sub(ae)),O++,S[Y]=J)}if(this._touches=S,O<this._minTouches||!R.mag())return;const U=R.div(O);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(O),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Od{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,m,y){return{}}touchstart(u,m,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([m[0],m[1]]))}touchmove(u,m,y){const S=this._firstTwoTouches;if(!S)return;u.preventDefault();const[k,R]=S,O=Gl(y,m,k),U=Gl(y,m,R);if(!O||!U)return;const Y=this._aroundCenter?null:O.add(U).div(2);return this._move([O,U],Y,u)}touchend(u,m,y){if(!this._firstTwoTouches)return;const[S,k]=this._firstTwoTouches,R=Gl(y,m,S),O=Gl(y,m,k);R&&O||(this._active&&K(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Gl(_,u,m){for(let y=0;y<_.length;y++)if(_[y].identifier===m)return u[y]}function ql(_,u){return Math.log(_/u)/Math.LN2}class Pg extends Od{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,m){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ql(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ql(this._distance,y),pinchAround:m}}}function Om(_,u){return 180*_.angleWith(u)/Math.PI}class Mg extends Od{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,m){const y=this._vector;if(this._vector=u[0].sub(u[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Om(this._vector,y),pinchAround:m}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const m=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const S=Om(u,y);return Math.abs(S)<m}}function Tc(_){return Math.abs(_.y)>Math.abs(_.x)}class Dg extends Od{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,Tc(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,m,y){const S=this._lastPoints;if(!S)return;const k=u[0].sub(S[0]),R=u[1].sub(S[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(k,R,y.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(k.y+R.y)/2*-.5})}gestureBeginsVertically(u,m,y){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,k=m.mag()>=2;if(!S&&!k)return;if(!S||!k)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const R=u.y>0==m.y>0;return Tc(u)&&Tc(m)&&R}}const Lg={panStep:100,bearingStep:15,pitchStep:10};class $_{constructor(){const u=Lg;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let m=0,y=0,S=0,k=0,R=0;switch(u.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),k=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),k=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),R=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),R=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:O=>{const U=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:Rg,zoom:m?Math.round(U)+m*(u.shiftKey?2:1):U,bearing:O.getBearing()+y*this._bearingStep,pitch:O.getPitch()+S*this._pitchStep,offset:[-k*this._panStep,-R*this._panStep],center:O.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rg(_){return _*(2-_)}const rf=4.000244140625;class Og{constructor(u,m){this._map=u,this._el=u.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=u.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=s.exported.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,m!==0&&m%rf==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),u.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=u,this._delta-=m,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=ie(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>rf?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&Y!==0&&(Y=1/Y);const J=m(),ae=Math.pow(2,J),pe=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(pe*Y))),this._type==="wheel"&&(this._startZoom=J,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:m(),S=this._startZoom,k=this._easing;let R,O=!1;if(this._type==="wheel"&&S&&k){const U=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),Y=k(U);R=s.number(S,y,Y),U<1?this._frameId||(this._frameId=!0):O=!0}else R=y,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:R-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let m=s.ease;if(this._prevEase){const y=this._prevEase,S=(s.exported.now()-y.start)/y.duration,k=y.easing(S+.01)-y.easing(S),R=.27/Math.sqrt(k*k+1e-4)*.01,O=Math.sqrt(.0729-R*R);m=s.bezier(R,O,.25,1)}return this._prevEase={start:s.exported.now(),duration:u,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=C("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Vm{constructor(u,m){this._clickZoom=u,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ps{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,m){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(u.shiftKey?-1:1),around:y.unproject(m)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vg{constructor(){this._tap=new Lm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,m,y){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=m[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(u,m,y))}touchmove(u,m,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=m[0],k=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(u,m,y)}touchend(u,m,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(u,m,y)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sc{constructor(u,m,y){this._el=u,this._mousePan=m,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bg{constructor(u,m,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=m,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Bm{constructor(u,m,y,S){this._el=u,this._touchZoom=m,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ta=_=>_.zoom||_.drag||_.pitch||_.rotate;class sf extends s.Event{}class Fg{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,m){const y=s.sub([],m,u);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(u){s.div(u,u,this.constants),s.normalize(u,u),s.mul$1(u,u,this.constants);const m=s.scale$2([],u,this.radius);if(m[2]>0){const y=s.scale$2([],[0,0,1],s.dot(m,[0,0,1])),S=s.scale$2([],s.normalize([],[m[0],m[1],0]),this.radius),k=s.add([],m,s.scale$2([],s.sub([],s.add([],S,y),m),2));m[0]=k[0],m[1]=k[1]}return m}}function na(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class wl{constructor(u,m){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jh(u),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Fg,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[S,k,R]of this._listeners)S.addEventListener(k,S===s.window.document?this.handleWindowEvent:this.handleEvent,R)}destroy(){for(const[u,m,y]of this._listeners)u.removeEventListener(m,u===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const m=this._map,y=m.getCanvasContainer();this._add("mapEvent",new Dm(m,u));const S=m.boxZoom=new kg(m,u);this._add("boxZoom",S);const k=new Ig,R=new Ps;m.doubleClickZoom=new Vm(R,k),this._add("tapZoom",k),this._add("clickZoom",R);const O=new Vg;this._add("tapDragZoom",O);const U=m.touchPitch=new Dg(m);this._add("touchPitch",U);const Y=new tf(u),J=new Rm(u);m.dragRotate=new Bg(u,Y,J),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]);const ae=new Rd(u),pe=new nf(m,u);m.dragPan=new Sc(y,ae,pe),this._add("mousePan",ae),this._add("touchPan",pe,["touchZoom","touchRotate"]);const Te=new Mg,ke=new Pg;m.touchZoomRotate=new Bm(y,ke,Te,O),this._add("touchRotate",Te,["touchPan","touchZoom"]),this._add("touchZoom",ke,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ef(m));const Se=m.scrollZoom=new Og(m,this);this._add("scrollZoom",Se,["mousePan"]);const Ae=m.keyboard=new $_;this._add("keyboard",Ae);for(const ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[ce]&&m[ce].enable(u[ce])}_add(u,m,y){this._handlers.push({handlerName:u,handler:m,allowed:y}),this._handlersById[u]=m}stop(u){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ta(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,m,y){for(const S in u)if(S!==y&&(!m||m.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const m=[];for(const y of u)this._el.contains(y.target)&&m.push(y);return m}handleEvent(u,m){this._updatingCamera=!0;const y=u.type==="renderFrame",S=y?void 0:u,k={needsRenderFrame:!1},R={},O={},U=u.touches?this._getMapTouches(u.touches):void 0,Y=U?X(this._el,U):y?void 0:ie(this._el,u);for(const{handlerName:pe,handler:Te,allowed:ke}of this._handlers){if(!Te.isEnabled())continue;let Se;this._blockedByActive(O,ke,pe)?Te.reset():Te[m||u.type]&&(Se=Te[m||u.type](u,Y,U),this.mergeHandlerResult(k,R,Se,pe,S),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()),(Se||Te.isActive())&&(O[pe]=Te)}const J={};for(const pe in this._previousActiveHandlers)O[pe]||(J[pe]=S);this._previousActiveHandlers=O,(Object.keys(J).length||na(k))&&(this._changes.push([k,R,J]),this._triggerRenderFrame()),(Object.keys(O).length||na(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ae}=k;ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ae(this._map))}mergeHandlerResult(u,m,y,S,k){if(!y)return;s.extend(u,y);const R={handlerName:S,originalEvent:y.originalEvent||k};y.zoomDelta!==void 0&&(m.zoom=R),y.panDelta!==void 0&&(m.drag=R),y.pitchDelta!==void 0&&(m.pitch=R),y.bearingDelta!==void 0&&(m.rotate=R)}_applyChanges(){const u={},m={},y={};for(const[S,k,R]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new s.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.aroundCoord!==void 0&&(u.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),s.extend(m,k),s.extend(y,R);this._updateMapTransform(u,m,y),this._changes=[]}_updateMapTransform(u,m,y){const S=this._map,k=S.transform,R=xe=>[xe.x,xe.y,xe.z];if((xe=>{const De=this._eventsInProgress.drag;return De&&!this._handlersById[De.handlerName].isActive()})()&&!na(u)){const xe=k.zoom;k.cameraElevationReference="sea",k.recenterOnTerrain(),k.cameraElevationReference="ground",xe!==k.zoom&&this._map._update(!0)}if(k._isCameraConstrained&&S._stop(!0),!na(u))return void this._fireEvents(m,y,!0);let{panDelta:O,zoomDelta:U,bearingDelta:Y,pitchDelta:J,around:ae,aroundCoord:pe,pinchAround:Te}=u;k._isCameraConstrained&&(U>0&&(U=0),k._isCameraConstrained=!1),Te!==void 0&&(ae=Te),(U||(xe=>m[xe]&&!this._eventsInProgress[xe])("drag"))&&ae&&(this._dragOrigin=R(k.pointCoordinate3D(ae)),this._trackingEllipsoid.setup(k._camera.position,this._dragOrigin)),k.cameraElevationReference="sea",S._stop(!0),ae=ae||S.transform.centerPoint,Y&&(k.bearing+=Y),J&&(k.pitch+=J),k._updateCameraState();const ke=[0,0,0];if(O)if(k.projection.name==="mercator"){const xe=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(ae).dir),De=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(ae.sub(O)).dir);ke[0]=De[0]-xe[0],ke[1]=De[1]-xe[1]}else{const xe=k.pointCoordinate(ae);if(k.projection.name==="globe"){O=O.rotate(-k.angle);const De=k._pixelsPerMercatorPixel/k.worldSize;ke[0]=-O.x*s.mercatorScale(s.latFromMercatorY(xe.y))*De,ke[1]=-O.y*s.mercatorScale(k.center.lat)*De}else{const De=k.pointCoordinate(ae.sub(O));xe&&De&&(ke[0]=De.x-xe.x,ke[1]=De.y-xe.y)}}const Se=k.zoom,Ae=[0,0,0];if(U){const xe=R(pe||k.pointCoordinate3D(ae)),De={dir:s.normalize([],s.sub([],xe,k._camera.position))};if(De.dir[2]<0){const Re=k.zoomDeltaToMovement(xe,U);s.scale$2(Ae,De.dir,Re)}}const ce=s.add(ke,ke,Ae);k._translateCameraConstrained(ce),U&&Math.abs(k.zoom-Se)>1e-4&&k.recenterOnTerrain(),k.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(m,y,!0)}_fireEvents(u,m,y){const S=ta(this._eventsInProgress),k=ta(u),R={};for(const J in u){const{originalEvent:ae}=u[J];this._eventsInProgress[J]||(R[`${J}start`]=ae),this._eventsInProgress[J]=u[J]}!S&&k&&this._fireEvent("movestart",k.originalEvent);for(const J in R)this._fireEvent(J,R[J]);k&&this._fireEvent("move",k.originalEvent);for(const J in u){const{originalEvent:ae}=u[J];this._fireEvent(J,ae)}const O={};let U;for(const J in this._eventsInProgress){const{handlerName:ae,originalEvent:pe}=this._eventsInProgress[J];this._handlersById[ae].isActive()||(delete this._eventsInProgress[J],U=m[ae]||pe,O[`${J}end`]=U)}for(const J in O)this._fireEvent(J,O[J]);const Y=ta(this._eventsInProgress);if(y&&(S||k)&&!Y){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ae=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;J?(ae(J.bearing||this._map.getBearing())&&(J.bearing=0),this._map.easeTo(J,{originalEvent:U})):(this._map.fire(new s.Event("moveend",{originalEvent:U})),ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,m){this._map.fire(new s.Event(u,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{this._frameId=void 0,this.handleEvent(new sf("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ia="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class il extends s.Evented{constructor(u,m){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,m){return this.jumpTo({center:u},m)}panBy(u,m,y){return u=s.Point.convert(u).mult(-1),this.panTo(this.transform.center,s.extend({offset:u},m),y)}panTo(u,m,y){return this.easeTo(s.extend({center:u},m),y)}getZoom(){return this.transform.zoom}setZoom(u,m){return this.jumpTo({zoom:u},m),this}zoomTo(u,m,y){return this.easeTo(s.extend({zoom:u},m),y)}zoomIn(u,m){return this.zoomTo(this.getZoom()+1,u,m),this}zoomOut(u,m){return this.zoomTo(this.getZoom()-1,u,m),this}getBearing(){return this.transform.bearing}setBearing(u,m){return this.jumpTo({bearing:u},m),this}getPadding(){return this.transform.padding}setPadding(u,m){return this.jumpTo({padding:u},m),this}rotateTo(u,m,y){return this.easeTo(s.extend({bearing:u},m),y)}resetNorth(u,m){return this.rotateTo(0,s.extend({duration:1e3},u),m),this}resetNorthPitch(u,m){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},u),m),this}snapToNorth(u,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,m):this}getPitch(){return this.transform.pitch}setPitch(u,m){return this.jumpTo({pitch:u},m),this}cameraForBounds(u,m){u=s.LngLatBounds.convert(u);const y=m&&m.bearing||0,S=m&&m.pitch||0,k=u.getNorthWest(),R=u.getSouthEast();return this._cameraForBounds(this.transform,k,R,y,S,m)}_extendCameraOptions(u){const m={top:0,bottom:0,right:0,left:0};if(typeof(u=s.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const y=u.padding;u.padding={top:y,bottom:y,right:y,left:y}}return u.padding=s.extend(m,u.padding),u}_minimumAABBFrustumDistance(u,m){const y=m.max[0]-m.min[0],S=m.max[1]-m.min[1];return y/S>u.aspect?y/(2*Math.tan(.5*u.fovX)*u.aspect):S/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,m,y,S,k,R){const O=u.clone(),U=this._extendCameraOptions(R);O.bearing=S,O.pitch=k;const Y=s.LngLat.convert(m),J=s.LngLat.convert(y),ae=.5*(Y.lat+J.lat),pe=.5*(Y.lng+J.lng),Te=s.latLngToECEF(ae,pe),ke=s.normalize([],Te),Se=s.normalize([],s.cross([],ke,[0,1,0])),Ae=s.cross([],Se,ke),ce=[Se[0],Se[1],Se[2],0,Ae[0],Ae[1],Ae[2],0,ke[0],ke[1],ke[2],0,0,0,0,1],xe=[Te,s.latLngToECEF(Y.lat,Y.lng),s.latLngToECEF(J.lat,Y.lng),s.latLngToECEF(J.lat,J.lng),s.latLngToECEF(Y.lat,J.lng),s.latLngToECEF(ae,Y.lng),s.latLngToECEF(ae,J.lng),s.latLngToECEF(Y.lat,pe),s.latLngToECEF(J.lat,pe)];let De=s.Aabb.fromPoints(xe.map((jt=>[s.dot(Se,jt),s.dot(Ae,jt),s.dot(ke,jt)])));const Re=s.transformMat4([],De.center,ce);s.squaredLength(Re)===0&&s.set(Re,0,0,1),s.normalize(Re,Re),s.scale$2(Re,Re,s.GLOBE_RADIUS),O.center=s.ecefToLatLng(Re);const Ge=O.getWorldToCameraMatrix(),Ye=s.invert(new Float64Array(16),Ge);De=s.Aabb.applyTransform(De,s.multiply([],Ge,ce)),s.transformMat4(Re,Re,Ge);const et=.5*(De.max[2]-De.min[2]),ht=this._minimumAABBFrustumDistance(O,De),lt=s.scale$2([],[0,0,1],et),xt=s.add(lt,Re,lt),Xt=ht+(O.pitch===0?0:s.distance(Re,xt)),ft=O.globeCenterInViewSpace,Bt=s.sub([],Re,[ft[0],ft[1],ft[2]]);s.normalize(Bt,Bt),s.scale$2(Bt,Bt,Xt);const Et=s.add([],Re,Bt);s.transformMat4(Et,Et,Ye);const Jt=s.earthRadius/s.GLOBE_RADIUS,_t=s.length(Et),At=s.mercatorZfromAltitude(Math.max(_t*Jt-s.earthRadius,Number.EPSILON),0),qt=Math.min(O.zoomFromMercatorZAdjusted(At),U.maxZoom);return qt>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=qt,this._cameraForBounds(O,m,y,S,k,R)):{center:O.center,zoom:qt,bearing:S,pitch:k}}queryTerrainElevation(u,m){const y=this.transform.elevation;return y?(m=s.extend({},{exaggerated:!0},m),y.getAtPoint(s.MercatorCoordinate.fromLngLat(u),null,m.exaggerated)):null}_cameraForBounds(u,m,y,S,k,R){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,m,y,S,k,R);const O=u.clone(),U=this._extendCameraOptions(R),Y=O.padding;O.bearing=S,O.pitch=k;const J=s.LngLat.convert(m),ae=s.LngLat.convert(y),pe=new s.LngLat(J.lng,ae.lat),Te=new s.LngLat(ae.lng,J.lat),ke=O.project(J),Se=O.project(ae),Ae=this.queryTerrainElevation(J),ce=this.queryTerrainElevation(ae),xe=this.queryTerrainElevation(pe),De=this.queryTerrainElevation(Te),Re=[[ke.x,ke.y,Math.min(Ae||0,ce||0,xe||0,De||0)],[Se.x,Se.y,Math.max(Ae||0,ce||0,xe||0,De||0)]];let Ge=s.Aabb.fromPoints(Re);const Ye=O.getWorldToCameraMatrix(),et=s.invert(new Float64Array(16),Ye);Ge=s.Aabb.applyTransform(Ge,Ye);const ht=s.sub([],Ge.max,Ge.min),lt=Y.left||0,xt=Y.right||0,Xt=Y.bottom||0,ft=Y.top||0,{left:Bt,right:Et,top:Jt,bottom:_t}=U.padding,At=.5*(lt+xt),qt=.5*(ft+Xt),jt=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(lt+xt+Bt+Et))/ht[0],(O.height-(Xt+ft+_t+Jt))/ht[1])),U.maxZoom),Qt=O.scale/O.zoomScale(jt);Ge=new s.Aabb([Ge.min[0]-(Bt+At)*Qt,Ge.min[1]-(_t+qt)*Qt,Ge.min[2]],[Ge.max[0]+(Et+At)*Qt,Ge.max[1]+(Jt+qt)*Qt,Ge.max[2]]);const Rn=.5*ht[2],Kn=this._minimumAABBFrustumDistance(O,Ge),En=[0,0,1,0];s.transformMat4$1(En,En,Ye),s.normalize$2(En,En);const Vn=s.scale$2([],En,Kn+Rn),_i=s.add([],Ge.center,Vn),vi=(typeof U.offset.x=="number"&&typeof U.offset.y=="number"?new s.Point(U.offset.x,U.offset.y):s.Point.convert(U.offset)).rotate(-s.degToRad(S));Ge.center[0]-=vi.x*Qt,Ge.center[1]+=vi.y*Qt,s.transformMat4(Ge.center,Ge.center,et),s.transformMat4(_i,_i,et);const Mn=[Ge.center[0],Ge.center[1],_i[2]*O.pixelsPerMeter];s.scale$2(Mn,Mn,1/O.worldSize);const Bi=s.lngFromMercatorX(Mn[0]),qi=s.latFromMercatorY(Mn[1]),er=Math.min(O._zoomFromMercatorZ(Mn[2]),U.maxZoom),Ki=new s.LngLat(Bi,qi);return O.mercatorFromTransition&&er<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=er,this._cameraForBounds(O,m,y,S,k,R)):{center:Ki,zoom:er,bearing:S,pitch:k}}fitBounds(u,m,y){const S=this.cameraForBounds(u,m);return this._fitInternal(S,m,y)}fitScreenCoordinates(u,m,y,S,k){const R=s.Point.convert(u),O=s.Point.convert(m),U=new s.Point(Math.min(R.x,O.x),Math.min(R.y,O.y)),Y=new s.Point(Math.max(R.x,O.x),Math.max(R.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(R,O))return this;const J=this.transform.pointLocation3D(U),ae=this.transform.pointLocation3D(Y),pe=this.transform.pointLocation3D(new s.Point(U.x,Y.y)),Te=this.transform.pointLocation3D(new s.Point(Y.x,U.y)),ke=[Math.min(J.lng,ae.lng,pe.lng,Te.lng),Math.min(J.lat,ae.lat,pe.lat,Te.lat)],Se=[Math.max(J.lng,ae.lng,pe.lng,Te.lng),Math.max(J.lat,ae.lat,pe.lat,Te.lat)],Ae=S&&S.pitch?S.pitch:this.getPitch(),ce=this._cameraForBounds(this.transform,ke,Se,y,Ae,S);return this._fitInternal(ce,S,k)}_fitInternal(u,m,y){return u?(delete(m=s.extend(u,m)).padding,m.linear?this.easeTo(m,y):this.flyTo(m,y)):this}jumpTo(u,m){this.stop();const y=u.preloadOnly?this.transform.clone():this.transform;let S=!1,k=!1,R=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(S=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=s.LngLat.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(k=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(R=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),u.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),S&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),k&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),R&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(ia),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,m){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(ia),this;this.stop();const S=y.zoom,k=y.pitch,R=y.bearing;y.setFreeCameraOptions(u);const O=S!==y.zoom,U=k!==y.pitch,Y=R!==y.bearing;return this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),O&&this.fire(new s.Event("zoomstart",m)).fire(new s.Event("zoom",m)).fire(new s.Event("zoomend",m)),Y&&this.fire(new s.Event("rotatestart",m)).fire(new s.Event("rotate",m)).fire(new s.Event("rotateend",m)),U&&this.fire(new s.Event("pitchstart",m)).fire(new s.Event("pitch",m)).fire(new s.Event("pitchend",m)),this.fire(new s.Event("moveend",m)),this}easeTo(u,m){this._stop(!1,u.easeId),((u=s.extend({offset:[0,0],duration:500,easing:s.ease},u)).animate===!1||this._prefersReducedMotion(u))&&(u.duration=0);const y=this.transform,S=this.getZoom(),k=this.getBearing(),R=this.getPitch(),O=this.getPadding(),U="zoom"in u?+u.zoom:S,Y="bearing"in u?this._normalizeBearing(u.bearing,k):k,J="pitch"in u?+u.pitch:R,ae="padding"in u?u.padding:y.padding,pe=s.Point.convert(u.offset);let Te,ke,Se;if(y.projection.name==="globe"){const lt=s.MercatorCoordinate.fromLngLat(y.center),xt=pe.rotate(-y.angle);lt.x+=xt.x/y.worldSize,lt.y+=xt.y/y.worldSize;const Xt=lt.toLngLat(),ft=s.LngLat.convert(u.center||Xt);this._normalizeCenter(ft),Te=y.centerPoint.add(xt),ke=new s.Point(lt.x,lt.y).mult(y.worldSize),Se=new s.Point(s.mercatorXfromLng(ft.lng),s.mercatorYfromLat(ft.lat)).mult(y.worldSize).sub(ke)}else{Te=y.centerPoint.add(pe);const lt=y.pointLocation(Te),xt=s.LngLat.convert(u.center||lt);this._normalizeCenter(xt),ke=y.project(lt),Se=y.project(xt).sub(ke)}const Ae=y.zoomScale(U-S);let ce,xe;u.around&&(ce=s.LngLat.convert(u.around),xe=y.locationPoint(ce));const De=this._zooming||U!==S,Re=this._rotating||k!==Y,Ge=this._pitching||J!==R,Ye=!y.isPaddingEqual(ae),et=lt=>xt=>{if(De&&(lt.zoom=s.number(S,U,xt)),Re&&(lt.bearing=s.number(k,Y,xt)),Ge&&(lt.pitch=s.number(R,J,xt)),Ye&&(lt.interpolatePadding(O,ae,xt),Te=lt.centerPoint.add(pe)),ce)lt.setLocationAtPoint(ce,xe);else{const Xt=lt.zoomScale(lt.zoom-S),ft=U>S?Math.min(2,Ae):Math.max(.5,Ae),Bt=Math.pow(ft,1-xt),Et=lt.unproject(ke.add(Se.mult(xt*Bt)).mult(Xt));lt.setLocationAtPoint(lt.renderWorldCopies?Et.wrap():Et,Te)}return u.preloadOnly||this._fireMoveEvents(m),lt};if(u.preloadOnly){const lt=this._emulate(et,u.duration,y);return this._preloadTiles(lt),this}const ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=De,this._rotating=Re,this._pitching=Ge,this._padding=Ye,this._easeId=u.easeId,this._prepareEase(m,u.noMoveStart,ht),this._ease(et(y),(lt=>{y.recenterOnTerrain(),this._afterEase(m,lt)}),u),this}_prepareEase(u,m,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||y.moving||this.fire(new s.Event("movestart",u)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new s.Event("move",u)),this._zooming&&this.fire(new s.Event("zoom",u)),this._rotating&&this.fire(new s.Event("rotate",u)),this._pitching&&this.fire(new s.Event("pitch",u))}_afterEase(u,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,S=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",u)),S&&this.fire(new s.Event("rotateend",u)),k&&this.fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}flyTo(u,m){if(this._prefersReducedMotion(u)){const jt=s.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,m)}this.stop(),u=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},u);const y=this.transform,S=this.getZoom(),k=this.getBearing(),R=this.getPitch(),O=this.getPadding(),U="zoom"in u?s.clamp(+u.zoom,y.minZoom,y.maxZoom):S,Y="bearing"in u?this._normalizeBearing(u.bearing,k):k,J="pitch"in u?+u.pitch:R,ae="padding"in u?u.padding:y.padding,pe=y.zoomScale(U-S),Te=s.Point.convert(u.offset);let ke=y.centerPoint.add(Te);const Se=y.pointLocation(ke),Ae=s.LngLat.convert(u.center||Se);this._normalizeCenter(Ae);const ce=y.project(Se),xe=y.project(Ae).sub(ce);let De=u.curve;const Re=Math.max(y.width,y.height),Ge=Re/pe,Ye=xe.mag();if("minZoom"in u){const jt=s.clamp(Math.min(u.minZoom,S,U),y.minZoom,y.maxZoom),Qt=Re/y.zoomScale(jt-S);De=Math.sqrt(Qt/Ye*2)}const et=De*De;function ht(jt){const Qt=(Ge*Ge-Re*Re+(jt?-1:1)*et*et*Ye*Ye)/(2*(jt?Ge:Re)*et*Ye);return Math.log(Math.sqrt(Qt*Qt+1)-Qt)}function lt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function xt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Xt=ht(0);let ft=function(jt){return xt(Xt)/xt(Xt+De*jt)},Bt=function(jt){return Re*((xt(Xt)*(lt(Qt=Xt+De*jt)/xt(Qt))-lt(Xt))/et)/Ye;var Qt},Et=(ht(1)-Xt)/De;if(Math.abs(Ye)<1e-6||!isFinite(Et)){if(Math.abs(Re-Ge)<1e-6)return this.easeTo(u,m);const jt=Ge<Re?-1:1;Et=Math.abs(Math.log(Ge/Re))/De,Bt=function(){return 0},ft=function(Qt){return Math.exp(jt*De*Qt)}}u.duration="duration"in u?+u.duration:1e3*Et/("screenSpeed"in u?+u.screenSpeed/De:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const Jt=k!==Y,_t=J!==R,At=!y.isPaddingEqual(ae),qt=jt=>Qt=>{const Rn=Qt*Et,Kn=1/ft(Rn);jt.zoom=Qt===1?U:S+jt.scaleZoom(Kn),Jt&&(jt.bearing=s.number(k,Y,Qt)),_t&&(jt.pitch=s.number(R,J,Qt)),At&&(jt.interpolatePadding(O,ae,Qt),ke=jt.centerPoint.add(Te));const En=Qt===1?Ae:jt.unproject(ce.add(xe.mult(Bt(Rn))).mult(Kn));return jt.setLocationAtPoint(jt.renderWorldCopies?En.wrap():En,ke),jt._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(m),jt};if(u.preloadOnly){const jt=this._emulate(qt,u.duration,y);return this._preloadTiles(jt),this}return this._zooming=!0,this._rotating=Jt,this._pitching=_t,this._padding=At,this._prepareEase(m,!1),this._ease(qt(y),(()=>this._afterEase(m)),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,m)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,m,y){y.animate===!1||y.duration===0?(u(1),m()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,m){u=s.wrap(u,-180,180);const y=Math.abs(u-m);return Math.abs(u-360-m)<y&&(u-=360),Math.abs(u+360-m)<y&&(u+=360),u}_normalizeCenter(u){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const y=u.lng-m.center.lng;u.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(u){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(u&&u.essential)}_emulate(u,m,y){const S=Math.ceil(15*m/1e3),k=[],R=u(y.clone());for(let O=0;O<=S;O++){const U=R(O/S);k.push(U.clone())}return k}}class Sn{constructor(u={}){this.options=u,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const m=this.options&&this.options.compact;return this._map=u,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=C("button","mapboxgl-ctrl-attrib-button",this._container),C("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,m){const y=this._map._getUIString(`AttributionControl.${m}`);u.setAttribute("aria-label",y),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(u){const y=m.reduce(((S,k,R)=>(k.value&&(S+=`${k.key}=${k.value}${R<m.length-1?"&":""}`),S)),"?");u.href=`${s.config.FEEDBACK_URL}/${y}#${xc(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style._sourceCaches;for(const S in m){const k=m[S];if(k.used){const R=k.getSource();R.attribution&&u.indexOf(R.attribution)<0&&u.push(R.attribution)}}u.sort(((S,k)=>S.length-k.length)),u=u.filter(((S,k)=>{for(let R=k+1;R<u.length;R++)if(u[R].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Fm{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=C("div","mapboxgl-ctrl");const m=C("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const m in u){const y=u[m].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const m=u[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class zm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const m=++this._id;return this._queue.push({callback:u,id:m,cancelled:!1}),m}remove(u){const m=this._currentlyRunning,y=m?this._queue.concat(m):this._queue;for(const S of y)if(S.id===u)return void(S.cancelled=!0)}run(u=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const y of m)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Du(_,u,m){if(_=new s.LngLat(_.lng,_.lat),u){const y=new s.LngLat(_.lng-360,_.lat),S=new s.LngLat(_.lng+360,_.lat),k=360*Math.ceil(Math.abs(_.lng-m.center.lng)/360),R=m.locationPoint(_).distSqr(u),O=u.x<0||u.y<0||u.x>m.width||u.y>m.height;m.locationPoint(y).distSqr(u)<R&&(O||Math.abs(y.lng-m.center.lng)<k)?_=y:m.locationPoint(S).distSqr(u)<R&&(O||Math.abs(S.lng-m.center.lng)<k)&&(_=S)}for(;Math.abs(_.lng-m.center.lng)>180;){const y=m.locationPoint(_);if(y.x>=0&&y.y>=0&&y.x<=m.width&&y.y<=m.height)break;_.lng>m.center.lng?_.lng-=360:_.lng+=360}return _}const Jc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class bn extends s.Evented{constructor(u,m){if(super(),(u instanceof s.window.HTMLElement||m)&&(u=s.extend({element:u},m)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=s.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=C("div");const S=41,k=27,R=I("svg",{display:"block",height:S*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${S}`},this._element),O=I("radialGradient",{id:"shadowGradient"},I("defs",{},R));I("stop",{offset:"10%","stop-opacity":.4},O),I("stop",{offset:"100%","stop-opacity":.05},O),I("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},R),I("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},R),I("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},R),I("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},R),this._offset=s.Point.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(S=>{S.preventDefault()})),this._element.addEventListener("mousedown",(S=>{S.preventDefault()}));const y=this._element.classList;for(const S in Jc)y.remove(`mapboxgl-marker-anchor-${S}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=s.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const m=u.code,y=u.charCode||u.keyCode;m!=="Space"&&m!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(u){const m=u.originalEvent.target,y=this._element;this._popup&&(m===y||y.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,m=this._pos;if(!u||!m)return!1;const y=u.unproject(m),S=u.getFreeCameraOptions();if(!S.position)return!1;const k=S.position.toLngLat();return k.distanceTo(y)<.9*k.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const m=this._pos;if(!m||m.x<0||m.x>u.transform.width||m.y<0||m.y>u.transform.height)return void this._clearFadeTimer();const y=u.unproject(m);let S;u._showingGlobe()&&s.isLngLatBehindGlobe(u.transform,this._lngLat)?S=0:(S=1-u._queryFogOpacity(y),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${Jc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const u=this._pos,m=this._map,y=this.getPitchAlignment();if(!m||!u||y!=="map")return"";if(!m._showingGlobe()){const U=m.getPitch();return U?`rotateX(${U}deg)`:""}const S=s.radToDeg(s.globeTiltAtLngLat(m.transform,this._lngLat)),k=u.sub(s.globeCenterToScreenPoint(m.transform)),R=Math.abs(k.x)+Math.abs(k.y);if(R===0)return"";const O=S/R;return`rotateX(${-k.y*O}deg) rotateY(${k.x*O}deg)`}_calculateZTransform(){const u=this._pos,m=this._map;if(!m||!u)return"";let y=0;const S=this.getRotationAlignment();if(S==="map")if(m._showingGlobe()){const k=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),R=m.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(k);y=s.radToDeg(Math.atan2(R.y,R.x))-90}else y=-m.getBearing();else if(S==="horizon"){const k=s.smoothstep(4,6,m.getZoom()),R=s.globeCenterToScreenPoint(m.transform);R.y+=k*m.transform.height;const O=u.sub(R),U=s.radToDeg(Math.atan2(O.y,O.x));y=(U>90?U-270:U+90)*(1-k)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(u){s.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Du(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),u===!0?this._updateFrameId=s.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),m._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(u){return this._offset=s.Point.convert(u),this._update(),this}_onMove(u){const m=this._map;if(!m)return;const y=this._pointerdownPos,S=this._positionDelta;if(y&&S){if(!this._isDragging){const k=this._clickTolerance||m._clickTolerance;if(u.point.dist(y)<k)return;this._isDragging=!0}this._pos=u.point.sub(S),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(u){const m=this._map,y=this._pos;m&&y&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(y),this._pointerdownPos=u.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const m=this._map;return m&&(u?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Nm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},U_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $m(_=new s.Point(0,0),u="bottom"){if(typeof _=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(u){case"top":return new s.Point(0,_);case"top-left":return new s.Point(m,m);case"top-right":return new s.Point(-m,m);case"bottom":return new s.Point(0,-_);case"bottom-left":return new s.Point(m,-m);case"bottom-right":return new s.Point(-m,-m);case"left":return new s.Point(_,0);case"right":return new s.Point(-_,0)}return new s.Point(0,0)}return _ instanceof s.Point||Array.isArray(_)?s.Point.convert(_):s.Point.convert(_[u]||[0,0])}class Lu{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const m=s.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,m,y){this._start=this.getValue(m),this._end=u,this._startTime=m,this._endTime=m+y}}const Vd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},zg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},j_={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bd{constructor(u,m,y=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new tf({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,y&&(this.mousePitch=new Rm({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(u,m){this.mouseRotate.mousedown(u,m),this.mousePitch&&this.mousePitch.mousedown(u,m),V()}move(u,m){const y=this.map,S=this.mouseRotate.mousemoveWindow(u,m),k=S&&S.bearingDelta;if(k&&y.setBearing(y.getBearing()+k),this.mousePitch){const R=this.mousePitch.mousemoveWindow(u,m),O=R&&R.pitchDelta;O&&y.setPitch(y.getPitch()+O)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){H(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(s.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),ie(this.element,u)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,ie(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=X(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const ve={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},z={maxWidth:100,unit:"metric"},se={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Me={version:s.version,supported:v,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends il{constructor(_){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(_=s.extend({},zg,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(_.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Pu(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._useWebGL2=_.useWebGL2,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new zm,this._domRenderTaskQueue=new zm,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Vd,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Lu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=s.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new wl(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new Id(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,s.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new Sn({customAttribution:_.customAttribution})),this._logoControl=new Fm,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))})),this.on("dataloading",(u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}))}_getMapId(){return this._mapId}addControl(_,u){if(u===void 0&&(u=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=_.onAdd(this);this._controls.push(_);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(m,y.firstChild):y.appendChild(m),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(_);return u>-1&&this._controls.splice(u,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new s.Event("movestart",_)).fire(new s.Event("move",_)),this.fire(new s.Event("resize",_)),u&&this.fire(new s.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(s.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?s.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map((u=>u==="auto"?s.window.navigator.language:u)):_}setLanguage(_){const u=this._parseLanguage(_);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,u=_.projection.name;let m;u==="globe"&&_.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),m=!0):u==="mercator"&&_.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,u){return this._updateProjection(_||u||{name:"mercator"})}_updateProjection(_){let u;if(u=_.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(s.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(s.Point.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,u,m){if(_==="mouseenter"||_==="mouseover"){let y=!1;const S=R=>{const O=u.filter((Y=>this.getLayer(Y))),U=O.length?this.queryRenderedFeatures(R.point,{layers:O}):[];U.length?y||(y=!0,m.call(this,new As(_,this,R.originalEvent,{features:U}))):y=!1},k=()=>{y=!1};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:k}}}if(_==="mouseleave"||_==="mouseout"){let y=!1;const S=R=>{const O=u.filter((U=>this.getLayer(U)));(O.length?this.queryRenderedFeatures(R.point,{layers:O}):[]).length?y=!0:y&&(y=!1,m.call(this,new As(_,this,R.originalEvent)))},k=R=>{y&&(y=!1,m.call(this,new As(_,this,R.originalEvent)))};return{layers:new Set(u),listener:m,delegates:{mousemove:S,mouseout:k}}}{const y=S=>{const k=u.filter((O=>this.getLayer(O))),R=k.length?this.queryRenderedFeatures(S.point,{layers:k}):[];R.length&&(S.features=R,m.call(this,S),delete S.features)};return{layers:new Set(u),listener:m,delegates:{[_]:y}}}}on(_,u,m){if(m===void 0)return super.on(_,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(_,u,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(_,u,m){if(m===void 0)return super.once(_,u);Array.isArray(u)||(u=[u]);const y=this._createDelegatedListener(_,u,m);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(_,u,m){if(m===void 0)return super.off(_,u);u=new Set(Array.isArray(u)?u:[u]);const y=(k,R)=>{if(k.size!==R.size)return!1;for(const O of k)if(!R.has(O))return!1;return!0},S=this._delegatedListeners?this._delegatedListeners[_]:void 0;return S&&(k=>{for(let R=0;R<k.length;R++){const O=k[R];if(O.listener===m&&y(O.layers,u)){for(const U in O.delegates)this.off(U,O.delegates[U]);return k.splice(R,1),this}}})(S),this}queryRenderedFeatures(_,u){return this.style?(u!==void 0||_===void 0||_ instanceof s.Point||Array.isArray(_)||(u=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(_,u){return this.style.querySourceFeatures(_,u)}isPointOnSurface(_){const{name:u}=this.transform.projection;return u!=="globe"&&u!=="mercator"&&s.warnOnce(`${u} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(_))}setStyle(_,u){return(u=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(_,u))}_getUIString(_){const u=this._locale[_];if(u==null)throw new Error(`Missing UI string '${_}'`);return u}_updateStyle(_,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new Do(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Do(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,u){if(typeof _=="string"){const m=this._requestManager.normalizeStyleURL(_),y=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(y,((S,k)=>{S?this.fire(new s.ErrorEvent(S)):k&&this._updateDiff(k,u)}))}else typeof _=="object"&&this._updateDiff(_,u)}_updateDiff(_,u){try{this.style.setState(_)&&this._update(!0)}catch(m){s.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(_,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(_,u){return this._lazyInitEmptyStyle(),this.style.addSource(_,u),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const u in _){const m=_[u]._tiles;for(const y in m){const S=m[y];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(_,u,m){this._lazyInitEmptyStyle(),this.style.addSourceType(_,u,m)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,u,{pixelRatio:m=1,sdf:y=!1,stretchX:S,stretchY:k,content:R}={}){if(this._lazyInitEmptyStyle(),u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap){const{width:O,height:U,data:Y}=s.exported.getImageData(u);this.style.addImage(_,{data:new s.RGBAImage({width:O,height:U},Y),pixelRatio:m,stretchX:S,stretchY:k,content:R,sdf:y,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:U}=u,Y=u;this.style.addImage(_,{data:new s.RGBAImage({width:O,height:U},new Uint8Array(Y.data)),pixelRatio:m,stretchX:S,stretchY:k,content:R,sdf:y,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,_)}}updateImage(_,u){const m=this.style.getImage(_);if(!m)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap?s.exported.getImageData(u):u,{width:S,height:k}=y;S!==void 0&&k!==void 0?S===m.data.width&&k===m.data.height?(m.data.replace(y.data,!(u instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&u instanceof s.window.ImageBitmap)),this.style.updateImage(_,m)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${S}, ${k})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,u){s.getImage(this._requestManager.transformRequest(_,s.ResourceType.Image),((m,y)=>{u(m,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)}))}listImages(){return this.style.listImages()}addLayer(_,u){return this._lazyInitEmptyStyle(),this.style.addLayer(_,u),this._update(!0)}moveLayer(_,u){return this.style.moveLayer(_,u),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,u,m){return this.style.setLayerZoomRange(_,u,m),this._update(!0)}setFilter(_,u,m={}){return this.style.setFilter(_,u,m),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,u,m,y={}){return this.style.setPaintProperty(_,u,m,y),this._update(!0)}getPaintProperty(_,u){return this.style.getPaintProperty(_,u)}setLayoutProperty(_,u,m,y={}){return this.style.setLayoutProperty(_,u,m,y),this._update(!0)}getLayoutProperty(_,u){return this.style.getLayoutProperty(_,u)}setLight(_,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(_),this.transform):0}setFeatureState(_,u){return this.style.setFeatureState(_,u),this._update()}removeFeatureState(_,u){return this.style.removeFeatureState(_,u),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let m,y,S,k=this._container;for(;k&&(!y||!S);){const R=s.window.getComputedStyle(k).transform;R&&R!=="none"&&(m=R.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(y=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(S=m[3])),k=k.parentElement}this._containerWidth=y?Math.abs(_/y):_,this._containerHeight=S?Math.abs(u/S):u}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=C("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=C("div","mapboxgl-canvas-container",_);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=C("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=C("div","mapboxgl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{y[S]=C("div",`mapboxgl-ctrl-${S}`,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,u){const m=s.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(_),this._canvas.height=m*Math.ceil(u),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${u}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const u=this._markers.indexOf(_);u!==-1&&this._markers.splice(u,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const u=this._popups.indexOf(_);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const _=s.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",_),m=u||this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);m?(this._useWebGL2&&!u&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(m,!0),this.painter=new Iu(m,this.transform,!!u),this.on("data",(y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),s.exported$1.testSupport(m)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let u;const m=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(u=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,U=this.transform.pitch,Y=s.exported.now(),J=new s.EvaluationParameters(O,{now:Y,fadeDuration:S,pitch:U,transition:this.style.getTransition()});this.style.update(J)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const O=s.exported.now()-y;m.endQueryEXT(m.TIME_ELAPSED_EXT,u),setTimeout((()=>{const U=m.getQueryObjectEXT(u,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(u),this.fire(new s.Event("gpu-timing-frame",{cpuTime:O,gpuTime:U})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:U}})}),50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout((()=>{const U=this.painter.queryGpuTimers(O);this.fire(new s.Event("gpu-timing-layer",{layerTimes:U}))}),50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const U=this.painter.queryGpuTimeDeferredRender(O);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:U}))}),50)}const R=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(R||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(k=this._updateAverageElevation(y,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const U=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:U})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const u of this._markers)_&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!_||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(_,u=!1){const m=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((u||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const y=this.transform.averageElevation;let S=this.transform.sampleAverageElevation(),k=!1;this.transform.elevation&&(k=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=_;const R=Math.abs(y-S);if(R>1){if(this._isInitialLoad||k)return this._averageElevation.jumpTo(S),m(S);this._averageElevation.easeTo(S,_,300)}else if(R>1e-4)return this._averageElevation.jumpTo(S),m(S)}return!!this._averageElevation.isEasing(_)&&m(this._averageElevation.getValue(_))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(_=>{if(_&&(_.message===s.AUTH_ERR_MSG||_.status===401)){const u=this.painter.context.gl;s.storeAuthState(u,!1),this._logoControl instanceof Fm&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const m=this.painter.context.gl,y=m.createFramebuffer();function S(k){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,k,0);const R=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,R),R}return m.bindFramebuffer(m.FRAMEBUFFER,y),this._canvasPixelComparison(S(_),u.canvasCopies.map(S),u.timeStamps)}_canvasPixelComparison(_,u,m){let y=m[1]-m[0];const S=_.length/4;for(let k=0;k<u.length;k++){const R=u[k];let O=0;for(let U=0;U<R.length;U+=4)R[U]===_[U]&&R[U+1]===_[U+1]&&R[U+2]===_[U+2]&&R[U+3]===_[U+3]&&(O+=1);y+=(m[k+2]-m[k+1])*(1-O/S)}return y}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=s.exported.frame((u=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(u)})))}_preloadTiles(_){const u=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(u,((m,y)=>m._preloadTiles(_,y)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,u){s.setCacheLimits(_,u)}get version(){return s.version}},NavigationControl:class{constructor(_){this.options=s.extend({},j_,_),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(u=>{this._map&&this._map.zoomIn({},{originalEvent:u})})),C("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(u=>{this._map&&this._map.zoomOut({},{originalEvent:u})})),C("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(u=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:u}):m.resetNorth({},{originalEvent:u}))})),this._compassIcon=C("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const u=_.getZoom(),m=u===_.getMaxZoom(),y=u===_.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=u)}))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bd(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,u){const m=C("button",_,this._container);return m.type="button",m.addEventListener("click",u),m}_setButtonTitle(_,u){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${u}`);_.setAttribute("aria-label",m),_.firstElementChild&&_.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends s.Evented{constructor(_){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},ve,_),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Mu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const u=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,_(m)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then((m=>u(m.state!=="denied"))).catch((()=>u())):u()}_isOutOfMapMaxBounds(_){const u=this._map.getMaxBounds(),m=_.coords;return!!u&&(m.longitude<u.getWest()||m.longitude>u.getEast()||m.latitude<u.getSouth()||m.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",_)),this._finish()}}_updateCamera(_){const u=new s.LngLat(_.coords.longitude,_.coords.latitude),m=_.coords.accuracy,y=this._map.getBearing(),S=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(m),S,{geolocateSource:!0})}_updateMarker(_){if(_){const u=new s.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,u=s.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,m=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=C("button","mapboxgl-ctrl-geolocate",this._container),C("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C("div","mapboxgl-user-location"),this._dotElement.appendChild(C("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(C("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new bn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=C("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))}))}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((u=>{u==="granted"&&_()})).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Sn,ScaleControl:class{constructor(_){this.options=s.extend({},z,_),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,u=this._map,m=u._containerHeight/2,y=u._containerWidth/2-_/2,S=u.unproject([y,m]),k=u.unproject([y+_,m]),R=S.distanceTo(k);if(this.options.unit==="imperial"){const O=3.2808*R;O>5280?this._setScale(_,O/5280,"mile"):this._setScale(_,O,"foot")}else this.options.unit==="nautical"?this._setScale(_,R/1852,"nautical-mile"):R>=1e3?this._setScale(_,R/1e3,"kilometer"):this._setScale(_,R,"meter")}_setScale(_,u,m){this._map._requestDomTask((()=>{const y=(function(k){const R=Math.pow(10,`${Math.floor(k)}`.length-1);let O=k/R;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(U){const Y=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*Y)/Y})(O),R*O})(u),S=y/u;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(y):`${y}&nbsp;${se[m]}`,this._container.style.width=_*S+"px"}))}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=C("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof s.window.HTMLElement?this._container=_.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=C("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=C("button","mapboxgl-ctrl-fullscreen",this._controlContainer);C("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(_){super(),this.options=s.extend(Object.create(Nm),_),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=s.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(s.window.document.createTextNode(_))}setHTML(_){const u=s.window.document.createDocumentFragment(),m=s.window.document.createElement("body");let y;for(m.innerHTML=_;y=m.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=C("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(_),this.options.closeButton){const m=this._closeButton=C("button","mapboxgl-popup-close-button",u);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let u;return this._classList.delete(_)?u=!1:(this._classList.add(_),u=!0),this._updateClassList(),u}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const u=this._map,m=this._container,y=this._pos;if(!u||!m||!y)return"bottom";const S=m.offsetWidth,k=m.offsetHeight,R=y.x<S/2,O=y.x>u.transform.width-S/2;if(y.y+_<k)return R?"top-left":O?"top-right":"top";if(y.y>u.transform.height-k){if(R)return"bottom-left";if(O)return"bottom-right"}return R?"left":O?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),_.className=u.join(" ")}_update(_){const u=this._map,m=this._content;if(!u||!this._lngLat&&!this._trackPointer||!m)return;let y=this._container;if(y||(y=this._container=C("div","mapboxgl-popup",u.getContainer()),this._tip=C("div","mapboxgl-popup-tip",y),y.appendChild(m)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Du(this._lngLat,this._pos,u.transform)),!this._trackPointer||_){const S=this._pos=this._trackPointer&&_?_:u.project(this._lngLat),k=$m(this.options.offset),R=this._anchor=this._getAnchor(k.y),O=$m(this.options.offset,R),U=S.add(O).round();u._requestDomTask((()=>{this._container&&R&&(this._container.style.transform=`${Jc[R]} translate(${U.x}px,${U.y}px)`)}))}if(!this._marker&&u._showingGlobe()){const S=s.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(U_);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:bn,Style:Do,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:xl,Evented:s.Evented,config:s.config,prewarm:function(){Gr().acquire(Ho)},clearPrewarmedResources:function(){const _=Vr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ho),Vr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(_){s.config.ACCESS_TOKEN=_},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(_){s.config.API_URL=_},get workerCount(){return ss.workerCount},set workerCount(_){ss.workerCount=_},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){s.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){s.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Me}));var h=a;return h}))})(z1)),z1.exports}var Ene=Sne();const y0=s6(Ene);function ua(e,t){let n;function i(){n=jv(),n.run(()=>t.length?t(()=>{n==null||n.stop(),i()}):t())}Zt(e,r=>{r&&!n?i():r||(n==null||n.stop(),n=void 0)},{immediate:!0}),lo(()=>{n==null||n.stop()})}function RN(e,t){t=Array.isArray(t)?t.slice(0,-1).map(n=>`'${n}'`).join(", ")+` or '${t.at(-1)}'`:`'${t}'`}const Zi=typeof window<"u",wP=Zi&&"IntersectionObserver"in window,Cne=Zi&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),K5=Zi&&"EyeDropper"in window,TP=Zi&&"matchMedia"in window&&typeof window.matchMedia=="function",ud=()=>TP&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function X5(e,t,n){kne(e,t),t.set(e,n)}function kne(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Y5(e,t,n){return e.set(ON(e,t),n),n}function Yd(e,t){return e.get(ON(e,t))}function ON(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function VN(e,t,n){const i=t.length-1;if(i<0)return e===void 0?n:e;for(let r=0;r<i;r++){if(e==null)return n;e=e[t[r]]}return e==null||e[t[i]]===void 0?n:e[t[i]]}function Xp(e,t,n){return e==null||!t||typeof t!="string"?n:e[t]!==void 0?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),VN(e,t.split("."),n))}function Rs(e,t,n){if(t===!0)return e===void 0?n:e;if(t==null||typeof t=="boolean")return n;if(e!==Object(e)){if(typeof t!="function")return n;const r=t(e,n);return typeof r>"u"?n:r}if(typeof t=="string")return Xp(e,t,n);if(Array.isArray(t))return VN(e,t,n);if(typeof t!="function")return n;const i=t(e,n);return typeof i>"u"?n:i}function sc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(n,i)=>t+i)}function vn(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(e==null||e==="")return;const n=Number(e);return isNaN(n)?String(e):isFinite(n)?`${n}${t}`:void 0}function K0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Gk(e){let t;return e!==null&&typeof e=="object"&&((t=Object.getPrototypeOf(e))===Object.prototype||t===null)}function SP(e){if(e&&"$el"in e){const t=e.$el;return(t==null?void 0:t.nodeType)===Node.TEXT_NODE?t.nextElementSibling:t}return e}const qk=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function BN(e){return Object.keys(e)}function wp(e,t){return t.every(n=>e.hasOwnProperty(n))}function Bl(e,t){const n={};for(const i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function Kk(e,t,n){const i=Object.create(null),r=Object.create(null);for(const a in e)t.some(l=>l instanceof RegExp?l.test(a):l===a)?i[a]=e[a]:r[a]=e[a];return[i,r]}function mr(e,t){const n={...e};return t.forEach(i=>delete n[i]),n}const FN=/^on[^a-z]/,EP=e=>FN.test(e),Ine=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],Ane=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function Pne(e){return e.isComposing&&Ane.includes(e.key)}function gm(e){const[t,n]=Kk(e,[FN]),i=mr(t,Ine),[r,a]=Kk(n,["class","style","id",/^data-/]);return Object.assign(r,t),Object.assign(a,i),[r,a]}function Yr(e){return e==null?[]:Array.isArray(e)?e:[e]}function zN(e,t){let n=0;const i=function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];clearTimeout(n),n=setTimeout(()=>e(...a),Ti(t))};return i.clear=()=>{clearTimeout(n)},i.immediate=e,i}function kr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(t,Math.min(n,e))}function Z5(e){const t=e.toString().trim();return t.includes(".")?t.length-t.indexOf(".")-1:0}function J5(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+n.repeat(Math.max(0,t-e.length))}function Q5(e,t){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,t-e.length))+e}function Mne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function e4(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(e<t)return`${e} B`;const n=t===1024?["Ki","Mi","Gi"]:["k","M","G"];let i=-1;for(;Math.abs(e)>=t&&i<n.length-1;)e/=t,++i;return`${e.toFixed(1)} ${n[i]}B`}function Na(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i={};for(const r in e)i[r]=e[r];for(const r in t){const a=e[r],l=t[r];if(Gk(a)&&Gk(l)){i[r]=Na(a,l,n);continue}if(n&&Array.isArray(a)&&Array.isArray(l)){i[r]=n(a,l);continue}i[r]=l}return i}function NN(e){return e.map(t=>t.type===ln?NN(t.children):t).flat()}function Op(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Op.cache.has(e))return Op.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Op.cache.set(e,t),t}Op.cache=new Map;function Ev(e,t){if(!t||typeof t!="object")return[];if(Array.isArray(t))return t.map(n=>Ev(e,n)).flat(1);if(t.suspense)return Ev(e,t.ssContent);if(Array.isArray(t.children))return t.children.map(n=>Ev(e,n)).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return Ev(e,t.component.subTree).flat(1)}return[]}var uv=new WeakMap,ap=new WeakMap;class $N{constructor(t){X5(this,uv,[]),X5(this,ap,0),this.size=t}get isFull(){return Yd(uv,this).length===this.size}push(t){Yd(uv,this)[Yd(ap,this)]=t,Y5(ap,this,(Yd(ap,this)+1)%this.size)}values(){return Yd(uv,this).slice(Yd(ap,this)).concat(Yd(uv,this).slice(0,Yd(ap,this)))}clear(){Yd(uv,this).length=0,Y5(ap,this,0)}}function Dne(e){return"touches"in e?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}function CP(e){const t=oo({});Wr(()=>{const i=e();for(const r in i)t[r]=i[r]},{flush:"sync"});const n={};for(const i in t)n[i]=He(()=>t[i]);return n}function jw(e,t){return e.includes(t)}function UN(e){return e[2].toLowerCase()+e.slice(3)}const No=()=>[Function,Array];function t4(e,t){return t="on"+md(t),!!(e[t]||e[`${t}Once`]||e[`${t}Capture`]||e[`${t}OnceCapture`]||e[`${t}CaptureOnce`])}function Fb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(Array.isArray(e))for(const r of e)r(...n);else typeof e=="function"&&e(...n)}function o_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","details:not(:has(> summary))","details > summary","[tabindex]",'[contenteditable]:not([contenteditable="false"])',"audio[controls]","video[controls]"].map(r=>`${r}${t?':not([tabindex="-1"])':""}:not([disabled], [inert])`).join(", ");let i;try{i=[...e.querySelectorAll(n)]}catch{return[]}return i.filter(r=>!r.closest("[inert]")).filter(r=>!!r.offsetParent||r.getClientRects().length>0).filter(r=>{var a,l;return!((a=r.parentElement)!=null&&a.closest("details:not([open])"))||r.tagName==="SUMMARY"&&((l=r.parentElement)==null?void 0:l.tagName)==="DETAILS"})}function jN(e,t,n){let i,r=e.indexOf(document.activeElement);const a=t==="next"?1:-1;do r+=a,i=e[r];while((!i||i.offsetParent==null||!((n==null?void 0:n(i))??!0))&&r<e.length&&r>=0);return i}function Vp(e,t){var i,r,a,l;const n=o_(e);if(t==null)(e===document.activeElement||!e.contains(document.activeElement))&&((i=n[0])==null||i.focus());else if(t==="first")(r=n[0])==null||r.focus();else if(t==="last")(a=n.at(-1))==null||a.focus();else if(typeof t=="number")(l=n[t])==null||l.focus();else{const h=jN(n,t);h?h.focus():Vp(e,t==="next"?"first":"last")}}function Qx(e){return e==null||typeof e=="string"&&e.trim()===""}function WN(){}function a_(e,t){if(!(Zi&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${t})`)))return null;try{return!!e&&e.matches(t)}catch{return null}}function XT(e){return e.some(t=>Up(t)?t.type===Fo?!1:t.type!==ln||XT(t.children):!0)?e:null}function e1(e,t,n){return(e==null?void 0:e(t))??(n==null?void 0:n(t))}function Lne(e,t){if(!Zi||e===0)return t(),()=>{};const n=window.setTimeout(t,e);return()=>window.clearTimeout(n)}function Rne(e,t){const n=e.clientX,i=e.clientY,r=t.getBoundingClientRect(),a=r.left,l=r.top,h=r.right,s=r.bottom;return n>=a&&n<=h&&i>=l&&i<=s}function Ww(){const e=nn(),t=n=>{e.value=n};return Object.defineProperty(t,"value",{enumerable:!0,get:()=>e.value,set:n=>e.value=n}),Object.defineProperty(t,"el",{enumerable:!0,get:()=>SP(e.value)}),t}function l_(e){const t=e.key.length===1,n=!e.ctrlKey&&!e.metaKey&&!e.altKey;return t&&n}function om(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"}function Hw(e){return"\\^$*+?.()|{}[]".includes(e)?`\\${e}`:e}function One(e,t,n){const i=new RegExp(`[\\d\\-${Hw(n)}]`),r=e.split("").filter(l=>i.test(l)).filter((l,h,s)=>h===0&&/[-]/.test(l)||l===n&&h===s.indexOf(l)||/\d/.test(l)).join("");if(t===0)return r.split(n)[0];const a=new RegExp(`${Hw(n)}\\d`);if(t!==null&&a.test(r)){const l=r.split(n);return[l[0],l[1].substring(0,t)].join(n)}return r}function Vne(e){const t={};for(const n in e)t[cl(n)]=e[n];return t}function Bne(e){const t=["checked","disabled"];return Object.fromEntries(Object.entries(e).filter(n=>{let[i,r]=n;return t.includes(i)?!!r:r!==void 0}))}function n4(e){const t=n=>Array.isArray(n)?n.map(i=>t(i)):Bs(n)||Cp(n)||gT(n)?t(jn(n)):Gk(n)?Object.keys(n).reduce((i,r)=>(i[r]=t(n[r]),i),{}):n;return t(e)}const HN=["top","bottom"],Fne=["start","end","left","right"];function Xk(e,t){let[n,i]=e.split(" ");return i||(i=jw(HN,n)?"start":jw(Fne,n)?"top":"center"),{side:Yk(n,t),align:Yk(i,t)}}function Yk(e,t){return e==="start"?t?"right":"left":e==="end"?t?"left":"right":e}function _C(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function yC(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function i4(e){return{side:e.align,align:e.side}}function r4(e){return jw(HN,e.side)?"y":"x"}class Fc{constructor(t){const n=document.body.currentCSSZoom??1,i=t instanceof DOMRect?1+(1-n)/n:1,{x:r,y:a,width:l,height:h}=t;this.x=r*i,this.y=a*i,this.width=l*i,this.height=h*i}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function s4(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function GN(e){if(Array.isArray(e)){const t=document.body.currentCSSZoom??1,n=1+(1-t)/t;return new Fc({x:e[0]*n,y:e[1]*n,width:0*n,height:0*n})}else return new Fc(e.getBoundingClientRect())}function zne(e){if(e===document.documentElement)if(visualViewport){const t=document.body.currentCSSZoom??1;return new Fc({x:visualViewport.scale>1?0:visualViewport.offsetLeft,y:visualViewport.scale>1?0:visualViewport.offsetTop,width:visualViewport.width*visualViewport.scale/t,height:visualViewport.height*visualViewport.scale/t})}else return new Fc({x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});else{const t=e.getBoundingClientRect();return new Fc({x:t.x,y:t.y,width:e.clientWidth,height:e.clientHeight})}}function kP(e){const t=new Fc(e.getBoundingClientRect()),n=getComputedStyle(e),i=n.transform;if(i){let r,a,l,h,s;if(i.startsWith("matrix3d("))r=i.slice(9,-1).split(/, /),a=Number(r[0]),l=Number(r[5]),h=Number(r[12]),s=Number(r[13]);else if(i.startsWith("matrix("))r=i.slice(7,-1).split(/, /),a=Number(r[0]),l=Number(r[3]),h=Number(r[4]),s=Number(r[5]);else return new Fc(t);const p=n.transformOrigin,v=t.x-h-(1-a)*parseFloat(p),x=t.y-s-(1-l)*parseFloat(p.slice(p.indexOf(" ")+1)),T=a?t.width/a:e.offsetWidth+1,C=l?t.height/l:e.offsetHeight+1;return new Fc({x:v,y:x,width:T,height:C})}else return new Fc(t)}function sh(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(r=>{i.onfinish=()=>{r(i)}})),i}const N1=new WeakMap;function Nne(e,t){Object.keys(t).forEach(n=>{if(EP(n)){const i=UN(n),r=N1.get(e);if(t[n]==null)r==null||r.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))});else if(!r||![...r].some(a=>a[0]===i&&a[1]===t[n])){e.addEventListener(i,t[n]);const a=r||new Set;a.add([i,t[n]]),N1.has(e)||N1.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function $ne(e,t){Object.keys(t).forEach(n=>{if(EP(n)){const i=UN(n),r=N1.get(e);r==null||r.forEach(a=>{const[l,h]=a;l===i&&(e.removeEventListener(i,h),r.delete(a))})}else e.removeAttribute(n)})}const dv=2.4,o4=.2126729,a4=.7151522,l4=.072175,Une=.55,jne=.58,Wne=.57,Hne=.62,t1=.03,c4=1.45,Gne=5e-4,qne=1.25,Kne=1.25,u4=.078,d4=12.82051282051282,n1=.06,h4=.001;function f4(e,t){const n=(e.r/255)**dv,i=(e.g/255)**dv,r=(e.b/255)**dv,a=(t.r/255)**dv,l=(t.g/255)**dv,h=(t.b/255)**dv;let s=n*o4+i*a4+r*l4,p=a*o4+l*a4+h*l4;if(s<=t1&&(s+=(t1-s)**c4),p<=t1&&(p+=(t1-p)**c4),Math.abs(p-s)<Gne)return 0;let v;if(p>s){const x=(p**Une-s**jne)*qne;v=x<h4?0:x<u4?x-x*d4*n1:x-n1}else{const x=(p**Hne-s**Wne)*Kne;v=x>-h4?0:x>-u4?x-x*d4*n1:x+n1}return v*100}const Gw=.20689655172413793,Xne=e=>e>Gw**3?Math.cbrt(e):e/(3*Gw**2)+4/29,Yne=e=>e>Gw?e**3:3*Gw**2*(e-4/29);function qN(e){const t=Xne,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function KN(e){const t=Yne,n=(e[0]+16)/116;return[t(n+e[1]/500)*.95047,t(n),t(n-e[2]/200)*1.08883]}const Zne=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Jne=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Qne=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],eie=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function XN(e){const t=Array(3),n=Jne,i=Zne;for(let r=0;r<3;++r)t[r]=Math.round(kr(n(i[r][0]*e[0]+i[r][1]*e[1]+i[r][2]*e[2]))*255);return{r:t[0],g:t[1],b:t[2]}}function IP(e){let{r:t,g:n,b:i}=e;const r=[0,0,0],a=eie,l=Qne;t=a(t/255),n=a(n/255),i=a(i/255);for(let h=0;h<3;++h)r[h]=l[h][0]*t+l[h][1]*n+l[h][2]*i;return r}function Zk(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function tie(e){return Zk(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const m4=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,nie={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>p4({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>p4({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>dd({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>dd({h:e,s:t,v:n,a:i})};function oc(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&m4.test(e)){const{groups:t}=e.match(m4),{fn:n,values:i}=t,r=i.split(/,\s*|\s*\/\s*|\s+/).map((a,l)=>a.endsWith("%")||l>0&&l<3&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(a)/100:parseFloat(a));return nie[n](...r)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),QN(t)}else if(typeof e=="object"){if(wp(e,["r","g","b"]))return e;if(wp(e,["h","s","l"]))return dd(AP(e));if(wp(e,["h","s","v"]))return dd(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function dd(e){const{h:t,s:n,v:i,a:r}=e,a=h=>{const s=(h+t/60)%6;return i-i*n*Math.max(Math.min(s,4-s,1),0)},l=[a(5),a(3),a(1)].map(h=>Math.round(h*255));return{r:l[0],g:l[1],b:l[2],a:r}}function p4(e){return dd(AP(e))}function zb(e){if(!e)return{h:0,s:1,v:1,a:1};const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0;r!==a&&(r===t?l=60*(0+(n-i)/(r-a)):r===n?l=60*(2+(i-t)/(r-a)):r===i&&(l=60*(4+(t-n)/(r-a)))),l<0&&(l=l+360);const h=r===0?0:(r-a)/r,s=[l,h,r];return{h:s[0],s:s[1],v:s[2],a:e.a}}function Jk(e){const{h:t,s:n,v:i,a:r}=e,a=i-i*n/2,l=a===1||a===0?0:(i-a)/Math.min(a,1-a);return{h:t,s:l,l:a,a:r}}function AP(e){const{h:t,s:n,l:i,a:r}=e,a=i+n*Math.min(i,1-i),l=a===0?0:2-2*i/a;return{h:t,s:l,v:a,a:r}}function YN(e){let{r:t,g:n,b:i,a:r}=e;return r===void 0?`rgb(${t}, ${n}, ${i})`:`rgba(${t}, ${n}, ${i}, ${r})`}function ZN(e){return YN(dd(e))}function i1(e){const t=Math.round(e).toString(16);return("00".substr(0,2-t.length)+t).toUpperCase()}function JN(e){let{r:t,g:n,b:i,a:r}=e;return`#${[i1(t),i1(n),i1(i),r!==void 0?i1(Math.round(r*255)):""].join("")}`}function QN(e){e=rie(e);let[t,n,i,r]=Mne(e,2).map(a=>parseInt(a,16));return r=r===void 0?r:r/255,{r:t,g:n,b:i,a:r}}function iie(e){const t=QN(e);return zb(t)}function e2(e){return JN(dd(e))}function rie(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=J5(J5(e,6),8,"F")),e}function sie(e,t){const n=qN(IP(e));return n[0]=n[0]+t*10,XN(KN(n))}function oie(e,t){const n=qN(IP(e));return n[0]=n[0]-t*10,XN(KN(n))}function Qk(e){const t=oc(e);return IP(t)[1]}function aie(e,t){const n=Qk(e),i=Qk(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function t2(e){const t=Math.abs(f4(oc(0),oc(e)));return Math.abs(f4(oc(16777215),oc(e)))>Math.min(t,50)?"#fff":"#000"}function ut(e,t){return n=>Object.keys(e).reduce((i,r)=>{const l=typeof e[r]=="object"&&e[r]!=null&&!Array.isArray(e[r])?e[r]:{type:e[r]};return n&&r in n?i[r]={...l,default:n[r]}:i[r]=l,t&&!i[r].source&&(i[r].source=t),i},{})}const Tn=ut({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function Ss(e,t){const n=b_();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function pd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const t=Ss(e).type;return Op((t==null?void 0:t.aliasName)||(t==null?void 0:t.name))}function lie(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ss("injectSelf");const{provides:n}=t;if(n&&e in n)return n[e]}const c_=Symbol.for("vuetify:defaults");function cie(e){return it(e)}function PP(){const e=ki(c_);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function ns(e,t){const n=PP(),i=it(e),r=me(()=>{if(Ti(t==null?void 0:t.disabled))return n.value;const l=Ti(t==null?void 0:t.scoped),h=Ti(t==null?void 0:t.reset),s=Ti(t==null?void 0:t.root);if(i.value==null&&!(l||h||s))return n.value;let p=Na(i.value,{prev:n.value});if(l)return p;if(h||s){const v=Number(h||1/0);for(let x=0;x<=v&&!(!p||!("prev"in p));x++)p=p.prev;return p&&typeof s=="string"&&s in p&&(p=Na(Na(p,{prev:p}),p[s])),p}return p.prev?Na(p.prev,p):p});return Or(c_,r),r}function uie(e,t){return e.props&&(typeof e.props[t]<"u"||typeof e.props[Op(t)]<"u")}function die(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:PP();const i=Ss("useDefaults");if(t=t??i.type.name??i.type.__name,!t)throw new Error("[Vuetify] Could not determine component name");const r=me(()=>{var s;return(s=n.value)==null?void 0:s[e._as??t]}),a=new Proxy(e,{get(s,p){var C,I,P,D;const v=Reflect.get(s,p);if(p==="class"||p==="style")return[(C=r.value)==null?void 0:C[p],v].filter(F=>F!=null);if(uie(i.vnode,p))return v;const x=(I=r.value)==null?void 0:I[p];if(x!==void 0)return x;const T=(D=(P=n.value)==null?void 0:P.global)==null?void 0:D[p];return T!==void 0?T:v}}),l=nn();Wr(()=>{if(r.value){const s=Object.entries(r.value).filter(p=>{let[v]=p;return v.startsWith(v[0].toUpperCase())});l.value=s.length?Object.fromEntries(s):void 0}else l.value=void 0});function h(){const s=lie(c_,i);Or(c_,me(()=>l.value?Na((s==null?void 0:s.value)??{},l.value):s==null?void 0:s.value))}return{props:a,provideSubDefaults:h}}function hc(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=ut(e.props??{},e.name)();const t=Object.keys(e.props).filter(n=>n!=="class"&&n!=="style");e.filterProps=function(i){return Bl(i,t)},e.props._as=String,e.setup=function(i,r){const a=PP();if(!a.value)return e._setup(i,r);const{props:l,provideSubDefaults:h}=die(i,i._as??e.name,a),s=e._setup(l,r);return h(),s}}return e}function Lt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=>(e?hc:bB)(t)}function hie(e,t){return t.props=e,t}function Dh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return Lt()({name:n??md(cl(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t},...Tn()},setup(i,r){let{slots:a}=r;return()=>{var l;return Ih(i.tag,{class:[e,i.class],style:i.style},(l=a.default)==null?void 0:l.call(a))}}})}function fie(e,t,n,i){if(!n||om(e)||om(t))return;const r=n.get(e);if(r)r.set(t,i);else{const a=new WeakMap;a.set(t,i),n.set(e,a)}}function mie(e,t,n){var a,l;if(!n||om(e)||om(t))return null;const i=(a=n.get(e))==null?void 0:a.get(t);if(typeof i=="boolean")return i;const r=(l=n.get(t))==null?void 0:l.get(e);return typeof r=="boolean"?r:null}function xo(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new WeakMap;if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime()||e!==Object(e)||t!==Object(t))return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;const r=mie(e,t,n);return r||(fie(e,t,n,!0),i.every(a=>xo(e[a],t[a],n)))}function n2(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const X0="cubic-bezier(0.4, 0, 0.2, 1)",g4="cubic-bezier(0.0, 0, 0.2, 1)",v4="cubic-bezier(0.4, 0, 1, 1)",pie={linear:e=>e,easeInQuad:e=>e**2,easeOutQuad:e=>e*(2-e),easeInOutQuad:e=>e<.5?2*e**2:-1+(4-2*e)*e,easeInCubic:e=>e**3,easeOutCubic:e=>--e**3+1,easeInOutCubic:e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e**4,easeOutQuart:e=>1- --e**4,easeInOutQuart:e=>e<.5?8*e**4:1-8*--e**4,easeInQuint:e=>e**5,easeOutQuint:e=>1+--e**5,easeInOutQuint:e=>e<.5?16*e**5:1+16*--e**5,instant:e=>1};function _4(e,t,n){return Object.keys(e).filter(i=>EP(i)&&i.endsWith(t)).reduce((i,r)=>(i[r.slice(0,-t.length)]=a=>Fb(e[r],a,n(a)),i),{})}function YT(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?gie(e):MP(e))return e;e=e.parentElement}return document.scrollingElement}function qw(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(MP(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function MP(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e),n=t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight,i=t.overflowX==="scroll"||t.overflowX==="auto"&&e.scrollWidth>e.clientWidth;return n||i}function gie(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function vie(e){let{depth:t,isLast:n,isLastGroup:i,leafLinks:r,separateRoots:a,parentIndentLines:l,variant:h}=e;if(!l||!t)return{leaf:void 0,node:void 0,children:l};if(h==="simple")return{leaf:[...l,"line"],node:[...l,"line"],children:[...l,"line"]};const s=n&&(!i||a||t>1);return{leaf:[...l,s?"last-leaf":"leaf",...r?["leaf-link"]:[]],node:[...l,s?"last-leaf":"leaf"],children:[...l,s?"none":"line"]}}function _ie(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Ut(e){const t=Ss("useRender");t.render=e}function yie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{leading:!0,trailing:!0},i=0,r=0,a=!1,l=0;function h(){clearTimeout(i),a=!1,l=0}const s=function(){for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];clearTimeout(i);const T=Date.now();l||(l=T);const C=T-Math.max(l,r);function I(){r=Date.now(),i=window.setTimeout(h,t),e(...v)}a?C>=t?I():n.trailing&&(i=window.setTimeout(I,t-C)):(a=!0,n.leading&&I())};return s.clear=h,s.immediate=e,s}function Dn(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x=>x,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x=>x;const a=Ss("useProxiedModel"),l=it(e[t]!==void 0?e[t]:n),h=Op(t),p=me(h!==t?()=>{var x,T,C,I;return e[t],!!(((x=a.vnode.props)!=null&&x.hasOwnProperty(t)||(T=a.vnode.props)!=null&&T.hasOwnProperty(h))&&((C=a.vnode.props)!=null&&C.hasOwnProperty(`onUpdate:${t}`)||(I=a.vnode.props)!=null&&I.hasOwnProperty(`onUpdate:${h}`)))}:()=>{var x,T;return e[t],!!((x=a.vnode.props)!=null&&x.hasOwnProperty(t)&&((T=a.vnode.props)!=null&&T.hasOwnProperty(`onUpdate:${t}`)))});ua(()=>!p.value,()=>{Zt(()=>e[t],x=>{l.value=x})});const v=me({get(){const x=e[t];return i(p.value?x:l.value)},set(x){const T=r(x),C=jn(p.value?e[t]:l.value);C===T||i(C)===x||(l.value=T,a==null||a.emit(`update:${t}`,T))}});return Object.defineProperty(v,"externalValue",{get:()=>p.value?e[t]:l.value}),v}const bie={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"},ariaLabel:{previousMonth:"Previous month",nextMonth:"Next month",selectYear:"Select year",selectDate:"{0}",currentDate:"Today, {0}"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"},rules:{required:"This field is required",email:"Please enter a valid email",number:"This field can only contain numbers",integer:"This field can only contain integer values",capital:"This field can only contain uppercase letters",maxLength:"You must enter a maximum of {0} characters",minLength:"You must enter a minimum of {0} characters",strictLength:"The length of the entered field is invalid",exclude:"The {0} character is not allowed",notEmpty:"Please choose at least one value",pattern:"Invalid format"},hotkey:{then:"then",ctrl:"Ctrl",command:"Command",space:"Space",shift:"Shift",alt:"Alt",enter:"Enter",escape:"Escape",upArrow:"Up Arrow",downArrow:"Down Arrow",leftArrow:"Left Arrow",rightArrow:"Right Arrow",backspace:"Backspace",option:"Option",plus:"plus",shortcut:"Keyboard shortcut: {0}"},video:{play:"Play",pause:"Pause",seek:"Seek",volume:"Volume",showVolume:"Show volume control",mute:"Mute",unmute:"Unmute",enterFullscreen:"Full screen",exitFullscreen:"Exit full screen"},colorPicker:{ariaLabel:{eyedropper:"Select color with eyedropper",hueSlider:"Hue",alphaSlider:"Alpha",redInput:"Red value",greenInput:"Green value",blueInput:"Blue value",alphaInput:"Alpha value",hueInput:"Hue value",saturationInput:"Saturation value",lightnessInput:"Lightness value",hexInput:"HEX value",hexaInput:"HEX with alpha value",changeFormat:"Change color format"}}},y4="$vuetify.",b4=(e,t)=>e.replace(/\{(\d+)\}/g,(n,i)=>String(t[Number(i)])),i2=(e,t,n)=>function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];if(!i.startsWith(y4))return b4(i,a);const h=i.replace(y4,""),s=e.value&&n.value[e.value],p=t.value&&n.value[t.value];let v=Xp(s,h,null);return v||(`${i}${e.value}`,v=Xp(p,h,null)),v||(v=i),typeof v!="string"&&(v=i),b4(v,a)};function DP(e,t){return(n,i)=>new Intl.NumberFormat([e.value,t.value],i).format(n)}function r2(e,t){return DP(e,t)(.1).includes(",")?",":"."}function bC(e,t,n){const i=Dn(e,t,e[t]??n.value);return i.value=e[t]??n.value,Zt(n,r=>{e[t]==null&&(i.value=n.value)}),i}function s2(e){return t=>{const n=bC(t,"locale",e.current),i=bC(t,"fallback",e.fallback),r=bC(t,"messages",e.messages);return{name:"vuetify",current:n,fallback:i,messages:r,decimalSeparator:He(()=>r2(n,i)),t:i2(n,i,r),n:DP(n,i),provide:s2({current:n,fallback:i,messages:r})}}}function xie(e){const t=nn((e==null?void 0:e.locale)??"en"),n=nn((e==null?void 0:e.fallback)??"en"),i=it({en:bie,...e==null?void 0:e.messages});return{name:"vuetify",current:t,fallback:n,messages:i,decimalSeparator:He(()=>(e==null?void 0:e.decimalSeparator)??r2(t,n)),t:i2(t,n,i),n:DP(t,n),provide:s2({current:t,fallback:n,messages:i})}}const u_=Symbol.for("vuetify:locale");function wie(e){return e.name!=null}function Tie(e){const t=e!=null&&e.adapter&&wie(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:xie(e),n=Cie(t,e);return{...t,...n}}function pr(){const e=ki(u_);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function Sie(e){const t=ki(u_);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");const n=t.provide(e),i=kie(n,t.rtl,e),r={...n,...i};return Or(u_,r),r}function Eie(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function Cie(e,t){const n=it((t==null?void 0:t.rtl)??Eie()),i=me(()=>n.value[e.current.value]??!1);return{isRtl:i,rtl:n,rtlClasses:He(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function kie(e,t,n){const i=me(()=>n.rtl??t.value[e.current.value]??!1);return{isRtl:i,rtl:t,rtlClasses:He(()=>`v-locale--is-${i.value?"rtl":"ltr"}`)}}function Ks(){const e=ki(u_);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function Nb(e){const t=e.slice(-2).toUpperCase();switch(!0){case e==="GB-alt-variant":return{firstDay:0,firstWeekSize:4};case e==="001":return{firstDay:1,firstWeekSize:1};case`AG AS BD BR BS BT BW BZ CA CO DM DO ET GT GU HK HN ID IL IN JM JP KE
    KH KR LA MH MM MO MT MX MZ NI NP PA PE PH PK PR PY SA SG SV TH TT TW UM US
    VE VI WS YE ZA ZW`.includes(t):return{firstDay:0,firstWeekSize:1};case`AI AL AM AR AU AZ BA BM BN BY CL CM CN CR CY EC GE HR KG KZ LB LK LV
    MD ME MK MN MY NZ RO RS SI TJ TM TR UA UY UZ VN XK`.includes(t):return{firstDay:1,firstWeekSize:1};case`AD AN AT AX BE BG CH CZ DE DK EE ES FI FJ FO FR GB GF GP GR HU IE IS
    IT LI LT LU MC MQ NL NO PL RE RU SE SK SM VA`.includes(t):return{firstDay:1,firstWeekSize:4};case"AE AF BH DJ DZ EG IQ IR JO KW LY OM QA SD SY".includes(t):return{firstDay:6,firstWeekSize:1};case t==="MV":return{firstDay:5,firstWeekSize:1};case t==="PT":return{firstDay:0,firstWeekSize:4};default:return null}}function Iie(e,t,n){var v;const i=[];let r=[];const a=o2(e),l=a2(e),h=n??((v=Nb(t))==null?void 0:v.firstDay)??0,s=(a.getDay()-h+7)%7,p=(l.getDay()-h+7)%7;for(let x=0;x<s;x++){const T=new Date(a);T.setDate(T.getDate()-(s-x)),r.push(T)}for(let x=1;x<=l.getDate();x++){const T=new Date(e.getFullYear(),e.getMonth(),x);r.push(T),r.length===7&&(i.push(r),r=[])}for(let x=1;x<7-p;x++){const T=new Date(l);T.setDate(T.getDate()+x),r.push(T)}return r.length>0&&i.push(r),i}function Kw(e,t,n){var a;let i=(n??((a=Nb(t))==null?void 0:a.firstDay)??0)%7;[0,1,2,3,4,5,6].includes(i)||(i=0);const r=new Date(e);for(;r.getDay()!==i;)r.setDate(r.getDate()-1);return r}function Aie(e,t){var r;const n=new Date(e),i=((((r=Nb(t))==null?void 0:r.firstDay)??0)+6)%7;for(;n.getDay()!==i;)n.setDate(n.getDate()+1);return n}function o2(e){return new Date(e.getFullYear(),e.getMonth(),1)}function a2(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function Pie(e){const t=e.split("-").map(Number);return new Date(t[0],t[1]-1,t[2])}const Mie=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function l2(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){let t;if(Mie.test(e))return Pie(e);if(t=Date.parse(e),!isNaN(t))return new Date(t)}return null}const x4=new Date(2e3,0,2);function Die(e,t,n){var r;const i=t??((r=Nb(e))==null?void 0:r.firstDay)??0;return sc(7).map(a=>{const l=new Date(x4);return l.setDate(x4.getDate()+i+a),new Intl.DateTimeFormat(e,{weekday:n??"narrow"}).format(l)})}function Lie(e,t,n,i){const r=l2(e)??new Date,a=i==null?void 0:i[t];if(typeof a=="function")return a(r,t,n);let l={};switch(t){case"fullDate":l={year:"numeric",month:"short",day:"numeric"};break;case"fullDateWithWeekday":l={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const h=r.getDate(),s=new Intl.DateTimeFormat(n,{month:"long"}).format(r);return`${h} ${s}`;case"normalDateWithWeekday":l={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":l={month:"short",day:"numeric"};break;case"year":l={year:"numeric"};break;case"month":l={month:"long"};break;case"monthShort":l={month:"short"};break;case"monthAndYear":l={month:"long",year:"numeric"};break;case"monthAndDate":l={month:"long",day:"numeric"};break;case"weekday":l={weekday:"long"};break;case"weekdayShort":l={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(n).format(r.getDate());case"hours12h":l={hour:"numeric",hour12:!0};break;case"hours24h":l={hour:"numeric",hour12:!1};break;case"minutes":l={minute:"numeric"};break;case"seconds":l={second:"numeric"};break;case"fullTime":l={hour:"numeric",minute:"numeric"};break;case"fullTime12h":l={hour:"numeric",minute:"numeric",hour12:!0};break;case"fullTime24h":l={hour:"numeric",minute:"numeric",hour12:!1};break;case"fullDateTime":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};break;case"fullDateTime12h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};break;case"fullDateTime24h":l={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};break;case"keyboardDate":l={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime12h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");case"keyboardDateTime24h":return l={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},new Intl.DateTimeFormat(n,l).format(r).replace(/, /g," ");default:l=a??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,l).format(r)}function Rie(e,t){const n=e.toJsDate(t),i=n.getFullYear(),r=Q5(String(n.getMonth()+1),2,"0"),a=Q5(String(n.getDate()),2,"0");return`${i}-${r}-${a}`}function Oie(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function Vie(e,t){const n=new Date(e);return n.setMinutes(n.getMinutes()+t),n}function Bie(e,t){const n=new Date(e);return n.setHours(n.getHours()+t),n}function Bp(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}function Fie(e,t){const n=new Date(e);return n.setDate(n.getDate()+t*7),n}function zie(e,t){const n=new Date(e);return n.setDate(1),n.setMonth(n.getMonth()+t),n}function Y0(e){return e.getFullYear()}function Nie(e){return e.getMonth()}function $ie(e,t,n,i){const r=Nb(t),a=n??(r==null?void 0:r.firstDay)??0,l=(r==null?void 0:r.firstWeekSize)??1;return i!==void 0?Uie(e,t,a,i):jie(e,t,a,l)}function Uie(e,t,n,i){const r=(7+i-n)%7,a=Kw(e,t,n),l=Bp(a,6);function h(T){return(7+new Date(T,0,1).getDay()-n)%7}let s=Y0(e);s<Y0(l)&&h(s+1)<=r&&s++;const p=new Date(s,0,1),v=h(s),x=v<=r?Bp(p,-v):Bp(p,7-v);return 1+Yw(LP(e),Z0(x),"weeks")}function jie(e,t,n,i){const r=Bp(Kw(e,t,n),6);function a(v){const x=new Date(v,0,1);return 7-Yw(x,Kw(x,t,n),"days")}let l=Y0(e);l<Y0(r)&&a(l+1)>=i&&l++;const h=new Date(l,0,1),s=a(l),p=s>=i?Bp(h,s-7):Bp(h,s);return 1+Yw(LP(e),Z0(p),"weeks")}function Wie(e){return e.getDate()}function Hie(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function Gie(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function qie(e){return e.getHours()}function Kie(e){return e.getMinutes()}function Xie(e){return new Date(e.getFullYear(),0,1)}function Yie(e){return new Date(e.getFullYear(),11,31)}function Zie(e,t){return Xw(e,t[0])&&ere(e,t[1])}function Jie(e){const t=new Date(e);return t instanceof Date&&!isNaN(t.getTime())}function Xw(e,t){return e.getTime()>t.getTime()}function Qie(e,t){return Xw(Z0(e),Z0(t))}function ere(e,t){return e.getTime()<t.getTime()}function w4(e,t){return e.getTime()===t.getTime()}function tre(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function nre(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function ire(e,t){return e.getFullYear()===t.getFullYear()}function Yw(e,t,n){const i=new Date(e),r=new Date(t);switch(n){case"years":return i.getFullYear()-r.getFullYear();case"quarters":return Math.floor((i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12)/4);case"months":return i.getMonth()-r.getMonth()+(i.getFullYear()-r.getFullYear())*12;case"weeks":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60*24));case"hours":return Math.floor((i.getTime()-r.getTime())/(1e3*60*60));case"minutes":return Math.floor((i.getTime()-r.getTime())/(1e3*60));case"seconds":return Math.floor((i.getTime()-r.getTime())/1e3);default:return i.getTime()-r.getTime()}}function rre(e,t){const n=new Date(e);return n.setHours(t),n}function sre(e,t){const n=new Date(e);return n.setMinutes(t),n}function ore(e,t){const n=new Date(e);return n.setMonth(t),n}function are(e,t){const n=new Date(e);return n.setDate(t),n}function lre(e,t){const n=new Date(e);return n.setFullYear(t),n}function Z0(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)}function LP(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59,999)}class cre{constructor(t){this.locale=t.locale,this.formats=t.formats}date(t){return l2(t)}toJsDate(t){return t}toISO(t){return Rie(this,t)}parseISO(t){return Oie(t)}addMinutes(t,n){return Vie(t,n)}addHours(t,n){return Bie(t,n)}addDays(t,n){return Bp(t,n)}addWeeks(t,n){return Fie(t,n)}addMonths(t,n){return zie(t,n)}getWeekArray(t,n){const i=n!==void 0?Number(n):void 0;return Iie(t,this.locale,i)}startOfWeek(t,n){const i=n!==void 0?Number(n):void 0;return Kw(t,this.locale,i)}endOfWeek(t){return Aie(t,this.locale)}startOfMonth(t){return o2(t)}endOfMonth(t){return a2(t)}format(t,n){return Lie(t,n,this.locale,this.formats)}isEqual(t,n){return w4(t,n)}isValid(t){return Jie(t)}isWithinRange(t,n){return Zie(t,n)}isAfter(t,n){return Xw(t,n)}isAfterDay(t,n){return Qie(t,n)}isBefore(t,n){return!Xw(t,n)&&!w4(t,n)}isSameDay(t,n){return tre(t,n)}isSameMonth(t,n){return nre(t,n)}isSameYear(t,n){return ire(t,n)}setMinutes(t,n){return sre(t,n)}setHours(t,n){return rre(t,n)}setMonth(t,n){return ore(t,n)}setDate(t,n){return are(t,n)}setYear(t,n){return lre(t,n)}getDiff(t,n,i){return Yw(t,n,i)}getWeekdays(t,n){const i=t!==void 0?Number(t):void 0;return Die(this.locale,i,n)}getYear(t){return Y0(t)}getMonth(t){return Nie(t)}getWeek(t,n,i){const r=n!==void 0?Number(n):void 0,a=i!==void 0?Number(i):void 0;return $ie(t,this.locale,r,a)}getDate(t){return Wie(t)}getNextMonth(t){return Hie(t)}getPreviousMonth(t){return Gie(t)}getHours(t){return qie(t)}getMinutes(t){return Kie(t)}startOfDay(t){return Z0(t)}endOfDay(t){return LP(t)}startOfYear(t){return Xie(t)}endOfYear(t){return Yie(t)}}const c2=Symbol.for("vuetify:date-options"),T4=Symbol.for("vuetify:date-adapter");function ure(e,t){const n=Na({adapter:cre,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e);return{options:n,instance:d2(n,t)}}function dre(e,t,n){const i=u2(e,t,n),r=[t];for(let a=1;a<i;a++){const l=e.addDays(t,a);r.push(l)}return n&&r.push(e.endOfDay(n)),r}function u2(e,t,n){const i=[`${e.toISO(n??t).split("T")[0]}T00:00:00Z`,`${e.toISO(t).split("T")[0]}T00:00:00Z`];return typeof e.date()=="string"?e.getDiff(i[0],i[1],"days"):e.getDiff(e.date(i[0]),e.date(i[1]),"days")}function d2(e,t){const n=oo(typeof e.adapter=="function"?new e.adapter({locale:e.locale[t.current.value]??t.current.value,formats:e.formats}):e.adapter);return Zt(t.current,i=>{n.locale=e.locale[i]??i??n.locale}),n}function $b(){const e=ki(c2);if(!e)throw new Error("[Vuetify] Could not find injected date options");const t=pr();return d2(e,t)}const ZT=["sm","md","lg","xl","xxl"],eI=Symbol.for("vuetify:display"),S4={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},hre=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S4;return Na(S4,e)};function E4(e){return Zi&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function C4(e){return Zi&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function k4(e){const t=Zi&&!e?window.navigator.userAgent:"ssr";function n(I){return!!t.match(I)}const i=n(/android/i),r=n(/iphone|ipad|ipod/i),a=n(/cordova/i),l=n(/electron/i),h=n(/chrome/i),s=n(/edge/i),p=n(/firefox/i),v=n(/opera/i),x=n(/win/i),T=n(/mac/i),C=n(/linux/i);return{android:i,ios:r,cordova:a,electron:l,chrome:h,edge:s,firefox:p,opera:v,win:x,mac:T,linux:C,touch:Cne,ssr:t==="ssr"}}function fre(e,t){const{thresholds:n,mobileBreakpoint:i}=hre(e),r=nn(C4(t)),a=nn(k4(t)),l=oo({}),h=nn(E4(t));function s(){r.value=C4(),h.value=E4()}function p(){s(),a.value=k4()}return Wr(()=>{const v=h.value<n.sm,x=h.value<n.md&&!v,T=h.value<n.lg&&!(x||v),C=h.value<n.xl&&!(T||x||v),I=h.value<n.xxl&&!(C||T||x||v),P=h.value>=n.xxl,D=v?"xs":x?"sm":T?"md":C?"lg":I?"xl":"xxl",F=typeof i=="number"?i:n[i],V=h.value<F;l.xs=v,l.sm=x,l.md=T,l.lg=C,l.xl=I,l.xxl=P,l.smAndUp=!v,l.mdAndUp=!(v||x),l.lgAndUp=!(v||x||T),l.xlAndUp=!(v||x||T||C),l.smAndDown=!(T||C||I||P),l.mdAndDown=!(C||I||P),l.lgAndDown=!(I||P),l.xlAndDown=!P,l.name=D,l.height=r.value,l.width=h.value,l.mobile=V,l.mobileBreakpoint=i,l.platform=a.value,l.thresholds=n}),Zi&&(window.addEventListener("resize",s,{passive:!0}),lo(()=>{window.removeEventListener("resize",s)},!0)),{...__(l),update:p,ssr:!!t}}const cg=ut({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function Fl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mobile:null},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=ki(eI);if(!n)throw new Error("Could not find Vuetify display injection");const i=me(()=>e.mobile?!0:typeof e.mobileBreakpoint=="number"?n.width.value<e.mobileBreakpoint:e.mobileBreakpoint?n.width.value<n.thresholds.value[e.mobileBreakpoint]:e.mobile===null?n.mobile.value:!1),r=He(()=>t?{[`${t}--mobile`]:i.value}:{});return{...n,displayClasses:r,mobile:i}}const h2=Symbol.for("vuetify:goto");function f2(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:pie}}function mre(e){return RP(e)??(document.scrollingElement||document.body)}function RP(e){return typeof e=="string"?document.querySelector(e):SP(e)}function xC(e,t,n){if(typeof e=="number")return t&&n?-e:e;let i=RP(e),r=0;for(;i;)r+=t?i.offsetLeft:i.offsetTop,i=i.offsetParent;return r}function pre(e,t){return{rtl:t.isRtl,options:Na(f2(),e)}}async function I4(e,t,n,i){const r=n?"scrollLeft":"scrollTop",a=Na((i==null?void 0:i.options)??f2(),t),l=i==null?void 0:i.rtl.value,h=(typeof e=="number"?e:RP(e))??0,s=a.container==="parent"&&h instanceof HTMLElement?h.parentElement:mre(a.container),p=ud()?a.patterns.instant:typeof a.easing=="function"?a.easing:a.patterns[a.easing];if(!p)throw new TypeError(`Easing function "${a.easing}" not found.`);let v;if(typeof h=="number")v=xC(h,n,l);else if(v=xC(h,n,l)-xC(s,n,l),a.layout){const I=window.getComputedStyle(h).getPropertyValue("--v-layout-top");I&&(v-=parseInt(I,10))}v+=a.offset,v=vre(s,v,!!l,!!n);const x=s[r]??0;if(v===x)return Promise.resolve(v);const T=performance.now();return new Promise(C=>requestAnimationFrame(function I(P){const F=(P-T)/a.duration,V=Math.floor(x+(v-x)*p(kr(F,0,1)));if(s[r]=V,F>=1&&Math.abs(V-s[r])<10)return C(v);if(F>2)return C(s[r]);requestAnimationFrame(I)}))}function gre(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=ki(h2),{isRtl:n}=Ks();if(!t)throw new Error("[Vuetify] Could not find injected goto instance");const i={...t,rtl:He(()=>t.rtl.value||n.value)};async function r(a,l){return I4(a,Na(e,l),!1,i)}return r.horizontal=async(a,l)=>I4(a,Na(e,l),!0,i),r}function vre(e,t,n,i){const{scrollWidth:r,scrollHeight:a}=e,[l,h]=e===document.scrollingElement?[window.innerWidth,window.innerHeight]:[e.offsetWidth,e.offsetHeight];let s,p;return i?n?(s=-(r-l),p=0):(s=0,p=r-l):(s=0,p=a+-h),kr(t,s,p)}const _re={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",tableGroupCollapse:"mdi-chevron-down",tableGroupExpand:"mdi-chevron-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload",color:"mdi-palette",command:"mdi-apple-keyboard-command",ctrl:"mdi-apple-keyboard-control",space:"mdi-keyboard-space",shift:"mdi-apple-keyboard-shift",alt:"mdi-apple-keyboard-option",enter:"mdi-keyboard-return",arrowup:"mdi-arrow-up",arrowdown:"mdi-arrow-down",arrowleft:"mdi-arrow-left",arrowright:"mdi-arrow-right",backspace:"mdi-backspace",play:"mdi-play",pause:"mdi-pause",fullscreen:"mdi-fullscreen",fullscreenExit:"mdi-fullscreen-exit",volumeHigh:"mdi-volume-high",volumeMedium:"mdi-volume-medium",volumeLow:"mdi-volume-low",volumeOff:"mdi-volume-variant-off"},yre={component:e=>Ih(VP,{...e,class:"mdi"})},Pn=[String,Function,Object,Array],tI=Symbol.for("vuetify:icons"),JT=ut({icon:{type:Pn},tag:{type:[String,Object,Function],required:!0}},"icon"),nI=Lt()({name:"VComponentIcon",props:JT(),setup(e,t){let{slots:n}=t;return()=>{const i=e.icon;return ue(e.tag,null,{default:()=>{var r;return[e.icon?ue(i,null,null):(r=n.default)==null?void 0:r.call(n)]}})}}}),OP=hc({name:"VSvgIcon",inheritAttrs:!1,props:JT(),setup(e,t){let{attrs:n}=t;return()=>ue(e.tag,Dt(n,{style:null}),{default:()=>[B("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(i=>Array.isArray(i)?B("path",{d:i[0],"fill-opacity":i[1]},null):B("path",{d:i},null)):B("path",{d:e.icon},null)])]})}}),bre=hc({name:"VLigatureIcon",props:JT(),setup(e){return()=>ue(e.tag,null,{default:()=>[e.icon]})}}),VP=hc({name:"VClassIcon",props:JT(),setup(e){return()=>ue(e.tag,{class:Tt(e.icon)},null)}});function xre(){return{svg:{component:OP},class:{component:VP}}}function wre(e){const t=xre(),n=(e==null?void 0:e.defaultSet)??"mdi";return n==="mdi"&&!t.mdi&&(t.mdi=yre),Na({defaultSet:n,sets:t,aliases:{..._re,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},e)}const Tre=e=>{const t=ki(tI);if(!t)throw new Error("Missing Vuetify Icons provide!");return{iconData:me(()=>{var s;const i=ja(e);if(!i)return{component:nI};let r=i;if(typeof r=="string"&&(r=r.trim(),r.startsWith("$")&&(r=(s=t.aliases)==null?void 0:s[r.slice(1)])),Array.isArray(r))return{component:OP,icon:r};if(typeof r!="string")return{component:nI,icon:r};const a=Object.keys(t.sets).find(p=>typeof r=="string"&&r.startsWith(`${p}:`)),l=a?r.slice(a.length+1):r;return{component:t.sets[a??t.defaultSet].component,icon:l}})}},J0=Symbol.for("vuetify:theme"),Li=ut({theme:String},"theme");function A4(){return{defaultTheme:"light",prefix:"v-",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#EEEEEE","theme-on-kbd":"#000000","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#c8c8c8","on-surface-variant":"#000000",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#424242","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}},stylesheetId:"vuetify-theme-stylesheet",scoped:!1,unimportant:!1,utilities:!0}}function Sre(){var i,r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A4();const t=A4();if(!e)return{...t,isDisabled:!0};const n={};for(const[a,l]of Object.entries(e.themes??{})){const h=l.dark||a==="dark"?(i=t.themes)==null?void 0:i.dark:(r=t.themes)==null?void 0:r.light;n[a]=Na(h,l)}return Na(t,{...e,themes:n})}function lp(e,t,n,i){e.push(`${Ire(t,i)} {
`,...n.map(r=>`  ${r};
`),`}
`)}function P4(e,t){const n=e.dark?2:1,i=e.dark?1:2,r=[];for(const[a,l]of Object.entries(e.colors)){const h=oc(l);r.push(`--${t}theme-${a}: ${h.r},${h.g},${h.b}`),a.startsWith("on-")||r.push(`--${t}theme-${a}-overlay-multiplier: ${Qk(l)>.18?n:i}`)}for(const[a,l]of Object.entries(e.variables)){const h=typeof l=="string"&&l.startsWith("#")?oc(l):void 0,s=h?`${h.r}, ${h.g}, ${h.b}`:void 0;r.push(`--${t}${a}: ${s??l}`)}return r}function Ere(e,t,n){const i={};if(n)for(const r of["lighten","darken"]){const a=r==="lighten"?sie:oie;for(const l of sc(n[r],1))i[`${e}-${r}-${l}`]=JN(a(oc(t),l))}return i}function Cre(e,t){if(!t)return{};let n={};for(const i of t.colors){const r=e[i];r&&(n={...n,...Ere(i,r,t)})}return n}function kre(e){const t={};for(const n of Object.keys(e)){if(n.startsWith("on-")||e[`on-${n}`])continue;const i=`on-${n}`,r=oc(e[n]);t[i]=t2(r)}return t}function Ire(e,t){if(!t)return e;const n=`:where(${t})`;return e===":root"?n:`${n} ${e}`}function Are(e,t,n){const i=Pre(e,t);i&&(i.innerHTML=n)}function Pre(e,t){if(!Zi)return null;let n=document.getElementById(e);return n||(n=document.createElement("style"),n.id=e,n.type="text/css",t&&n.setAttribute("nonce",t),document.head.appendChild(n)),n}function Mre(e){const t=Sre(e),n=nn(t.defaultTheme),i=it(t.themes),r=nn("light"),a=me({get(){return n.value==="system"?r.value:n.value},set(F){n.value=F}}),l=me(()=>{const F={};for(const[V,H]of Object.entries(i.value)){const q={...H.colors,...Cre(H.colors,t.variations)};F[V]={...H,colors:{...q,...kre(q)}}}return F}),h=He(()=>l.value[a.value]),s=He(()=>n.value==="system"),p=me(()=>{var q;const F=[],V=t.unimportant?"":" !important",H=t.scoped?t.prefix:"";(q=h.value)!=null&&q.dark&&lp(F,":root",["color-scheme: dark"],t.scope),lp(F,":root",P4(h.value,t.prefix),t.scope);for(const[K,ie]of Object.entries(l.value))lp(F,`.${t.prefix}theme--${K}`,[`color-scheme: ${ie.dark?"dark":"normal"}`,...P4(ie,t.prefix)],t.scope);if(t.utilities){const K=[],ie=[],X=new Set(Object.values(l.value).flatMap($=>Object.keys($.colors)));for(const $ of X)$.startsWith("on-")?lp(ie,`.${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${V}`],t.scope):(lp(K,`.${H}bg-${$}`,[`--${t.prefix}theme-overlay-multiplier: var(--${t.prefix}theme-${$}-overlay-multiplier)`,`background-color: rgb(var(--${t.prefix}theme-${$}))${V}`,`color: rgb(var(--${t.prefix}theme-on-${$}))${V}`],t.scope),lp(ie,`.${H}text-${$}`,[`color: rgb(var(--${t.prefix}theme-${$}))${V}`],t.scope),lp(ie,`.${H}border-${$}`,[`--${t.prefix}border-color: var(--${t.prefix}theme-${$})`],t.scope));F.push(...K,...ie)}return F.map((K,ie)=>ie===0?K:`    ${K}`).join("")}),v=He(()=>t.isDisabled?void 0:`${t.prefix}theme--${a.value}`),x=He(()=>Object.keys(l.value));if(TP){let V=function(){r.value=F.matches?"dark":"light"};const F=window.matchMedia("(prefers-color-scheme: dark)");V(),F.addEventListener("change",V,{passive:!0}),$V()&&lo(()=>{F.removeEventListener("change",V)})}function T(F){if(t.isDisabled)return;const V=F._context.provides.usehead;if(V){let H=function(){return{style:[{textContent:p.value,id:t.stylesheetId,nonce:t.cspNonce||!1}]}};if(V.push){const q=V.push(H);Zi&&Zt(p,()=>{q.patch(H)})}else Zi?(V.addHeadObjs(He(H)),Wr(()=>V.updateDOM())):V.addHeadObjs(H())}else{let H=function(){Are(t.stylesheetId,t.cspNonce,p.value)};Zi?Zt(p,H,{immediate:!0}):H()}}function C(F){F!=="system"&&!x.value.includes(F)||(a.value=F)}function I(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.value;const V=F.indexOf(a.value),H=V===-1?0:(V+1)%F.length;C(F[H])}function P(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["light","dark"];I(F)}const D=new Proxy(a,{get(F,V){return Reflect.get(F,V)},set(F,V,H){return V==="value"&&RN(`theme.global.name.value = ${H}`,`theme.change('${H}')`),Reflect.set(F,V,H)}});return{install:T,change:C,cycle:I,toggle:P,isDisabled:t.isDisabled,isSystem:s,name:a,themes:i,current:h,computedThemes:l,prefix:t.prefix,themeClasses:v,styles:p,global:{name:D,current:h}}}function nr(e){Ss("provideTheme");const t=ki(J0,null);if(!t)throw new Error("Could not find Vuetify theme injection");const n=He(()=>e.theme??t.name.value),i=He(()=>t.themes.value[n.value]),r=He(()=>t.isDisabled?void 0:`${t.prefix}theme--${n.value}`),a={...t,name:n,current:i,themeClasses:r};return Or(J0,a),a}function QT(){Ss("useTheme");const e=ki(J0,null);if(!e)throw new Error("Could not find Vuetify theme injection");return e}function Nc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const n=Ww(),i=it();if(Zi){const r=new ResizeObserver(a=>{e==null||e(a,r),a.length&&(t==="content"?i.value=a[0].contentRect:i.value=a[0].target.getBoundingClientRect())});jr(()=>{r.disconnect()}),Zt(()=>n.el,(a,l)=>{l&&(r.unobserve(l),i.value=void 0),a&&r.observe(a)},{flush:"post"})}return{resizeRef:n,contentRect:$p(i)}}const Q0=Symbol.for("vuetify:layout"),m2=Symbol.for("vuetify:layout-item"),M4=1e3,p2=ut({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),ug=ut({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function g2(){const e=ki(Q0);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function dg(e){const t=ki(Q0);if(!t)throw new Error("[Vuetify] Could not find injected layout");const n=e.id??`layout-item-${fa()}`,i=Ss("useLayoutItem");Or(m2,{id:n});const r=nn(!1);yT(()=>r.value=!0),sA(()=>r.value=!1);const{layoutItemStyles:a,layoutItemScrimStyles:l}=t.register(i,{...e,active:me(()=>r.value?!1:e.active.value),id:n});return jr(()=>t.unregister(n)),{layoutItemStyles:a,layoutRect:t.layoutRect,layoutItemScrimStyles:l}}const Dre=(e,t,n,i)=>{let r={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...r}}];for(const l of e){const h=t.get(l),s=n.get(l),p=i.get(l);if(!h||!s||!p)continue;const v={...r,[h.value]:parseInt(r[h.value],10)+(p.value?parseInt(s.value,10):0)};a.push({id:l,layer:v}),r=v}return a};function v2(e){const t=ki(Q0,null),n=me(()=>t?t.rootZIndex.value-100:M4),i=it([]),r=oo(new Map),a=oo(new Map),l=oo(new Map),h=oo(new Map),s=oo(new Map),{resizeRef:p,contentRect:v}=Nc(),x=me(()=>{const ie=new Map,X=e.overlaps??[];for(const $ of X.filter(G=>G.includes(":"))){const[G,j]=$.split(":");if(!i.value.includes(G)||!i.value.includes(j))continue;const te=r.get(G),Z=r.get(j),ee=a.get(G),be=a.get(j);!te||!Z||!ee||!be||(ie.set(j,{position:te.value,amount:parseInt(ee.value,10)}),ie.set(G,{position:Z.value,amount:-parseInt(be.value,10)}))}return ie}),T=me(()=>{const ie=[...new Set([...l.values()].map($=>$.value))].sort(($,G)=>$-G),X=[];for(const $ of ie){const G=i.value.filter(j=>{var te;return((te=l.get(j))==null?void 0:te.value)===$});X.push(...G)}return Dre(X,r,a,h)}),C=me(()=>!Array.from(s.values()).some(ie=>ie.value)),I=me(()=>T.value[T.value.length-1].layer),P=He(()=>({"--v-layout-left":vn(I.value.left),"--v-layout-right":vn(I.value.right),"--v-layout-top":vn(I.value.top),"--v-layout-bottom":vn(I.value.bottom),...C.value?void 0:{transition:"none"}})),D=me(()=>T.value.slice(1).map((ie,X)=>{let{id:$}=ie;const{layer:G}=T.value[X],j=a.get($),te=r.get($);return{id:$,...G,size:Number(j.value),position:te.value}})),F=ie=>D.value.find(X=>X.id===ie),V=Ss("createLayout"),H=nn(!1);Dr(()=>{H.value=!0}),Or(Q0,{register:(ie,X)=>{let{id:$,order:G,position:j,layoutSize:te,elementSize:Z,active:ee,disableTransitions:be,absolute:Ie}=X;l.set($,G),r.set($,j),a.set($,te),h.set($,ee),be&&s.set($,be);const Ke=Ev(m2,V==null?void 0:V.vnode).indexOf(ie);Ke>-1?i.value.splice(Ke,0,$):i.value.push($);const Xe=me(()=>D.value.findIndex(We=>We.id===$)),Pe=me(()=>n.value+T.value.length*2-Xe.value*2),$e=me(()=>{const We=j.value==="left"||j.value==="right",Ze=j.value==="right",ct=j.value==="bottom",kt=Z.value??te.value,Nt=kt===0?"%":"px",ot={[j.value]:0,zIndex:Pe.value,transform:`translate${We?"X":"Y"}(${(ee.value?0:-(kt===0?100:kt))*(Ze||ct?-1:1)}${Nt})`,position:Ie.value||n.value!==M4?"absolute":"fixed",...C.value?void 0:{transition:"none"}};if(!H.value)return ot;const dt=D.value[Xe.value],Je=x.value.get($);return Je&&(dt[Je.position]+=Je.amount),{...ot,height:We?`calc(100% - ${dt.top}px - ${dt.bottom}px)`:Z.value?`${Z.value}px`:void 0,left:Ze?void 0:`${dt.left}px`,right:Ze?`${dt.right}px`:void 0,top:j.value!=="bottom"?`${dt.top}px`:void 0,bottom:j.value!=="top"?`${dt.bottom}px`:void 0,width:We?Z.value?`${Z.value}px`:void 0:`calc(100% - ${dt.left}px - ${dt.right}px)`}}),Ee=me(()=>({zIndex:Pe.value-1}));return{layoutItemStyles:$e,layoutItemScrimStyles:Ee,zIndex:Pe}},unregister:ie=>{l.delete(ie),r.delete(ie),a.delete(ie),h.delete(ie),s.delete(ie),i.value=i.value.filter(X=>X!==ie)},mainRect:I,mainStyles:P,getLayoutItem:F,items:D,layoutRect:v,rootZIndex:n});const q=He(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),K=He(()=>({zIndex:t?n.value:void 0,position:t?"relative":void 0,overflow:t?"hidden":void 0}));return{layoutClasses:q,layoutStyles:K,getLayoutItem:F,items:D,layoutRect:v,layoutRef:p}}function _2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:t,...n}=e,i=Na(t,n),{aliases:r={},components:a={},directives:l={}}=i,h=jv();return h.run(()=>{const s=cie(i.defaults),p=fre(i.display,i.ssr),v=Mre(i.theme),x=wre(i.icons),T=Tie(i.locale),C=ure(i.date,T),I=pre(i.goTo,T);function P(F){for(const H in l)F.directive(H,l[H]);for(const H in a)F.component(H,a[H]);for(const H in r)F.component(H,hc({...r[H],name:H,aliasName:r[H].name}));const V=jv();if(V.run(()=>{v.install(F)}),F.onUnmount(()=>V.stop()),F.provide(c_,s),F.provide(eI,p),F.provide(J0,v),F.provide(tI,x),F.provide(u_,T),F.provide(c2,C.options),F.provide(T4,C.instance),F.provide(h2,I),Zi&&i.ssr)if(F.$nuxt)F.$nuxt.hook("app:suspense:resolve",()=>{p.update()});else{const{mount:H}=F;F.mount=function(){const q=H(...arguments);return Gn(()=>p.update()),F.mount=H,q}}F.mixin({computed:{$vuetify(){return oo({defaults:hv.call(this,c_),display:hv.call(this,eI),theme:hv.call(this,J0),icons:hv.call(this,tI),locale:hv.call(this,u_),date:hv.call(this,T4)})}}})}function D(){h.stop()}return{install:P,unmount:D,defaults:s,display:p,theme:v,icons:x,locale:T,date:C,goTo:I}})}const Lre="3.10.8";_2.version=Lre;function hv(e){var i,r;const t=this.$,n=((i=t.parent)==null?void 0:i.provides)??((r=t.vnode.appContext)==null?void 0:r.provides);if(n&&e in n)return n[e]}const D4="route-animation-arrived",Rre=950;function Ore(){const e=it(!1),t=it(0),n=it(0),i=it(0),r=it([]);let a=null,l=0,h=null;function s(D){h=D}function p(){h=null}function v(){a!=null&&(cancelAnimationFrame(a),a=null)}function x(){v(),t.value=0,n.value=0,e.value=!1,h==null||h(t.value)}function T(){if(r.value.length){if(v(),i.value=r.value.length,t.value=Math.min(t.value,i.value-1),n.value=0,h==null||h(t.value),r.value.length<=1){window.dispatchEvent(new CustomEvent(D4));return}e.value=!0,l=performance.now(),a=requestAnimationFrame(I)}}function C(){e.value=!1,v()}function I(D){if(!e.value)return;const F=D-l;for(l=D,n.value+=F/Rre;n.value>=1&&e.value;)if(n.value-=1,t.value<Math.max(r.value.length-1,0))t.value+=1,h==null||h(t.value);else{P();return}a=requestAnimationFrame(I)}function P(){v(),e.value=!1,n.value=0,window.dispatchEvent(new CustomEvent(D4))}return{isPlaying:e,progressIndex:t,segmentProgress:n,totalStops:i,routeStationIds:r,startAnimation:T,pauseAnimation:C,resetAnimation:x,attachRenderer:s,detachRenderer:p}}const L4=new Set(["BPL","SWPL","SEPL","PEPLRT","PWLRT"]),Tf=new Map;let R4=!1;function nh(e,t){return`${e} (${t})`}function Py(e,t,n=1){Tf.has(e)||Tf.set(e,[]),Tf.has(t)||Tf.set(t,[]),Tf.get(e).push({to:t,weight:n}),Tf.get(t).push({to:e,weight:n})}function Vre(){if(R4)return;Object.entries(Df).forEach(([t,n])=>{n.forEach((i,r)=>{const a=nh(i,t);if(r>0&&Py(a,nh(n[r-1],t),1),r<n.length-1&&Py(a,nh(n[r+1],t),1),L4.has(t)&&r===n.length-1&&r>0){const l=nh(n[1],t);Py(a,l,1)}if(L4.has(t)&&r===1&&n.length>2){const l=nh(n[n.length-1],t);Py(a,l,1)}})});const e=new Map;Object.entries(Df).forEach(([t,n])=>{n.forEach(i=>{e.has(i)||e.set(i,[]),e.get(i).push(t)})}),e.forEach((t,n)=>{if(!(t.length<2))for(let i=0;i<t.length;i+=1)for(let r=i+1;r<t.length;r+=1)Py(nh(n,t[i]),nh(n,t[r]),.5)}),R4=!0}function Bre(e,t){if(!e||!t)return null;Vre();const n=Object.keys(Df).filter(T=>Df[T].includes(e)).map(T=>nh(e,T)),i=Object.keys(Df).filter(T=>Df[T].includes(t)).map(T=>nh(t,T));if(!n.length||!i.length)return null;const r=new Map,a=new Map,l=[];function h(T,C){l.push({node:T,distance:C}),l.sort((I,P)=>I.distance-P.distance)}Tf.forEach((T,C)=>r.set(C,1/0)),n.forEach(T=>{r.set(T,0),h(T,0)});const s=new Set(i);let p=null;for(;l.length;){const{node:T,distance:C}=l.shift();if(C!==r.get(T))continue;if(s.has(T)){p=T;break}(Tf.get(T)||[]).forEach(({to:P,weight:D})=>{const F=C+D;F<r.get(P)&&(r.set(P,F),a.set(P,T),h(P,F))})}if(!p)return null;const v=[];let x=p;for(;x;){const T=x.match(/^(.*) \((.*)\)$/);v.unshift({station:T?T[1]:x,line:T?T[2]:"?"}),x=a.get(x)}return{steps:v,totalWeight:r.get(p)}}function Fre(e){const t=Math.max(0,Math.round(e)),n=Math.max(0,Math.round((e-t)*2));return Math.round(t*2.2+n*4+3)}function zre(e){const t=Math.max(0,Math.round(e)),n=Math.round((e-t)*2);return Number((t*1.1+n*.3).toFixed(1))}function Nre(e,t){const n=Df[e.line]||[],i=n.indexOf(e.station),r=n.indexOf(t.station);return Math.abs(r-i)}function $re(e){var i;if(!((i=e==null?void 0:e.steps)!=null&&i.length))return[];const t=[];let n=0;for(;n<e.steps.length-1;){const r=e.steps[n];let a=n+1;for(;a<e.steps.length&&e.steps[a].line===r.line;)a+=1;const l=e.steps[a-1];t.push({line:r.line,from:r.station,to:l.station,stops:Nre(r,l)}),n=a}return t}function BP(){return{allStations:aF,shortestPath:Bre,estimateTimeMinutes:Fre,estimateDistanceKm:zre,summariseSegments:$re}}const Ure=[{max:3.2,fare:1.19},{max:4.2,fare:1.29},{max:5.2,fare:1.4},{max:6.2,fare:1.5},{max:7.2,fare:1.59},{max:8.2,fare:1.66},{max:9.2,fare:1.73},{max:10.2,fare:1.77},{max:11.2,fare:1.81},{max:12.2,fare:1.85},{max:13.2,fare:1.89},{max:14.2,fare:1.93},{max:15.2,fare:1.98},{max:16.2,fare:2.02},{max:17.2,fare:2.06},{max:18.2,fare:2.1},{max:19.2,fare:2.14},{max:20.2,fare:2.17},{max:21.2,fare:2.2},{max:22.2,fare:2.23},{max:23.2,fare:2.26},{max:24.2,fare:2.28},{max:25.2,fare:2.3},{max:26.2,fare:2.32},{max:27.2,fare:2.33},{max:28.2,fare:2.34},{max:29.2,fare:2.35},{max:30.2,fare:2.36},{max:31.2,fare:2.37},{max:32.2,fare:2.38},{max:33.2,fare:2.39},{max:34.2,fare:2.4},{max:35.2,fare:2.41},{max:36.2,fare:2.42},{max:37.2,fare:2.43},{max:38.2,fare:2.44},{max:39.2,fare:2.45},{max:40.2,fare:2.46},{max:1/0,fare:2.47}],jre=[{max:3.2,fare:.52},{max:4.2,fare:.57},{max:5.2,fare:.63},{max:6.2,fare:.68},{max:7.2,fare:.71},{max:1/0,fare:.74}],Wre=[{max:3.2,fare:.69},{max:4.2,fare:.76},{max:5.2,fare:.84},{max:6.2,fare:.91},{max:7.2,fare:.97},{max:1/0,fare:1.03}],Hre=[{max:3.2,fare:.78},{max:4.2,fare:.86},{max:5.2,fare:.95},{max:6.2,fare:1.03},{max:7.2,fare:1.1},{max:8.2,fare:1.16},{max:9.2,fare:1.22},{max:10.2,fare:1.25},{max:11.2,fare:1.28},{max:12.2,fare:1.31},{max:13.2,fare:1.34},{max:14.2,fare:1.37},{max:15.2,fare:1.4},{max:16.2,fare:1.43},{max:17.2,fare:1.46},{max:18.2,fare:1.49},{max:19.2,fare:1.52},{max:20.2,fare:1.55},{max:21.2,fare:1.58},{max:22.2,fare:1.61},{max:23.2,fare:1.64},{max:24.2,fare:1.66},{max:25.2,fare:1.67},{max:26.2,fare:1.68},{max:27.2,fare:1.69},{max:28.2,fare:1.7},{max:29.2,fare:1.71},{max:30.2,fare:1.72},{max:31.2,fare:1.73},{max:32.2,fare:1.74},{max:33.2,fare:1.75},{max:34.2,fare:1.76},{max:35.2,fare:1.77},{max:36.2,fare:1.78},{max:37.2,fare:1.79},{max:38.2,fare:1.8},{max:39.2,fare:1.81},{max:40.2,fare:1.82},{max:1/0,fare:1.83}],O4={train:{primary:21,secondary:26.5,polytechnic:26.5,university:48,ns:48,senior:58,disability:58,workfare:96,adult:128},bus:{primary:24,secondary:29,polytechnic:29,university:55.5,ns:55.5,senior:58,disability:58,workfare:96,adult:128},hybrid:{primary:39,secondary:49,polytechnic:49,university:81,ns:81,senior:58,disability:58,workfare:96,adult:128}};function Gre(e){switch(e){case"primary":case"secondary":case"polytechnic":return jre;case"senior":case"disability":return Wre;case"workfare":return Hre;case"university":case"ns":case"adult":default:return Ure}}function y2(e,t){const n=Gre(t);for(const i of n)if(e<=i.max)return i.fare;return n[n.length-1].fare}function qre({distanceKm:e,type:t,dailyTrips:n,workingDays:i}){const r=y2(e,t),a=r*n*i,h=["train","bus","hybrid"].map(s=>{const p=O4[s][t]??O4[s].adult,v=a-p;return{mode:s,passPrice:p,savings:v,worth:v>0}});return{singleFare:r,monthlyTotal:a,breakdown:h}}function b2(){return{fareByType:y2,analyseMonthlyPass:qre}}const x2=Dh("v-alert-title"),ul=ut({border:[Boolean,Number,String]},"border");function zl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{borderClasses:me(()=>{const i=e.border;return i===!0||i===""?`${t}--border`:typeof i=="string"||i===0?String(i).split(" ").map(r=>`border-${r}`):[]})}}const Kre=[null,"default","comfortable","compact"],Es=ut({density:{type:String,default:"default",validator:e=>Kre.includes(e)}},"density");function Ka(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{densityClasses:He(()=>`${t}--density-${e.density}`)}}const Xs=ut({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function To(e){return{elevationClasses:He(()=>{const n=Bs(e)?e.value:e.elevation;return n==null?[]:[`elevation-${n}`]})}}const Hr=ut({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function is(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{roundedClasses:me(()=>{const i=Bs(e)?e.value:e.rounded,r=Bs(e)?!1:e.tile,a=[];if(r||i===!1)a.push("rounded-0");else if(i===!0||i==="")a.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const l of String(i).split(" "))a.push(`rounded-${l}`);return a})}}const ii=ut({tag:{type:[String,Object,Function],default:"div"}},"tag");function FP(e){return CP(()=>{const{class:t,style:n}=Xre(e);return{colorClasses:t,colorStyles:n}})}function jo(e){const{colorClasses:t,colorStyles:n}=FP(()=>({text:ja(e)}));return{textColorClasses:t,textColorStyles:n}}function or(e){const{colorClasses:t,colorStyles:n}=FP(()=>({background:ja(e)}));return{backgroundColorClasses:t,backgroundColorStyles:n}}function Xre(e){const t=ja(e),n=[],i={};if(t.background)if(Zk(t.background)){if(i.backgroundColor=t.background,!t.text&&tie(t.background)){const r=oc(t.background);if(r.a==null||r.a===1){const a=t2(r);i.color=a,i.caretColor=a}}}else n.push(`bg-${t.background}`);return t.text&&(Zk(t.text)?(i.color=t.text,i.caretColor=t.text):n.push(`text-${t.text}`)),{class:n,style:i}}const Yre=["elevated","flat","tonal","outlined","text","plain"];function vm(e,t){return B(ln,null,[e&&B("span",{key:"overlay",class:Tt(`${t}__overlay`)},null),B("span",{key:"underlay",class:Tt(`${t}__underlay`)},null)])}const $c=ut({color:String,variant:{type:String,default:"elevated",validator:e=>Yre.includes(e)}},"variant");function hg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=He(()=>{const{variant:a}=ja(e);return`${t}--variant-${a}`}),{colorClasses:i,colorStyles:r}=FP(()=>{const{variant:a,color:l}=ja(e);return{[["elevated","flat"].includes(a)?"background":"text"]:l}});return{colorClasses:i,colorStyles:r,variantClasses:n}}const w2=ut({baseColor:String,divided:Boolean,direction:{type:String,default:"horizontal"},...ul(),...Tn(),...Es(),...Xs(),...Hr(),...ii(),...Li(),...$c()},"VBtnGroup"),iI=Lt()({name:"VBtnGroup",props:w2(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{densityClasses:r}=Ka(e),{borderClasses:a}=zl(e),{elevationClasses:l}=To(e),{roundedClasses:h}=is(e);ns({VBtn:{height:He(()=>e.direction==="horizontal"?"auto":null),baseColor:He(()=>e.baseColor),color:He(()=>e.color),density:He(()=>e.density),flat:!0,variant:He(()=>e.variant)}}),Ut(()=>ue(e.tag,{class:Tt(["v-btn-group",`v-btn-group--${e.direction}`,{"v-btn-group--divided":e.divided},i.value,a.value,r.value,l.value,h.value,e.class]),style:Yt(e.style)},n))}}),fg=ut({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),mg=ut({value:null,disabled:Boolean,selectedClass:String},"group-item");function am(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const i=Ss("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const r=fa();Or(Symbol.for(`${t.description}:id`),r);const a=ki(t,null);if(!a){if(!n)return a;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const l=He(()=>e.value),h=me(()=>!!(a.disabled.value||e.disabled));function s(){a==null||a.register({id:r,value:l,disabled:h},i)}function p(){a==null||a.unregister(r)}s(),jr(()=>p());const v=me(()=>a.isSelected(r)),x=me(()=>a.items.value[0].id===r),T=me(()=>a.items.value[a.items.value.length-1].id===r),C=me(()=>v.value&&[a.selectedClass.value,e.selectedClass]);return Zt(v,I=>{i.emit("group:selected",{value:I})},{flush:"sync"}),{id:r,isSelected:v,isFirst:x,isLast:T,toggle:()=>a.select(r,!v.value),select:I=>a.select(r,I),selectedClass:C,value:l,disabled:h,group:a,register:s,unregister:p}}function _m(e,t){let n=!1;const i=oo([]),r=Dn(e,"modelValue",[],T=>T===void 0?[]:T2(i,T===null?[null]:Yr(T)),T=>{const C=Jre(i,T);return e.multiple?C:C[0]}),a=Ss("useGroup");function l(T,C){const I=T,P=Symbol.for(`${t.description}:id`),F=Ev(P,a==null?void 0:a.vnode).indexOf(C);Ti(I.value)===void 0&&(I.value=F,I.useIndexAsValue=!0),F>-1?i.splice(F,0,I):i.push(I)}function h(T){if(n)return;s();const C=i.findIndex(I=>I.id===T);i.splice(C,1)}function s(){const T=i.find(C=>!C.disabled);T&&e.mandatory==="force"&&!r.value.length&&(r.value=[T.id])}Dr(()=>{s()}),jr(()=>{n=!0}),xT(()=>{for(let T=0;T<i.length;T++)i[T].useIndexAsValue&&(i[T].value=T)});function p(T,C){const I=i.find(P=>P.id===T);if(!(C&&(I!=null&&I.disabled)))if(e.multiple){const P=r.value.slice(),D=P.findIndex(V=>V===T),F=~D;if(C=C??!F,F&&e.mandatory&&P.length<=1||!F&&e.max!=null&&P.length+1>e.max)return;D<0&&C?P.push(T):D>=0&&!C&&P.splice(D,1),r.value=P}else{const P=r.value.includes(T);if(e.mandatory&&P||!P&&!C)return;r.value=C??!P?[T]:[]}}function v(T){if(e.multiple,r.value.length){const C=r.value[0],I=i.findIndex(F=>F.id===C);let P=(I+T)%i.length,D=i[P];for(;D.disabled&&P!==I;)P=(P+T)%i.length,D=i[P];if(D.disabled)return;r.value=[i[P].id]}else{const C=i.find(I=>!I.disabled);C&&(r.value=[C.id])}}const x={register:l,unregister:h,selected:r,select:p,disabled:He(()=>e.disabled),prev:()=>v(i.length-1),next:()=>v(1),isSelected:T=>r.value.includes(T),selectedClass:He(()=>e.selectedClass),items:He(()=>i),getItemIndex:T=>Zre(i,T)};return Or(t,x),x}function Zre(e,t){const n=T2(e,[t]);return n.length?e.findIndex(i=>i.id===n[0]):-1}function T2(e,t){const n=[];return t.forEach(i=>{const r=e.find(l=>xo(i,l.value)),a=e[i];(r==null?void 0:r.value)!==void 0?n.push(r.id):a!=null&&a.useIndexAsValue&&n.push(a.id)}),n}function Jre(e,t){const n=[];return t.forEach(i=>{const r=e.findIndex(a=>a.id===i);if(~r){const a=e[r];n.push(a.value!==void 0?a.value:r)}}),n}const zP=Symbol.for("vuetify:v-btn-toggle"),Qre=ut({...w2(),...fg()},"VBtnToggle"),ese=Lt()({name:"VBtnToggle",props:Qre(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,next:r,prev:a,select:l,selected:h}=_m(e,zP);return Ut(()=>{const s=iI.filterProps(e);return ue(iI,Dt({class:["v-btn-toggle",e.class]},s,{style:e.style}),{default:()=>{var p;return[(p=n.default)==null?void 0:p.call(n,{isSelected:i,next:r,prev:a,select:l,selected:h})]}})}),{next:r,prev:a,select:l}}}),tse=ut({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),di=Lt(!1)({name:"VDefaultsProvider",props:tse(),setup(e,t){let{slots:n}=t;const{defaults:i,disabled:r,reset:a,root:l,scoped:h}=__(e);return ns(i,{reset:a,root:l,scoped:h,disabled:r}),()=>{var s;return(s=n.default)==null?void 0:s.call(n)}}}),nse=["x-small","small","default","large","x-large"],gd=ut({size:{type:[String,Number],default:"default"}},"size");function k_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return CP(()=>{const n=e.size;let i,r;return jw(nse,n)?i=`${t}--size-${n}`:n&&(r={width:vn(n),height:vn(n)}),{sizeClasses:i,sizeStyles:r}})}const ise=ut({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:Pn,opacity:[String,Number],...Tn(),...gd(),...ii({tag:"i"}),...Li()},"VIcon"),Di=Lt()({name:"VIcon",props:ise(),setup(e,t){let{attrs:n,slots:i}=t;const r=nn(),{themeClasses:a}=QT(),{iconData:l}=Tre(()=>r.value||e.icon),{sizeClasses:h}=k_(e),{textColorClasses:s,textColorStyles:p}=jo(()=>e.color);return Ut(()=>{var T,C;const v=(T=i.default)==null?void 0:T.call(i);v&&(r.value=(C=NN(v).filter(I=>I.type===xb&&I.children&&typeof I.children=="string")[0])==null?void 0:C.children);const x=!!(n.onClick||n.onClickOnce);return ue(l.value.component,{tag:e.tag,icon:l.value.icon,class:Tt(["v-icon","notranslate",a.value,h.value,s.value,{"v-icon--clickable":x,"v-icon--disabled":e.disabled,"v-icon--start":e.start,"v-icon--end":e.end},e.class]),style:Yt([{"--v-icon-opacity":e.opacity},h.value?void 0:{fontSize:vn(e.size),height:vn(e.size),width:vn(e.size)},p.value,e.style]),role:x?"button":void 0,"aria-hidden":!x,tabindex:x?e.disabled?-1:0:void 0},{default:()=>[v]})}),{}}});function Ub(e,t){const n=it(),i=nn(!1);if(wP){const r=new IntersectionObserver(a=>{i.value=!!a.find(l=>l.isIntersecting)},t);lo(()=>{r.disconnect()}),Zt(n,(a,l)=>{l&&(r.unobserve(l),i.value=!1),a&&r.observe(a)},{flush:"post"})}return{intersectionRef:n,isIntersecting:i}}const rse=ut({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Tn(),...gd(),...ii({tag:"div"}),...Li()},"VProgressCircular"),Yp=Lt()({name:"VProgressCircular",props:rse(),setup(e,t){let{slots:n}=t;const i=20,r=2*Math.PI*i,a=it(),{themeClasses:l}=nr(e),{sizeClasses:h,sizeStyles:s}=k_(e),{textColorClasses:p,textColorStyles:v}=jo(()=>e.color),{textColorClasses:x,textColorStyles:T}=jo(()=>e.bgColor),{intersectionRef:C,isIntersecting:I}=Ub(),{resizeRef:P,contentRect:D}=Nc(),F=He(()=>kr(parseFloat(e.modelValue),0,100)),V=He(()=>Number(e.width)),H=He(()=>s.value?Number(e.size):D.value?D.value.width:Math.max(V.value,32)),q=He(()=>i/(1-V.value/H.value)*2),K=He(()=>V.value/H.value*q.value),ie=He(()=>vn((100-F.value)/100*r));return Wr(()=>{C.value=a.value,P.value=a.value}),Ut(()=>ue(e.tag,{ref:a,class:Tt(["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":I.value,"v-progress-circular--disable-shrink":e.indeterminate&&(e.indeterminate==="disable-shrink"||ud())},l.value,h.value,p.value,e.class]),style:Yt([s.value,v.value,e.style]),role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:F.value},{default:()=>[B("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${q.value} ${q.value}`},[B("circle",{class:Tt(["v-progress-circular__underlay",x.value]),style:Yt(T.value),fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":K.value,"stroke-dasharray":r,"stroke-dashoffset":0},null),B("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:i,"stroke-width":K.value,"stroke-dasharray":r,"stroke-dashoffset":ie.value},null)]),n.default&&B("div",{class:"v-progress-circular__content"},[n.default({value:F.value})])]})),{}}}),Fs=ut({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function zs(e){return{dimensionStyles:me(()=>{const n={},i=vn(e.height),r=vn(e.maxHeight),a=vn(e.maxWidth),l=vn(e.minHeight),h=vn(e.minWidth),s=vn(e.width);return i!=null&&(n.height=i),r!=null&&(n.maxHeight=r),a!=null&&(n.maxWidth=a),l!=null&&(n.minHeight=l),h!=null&&(n.minWidth=h),s!=null&&(n.width=s),n})}}const V4={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Lh=ut({location:String},"location");function pg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:i}=Ks();return{locationStyles:me(()=>{if(!e.location)return{};const{side:a,align:l}=Xk(e.location.split(" ").length>1?e.location:`${e.location} center`,i.value);function h(p){return n?n(p):0}const s={};return a!=="center"&&(t?s[V4[a]]=`calc(100% - ${h(a)}px)`:s[a]=0),l!=="center"?t?s[V4[l]]=`calc(100% - ${h(l)}px)`:s[l]=0:(a==="center"?s.top=s.left="50%":s[{top:"left",bottom:"left",left:"top",right:"top"}[a]]="50%",s.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[a]),s})}}const sse=ut({chunkCount:{type:[Number,String],default:null},chunkWidth:{type:[Number,String],default:null},chunkGap:{type:[Number,String],default:4}},"chunks");function ose(e,t){const n=He(()=>!!e.chunkCount||!!e.chunkWidth),i=me(()=>{const h=ja(t);if(!h)return 0;if(!e.chunkCount)return Number(e.chunkWidth);const s=Number(e.chunkCount);return(h-Number(e.chunkGap)*(s-1))/s}),r=He(()=>Number(e.chunkGap)),a=me(()=>{if(!n.value)return{};const h=vn(r.value),s=vn(i.value);return{maskRepeat:"repeat-x",maskImage:`linear-gradient(90deg, #000, #000 ${s}, transparent ${s}, transparent)`,maskSize:`calc(${s} + ${h}) 100%`}});function l(h){const s=ja(t);if(!s)return h;const p=100*r.value/s,v=100*(i.value+r.value)/s,x=Math.floor((h+p)/v);return kr(0,x*v-p/2,100)}return{hasChunks:n,chunksMaskStyles:a,snapValueToChunk:l}}const ase=ut({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...sse(),...Tn(),...Lh({location:"top"}),...Hr(),...ii(),...Li()},"VProgressLinear"),jb=Lt()({name:"VProgressLinear",props:ase(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=it(),r=Dn(e,"modelValue"),{isRtl:a,rtlClasses:l}=Ks(),{themeClasses:h}=nr(e),{locationStyles:s}=pg(e),{textColorClasses:p,textColorStyles:v}=jo(()=>e.color),{backgroundColorClasses:x,backgroundColorStyles:T}=or(()=>e.bgColor||e.color),{backgroundColorClasses:C,backgroundColorStyles:I}=or(()=>e.bufferColor||e.bgColor||e.color),{backgroundColorClasses:P,backgroundColorStyles:D}=or(()=>e.color),{roundedClasses:F}=is(e),{intersectionRef:V,isIntersecting:H}=Ub(),q=me(()=>parseFloat(e.max)),K=me(()=>parseFloat(e.height)),ie=me(()=>kr(parseFloat(e.bufferValue)/q.value*100,0,100)),X=me(()=>kr(parseFloat(r.value)/q.value*100,0,100)),$=me(()=>a.value!==e.reverse),G=me(()=>e.indeterminate?"fade-transition":"slide-x-transition"),j=nn(0),{hasChunks:te,chunksMaskStyles:Z,snapValueToChunk:ee}=ose(e,j);ua(te,()=>{const{resizeRef:Ke}=Nc(Xe=>j.value=Xe[0].contentRect.width);Wr(()=>Ke.value=i.value)});const be=me(()=>te.value?ee(ie.value):ie.value),Ie=me(()=>te.value?ee(X.value):X.value);function Ve(Ke){if(!V.value)return;const{left:Xe,right:Pe,width:$e}=V.value.getBoundingClientRect(),Ee=$.value?$e-Ke.clientX+(Pe-$e):Ke.clientX-Xe;r.value=Math.round(Ee/$e*q.value)}return Wr(()=>{V.value=i.value}),Ut(()=>ue(e.tag,{ref:i,class:Tt(["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&H.value,"v-progress-linear--reverse":$.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped,"v-progress-linear--clickable":e.clickable},F.value,h.value,l.value,e.class]),style:Yt([{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?vn(K.value):0,"--v-progress-linear-height":vn(K.value),...e.absolute?s.value:{}},Z.value,e.style]),role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:Math.min(parseFloat(r.value),q.value),onClick:e.clickable&&Ve},{default:()=>[e.stream&&B("div",{key:"stream",class:Tt(["v-progress-linear__stream",p.value]),style:{...v.value,[$.value?"left":"right"]:vn(-K.value),borderTop:`${vn(K.value/2)} dotted`,opacity:parseFloat(e.bufferOpacity),top:`calc(50% - ${vn(K.value/4)})`,width:vn(100-ie.value,"%"),"--v-progress-linear-stream-to":vn(K.value*($.value?1:-1))}},null),B("div",{class:Tt(["v-progress-linear__background",x.value]),style:Yt([T.value,{opacity:parseFloat(e.bgOpacity),width:e.stream?0:void 0}])},null),B("div",{class:Tt(["v-progress-linear__buffer",C.value]),style:Yt([I.value,{opacity:parseFloat(e.bufferOpacity),width:vn(be.value,"%")}])},null),ue(Ol,{name:G.value},{default:()=>[e.indeterminate?B("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(Ke=>B("div",{key:Ke,class:Tt(["v-progress-linear__indeterminate",Ke,P.value]),style:Yt(D.value)},null))]):B("div",{class:Tt(["v-progress-linear__determinate",P.value]),style:Yt([D.value,{width:vn(Ie.value,"%")}])},null)]}),n.default&&B("div",{class:"v-progress-linear__content"},[n.default({value:X.value,buffer:ie.value})])]})),{}}}),eS=ut({loading:[Boolean,String]},"loader");function Wb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{loaderClasses:He(()=>({[`${t}--loading`]:e.loading}))}}function Hb(e,t){var i;let{slots:n}=t;return B("div",{class:Tt(`${e.name}__loader`)},[((i=n.default)==null?void 0:i.call(n,{color:e.color,isActive:e.active}))||ue(jb,{absolute:e.absolute,active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const lse=["static","relative","fixed","absolute","sticky"],I_=ut({position:{type:String,validator:e=>lse.includes(e)}},"position");function A_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();return{positionClasses:He(()=>e.position?`${t}--${e.position}`:void 0)}}function cse(){const e=Ss("useRoute");return me(()=>{var t;return(t=e==null?void 0:e.proxy)==null?void 0:t.$route})}function S2(){var e,t;return(t=(e=Ss("useRouter"))==null?void 0:e.proxy)==null?void 0:t.$router}function Gb(e,t){var x,T;const n=CB("RouterLink"),i=He(()=>!!(e.href||e.to)),r=me(()=>(i==null?void 0:i.value)||t4(t,"click")||t4(e,"click"));if(typeof n=="string"||!("useLink"in n)){const C=He(()=>e.href);return{isLink:i,isRouterLink:He(()=>!1),isClickable:r,href:C,linkProps:oo({href:C})}}const a=n.useLink({to:He(()=>e.to||""),replace:He(()=>e.replace)}),l=me(()=>e.to?a:void 0),h=cse(),s=me(()=>{var C,I,P;return l.value?e.exact?h.value?((P=l.value.isExactActive)==null?void 0:P.value)&&xo(l.value.route.value.query,h.value.query):((I=l.value.isExactActive)==null?void 0:I.value)??!1:((C=l.value.isActive)==null?void 0:C.value)??!1:!1}),p=me(()=>{var C;return e.to?(C=l.value)==null?void 0:C.route.value.href:e.href}),v=He(()=>!!e.to);return{isLink:i,isRouterLink:v,isClickable:r,isActive:s,route:(x=l.value)==null?void 0:x.route,navigate:(T=l.value)==null?void 0:T.navigate,href:p,linkProps:oo({href:p,"aria-current":He(()=>s.value?"page":void 0),"aria-disabled":He(()=>e.disabled&&i.value?"true":void 0),tabindex:He(()=>e.disabled&&i.value?"-1":void 0)})}}const qb=ut({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let wC=!1;function use(e,t){let n=!1,i,r;Zi&&(e!=null&&e.beforeEach)&&(Gn(()=>{window.addEventListener("popstate",a),i=e.beforeEach((l,h,s)=>{wC?n?t(s):s():setTimeout(()=>n?t(s):s()),wC=!0}),r=e==null?void 0:e.afterEach(()=>{wC=!1})}),lo(()=>{window.removeEventListener("popstate",a),i==null||i(),r==null||r()}));function a(l){var h;(h=l.state)!=null&&h.replaced||(n=!0,setTimeout(()=>n=!1))}}function dse(e,t){Zt(()=>{var n;return(n=e.isActive)==null?void 0:n.value},n=>{e.isLink.value&&n!=null&&t&&Gn(()=>{t(n)})},{immediate:!0})}const rI=Symbol("rippleStop"),hse=80;function B4(e,t){e.style.transform=t,e.style.webkitTransform=t}function sI(e){return e.constructor.name==="TouchEvent"}function E2(e){return e.constructor.name==="KeyboardEvent"}const fse=function(e,t){var x;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=0,r=0;if(!E2(e)){const T=t.getBoundingClientRect(),C=sI(e)?e.touches[e.touches.length-1]:e;i=C.clientX-T.left,r=C.clientY-T.top}let a=0,l=.3;(x=t._ripple)!=null&&x.circle?(l=.15,a=t.clientWidth/2,a=n.center?a:a+Math.sqrt((i-a)**2+(r-a)**2)/4):a=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const h=`${(t.clientWidth-a*2)/2}px`,s=`${(t.clientHeight-a*2)/2}px`,p=n.center?h:`${i-a}px`,v=n.center?s:`${r-a}px`;return{radius:a,scale:l,x:p,y:v,centerX:h,centerY:s}},Zw={show(e,t){var C;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((C=t==null?void 0:t._ripple)!=null&&C.enabled))return;const i=document.createElement("span"),r=document.createElement("span");i.appendChild(r),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:a,scale:l,x:h,y:s,centerX:p,centerY:v}=fse(e,t,n),x=`${a*2}px`;r.className="v-ripple__animation",r.style.width=x,r.style.height=x,t.appendChild(i);const T=window.getComputedStyle(t);T&&T.position==="static"&&(t.style.position="relative",t.dataset.previousPosition="static"),r.classList.add("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--visible"),B4(r,`translate(${h}, ${s}) scale3d(${l},${l},${l})`),r.dataset.activated=String(performance.now()),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.classList.remove("v-ripple__animation--enter"),r.classList.add("v-ripple__animation--in"),B4(r,`translate(${p}, ${v}) scale3d(1,1,1)`)})})},hide(e){var a;if(!((a=e==null?void 0:e._ripple)!=null&&a.enabled))return;const t=e.getElementsByClassName("v-ripple__animation");if(t.length===0)return;const n=Array.from(t).findLast(l=>!l.dataset.isHiding);if(n)n.dataset.isHiding="true";else return;const i=performance.now()-Number(n.dataset.activated),r=Math.max(250-i,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var h;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((h=n.parentNode)==null?void 0:h.parentNode)===e&&e.removeChild(n.parentNode)},300)},r)}};function C2(e){return typeof e>"u"||!!e}function eb(e){const t={},n=e.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||e[rI])){if(e[rI]=!0,sI(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||E2(e),n._ripple.class&&(t.class=n._ripple.class),sI(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{Zw.show(e,n,t)},n._ripple.showTimer=window.setTimeout(()=>{var i;(i=n==null?void 0:n._ripple)!=null&&i.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},hse)}else Zw.show(e,n,t)}}function F4(e){e[rI]=!0}function tc(e){const t=e.currentTarget;if(t!=null&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),e.type==="touchend"&&t._ripple.showTimerCommit){t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,t._ripple.showTimer=window.setTimeout(()=>{tc(e)});return}window.setTimeout(()=>{t._ripple&&(t._ripple.touched=!1)}),Zw.hide(t)}}function k2(e){const t=e.currentTarget;t!=null&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let tb=!1;function z4(e,t){!tb&&t.includes(e.key)&&(tb=!0,eb(e))}function I2(e){tb=!1,tc(e)}function A2(e){tb&&(tb=!1,tc(e))}function P2(e,t,n){const{value:i,modifiers:r}=t,a=C2(i);a||Zw.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=a,e._ripple.centered=r.center,e._ripple.circle=r.circle;const l=K0(i)?i:{};l.class&&(e._ripple.class=l.class);const h=l.keys??["Enter","Space"];if(e._ripple.keyDownHandler=s=>z4(s,h),a&&!n){if(r.stop){e.addEventListener("touchstart",F4,{passive:!0}),e.addEventListener("mousedown",F4);return}e.addEventListener("touchstart",eb,{passive:!0}),e.addEventListener("touchend",tc,{passive:!0}),e.addEventListener("touchmove",k2,{passive:!0}),e.addEventListener("touchcancel",tc),e.addEventListener("mousedown",eb),e.addEventListener("mouseup",tc),e.addEventListener("mouseleave",tc),e.addEventListener("keydown",s=>z4(s,h)),e.addEventListener("keyup",I2),e.addEventListener("blur",A2),e.addEventListener("dragstart",tc,{passive:!0})}else!a&&n&&M2(e)}function M2(e){var t;e.removeEventListener("mousedown",eb),e.removeEventListener("touchstart",eb),e.removeEventListener("touchend",tc),e.removeEventListener("touchmove",k2),e.removeEventListener("touchcancel",tc),e.removeEventListener("mouseup",tc),e.removeEventListener("mouseleave",tc),(t=e._ripple)!=null&&t.keyDownHandler&&e.removeEventListener("keydown",e._ripple.keyDownHandler),e.removeEventListener("keyup",I2),e.removeEventListener("dragstart",tc),e.removeEventListener("blur",A2)}function mse(e,t){P2(e,t,!1)}function pse(e){M2(e),delete e._ripple}function gse(e,t){if(t.value===t.oldValue)return;const n=C2(t.oldValue);P2(e,t,n)}const Ga={mounted:mse,unmounted:pse,updated:gse},tS=ut({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:zP},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Pn,appendIcon:Pn,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,spaced:String,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},...ul(),...Tn(),...Es(),...Fs(),...Xs(),...mg(),...eS(),...Lh(),...I_(),...Hr(),...qb(),...gd(),...ii({tag:"button"}),...Li(),...$c({variant:"elevated"})},"VBtn"),gi=Lt()({name:"VBtn",props:tS(),emits:{"group:selected":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=nr(e),{borderClasses:a}=zl(e),{densityClasses:l}=Ka(e),{dimensionStyles:h}=zs(e),{elevationClasses:s}=To(e),{loaderClasses:p}=Wb(e),{locationStyles:v}=pg(e),{positionClasses:x}=A_(e),{roundedClasses:T}=is(e),{sizeClasses:C,sizeStyles:I}=k_(e),P=am(e,e.symbol,!1),D=Gb(e,n),F=me(()=>{var te;return e.active!==void 0?e.active:D.isRouterLink.value?(te=D.isActive)==null?void 0:te.value:P==null?void 0:P.isSelected.value}),V=He(()=>F.value?e.activeColor??e.color:e.color),H=me(()=>{var Z,ee;return{color:(P==null?void 0:P.isSelected.value)&&(!D.isLink.value||((Z=D.isActive)==null?void 0:Z.value))||!P||((ee=D.isActive)==null?void 0:ee.value)?V.value??e.baseColor:e.baseColor,variant:e.variant}}),{colorClasses:q,colorStyles:K,variantClasses:ie}=hg(H),X=me(()=>(P==null?void 0:P.disabled.value)||e.disabled),$=He(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),G=me(()=>{if(!(e.value===void 0||typeof e.value=="symbol"))return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function j(te){var Z;X.value||D.isLink.value&&(te.metaKey||te.ctrlKey||te.shiftKey||te.button!==0||n.target==="_blank")||(D.isRouterLink.value?(Z=D.navigate)==null||Z.call(D,te):P==null||P.toggle())}return dse(D,P==null?void 0:P.select),Ut(()=>{const te=D.isLink.value?"a":e.tag,Z=!!(e.prependIcon||i.prepend),ee=!!(e.appendIcon||i.append),be=!!(e.icon&&e.icon!==!0);return Oi(ue(te,Dt(D.linkProps,{type:te==="a"?void 0:"button",class:["v-btn",P==null?void 0:P.selectedClass.value,{"v-btn--active":F.value,"v-btn--block":e.block,"v-btn--disabled":X.value,"v-btn--elevated":$.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--readonly":e.readonly,"v-btn--slim":e.slim,"v-btn--stacked":e.stacked},e.spaced?["v-btn--spaced",`v-btn--spaced-${e.spaced}`]:[],r.value,a.value,q.value,l.value,s.value,p.value,x.value,T.value,C.value,ie.value,e.class],style:[K.value,h.value,v.value,I.value,e.style],"aria-busy":e.loading?!0:void 0,disabled:X.value&&te!=="a"||void 0,tabindex:e.loading||e.readonly?-1:void 0,onClick:j,value:G.value}),{default:()=>{var Ie;return[vm(!0,"v-btn"),!e.icon&&Z&&B("span",{key:"prepend",class:"v-btn__prepend"},[i.prepend?ue(di,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},i.prepend):ue(Di,{key:"prepend-icon",icon:e.prependIcon},null)]),B("span",{class:"v-btn__content","data-no-activator":""},[!i.default&&be?ue(Di,{key:"content-icon",icon:e.icon},null):ue(di,{key:"content-defaults",disabled:!be,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var Ve;return[((Ve=i.default)==null?void 0:Ve.call(i))??tn(e.text)]}})]),!e.icon&&ee&&B("span",{key:"append",class:"v-btn__append"},[i.append?ue(di,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},i.append):ue(Di,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&B("span",{key:"loader",class:"v-btn__loader"},[((Ie=i.loader)==null?void 0:Ie.call(i))??ue(Yp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,width:"2"},null)])]}}),[[Ga,!X.value&&e.ripple,"",{center:!!e.icon}]])}),{group:P}}}),vse=ut({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function _se(e,t){return{iconSize:me(()=>{const i=new Map(e.iconSizes),r=e.iconSize??t()??"default";return i.has(r)?i.get(r):r})}}const yse=["success","info","warning","error"],bse=ut({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Pn,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>yse.includes(e)},...Tn(),...Es(),...Fs(),...Xs(),...vse(),...Lh(),...I_(),...Hr(),...ii(),...Li(),...$c({variant:"flat"})},"VAlert"),D2=Lt()({name:"VAlert",props:bse(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Dn(e,"modelValue"),a=He(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:l}=_se(e,()=>e.prominent?44:void 0),{themeClasses:h}=nr(e),{colorClasses:s,colorStyles:p,variantClasses:v}=hg(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:x}=Ka(e),{dimensionStyles:T}=zs(e),{elevationClasses:C}=To(e),{locationStyles:I}=pg(e),{positionClasses:P}=A_(e),{roundedClasses:D}=is(e),{textColorClasses:F,textColorStyles:V}=jo(()=>e.borderColor),{t:H}=pr(),q=He(()=>({"aria-label":H(e.closeLabel),onClick(K){r.value=!1,n("click:close",K)}}));return()=>{const K=!!(i.prepend||a.value),ie=!!(i.title||e.title),X=!!(i.close||e.closable),$={density:e.density,icon:a.value,size:e.iconSize||e.prominent?l.value:void 0};return r.value&&ue(e.tag,{class:Tt(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},h.value,s.value,x.value,C.value,P.value,D.value,v.value,e.class]),style:Yt([p.value,T.value,I.value,e.style]),role:"alert"},{default:()=>{var G,j;return[vm(!1,"v-alert"),e.border&&B("div",{key:"border",class:Tt(["v-alert__border",F.value]),style:Yt(V.value)},null),K&&B("div",{key:"prepend",class:"v-alert__prepend"},[i.prepend?ue(di,{key:"prepend-defaults",disabled:!a.value,defaults:{VIcon:{...$}}},i.prepend):ue(Di,Dt({key:"prepend-icon"},$),null)]),B("div",{class:"v-alert__content"},[ie&&ue(x2,{key:"title"},{default:()=>{var te;return[((te=i.title)==null?void 0:te.call(i))??e.title]}}),((G=i.text)==null?void 0:G.call(i))??e.text,(j=i.default)==null?void 0:j.call(i)]),i.append&&B("div",{key:"append",class:"v-alert__append"},[i.append()]),X&&B("div",{key:"close",class:"v-alert__close"},[i.close?ue(di,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var te;return[(te=i.close)==null?void 0:te.call(i,{props:q.value})]}}):ue(gi,Dt({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},q.value),null)])]}})}}});function xse(e){return{aspectStyles:me(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const L2=ut({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Tn(),...Fs()},"VResponsive"),oI=Lt()({name:"VResponsive",props:L2(),setup(e,t){let{slots:n}=t;const{aspectStyles:i}=xse(e),{dimensionStyles:r}=zs(e);return Ut(()=>{var a;return B("div",{class:Tt(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:Yt([r.value,e.style])},[B("div",{class:"v-responsive__sizer",style:Yt(i.value)},null),(a=n.additional)==null?void 0:a.call(n),n.default&&B("div",{class:Tt(["v-responsive__content",e.contentClass])},[n.default()])])}),{}}}),Rh=ut({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),$a=(e,t)=>{let{slots:n}=t;const{transition:i,disabled:r,group:a,...l}=e,{component:h=a?hA:Ol,...s}=K0(i)?i:{};let p;return K0(i)?p=Dt(s,Bne({disabled:r,group:a}),l):p=Dt({name:r||!i?"":i},l),Ih(h,p,n)};function wse(e,t){if(!wP)return;const n=t.modifiers||{},i=t.value,{handler:r,options:a}=typeof i=="object"?i:{handler:i,options:{}},l=new IntersectionObserver(function(){var x;let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const p=(x=e._observe)==null?void 0:x[t.instance.$.uid];if(!p)return;const v=h.some(T=>T.isIntersecting);r&&(!n.quiet||p.init)&&(!n.once||v||p.init)&&r(v,h,s),v&&n.once?R2(e,t):p.init=!0},a);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:l},l.observe(e)}function R2(e,t){var i;const n=(i=e._observe)==null?void 0:i[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const _u={mounted:wse,unmounted:R2},O2=ut({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...L2(),...Tn(),...Hr(),...Rh()},"VImg"),Eh=Lt()({name:"VImg",directives:{vIntersect:_u},props:O2(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color),{roundedClasses:l}=is(e),h=Ss("VImg"),s=nn(""),p=it(),v=nn(e.eager?"loading":"idle"),x=nn(),T=nn(),C=me(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),I=me(()=>C.value.aspect||x.value/T.value||0);Zt(()=>e.src,()=>{P(v.value!=="idle")}),Zt(I,(Z,ee)=>{!Z&&ee&&p.value&&q(p.value)}),y_(()=>P());function P(Z){if(!(e.eager&&Z)&&!(wP&&!Z&&!e.eager)){if(v.value="loading",C.value.lazySrc){const ee=new Image;ee.src=C.value.lazySrc,q(ee,null)}C.value.src&&Gn(()=>{var ee;n("loadstart",((ee=p.value)==null?void 0:ee.currentSrc)||C.value.src),setTimeout(()=>{var be;if(!h.isUnmounted)if((be=p.value)!=null&&be.complete){if(p.value.naturalWidth||F(),v.value==="error")return;I.value||q(p.value,null),v.value==="loading"&&D()}else I.value||q(p.value),V()})})}}function D(){var Z;h.isUnmounted||(V(),q(p.value),v.value="loaded",n("load",((Z=p.value)==null?void 0:Z.currentSrc)||C.value.src))}function F(){var Z;h.isUnmounted||(v.value="error",n("error",((Z=p.value)==null?void 0:Z.currentSrc)||C.value.src))}function V(){const Z=p.value;Z&&(s.value=Z.currentSrc||Z.src)}let H=-1;jr(()=>{clearTimeout(H)});function q(Z){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const be=()=>{if(clearTimeout(H),h.isUnmounted)return;const{naturalHeight:Ie,naturalWidth:Ve}=Z;Ie||Ve?(x.value=Ve,T.value=Ie):!Z.complete&&v.value==="loading"&&ee!=null?H=window.setTimeout(be,ee):(Z.currentSrc.endsWith(".svg")||Z.currentSrc.startsWith("data:image/svg+xml"))&&(x.value=1,T.value=1)};be()}const K=He(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),ie=()=>{var be;if(!C.value.src||v.value==="idle")return null;const Z=B("img",{class:Tt(["v-img__img",K.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:C.value.src,srcset:C.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:p,onLoad:D,onError:F},null),ee=(be=i.sources)==null?void 0:be.call(i);return ue($a,{transition:e.transition,appear:!0},{default:()=>[Oi(ee?B("picture",{class:"v-img__picture"},[ee,Z]):Z,[[bu,v.value==="loaded"]])]})},X=()=>ue($a,{transition:e.transition},{default:()=>[C.value.lazySrc&&v.value!=="loaded"&&B("img",{class:Tt(["v-img__img","v-img__img--preload",K.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:C.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),$=()=>i.placeholder?ue($a,{transition:e.transition,appear:!0},{default:()=>[(v.value==="loading"||v.value==="error"&&!i.error)&&B("div",{class:"v-img__placeholder"},[i.placeholder()])]}):null,G=()=>i.error?ue($a,{transition:e.transition,appear:!0},{default:()=>[v.value==="error"&&B("div",{class:"v-img__error"},[i.error()])]}):null,j=()=>e.gradient?B("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,te=nn(!1);{const Z=Zt(I,ee=>{ee&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{te.value=!0})}),Z())})}return Ut(()=>{const Z=oI.filterProps(e);return Oi(ue(oI,Dt({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!te.value},r.value,l.value,e.class],style:[{width:vn(e.width==="auto"?x.value:e.width)},a.value,e.style]},Z,{aspectRatio:I.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>B(ln,null,[ue(ie,null,null),ue(X,null,null),ue(j,null,null),ue($,null,null),ue(G,null,null)]),default:i.default}),[[_u,{handler:P,options:e.options},null,{once:!0}]])}),{currentSrc:s,image:p,state:v,naturalWidth:x,naturalHeight:T}}}),Tse=ut({start:Boolean,end:Boolean,icon:Pn,image:String,text:String,...ul(),...Tn(),...Es(),...Hr(),...gd(),...ii(),...Li(),...$c({variant:"flat"})},"VAvatar"),dc=Lt()({name:"VAvatar",props:Tse(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{borderClasses:r}=zl(e),{colorClasses:a,colorStyles:l,variantClasses:h}=hg(e),{densityClasses:s}=Ka(e),{roundedClasses:p}=is(e),{sizeClasses:v,sizeStyles:x}=k_(e);return Ut(()=>ue(e.tag,{class:Tt(["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},i.value,r.value,a.value,s.value,p.value,v.value,h.value,e.class]),style:Yt([l.value,x.value,e.style])},{default:()=>[n.default?ue(di,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[n.default()]}):e.image?ue(Eh,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?ue(Di,{key:"icon",icon:e.icon},null):e.text,vm(!1,"v-avatar")]})),{}}}),Sse=ut({text:String,onClick:No(),...Tn(),...Li()},"VLabel"),P_=Lt()({name:"VLabel",props:Sse(),setup(e,t){let{slots:n}=t;return Ut(()=>{var i;return B("label",{class:Tt(["v-label",{"v-label--clickable":!!e.onClick},e.class]),style:Yt(e.style),onClick:e.onClick},[e.text,(i=n.default)==null?void 0:i.call(n)])}),{}}}),V2=Symbol.for("vuetify:selection-control-group"),NP=ut({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Pn,trueIcon:Pn,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:xo},...Tn(),...Es(),...Li()},"SelectionControlGroup"),Ese=ut({...NP({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),B2=Lt()({name:"VSelectionControlGroup",props:Ese(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),r=fa(),a=He(()=>e.id||`v-selection-control-group-${r}`),l=He(()=>e.name||a.value),h=new Set;return Or(V2,{modelValue:i,forceUpdate:()=>{h.forEach(s=>s())},onForceUpdate:s=>{h.add(s),lo(()=>{h.delete(s)})}}),ns({[e.defaultsTarget]:{color:He(()=>e.color),disabled:He(()=>e.disabled),density:He(()=>e.density),error:He(()=>e.error),inline:He(()=>e.inline),modelValue:i,multiple:He(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),name:l,falseIcon:He(()=>e.falseIcon),trueIcon:He(()=>e.trueIcon),readonly:He(()=>e.readonly),ripple:He(()=>e.ripple),type:He(()=>e.type),valueComparator:He(()=>e.valueComparator)}}),Ut(()=>{var s;return B("div",{class:Tt(["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class]),style:Yt(e.style),role:e.type==="radio"?"radiogroup":void 0},[(s=n.default)==null?void 0:s.call(n)])}),{}}}),nS=ut({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Tn(),...NP()},"VSelectionControl");function Cse(e){const t=ki(V2,void 0),{densityClasses:n}=Ka(e),i=Dn(e,"modelValue"),r=me(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=me(()=>e.falseValue!==void 0?e.falseValue:!1),l=me(()=>!!e.multiple||e.multiple==null&&Array.isArray(i.value)),h=me({get(){const C=t?t.modelValue.value:i.value;return l.value?Yr(C).some(I=>e.valueComparator(I,r.value)):e.valueComparator(C,r.value)},set(C){if(e.readonly)return;const I=C?r.value:a.value;let P=I;l.value&&(P=C?[...Yr(i.value),I]:Yr(i.value).filter(D=>!e.valueComparator(D,r.value))),t?t.modelValue.value=P:i.value=P}}),{textColorClasses:s,textColorStyles:p}=jo(()=>{if(!(e.error||e.disabled))return h.value?e.color:e.baseColor}),{backgroundColorClasses:v,backgroundColorStyles:x}=or(()=>h.value&&!e.error&&!e.disabled?e.color:e.baseColor),T=me(()=>h.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:r,falseValue:a,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,icon:T}}const lm=Lt()({name:"VSelectionControl",directives:{vRipple:Ga},inheritAttrs:!1,props:nS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{group:r,densityClasses:a,icon:l,model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,trueValue:T}=Cse(e),C=fa(),I=nn(!1),P=nn(!1),D=it(),F=He(()=>e.id||`input-${C}`),V=He(()=>!e.disabled&&!e.readonly);r==null||r.onForceUpdate(()=>{D.value&&(D.value.checked=h.value)});function H(X){V.value&&(I.value=!0,a_(X.target,":focus-visible")!==!1&&(P.value=!0))}function q(){I.value=!1,P.value=!1}function K(X){X.stopPropagation()}function ie(X){if(!V.value){D.value&&(D.value.checked=h.value);return}e.readonly&&r&&Gn(()=>r.forceUpdate()),h.value=X.target.checked}return Ut(()=>{var te,Z;const X=i.label?i.label({label:e.label,props:{for:F.value}}):e.label,[$,G]=gm(n),j=B("input",Dt({ref:D,checked:h.value,disabled:!!e.disabled,id:F.value,onBlur:q,onFocus:H,onInput:ie,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:T.value,name:e.name,"aria-checked":e.type==="checkbox"?h.value:void 0},G),null);return B("div",Dt({class:["v-selection-control",{"v-selection-control--dirty":h.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":I.value,"v-selection-control--focus-visible":P.value,"v-selection-control--inline":e.inline},a.value,e.class]},$,{style:e.style}),[B("div",{class:Tt(["v-selection-control__wrapper",s.value]),style:Yt(p.value)},[(te=i.default)==null?void 0:te.call(i,{backgroundColorClasses:v,backgroundColorStyles:x}),Oi(B("div",{class:Tt(["v-selection-control__input"])},[((Z=i.input)==null?void 0:Z.call(i,{model:h,textColorClasses:s,textColorStyles:p,backgroundColorClasses:v,backgroundColorStyles:x,inputNode:j,icon:l.value,props:{onFocus:H,onBlur:q,id:F.value}}))??B(ln,null,[l.value&&ue(Di,{key:"icon",icon:l.value},null),j])]),[[Ga,!e.disabled&&!e.readonly&&e.ripple,null,{center:!0,circle:!0}]])]),X&&ue(P_,{for:F.value,onClick:K},{default:()=>[X]})])}),{isFocused:I,input:D}}}),F2=ut({indeterminate:Boolean,indeterminateIcon:{type:Pn,default:"$checkboxIndeterminate"},...nS({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),hd=Lt()({name:"VCheckboxBtn",props:F2(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"indeterminate"),r=Dn(e,"modelValue");function a(s){i.value&&(i.value=!1)}const l=He(()=>i.value?e.indeterminateIcon:e.falseIcon),h=He(()=>i.value?e.indeterminateIcon:e.trueIcon);return Ut(()=>{const s=mr(lm.filterProps(e),["modelValue"]);return ue(lm,Dt(s,{modelValue:r.value,"onUpdate:modelValue":[p=>r.value=p,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:l.value,trueIcon:h.value,"aria-checked":i.value?"mixed":void 0}),n)}),{}}});function z2(e){const{t}=pr();function n(i){let{name:r,color:a,...l}=i;const h={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[r],s=e[`onClick:${r}`];function p(x){x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),Fb(s,new PointerEvent("click",x)))}const v=s&&h?t(`$vuetify.input.${h}`,e.label??""):void 0;return ue(Di,Dt({icon:e[`${r}Icon`],"aria-label":v,onClick:s,onKeydown:p,color:a},l),null)}return{InputIcon:n}}const kse=ut({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function fc(e,t,n){return Lt()({name:e,props:kse({mode:n,origin:t}),setup(i,r){let{slots:a}=r;const l={onBeforeEnter(h){i.origin&&(h.style.transformOrigin=i.origin)},onLeave(h){if(i.leaveAbsolute){const{offsetTop:s,offsetLeft:p,offsetWidth:v,offsetHeight:x}=h;h._transitionInitialStyles={position:h.style.position,top:h.style.top,left:h.style.left,width:h.style.width,height:h.style.height},h.style.position="absolute",h.style.top=`${s}px`,h.style.left=`${p}px`,h.style.width=`${v}px`,h.style.height=`${x}px`}i.hideOnLeave&&h.style.setProperty("display","none","important")},onAfterLeave(h){if(i.leaveAbsolute&&(h!=null&&h._transitionInitialStyles)){const{position:s,top:p,left:v,width:x,height:T}=h._transitionInitialStyles;delete h._transitionInitialStyles,h.style.position=s||"",h.style.top=p||"",h.style.left=v||"",h.style.width=x||"",h.style.height=T||""}}};return()=>{const h=i.group?hA:Ol;return Ih(h,{name:i.disabled?"":e,css:!i.disabled,...i.group?void 0:{mode:i.mode},...i.disabled?{}:l},a.default)}}})}function N2(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Lt()({name:e,props:{mode:{type:String,default:n},disabled:{type:Boolean,default:ud()},group:Boolean},setup(i,r){let{slots:a}=r;const l=i.group?hA:Ol;return()=>Ih(l,{name:i.disabled?"":e,css:!i.disabled,...i.disabled?{}:t},a.default)}})}function $2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",i=cl(`offset-${n}`);return{onBeforeEnter(l){l._parent=l.parentNode,l._initialStyle={transition:l.style.transition,overflow:l.style.overflow,[n]:l.style[n]}},onEnter(l){const h=l._initialStyle;if(!h)return;l.style.setProperty("transition","none","important"),l.style.overflow="hidden";const s=`${l[i]}px`;l.style[n]="0",l.offsetHeight,l.style.transition=h.transition,e&&l._parent&&l._parent.classList.add(e),requestAnimationFrame(()=>{l.style[n]=s})},onAfterEnter:a,onEnterCancelled:a,onLeave(l){l._initialStyle={transition:"",overflow:l.style.overflow,[n]:l.style[n]},l.style.overflow="hidden",l.style[n]=`${l[i]}px`,l.offsetHeight,requestAnimationFrame(()=>l.style[n]="0")},onAfterLeave:r,onLeaveCancelled:r};function r(l){e&&l._parent&&l._parent.classList.remove(e),a(l)}function a(l){if(!l._initialStyle)return;const h=l._initialStyle[n];l.style.overflow=l._initialStyle.overflow,h!=null&&(l.style[n]=h),delete l._initialStyle}}const Ise=ut({target:[Object,Array]},"v-dialog-transition"),TC=new WeakMap,iS=Lt()({name:"VDialogTransition",props:Ise(),setup(e,t){let{slots:n}=t;const i={onBeforeEnter(r){r.style.pointerEvents="none",r.style.visibility="hidden"},async onEnter(r,a){var T;await new Promise(C=>requestAnimationFrame(C)),await new Promise(C=>requestAnimationFrame(C)),r.style.visibility="";const l=$4(e.target,r),{x:h,y:s,sx:p,sy:v,speed:x}=l;if(TC.set(r,l),ud())sh(r,[{opacity:0},{}],{duration:125*x,easing:g4}).finished.then(()=>a());else{const C=sh(r,[{transform:`translate(${h}px, ${s}px) scale(${p}, ${v})`,opacity:0},{}],{duration:225*x,easing:g4});(T=N4(r))==null||T.forEach(I=>{sh(I,[{opacity:0},{opacity:0,offset:.33},{}],{duration:450*x,easing:X0})}),C.finished.then(()=>a())}},onAfterEnter(r){r.style.removeProperty("pointer-events")},onBeforeLeave(r){r.style.pointerEvents="none"},async onLeave(r,a){var T;await new Promise(C=>requestAnimationFrame(C));let l;!TC.has(r)||Array.isArray(e.target)||e.target.offsetParent||e.target.getClientRects().length?l=$4(e.target,r):l=TC.get(r);const{x:h,y:s,sx:p,sy:v,speed:x}=l;ud()?sh(r,[{},{opacity:0}],{duration:85*x,easing:v4}).finished.then(()=>a()):(sh(r,[{},{transform:`translate(${h}px, ${s}px) scale(${p}, ${v})`,opacity:0}],{duration:125*x,easing:v4}).finished.then(()=>a()),(T=N4(r))==null||T.forEach(I=>{sh(I,[{},{opacity:0,offset:.2},{opacity:0}],{duration:250*x,easing:X0})}))},onAfterLeave(r){r.style.removeProperty("pointer-events")}};return()=>e.target?ue(Ol,Dt({name:"dialog-transition"},i,{css:!1}),n):ue(Ol,{name:"dialog-transition"},n)}});function N4(e){var n;const t=(n=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return t&&[...t]}function $4(e,t){const n=GN(e),i=kP(t),[r,a]=getComputedStyle(t).transformOrigin.split(" ").map(F=>parseFloat(F)),[l,h]=getComputedStyle(t).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=n.left+n.width/2;l==="left"||h==="left"?s-=n.width/2:(l==="right"||h==="right")&&(s+=n.width/2);let p=n.top+n.height/2;l==="top"||h==="top"?p-=n.height/2:(l==="bottom"||h==="bottom")&&(p+=n.height/2);const v=n.width/i.width,x=n.height/i.height,T=Math.max(1,v,x),C=v/T||0,I=x/T||0,P=i.width*i.height/(window.innerWidth*window.innerHeight),D=P>.12?Math.min(1.5,(P-.12)*10+1):1;return{x:s-(r+i.left),y:p-(a+i.top),sx:C,sy:I,speed:D}}const Ase=fc("fab-transition","center center","out-in"),Pse=fc("dialog-bottom-transition"),Mse=fc("dialog-top-transition"),nb=fc("fade-transition"),$P=fc("scale-transition"),Dse=fc("scroll-x-transition"),Lse=fc("scroll-x-reverse-transition"),Rse=fc("scroll-y-transition"),Ose=fc("scroll-y-reverse-transition"),Vse=fc("slide-x-transition"),Bse=fc("slide-x-reverse-transition"),ib=fc("slide-y-transition"),Fse=fc("slide-y-reverse-transition"),rS=N2("expand-transition",$2()),UP=N2("expand-x-transition",$2("",!0)),zse=ut({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Tn(),...Rh({transition:{component:ib,leaveAbsolute:!0,group:!0}})},"VMessages"),U2=Lt()({name:"VMessages",props:zse(),setup(e,t){let{slots:n}=t;const i=me(()=>Yr(e.messages)),{textColorClasses:r,textColorStyles:a}=jo(()=>e.color);return Ut(()=>ue($a,{transition:e.transition,tag:"div",class:Tt(["v-messages",r.value,e.class]),style:Yt([a.value,e.style])},{default:()=>[e.active&&i.value.map((l,h)=>B("div",{class:"v-messages__message",key:`${h}-${i.value}`},[n.message?n.message({message:l}):l]))]})),{}}}),Kb=ut({focused:Boolean,"onUpdate:focused":No()},"focus");function Oh(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd();const n=Dn(e,"focused"),i=He(()=>({[`${t}--focused`]:n.value}));function r(){n.value=!0}function a(){n.value=!1}return{focusClasses:i,isFocused:n,focus:r,blur:a}}const j2=Symbol.for("vuetify:form"),Nse=ut({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function $se(e){const t=Dn(e,"modelValue"),n=He(()=>e.disabled),i=He(()=>e.readonly),r=nn(!1),a=it([]),l=it([]);async function h(){const v=[];let x=!0;l.value=[],r.value=!0;for(const T of a.value){const C=await T.validate();if(C.length>0&&(x=!1,v.push({id:T.id,errorMessages:C})),!x&&e.fastFail)break}return l.value=v,r.value=!1,{valid:x,errors:l.value}}function s(){a.value.forEach(v=>v.reset())}function p(){a.value.forEach(v=>v.resetValidation())}return Zt(a,()=>{let v=0,x=0;const T=[];for(const C of a.value)C.isValid===!1?(x++,T.push({id:C.id,errorMessages:C.errorMessages})):C.isValid===!0&&v++;l.value=T,t.value=x>0?!1:v===a.value.length?!0:null},{deep:!0,flush:"post"}),Or(j2,{register:v=>{let{id:x,vm:T,validate:C,reset:I,resetValidation:P}=v;a.value.some(D=>D.id===x),a.value.push({id:x,validate:C,reset:I,resetValidation:P,vm:nB(T),isValid:null,errorMessages:[]})},unregister:v=>{a.value=a.value.filter(x=>x.id!==v)},update:(v,x,T)=>{const C=a.value.find(I=>I.id===v);C&&(C.isValid=x,C.errorMessages=T)},isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validateOn:He(()=>e.validateOn)}),{errors:l,isDisabled:n,isReadonly:i,isValidating:r,isValid:t,items:a,validate:h,reset:s,resetValidation:p}}function M_(e){const t=ki(j2,null);return{...t,isReadonly:me(()=>!!((e==null?void 0:e.readonly)??(t==null?void 0:t.isReadonly.value))),isDisabled:me(()=>!!((e==null?void 0:e.disabled)??(t==null?void 0:t.isDisabled.value)))}}const Use=Symbol.for("vuetify:rules");function jse(e){const t=ki(Use,null);if(!e){if(!t)throw new Error("Could not find Vuetify rules injection");return t.aliases}return(t==null?void 0:t.resolve(e))??He(e)}const W2=ut({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Kb()},"validation");function H2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pd(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fa();const i=Dn(e,"modelValue"),r=me(()=>e.validationValue===void 0?i.value:e.validationValue),a=M_(e),l=jse(()=>e.rules),h=it([]),s=nn(!0),p=me(()=>!!(Yr(i.value===""?null:i.value).length||Yr(r.value===""?null:r.value).length)),v=me(()=>{var q;return(q=e.errorMessages)!=null&&q.length?Yr(e.errorMessages).concat(h.value).slice(0,Math.max(0,Number(e.maxErrors))):h.value}),x=me(()=>{var ie;let q=(e.validateOn??((ie=a.validateOn)==null?void 0:ie.value))||"input";q==="lazy"&&(q="input lazy"),q==="eager"&&(q="input eager");const K=new Set((q==null?void 0:q.split(" "))??[]);return{input:K.has("input"),blur:K.has("blur")||K.has("input")||K.has("invalid-input"),invalidInput:K.has("invalid-input"),lazy:K.has("lazy"),eager:K.has("eager")}}),T=me(()=>{var q;return e.error||(q=e.errorMessages)!=null&&q.length?!1:e.rules.length?s.value?h.value.length||x.value.lazy?null:!0:!h.value.length:!0}),C=nn(!1),I=me(()=>({[`${t}--error`]:T.value===!1,[`${t}--dirty`]:p.value,[`${t}--disabled`]:a.isDisabled.value,[`${t}--readonly`]:a.isReadonly.value})),P=Ss("validation"),D=me(()=>e.name??Ti(n));y_(()=>{var q;(q=a.register)==null||q.call(a,{id:D.value,vm:P,validate:H,reset:F,resetValidation:V})}),jr(()=>{var q;(q=a.unregister)==null||q.call(a,D.value)}),Dr(async()=>{var q;x.value.lazy||await H(!x.value.eager),(q=a.update)==null||q.call(a,D.value,T.value,v.value)}),ua(()=>x.value.input||x.value.invalidInput&&T.value===!1,()=>{Zt(r,()=>{if(r.value!=null)H();else if(e.focused){const q=Zt(()=>e.focused,K=>{K||H(),q()})}})}),ua(()=>x.value.blur,()=>{Zt(()=>e.focused,q=>{q||H()})}),Zt([T,v],()=>{var q;(q=a.update)==null||q.call(a,D.value,T.value,v.value)});async function F(){i.value=null,await Gn(),await V()}async function V(){s.value=!0,x.value.lazy?h.value=[]:await H(!x.value.eager)}async function H(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const K=[];C.value=!0;for(const ie of l.value){if(K.length>=Number(e.maxErrors??1))break;const $=await(typeof ie=="function"?ie:()=>ie)(r.value);if($!==!0){if($!==!1&&typeof $!="string"){console.warn(`${$} is not a valid value. Rule functions must return boolean true or a string.`);continue}K.push($||"")}}return h.value=K,C.value=!1,s.value=q,h.value}return{errorMessages:v,isDirty:p,isDisabled:a.isDisabled,isReadonly:a.isReadonly,isPristine:s,isValid:T,isValidating:C,reset:F,resetValidation:V,validate:H,validationClasses:I}}const Vh=ut({id:String,appendIcon:Pn,baseColor:String,centerAffix:{type:Boolean,default:!0},color:String,glow:Boolean,iconColor:[Boolean,String],prependIcon:Pn,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":No(),"onClick:append":No(),...Tn(),...Es(),...Bl(Fs(),["maxWidth","minWidth","width"]),...Li(),...W2()},"VInput"),ha=Lt()({name:"VInput",props:{...Vh()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const{densityClasses:a}=Ka(e),{dimensionStyles:l}=zs(e),{themeClasses:h}=nr(e),{rtlClasses:s}=Ks(),{InputIcon:p}=z2(e),v=fa(),x=me(()=>e.id||`input-${v}`),{errorMessages:T,isDirty:C,isDisabled:I,isReadonly:P,isPristine:D,isValid:F,isValidating:V,reset:H,resetValidation:q,validate:K,validationClasses:ie}=H2(e,"v-input",x),X=me(()=>{var be;return(be=e.errorMessages)!=null&&be.length||!D.value&&T.value.length?T.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages}),$=He(()=>X.value.length>0),G=He(()=>!e.hideDetails||e.hideDetails==="auto"&&($.value||!!i.details)),j=me(()=>G.value?`${x.value}-messages`:void 0),te=me(()=>({id:x,messagesId:j,isDirty:C,isDisabled:I,isReadonly:P,isPristine:D,isValid:F,isValidating:V,hasDetails:G,reset:H,resetValidation:q,validate:K})),Z=He(()=>e.error||e.disabled?void 0:e.focused?e.color:e.baseColor),ee=He(()=>{if(e.iconColor)return e.iconColor===!0?Z.value:e.iconColor});return Ut(()=>{var Ve,Ke,Xe,Pe;const be=!!(i.prepend||e.prependIcon),Ie=!!(i.append||e.appendIcon);return B("div",{class:Tt(["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--focused":e.focused,"v-input--glow":e.glow,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,h.value,s.value,ie.value,e.class]),style:Yt([l.value,e.style])},[be&&B("div",{key:"prepend",class:"v-input__prepend"},[(Ve=i.prepend)==null?void 0:Ve.call(i,te.value),e.prependIcon&&ue(p,{key:"prepend-icon",name:"prepend",color:ee.value},null)]),i.default&&B("div",{class:"v-input__control"},[(Ke=i.default)==null?void 0:Ke.call(i,te.value)]),Ie&&B("div",{key:"append",class:"v-input__append"},[e.appendIcon&&ue(p,{key:"append-icon",name:"append",color:ee.value},null),(Xe=i.append)==null?void 0:Xe.call(i,te.value)]),G.value&&B("div",{id:j.value,class:"v-input__details",role:"alert","aria-live":"polite"},[ue(U2,{active:$.value,messages:X.value},{message:i.message}),(Pe=i.details)==null?void 0:Pe.call(i,te.value)])])}),{reset:H,resetValidation:q,validate:K,isValid:F,errorMessages:T}}}),SC=Symbol("Forwarded refs");function EC(e,t){let n=e;for(;n;){const i=Reflect.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function So(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e[SC]=n,new Proxy(e,{get(r,a){if(Reflect.has(r,a))return Reflect.get(r,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const l of n)if(l.value&&Reflect.has(l.value,a)){const h=Reflect.get(l.value,a);return typeof h=="function"?h.bind(l.value):h}}},has(r,a){if(Reflect.has(r,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const l of n)if(l.value&&Reflect.has(l.value,a))return!0;return!1},set(r,a,l){if(Reflect.has(r,a))return Reflect.set(r,a,l);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const h of n)if(h.value&&Reflect.has(h.value,a))return Reflect.set(h.value,a,l);return!1},getOwnPropertyDescriptor(r,a){var h;const l=Reflect.getOwnPropertyDescriptor(r,a);if(l)return l;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const s of n){if(!s.value)continue;const p=EC(s.value,a)??("_"in s.value?EC((h=s.value._)==null?void 0:h.setupState,a):void 0);if(p)return p}for(const s of n){const p=s.value&&s.value[SC];if(!p)continue;const v=p.slice();for(;v.length;){const x=v.shift(),T=EC(x.value,a);if(T)return T;const C=x.value&&x.value[SC];C&&v.push(...C)}}}}})}const Wse=ut({...Vh(),...mr(F2(),["inline"])},"VCheckbox"),Hse=Lt()({name:"VCheckbox",inheritAttrs:!1,props:Wse(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Dn(e,"modelValue"),{isFocused:a,focus:l,blur:h}=Oh(e),s=it(),p=fa();return Ut(()=>{const[v,x]=gm(n),T=ha.filterProps(e),C=hd.filterProps(e);return ue(ha,Dt({ref:s,class:["v-checkbox",e.class]},v,T,{modelValue:r.value,"onUpdate:modelValue":I=>r.value=I,id:e.id||`checkbox-${p}`,focused:a.value,style:e.style}),{...i,default:I=>{let{id:P,messagesId:D,isDisabled:F,isReadonly:V,isValid:H}=I;return ue(hd,Dt(C,{id:P.value,"aria-describedby":D.value,disabled:F.value,readonly:V.value},x,{error:H.value===!1,modelValue:r.value,"onUpdate:modelValue":q=>r.value=q,onFocus:l,onBlur:h}),i)}})}),So({},s)}});function Gse(e){let{selectedElement:t,containerElement:n,isRtl:i,isHorizontal:r}=e;const a=rb(r,n),l=G2(r,i,n),h=rb(r,t),s=q2(r,t),p=h*.4;return l>s?s-p:l+a<s+h?s-a+h+p:l}function qse(e){let{selectedElement:t,containerElement:n,isHorizontal:i}=e;const r=rb(i,n),a=q2(i,t),l=rb(i,t);return a-r/2+l/2}function U4(e,t){const n=e?"scrollWidth":"scrollHeight";return(t==null?void 0:t[n])||0}function Kse(e,t){const n=e?"clientWidth":"clientHeight";return(t==null?void 0:t[n])||0}function G2(e,t,n){if(!n)return 0;const{scrollLeft:i,offsetWidth:r,scrollWidth:a}=n;return e?t?a-r+i:i:n.scrollTop}function rb(e,t){const n=e?"offsetWidth":"offsetHeight";return(t==null?void 0:t[n])||0}function q2(e,t){const n=e?"offsetLeft":"offsetTop";return(t==null?void 0:t[n])||0}const jP=Symbol.for("vuetify:v-slide-group"),WP=ut({centerActive:Boolean,scrollToActive:{type:Boolean,default:!0},contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:jP},nextIcon:{type:Pn,default:"$next"},prevIcon:{type:Pn,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Tn(),...cg({mobile:null}),...ii(),...fg({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),sb=Lt()({name:"VSlideGroup",props:WP(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:i}=Ks(),{displayClasses:r,mobile:a}=Fl(e),l=_m(e,e.symbol),h=nn(!1),s=nn(0),p=nn(0),v=nn(0),x=me(()=>e.direction==="horizontal"),{resizeRef:T,contentRect:C}=Nc(),{resizeRef:I,contentRect:P}=Nc(),D=gre(),F=me(()=>({container:T.el,duration:200,easing:"easeOutQuart"})),V=me(()=>l.selected.value.length?l.items.value.findIndex(We=>We.id===l.selected.value[0]):-1),H=me(()=>l.selected.value.length?l.items.value.findIndex(We=>We.id===l.selected.value[l.selected.value.length-1]):-1);if(Zi){let We=-1;Zt(()=>[l.selected.value,C.value,P.value,x.value],()=>{cancelAnimationFrame(We),We=requestAnimationFrame(()=>{if(C.value&&P.value){const Ze=x.value?"width":"height";p.value=C.value[Ze],v.value=P.value[Ze],h.value=p.value+1<v.value}if(e.scrollToActive&&V.value>=0&&I.el){const Ze=I.el.children[H.value];K(Ze,e.centerActive)}})})}const q=nn(!1);function K(We,Ze){let ct=0;Ze?ct=qse({containerElement:T.el,isHorizontal:x.value,selectedElement:We}):ct=Gse({containerElement:T.el,isHorizontal:x.value,isRtl:i.value,selectedElement:We}),ie(ct)}function ie(We){if(!Zi||!T.el)return;const Ze=rb(x.value,T.el),ct=G2(x.value,i.value,T.el);if(!(U4(x.value,T.el)<=Ze||Math.abs(We-ct)<16)){if(x.value&&i.value&&T.el){const{scrollWidth:Nt,offsetWidth:ot}=T.el;We=Nt-ot-We}x.value?D.horizontal(We,F.value):D(We,F.value)}}function X(We){const{scrollTop:Ze,scrollLeft:ct}=We.target;s.value=x.value?ct:Ze}function $(We){if(q.value=!0,!(!h.value||!I.el)){for(const Ze of We.composedPath())for(const ct of I.el.children)if(ct===Ze){K(ct);return}}}function G(We){q.value=!1}let j=!1;function te(We){var Ze;!j&&!q.value&&!(We.relatedTarget&&((Ze=I.el)!=null&&Ze.contains(We.relatedTarget)))&&Ie(),j=!1}function Z(){j=!0}function ee(We){if(!I.el)return;function Ze(ct){We.preventDefault(),Ie(ct)}x.value?We.key==="ArrowRight"?Ze(i.value?"prev":"next"):We.key==="ArrowLeft"&&Ze(i.value?"next":"prev"):We.key==="ArrowDown"?Ze("next"):We.key==="ArrowUp"&&Ze("prev"),We.key==="Home"?Ze("first"):We.key==="End"&&Ze("last")}function be(We,Ze){if(!We)return;let ct=We;do ct=ct==null?void 0:ct[Ze==="next"?"nextElementSibling":"previousElementSibling"];while(ct!=null&&ct.hasAttribute("disabled"));return ct}function Ie(We){if(!I.el)return;let Ze;if(!We)Ze=o_(I.el)[0];else if(We==="next"){if(Ze=be(I.el.querySelector(":focus"),We),!Ze)return Ie("first")}else if(We==="prev"){if(Ze=be(I.el.querySelector(":focus"),We),!Ze)return Ie("last")}else We==="first"?(Ze=I.el.firstElementChild,Ze!=null&&Ze.hasAttribute("disabled")&&(Ze=be(Ze,"next"))):We==="last"&&(Ze=I.el.lastElementChild,Ze!=null&&Ze.hasAttribute("disabled")&&(Ze=be(Ze,"prev")));Ze&&Ze.focus({preventScroll:!0})}function Ve(We){const Ze=x.value&&i.value?-1:1,ct=(We==="prev"?-Ze:Ze)*p.value;let kt=s.value+ct;if(x.value&&i.value&&T.el){const{scrollWidth:Nt,offsetWidth:ot}=T.el;kt+=Nt-ot}ie(kt)}const Ke=me(()=>({next:l.next,prev:l.prev,select:l.select,isSelected:l.isSelected})),Xe=me(()=>h.value||Math.abs(s.value)>0),Pe=me(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return Xe.value;case"mobile":return a.value||Xe.value;default:return!a.value&&Xe.value}}),$e=me(()=>Math.abs(s.value)>1),Ee=me(()=>{if(!T.value||!Xe.value)return!1;const We=U4(x.value,T.el),Ze=Kse(x.value,T.el);return We-Ze-Math.abs(s.value)>1});return Ut(()=>ue(e.tag,{class:Tt(["v-slide-group",{"v-slide-group--vertical":!x.value,"v-slide-group--has-affixes":Pe.value,"v-slide-group--is-overflowing":h.value},r.value,e.class]),style:Yt(e.style),tabindex:q.value||l.selected.value.length?-1:0,onFocus:te},{default:()=>{var We,Ze,ct;return[Pe.value&&B("div",{key:"prev",class:Tt(["v-slide-group__prev",{"v-slide-group__prev--disabled":!$e.value}]),onMousedown:Z,onClick:()=>$e.value&&Ve("prev")},[((We=n.prev)==null?void 0:We.call(n,Ke.value))??ue(nb,null,{default:()=>[ue(Di,{icon:i.value?e.nextIcon:e.prevIcon},null)]})]),B("div",{key:"container",ref:T,class:Tt(["v-slide-group__container",e.contentClass]),onScroll:X},[B("div",{ref:I,class:"v-slide-group__content",onFocusin:$,onFocusout:G,onKeydown:ee},[(Ze=n.default)==null?void 0:Ze.call(n,Ke.value)])]),Pe.value&&B("div",{key:"next",class:Tt(["v-slide-group__next",{"v-slide-group__next--disabled":!Ee.value}]),onMousedown:Z,onClick:()=>Ee.value&&Ve("next")},[((ct=n.next)==null?void 0:ct.call(n,Ke.value))??ue(nb,null,{default:()=>[ue(Di,{icon:i.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:l.selected,scrollTo:Ve,scrollOffset:s,focus:Ie,hasPrev:$e,hasNext:Ee}}}),K2=Symbol.for("vuetify:v-chip-group"),Xse=ut({baseColor:String,column:Boolean,filter:Boolean,valueComparator:{type:Function,default:xo},...WP({scrollToActive:!1}),...Tn(),...fg({selectedClass:"v-chip--selected"}),...ii(),...Li(),...$c({variant:"tonal"})},"VChipGroup"),Yse=Lt()({name:"VChipGroup",props:Xse(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=_m(e,K2);return ns({VChip:{baseColor:He(()=>e.baseColor),color:He(()=>e.color),disabled:He(()=>e.disabled),filter:He(()=>e.filter),variant:He(()=>e.variant)}}),Ut(()=>{const p=sb.filterProps(e);return ue(sb,Dt(p,{class:["v-chip-group",{"v-chip-group--column":e.column},i.value,e.class],style:e.style}),{default:()=>{var v;return[(v=n.default)==null?void 0:v.call(n,{isSelected:r,select:a,next:l,prev:h,selected:s.value})]}})}),{}}}),Zse=ut({activeClass:String,appendAvatar:String,appendIcon:Pn,baseColor:String,closable:Boolean,closeIcon:{type:Pn,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:Pn,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Pn,ripple:{type:[Boolean,Object],default:!0},text:{type:[String,Number,Boolean],default:void 0},modelValue:{type:Boolean,default:!0},onClick:No(),onClickOnce:No(),...ul(),...Tn(),...Es(),...Xs(),...mg(),...Hr(),...qb(),...gd(),...ii({tag:"span"}),...Li(),...$c({variant:"tonal"})},"VChip"),Ls=Lt()({name:"VChip",directives:{vRipple:Ga},props:Zse(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=pr(),{borderClasses:l}=zl(e),{densityClasses:h}=Ka(e),{elevationClasses:s}=To(e),{roundedClasses:p}=is(e),{sizeClasses:v}=k_(e),{themeClasses:x}=nr(e),T=Dn(e,"modelValue"),C=am(e,K2,!1),I=am(e,jP,!1),P=Gb(e,n),D=He(()=>e.link!==!1&&P.isLink.value),F=me(()=>!e.disabled&&e.link!==!1&&(!!C||e.link||P.isClickable.value)),V=He(()=>({"aria-label":a(e.closeLabel),disabled:e.disabled,onClick($){$.preventDefault(),$.stopPropagation(),T.value=!1,i("click:close",$)}}));Zt(T,$=>{$?(C==null||C.register(),I==null||I.register()):(C==null||C.unregister(),I==null||I.unregister())});const{colorClasses:H,colorStyles:q,variantClasses:K}=hg(()=>({color:!C||C.isSelected.value?e.color??e.baseColor:e.baseColor,variant:e.variant}));function ie($){var G;i("click",$),F.value&&((G=P.navigate)==null||G.call(P,$),C==null||C.toggle())}function X($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),ie($))}return()=>{var Ie;const $=P.isLink.value?"a":e.tag,G=!!(e.appendIcon||e.appendAvatar),j=!!(G||r.append),te=!!(r.close||e.closable),Z=!!(r.filter||e.filter)&&C,ee=!!(e.prependIcon||e.prependAvatar),be=!!(ee||r.prepend);return T.value&&Oi(ue($,Dt(P.linkProps,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":F.value,"v-chip--filter":Z,"v-chip--pill":e.pill,[`${e.activeClass}`]:e.activeClass&&((Ie=P.isActive)==null?void 0:Ie.value)},x.value,l.value,H.value,h.value,s.value,p.value,v.value,K.value,C==null?void 0:C.selectedClass.value,e.class],style:[q.value,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:F.value?0:void 0,onClick:ie,onKeydown:F.value&&!D.value&&X}),{default:()=>{var Ve;return[vm(F.value,"v-chip"),Z&&ue(UP,{key:"filter"},{default:()=>[Oi(B("div",{class:"v-chip__filter"},[r.filter?ue(di,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},r.filter):ue(Di,{key:"filter-icon",icon:e.filterIcon},null)]),[[bu,C.isSelected.value]])]}),be&&B("div",{key:"prepend",class:"v-chip__prepend"},[r.prepend?ue(di,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},r.prepend):B(ln,null,[e.prependIcon&&ue(Di,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&ue(dc,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),B("div",{class:"v-chip__content","data-no-activator":""},[((Ve=r.default)==null?void 0:Ve.call(r,{isSelected:C==null?void 0:C.isSelected.value,selectedClass:C==null?void 0:C.selectedClass.value,select:C==null?void 0:C.select,toggle:C==null?void 0:C.toggle,value:C==null?void 0:C.value.value,disabled:e.disabled}))??tn(e.text)]),j&&B("div",{key:"append",class:"v-chip__append"},[r.append?ue(di,{key:"append-defaults",disabled:!G,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},r.append):B(ln,null,[e.appendIcon&&ue(Di,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&ue(dc,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),te&&B("button",Dt({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},V.value),[r.close?ue(di,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},r.close):ue(Di,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ga,F.value&&e.ripple,null]])}}}),Jse=ut({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...Tn(),...Li()},"VDivider"),ac=Lt()({name:"VDivider",props:Jse(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=nr(e),{textColorClasses:a,textColorStyles:l}=jo(()=>e.color),h=me(()=>{const s={};return e.length&&(s[e.vertical?"height":"width"]=vn(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=vn(e.thickness)),s});return Ut(()=>{const s=B("hr",{class:Tt([{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},r.value,a.value,e.class]),style:Yt([h.value,l.value,{"--v-border-opacity":e.opacity},e.style]),"aria-orientation":!n.role||n.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null);return i.default?B("div",{class:Tt(["v-divider__wrapper",{"v-divider__wrapper--vertical":e.vertical,"v-divider__wrapper--inset":e.inset}])},[s,B("div",{class:"v-divider__content"},[i.default()]),s]):s}),{}}}),aI=Symbol.for("vuetify:list");function X2(){let{filterable:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{filterable:!1};const t=ki(aI,{filterable:!1,hasPrepend:nn(!1),updateHasPrepend:()=>null}),n={filterable:t.filterable||e,hasPrepend:nn(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return Or(aI,n),t}function Y2(){return ki(aI,null)}const HP=e=>{const t={activate:n=>{let{id:i,value:r,activated:a}=n;return i=jn(i),e&&!r&&a.size===1&&a.has(i)||(r?a.add(i):a.delete(i)),a},in:(n,i,r)=>{let a=new Set;if(n!=null)for(const l of Yr(n))a=t.activate({id:l,value:!0,activated:new Set(a),children:i,parents:r});return a},out:n=>Array.from(n)};return t},Z2=e=>{const t=HP(e);return{activate:i=>{let{activated:r,id:a,...l}=i;a=jn(a);const h=r.has(a)?new Set([a]):new Set;return t.activate({...l,id:a,activated:h})},in:(i,r,a)=>{let l=new Set;if(i!=null){const h=Yr(i);h.length&&(l=t.in(h.slice(0,1),r,a))}return l},out:(i,r,a)=>t.out(i,r,a)}},Qse=e=>{const t=HP(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=jn(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},eoe=e=>{const t=Z2(e);return{activate:i=>{let{id:r,activated:a,children:l,...h}=i;return r=jn(r),l.has(r)?a:t.activate({id:r,activated:a,children:l,...h})},in:t.in,out:t.out}},toe={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){const a=new Set;a.add(t);let l=r.get(t);for(;l!=null;)a.add(l),l=r.get(l);return a}else return i.delete(t),i},select:()=>null},J2={open:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(n){let a=r.get(t);for(i.add(t);a!=null&&a!==t;)i.add(a),a=r.get(a);return i}else i.delete(t);return i},select:()=>null},noe={open:J2.open,select:e=>{let{id:t,value:n,opened:i,parents:r}=e;if(!n)return i;const a=[];let l=r.get(t);for(;l!=null;)a.push(l),l=r.get(l);return new Set(a)}},GP=e=>{const t={select:n=>{let{id:i,value:r,selected:a}=n;if(i=jn(i),e&&!r){const l=Array.from(a.entries()).reduce((h,s)=>{let[p,v]=s;return v==="on"&&h.push(p),h},[]);if(l.length===1&&l[0]===i)return a}return a.set(i,r?"on":"off"),a},in:(n,i,r,a)=>{const l=new Map;for(const h of n||[])t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:n=>{const i=[];for(const[r,a]of n.entries())a==="on"&&i.push(r);return i}};return t},Q2=e=>{const t=GP(e);return{select:i=>{let{selected:r,id:a,...l}=i;a=jn(a);const h=r.has(a)?new Map([[a,r.get(a)]]):new Map;return t.select({...l,id:a,selected:h})},in:(i,r,a,l)=>i!=null&&i.length?t.in(i.slice(0,1),r,a,l):new Map,out:(i,r,a)=>t.out(i,r,a)}},ioe=e=>{const t=GP(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=jn(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},roe=e=>{const t=Q2(e);return{select:i=>{let{id:r,selected:a,children:l,...h}=i;return r=jn(r),l.has(r)?a:t.select({id:r,selected:a,children:l,...h})},in:t.in,out:t.out}},e8=e=>{const t={select:n=>{let{id:i,value:r,selected:a,children:l,parents:h,disabled:s}=n;i=jn(i);const p=new Map(a),v=[i];for(;v.length;){const T=v.shift();s.has(T)||a.set(jn(T),r?"on":"off"),l.has(T)&&v.push(...l.get(T))}let x=jn(h.get(i));for(;x;){let T=!0,C=!0;for(const I of l.get(x)){const P=jn(I);if(!s.has(P)&&(a.get(P)!=="on"&&(T=!1),a.has(P)&&a.get(P)!=="off"&&(C=!1),!T&&!C))break}a.set(x,T?"on":C?"off":"indeterminate"),x=jn(h.get(x))}return e&&!r&&Array.from(a.entries()).reduce((C,I)=>{let[P,D]=I;return D==="on"&&C.push(P),C},[]).length===0?p:a},in:(n,i,r,a)=>{let l=new Map;for(const h of n||[])l=t.select({id:h,value:!0,selected:l,children:i,parents:r,disabled:a});return l},out:(n,i)=>{const r=[];for(const[a,l]of n.entries())l==="on"&&!i.has(a)&&r.push(a);return r}};return t},soe=e=>{const t=e8(e);return{select:t.select,in:t.in,out:(i,r,a)=>{const l=[];for(const[h,s]of i.entries())if(s==="on"){if(a.has(h)){const p=a.get(h);if(i.get(p)==="on")continue}l.push(h)}return l}}},ob=Symbol.for("vuetify:nested"),t8={id:nn(),root:{register:()=>null,unregister:()=>null,children:it(new Map),parents:it(new Map),disabled:it(new Set),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:it(!1),selectable:it(!1),opened:it(new Set),activated:it(new Set),selected:it(new Map),selectedValues:it([]),getPath:()=>[]}},ooe=ut({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),aoe=e=>{let t=!1;const n=nn(new Map),i=nn(new Map),r=nn(new Set),a=Dn(e,"opened",e.opened,D=>new Set(Array.isArray(D)?D.map(F=>jn(F)):D),D=>[...D.values()]),l=me(()=>{if(typeof e.activeStrategy=="object")return e.activeStrategy;if(typeof e.activeStrategy=="function")return e.activeStrategy(e.mandatory);switch(e.activeStrategy){case"leaf":return Qse(e.mandatory);case"single-leaf":return eoe(e.mandatory);case"independent":return HP(e.mandatory);case"single-independent":default:return Z2(e.mandatory)}}),h=me(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;if(typeof e.selectStrategy=="function")return e.selectStrategy(e.mandatory);switch(e.selectStrategy){case"single-leaf":return roe(e.mandatory);case"leaf":return ioe(e.mandatory);case"independent":return GP(e.mandatory);case"single-independent":return Q2(e.mandatory);case"trunk":return soe(e.mandatory);case"classic":default:return e8(e.mandatory)}}),s=me(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return noe;case"single":return toe;case"multiple":default:return J2}}),p=Dn(e,"activated",e.activated,D=>l.value.in(D,n.value,i.value),D=>l.value.out(D,n.value,i.value)),v=Dn(e,"selected",e.selected,D=>h.value.in(D,n.value,i.value,r.value),D=>h.value.out(D,n.value,i.value));jr(()=>{t=!0});function x(D){const F=[];let V=jn(D);for(;V!==void 0;)F.unshift(V),V=i.value.get(V);return F}const T=Ss("nested"),C=new Set,I=yie(()=>{Gn(()=>{n.value=new Map(n.value),i.value=new Map(i.value)})},100),P={id:nn(),root:{opened:a,activatable:He(()=>e.activatable),selectable:He(()=>e.selectable),activated:p,selected:v,selectedValues:me(()=>{const D=[];for(const[F,V]of v.value.entries())V==="on"&&D.push(F);return D}),register:(D,F,V,H)=>{if(C.has(D)){x(D).map(String).join(" -> "),x(F).concat(D).map(String).join(" -> ");return}else C.add(D);F&&D!==F&&i.value.set(D,F),V&&r.value.add(D),H&&n.value.set(D,[]),F!=null&&n.value.set(F,[...n.value.get(F)||[],D]),I()},unregister:D=>{if(t)return;C.delete(D),n.value.delete(D),r.value.delete(D);const F=i.value.get(D);if(F){const V=n.value.get(F)??[];n.value.set(F,V.filter(H=>H!==D))}i.value.delete(D),I()},open:(D,F,V)=>{T.emit("click:open",{id:D,value:F,path:x(D),event:V});const H=s.value.open({id:D,value:F,opened:new Set(a.value),children:n.value,parents:i.value,event:V});H&&(a.value=H)},openOnSelect:(D,F,V)=>{const H=s.value.select({id:D,value:F,selected:new Map(v.value),opened:new Set(a.value),children:n.value,parents:i.value,event:V});H&&(a.value=H)},select:(D,F,V)=>{T.emit("click:select",{id:D,value:F,path:x(D),event:V});const H=h.value.select({id:D,value:F,selected:new Map(v.value),children:n.value,parents:i.value,disabled:r.value,event:V});H&&(v.value=H),P.root.openOnSelect(D,F,V)},activate:(D,F,V)=>{if(!e.activatable)return P.root.select(D,!0,V);T.emit("click:activate",{id:D,value:F,path:x(D),event:V});const H=l.value.activate({id:D,value:F,activated:new Set(p.value),children:n.value,parents:i.value,event:V});if(H.size!==p.value.size)p.value=H;else{for(const q of H)if(!p.value.has(q)){p.value=H;return}for(const q of p.value)if(!H.has(q)){p.value=H;return}}},children:n,parents:i,disabled:r,getPath:x}};return Or(ob,P),P.root},n8=(e,t,n)=>{const i=ki(ob,t8),r=Symbol("nested item"),a=me(()=>{const h=jn(ja(e));return h!==void 0?h:r}),l={...i,id:a,open:(h,s)=>i.root.open(a.value,h,s),openOnSelect:(h,s)=>i.root.openOnSelect(a.value,h,s),isOpen:me(()=>i.root.opened.value.has(a.value)),parent:me(()=>i.root.parents.value.get(a.value)),activate:(h,s)=>i.root.activate(a.value,h,s),isActivated:me(()=>i.root.activated.value.has(a.value)),select:(h,s)=>i.root.select(a.value,h,s),isSelected:me(()=>i.root.selected.value.get(a.value)==="on"),isIndeterminate:me(()=>i.root.selected.value.get(a.value)==="indeterminate"),isLeaf:me(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return y_(()=>{i.isGroupActivator||Gn(()=>{i.root.register(a.value,i.id.value,ja(t),n)})}),jr(()=>{i.isGroupActivator||i.root.unregister(a.value)}),Zt(a,(h,s)=>{i.isGroupActivator||(i.root.unregister(s),Gn(()=>{i.root.register(h,i.id.value,ja(t),n)}))}),n&&Or(ob,l),l},loe=()=>{const e=ki(ob,t8);Or(ob,{...e,isGroupActivator:!0})};function gg(){const e=nn(!1);return Dr(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:He(()=>e.value?void 0:{transition:"none !important"}),isBooted:$p(e)}}const coe=hc({name:"VListGroupActivator",setup(e,t){let{slots:n}=t;return loe(),()=>{var i;return(i=n.default)==null?void 0:i.call(n)}}}),i8=ut({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Pn,default:"$collapse"},disabled:Boolean,expandIcon:{type:Pn,default:"$expand"},rawId:[String,Number],prependIcon:Pn,appendIcon:Pn,fluid:Boolean,subgroup:Boolean,title:String,value:null,...Tn(),...ii()},"VListGroup"),ab=Lt()({name:"VListGroup",props:i8(),setup(e,t){let{slots:n}=t;const{isOpen:i,open:r,id:a}=n8(()=>e.value,()=>e.disabled,!0),l=me(()=>`v-list-group--id-${String(e.rawId??a.value)}`),h=Y2(),{isBooted:s}=gg();function p(C){var I;["INPUT","TEXTAREA"].includes((I=C.target)==null?void 0:I.tagName)||r(!i.value,C)}const v=me(()=>({onClick:p,class:"v-list-group__header",id:l.value})),x=me(()=>i.value?e.collapseIcon:e.expandIcon),T=me(()=>({VListItem:{activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&x.value,appendIcon:e.appendIcon||!e.subgroup&&x.value,title:e.title,value:e.value}}));return Ut(()=>ue(e.tag,{class:Tt(["v-list-group",{"v-list-group--prepend":h==null?void 0:h.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":i.value},e.class]),style:Yt(e.style)},{default:()=>[n.activator&&ue(di,{defaults:T.value},{default:()=>[ue(coe,null,{default:()=>[n.activator({props:v.value,isOpen:i.value})]})]}),ue($a,{transition:{component:rS},disabled:!s.value},{default:()=>{var C;return[Oi(B("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[(C=n.default)==null?void 0:C.call(n)]),[[bu,i.value]])]}})]})),{isOpen:i}}}),uoe=ut({opacity:[Number,String],...Tn(),...ii()},"VListItemSubtitle"),r8=Lt()({name:"VListItemSubtitle",props:uoe(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(e.tag,{class:Tt(["v-list-item-subtitle",e.class]),style:Yt([{"--v-list-item-subtitle-opacity":e.opacity},e.style])},n)),{}}}),s8=Dh("v-list-item-title"),o8=ut({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Pn,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Pn,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},value:null,onClick:No(),onClickOnce:No(),...ul(),...Tn(),...Es(),...Fs(),...Xs(),...Hr(),...qb(),...ii(),...Li(),...$c({variant:"text"})},"VListItem"),yu=Lt()({name:"VListItem",directives:{vRipple:Ga},props:o8(),emits:{click:e=>!0},setup(e,t){let{attrs:n,slots:i,emit:r}=t;const a=Gb(e,n),l=me(()=>e.value===void 0?a.href.value:e.value),{activate:h,isActivated:s,select:p,isOpen:v,isSelected:x,isIndeterminate:T,isGroupActivator:C,root:I,parent:P,openOnSelect:D,id:F}=n8(l,()=>e.disabled,!1),V=Y2(),H=me(()=>{var ot;return e.active!==!1&&(e.active||((ot=a.isActive)==null?void 0:ot.value)||(I.activatable.value?s.value:x.value))}),q=He(()=>e.link!==!1&&a.isLink.value),K=me(()=>!!V&&(I.selectable.value||I.activatable.value||e.value!=null)),ie=me(()=>!e.disabled&&e.link!==!1&&(e.link||a.isClickable.value||K.value)),X=me(()=>V?q.value?"link":K.value?"option":"listitem":void 0),$=me(()=>{if(K.value)return I.activatable.value?s.value:I.selectable.value?x.value:H.value}),G=He(()=>e.rounded||e.nav),j=He(()=>e.color??e.activeColor),te=He(()=>({color:H.value?j.value??e.baseColor:e.baseColor,variant:e.variant}));Zt(()=>{var ot;return(ot=a.isActive)==null?void 0:ot.value},ot=>{ot&&Z()}),y_(()=>{var ot;(ot=a.isActive)!=null&&ot.value&&Gn(()=>Z())});function Z(){P.value!=null&&I.open(P.value,!0),D(!0)}const{themeClasses:ee}=nr(e),{borderClasses:be}=zl(e),{colorClasses:Ie,colorStyles:Ve,variantClasses:Ke}=hg(te),{densityClasses:Xe}=Ka(e),{dimensionStyles:Pe}=zs(e),{elevationClasses:$e}=To(e),{roundedClasses:Ee}=is(G),We=He(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),Ze=He(()=>e.ripple!==void 0&&e.ripple&&(V!=null&&V.filterable)?{keys:["Enter"]}:e.ripple),ct=me(()=>({isActive:H.value,select:p,isOpen:v.value,isSelected:x.value,isIndeterminate:T.value}));function kt(ot){var dt,Je;r("click",ot),!["INPUT","TEXTAREA"].includes((dt=ot.target)==null?void 0:dt.tagName)&&ie.value&&((Je=a.navigate)==null||Je.call(a,ot),!C&&(I.activatable.value?h(!s.value,ot):(I.selectable.value||e.value!=null&&!q.value)&&p(!x.value,ot)))}function Nt(ot){const dt=ot.target;["INPUT","TEXTAREA"].includes(dt.tagName)||(ot.key==="Enter"||ot.key===" "&&!(V!=null&&V.filterable))&&(ot.preventDefault(),ot.stopPropagation(),ot.target.dispatchEvent(new MouseEvent("click",ot)))}return Ut(()=>{const ot=q.value?"a":e.tag,dt=i.title||e.title!=null,Je=i.subtitle||e.subtitle!=null,yt=!!(e.appendAvatar||e.appendIcon),Ne=!!(yt||i.append),le=!!(e.prependAvatar||e.prependIcon),we=!!(le||i.prepend);return V==null||V.updateHasPrepend(we),e.activeColor&&RN("active-color",["color","base-color"]),Oi(ue(ot,Dt(a.linkProps,{class:["v-list-item",{"v-list-item--active":H.value,"v-list-item--disabled":e.disabled,"v-list-item--link":ie.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&(V==null?void 0:V.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&H.value},ee.value,be.value,Ie.value,Xe.value,$e.value,We.value,Ee.value,Ke.value,e.class],style:[Ve.value,Pe.value,e.style],tabindex:ie.value?V?-2:0:void 0,"aria-selected":$.value,role:X.value,onClick:kt,onKeydown:ie.value&&!q.value&&Nt}),{default:()=>{var _e;return[vm(ie.value||H.value,"v-list-item"),we&&B("div",{key:"prepend",class:"v-list-item__prepend"},[i.prepend?ue(di,{key:"prepend-defaults",disabled:!le,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var fe;return[(fe=i.prepend)==null?void 0:fe.call(i,ct.value)]}}):B(ln,null,[e.prependAvatar&&ue(dc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ue(Di,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),B("div",{class:"v-list-item__spacer"},null)]),B("div",{class:"v-list-item__content","data-no-activator":""},[dt&&ue(s8,{key:"title"},{default:()=>{var fe;return[((fe=i.title)==null?void 0:fe.call(i,{title:e.title}))??tn(e.title)]}}),Je&&ue(r8,{key:"subtitle"},{default:()=>{var fe;return[((fe=i.subtitle)==null?void 0:fe.call(i,{subtitle:e.subtitle}))??tn(e.subtitle)]}}),(_e=i.default)==null?void 0:_e.call(i,ct.value)]),Ne&&B("div",{key:"append",class:"v-list-item__append"},[i.append?ue(di,{key:"append-defaults",disabled:!yt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var fe;return[(fe=i.append)==null?void 0:fe.call(i,ct.value)]}}):B(ln,null,[e.appendIcon&&ue(Di,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ue(dc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),B("div",{class:"v-list-item__spacer"},null)])]}}),[[Ga,ie.value&&Ze.value]])}),{activate:h,isActivated:s,isGroupActivator:C,isSelected:x,list:V,select:p,root:I,id:F,link:a}}}),doe=ut({color:String,inset:Boolean,sticky:Boolean,title:String,...Tn(),...ii()},"VListSubheader"),D_=Lt()({name:"VListSubheader",props:doe(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=jo(()=>e.color);return Ut(()=>{const a=!!(n.default||e.title);return ue(e.tag,{class:Tt(["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value,e.class]),style:Yt([{textColorStyles:r},e.style])},{default:()=>{var l;return[a&&B("div",{class:"v-list-subheader__text"},[((l=n.default)==null?void 0:l.call(n))??e.title])]}})}),{}}}),hoe=ut({items:Array,returnObject:Boolean},"VListChildren"),a8=Lt()({name:"VListChildren",props:hoe(),setup(e,t){let{slots:n}=t;return X2(),()=>{var i,r;return((i=n.default)==null?void 0:i.call(n))??((r=e.items)==null?void 0:r.map(a=>{var T,C;let{children:l,props:h,type:s,raw:p}=a;if(s==="divider")return((T=n.divider)==null?void 0:T.call(n,{props:h}))??ue(ac,h,null);if(s==="subheader")return((C=n.subheader)==null?void 0:C.call(n,{props:h}))??ue(D_,h,null);const v={subtitle:n.subtitle?I=>{var P;return(P=n.subtitle)==null?void 0:P.call(n,{...I,item:p})}:void 0,prepend:n.prepend?I=>{var P;return(P=n.prepend)==null?void 0:P.call(n,{...I,item:p})}:void 0,append:n.append?I=>{var P;return(P=n.append)==null?void 0:P.call(n,{...I,item:p})}:void 0,title:n.title?I=>{var P;return(P=n.title)==null?void 0:P.call(n,{...I,item:p})}:void 0},x=ab.filterProps(h);return l?ue(ab,Dt(x,{value:e.returnObject?p:h==null?void 0:h.value,rawId:h==null?void 0:h.value}),{activator:I=>{let{props:P}=I;const D=Dt(h,P,{value:e.returnObject?p:h.value});return n.header?n.header({props:D}):ue(yu,D,v)},default:()=>ue(a8,{items:l,returnObject:e.returnObject},n)}):n.item?n.item({props:h}):ue(yu,Dt(h,{value:e.returnObject?p:h.value}),v)}))}}}),l8=ut({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},itemType:{type:[Boolean,String,Array,Function],default:"type"},returnObject:Boolean,valueComparator:Function},"list-items"),foe=new Set(["item","divider","subheader"]);function cu(e,t){const n=Rs(t,e.itemTitle,t),i=Rs(t,e.itemValue,n),r=Rs(t,e.itemChildren),a=e.itemProps===!0?typeof t=="object"&&t!=null&&!Array.isArray(t)?"children"in t?mr(t,["children"]):t:void 0:Rs(t,e.itemProps);let l=Rs(t,e.itemType,"item");foe.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:String(h.title??""),value:h.value,props:h,children:l==="item"&&Array.isArray(r)?c8(e,r):void 0,raw:t}}cu.neededProps=["itemTitle","itemValue","itemChildren","itemProps","itemType"];function c8(e,t){const n=Bl(e,cu.neededProps),i=[];for(const r of t)i.push(cu(n,r));return i}function qP(e){const t=me(()=>c8(e,e.items)),n=me(()=>t.value.some(h=>h.value===null)),i=nn(new Map),r=nn([]);Wr(()=>{const h=t.value,s=new Map,p=[];for(let v=0;v<h.length;v++){const x=h[v];if(om(x.value)||x.value===null){let T=s.get(x.value);T||(T=[],s.set(x.value,T)),T.push(x)}else p.push(x)}i.value=s,r.value=p});function a(h){const s=i.value,p=t.value,v=r.value,x=n.value,T=e.returnObject,C=!!e.valueComparator,I=e.valueComparator||xo,P=Bl(e,cu.neededProps),D=[];e:for(const F of h){if(!x&&F===null)continue;if(T&&typeof F=="string"){D.push(cu(P,F));continue}const V=s.get(F);if(C||!V){for(const H of C?p:v)if(I(F,H.value)){D.push(H);continue e}D.push(cu(P,F));continue}D.push(...V)}return D}function l(h){return e.returnObject?h.map(s=>{let{raw:p}=s;return p}):h.map(s=>{let{value:p}=s;return p})}return{items:t,transformIn:a,transformOut:l}}const moe=new Set(["item","divider","subheader"]);function poe(e,t){const n=om(t)?t:Rs(t,e.itemTitle),i=om(t)?t:Rs(t,e.itemValue,void 0),r=Rs(t,e.itemChildren),a=e.itemProps===!0?mr(t,["children"]):Rs(t,e.itemProps);let l=Rs(t,e.itemType,"item");moe.has(l)||(l="item");const h={title:n,value:i,...a};return{type:l,title:h.title,value:h.value,props:h,children:l==="item"&&r?u8(e,r):void 0,raw:t}}function u8(e,t){const n=[];for(const i of t)n.push(poe(e,i));return n}function d8(e){return{items:me(()=>u8(e,e.items))}}const h8=ut({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,filterable:Boolean,expandIcon:Pn,collapseIcon:Pn,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":No(),"onClick:select":No(),"onUpdate:opened":No(),...ooe({selectStrategy:"single-leaf",openStrategy:"list"}),...ul(),...Tn(),...Es(),...Fs(),...Xs(),...l8(),...Hr(),...ii(),...Li(),...$c({variant:"text"})},"VList"),d_=Lt()({name:"VList",props:h8(),emits:{"update:selected":e=>!0,"update:activated":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:activate":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n}=t;const{items:i}=d8(e),{themeClasses:r}=nr(e),{backgroundColorClasses:a,backgroundColorStyles:l}=or(()=>e.bgColor),{borderClasses:h}=zl(e),{densityClasses:s}=Ka(e),{dimensionStyles:p}=zs(e),{elevationClasses:v}=To(e),{roundedClasses:x}=is(e),{children:T,open:C,parents:I,select:P,getPath:D}=aoe(e),F=He(()=>e.lines?`v-list--${e.lines}-line`:void 0),V=He(()=>e.activeColor),H=He(()=>e.baseColor),q=He(()=>e.color),K=He(()=>e.selectable||e.activatable);X2({filterable:e.filterable}),ns({VListGroup:{activeColor:V,baseColor:H,color:q,expandIcon:He(()=>e.expandIcon),collapseIcon:He(()=>e.collapseIcon)},VListItem:{activeClass:He(()=>e.activeClass),activeColor:V,baseColor:H,color:q,density:He(()=>e.density),disabled:He(()=>e.disabled),lines:He(()=>e.lines),nav:He(()=>e.nav),slim:He(()=>e.slim),variant:He(()=>e.variant)}});const ie=nn(!1),X=it();function $(be){ie.value=!0}function G(be){ie.value=!1}function j(be){var Ie;!ie.value&&!(be.relatedTarget&&((Ie=X.value)!=null&&Ie.contains(be.relatedTarget)))&&ee()}function te(be){const Ie=be.target;if(!(!X.value||Ie.tagName==="INPUT"&&["Home","End"].includes(be.key)||Ie.tagName==="TEXTAREA")){if(be.key==="ArrowDown")ee("next");else if(be.key==="ArrowUp")ee("prev");else if(be.key==="Home")ee("first");else if(be.key==="End")ee("last");else return;be.preventDefault()}}function Z(be){ie.value=!0}function ee(be){if(X.value)return Vp(X.value,be)}return Ut(()=>ue(e.tag,{ref:X,class:Tt(["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav,"v-list--slim":e.slim},r.value,a.value,h.value,s.value,v.value,F.value,x.value,e.class]),style:Yt([l.value,p.value,e.style]),tabindex:e.disabled?-1:0,role:K.value?"listbox":"list","aria-activedescendant":void 0,onFocusin:$,onFocusout:G,onFocus:j,onKeydown:te,onMousedown:Z},{default:()=>[ue(a8,{items:i.value,returnObject:e.returnObject},n)]})),{open:C,select:P,focus:ee,children:T,parents:I,getPath:D}}}),goe=Dh("v-list-img"),voe=ut({start:Boolean,end:Boolean,...Tn(),...ii()},"VListItemAction"),KP=Lt()({name:"VListItemAction",props:voe(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(e.tag,{class:Tt(["v-list-item-action",{"v-list-item-action--start":e.start,"v-list-item-action--end":e.end},e.class]),style:Yt(e.style)},n)),{}}}),_oe=ut({start:Boolean,end:Boolean,...Tn(),...ii()},"VListItemMedia"),yoe=Lt()({name:"VListItemMedia",props:_oe(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(e.tag,{class:Tt(["v-list-item-media",{"v-list-item-media--start":e.start,"v-list-item-media--end":e.end},e.class]),style:Yt(e.style)},n)),{}}});function CC(e,t){return{x:e.x+t.x,y:e.y+t.y}}function boe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function j4(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:i}=e,r=i==="left"?0:i==="center"?t.width/2:i==="right"?t.width:i,a=n==="top"?0:n==="bottom"?t.height:n;return CC({x:r,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:i}=e,r=n==="left"?0:n==="right"?t.width:n,a=i==="top"?0:i==="center"?t.height/2:i==="bottom"?t.height:i;return CC({x:r,y:a},t)}return CC({x:t.width/2,y:t.height/2},t)}const f8={static:Toe,connected:Eoe},xoe=ut({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in f8},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array],stickToTarget:Boolean},"VOverlay-location-strategies");function woe(e,t){const n=it({}),i=it();Zi&&ua(()=>!!(t.isActive.value&&e.locationStrategy),h=>{var s,p;Zt(()=>e.locationStrategy,h),lo(()=>{window.removeEventListener("resize",r),visualViewport==null||visualViewport.removeEventListener("resize",a),visualViewport==null||visualViewport.removeEventListener("scroll",l),i.value=void 0}),window.addEventListener("resize",r,{passive:!0}),visualViewport==null||visualViewport.addEventListener("resize",a,{passive:!0}),visualViewport==null||visualViewport.addEventListener("scroll",l,{passive:!0}),typeof e.locationStrategy=="function"?i.value=(s=e.locationStrategy(t,e,n))==null?void 0:s.updateLocation:i.value=(p=f8[e.locationStrategy](t,e,n))==null?void 0:p.updateLocation});function r(h){var s;(s=i.value)==null||s.call(i,h)}function a(h){var s;(s=i.value)==null||s.call(i,h)}function l(h){var s;(s=i.value)==null||s.call(i,h)}return{contentStyles:n,updateLocation:i}}function Toe(){}function Soe(e,t){const n=kP(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function Eoe(e,t,n){(Array.isArray(e.target.value)||_ie(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:r,preferredOrigin:a}=CP(()=>{const F=Xk(t.location,e.isRtl.value),V=t.origin==="overlap"?F:t.origin==="auto"?_C(F):Xk(t.origin,e.isRtl.value);return F.side===V.side&&F.align===yC(V).align?{preferredAnchor:i4(F),preferredOrigin:i4(V)}:{preferredAnchor:F,preferredOrigin:V}}),[l,h,s,p]=["minWidth","minHeight","maxWidth","maxHeight"].map(F=>me(()=>{const V=parseFloat(t[F]);return isNaN(V)?1/0:V})),v=me(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const F=t.offset.split(" ").map(parseFloat);return F.length<2&&F.push(0),F}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let x=!1,T=-1;const C=new $N(4),I=new ResizeObserver(()=>{if(!x)return;if(requestAnimationFrame(V=>{V!==T&&C.clear(),requestAnimationFrame(H=>{T=H})}),C.isFull){const V=C.values();if(xo(V.at(-1),V.at(-3))&&!xo(V.at(-1),V.at(-2)))return}const F=D();F&&C.push(F.flipped)});let P=new Fc({x:0,y:0,width:0,height:0});Zt(e.target,(F,V)=>{V&&!Array.isArray(V)&&I.unobserve(V),Array.isArray(F)?xo(F,V)||D():F&&I.observe(F)},{immediate:!0}),Zt(e.contentEl,(F,V)=>{V&&I.unobserve(V),F&&I.observe(F)},{immediate:!0}),lo(()=>{I.disconnect()});function D(){if(x=!1,requestAnimationFrame(()=>x=!0),!e.target.value||!e.contentEl.value)return;(Array.isArray(e.target.value)||e.target.value.offsetParent||e.target.value.getClientRects().length)&&(P=GN(e.target.value));const F=Soe(e.contentEl.value,e.isRtl.value),V=qw(e.contentEl.value),H=t.stickToTarget?0:12;V.length||(V.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(F.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),F.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const q=V.reduce((ee,be)=>{const Ie=zne(be);return ee?new Fc({x:Math.max(ee.left,Ie.left),y:Math.max(ee.top,Ie.top),width:Math.min(ee.right,Ie.right)-Math.max(ee.left,Ie.left),height:Math.min(ee.bottom,Ie.bottom)-Math.max(ee.top,Ie.top)}):Ie},void 0);t.stickToTarget?(q.x+=Math.min(0,P.x),q.y+=Math.min(0,P.y),q.width=Math.max(q.width,P.x+P.width),q.height=Math.max(q.height,P.y+P.height)):(q.x+=H,q.y+=H,q.width-=H*2,q.height-=H*2);let K={anchor:r.value,origin:a.value};function ie(ee){const be=new Fc(F),Ie=j4(ee.anchor,P),Ve=j4(ee.origin,be);let{x:Ke,y:Xe}=boe(Ie,Ve);switch(ee.anchor.side){case"top":Xe-=v.value[0];break;case"bottom":Xe+=v.value[0];break;case"left":Ke-=v.value[0];break;case"right":Ke+=v.value[0];break}switch(ee.anchor.align){case"top":Xe-=v.value[1];break;case"bottom":Xe+=v.value[1];break;case"left":Ke-=v.value[1];break;case"right":Ke+=v.value[1];break}return be.x+=Ke,be.y+=Xe,be.width=Math.min(be.width,s.value),be.height=Math.min(be.height,p.value),{overflows:s4(be,q),x:Ke,y:Xe}}let X=0,$=0;const G={x:0,y:0},j={x:!1,y:!1};let te=-1;for(;!(te++>10);){const{x:ee,y:be,overflows:Ie}=ie(K);X+=ee,$+=be,F.x+=ee,F.y+=be;{const Ve=r4(K.anchor),Ke=Ie.x.before||Ie.x.after,Xe=Ie.y.before||Ie.y.after;let Pe=!1;if(["x","y"].forEach($e=>{if($e==="x"&&Ke&&!j.x||$e==="y"&&Xe&&!j.y){const Ee={anchor:{...K.anchor},origin:{...K.origin}},We=$e==="x"?Ve==="y"?yC:_C:Ve==="y"?_C:yC;Ee.anchor=We(Ee.anchor),Ee.origin=We(Ee.origin);const{overflows:Ze}=ie(Ee);(Ze[$e].before<=Ie[$e].before&&Ze[$e].after<=Ie[$e].after||Ze[$e].before+Ze[$e].after<(Ie[$e].before+Ie[$e].after)/2)&&(K=Ee,Pe=j[$e]=!0)}}),Pe)continue}Ie.x.before&&(X+=Ie.x.before,F.x+=Ie.x.before),Ie.x.after&&(X-=Ie.x.after,F.x-=Ie.x.after),Ie.y.before&&($+=Ie.y.before,F.y+=Ie.y.before),Ie.y.after&&($-=Ie.y.after,F.y-=Ie.y.after);{const Ve=s4(F,q);G.x=q.width-Ve.x.before-Ve.x.after,G.y=q.height-Ve.y.before-Ve.y.after,X+=Ve.x.before,F.x+=Ve.x.before,$+=Ve.y.before,F.y+=Ve.y.before}break}const Z=r4(K.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${K.anchor.side} ${K.anchor.align}`,transformOrigin:`${K.origin.side} ${K.origin.align}`,top:vn(kC($)),left:e.isRtl.value?void 0:vn(kC(X)),right:e.isRtl.value?vn(kC(-X)):void 0,minWidth:vn(Z==="y"?Math.min(l.value,P.width):l.value),maxWidth:vn(W4(kr(G.x,l.value===1/0?0:l.value,s.value))),maxHeight:vn(W4(kr(G.y,h.value===1/0?0:h.value,p.value)))}),{available:G,contentBox:F,flipped:j}}return Zt(()=>[r.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>D()),Gn(()=>{const F=D();if(!F)return;const{available:V,contentBox:H}=F;H.height>V.y&&requestAnimationFrame(()=>{D(),requestAnimationFrame(()=>{D()})})}),{updateLocation:D}}function kC(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function W4(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let lI=!0;const Jw=[];function Coe(e){!lI||Jw.length?(Jw.push(e),cI()):(lI=!1,e(),cI())}let H4=-1;function cI(){cancelAnimationFrame(H4),H4=requestAnimationFrame(()=>{const e=Jw.shift();e&&e(),Jw.length?cI():lI=!0})}const $1={none:null,close:Aoe,block:Poe,reposition:Moe},koe=ut({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in $1}},"VOverlay-scroll-strategies");function Ioe(e,t){if(!Zi)return;let n;Wr(async()=>{n==null||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=jv(),await new Promise(i=>setTimeout(i)),n.active&&n.run(()=>{var i;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):(i=$1[e.scrollStrategy])==null||i.call($1,t,e,n)}))}),lo(()=>{n==null||n.stop()})}function Aoe(e){function t(n){e.isActive.value=!1}m8(XP(e.target.value,e.contentEl.value),t)}function Poe(e,t){var h;const n=(h=e.root.value)==null?void 0:h.offsetParent,i=XP(e.target.value,e.contentEl.value),r=[...new Set([...qw(i,t.contained?n:void 0),...qw(e.contentEl.value,t.contained?n:void 0)])].filter(s=>!s.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,l=(s=>MP(s)&&s)(n||document.documentElement);l&&e.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((s,p)=>{s.style.setProperty("--v-body-scroll-x",vn(-s.scrollLeft)),s.style.setProperty("--v-body-scroll-y",vn(-s.scrollTop)),s!==document.documentElement&&s.style.setProperty("--v-scrollbar-offset",vn(a)),s.classList.add("v-overlay-scroll-blocked")}),lo(()=>{r.forEach((s,p)=>{const v=parseFloat(s.style.getPropertyValue("--v-body-scroll-x")),x=parseFloat(s.style.getPropertyValue("--v-body-scroll-y")),T=s.style.scrollBehavior;s.style.scrollBehavior="auto",s.style.removeProperty("--v-body-scroll-x"),s.style.removeProperty("--v-body-scroll-y"),s.style.removeProperty("--v-scrollbar-offset"),s.classList.remove("v-overlay-scroll-blocked"),s.scrollLeft=-v,s.scrollTop=-x,s.style.scrollBehavior=T}),l&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Moe(e,t,n){let i=!1,r=-1,a=-1;function l(h){Coe(()=>{var v,x;const s=performance.now();(x=(v=e.updateLocation).value)==null||x.call(v,h),i=(performance.now()-s)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?h=>h():requestIdleCallback)(()=>{n.run(()=>{m8(XP(e.target.value,e.contentEl.value),h=>{i?(cancelAnimationFrame(r),r=requestAnimationFrame(()=>{r=requestAnimationFrame(()=>{l(h)})})):l(h)})})}),lo(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(r)})}function XP(e,t){return Array.isArray(e)?document.elementsFromPoint(...e).find(n=>!(t!=null&&t.contains(n))):e??t}function m8(e,t){const n=[document,...qw(e)];n.forEach(i=>{i.addEventListener("scroll",t,{passive:!0})}),lo(()=>{n.forEach(i=>{i.removeEventListener("scroll",t)})})}const uI=Symbol.for("vuetify:v-menu"),YP=ut({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function ZP(e,t){let n=()=>{};function i(l,h){n==null||n();const s=Math.max((h==null?void 0:h.minDelay)??0,Number(l?e.openDelay:e.closeDelay));return new Promise(p=>{n=Lne(s,()=>{t==null||t(l),p(l)})})}function r(){return i(!0)}function a(l){return i(!1,l)}return{clearDelay:n,runOpenDelay:r,runCloseDelay:a}}const Doe=ut({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...YP()},"VOverlay-activator");function Loe(e,t){let{isActive:n,isTop:i,contentEl:r}=t;const a=Ss("useActivator"),l=it();let h=!1,s=!1,p=!0;const v=me(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),x=me(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!v.value),{runOpenDelay:T,runCloseDelay:C}=ZP(e,$=>{$===(e.openOnHover&&h||v.value&&s)&&!(e.openOnHover&&n.value&&!i.value)&&(n.value!==$&&(p=!0),n.value=$)}),I=it(),P={onClick:$=>{$.stopPropagation(),l.value=$.currentTarget||$.target,n.value||(I.value=[$.clientX,$.clientY]),n.value=!n.value},onMouseenter:$=>{h=!0,l.value=$.currentTarget||$.target,T()},onMouseleave:$=>{h=!1,C()},onFocus:$=>{a_($.target,":focus-visible")!==!1&&(s=!0,$.stopPropagation(),l.value=$.currentTarget||$.target,T())},onBlur:$=>{s=!1,$.stopPropagation(),C({minDelay:1})}},D=me(()=>{const $={};return x.value&&($.onClick=P.onClick),e.openOnHover&&($.onMouseenter=P.onMouseenter,$.onMouseleave=P.onMouseleave),v.value&&($.onFocus=P.onFocus,$.onBlur=P.onBlur),$}),F=me(()=>{const $={};if(e.openOnHover&&($.onMouseenter=()=>{h=!0,T()},$.onMouseleave=()=>{h=!1,C()}),v.value&&($.onFocusin=()=>{s=!0,T()},$.onFocusout=()=>{s=!1,C({minDelay:1})}),e.closeOnContentClick){const G=ki(uI,null);$.onClick=()=>{n.value=!1,G==null||G.closeParents()}}return $}),V=me(()=>{const $={};return e.openOnHover&&($.onMouseenter=()=>{p&&(h=!0,p=!1,T())},$.onMouseleave=()=>{h=!1,C()}),$});Zt(i,$=>{var G;$&&(e.openOnHover&&!h&&(!v.value||!s)||v.value&&!s&&(!e.openOnHover||!h))&&!((G=r.value)!=null&&G.contains(document.activeElement))&&(n.value=!1)}),Zt(n,$=>{$||setTimeout(()=>{I.value=void 0})},{flush:"post"});const H=Ww();Wr(()=>{H.value&&Gn(()=>{l.value=H.el})});const q=Ww(),K=me(()=>e.target==="cursor"&&I.value?I.value:q.value?q.el:p8(e.target,a)||l.value),ie=me(()=>Array.isArray(K.value)?void 0:K.value);let X;return Zt(()=>!!e.activator,$=>{$&&Zi?(X=jv(),X.run(()=>{Roe(e,a,{activatorEl:l,activatorEvents:D})})):X&&X.stop()},{flush:"post",immediate:!0}),lo(()=>{X==null||X.stop()}),{activatorEl:l,activatorRef:H,target:K,targetEl:ie,targetRef:q,activatorEvents:D,contentEvents:F,scrimEvents:V}}function Roe(e,t,n){let{activatorEl:i,activatorEvents:r}=n;Zt(()=>e.activator,(s,p)=>{if(p&&s!==p){const v=h(p);v&&l(v)}s&&Gn(()=>a())},{immediate:!0}),Zt(()=>e.activatorProps,()=>{a()}),lo(()=>{l()});function a(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&Nne(s,Dt(r.value,p))}function l(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;s&&$ne(s,Dt(r.value,p))}function h(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const p=p8(s,t);return i.value=(p==null?void 0:p.nodeType)===Node.ELEMENT_NODE?p:void 0,i.value}}function p8(e,t){var i,r;if(!e)return;let n;if(e==="parent"){let a=(r=(i=t==null?void 0:t.proxy)==null?void 0:i.$el)==null?void 0:r.parentNode;for(;a!=null&&a.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function g8(){if(!Zi)return nn(!1);const{ssr:e}=Fl();if(e){const t=nn(!1);return Dr(()=>{t.value=!0}),t}else return nn(!0)}const JP=ut({eager:Boolean},"lazy");function QP(e,t){const n=nn(!1),i=He(()=>n.value||e.eager||t.value);Zt(t,()=>n.value=!0);function r(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:i,onAfterLeave:r}}function vg(){const t=Ss("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const G4=Symbol.for("vuetify:stack"),My=oo([]);function Ooe(e,t,n){const i=Ss("useStack"),r=!n,a=ki(G4,void 0),l=oo({activeChildren:new Set});Or(G4,l);const h=nn(Number(ja(t)));ua(e,()=>{var x;const v=(x=My.at(-1))==null?void 0:x[1];h.value=v?v+10:Number(ja(t)),r&&My.push([i.uid,h.value]),a==null||a.activeChildren.add(i.uid),lo(()=>{if(r){const T=jn(My).findIndex(C=>C[0]===i.uid);My.splice(T,1)}a==null||a.activeChildren.delete(i.uid)})});const s=nn(!0);r&&Wr(()=>{var x;const v=((x=My.at(-1))==null?void 0:x[0])===i.uid;setTimeout(()=>s.value=v)});const p=He(()=>!l.activeChildren.size);return{globalTop:$p(s),localTop:p,stackStyles:He(()=>({zIndex:h.value}))}}function Voe(e){return{teleportTarget:me(()=>{const n=e();if(n===!0||!Zi)return;const i=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(i==null)return;let r=[...i.children].find(a=>a.matches(".v-overlay-container"));return r||(r=document.createElement("div"),r.className="v-overlay-container",i.appendChild(r)),r})}}function Boe(){return!0}function v8(e,t,n){if(!e||_8(e,n)===!1)return!1;const i=n2(t);if(typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&i.host===e.target)return!1;const r=(typeof n.value=="object"&&n.value.include||(()=>[]))();return r.push(t),!r.some(a=>a==null?void 0:a.contains(e.target))}function _8(e,t){return(typeof t.value=="object"&&t.value.closeConditional||Boe)(e)}function Foe(e,t,n){const i=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&v8(e,t,n)&&setTimeout(()=>{_8(e,n)&&i&&i(e)},0)}function q4(e,t){const n=n2(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const dI={mounted(e,t){const n=r=>Foe(r,e,t),i=r=>{e._clickOutside.lastMousedownWasOutside=v8(r,e,t)};q4(e,r=>{r.addEventListener("click",n,!0),r.addEventListener("mousedown",i,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:i}},beforeUnmount(e,t){e._clickOutside&&(q4(e,n=>{var a;if(!n||!((a=e._clickOutside)!=null&&a[t.instance.$.uid]))return;const{onClick:i,onMousedown:r}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",i,!0),n.removeEventListener("mousedown",r,!0)}),delete e._clickOutside[t.instance.$.uid])}};function zoe(e){const{modelValue:t,color:n,...i}=e;return ue(Ol,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&B("div",Dt({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},i),null)]})}const Xb=ut({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...Doe(),...Tn(),...Fs(),...JP(),...xoe(),...koe(),...Li(),...Rh()},"VOverlay"),fd=Lt()({name:"VOverlay",directives:{vClickOutside:dI},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Xb()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,keydown:e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:i,emit:r}=t;const a=Ss("VOverlay"),l=it(),h=it(),s=it(),p=Dn(e,"modelValue"),v=me({get:()=>p.value,set:ot=>{ot&&e.disabled||(p.value=ot)}}),{themeClasses:x}=nr(e),{rtlClasses:T,isRtl:C}=Ks(),{hasContent:I,onAfterLeave:P}=QP(e,v),D=or(()=>typeof e.scrim=="string"?e.scrim:null),{globalTop:F,localTop:V,stackStyles:H}=Ooe(v,()=>e.zIndex,e._disableGlobalStack),{activatorEl:q,activatorRef:K,target:ie,targetEl:X,targetRef:$,activatorEvents:G,contentEvents:j,scrimEvents:te}=Loe(e,{isActive:v,isTop:V,contentEl:s}),{teleportTarget:Z}=Voe(()=>{var Je,yt,Ne;const ot=e.attach||e.contained;if(ot)return ot;const dt=((Je=q==null?void 0:q.value)==null?void 0:Je.getRootNode())||((Ne=(yt=a.proxy)==null?void 0:yt.$el)==null?void 0:Ne.getRootNode());return dt instanceof ShadowRoot?dt:!1}),{dimensionStyles:ee}=zs(e),be=g8(),{scopeId:Ie}=vg();Zt(()=>e.disabled,ot=>{ot&&(v.value=!1)});const{contentStyles:Ve,updateLocation:Ke}=woe(e,{isRtl:C,contentEl:s,target:ie,isActive:v});Ioe(e,{root:l,contentEl:s,targetEl:X,target:ie,isActive:v,updateLocation:Ke});function Xe(ot){r("click:outside",ot),e.persistent?ct():v.value=!1}function Pe(ot){return v.value&&F.value&&(!e.scrim||ot.target===h.value||ot instanceof MouseEvent&&ot.shadowTarget===h.value)}Zi&&Zt(v,ot=>{ot?window.addEventListener("keydown",$e):window.removeEventListener("keydown",$e)},{immediate:!0}),jr(()=>{Zi&&window.removeEventListener("keydown",$e)});function $e(ot){var dt,Je,yt;ot.key==="Escape"&&F.value&&((dt=s.value)!=null&&dt.contains(document.activeElement)||r("keydown",ot),e.persistent?ct():(v.value=!1,(Je=s.value)!=null&&Je.contains(document.activeElement)&&((yt=q.value)==null||yt.focus())))}function Ee(ot){ot.key==="Escape"&&!F.value||r("keydown",ot)}const We=S2();ua(()=>e.closeOnBack,()=>{use(We,ot=>{F.value&&v.value?(ot(!1),e.persistent?ct():v.value=!1):ot()})});const Ze=it();Zt(()=>v.value&&(e.absolute||e.contained)&&Z.value==null,ot=>{if(ot){const dt=YT(l.value);dt&&dt!==document.scrollingElement&&(Ze.value=dt.scrollTop)}});function ct(){e.noClickAnimation||s.value&&sh(s.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:X0})}function kt(){r("afterEnter")}function Nt(){P(),r("afterLeave")}return Ut(()=>{var ot;return B(ln,null,[(ot=n.activator)==null?void 0:ot.call(n,{isActive:v.value,targetRef:$,props:Dt({ref:K},G.value,e.activatorProps)}),be.value&&I.value&&ue(MW,{disabled:!Z.value,to:Z.value},{default:()=>[B("div",Dt({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":v.value,"v-overlay--contained":e.contained},x.value,T.value,e.class],style:[H.value,{"--v-overlay-opacity":e.opacity,top:vn(Ze.value)},e.style],ref:l,onKeydown:Ee},Ie,i),[ue(zoe,Dt({color:D,modelValue:v.value&&!!e.scrim,ref:h},te.value),null),ue($a,{appear:!0,persisted:!0,transition:e.transition,target:ie.value,onAfterEnter:kt,onAfterLeave:Nt},{default:()=>{var dt;return[Oi(B("div",Dt({ref:s,class:["v-overlay__content",e.contentClass],style:[ee.value,Ve.value]},j.value,e.contentProps),[(dt=n.default)==null?void 0:dt.call(n,{isActive:v})]),[[bu,v.value],[dI,{handler:Xe,closeConditional:Pe,include:()=>[q.value]}]])]}})])]})])}),{activatorEl:q,scrimEl:h,target:ie,animateClick:ct,contentEl:s,rootEl:l,globalTop:F,localTop:V,updateLocation:Ke}}}),y8=ut({id:String,submenu:Boolean,disableInitialFocus:Boolean,...mr(Xb({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:iS}}),["absolute"])},"VMenu"),h_=Lt()({name:"VMenu",props:y8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),{scopeId:r}=vg(),{isRtl:a}=Ks(),l=fa(),h=He(()=>e.id||`v-menu-${l}`),s=it(),p=ki(uI,null),v=nn(new Set);Or(uI,{register(){v.value.add(l)},unregister(){v.value.delete(l)},closeParents(H){setTimeout(()=>{var q;!v.value.size&&!e.persistent&&(H==null||(q=s.value)!=null&&q.contentEl&&!Rne(H,s.value.contentEl))&&(i.value=!1,p==null||p.closeParents())},40)}}),jr(()=>{p==null||p.unregister(),document.removeEventListener("focusin",I)}),yT(()=>i.value=!1);let x=!1,T=-1;async function C(){x=!0,T=window.setTimeout(()=>{x=!1},100)}async function I(H){var ie,X,$,G,j;const q=H.relatedTarget,K=H.target;await Gn(),i.value&&q!==K&&((ie=s.value)!=null&&ie.rootEl)&&((X=s.value)!=null&&X.contentEl)&&(($=s.value)!=null&&$.localTop)&&![document,s.value.rootEl].includes(K)&&!s.value.rootEl.contains(K)&&(x?!e.openOnHover&&!((G=s.value.activatorEl)!=null&&G.contains(K))&&(i.value=!1):((j=o_(s.value.contentEl)[0])==null||j.focus(),document.removeEventListener("pointerdown",C)))}Zt(i,H=>{H?(p==null||p.register(),Zi&&!e.disableInitialFocus&&(document.addEventListener("pointerdown",C),document.addEventListener("focusin",I,{once:!0}))):(p==null||p.unregister(),Zi&&(clearTimeout(T),document.removeEventListener("pointerdown",C),document.removeEventListener("focusin",I)))},{immediate:!0});function P(H){p==null||p.closeParents(H)}function D(H){var q,K,ie,X,$;if(!e.disabled)if(H.key==="Tab"||H.key==="Enter"&&!e.closeOnContentClick){if(H.key==="Enter"&&(H.target instanceof HTMLTextAreaElement||H.target instanceof HTMLInputElement&&H.target.closest("form")))return;H.key==="Enter"&&H.preventDefault(),jN(o_((q=s.value)==null?void 0:q.contentEl,!1),H.shiftKey?"prev":"next",j=>j.tabIndex>=0)||(i.value=!1,(ie=(K=s.value)==null?void 0:K.activatorEl)==null||ie.focus())}else e.submenu&&H.key===(a.value?"ArrowRight":"ArrowLeft")&&(i.value=!1,($=(X=s.value)==null?void 0:X.activatorEl)==null||$.focus())}function F(H){var K;if(e.disabled)return;const q=(K=s.value)==null?void 0:K.contentEl;q&&i.value?H.key==="ArrowDown"?(H.preventDefault(),H.stopImmediatePropagation(),Vp(q,"next")):H.key==="ArrowUp"?(H.preventDefault(),H.stopImmediatePropagation(),Vp(q,"prev")):e.submenu&&(H.key===(a.value?"ArrowRight":"ArrowLeft")?i.value=!1:H.key===(a.value?"ArrowLeft":"ArrowRight")&&(H.preventDefault(),Vp(q,"first"))):(e.submenu?H.key===(a.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(H.key))&&(i.value=!0,H.preventDefault(),setTimeout(()=>setTimeout(()=>F(H))))}const V=me(()=>Dt({"aria-haspopup":"menu","aria-expanded":String(i.value),"aria-controls":h.value,"aria-owns":h.value,onKeydown:F},e.activatorProps));return Ut(()=>{const H=fd.filterProps(e);return ue(fd,Dt({ref:s,id:h.value,class:["v-menu",e.class],style:e.style},H,{modelValue:i.value,"onUpdate:modelValue":q=>i.value=q,absolute:!0,activatorProps:V.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":P,onKeydown:D},r),{activator:n.activator,default:function(){for(var q=arguments.length,K=new Array(q),ie=0;ie<q;ie++)K[ie]=arguments[ie];return ue(di,{root:"VMenu"},{default:()=>{var X;return[(X=n.default)==null?void 0:X.call(n,...K)]}})}})}),So({id:h,openChildren:v},s)}}),Noe=ut({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Tn(),...Rh({transition:{component:ib}})},"VCounter"),sS=Lt()({name:"VCounter",functional:!0,props:Noe(),setup(e,t){let{slots:n}=t;const i=He(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return Ut(()=>ue($a,{transition:e.transition},{default:()=>[Oi(B("div",{class:Tt(["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class]),style:Yt(e.style)},[n.default?n.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[bu,e.active]])]})),{}}}),$oe=ut({floating:Boolean,...Tn()},"VFieldLabel"),Ky=Lt()({name:"VFieldLabel",props:$oe(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(P_,{class:Tt(["v-field-label",{"v-field-label--floating":e.floating},e.class]),style:Yt(e.style)},n)),{}}}),Uoe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Yb=ut({appendInnerIcon:Pn,bgColor:String,clearable:Boolean,clearIcon:{type:Pn,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,details:Boolean,dirty:Boolean,disabled:{type:Boolean,default:null},glow:Boolean,error:Boolean,flat:Boolean,iconColor:[Boolean,String],label:String,persistentClear:Boolean,prependInnerIcon:Pn,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Uoe.includes(e)},"onClick:clear":No(),"onClick:appendInner":No(),"onClick:prependInner":No(),...Tn(),...eS(),...Hr(),...Li()},"VField"),cm=Lt()({name:"VField",inheritAttrs:!1,props:{id:String,...Kb(),...Yb()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{themeClasses:a}=nr(e),{loaderClasses:l}=Wb(e),{focusClasses:h,isFocused:s,focus:p,blur:v}=Oh(e),{InputIcon:x}=z2(e),{roundedClasses:T}=is(e),{rtlClasses:C}=Ks(),I=He(()=>e.dirty||e.active),P=He(()=>!!(e.label||r.label)),D=He(()=>!e.singleLine&&P.value),F=fa(),V=me(()=>e.id||`input-${F}`),H=He(()=>e.details?`${V.value}-messages`:void 0),q=it(),K=it(),ie=it(),X=me(()=>["plain","underlined"].includes(e.variant)),$=me(()=>e.error||e.disabled?void 0:I.value&&s.value?e.color:e.baseColor),G=me(()=>{if(!(!e.iconColor||e.glow&&!s.value))return e.iconColor===!0?$.value:e.iconColor}),{backgroundColorClasses:j,backgroundColorStyles:te}=or(()=>e.bgColor),{textColorClasses:Z,textColorStyles:ee}=jo($);Zt(I,Ve=>{if(D.value&&!ud()){const Ke=q.value.$el,Xe=K.value.$el;requestAnimationFrame(()=>{const Pe=kP(Ke),$e=Xe.getBoundingClientRect(),Ee=$e.x-Pe.x,We=$e.y-Pe.y-(Pe.height/2-$e.height/2),Ze=$e.width/.75,ct=Math.abs(Ze-Pe.width)>1?{maxWidth:vn(Ze)}:void 0,kt=getComputedStyle(Ke),Nt=getComputedStyle(Xe),ot=parseFloat(kt.transitionDuration)*1e3||150,dt=parseFloat(Nt.getPropertyValue("--v-field-label-scale")),Je=Nt.getPropertyValue("color");Ke.style.visibility="visible",Xe.style.visibility="hidden",sh(Ke,{transform:`translate(${Ee}px, ${We}px) scale(${dt})`,color:Je,...ct},{duration:ot,easing:X0,direction:Ve?"normal":"reverse"}).finished.then(()=>{Ke.style.removeProperty("visibility"),Xe.style.removeProperty("visibility")})})}},{flush:"post"});const be=me(()=>({isActive:I,isFocused:s,controlRef:ie,blur:v,focus:p}));function Ie(Ve){Ve.target!==document.activeElement&&Ve.preventDefault()}return Ut(()=>{var Ee,We,Ze;const Ve=e.variant==="outlined",Ke=!!(r["prepend-inner"]||e.prependInnerIcon),Xe=!!(e.clearable||r.clear)&&!e.disabled,Pe=!!(r["append-inner"]||e.appendInnerIcon||Xe),$e=()=>r.label?r.label({...be.value,label:e.label,props:{for:V.value}}):e.label;return B("div",Dt({class:["v-field",{"v-field--active":I.value,"v-field--appended":Pe,"v-field--center-affix":e.centerAffix??!X.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--glow":e.glow,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":Ke,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!$e(),[`v-field--variant-${e.variant}`]:!0},a.value,j.value,h.value,l.value,T.value,C.value,e.class],style:[te.value,e.style],onClick:Ie},n),[B("div",{class:"v-field__overlay"},null),ue(Hb,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),Ke&&B("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&ue(x,{key:"prepend-icon",name:"prependInner",color:G.value},null),(Ee=r["prepend-inner"])==null?void 0:Ee.call(r,be.value)]),B("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&D.value&&ue(Ky,{key:"floating-label",ref:K,class:Tt([Z.value]),floating:!0,for:V.value,"aria-hidden":!I.value,style:Yt(ee.value)},{default:()=>[$e()]}),P.value&&ue(Ky,{key:"label",ref:q,for:V.value},{default:()=>[$e()]}),((We=r.default)==null?void 0:We.call(r,{...be.value,props:{id:V.value,class:"v-field__input","aria-describedby":H.value},focus:p,blur:v}))??B("div",{id:V.value,class:"v-field__input","aria-describedby":H.value},null)]),Xe&&ue(UP,{key:"clear"},{default:()=>[Oi(B("div",{class:"v-field__clearable",onMousedown:ct=>{ct.preventDefault(),ct.stopPropagation()}},[ue(di,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[r.clear?r.clear({...be.value,props:{onFocus:p,onBlur:v,onClick:e["onClick:clear"],tabindex:-1}}):ue(x,{name:"clear",onFocus:p,onBlur:v,tabindex:-1},null)]})]),[[bu,e.dirty]])]}),Pe&&B("div",{key:"append",class:"v-field__append-inner"},[(Ze=r["append-inner"])==null?void 0:Ze.call(r,be.value),e.appendInnerIcon&&ue(x,{key:"append-icon",name:"appendInner",color:G.value},null)]),B("div",{class:Tt(["v-field__outline",Z.value]),style:Yt(ee.value)},[Ve&&B(ln,null,[B("div",{class:"v-field__outline__start"},null),D.value&&B("div",{class:"v-field__outline__notch"},[ue(Ky,{ref:K,floating:!0,for:V.value,"aria-hidden":!I.value},{default:()=>[$e()]})]),B("div",{class:"v-field__outline__end"},null)]),X.value&&D.value&&ue(Ky,{ref:K,floating:!0,for:V.value,"aria-hidden":!I.value},{default:()=>[$e()]})])])}),{controlRef:ie,fieldIconColor:G}}}),b8=ut({autocomplete:String},"autocomplete");function x8(e){const t=fa(),n=nn(0),i=He(()=>e.autocomplete==="suppress"),r=He(()=>i.value?`${e.name}-${t}-${n.value}`:e.name),a=He(()=>i.value?"off":e.autocomplete);return{isSuppressing:i,fieldAutocomplete:a,fieldName:r,update:()=>n.value=new Date().getTime()}}function w8(e){function t(n,i){var r,a;!e.autofocus||!n||(a=(r=i[0].target)==null?void 0:r.focus)==null||a.call(r)}return{onIntersect:t}}const joe=["color","file","time","date","datetime-local","week","month"],Zb=ut({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...b8(),...Vh(),...Yb()},"VTextField"),Ch=Lt()({name:"VTextField",directives:{vIntersect:_u},inheritAttrs:!1,props:Zb(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Dn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Oh(e),{onIntersect:p}=w8(e),v=me(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),x=me(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=me(()=>["plain","underlined"].includes(e.variant)),C=it(),I=it(),P=it(),D=x8(e),F=me(()=>joe.includes(e.type)||e.persistentPlaceholder||l.value||e.active);function V(){D.isSuppressing.value&&D.update(),l.value||h(),Gn(()=>{var X;P.value!==document.activeElement&&((X=P.value)==null||X.focus())})}function H(X){i("mousedown:control",X),X.target!==P.value&&(V(),X.preventDefault())}function q(X){i("click:control",X)}function K(X,$){X.stopPropagation(),V(),Gn(()=>{$(),Fb(e["onClick:clear"],X)})}function ie(X){var G;const $=X.target;if(a.value=$.value,(G=e.modelModifiers)!=null&&G.trim&&["text","search","password","tel","url"].includes(e.type)){const j=[$.selectionStart,$.selectionEnd];Gn(()=>{$.selectionStart=j[0],$.selectionEnd=j[1]})}}return Ut(()=>{const X=!!(r.counter||e.counter!==!1&&e.counter!=null),$=!!(X||r.details),[G,j]=gm(n),{modelValue:te,...Z}=ha.filterProps(e),ee=cm.filterProps(e);return ue(ha,Dt({ref:C,modelValue:a.value,"onUpdate:modelValue":be=>a.value=be,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":T.value},e.class],style:e.style},G,Z,{centerAffix:!T.value,focused:l.value}),{...r,default:be=>{let{id:Ie,isDisabled:Ve,isDirty:Ke,isReadonly:Xe,isValid:Pe,hasDetails:$e,reset:Ee}=be;return ue(cm,Dt({ref:I,onMousedown:H,onClick:q,"onClick:clear":We=>K(We,Ee),role:e.role},mr(ee,["onClick:clear"]),{id:Ie.value,active:F.value||Ke.value,dirty:Ke.value||e.dirty,disabled:Ve.value,focused:l.value,details:$e.value,error:Pe.value===!1}),{...r,default:We=>{let{props:{class:Ze,...ct},controlRef:kt}=We;const Nt=Oi(B("input",Dt({ref:ot=>P.value=kt.value=ot,value:a.value,onInput:ie,autofocus:e.autofocus,readonly:Xe.value,disabled:Ve.value,name:D.fieldName.value,autocomplete:D.fieldAutocomplete.value,placeholder:e.placeholder,size:1,role:e.role,type:e.type,onFocus:h,onBlur:s},ct,j),null),[[_u,{handler:p},null,{once:!0}]]);return B(ln,null,[e.prefix&&B("span",{class:"v-text-field__prefix"},[B("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?B("div",{class:Tt(Ze),"data-no-activator":""},[r.default(),Nt]):od(Nt,{class:Ze}),e.suffix&&B("span",{class:"v-text-field__suffix"},[B("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:$?be=>{var Ie;return B(ln,null,[(Ie=r.details)==null?void 0:Ie.call(r,be),X&&B(ln,null,[B("span",null,null),ue(sS,{active:e.persistentCounter||l.value,value:v.value,max:x.value,disabled:e.disabled},r.counter)])])}:void 0})}),So({},C,I,P)}}),Woe=ut({renderless:Boolean,...Tn()},"VVirtualScrollItem"),T8=Lt()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Woe(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{resizeRef:a,contentRect:l}=Nc(void 0,"border");Zt(()=>{var h;return(h=l.value)==null?void 0:h.height},h=>{h!=null&&i("update:height",h)}),Ut(()=>{var h,s;return e.renderless?B(ln,null,[(h=r.default)==null?void 0:h.call(r,{itemRef:a})]):B("div",Dt({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(s=r.default)==null?void 0:s.call(r)])})}}),Hoe=-1,Goe=1,IC=100,S8=ut({itemHeight:{type:[Number,String],default:null},itemKey:{type:[String,Array,Function],default:null},height:[Number,String]},"virtual");function E8(e,t){const n=Fl(),i=nn(0);Wr(()=>{i.value=parseFloat(e.itemHeight||0)});const r=nn(0),a=nn(Math.ceil((parseInt(e.height)||n.height.value)/(i.value||16))||1),l=nn(0),h=nn(0),s=it(),p=it();let v=0;const{resizeRef:x,contentRect:T}=Nc();Wr(()=>{x.value=s.value});const C=me(()=>{var $e;return s.value===document.documentElement?n.height.value:(($e=T.value)==null?void 0:$e.height)||parseInt(e.height)||0}),I=me(()=>!!(s.value&&p.value&&C.value&&i.value));let P=Array.from({length:t.value.length}),D=Array.from({length:t.value.length});const F=nn(0);let V=-1;function H($e){return P[$e]||i.value}const q=zN(()=>{const $e=performance.now();D[0]=0;const Ee=t.value.length;for(let We=1;We<=Ee;We++)D[We]=(D[We-1]||0)+H(We-1);F.value=Math.max(F.value,performance.now()-$e)},F),K=Zt(I,$e=>{$e&&(K(),v=p.value.offsetTop,q.immediate(),Ve(),~V&&Gn(()=>{Zi&&window.requestAnimationFrame(()=>{Xe(V),V=-1})}))});lo(()=>{q.clear()});function ie($e,Ee){const We=P[$e],Ze=i.value;i.value=Ze?Math.min(i.value,Ee):Ee,(We!==Ee||Ze!==i.value)&&(P[$e]=Ee,q())}function X($e){$e=kr($e,0,t.value.length);const Ee=Math.floor($e),We=$e%1,Ze=Ee+1,ct=D[Ee]||0,kt=D[Ze]||ct;return ct+(kt-ct)*We}function $($e){return qoe(D,$e)}let G=0,j=0,te=0;Zt(C,($e,Ee)=>{Ee&&(Ve(),$e<Ee&&requestAnimationFrame(()=>{j=0,Ve()}))});let Z=-1;function ee(){if(!s.value||!p.value)return;const $e=s.value.scrollTop,Ee=performance.now();Ee-te>500?(j=Math.sign($e-G),v=p.value.offsetTop):j=$e-G,G=$e,te=Ee,window.clearTimeout(Z),Z=window.setTimeout(be,500),Ve()}function be(){!s.value||!p.value||(j=0,te=0,window.clearTimeout(Z),Ve())}let Ie=-1;function Ve(){cancelAnimationFrame(Ie),Ie=requestAnimationFrame(Ke)}function Ke(){if(!s.value||!C.value||!i.value)return;const $e=G-v,Ee=Math.sign(j),We=Math.max(0,$e-IC),Ze=kr($(We),0,t.value.length),ct=$e+C.value+IC,kt=kr($(ct)+1,Ze+1,t.value.length);if((Ee!==Hoe||Ze<r.value)&&(Ee!==Goe||kt>a.value)){const Nt=X(r.value)-X(Ze),ot=X(kt)-X(a.value);Math.max(Nt,ot)>IC?(r.value=Ze,a.value=kt):(Ze<=0&&(r.value=Ze),kt>=t.value.length&&(a.value=kt))}l.value=X(r.value),h.value=X(t.value.length)-X(a.value)}function Xe($e){const Ee=X($e);!s.value||$e&&!Ee?V=$e:s.value.scrollTop=Ee}const Pe=me(()=>t.value.slice(r.value,a.value).map(($e,Ee)=>{const We=Ee+r.value;return{raw:$e,index:We,key:Rs($e,e.itemKey,We)}}));return Zt(t,()=>{P=Array.from({length:t.value.length}),D=Array.from({length:t.value.length}),q.immediate(),Ve()},{deep:1}),{calculateVisibleItems:Ve,containerRef:s,markerRef:p,computedItems:Pe,paddingTop:l,paddingBottom:h,scrollToIndex:Xe,handleScroll:ee,handleScrollend:be,handleItemResize:ie}}function qoe(e,t){let n=e.length-1,i=0,r=0,a=null,l=-1;if(e[n]<t)return n;for(;i<=n;)if(r=i+n>>1,a=e[r],a>t)n=r-1;else if(a<t)l=r,i=r+1;else return a===t?r:i;return l}const Koe=ut({items:{type:Array,default:()=>[]},renderless:Boolean,...S8(),...Tn(),...Fs()},"VVirtualScroll"),oS=Lt()({name:"VVirtualScroll",props:Koe(),setup(e,t){let{slots:n}=t;const i=Ss("VVirtualScroll"),{dimensionStyles:r}=zs(e),{calculateVisibleItems:a,containerRef:l,markerRef:h,handleScroll:s,handleScrollend:p,handleItemResize:v,scrollToIndex:x,paddingTop:T,paddingBottom:C,computedItems:I}=E8(e,He(()=>e.items));return ua(()=>e.renderless,()=>{function P(){var V,H;const F=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";l.value===document.documentElement?(document[F]("scroll",s,{passive:!0}),document[F]("scrollend",p)):((V=l.value)==null||V[F]("scroll",s,{passive:!0}),(H=l.value)==null||H[F]("scrollend",p))}Dr(()=>{l.value=YT(i.vnode.el,!0),P(!0)}),lo(P)}),Ut(()=>{const P=I.value.map(D=>ue(T8,{key:D.key,renderless:e.renderless,"onUpdate:height":F=>v(D.index,F)},{default:F=>{var V;return(V=n.default)==null?void 0:V.call(n,{item:D.raw,index:D.index,...F})}}));return e.renderless?B(ln,null,[B("div",{ref:h,class:"v-virtual-scroll__spacer",style:{paddingTop:vn(T.value)}},null),P,B("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:vn(C.value)}},null)]):B("div",{ref:l,class:Tt(["v-virtual-scroll",e.class]),onScrollPassive:s,onScrollend:p,style:Yt([r.value,e.style])},[B("div",{ref:h,class:"v-virtual-scroll__container",style:{paddingTop:vn(T.value),paddingBottom:vn(C.value)}},[P])])}),{calculateVisibleItems:a,scrollToIndex:x}}});function eM(e,t){const n=nn(!1);let i;function r(h){cancelAnimationFrame(i),n.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>requestAnimationFrame(h)),await new Promise(h=>{if(n.value){const s=Zt(n,()=>{s(),h()})}else h()})}async function l(h){var v,x;if(h.key==="Tab"&&((v=t.value)==null||v.focus()),!["PageDown","PageUp","Home","End"].includes(h.key))return;const s=(x=e.value)==null?void 0:x.$el;if(!s)return;(h.key==="Home"||h.key==="End")&&s.scrollTo({top:h.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await a();const p=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(h.key==="PageDown"||h.key==="Home"){const T=s.getBoundingClientRect().top;for(const C of p)if(C.getBoundingClientRect().top>=T){C.focus();break}}else{const T=s.getBoundingClientRect().bottom;for(const C of[...p].reverse())if(C.getBoundingClientRect().bottom<=T){C.focus();break}}}return{onScrollPassive:r,onKeydown:l}}const Xoe=ut({closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"}},"autocomplete");function tM(e,t){const{t:n}=pr(),i=fa(),r=me(()=>`menu-${i}`),a=He(()=>ja(t)),l=He(()=>r.value),h=He(()=>n(ja(t)?e.closeText:e.openText));return{menuId:r,ariaExpanded:a,ariaControls:l,ariaLabel:h}}const nM=ut({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Pn,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,noAutoScroll:Boolean,...Xoe(),...l8({itemChildren:!1})},"Select"),Yoe=ut({...nM(),...mr(Zb({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Rh({transition:{component:iS}})},"VSelect"),$v=Lt()({name:"VSelect",props:Yoe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=pr(),r=it(),a=it(),l=it(),{items:h,transformIn:s,transformOut:p}=qP(e),v=Dn(e,"modelValue",[],Ze=>s(Ze===null?[null]:Yr(Ze)),Ze=>{const ct=p(Ze);return e.multiple?ct:ct[0]??null}),x=me(()=>typeof e.counterValue=="function"?e.counterValue(v.value):typeof e.counterValue=="number"?e.counterValue:v.value.length),T=M_(e),C=me(()=>v.value.map(Ze=>Ze.value)),I=nn(!1);let P="",D=-1,F;const V=me(()=>e.hideSelected?h.value.filter(Ze=>!v.value.some(ct=>(e.valueComparator||xo)(ct,Ze))):h.value),H=me(()=>e.hideNoData&&!V.value.length||T.isReadonly.value||T.isDisabled.value),q=Dn(e,"menu"),K=me({get:()=>q.value,set:Ze=>{var ct;q.value&&!Ze&&((ct=a.value)!=null&&ct.openChildren.size)||Ze&&H.value||(q.value=Ze)}}),{menuId:ie,ariaExpanded:X,ariaControls:$,ariaLabel:G}=tM(e,K),j=me(()=>{var Ze;return{...e.menuProps,activatorProps:{...((Ze=e.menuProps)==null?void 0:Ze.activatorProps)||{},"aria-haspopup":"listbox"}}}),te=it(),Z=eM(te,r);function ee(Ze){e.openOnClear&&(K.value=!0)}function be(){H.value||(K.value=!K.value)}function Ie(Ze){l_(Ze)&&Ve(Ze)}function Ve(Ze){var le,we,_e;if(!Ze.key||T.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(Ze.key)&&Ze.preventDefault(),["Enter","ArrowDown"," "].includes(Ze.key)&&(K.value=!0),["Escape","Tab"].includes(Ze.key)&&(K.value=!1),Ze.key==="Home"?(le=te.value)==null||le.focus("first"):Ze.key==="End"&&((we=te.value)==null||we.focus("last"));const ct=1e3;if(!l_(Ze))return;const kt=performance.now();kt-F>ct&&(P="",D=-1),P+=Ze.key.toLowerCase(),F=kt;const Nt=V.value;function ot(){let fe=dt();return fe||P.at(-1)===P.at(-2)&&(P=P.slice(0,-1),fe=dt(),fe)||(D=-1,fe=dt(),fe)?fe:(P=Ze.key.toLowerCase(),dt())}function dt(){for(let fe=D+1;fe<Nt.length;fe++){const Fe=Nt[fe];if(Fe.title.toLowerCase().startsWith(P))return[Fe,fe]}}const Je=ot();if(!Je)return;const[yt,Ne]=Je;D=Ne,(_e=te.value)==null||_e.focus(Ne),e.multiple||(v.value=[yt])}function Ke(Ze){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!Ze.props.disabled)if(e.multiple){const kt=v.value.findIndex(ot=>(e.valueComparator||xo)(ot.value,Ze.value)),Nt=ct??!~kt;if(~kt){const ot=Nt?[...v.value,Ze]:[...v.value];ot.splice(kt,1),v.value=ot}else Nt&&(v.value=[...v.value,Ze])}else{const kt=ct!==!1;v.value=kt?[Ze]:[],Gn(()=>{K.value=!1})}}function Xe(Ze){var ct;(ct=te.value)!=null&&ct.$el.contains(Ze.relatedTarget)||(K.value=!1)}function Pe(){var Ze;e.eager&&((Ze=l.value)==null||Ze.calculateVisibleItems())}function $e(){var Ze;I.value&&((Ze=r.value)==null||Ze.focus())}function Ee(Ze){I.value=!0}function We(Ze){if(Ze==null)v.value=[];else if(a_(r.value,":autofill")||a_(r.value,":-webkit-autofill")){const ct=h.value.find(kt=>kt.title===Ze);ct&&Ke(ct)}else r.value&&(r.value.value="")}return Zt(K,()=>{if(!e.hideSelected&&K.value&&v.value.length){const Ze=V.value.findIndex(ct=>v.value.some(kt=>(e.valueComparator||xo)(kt.value,ct.value)));Zi&&!e.noAutoScroll&&window.requestAnimationFrame(()=>{var ct;Ze>=0&&((ct=l.value)==null||ct.scrollToIndex(Ze))})}}),Zt(h,(Ze,ct)=>{K.value||I.value&&e.hideNoData&&!ct.length&&Ze.length&&(K.value=!0)}),Ut(()=>{const Ze=!!(e.chips||n.chip),ct=!!(!e.hideNoData||V.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),kt=v.value.length>0,Nt=Ch.filterProps(e),ot=kt||!I.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return ue(Ch,Dt({ref:r},Nt,{modelValue:v.value.map(dt=>dt.props.value).join(", "),"onUpdate:modelValue":We,focused:I.value,"onUpdate:focused":dt=>I.value=dt,validationValue:v.externalValue,counterValue:x.value,dirty:kt,class:["v-select",{"v-select--active-menu":K.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":v.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:ot,"onClick:clear":ee,"onMousedown:control":be,onBlur:Xe,onKeydown:Ve,"aria-expanded":X.value,"aria-controls":$.value,"aria-label":G.value,title:G.value}),{...n,default:()=>B(ln,null,[ue(h_,Dt({id:ie.value,ref:a,modelValue:K.value,"onUpdate:modelValue":dt=>K.value=dt,activator:"parent",contentClass:"v-select__content",disabled:H.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Pe,onAfterLeave:$e},j.value),{default:()=>[ct&&ue(d_,Dt({ref:te,selected:C.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:dt=>dt.preventDefault(),onKeydown:Ie,onFocusin:Ee,tabindex:"-1",selectable:!0,"aria-live":"polite","aria-label":`${e.label}-list`,color:e.itemColor??e.color},Z,e.listProps),{default:()=>{var dt,Je,yt;return[(dt=n["prepend-item"])==null?void 0:dt.call(n),!V.value.length&&!e.hideNoData&&(((Je=n["no-data"])==null?void 0:Je.call(n))??ue(yu,{key:"no-data",title:i(e.noDataText)},null)),ue(oS,{ref:l,renderless:!0,items:V.value,itemKey:"value"},{default:Ne=>{var rt,pt,vt;let{item:le,index:we,itemRef:_e}=Ne;const fe=Vne(le.props),Fe=Dt(le.props,{ref:_e,key:le.value,onClick:()=>Ke(le,null)});return le.type==="divider"?((rt=n.divider)==null?void 0:rt.call(n,{props:le.raw,index:we}))??ue(ac,Dt(le.props,{key:`divider-${we}`}),null):le.type==="subheader"?((pt=n.subheader)==null?void 0:pt.call(n,{props:le.raw,index:we}))??ue(D_,Dt(le.props,{key:`subheader-${we}`}),null):((vt=n.item)==null?void 0:vt.call(n,{item:le,index:we,props:Fe}))??ue(yu,Dt(Fe,{role:"option"}),{prepend:gt=>{let{isSelected:mt}=gt;return B(ln,null,[e.multiple&&!e.hideSelected?ue(hd,{key:le.value,modelValue:mt,ripple:!1,tabindex:"-1",onClick:Vt=>Vt.preventDefault()},null):void 0,fe.prependAvatar&&ue(dc,{image:fe.prependAvatar},null),fe.prependIcon&&ue(Di,{icon:fe.prependIcon},null)])}})}}),(yt=n["append-item"])==null?void 0:yt.call(n)]}})]}),v.value.map((dt,Je)=>{function yt(_e){_e.stopPropagation(),_e.preventDefault(),Ke(dt,!1)}const Ne={"onClick:close":yt,onKeydown(_e){_e.key!=="Enter"&&_e.key!==" "||(_e.preventDefault(),_e.stopPropagation(),yt(_e))},onMousedown(_e){_e.preventDefault(),_e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},le=Ze?!!n.chip:!!n.selection,we=le?XT(Ze?n.chip({item:dt,index:Je,props:Ne}):n.selection({item:dt,index:Je})):void 0;if(!(le&&!we))return B("div",{key:dt.value,class:"v-select__selection"},[Ze?n.chip?ue(di,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:dt.title}}},{default:()=>[we]}):ue(Ls,Dt({key:"chip",closable:e.closableChips,size:"small",text:dt.title,disabled:dt.props.disabled},Ne),null):we??B("span",{class:"v-select__selection-text"},[dt.title,e.multiple&&Je<v.value.length-1&&B("span",{class:"v-select__selection-comma"},[zn(",")])])])})]),"append-inner":function(){var Ne,le;for(var dt=arguments.length,Je=new Array(dt),yt=0;yt<dt;yt++)Je[yt]=arguments[yt];return B(ln,null,[(Ne=n["append-inner"])==null?void 0:Ne.call(n,...Je),e.menuIcon?ue(Di,{class:"v-select__menu-icon",color:(le=r.value)==null?void 0:le.fieldIconColor,icon:e.menuIcon},null):void 0])}})}),So({isFocused:I,menu:K,select:Ke},r)}}),Zoe=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const i=[];let r=e.indexOf(t);for(;~r;)i.push([r,r+t.length]),r=e.indexOf(t,r+t.length);return i.length?i:-1};function AC(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const L_=ut({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Joe(e,t,n){var s;const i=[],r=(n==null?void 0:n.default)??Zoe,a=n!=null&&n.filterKeys?Yr(n.filterKeys):!1,l=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;let h=null;e:for(let p=0;p<e.length;p++){const[v,x=v]=Yr(e[p]),T={},C={};let I=-1;if((t||l>0)&&!(n!=null&&n.noFilter)){let P=!1;if(typeof v=="object"){if(v.type==="divider"||v.type==="subheader"){(h==null?void 0:h.type)==="divider"&&v.type==="subheader"&&i.push(h),h={index:p,matches:{},type:v.type};continue}const V=a||Object.keys(x);P=V.length===l;for(const H of V){const q=Rs(x,H),K=(s=n==null?void 0:n.customKeyFilter)==null?void 0:s[H];if(I=K?K(q,t,v):r(q,t,v),I!==-1&&I!==!1)K?T[H]=AC(I,t):C[H]=AC(I,t);else if((n==null?void 0:n.filterMode)==="every")continue e}}else I=r(v,t,v),I!==-1&&I!==!1&&(C.title=AC(I,t));const D=Object.keys(C).length,F=Object.keys(T).length;if(!D&&!F||(n==null?void 0:n.filterMode)==="union"&&F!==l&&!D||(n==null?void 0:n.filterMode)==="intersection"&&(F!==l||!D&&l>0&&!P))continue}h&&(i.push(h),h=null),i.push({index:p,matches:{...C,...T}})}return i}function R_(e,t,n,i){const r=nn([]),a=nn(new Map),l=me(()=>i!=null&&i.transform?Ti(t).map(s=>[s,i.transform(s)]):Ti(t));Wr(()=>{const s=typeof n=="function"?n():Ti(n),p=typeof s!="string"&&typeof s!="number"?"":String(s),v=Joe(l.value,p,{customKeyFilter:{...e.customKeyFilter,...Ti(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),x=Ti(t),T=[],C=new Map;v.forEach(I=>{let{index:P,matches:D}=I;const F=x[P];T.push(F),C.set(F.value,D)}),r.value=T,a.value=C});function h(s){return a.value.get(s.value)}return{filteredItems:r,filteredMatches:a,getMatches:h}}function C8(e,t,n){return n==null||!n.length?t:n.map((i,r)=>{const a=r===0?0:n[r-1][1],l=[B("span",{class:Tt(`${e}__unmask`)},[t.slice(a,i[0])]),B("span",{class:Tt(`${e}__mask`)},[t.slice(i[0],i[1])])];return r===n.length-1&&l.push(B("span",{class:Tt(`${e}__unmask`)},[t.slice(i[1])])),B(ln,null,[l])})}const Qoe=ut({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...L_({filterKeys:["title"]}),...nM(),...mr(Zb({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),hI=Lt()({name:"VAutocomplete",props:Qoe(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=pr(),r=it(),a=nn(!1),l=nn(!0),h=nn(!1),s=it(),p=it(),v=nn(-1),x=nn(null),{items:T,transformIn:C,transformOut:I}=qP(e),{textColorClasses:P,textColorStyles:D}=jo(()=>{var _e;return(_e=r.value)==null?void 0:_e.color}),F=Dn(e,"search",""),V=Dn(e,"modelValue",[],_e=>C(_e===null?[null]:Yr(_e)),_e=>{const fe=I(_e);return e.multiple?fe:fe[0]??null}),H=me(()=>typeof e.counterValue=="function"?e.counterValue(V.value):typeof e.counterValue=="number"?e.counterValue:V.value.length),q=M_(e),{filteredItems:K,getMatches:ie}=R_(e,T,()=>x.value??(l.value?"":F.value)),X=me(()=>e.hideSelected&&x.value===null?K.value.filter(_e=>!V.value.some(fe=>fe.value===_e.value)):K.value),$=me(()=>!!(e.chips||n.chip)),G=me(()=>$.value||!!n.selection),j=me(()=>V.value.map(_e=>_e.props.value)),te=me(()=>{var fe;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&F.value===((fe=X.value[0])==null?void 0:fe.title))&&X.value.length>0&&!l.value&&!h.value}),Z=me(()=>e.hideNoData&&!X.value.length||q.isReadonly.value||q.isDisabled.value),ee=Dn(e,"menu"),be=me({get:()=>ee.value,set:_e=>{var fe;ee.value&&!_e&&((fe=s.value)!=null&&fe.openChildren.size)||_e&&Z.value||(ee.value=_e)}}),{menuId:Ie,ariaExpanded:Ve,ariaControls:Ke,ariaLabel:Xe}=tM(e,be),Pe=it(),$e=eM(Pe,r);function Ee(_e){e.openOnClear&&(be.value=!0),F.value=""}function We(){Z.value||(be.value=!0)}function Ze(_e){Z.value||(a.value&&(_e.preventDefault(),_e.stopPropagation()),be.value=!be.value)}function ct(_e){var fe;(l_(_e)||_e.key==="Backspace")&&((fe=r.value)==null||fe.focus())}function kt(_e){var rt,pt,vt,gt,mt;if(q.isReadonly.value)return;const fe=(rt=r.value)==null?void 0:rt.selectionStart,Fe=V.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(_e.key)&&_e.preventDefault(),["Enter","ArrowDown"].includes(_e.key)&&(be.value=!0),["Escape"].includes(_e.key)&&(be.value=!1),te.value&&["Enter","Tab"].includes(_e.key)&&!V.value.some(Vt=>{let{value:Gt}=Vt;return Gt===X.value[0].value})&&we(X.value[0]),_e.key==="ArrowDown"&&te.value&&((pt=Pe.value)==null||pt.focus("next")),["Backspace","Delete"].includes(_e.key)){if(!e.multiple&&G.value&&V.value.length>0&&!F.value)return we(V.value[0],!1);if(~v.value){_e.preventDefault();const Vt=v.value;we(V.value[v.value],!1),v.value=Vt>=Fe-1?Fe-2:Vt}else _e.key==="Backspace"&&!F.value&&(v.value=Fe-1);return}if(e.multiple)if(_e.key==="ArrowLeft"){if(v.value<0&&fe&&fe>0)return;const Vt=v.value>-1?v.value-1:Fe-1;if(V.value[Vt])v.value=Vt;else{const Gt=((vt=F.value)==null?void 0:vt.length)??null;v.value=-1,(gt=r.value)==null||gt.setSelectionRange(Gt,Gt)}}else if(_e.key==="ArrowRight"){if(v.value<0)return;const Vt=v.value+1;V.value[Vt]?v.value=Vt:(v.value=-1,(mt=r.value)==null||mt.setSelectionRange(0,0))}else~v.value&&l_(_e)&&(v.value=-1)}function Nt(_e){if(a_(r.value,":autofill")||a_(r.value,":-webkit-autofill")){const fe=T.value.find(Fe=>Fe.title===_e.target.value);fe&&we(fe)}}function ot(){var _e;e.eager&&((_e=p.value)==null||_e.calculateVisibleItems())}function dt(){var _e;a.value&&(l.value=!0,(_e=r.value)==null||_e.focus()),x.value=null}function Je(_e){a.value=!0,setTimeout(()=>{h.value=!0})}function yt(_e){h.value=!1}function Ne(_e){(_e==null||_e===""&&!e.multiple&&!G.value)&&(V.value=[])}const le=nn(!1);function we(_e){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!_e||_e.props.disabled))if(e.multiple){const Fe=V.value.findIndex(pt=>(e.valueComparator||xo)(pt.value,_e.value)),rt=fe??!~Fe;if(~Fe){const pt=rt?[...V.value,_e]:[...V.value];pt.splice(Fe,1),V.value=pt}else rt&&(V.value=[...V.value,_e]);e.clearOnSelect&&(F.value="")}else{const Fe=fe!==!1;V.value=Fe?[_e]:[],x.value=l.value?"":F.value??"",F.value=Fe&&!G.value?_e.title:"",Gn(()=>{be.value=!1,l.value=!0})}}return Zt(a,(_e,fe)=>{var Fe;_e!==fe&&(_e?(le.value=!0,F.value=e.multiple||G.value?"":String(((Fe=V.value.at(-1))==null?void 0:Fe.props.title)??""),l.value=!0,Gn(()=>le.value=!1)):(!e.multiple&&F.value==null&&(V.value=[]),be.value=!1,!l.value&&F.value&&(x.value=F.value),F.value="",v.value=-1))}),Zt(F,_e=>{!a.value||le.value||(_e&&(be.value=!0),l.value=!_e)}),Zt(be,_e=>{if(!e.hideSelected&&_e&&V.value.length&&l.value){const fe=X.value.findIndex(Fe=>V.value.some(rt=>Fe.value===rt.value));Zi&&window.requestAnimationFrame(()=>{var Fe;fe>=0&&((Fe=p.value)==null||Fe.scrollToIndex(fe))})}_e&&(x.value=null)}),Zt(T,(_e,fe)=>{be.value||a.value&&!fe.length&&_e.length&&(be.value=!0)}),Ut(()=>{const _e=!!(!e.hideNoData||X.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),fe=V.value.length>0,Fe=Ch.filterProps(e);return ue(Ch,Dt({ref:r},Fe,{modelValue:F.value,"onUpdate:modelValue":[rt=>F.value=rt,Ne],focused:a.value,"onUpdate:focused":rt=>a.value=rt,validationValue:V.externalValue,counterValue:H.value,dirty:fe,onChange:Nt,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":be.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!G.value,"v-autocomplete--selecting-index":v.value>-1},e.class],style:e.style,readonly:q.isReadonly.value,placeholder:fe?void 0:e.placeholder,"onClick:clear":Ee,"onMousedown:control":We,onKeydown:kt,"aria-expanded":Ve.value,"aria-controls":Ke.value}),{...n,default:()=>B(ln,null,[ue(h_,Dt({id:Ie.value,ref:s,modelValue:be.value,"onUpdate:modelValue":rt=>be.value=rt,activator:"parent",contentClass:"v-autocomplete__content",disabled:Z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:ot,onAfterLeave:dt},e.menuProps),{default:()=>[_e&&ue(d_,Dt({ref:Pe,filterable:!0,selected:j.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:rt=>rt.preventDefault(),onKeydown:ct,onFocusin:Je,onFocusout:yt,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},$e,e.listProps),{default:()=>{var rt,pt,vt;return[(rt=n["prepend-item"])==null?void 0:rt.call(n),!X.value.length&&!e.hideNoData&&(((pt=n["no-data"])==null?void 0:pt.call(n))??ue(yu,{key:"no-data",title:i(e.noDataText)},null)),ue(oS,{ref:p,renderless:!0,items:X.value,itemKey:"value"},{default:gt=>{var In,On,qn;let{item:mt,index:Vt,itemRef:Gt}=gt;const gn=Dt(mt.props,{ref:Gt,key:mt.value,active:te.value&&Vt===0?!0:void 0,onClick:()=>we(mt,null)});return mt.type==="divider"?((In=n.divider)==null?void 0:In.call(n,{props:mt.raw,index:Vt}))??ue(ac,Dt(mt.props,{key:`divider-${Vt}`}),null):mt.type==="subheader"?((On=n.subheader)==null?void 0:On.call(n,{props:mt.raw,index:Vt}))??ue(D_,Dt(mt.props,{key:`subheader-${Vt}`}),null):((qn=n.item)==null?void 0:qn.call(n,{item:mt,index:Vt,props:gn}))??ue(yu,Dt(gn,{role:"option"}),{prepend:zt=>{let{isSelected:un}=zt;return B(ln,null,[e.multiple&&!e.hideSelected?ue(hd,{key:mt.value,modelValue:un,ripple:!1,tabindex:"-1",onClick:An=>An.preventDefault()},null):void 0,mt.props.prependAvatar&&ue(dc,{image:mt.props.prependAvatar},null),mt.props.prependIcon&&ue(Di,{icon:mt.props.prependIcon},null)])},title:()=>{var zt;return l.value?mt.title:C8("v-autocomplete",mt.title,(zt=ie(mt))==null?void 0:zt.title)}})}}),(vt=n["append-item"])==null?void 0:vt.call(n)]}})]}),V.value.map((rt,pt)=>{function vt(Gt){Gt.stopPropagation(),Gt.preventDefault(),we(rt,!1)}const gt={"onClick:close":vt,onKeydown(Gt){Gt.key!=="Enter"&&Gt.key!==" "||(Gt.preventDefault(),Gt.stopPropagation(),vt(Gt))},onMousedown(Gt){Gt.preventDefault(),Gt.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},mt=$.value?!!n.chip:!!n.selection,Vt=mt?XT($.value?n.chip({item:rt,index:pt,props:gt}):n.selection({item:rt,index:pt})):void 0;if(!(mt&&!Vt))return B("div",{key:rt.value,class:Tt(["v-autocomplete__selection",pt===v.value&&["v-autocomplete__selection--selected",P.value]]),style:Yt(pt===v.value?D.value:{})},[$.value?n.chip?ue(di,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:rt.title}}},{default:()=>[Vt]}):ue(Ls,Dt({key:"chip",closable:e.closableChips,size:"small",text:rt.title,disabled:rt.props.disabled},gt),null):Vt??B("span",{class:"v-autocomplete__selection-text"},[rt.title,e.multiple&&pt<V.value.length-1&&B("span",{class:"v-autocomplete__selection-comma"},[zn(",")])])])})]),"append-inner":function(){var gt,mt;for(var rt=arguments.length,pt=new Array(rt),vt=0;vt<rt;vt++)pt[vt]=arguments[vt];return B(ln,null,[(gt=n["append-inner"])==null?void 0:gt.call(n,...pt),e.menuIcon?ue(Di,{class:"v-autocomplete__menu-icon",color:(mt=r.value)==null?void 0:mt.fieldIconColor,icon:e.menuIcon,onMousedown:Ze,onClick:WN,"aria-label":Xe.value,title:Xe.value,tabindex:"-1"},null):void 0])}})}),So({isFocused:a,isPristine:l,menu:be,search:F,filteredItems:K,select:we},r)}}),eae=ut({...Tn(),...ii()},"VCardActions"),k8=Lt()({name:"VCardActions",props:eae(),setup(e,t){let{slots:n}=t;return ns({VBtn:{slim:!0,variant:"text"}}),Ut(()=>ue(e.tag,{class:Tt(["v-card-actions",e.class]),style:Yt(e.style)},n)),{}}}),tae=ut({opacity:[Number,String],...Tn(),...ii()},"VCardSubtitle"),I8=Lt()({name:"VCardSubtitle",props:tae(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(e.tag,{class:Tt(["v-card-subtitle",e.class]),style:Yt([{"--v-card-subtitle-opacity":e.opacity},e.style])},n)),{}}}),A8=Dh("v-card-title"),nae=ut({appendAvatar:String,appendIcon:Pn,prependAvatar:String,prependIcon:Pn,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...Tn(),...Es(),...ii()},"VCardItem"),P8=Lt()({name:"VCardItem",props:nae(),setup(e,t){let{slots:n}=t;return Ut(()=>{const i=!!(e.prependAvatar||e.prependIcon),r=!!(i||n.prepend),a=!!(e.appendAvatar||e.appendIcon),l=!!(a||n.append),h=!!(e.title!=null||n.title),s=!!(e.subtitle!=null||n.subtitle);return ue(e.tag,{class:Tt(["v-card-item",e.class]),style:Yt(e.style)},{default:()=>{var p;return[r&&B("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?ue(di,{key:"prepend-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},n.prepend):B(ln,null,[e.prependAvatar&&ue(dc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ue(Di,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),B("div",{class:"v-card-item__content"},[h&&ue(A8,{key:"title"},{default:()=>{var v;return[((v=n.title)==null?void 0:v.call(n))??tn(e.title)]}}),s&&ue(I8,{key:"subtitle"},{default:()=>{var v;return[((v=n.subtitle)==null?void 0:v.call(n))??tn(e.subtitle)]}}),(p=n.default)==null?void 0:p.call(n)]),l&&B("div",{key:"append",class:"v-card-item__append"},[n.append?ue(di,{key:"append-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},n.append):B(ln,null,[e.appendIcon&&ue(Di,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&ue(dc,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]}})}),{}}}),iae=ut({opacity:[Number,String],...Tn(),...ii()},"VCardText"),M8=Lt()({name:"VCardText",props:iae(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(e.tag,{class:Tt(["v-card-text",e.class]),style:Yt([{"--v-card-text-opacity":e.opacity},e.style])},n)),{}}}),rae=ut({appendAvatar:String,appendIcon:Pn,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Pn,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...ul(),...Tn(),...Es(),...Fs(),...Xs(),...eS(),...Lh(),...I_(),...Hr(),...qb(),...ii(),...Li(),...$c({variant:"elevated"})},"VCard"),Cv=Lt()({name:"VCard",directives:{vRipple:Ga},props:rae(),setup(e,t){let{attrs:n,slots:i}=t;const{themeClasses:r}=nr(e),{borderClasses:a}=zl(e),{colorClasses:l,colorStyles:h,variantClasses:s}=hg(e),{densityClasses:p}=Ka(e),{dimensionStyles:v}=zs(e),{elevationClasses:x}=To(e),{loaderClasses:T}=Wb(e),{locationStyles:C}=pg(e),{positionClasses:I}=A_(e),{roundedClasses:P}=is(e),D=Gb(e,n);return Ut(()=>{const F=e.link!==!1&&D.isLink.value,V=!e.disabled&&e.link!==!1&&(e.link||D.isClickable.value),H=F?"a":e.tag,q=!!(i.title||e.title!=null),K=!!(i.subtitle||e.subtitle!=null),ie=q||K,X=!!(i.append||e.appendAvatar||e.appendIcon),$=!!(i.prepend||e.prependAvatar||e.prependIcon),G=!!(i.image||e.image),j=ie||$||X,te=!!(i.text||e.text!=null);return Oi(ue(H,Dt(D.linkProps,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":V},r.value,a.value,l.value,p.value,x.value,T.value,I.value,P.value,s.value,e.class],style:[h.value,v.value,C.value,e.style],onClick:V&&D.navigate,tabindex:e.disabled?-1:void 0}),{default:()=>{var Z;return[G&&B("div",{key:"image",class:"v-card__image"},[i.image?ue(di,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):ue(Eh,{key:"image-img",cover:!0,src:e.image},null)]),ue(Hb,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:i.loader}),j&&ue(P8,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),te&&ue(M8,{key:"text"},{default:()=>{var ee;return[((ee=i.text)==null?void 0:ee.call(i))??e.text]}}),(Z=i.default)==null?void 0:Z.call(i),i.actions&&ue(k8,null,{default:i.actions}),vm(V,"v-card")]}}),[[Ga,V&&e.ripple]])}),{}}}),sae=ut({fluid:{type:Boolean,default:!1},...Tn(),...Fs(),...ii()},"VContainer"),D8=Lt()({name:"VContainer",props:sae(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=Ks(),{dimensionStyles:r}=zs(e);return Ut(()=>ue(e.tag,{class:Tt(["v-container",{"v-container--fluid":e.fluid},i.value,e.class]),style:Yt([r.value,e.style])},n)),{}}}),L8=ZT.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),R8=ZT.reduce((e,t)=>{const n="offset"+md(t);return e[n]={type:[String,Number],default:null},e},{}),O8=ZT.reduce((e,t)=>{const n="order"+md(t);return e[n]={type:[String,Number],default:null},e},{}),K4={col:Object.keys(L8),offset:Object.keys(R8),order:Object.keys(O8)};function oae(e,t,n){let i=e;if(!(n==null||n===!1)){if(t){const r=t.replace(e,"");i+=`-${r}`}return e==="col"&&(i="v-"+i),e==="col"&&(n===""||n===!0)||(i+=`-${n}`),i.toLowerCase()}}const aae=["auto","start","end","center","baseline","stretch"],lae=ut({cols:{type:[Boolean,String,Number],default:!1},...L8,offset:{type:[String,Number],default:null},...R8,order:{type:[String,Number],default:null},...O8,alignSelf:{type:String,default:null,validator:e=>aae.includes(e)},...Tn(),...ii()},"VCol"),cae=Lt()({name:"VCol",props:lae(),setup(e,t){let{slots:n}=t;const i=me(()=>{const r=[];let a;for(a in K4)K4[a].forEach(h=>{const s=e[h],p=oae(a,h,s);p&&r.push(p)});const l=r.some(h=>h.startsWith("v-col-"));return r.push({"v-col":!l||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>{var r;return Ih(e.tag,{class:[i.value,e.class],style:e.style},(r=n.default)==null?void 0:r.call(n))}}}),iM=["start","end","center"],V8=["space-between","space-around","space-evenly"];function rM(e,t){return ZT.reduce((n,i)=>{const r=e+md(i);return n[r]=t(),n},{})}const uae=[...iM,"baseline","stretch"],B8=e=>uae.includes(e),F8=rM("align",()=>({type:String,default:null,validator:B8})),dae=[...iM,...V8],z8=e=>dae.includes(e),N8=rM("justify",()=>({type:String,default:null,validator:z8})),hae=[...iM,...V8,"stretch"],$8=e=>hae.includes(e),U8=rM("alignContent",()=>({type:String,default:null,validator:$8})),X4={align:Object.keys(F8),justify:Object.keys(N8),alignContent:Object.keys(U8)},fae={align:"align",justify:"justify",alignContent:"align-content"};function mae(e,t,n){let i=fae[e];if(n!=null){if(t){const r=t.replace(e,"");i+=`-${r}`}return i+=`-${n}`,i.toLowerCase()}}const pae=ut({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:B8},...F8,justify:{type:String,default:null,validator:z8},...N8,alignContent:{type:String,default:null,validator:$8},...U8,...Tn(),...ii()},"VRow"),gae=Lt()({name:"VRow",props:pae(),setup(e,t){let{slots:n}=t;const i=me(()=>{const r=[];let a;for(a in X4)X4[a].forEach(l=>{const h=e[l],s=mae(a,l,h);s&&r.push(s)});return r.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),r});return()=>{var r;return Ih(e.tag,{class:["v-row",i.value,e.class],style:e.style},(r=n.default)==null?void 0:r.call(n))}}}),j8=Dh("v-spacer","div","VSpacer"),sM=ut({color:String,...ul(),...Tn(),...Fs(),...Xs(),...Lh(),...I_(),...Hr(),...ii(),...Li()},"VSheet"),rd=Lt()({name:"VSheet",props:sM(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color),{borderClasses:l}=zl(e),{dimensionStyles:h}=zs(e),{elevationClasses:s}=To(e),{locationStyles:p}=pg(e),{positionClasses:v}=A_(e),{roundedClasses:x}=is(e);return Ut(()=>ue(e.tag,{class:Tt(["v-sheet",i.value,r.value,l.value,s.value,v.value,x.value,e.class]),style:Yt([a.value,h.value,p.value,e.style])},n)),{}}});function vae(e){const t=nn(e());let n=-1;function i(){clearInterval(n)}function r(){i(),Gn(()=>t.value=e())}function a(l){const h=l?getComputedStyle(l):{transitionDuration:.2},s=parseFloat(h.transitionDuration)*1e3||200;if(i(),t.value<=0)return;const p=performance.now();n=window.setInterval(()=>{const v=performance.now()-p+s;t.value=Math.max(e()-v,0),t.value<=0&&i()},s)}return lo(i),{clear:i,time:t,start:a,reset:r}}const W8=ut({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Lh({location:"bottom"}),...I_(),...Hr(),...$c(),...Li(),...mr(Xb({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy","stickToTarget"])},"VSnackbar"),Qw=Lt()({name:"VSnackbar",props:W8(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),{positionClasses:r}=A_(e),{scopeId:a}=vg(),{themeClasses:l}=nr(e),{colorClasses:h,colorStyles:s,variantClasses:p}=hg(e),{roundedClasses:v}=is(e),x=vae(()=>Number(e.timeout)),T=it(),C=it(),I=nn(!1),P=nn(0),D=it(),F=ki(Q0,void 0);ua(()=>!!F,()=>{const te=g2();Wr(()=>{D.value=te.mainStyles.value})}),Zt(i,H),Zt(()=>e.timeout,H),Dr(()=>{i.value&&H()});let V=-1;function H(){x.reset(),window.clearTimeout(V);const te=Number(e.timeout);if(!i.value||te===-1)return;const Z=SP(C.value);x.start(Z),V=window.setTimeout(()=>{i.value=!1},te)}function q(){x.reset(),window.clearTimeout(V)}function K(){I.value=!0,q()}function ie(){I.value=!1,H()}function X(te){P.value=te.touches[0].clientY}function $(te){Math.abs(P.value-te.changedTouches[0].clientY)>50&&(i.value=!1)}function G(){I.value&&ie()}const j=me(()=>e.location.split(" ").reduce((te,Z)=>(te[`v-snackbar--${Z}`]=!0,te),{}));return Ut(()=>{const te=fd.filterProps(e),Z=!!(n.default||n.text||e.text);return ue(fd,Dt({ref:T,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},j.value,r.value,e.class],style:[D.value,e.style]},te,{modelValue:i.value,"onUpdate:modelValue":ee=>i.value=ee,contentProps:Dt({class:["v-snackbar__wrapper",l.value,h.value,v.value,p.value],style:[s.value],onPointerenter:K,onPointerleave:ie},te.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:X,onTouchend:$,onAfterLeave:G},a),{default:()=>{var ee,be;return[vm(!1,"v-snackbar"),e.timer&&!I.value&&B("div",{key:"timer",class:"v-snackbar__timer"},[ue(jb,{ref:C,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,modelValue:x.time.value},null)]),Z&&B("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((ee=n.text)==null?void 0:ee.call(n))??e.text,(be=n.default)==null?void 0:be.call(n)]),n.actions&&ue(di,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[B("div",{class:"v-snackbar__actions"},[n.actions({isActive:i})])]})]},activator:n.activator})}),So({},T)}}),_ae={class:"rp-map-wrap"},yae={class:"rp-ctrl-left"},bae={class:"rp-ctrl-right"},xae={key:1,class:"rp-fare"},wae={class:"fare-chip-grid"},Tae={class:"fare-chip-label"},Sae={class:"fare-chip-amount"},Eae={key:2,class:"rp-segments"},Cae={class:"segment-line"},kae={class:"segment-line-name"},Iae={class:"segment-stops"},Aae={class:"segment-route"},Pae={class:"segment-station"},Mae={class:"segment-station"},PC="singatrain-railrouter-neutralize",Dae=bB({name:"RoutePlanner",__name:"RoutePlanner",setup(e){const t=it("Jurong East"),n=it("Marina Bay"),i=it(!1),r=it(null),a=it(null),l=it([]),h=it(null),s=it(null),p=QT(),{smAndDown:v}=Fl(),x=me(()=>p.global.current.value.dark),T=it(!1),C=it(null);let I=null,P=null;const D=new Map,F=it([]),V=[];let H=null;const q=it(!1);let K=null;const{progressIndex:ie,segmentProgress:X,routeStationIds:$,totalStops:G,startAnimation:j,resetAnimation:te,attachRenderer:Z,detachRenderer:ee}=Ore(),{allStations:be,shortestPath:Ie,estimateTimeMinutes:Ve,estimateDistanceKm:Ke,summariseSegments:Xe}=BP(),{fareByType:Pe}=b2(),$e=[{type:"adult",label:"Adult",color:"#f97316"},{type:"senior",label:"Senior Citizen",color:"#0d9488"},{type:"disability",label:"Persons with Disabilities",color:"#6366f1"},{type:"workfare",label:"Workfare Concession",color:"#db2777"},{type:"primary",label:"Primary Student",color:"#2563eb"},{type:"secondary",label:"Secondary Student",color:"#1d4ed8"},{type:"polytechnic",label:"Polytechnic Student",color:"#4f46e5"},{type:"university",label:"University Student",color:"#0284c7"},{type:"ns",label:"National Serviceman",color:"#f97316"}];l.value=be.map(zt=>({id:zt,name:zt})),!t.value&&l.value.length&&(t.value=l.value[0].id),!n.value&&l.value.length>1&&(n.value=l.value[1].id);const Ee="./",We=`${Ee}railrouter/index.61d3354a.css`,Ze=`${Ee}railrouter/index.975ef6c8.js`,ct=`${Ee}sg-rail.geojson`;async function kt(){if(!D.size)try{const zt=await fetch(ct);if(!zt.ok)throw new Error("Failed to load station coordinates.");((await zt.json()).features??[]).filter(Ln=>Ln.properties.stop_type==="station").forEach(Ln=>{D.set(Ln.properties.name,{coords:Ln.geometry.coordinates,codes:Ln.properties.station_codes,id:Ln.id})})}catch(zt){throw console.error(zt),new Error("Could not load station metadata. Please refresh and try again.")}}function Nt(zt){return new Promise((un,An)=>{if(document.querySelector(`link[data-railrouter="true"][href="${zt}"]`)){un();return}const Ln=document.createElement("link");Ln.rel="stylesheet",Ln.href=zt,Ln.dataset.railrouter="true",Ln.onload=()=>un(),Ln.onerror=()=>An(new Error(`Failed to load RailRouter stylesheet: ${zt}`)),document.head.appendChild(Ln)})}function ot(zt){return new Promise((un,An)=>{if(document.querySelector(`script[data-railrouter="true"][src="${zt}"]`)){un();return}const Ln=document.createElement("script");Ln.src=zt,Ln.async=!0,Ln.dataset.railrouter="true",Ln.onload=()=>un(),Ln.onerror=()=>An(new Error(`Failed to load RailRouter script: ${zt}`)),document.body.appendChild(Ln)})}async function dt(){On(),T.value||(await Promise.all([Nt(We),ot(Ze)]),T.value=!0)}function Je(zt=1e4){return new Promise(un=>{const An=performance.now(),Ln=()=>{if(window.$map){un(window.$map);return}if(performance.now()-An>zt){un(null);return}requestAnimationFrame(Ln)};Ln()})}function yt(){if(!I)return;const zt=I,un="singatrain-route",An="singatrain-route-glow",Ln="singatrain-route-line",wi=()=>{zt.getSource(un)||zt.addSource(un,{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:[]}}}),zt.getLayer(An)||zt.addLayer({id:An,type:"line",source:un,paint:{"line-color":"#f97316","line-width":12,"line-opacity":.25}}),zt.getLayer(Ln)||zt.addLayer({id:Ln,type:"line",source:un,paint:{"line-color":"#f97316","line-width":5}})};zt.isStyleLoaded()?wi():zt.once("styledata",wi)}function Ne(){if(!I)return;const zt=I.getSource("singatrain-route");if(!zt)return;const un=F.value.filter(An=>Array.isArray(An));zt.setData({type:"Feature",geometry:{type:"LineString",coordinates:un}})}function le(){V.forEach(zt=>zt==null?void 0:zt.marker.remove()),V.length=0,H==null||H.remove(),H=null}function we(){if(!I)return;le(),F.value.forEach((un,An)=>{if(!un){V.push(null);return}const Ln=document.createElement("div");Ln.className="route-stop route-stop-upcoming",Ln.dataset.index=String(An);const wi=new y0.Marker({element:Ln,anchor:"center"}).setLngLat(un).addTo(I);V.push({marker:wi,el:Ln})});const zt=document.createElement("div");zt.className="route-train-marker",zt.innerHTML='<span class="material-icons">train</span>',H=new y0.Marker({element:zt,anchor:"center"}),F.value[0]&&H.setLngLat(F.value[0]).addTo(I)}function _e(zt){V.forEach((un,An)=>{un&&(un.el.classList.toggle("route-stop-active",An===zt),un.el.classList.toggle("route-stop-visited",An<zt),un.el.classList.toggle("route-stop-upcoming",An>zt))})}function fe(){if(!I||!H)return;const zt=ie.value,un=F.value[zt],An=F.value[zt+1]??un;if(!un)return;if(!An){H.setLngLat(un);return}const Ln=X.value,wi=un[0]+(An[0]-un[0])*Ln,hi=un[1]+(An[1]-un[1])*Ln;H.setLngLat([wi,hi])}function Fe(zt){return{"--segment-color":uh(zt)}}function rt(zt){if(!I)return;const un=F.value[zt];if(!un)return;const An=v.value?12.3:13.2;I.easeTo({center:un,zoom:Math.max(I.getZoom(),An),duration:850})}function pt(zt){if(!I)return;const un=I.getCanvas();un.style.filter=zt?"invert(0.92) hue-rotate(180deg)":""}async function vt(){await dt(),await kt(),await Gn();const zt=await Je();if(!zt){r.value="Unable to initialise RailRouter map.";return}I=zt,yt(),pt(x.value),P=new ResizeObserver(()=>I==null?void 0:I.resize()),C.value&&P.observe(C.value),zt.resize(),zt.isStyleLoaded()?zt.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0}):zt.once("styledata",()=>{zt.easeTo({center:[103.8198,1.3521],zoom:11.5,duration:0})})}function gt(){ee(),le(),P&&C.value&&P.unobserve(C.value),P==null||P.disconnect(),P=null,I&&(I.getLayer("singatrain-route-line")&&I.removeLayer("singatrain-route-line"),I.getLayer("singatrain-route-glow")&&I.removeLayer("singatrain-route-glow"),I.getSource("singatrain-route")&&I.removeSource("singatrain-route"),I.remove()),I=null,qn()}async function mt(zt,un){var fs;const An=Ie(zt,un);if(!An||!((fs=An.steps)!=null&&fs.length))throw new Error("No valid route found.");const Ln=Ve(An.totalWeight),wi=Ke(An.totalWeight),hi=Xe(An);return h.value={estimatedTime:Ln,distanceKm:wi,segments:hi},An.steps.map(Ji=>Ji.station)}async function Vt(zt,un){if(!h.value)return;const An=h.value.distanceKm,Ln="SGD";s.value=$e.map(({type:wi,label:hi,color:fs})=>({type:wi,label:hi,amount:Number(Pe(An,wi)),currency:Ln,color:fs}))}async function Gt(){r.value=null,s.value=null,h.value=null,i.value=!0;try{if(!t.value||!n.value)throw new Error("Please select a start and end station.");if(t.value===n.value)throw new Error("Pick two different stations to plan a journey.");if(ee(),te(),I||await vt(),!I)throw new Error("RailRouter map is still initialising. Please try again shortly.");const zt=await mt(t.value,n.value);if(!zt||zt.length<2)throw new Error("No valid route found.");$.value=zt,G.value=zt.length,F.value=zt.map(un=>{const An=D.get(un);return An?An.coords:(console.warn("Missing coordinates for station:",un),null)}),yt(),Ne(),we(),_e(0),fe(),rt(0),await Vt(t.value,n.value),Z(un=>{_e(un),rt(un)}),j(),a.value=Date.now()}catch(zt){r.value=(zt==null?void 0:zt.message)??"Failed to plan route."}finally{i.value=!1}}function gn(){te(),$.value.length>1&&(_e(0),rt(0),j())}function In(){q.value=!0,K&&window.clearTimeout(K),K=window.setTimeout(()=>{q.value=!1,K=null},3200)}Zt(x,zt=>pt(zt)),Zt([ie,X],fe),Zt($,()=>{q.value=!1});function On(){if(typeof window>"u"||document.getElementById(PC))return;const zt=document.createElement("style");zt.id=PC,zt.textContent=`
    html {
      position: static !important;
      inset: auto !important;
      overflow: auto !important;
      height: 100% !important;
    }
    body {
      overflow: auto !important;
      position: static !important;
      min-height: 100vh !important;
      height: 100% !important;
    }
  `,document.head.appendChild(zt)}function qn(){if(typeof window>"u")return;const zt=document.getElementById(PC);zt!=null&&zt.parentNode&&zt.parentNode.removeChild(zt)}return Dr(async()=>{window.addEventListener("route-animation-arrived",In),await vt()}),sA(()=>{On()}),yT(()=>{qn()}),jr(()=>{window.removeEventListener("route-animation-arrived",In),K&&window.clearTimeout(K),gt(),qn()}),(zt,un)=>(Kt(),za(D8,{class:"pa-0"},{default:yi(()=>[ue(Cv,{class:"rp-card",rounded:"xl",elevation:"1"},{default:yi(()=>{var An,Ln,wi;return[un[9]||(un[9]=B("div",{class:"rp-header"},[B("div",{class:"rp-title"},[B("h1",null,"Plan your MRT route"),B("p",{class:"subtitle"}," Smart MRT navigation for Singapore ")])],-1)),B("div",{class:Tt(["rp-form",{stacked:Ti(v)}])},[ue(hI,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:t.value,"onUpdate:modelValue":un[0]||(un[0]=hi=>t.value=hi),label:"Start station",placeholder:"Type to search...",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-map-marker",clearable:"","auto-select-first":""},null,8,["items","modelValue"]),ue(hI,{class:"rp-input",items:l.value,"item-title":"name","item-value":"id",modelValue:n.value,"onUpdate:modelValue":un[1]||(un[1]=hi=>n.value=hi),label:"End station",placeholder:"Type to search...",variant:"outlined",density:"comfortable","hide-details":"","menu-props":{maxHeight:320},"prepend-inner-icon":"mdi-flag-checkered",clearable:"","auto-select-first":""},null,8,["items","modelValue"]),ue(gi,{class:"rp-plan",color:"orange",variant:"flat",height:"48","prepend-icon":"mdi-transit-connection-variant",loading:i.value,onClick:Gt},{default:yi(()=>[...un[4]||(un[4]=[zn(" Plan Route ",-1)])]),_:1},8,["loading"])],2),r.value?(Kt(),za(D2,{key:0,type:"error",variant:"tonal",class:"mt-2",density:"comfortable"},{default:yi(()=>[zn(tn(r.value),1)]),_:1})):Si("",!0),B("div",_ae,[B("div",{ref_key:"railRouterShell",ref:C,class:"railrouter-shell"},[...un[5]||(un[5]=[B("div",{id:"station",class:"sheet"},null,-1),B("button",{type:"button",class:"sheet-close"},null,-1),B("div",{id:"map",class:"railrouter-map"},null,-1),B("div",{id:"home",class:"sheet modal"},[B("button",{type:"button",class:"btn",id:"btn-close-home"},"Let's explore!")],-1),B("details",{id:"legend"},[B("summary",null,"Legend"),B("div",{id:"crowded-timing"})],-1),B("div",{id:"logo",tabindex:"-1"},null,-1),B("div",{id:"search",hidden:""},[B("div",{id:"search-field-container"},[B("input",{id:"search-field",type:"search",autocomplete:"off",spellcheck:"false"}),B("button",{type:"button",id:"search-cancel"},"Cancel")]),B("ul",{id:"search-results"})],-1)])],512),ue(rd,{class:"rp-controls",rounded:"lg",elevation:"1"},{default:yi(()=>[B("div",yae,[ue(Ls,{size:"small",variant:"outlined","prepend-icon":"mdi-counter"},{default:yi(()=>[zn(tn(Ti(ie)+1)+" / "+tn(Math.max(Ti(G),0))+" stops ",1)]),_:1}),h.value?(Kt(),za(Ls,{key:0,size:"small",variant:"outlined","prepend-icon":"mdi-timer-sand"},{default:yi(()=>[zn(tn(h.value.estimatedTime)+" min  "+tn(h.value.distanceKm.toFixed(1))+" km ",1)]),_:1})):Si("",!0)]),B("div",bae,[ue(gi,{class:"ctrl-btn",variant:"outlined",height:"40","prepend-icon":"mdi-restart",onClick:gn},{default:yi(()=>[...un[6]||(un[6]=[zn(" Restart ",-1)])]),_:1})])]),_:1})]),(An=s.value)!=null&&An.length?(Kt(),an("div",xae,[un[7]||(un[7]=B("div",{class:"fare-caption"},[B("span",{class:"material-icons"},"savings"),B("span",null,"Estimated fares by commuter class")],-1)),B("div",wae,[(Kt(!0),an(ln,null,us(s.value,hi=>(Kt(),an("div",{key:hi.type,class:"fare-chip",style:Yt({"--fare-color":hi.color})},[B("span",Tae,tn(hi.label),1),B("span",Sae,tn(hi.amount.toFixed(2))+" "+tn(hi.currency),1)],4))),128))])])):Si("",!0),(wi=(Ln=h.value)==null?void 0:Ln.segments)!=null&&wi.length?(Kt(),an("div",Eae,[(Kt(!0),an(ln,null,us(h.value.segments,hi=>(Kt(),za(rd,{key:hi.line+hi.from,class:"segment-sheet",rounded:"lg",elevation:"0",style:Yt(Fe(hi.line))},{default:yi(()=>[B("div",Cae,[B("span",kae,tn(hi.line),1),B("small",Iae,tn(hi.stops===1?"1 stop":`${hi.stops} stops`),1)]),B("div",Aae,[B("span",Pae,tn(hi.from),1),un[8]||(un[8]=B("span",{class:"material-icons segment-arrow"},"arrow_forward",-1)),B("span",Mae,tn(hi.to),1)])]),_:2},1032,["style"]))),128))])):Si("",!0)]}),_:1}),ue(Qw,{modelValue:q.value,"onUpdate:modelValue":un[3]||(un[3]=An=>q.value=An),timeout:"0",location:"bottom"},{actions:yi(()=>[ue(gi,{color:"orange",variant:"text",onClick:un[2]||(un[2]=An=>q.value=!1)},{default:yi(()=>[...un[10]||(un[10]=[zn("Close",-1)])]),_:1})]),default:yi(()=>[un[11]||(un[11]=zn(" Youve arrived at your destination  ",-1))]),_:1},8,["modelValue"])]),_:1}))}}),_g=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Lae=_g(Dae,[["__scopeId","data-v-adb58f07"]]);function Y4(e){return typeof e=="function"?e():Ti(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Z4=()=>{};function Rae(e,t){function n(...i){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(a)})}return n}const Oae=e=>e();function Vae(e,t={}){let n,i,r=Z4;const a=h=>{clearTimeout(h),r(),r=Z4};return h=>{const s=Y4(e),p=Y4(t.maxWait);return n&&a(n),s<=0||p!==void 0&&p<=0?(i&&(a(i),i=null),Promise.resolve(h())):new Promise((v,x)=>{r=t.rejectOnCancel?x:v,p&&!i&&(i=setTimeout(()=>{n&&a(n),i=null,v(h())},p)),n=setTimeout(()=>{i&&a(i),i=null,v(h())},s)})}}function Bae(e,t,n={}){const{eventFilter:i=Oae,...r}=n;return Zt(e,Rae(i,t),r)}function Fae(e,t,n={}){const{debounce:i=0,maxWait:r=void 0,...a}=n;return Bae(e,t,{...a,eventFilter:Vae(i,{maxWait:r})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Jb(e){return e+.5|0}const Rf=(e,t,n)=>Math.max(Math.min(e,n),t);function Xy(e){return Rf(Jb(e*2.55),0,255)}function qf(e){return Rf(Jb(e*255),0,255)}function oh(e){return Rf(Jb(e/2.55)/100,0,1)}function J4(e){return Rf(Jb(e*100),0,100)}const Pc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fI=[..."0123456789ABCDEF"],zae=e=>fI[e&15],Nae=e=>fI[(e&240)>>4]+fI[e&15],r1=e=>(e&240)>>4===(e&15),$ae=e=>r1(e.r)&&r1(e.g)&&r1(e.b)&&r1(e.a);function Uae(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Pc[e[1]]*17,g:255&Pc[e[2]]*17,b:255&Pc[e[3]]*17,a:t===5?Pc[e[4]]*17:255}:(t===7||t===9)&&(n={r:Pc[e[1]]<<4|Pc[e[2]],g:Pc[e[3]]<<4|Pc[e[4]],b:Pc[e[5]]<<4|Pc[e[6]],a:t===9?Pc[e[7]]<<4|Pc[e[8]]:255})),n}const jae=(e,t)=>e<255?t(e):"";function Wae(e){var t=$ae(e)?zae:Nae;return e?"#"+t(e.r)+t(e.g)+t(e.b)+jae(e.a,t):void 0}const Hae=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function H8(e,t,n){const i=t*Math.min(n,1-n),r=(a,l=(a+e/30)%12)=>n-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function Gae(e,t,n){const i=(r,a=(r+e/60)%6)=>n-n*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function qae(e,t,n){const i=H8(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Kae(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}function oM(e){const n=e.r/255,i=e.g/255,r=e.b/255,a=Math.max(n,i,r),l=Math.min(n,i,r),h=(a+l)/2;let s,p,v;return a!==l&&(v=a-l,p=h>.5?v/(2-a-l):v/(a+l),s=Kae(n,i,r,v,a),s=s*60+.5),[s|0,p||0,h]}function aM(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(qf)}function lM(e,t,n){return aM(H8,e,t,n)}function Xae(e,t,n){return aM(qae,e,t,n)}function Yae(e,t,n){return aM(Gae,e,t,n)}function G8(e){return(e%360+360)%360}function Zae(e){const t=Hae.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Xy(+t[5]):qf(+t[5]));const r=G8(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=Xae(r,a,l):t[1]==="hsv"?i=Yae(r,a,l):i=lM(r,a,l),{r:i[0],g:i[1],b:i[2],a:n}}function Jae(e,t){var n=oM(e);n[0]=G8(n[0]+t),n=lM(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Qae(e){if(!e)return;const t=oM(e),n=t[0],i=J4(t[1]),r=J4(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${r}%, ${oh(e.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Q4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},eO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ele(){const e={},t=Object.keys(eO),n=Object.keys(Q4);let i,r,a,l,h;for(i=0;i<t.length;i++){for(l=h=t[i],r=0;r<n.length;r++)a=n[r],h=h.replace(a,Q4[a]);a=parseInt(eO[l],16),e[h]=[a>>16&255,a>>8&255,a&255]}return e}let s1;function tle(e){s1||(s1=ele(),s1.transparent=[0,0,0,0]);const t=s1[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const nle=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ile(e){const t=nle.exec(e);let n=255,i,r,a;if(t){if(t[7]!==i){const l=+t[7];n=t[8]?Xy(l):Rf(l*255,0,255)}return i=+t[1],r=+t[3],a=+t[5],i=255&(t[2]?Xy(i):Rf(i,0,255)),r=255&(t[4]?Xy(r):Rf(r,0,255)),a=255&(t[6]?Xy(a):Rf(a,0,255)),{r:i,g:r,b:a,a:n}}}function rle(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${oh(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const MC=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,fv=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function sle(e,t,n){const i=fv(oh(e.r)),r=fv(oh(e.g)),a=fv(oh(e.b));return{r:qf(MC(i+n*(fv(oh(t.r))-i))),g:qf(MC(r+n*(fv(oh(t.g))-r))),b:qf(MC(a+n*(fv(oh(t.b))-a))),a:e.a+n*(t.a-e.a)}}function o1(e,t,n){if(e){let i=oM(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=lM(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function q8(e,t){return e&&Object.assign(t||{},e)}function tO(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=qf(e[3]))):(t=q8(e,{r:0,g:0,b:0,a:1}),t.a=qf(t.a)),t}function ole(e){return e.charAt(0)==="r"?ile(e):Zae(e)}class lb{constructor(t){if(t instanceof lb)return t;const n=typeof t;let i;n==="object"?i=tO(t):n==="string"&&(i=Uae(t)||tle(t)||ole(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=q8(this._rgb);return t&&(t.a=oh(t.a)),t}set rgb(t){this._rgb=tO(t)}rgbString(){return this._valid?rle(this._rgb):void 0}hexString(){return this._valid?Wae(this._rgb):void 0}hslString(){return this._valid?Qae(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,r=t.rgb;let a;const l=n===a?.5:n,h=2*l-1,s=i.a-r.a,p=((h*s===-1?h:(h+s)/(1+h*s))+1)/2;a=1-p,i.r=255&p*i.r+a*r.r+.5,i.g=255&p*i.g+a*r.g+.5,i.b=255&p*i.b+a*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=sle(this._rgb,t._rgb,n)),this}clone(){return new lb(this.rgb)}alpha(t){return this._rgb.a=qf(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Jb(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return o1(this._rgb,2,t),this}darken(t){return o1(this._rgb,2,-t),this}saturate(t){return o1(this._rgb,1,t),this}desaturate(t){return o1(this._rgb,1,-t),this}rotate(t){return Jae(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Zd(){}const ale=(()=>{let e=0;return()=>e++})();function zi(e){return e==null}function ds(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ji(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Vs(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Jl(e,t){return Vs(e)?e:t}function Ei(e,t){return typeof e>"u"?t:e}const lle=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,K8=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Xr(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Pr(e,t,n,i){let r,a,l;if(ds(e))for(a=e.length,r=0;r<a;r++)t.call(n,e[r],r);else if(ji(e))for(l=Object.keys(e),a=l.length,r=0;r<a;r++)t.call(n,e[l[r]],l[r])}function eT(e,t){let n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function tT(e){if(ds(e))return e.map(tT);if(ji(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=tT(e[n[r]]);return t}return e}function X8(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function cle(e,t,n,i){if(!X8(e))return;const r=t[e],a=n[e];ji(r)&&ji(a)?cb(r,a,i):t[e]=tT(a)}function cb(e,t,n){const i=ds(t)?t:[t],r=i.length;if(!ji(e))return e;n=n||{};const a=n.merger||cle;let l;for(let h=0;h<r;++h){if(l=i[h],!ji(l))continue;const s=Object.keys(l);for(let p=0,v=s.length;p<v;++p)a(s[p],e,l,n)}return e}function b0(e,t){return cb(e,t,{merger:ule})}function ule(e,t,n){if(!X8(e))return;const i=t[e],r=n[e];ji(i)&&ji(r)?b0(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tT(r))}const nO={"":e=>e,x:e=>e.x,y:e=>e.y};function dle(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function hle(e){const t=dle(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function um(e,t){return(nO[t]||(nO[t]=hle(t)))(e)}function cM(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ub=e=>typeof e<"u",dm=e=>typeof e=="function",iO=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function fle(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const fr=Math.PI,es=2*fr,mle=es+fr,nT=Number.POSITIVE_INFINITY,ple=fr/180,qs=fr/2,cp=fr/4,rO=fr*2/3,Of=Math.log10,sd=Math.sign;function x0(e,t,n){return Math.abs(e-t)<n}function sO(e){const t=Math.round(e);e=x0(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Of(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function gle(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((r,a)=>r-a).pop(),t}function vle(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function f_(e){return!vle(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function _le(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Y8(e,t,n){let i,r,a;for(i=0,r=e.length;i<r;i++)a=e[i][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function du(e){return e*(fr/180)}function uM(e){return e*(180/fr)}function oO(e){if(!Vs(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Z8(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let a=Math.atan2(i,n);return a<-.5*fr&&(a+=es),{angle:a,distance:r}}function mI(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function yle(e,t){return(e-t+mle)%es-fr}function Ra(e){return(e%es+es)%es}function db(e,t,n,i){const r=Ra(e),a=Ra(t),l=Ra(n),h=Ra(a-r),s=Ra(l-r),p=Ra(r-a),v=Ra(r-l);return r===a||r===l||i&&a===l||h>s&&p<v}function zo(e,t,n){return Math.max(t,Math.min(n,e))}function ble(e){return zo(e,-32768,32767)}function fh(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function dM(e,t,n){n=n||(l=>e[l]<t);let i=e.length-1,r=0,a;for(;i-r>1;)a=r+i>>1,n(a)?r=a:i=a;return{lo:r,hi:i}}const mh=(e,t,n,i)=>dM(e,n,i?r=>{const a=e[r][t];return a<n||a===n&&e[r+1][t]===n}:r=>e[r][t]<n),xle=(e,t,n)=>dM(e,n,i=>e[i][t]>=n);function wle(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}const J8=["push","pop","shift","splice","unshift"];function Tle(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),J8.forEach(n=>{const i="_onData"+cM(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...a){const l=r.apply(this,a);return e._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...a)}),l}})})}function aO(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(J8.forEach(a=>{delete e[a]}),delete e._chartjs)}function Q8(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const e9=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function t9(e,t){let n=[],i=!1;return function(...r){n=r,i||(i=!0,e9.call(window,()=>{i=!1,e.apply(t,n)}))}}function Sle(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const hM=e=>e==="start"?"left":e==="end"?"right":"center",Ma=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Ele=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t;function n9(e,t,n){const i=t.length;let r=0,a=i;if(e._sorted){const{iScale:l,vScale:h,_parsed:s}=e,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,v=l.axis,{min:x,max:T,minDefined:C,maxDefined:I}=l.getUserBounds();if(C){if(r=Math.min(mh(s,v,x).lo,n?i:mh(t,v,l.getPixelForValue(x)).lo),p){const P=s.slice(0,r+1).reverse().findIndex(D=>!zi(D[h.axis]));r-=Math.max(0,P)}r=zo(r,0,i-1)}if(I){let P=Math.max(mh(s,l.axis,T,!0).hi+1,n?0:mh(t,v,l.getPixelForValue(T),!0).hi+1);if(p){const D=s.slice(P-1).findIndex(F=>!zi(F[h.axis]));P+=Math.max(0,D)}a=zo(P,r,i)-r}else a=i-r}return{start:r,count:a}}function i9(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),a}const a1=e=>e===0||e===1,lO=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*es/n)),cO=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*es/n)+1,w0={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*qs)+1,easeOutSine:e=>Math.sin(e*qs),easeInOutSine:e=>-.5*(Math.cos(fr*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>a1(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>a1(e)?e:lO(e,.075,.3),easeOutElastic:e=>a1(e)?e:cO(e,.075,.3),easeInOutElastic(e){return a1(e)?e:e<.5?.5*lO(e*2,.1125,.45):.5+.5*cO(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-w0.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?w0.easeInBounce(e*2)*.5:w0.easeOutBounce(e*2-1)*.5+.5};function fM(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function uO(e){return fM(e)?e:new lb(e)}function DC(e){return fM(e)?e:new lb(e).saturate(.5).darken(.1).hexString()}const Cle=["x","y","borderWidth","radius","tension"],kle=["color","borderColor","backgroundColor"];function Ile(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:kle},numbers:{type:"number",properties:Cle}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ale(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const dO=new Map;function Ple(e,t){t=t||{};const n=e+JSON.stringify(t);let i=dO.get(n);return i||(i=new Intl.NumberFormat(e,t),dO.set(n,i)),i}function Qb(e,t,n){return Ple(t,n).format(e)}const r9={values(e){return ds(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let r,a=e;if(n.length>1){const p=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),a=Mle(e,n)}const l=Of(Math.abs(a)),h=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),s={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(s,this.options.ticks.format),Qb(e,i,s)},logarithmic(e,t,n){if(e===0)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Of(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?r9.numeric.call(this,e,t,n):""}};function Mle(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var aS={formatters:r9};function Dle(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Zp=Object.create(null),pI=Object.create(null);function T0(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const a=n[i];e=e[a]||(e[a]=Object.create(null))}return e}function LC(e,t,n){return typeof t=="string"?cb(T0(e,t),n):cb(T0(e,""),t)}class Lle{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>DC(r.backgroundColor),this.hoverBorderColor=(i,r)=>DC(r.borderColor),this.hoverColor=(i,r)=>DC(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return LC(this,t,n)}get(t){return T0(this,t)}describe(t,n){return LC(pI,t,n)}override(t,n){return LC(Zp,t,n)}route(t,n,i,r){const a=T0(this,t),l=T0(this,i),h="_"+n;Object.defineProperties(a,{[h]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const s=this[h],p=l[r];return ji(s)?Object.assign({},p,s):Ei(s,p)},set(s){this[h]=s}}})}apply(t){t.forEach(n=>n(this))}}var hs=new Lle({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ile,Ale,Dle]);function Rle(e){return!e||zi(e.size)||zi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function iT(e,t,n,i,r){let a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i}function Ole(e,t,n,i){i=i||{};let r=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let l=0;const h=n.length;let s,p,v,x,T;for(s=0;s<h;s++)if(x=n[s],x!=null&&!ds(x))l=iT(e,r,a,l,x);else if(ds(x))for(p=0,v=x.length;p<v;p++)T=x[p],T!=null&&!ds(T)&&(l=iT(e,r,a,l,T));e.restore();const C=a.length/2;if(C>n.length){for(s=0;s<C;s++)delete r[a[s]];a.splice(0,C)}return l}function up(e,t,n){const i=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function hO(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function gI(e,t,n,i){s9(e,t,n,i,null)}function s9(e,t,n,i,r){let a,l,h,s,p,v,x,T;const C=t.pointStyle,I=t.rotation,P=t.radius;let D=(I||0)*ple;if(C&&typeof C=="object"&&(a=C.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(D),e.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),e.restore();return}if(!(isNaN(P)||P<=0)){switch(e.beginPath(),C){default:r?e.ellipse(n,i,r/2,P,0,0,es):e.arc(n,i,P,0,es),e.closePath();break;case"triangle":v=r?r/2:P,e.moveTo(n+Math.sin(D)*v,i-Math.cos(D)*P),D+=rO,e.lineTo(n+Math.sin(D)*v,i-Math.cos(D)*P),D+=rO,e.lineTo(n+Math.sin(D)*v,i-Math.cos(D)*P),e.closePath();break;case"rectRounded":p=P*.516,s=P-p,l=Math.cos(D+cp)*s,x=Math.cos(D+cp)*(r?r/2-p:s),h=Math.sin(D+cp)*s,T=Math.sin(D+cp)*(r?r/2-p:s),e.arc(n-x,i-h,p,D-fr,D-qs),e.arc(n+T,i-l,p,D-qs,D),e.arc(n+x,i+h,p,D,D+qs),e.arc(n-T,i+l,p,D+qs,D+fr),e.closePath();break;case"rect":if(!I){s=Math.SQRT1_2*P,v=r?r/2:s,e.rect(n-v,i-s,2*v,2*s);break}D+=cp;case"rectRot":x=Math.cos(D)*(r?r/2:P),l=Math.cos(D)*P,h=Math.sin(D)*P,T=Math.sin(D)*(r?r/2:P),e.moveTo(n-x,i-h),e.lineTo(n+T,i-l),e.lineTo(n+x,i+h),e.lineTo(n-T,i+l),e.closePath();break;case"crossRot":D+=cp;case"cross":x=Math.cos(D)*(r?r/2:P),l=Math.cos(D)*P,h=Math.sin(D)*P,T=Math.sin(D)*(r?r/2:P),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"star":x=Math.cos(D)*(r?r/2:P),l=Math.cos(D)*P,h=Math.sin(D)*P,T=Math.sin(D)*(r?r/2:P),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l),D+=cp,x=Math.cos(D)*(r?r/2:P),l=Math.cos(D)*P,h=Math.sin(D)*P,T=Math.sin(D)*(r?r/2:P),e.moveTo(n-x,i-h),e.lineTo(n+x,i+h),e.moveTo(n+T,i-l),e.lineTo(n-T,i+l);break;case"line":l=r?r/2:Math.cos(D)*P,h=Math.sin(D)*P,e.moveTo(n-l,i-h),e.lineTo(n+l,i+h);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(D)*(r?r/2:P),i+Math.sin(D)*P);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ph(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function lS(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function cS(e){e.restore()}function Vle(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else r==="after"!=!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Ble(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Fle(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),zi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function zle(e,t,n,i,r){if(r.strikethrough||r.underline){const a=e.measureText(i),l=t-a.actualBoundingBoxLeft,h=t+a.actualBoundingBoxRight,s=n-a.actualBoundingBoxAscent,p=n+a.actualBoundingBoxDescent,v=r.strikethrough?(s+p)/2:p;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,v),e.lineTo(h,v),e.stroke()}}function Nle(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Jp(e,t,n,i,r,a={}){const l=ds(t)?t:[t],h=a.strokeWidth>0&&a.strokeColor!=="";let s,p;for(e.save(),e.font=r.string,Fle(e,a),s=0;s<l.length;++s)p=l[s],a.backdrop&&Nle(e,a.backdrop),h&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),zi(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(p,n,i,a.maxWidth)),e.fillText(p,n,i,a.maxWidth),zle(e,n,i,p,a),i+=Number(r.lineHeight);e.restore()}function hb(e,t){const{x:n,y:i,w:r,h:a,radius:l}=t;e.arc(n+l.topLeft,i+l.topLeft,l.topLeft,1.5*fr,fr,!0),e.lineTo(n,i+a-l.bottomLeft),e.arc(n+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,fr,qs,!0),e.lineTo(n+r-l.bottomRight,i+a),e.arc(n+r-l.bottomRight,i+a-l.bottomRight,l.bottomRight,qs,0,!0),e.lineTo(n+r,i+l.topRight),e.arc(n+r-l.topRight,i+l.topRight,l.topRight,0,-qs,!0),e.lineTo(n+l.topLeft,i)}const $le=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ule=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jle(e,t){const n=(""+e).match($le);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Wle=e=>+e||0;function mM(e,t){const n={},i=ji(t),r=i?Object.keys(t):t,a=ji(e)?i?l=>Ei(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=Wle(a(l));return n}function o9(e){return mM(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Fp(e){return mM(e,["topLeft","topRight","bottomLeft","bottomRight"])}function qa(e){const t=o9(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function yo(e,t){e=e||{},t=t||hs.font;let n=Ei(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=Ei(e.style,t.style);i&&!(""+i).match(Ule)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ei(e.family,t.family),lineHeight:jle(Ei(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Ei(e.weight,t.weight),string:""};return r.string=Rle(r),r}function Yy(e,t,n,i){let r,a,l;for(r=0,a=e.length;r<a;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function Hle(e,t,n){const{min:i,max:r}=e,a=K8(t,(r-i)/2),l=(h,s)=>n&&h===0?0:h+s;return{min:l(i,-Math.abs(a)),max:l(r,a)}}function ym(e,t){return Object.assign(Object.create(e),t)}function pM(e,t=[""],n,i,r=()=>e[0]){const a=n||e;typeof i>"u"&&(i=u9("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:r,override:h=>pM([h,...e],t,a,i)};return new Proxy(l,{deleteProperty(h,s){return delete h[s],delete h._keys,delete e[0][s],!0},get(h,s){return l9(h,s,()=>Qle(s,t,e,h))},getOwnPropertyDescriptor(h,s){return Reflect.getOwnPropertyDescriptor(h._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(h,s){return mO(h).includes(s)},ownKeys(h){return mO(h)},set(h,s,p){const v=h._storage||(h._storage=r());return h[s]=v[s]=p,delete h._keys,!0}})}function m_(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:a9(e,i),setContext:a=>m_(e,a,n,i),override:a=>m_(e.override(a),t,n,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete e[l],!0},get(a,l,h){return l9(a,l,()=>qle(a,l,h))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(a,l,h){return e[l]=h,delete a[l],!0}})}function a9(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:dm(n)?n:()=>n,isIndexable:dm(i)?i:()=>i}}const Gle=(e,t)=>e?e+cM(t):t,gM=(e,t)=>ji(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function l9(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function qle(e,t,n){const{_proxy:i,_context:r,_subProxy:a,_descriptors:l}=e;let h=i[t];return dm(h)&&l.isScriptable(t)&&(h=Kle(t,h,e,n)),ds(h)&&h.length&&(h=Xle(t,h,e,l.isIndexable)),gM(t,h)&&(h=m_(h,r,a&&a[t],l)),h}function Kle(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_stack:h}=n;if(h.has(e))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+e);h.add(e);let s=t(a,l||i);return h.delete(e),gM(e,s)&&(s=vM(r._scopes,r,e,s)),s}function Xle(e,t,n,i){const{_proxy:r,_context:a,_subProxy:l,_descriptors:h}=n;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if(ji(t[0])){const s=t,p=r._scopes.filter(v=>v!==s);t=[];for(const v of s){const x=vM(p,r,e,v);t.push(m_(x,a,l&&l[e],h))}}return t}function c9(e,t,n){return dm(e)?e(t,n):e}const Yle=(e,t)=>e===!0?t:typeof e=="string"?um(t,e):void 0;function Zle(e,t,n,i,r){for(const a of t){const l=Yle(n,a);if(l){e.add(l);const h=c9(l._fallback,n,r);if(typeof h<"u"&&h!==n&&h!==i)return h}else if(l===!1&&typeof i<"u"&&n!==i)return null}return!1}function vM(e,t,n,i){const r=t._rootScopes,a=c9(t._fallback,n,i),l=[...e,...r],h=new Set;h.add(i);let s=fO(h,l,n,a||n,i);return s===null||typeof a<"u"&&a!==n&&(s=fO(h,l,a,s,i),s===null)?!1:pM(Array.from(h),[""],r,a,()=>Jle(t,n,i))}function fO(e,t,n,i,r){for(;n;)n=Zle(e,t,n,i,r);return n}function Jle(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];return ds(r)&&ji(n)?n:r||{}}function Qle(e,t,n,i){let r;for(const a of t)if(r=u9(Gle(a,e),n),typeof r<"u")return gM(e,r)?vM(n,i,e,r):r}function u9(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function mO(e){let t=e._keys;return t||(t=e._keys=ece(e._scopes)),t}function ece(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function d9(e,t,n,i){const{iScale:r}=e,{key:a="r"}=this._parsing,l=new Array(i);let h,s,p,v;for(h=0,s=i;h<s;++h)p=h+n,v=t[p],l[h]={r:r.parse(um(v,a),p)};return l}const tce=Number.EPSILON||1e-14,p_=(e,t)=>t<e.length&&!e[t].skip&&e[t],h9=e=>e==="x"?"y":"x";function nce(e,t,n,i){const r=e.skip?t:e,a=t,l=n.skip?t:n,h=mI(a,r),s=mI(l,a);let p=h/(h+s),v=s/(h+s);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const x=i*p,T=i*v;return{previous:{x:a.x-x*(l.x-r.x),y:a.y-x*(l.y-r.y)},next:{x:a.x+T*(l.x-r.x),y:a.y+T*(l.y-r.y)}}}function ice(e,t,n){const i=e.length;let r,a,l,h,s,p=p_(e,0);for(let v=0;v<i-1;++v)if(s=p,p=p_(e,v+1),!(!s||!p)){if(x0(t[v],0,tce)){n[v]=n[v+1]=0;continue}r=n[v]/t[v],a=n[v+1]/t[v],h=Math.pow(r,2)+Math.pow(a,2),!(h<=9)&&(l=3/Math.sqrt(h),n[v]=r*l*t[v],n[v+1]=a*l*t[v])}}function rce(e,t,n="x"){const i=h9(n),r=e.length;let a,l,h,s=p_(e,0);for(let p=0;p<r;++p){if(l=h,h=s,s=p_(e,p+1),!h)continue;const v=h[n],x=h[i];l&&(a=(v-l[n])/3,h[`cp1${n}`]=v-a,h[`cp1${i}`]=x-a*t[p]),s&&(a=(s[n]-v)/3,h[`cp2${n}`]=v+a,h[`cp2${i}`]=x+a*t[p])}}function sce(e,t="x"){const n=h9(t),i=e.length,r=Array(i).fill(0),a=Array(i);let l,h,s,p=p_(e,0);for(l=0;l<i;++l)if(h=s,s=p,p=p_(e,l+1),!!s){if(p){const v=p[t]-s[t];r[l]=v!==0?(p[n]-s[n])/v:0}a[l]=h?p?sd(r[l-1])!==sd(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}ice(e,r,a),rce(e,a,t)}function l1(e,t,n){return Math.max(Math.min(e,n),t)}function oce(e,t){let n,i,r,a,l,h=ph(e[0],t);for(n=0,i=e.length;n<i;++n)l=a,a=h,h=n<i-1&&ph(e[n+1],t),a&&(r=e[n],l&&(r.cp1x=l1(r.cp1x,t.left,t.right),r.cp1y=l1(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=l1(r.cp2x,t.left,t.right),r.cp2y=l1(r.cp2y,t.top,t.bottom)))}function ace(e,t,n,i,r){let a,l,h,s;if(t.spanGaps&&(e=e.filter(p=>!p.skip)),t.cubicInterpolationMode==="monotone")sce(e,r);else{let p=i?e[e.length-1]:e[0];for(a=0,l=e.length;a<l;++a)h=e[a],s=nce(p,h,e[Math.min(a+1,l-(i?0:1))%l],t.tension),h.cp1x=s.previous.x,h.cp1y=s.previous.y,h.cp2x=s.next.x,h.cp2y=s.next.y,p=h}t.capBezierPoints&&oce(e,n)}function _M(){return typeof window<"u"&&typeof document<"u"}function yM(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rT(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const uS=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function lce(e,t){return uS(e).getPropertyValue(t)}const cce=["top","right","bottom","left"];function zp(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const a=cce[r];i[a]=parseFloat(e[t+"-"+a+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const uce=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function dce(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:a}=i;let l=!1,h,s;if(uce(r,a,e.target))h=r,s=a;else{const p=t.getBoundingClientRect();h=i.clientX-p.left,s=i.clientY-p.top,l=!0}return{x:h,y:s,box:l}}function vp(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=uS(n),a=r.boxSizing==="border-box",l=zp(r,"padding"),h=zp(r,"border","width"),{x:s,y:p,box:v}=dce(e,n),x=l.left+(v&&h.left),T=l.top+(v&&h.top);let{width:C,height:I}=t;return a&&(C-=l.width+h.width,I-=l.height+h.height),{x:Math.round((s-x)/C*n.width/i),y:Math.round((p-T)/I*n.height/i)}}function hce(e,t,n){let i,r;if(t===void 0||n===void 0){const a=e&&yM(e);if(!a)t=e.clientWidth,n=e.clientHeight;else{const l=a.getBoundingClientRect(),h=uS(a),s=zp(h,"border","width"),p=zp(h,"padding");t=l.width-p.width-s.width,n=l.height-p.height-s.height,i=rT(h.maxWidth,a,"clientWidth"),r=rT(h.maxHeight,a,"clientHeight")}}return{width:t,height:n,maxWidth:i||nT,maxHeight:r||nT}}const Vf=e=>Math.round(e*10)/10;function fce(e,t,n,i){const r=uS(e),a=zp(r,"margin"),l=rT(r.maxWidth,e,"clientWidth")||nT,h=rT(r.maxHeight,e,"clientHeight")||nT,s=hce(e,t,n);let{width:p,height:v}=s;if(r.boxSizing==="content-box"){const T=zp(r,"border","width"),C=zp(r,"padding");p-=C.width+T.width,v-=C.height+T.height}return p=Math.max(0,p-a.width),v=Math.max(0,i?p/i:v-a.height),p=Vf(Math.min(p,l,s.maxWidth)),v=Vf(Math.min(v,h,s.maxHeight)),p&&!v&&(v=Vf(p/2)),(t!==void 0||n!==void 0)&&i&&s.height&&v>s.height&&(v=s.height,p=Vf(Math.floor(v*i))),{width:p,height:v}}function pO(e,t,n){const i=t||1,r=Vf(e.height*i),a=Vf(e.width*i);e.height=Vf(e.height),e.width=Vf(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||l.height!==r||l.width!==a?(e.currentDevicePixelRatio=i,l.height=r,l.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const mce=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};_M()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function gO(e,t){const n=lce(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function _p(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function pce(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:i==="middle"?n<.5?e.y:t.y:i==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function gce(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},l=_p(e,r,n),h=_p(r,a,n),s=_p(a,t,n),p=_p(l,h,n),v=_p(h,s,n);return _p(p,v,n)}const vce=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},_ce=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Uv(e,t,n){return e?vce(t,n):_ce()}function f9(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function m9(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function p9(e){return e==="angle"?{between:db,compare:yle,normalize:Ra}:{between:fh,compare:(t,n)=>t-n,normalize:t=>t}}function vO({start:e,end:t,count:n,loop:i,style:r}){return{start:e%n,end:t%n,loop:i&&(t-e+1)%n===0,style:r}}function yce(e,t,n){const{property:i,start:r,end:a}=n,{between:l,normalize:h}=p9(i),s=t.length;let{start:p,end:v,loop:x}=e,T,C;if(x){for(p+=s,v+=s,T=0,C=s;T<C&&l(h(t[p%s][i]),r,a);++T)p--,v--;p%=s,v%=s}return v<p&&(v+=s),{start:p,end:v,loop:x,style:e.style}}function g9(e,t,n){if(!n)return[e];const{property:i,start:r,end:a}=n,l=t.length,{compare:h,between:s,normalize:p}=p9(i),{start:v,end:x,loop:T,style:C}=yce(e,t,n),I=[];let P=!1,D=null,F,V,H;const q=()=>s(r,H,F)&&h(r,H)!==0,K=()=>h(a,F)===0||s(a,H,F),ie=()=>P||q(),X=()=>!P||K();for(let $=v,G=v;$<=x;++$)V=t[$%l],!V.skip&&(F=p(V[i]),F!==H&&(P=s(F,r,a),D===null&&ie()&&(D=h(F,r)===0?$:G),D!==null&&X()&&(I.push(vO({start:D,end:$,loop:T,count:l,style:C})),D=null),G=$,H=F));return D!==null&&I.push(vO({start:D,end:x,loop:T,count:l,style:C})),I}function v9(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const a=g9(i[r],e.points,t);a.length&&n.push(...a)}return n}function bce(e,t,n,i){let r=0,a=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(a+=r);a>r&&e[a%t].skip;)a--;return a%=t,{start:r,end:a}}function xce(e,t,n,i){const r=e.length,a=[];let l=t,h=e[t],s;for(s=t+1;s<=n;++s){const p=e[s%r];p.skip||p.stop?h.skip||(i=!1,a.push({start:t%r,end:(s-1)%r,loop:i}),t=l=p.stop?s:null):(l=s,h.skip&&(t=s)),h=p}return l!==null&&a.push({start:t%r,end:l%r,loop:i}),a}function wce(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const a=!!e._loop,{start:l,end:h}=bce(n,r,a,i);if(i===!0)return _O(e,[{start:l,end:h,loop:a}],n,t);const s=h<l?h+r:h,p=!!e._fullLoop&&l===0&&h===r-1;return _O(e,xce(n,l,s,p),n,t)}function _O(e,t,n,i){return!i||!i.setContext||!n?t:Tce(e,t,n,i)}function Tce(e,t,n,i){const r=e._chart.getContext(),a=yO(e.options),{_datasetIndex:l,options:{spanGaps:h}}=e,s=n.length,p=[];let v=a,x=t[0].start,T=x;function C(I,P,D,F){const V=h?-1:1;if(I!==P){for(I+=s;n[I%s].skip;)I-=V;for(;n[P%s].skip;)P+=V;I%s!==P%s&&(p.push({start:I%s,end:P%s,loop:D,style:F}),v=F,x=P%s)}}for(const I of t){x=h?x:I.start;let P=n[x%s],D;for(T=x+1;T<=I.end;T++){const F=n[T%s];D=yO(i.setContext(ym(r,{type:"segment",p0:P,p1:F,p0DataIndex:(T-1)%s,p1DataIndex:T%s,datasetIndex:l}))),Sce(D,v)&&C(x,T-1,I.loop,v),P=F,v=D}x<T-1&&C(x,T-1,I.loop,v)}return p}function yO(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Sce(e,t){if(!t)return!1;const n=[],i=function(r,a){return fM(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function c1(e,t,n){return e.options.clip?e[n]:t[n]}function Ece(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:c1(n,t,"left"),right:c1(n,t,"right"),top:c1(i,t,"top"),bottom:c1(i,t,"bottom")}:t}function _9(e,t){const n=t._clip;if(n.disabled)return!1;const i=Ece(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cce{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,r){const a=n.listeners[r],l=n.duration;a.forEach(h=>h({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(i-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=e9.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,h=!1,s;for(;l>=0;--l)s=a[l],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),h=!0):(a[l]=a[a.length-1],a.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),a.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),n+=a.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Jd=new Cce;const bO="transparent",kce={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=uO(e||bO),r=i.valid&&uO(t||bO);return r&&r.valid?r.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Ice{constructor(t,n,i,r){const a=n[i];r=Yy([t.to,r,a,t.from]);const l=Yy([t.from,a,r]);this._active=!0,this._fn=t.fn||kce[t.type||typeof l],this._easing=w0[t.easing]||w0.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=Yy([t.to,n,r,t.from]),this._from=Yy([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,r=this._prop,a=this._from,l=this._loop,h=this._to;let s;if(this._active=a!==h&&(l||n<i),!this._active){this._target[r]=h,this._notify(!0);return}if(n<0){this._target[r]=a;return}s=n/i%2,s=l&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(a,h,s)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class y9{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ji(t))return;const n=Object.keys(hs.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const a=t[r];if(!ji(a))return;const l={};for(const h of n)l[h]=a[h];(ds(a.properties)&&a.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,l)})})}_animateOptions(t,n){const i=n.options,r=Pce(t,i);if(!r)return[];const a=this._createAnimations(r,i);return i.$shared&&Ace(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,n){const i=this._properties,r=[],a=t.$animations||(t.$animations={}),l=Object.keys(n),h=Date.now();let s;for(s=l.length-1;s>=0;--s){const p=l[s];if(p.charAt(0)==="$")continue;if(p==="options"){r.push(...this._animateOptions(t,n));continue}const v=n[p];let x=a[p];const T=i.get(p);if(x)if(T&&x.active()){x.update(T,v,h);continue}else x.cancel();if(!T||!T.duration){t[p]=v;continue}a[p]=x=new Ice(T,t,p,v),r.push(x)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Jd.add(this._chart,i),!0}}function Ace(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const a=e[i[r]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function Pce(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function xO(e,t){const n=e&&e.options||{},i=n.reverse,r=n.min===void 0?t:0,a=n.max===void 0?t:0;return{start:i?a:r,end:i?r:a}}function Mce(e,t,n){if(n===!1)return!1;const i=xO(e,n),r=xO(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Dce(e){let t,n,i,r;return ji(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:e===!1}}function b9(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,a;for(r=0,a=i.length;r<a;++r)n.push(i[r].index);return n}function wO(e,t,n,i={}){const r=e.keys,a=i.mode==="single";let l,h,s,p;if(t===null)return;let v=!1;for(l=0,h=r.length;l<h;++l){if(s=+r[l],s===n){if(v=!0,i.all)continue;break}p=e.values[s],Vs(p)&&(a||t===0||sd(t)===sd(p))&&(t+=p)}return!v&&!i.all?0:t}function Lce(e,t){const{iScale:n,vScale:i}=t,r=n.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(e),h=new Array(l.length);let s,p,v;for(s=0,p=l.length;s<p;++s)v=l[s],h[s]={[r]:v,[a]:e[v]};return h}function RC(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Rce(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Oce(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Vce(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function TO(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const a=e[r.index];if(n&&a>0||!n&&a<0)return r.index}return null}function SO(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:a,vScale:l,index:h}=i,s=a.axis,p=l.axis,v=Rce(a,l,i),x=t.length;let T;for(let C=0;C<x;++C){const I=t[C],{[s]:P,[p]:D}=I,F=I._stacks||(I._stacks={});T=F[p]=Vce(r,v,P),T[h]=D,T._top=TO(T,l,!0,i.type),T._bottom=TO(T,l,!1,i.type);const V=T._visualValues||(T._visualValues={});V[h]=D}}function OC(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function Bce(e,t){return ym(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Fce(e,t,n){return ym(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Dy(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const r of t){const a=r._stacks;if(!a||a[i]===void 0||a[i][n]===void 0)return;delete a[i][n],a[i]._visualValues!==void 0&&a[i]._visualValues[n]!==void 0&&delete a[i]._visualValues[n]}}}const VC=e=>e==="reset"||e==="none",EO=(e,t)=>t?e:Object.assign({},e),zce=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:b9(n,!0),values:null};class mu{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=RC(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Dy(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(x,T,C,I)=>x==="x"?T:x==="r"?I:C,a=n.xAxisID=Ei(i.xAxisID,OC(t,"x")),l=n.yAxisID=Ei(i.yAxisID,OC(t,"y")),h=n.rAxisID=Ei(i.rAxisID,OC(t,"r")),s=n.indexAxis,p=n.iAxisID=r(s,a,l,h),v=n.vAxisID=r(s,l,a,h);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(p),n.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&aO(this._data,this),t._stacked&&Dy(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(ji(n)){const r=this._cachedMeta;this._data=Lce(n,r)}else if(i!==n){if(i){aO(i,this);const r=this._cachedMeta;Dy(r),r._parsed=[]}n&&Object.isExtensible(n)&&Tle(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const a=n._stacked;n._stacked=RC(n.vScale,n),n.stack!==i.stack&&(r=!0,Dy(n),n.stack=i.stack),this._resyncElements(t),(r||a!==n._stacked)&&(SO(this,n._parsed),n._stacked=RC(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:r}=this,{iScale:a,_stacked:l}=i,h=a.axis;let s=t===0&&n===r.length?!0:i._sorted,p=t>0&&i._parsed[t-1],v,x,T;if(this._parsing===!1)i._parsed=r,i._sorted=!0,T=r;else{ds(r[t])?T=this.parseArrayData(i,r,t,n):ji(r[t])?T=this.parseObjectData(i,r,t,n):T=this.parsePrimitiveData(i,r,t,n);const C=()=>x[h]===null||p&&x[h]<p[h];for(v=0;v<n;++v)i._parsed[v+t]=x=T[v],s&&(C()&&(s=!1),p=x);i._sorted=s}l&&SO(this,T)}parsePrimitiveData(t,n,i,r){const{iScale:a,vScale:l}=t,h=a.axis,s=l.axis,p=a.getLabels(),v=a===l,x=new Array(r);let T,C,I;for(T=0,C=r;T<C;++T)I=T+i,x[T]={[h]:v||a.parse(p[I],I),[s]:l.parse(n[I],I)};return x}parseArrayData(t,n,i,r){const{xScale:a,yScale:l}=t,h=new Array(r);let s,p,v,x;for(s=0,p=r;s<p;++s)v=s+i,x=n[v],h[s]={x:a.parse(x[0],v),y:l.parse(x[1],v)};return h}parseObjectData(t,n,i,r){const{xScale:a,yScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=new Array(r);let v,x,T,C;for(v=0,x=r;v<x;++v)T=v+i,C=n[T],p[v]={x:a.parse(um(C,h),T),y:l.parse(um(C,s),T)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const r=this.chart,a=this._cachedMeta,l=n[t.axis],h={keys:b9(r,!0),values:n._stacks[t.axis]._visualValues};return wO(h,l,a.index,{mode:i})}updateRangeFromParsed(t,n,i,r){const a=i[n.axis];let l=a===null?NaN:a;const h=r&&i._stacks[n.axis];r&&h&&(r.values=h,l=wO(r,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const i=this._cachedMeta,r=i._parsed,a=i._sorted&&t===i.iScale,l=r.length,h=this._getOtherScale(t),s=zce(n,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:x}=Oce(h);let T,C;function I(){C=r[T];const P=C[h.axis];return!Vs(C[t.axis])||v>P||x<P}for(T=0;T<l&&!(!I()&&(this.updateRangeFromParsed(p,t,C,s),a));++T);if(a){for(T=l-1;T>=0;--T)if(!I()){this.updateRangeFromParsed(p,t,C,s);break}}return p}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let r,a,l;for(r=0,a=n.length;r<a;++r)l=n[r][t.axis],Vs(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,r=n.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Dce(Ei(this.options.clip,Mce(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],a=n.chartArea,l=[],h=this._drawStart||0,s=this._drawCount||r.length-h,p=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,a,h,s),v=h;v<h+s;++v){const x=r[v];x.hidden||(x.active&&p?l.push(x):x.draw(t,a))}for(v=0;v<l.length;++v)l[v].draw(t,a)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const r=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=Fce(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=r.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=Bce(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const r=n==="active",a=this._cachedDataOpts,l=t+"-"+n,h=a[l],s=this.enableOptionSharing&&ub(i);if(h)return EO(h,s);const p=this.chart.config,v=p.datasetElementScopeKeys(this._type,t),x=r?[`${t}Hover`,"hover",t,""]:[t,""],T=p.getOptionScopes(this.getDataset(),v),C=Object.keys(hs.elements[t]),I=()=>this.getContext(i,r,n),P=p.resolveNamedOptions(T,C,I,x);return P.$shared&&(P.$shared=s,a[l]=Object.freeze(EO(P,s))),P}_resolveAnimations(t,n,i){const r=this.chart,a=this._cachedDataOpts,l=`animation-${n}`,h=a[l];if(h)return h;let s;if(r.options.animation!==!1){const v=this.chart.config,x=v.datasetAnimationScopeKeys(this._type,n),T=v.getOptionScopes(this.getDataset(),x);s=v.createResolver(T,this.getContext(t,i,n))}const p=new y9(r,s&&s.animations);return s&&s._cacheable&&(a[l]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||VC(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),r=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(n,a)||a!==r;return this.updateSharedOptions(a,n,i),{sharedOptions:a,includeOptions:l}}updateElement(t,n,i,r){VC(r)?Object.assign(t,i):this._resolveAnimations(n,r).update(t,i)}updateSharedOptions(t,n,i){t&&!VC(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,r){t.active=r;const a=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(t,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[h,s,p]of this._syncList)this[h](s,p);this._syncList=[];const r=i.length,a=n.length,l=Math.min(a,r);l&&this.parse(0,l),a>r?this._insertElements(r,a-r,t):a<r&&this._removeElements(a,r-a)}_insertElements(t,n,i=!0){const r=this._cachedMeta,a=r.data,l=t+n;let h;const s=p=>{for(p.length+=n,h=p.length-1;h>=l;h--)p[h]=p[h-n]};for(s(a),h=t;h<l;++h)a[h]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,n),i&&this.updateElements(a,t,n,"reset")}updateElements(t,n,i,r){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,n);i._stacked&&Dy(i,r)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,r]=t;this[n](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Cn(mu,"defaults",{}),Cn(mu,"datasetElementType",null),Cn(mu,"dataElementType",null);function Nce(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let r=0,a=n.length;r<a;r++)i=i.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=Q8(i.sort((r,a)=>r-a))}return e._cache.$bar}function $ce(e){const t=e.iScale,n=Nce(t,e.type);let i=t._length,r,a,l,h;const s=()=>{l===32767||l===-32768||(ub(h)&&(i=Math.min(i,Math.abs(l-h)||i)),h=l)};for(r=0,a=n.length;r<a;++r)l=t.getPixelForValue(n[r]),s();for(h=void 0,r=0,a=t.ticks.length;r<a;++r)l=t.getPixelForTick(r),s();return i}function Uce(e,t,n,i){const r=n.barThickness;let a,l;return zi(r)?(a=t.min*n.categoryPercentage,l=n.barPercentage):(a=r*i,l=1),{chunk:a/i,ratio:l,start:t.pixels[e]-a/2}}function jce(e,t,n,i){const r=t.pixels,a=r[e];let l=e>0?r[e-1]:null,h=e<r.length-1?r[e+1]:null;const s=n.categoryPercentage;l===null&&(l=a-(h===null?t.end-t.start:h-a)),h===null&&(h=a+a-l);const p=a-(a-Math.min(l,h))/2*s;return{chunk:Math.abs(h-l)/2*s/i,ratio:n.barPercentage,start:p}}function Wce(e,t,n,i){const r=n.parse(e[0],i),a=n.parse(e[1],i),l=Math.min(r,a),h=Math.max(r,a);let s=l,p=h;Math.abs(l)>Math.abs(h)&&(s=h,p=l),t[n.axis]=p,t._custom={barStart:s,barEnd:p,start:r,end:a,min:l,max:h}}function x9(e,t,n,i){return ds(e)?Wce(e,t,n,i):t[n.axis]=n.parse(e,i),t}function CO(e,t,n,i){const r=e.iScale,a=e.vScale,l=r.getLabels(),h=r===a,s=[];let p,v,x,T;for(p=n,v=n+i;p<v;++p)T=t[p],x={},x[r.axis]=h||r.parse(l[p],p),s.push(x9(T,x,a,p));return s}function BC(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Hce(e,t,n){return e!==0?sd(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Gce(e){let t,n,i,r,a;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",a="start"):(r="start",a="end"),{start:n,end:i,reverse:t,top:r,bottom:a}}function qce(e,t,n,i){let r=t.borderSkipped;const a={};if(!r){e.borderSkipped=a;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:h,reverse:s,top:p,bottom:v}=Gce(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=p:(n._bottom||0)===i?r=v:(a[kO(v,l,h,s)]=!0,r=p)),a[kO(r,l,h,s)]=!0,e.borderSkipped=a}function kO(e,t,n,i){return i?(e=Kce(e,t,n),e=IO(e,n,t)):e=IO(e,t,n),e}function Kce(e,t,n){return e===t?n:e===n?t:e}function IO(e,t,n){return e==="start"?t:e==="end"?n:e}function Xce(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class U1 extends mu{parsePrimitiveData(t,n,i,r){return CO(t,n,i,r)}parseArrayData(t,n,i,r){return CO(t,n,i,r)}parseObjectData(t,n,i,r){const{iScale:a,vScale:l}=t,{xAxisKey:h="x",yAxisKey:s="y"}=this._parsing,p=a.axis==="x"?h:s,v=l.axis==="x"?h:s,x=[];let T,C,I,P;for(T=i,C=i+r;T<C;++T)P=n[T],I={},I[a.axis]=a.parse(um(P,p),T),x.push(x9(um(P,v),I,l,T));return x}updateRangeFromParsed(t,n,i,r){super.updateRangeFromParsed(t,n,i,r);const a=i._custom;a&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:r}=n,a=this.getParsed(t),l=a._custom,h=BC(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,r){const a=r==="reset",{index:l,_cachedMeta:{vScale:h}}=this,s=h.getBasePixel(),p=h.isHorizontal(),v=this._getRuler(),{sharedOptions:x,includeOptions:T}=this._getSharedOptions(n,r);for(let C=n;C<n+i;C++){const I=this.getParsed(C),P=a||zi(I[h.axis])?{base:s,head:s}:this._calculateBarValuePixels(C),D=this._calculateBarIndexPixels(C,v),F=(I._stacks||{})[h.axis],V={horizontal:p,base:P.base,enableBorderRadius:!F||BC(I._custom)||l===F._top||l===F._bottom,x:p?P.head:D.center,y:p?D.center:P.head,height:p?D.size:Math.abs(P.size),width:p?Math.abs(P.size):D.size};T&&(V.options=x||this.resolveDataElementOptions(C,t[C].active?"active":r));const H=V.options||t[C].options;qce(V,H,F,l),Xce(V,H,v.ratio),this.updateElement(t[C],C,V,r)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(v=>v.controller.options.grouped),a=i.options.stacked,l=[],h=this._cachedMeta.controller.getParsed(n),s=h&&h[i.axis],p=v=>{const x=v._parsed.find(C=>C[i.axis]===s),T=x&&x[v.vScale.axis];if(zi(T)||isNaN(T))return!0};for(const v of r)if(!(n!==void 0&&p(v))&&((a===!1||l.indexOf(v.stack)===-1||a===void 0&&v.stack===void 0)&&l.push(v.stack),v.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Ei(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const r=this._getStacks(t,i),a=n!==void 0?r.indexOf(n):-1;return a===-1?r.length-1:a}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,r=[];let a,l;for(a=0,l=n.data.length;a<l;++a)r.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const h=t.barThickness;return{min:h||$ce(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:h?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:a,minBarLength:l}}=this,h=a||0,s=this.getParsed(t),p=s._custom,v=BC(p);let x=s[n.axis],T=0,C=i?this.applyStack(n,s,i):x,I,P;C!==x&&(T=C-x,C=x),v&&(x=p.barStart,C=p.barEnd-p.barStart,x!==0&&sd(x)!==sd(p.barEnd)&&(T=0),T+=x);const D=!zi(a)&&!v?a:T;let F=n.getPixelForValue(D);if(this.chart.getDataVisibility(t)?I=n.getPixelForValue(T+C):I=F,P=I-F,Math.abs(P)<l){P=Hce(P,n,h)*l,x===h&&(F-=P/2);const V=n.getPixelForDecimal(0),H=n.getPixelForDecimal(1),q=Math.min(V,H),K=Math.max(V,H);F=Math.max(Math.min(F,K),q),I=F+P,i&&!v&&(s._stacks[n.axis]._visualValues[r]=n.getValueForPixel(I)-n.getValueForPixel(F))}if(F===n.getPixelForValue(h)){const V=sd(P)*n.getLineWidthForValue(h)/2;F+=V,P-=V}return{size:P,base:F,head:I,center:I+P/2}}_calculateBarIndexPixels(t,n){const i=n.scale,r=this.options,a=r.skipNull,l=Ei(r.maxBarThickness,1/0);let h,s;const p=this._getAxisCount();if(n.grouped){const v=a?this._getStackCount(t):n.stackCount,x=r.barThickness==="flex"?jce(t,n,r,v*p):Uce(t,n,r,v*p),T=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,C=this._getAxis().indexOf(Ei(T,this.getFirstScaleIdForIndexAxis())),I=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+C;h=x.start+x.chunk*I+x.chunk/2,s=Math.min(l,x.chunk*x.ratio)}else h=i.getPixelForValue(this.getParsed(t)[i.axis],t),s=Math.min(l,n.min*n.ratio);return{base:h-s/2,head:h+s/2,center:h,size:s}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,r=i.length;let a=0;for(;a<r;++a)this.getParsed(a)[n.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}Cn(U1,"id","bar"),Cn(U1,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Cn(U1,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class j1 extends mu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,i,r){const a=super.parsePrimitiveData(t,n,i,r);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(t,n,i,r){const a=super.parseArrayData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=Ei(h[2],this.resolveDataElementOptions(l+i).radius)}return a}parseObjectData(t,n,i,r){const a=super.parseObjectData(t,n,i,r);for(let l=0;l<a.length;l++){const h=n[i+l];a[l]._custom=Ei(h&&h.r&&+h.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y),p=l._custom;return{label:i[t]||"",value:"("+h+", "+s+(p?", "+p:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h}=this._cachedMeta,{sharedOptions:s,includeOptions:p}=this._getSharedOptions(n,r),v=l.axis,x=h.axis;for(let T=n;T<n+i;T++){const C=t[T],I=!a&&this.getParsed(T),P={},D=P[v]=a?l.getPixelForDecimal(.5):l.getPixelForValue(I[v]),F=P[x]=a?h.getBasePixel():h.getPixelForValue(I[x]);P.skip=isNaN(D)||isNaN(F),p&&(P.options=s||this.resolveDataElementOptions(T,C.active?"active":r),a&&(P.options.radius=0)),this.updateElement(C,T,P,r)}}resolveDataElementOptions(t,n){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return n!=="active"&&(r.radius=0),r.radius+=Ei(i&&i._custom,a),r}}Cn(j1,"id","bubble"),Cn(j1,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Cn(j1,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Yce(e,t,n){let i=1,r=1,a=0,l=0;if(t<es){const h=e,s=h+t,p=Math.cos(h),v=Math.sin(h),x=Math.cos(s),T=Math.sin(s),C=(H,q,K)=>db(H,h,s,!0)?1:Math.max(q,q*n,K,K*n),I=(H,q,K)=>db(H,h,s,!0)?-1:Math.min(q,q*n,K,K*n),P=C(0,p,x),D=C(qs,v,T),F=I(fr,p,x),V=I(fr+qs,v,T);i=(P-F)/2,r=(D-V)/2,a=-(P+F)/2,l=-(D+V)/2}return{ratioX:i,ratioY:r,offsetX:a,offsetY:l}}class Tp extends mu{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let a=s=>+i[s];if(ji(i[t])){const{key:s="value"}=this._parsing;a=p=>+um(i[p],s)}let l,h;for(l=t,h=t+n;l<h;++l)r._parsed[l]=a(l)}}_getRotation(){return du(this.options.rotation-90)}_getCircumference(){return du(this.options.circumference)}_getRotationExtents(){let t=es,n=-es;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,a=r._getRotation(),l=r._getCircumference();t=Math.min(t,a),n=Math.max(n,a+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:i}=n,r=this._cachedMeta,a=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-l)/2,0),s=Math.min(lle(this.options.cutout,h),1),p=this._getRingWeight(this.index),{circumference:v,rotation:x}=this._getRotationExtents(),{ratioX:T,ratioY:C,offsetX:I,offsetY:P}=Yce(x,v,s),D=(i.width-l)/T,F=(i.height-l)/C,V=Math.max(Math.min(D,F)/2,0),H=K8(this.options.radius,V),q=Math.max(H*s,0),K=(H-q)/this._getVisibleDatasetWeightTotal();this.offsetX=I*H,this.offsetY=P*H,r.total=this.calculateTotal(),this.outerRadius=H-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*p,0),this.updateElements(a,0,a.length,t)}_circumference(t,n){const i=this.options,r=this._cachedMeta,a=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*a/es)}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,h=l.chartArea,p=l.options.animation,v=(h.left+h.right)/2,x=(h.top+h.bottom)/2,T=a&&p.animateScale,C=T?0:this.innerRadius,I=T?0:this.outerRadius,{sharedOptions:P,includeOptions:D}=this._getSharedOptions(n,r);let F=this._getRotation(),V;for(V=0;V<n;++V)F+=this._circumference(V,a);for(V=n;V<n+i;++V){const H=this._circumference(V,a),q=t[V],K={x:v+this.offsetX,y:x+this.offsetY,startAngle:F,endAngle:F+H,circumference:H,outerRadius:I,innerRadius:C};D&&(K.options=P||this.resolveDataElementOptions(V,q.active?"active":r)),F+=H,this.updateElement(q,V,K,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let i=0,r;for(r=0;r<n.length;r++){const a=t._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?es*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=Qb(n._parsed[t],i.options.locale);return{label:r[t]||"",value:a}}getMaxBorderWidth(t){let n=0;const i=this.chart;let r,a,l,h,s;if(!t){for(r=0,a=i.data.datasets.length;r<a;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,h=l.controller;break}}if(!t)return 0;for(r=0,a=t.length;r<a;++r)s=h.resolveDataElementOptions(r),s.borderAlign!=="inner"&&(n=Math.max(n,s.borderWidth||0,s.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let i=0,r=t.length;i<r;++i){const a=this.resolveDataElementOptions(i);n=Math.max(n,a.offset||0,a.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(t){return Math.max(Ei(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Cn(Tp,"id","doughnut"),Cn(Tp,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Cn(Tp,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),Cn(Tp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((s,p)=>{const x=t.getDatasetMeta(0).controller.getStyle(p);return{text:s,fillStyle:x.backgroundColor,fontColor:a,hidden:!t.getDataVisibility(p),lineDash:x.borderDash,lineDashOffset:x.borderDashOffset,lineJoin:x.borderJoinStyle,lineWidth:x.borderWidth,strokeStyle:x.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(h||x.borderRadius),index:p}}):[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class W1 extends mu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:a}=n,l=this.chart._animationsDisabled;let{start:h,count:s}=n9(n,r,l);this._drawStart=h,this._drawCount=s,i9(n)&&(h=0,s=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=r;const p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:p},t),this.updateElements(r,h,s,t)}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,r),T=l.axis,C=h.axis,{spanGaps:I,segment:P}=this.options,D=f_(I)?I:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||a||r==="none",V=n+i,H=t.length;let q=n>0&&this.getParsed(n-1);for(let K=0;K<H;++K){const ie=t[K],X=F?ie:{};if(K<n||K>=V){X.skip=!0;continue}const $=this.getParsed(K),G=zi($[C]),j=X[T]=l.getPixelForValue($[T],K),te=X[C]=a||G?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,$,s):$[C],K);X.skip=isNaN(j)||isNaN(te)||G,X.stop=K>0&&Math.abs($[T]-q[T])>D,P&&(X.parsed=$,X.raw=p.data[K]),x&&(X.options=v||this.resolveDataElementOptions(K,ie.active?"active":r)),F||this.updateElement(ie,K,X,r),q=$}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,i=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Cn(W1,"id","line"),Cn(W1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Cn(W1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class S0 extends mu{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,i=this.chart,r=i.data.labels||[],a=Qb(n._parsed[t].r,i.options.locale);return{label:r[t]||"",value:a}}parseObjectData(t,n,i,r){return d9.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top),a=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),h=(a-l)/t.getVisibleDatasetCount();this.outerRadius=a-h*this.index,this.innerRadius=this.outerRadius-h}updateElements(t,n,i,r){const a=r==="reset",l=this.chart,s=l.options.animation,p=this._cachedMeta.rScale,v=p.xCenter,x=p.yCenter,T=p.getIndexAngle(0)-.5*fr;let C=T,I;const P=360/this.countVisibleElements();for(I=0;I<n;++I)C+=this._computeAngle(I,r,P);for(I=n;I<n+i;I++){const D=t[I];let F=C,V=C+this._computeAngle(I,r,P),H=l.getDataVisibility(I)?p.getDistanceFromCenterForValue(this.getParsed(I).r):0;C=V,a&&(s.animateScale&&(H=0),s.animateRotate&&(F=V=T));const q={x:v,y:x,innerRadius:0,outerRadius:H,startAngle:F,endAngle:V,options:this.resolveDataElementOptions(I,D.active?"active":r)};this.updateElement(D,I,q,r)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(t,n,i){return this.chart.getDataVisibility(t)?du(this.resolveDataElementOptions(t,n).angle||i):0}}Cn(S0,"id","polarArea"),Cn(S0,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Cn(S0,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return n.labels.map((a,l)=>{const s=t.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class vI extends Tp{}Cn(vI,"id","pie"),Cn(vI,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class H1 extends mu{getLabelAndValue(t){const n=this._cachedMeta.vScale,i=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(t,n,i,r){return d9.bind(this)(t,n,i,r)}update(t){const n=this._cachedMeta,i=n.dataset,r=n.data||[],a=n.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const h={_loop:!0,_fullLoop:a.length===r.length,options:l};this.updateElement(i,void 0,h,t)}this.updateElements(r,0,r.length,t)}updateElements(t,n,i,r){const a=this._cachedMeta.rScale,l=r==="reset";for(let h=n;h<n+i;h++){const s=t[h],p=this.resolveDataElementOptions(h,s.active?"active":r),v=a.getPointPositionForValue(h,this.getParsed(h).r),x=l?a.xCenter:v.x,T=l?a.yCenter:v.y,C={x,y:T,angle:v.angle,skip:isNaN(x)||isNaN(T),options:p};this.updateElement(s,h,C,r)}}}Cn(H1,"id","radar"),Cn(H1,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Cn(H1,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class G1 extends mu{getLabelAndValue(t){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:a}=n,l=this.getParsed(t),h=r.getLabelForValue(l.x),s=a.getLabelForValue(l.y);return{label:i[t]||"",value:"("+h+", "+s+")"}}update(t){const n=this._cachedMeta,{data:i=[]}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=n9(n,i,r);if(this._drawStart=a,this._drawCount=l,i9(n)&&(a=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:h,_dataset:s}=n;h._chart=this.chart,h._datasetIndex=this.index,h._decimated=!!s._decimated,h.points=i;const p=this.resolveDatasetElementOptions(t);p.segment=this.options.segment,this.updateElement(h,void 0,{animated:!r,options:p},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,i,r){const a=r==="reset",{iScale:l,vScale:h,_stacked:s,_dataset:p}=this._cachedMeta,v=this.resolveDataElementOptions(n,r),x=this.getSharedOptions(v),T=this.includeOptions(r,x),C=l.axis,I=h.axis,{spanGaps:P,segment:D}=this.options,F=f_(P)?P:Number.POSITIVE_INFINITY,V=this.chart._animationsDisabled||a||r==="none";let H=n>0&&this.getParsed(n-1);for(let q=n;q<n+i;++q){const K=t[q],ie=this.getParsed(q),X=V?K:{},$=zi(ie[I]),G=X[C]=l.getPixelForValue(ie[C],q),j=X[I]=a||$?h.getBasePixel():h.getPixelForValue(s?this.applyStack(h,ie,s):ie[I],q);X.skip=isNaN(G)||isNaN(j)||$,X.stop=q>0&&Math.abs(ie[C]-H[C])>F,D&&(X.parsed=ie,X.raw=p.data[q]),T&&(X.options=x||this.resolveDataElementOptions(q,K.active?"active":r)),V||this.updateElement(K,q,X,r),H=ie}this.updateSharedOptions(x,r,v)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let h=0;for(let s=n.length-1;s>=0;--s)h=Math.max(h,n[s].size(this.resolveDataElementOptions(s))/2);return h>0&&h}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!n.length)return r;const a=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,a,l)/2}}Cn(G1,"id","scatter"),Cn(G1,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Cn(G1,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Zce=Object.freeze({__proto__:null,BarController:U1,BubbleController:j1,DoughnutController:Tp,LineController:W1,PieController:vI,PolarAreaController:S0,RadarController:H1,ScatterController:G1});function dp(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bM{constructor(t){Cn(this,"options");this.options=t||{}}static override(t){Object.assign(bM.prototype,t)}init(){}formats(){return dp()}parse(){return dp()}format(){return dp()}add(){return dp()}diff(){return dp()}startOf(){return dp()}endOf(){return dp()}}var Jce={_date:bM};function Qce(e,t,n,i){const{controller:r,data:a,_sorted:l}=e,h=r._cachedMeta.iScale,s=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&l&&a.length){const p=h._reversePixels?xle:mh;if(i){if(r._sharedOptions){const v=a[0],x=typeof v.getRange=="function"&&v.getRange(t);if(x){const T=p(a,t,n-x),C=p(a,t,n+x);return{lo:T.lo,hi:C.hi}}}}else{const v=p(a,t,n);if(s){const{vScale:x}=r._cachedMeta,{_parsed:T}=e,C=T.slice(0,v.lo+1).reverse().findIndex(P=>!zi(P[x.axis]));v.lo-=Math.max(0,C);const I=T.slice(v.hi).findIndex(P=>!zi(P[x.axis]));v.hi+=Math.max(0,I)}return v}}return{lo:0,hi:a.length-1}}function dS(e,t,n,i,r){const a=e.getSortedVisibleDatasetMetas(),l=n[t];for(let h=0,s=a.length;h<s;++h){const{index:p,data:v}=a[h],{lo:x,hi:T}=Qce(a[h],t,l,r);for(let C=x;C<=T;++C){const I=v[C];I.skip||i(I,p,C)}}}function eue(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,r){const a=t?Math.abs(i.x-r.x):0,l=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function FC(e,t,n,i,r){const a=[];return!r&&!e.isPointInArea(t)||dS(e,n,t,function(h,s,p){!r&&!ph(h,e.chartArea,0)||h.inRange(t.x,t.y,i)&&a.push({element:h,datasetIndex:s,index:p})},!0),a}function tue(e,t,n,i){let r=[];function a(l,h,s){const{startAngle:p,endAngle:v}=l.getProps(["startAngle","endAngle"],i),{angle:x}=Z8(l,{x:t.x,y:t.y});db(x,p,v)&&r.push({element:l,datasetIndex:h,index:s})}return dS(e,n,t,a),r}function nue(e,t,n,i,r,a){let l=[];const h=eue(n);let s=Number.POSITIVE_INFINITY;function p(v,x,T){const C=v.inRange(t.x,t.y,r);if(i&&!C)return;const I=v.getCenterPoint(r);if(!(!!a||e.isPointInArea(I))&&!C)return;const D=h(t,I);D<s?(l=[{element:v,datasetIndex:x,index:T}],s=D):D===s&&l.push({element:v,datasetIndex:x,index:T})}return dS(e,n,t,p),l}function zC(e,t,n,i,r,a){return!a&&!e.isPointInArea(t)?[]:n==="r"&&!i?tue(e,t,n,r):nue(e,t,n,i,r,a)}function AO(e,t,n,i,r){const a=[],l=n==="x"?"inXRange":"inYRange";let h=!1;return dS(e,n,t,(s,p,v)=>{s[l]&&s[l](t[n],r)&&(a.push({element:s,datasetIndex:p,index:v}),h=h||s.inRange(t.x,t.y,r))}),i&&!h?[]:a}var iue={modes:{index(e,t,n,i){const r=vp(t,e),a=n.axis||"x",l=n.includeInvisible||!1,h=n.intersect?FC(e,r,a,i,l):zC(e,r,a,!1,i,l),s=[];return h.length?(e.getSortedVisibleDatasetMetas().forEach(p=>{const v=h[0].index,x=p.data[v];x&&!x.skip&&s.push({element:x,datasetIndex:p.index,index:v})}),s):[]},dataset(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;let h=n.intersect?FC(e,r,a,i,l):zC(e,r,a,!1,i,l);if(h.length>0){const s=h[0].datasetIndex,p=e.getDatasetMeta(s).data;h=[];for(let v=0;v<p.length;++v)h.push({element:p[v],datasetIndex:s,index:v})}return h},point(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return FC(e,r,a,i,l)},nearest(e,t,n,i){const r=vp(t,e),a=n.axis||"xy",l=n.includeInvisible||!1;return zC(e,r,a,n.intersect,i,l)},x(e,t,n,i){const r=vp(t,e);return AO(e,r,"x",n.intersect,i)},y(e,t,n,i){const r=vp(t,e);return AO(e,r,"y",n.intersect,i)}}};const w9=["left","top","right","bottom"];function Ly(e,t){return e.filter(n=>n.pos===t)}function PO(e,t){return e.filter(n=>w9.indexOf(n.pos)===-1&&n.box.axis===t)}function Ry(e,t){return e.sort((n,i)=>{const r=t?i:n,a=t?n:i;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function rue(e){const t=[];let n,i,r,a,l,h;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],{position:a,options:{stack:l,stackWeight:h=1}}=r,t.push({index:n,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&a+l,stackWeight:h});return t}function sue(e){const t={};for(const n of e){const{stack:i,pos:r,stackWeight:a}=n;if(!i||!w9.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function oue(e,t){const n=sue(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let a,l,h;for(a=0,l=e.length;a<l;++a){h=e[a];const{fullSize:s}=h.box,p=n[h.stack],v=p&&h.stackWeight/p.weight;h.horizontal?(h.width=v?v*i:s&&t.availableWidth,h.height=r):(h.width=i,h.height=v?v*r:s&&t.availableHeight)}return n}function aue(e){const t=rue(e),n=Ry(t.filter(p=>p.box.fullSize),!0),i=Ry(Ly(t,"left"),!0),r=Ry(Ly(t,"right")),a=Ry(Ly(t,"top"),!0),l=Ry(Ly(t,"bottom")),h=PO(t,"x"),s=PO(t,"y");return{fullSize:n,leftAndTop:i.concat(a),rightAndBottom:r.concat(s).concat(l).concat(h),chartArea:Ly(t,"chartArea"),vertical:i.concat(r).concat(s),horizontal:a.concat(l).concat(h)}}function MO(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function T9(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function lue(e,t,n,i){const{pos:r,box:a}=n,l=e.maxPadding;if(!ji(r)){n.size&&(e[r]-=n.size);const x=i[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?a.height:a.width),n.size=x.size/x.count,e[r]+=n.size}a.getPadding&&T9(l,a.getPadding());const h=Math.max(0,t.outerWidth-MO(l,e,"left","right")),s=Math.max(0,t.outerHeight-MO(l,e,"top","bottom")),p=h!==e.w,v=s!==e.h;return e.w=h,e.h=s,n.horizontal?{same:p,other:v}:{same:v,other:p}}function cue(e){const t=e.maxPadding;function n(i){const r=Math.max(t[i]-e[i],0);return e[i]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function uue(e,t){const n=t.maxPadding;function i(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{a[l]=Math.max(t[l],n[l])}),a}return i(e?["left","right"]:["top","bottom"])}function Zy(e,t,n,i){const r=[];let a,l,h,s,p,v;for(a=0,l=e.length,p=0;a<l;++a){h=e[a],s=h.box,s.update(h.width||t.w,h.height||t.h,uue(h.horizontal,t));const{same:x,other:T}=lue(t,n,h,i);p|=x&&r.length,v=v||T,s.fullSize||r.push(h)}return p&&Zy(r,t,n,i)||v}function u1(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function DO(e,t,n,i){const r=n.padding;let{x:a,y:l}=t;for(const h of e){const s=h.box,p=i[h.stack]||{placed:0,weight:1},v=h.stackWeight/p.weight||1;if(h.horizontal){const x=t.w*v,T=p.size||s.height;ub(p.start)&&(l=p.start),s.fullSize?u1(s,r.left,l,n.outerWidth-r.right-r.left,T):u1(s,t.left+p.placed,l,x,T),p.start=l,p.placed+=x,l=s.bottom}else{const x=t.h*v,T=p.size||s.width;ub(p.start)&&(a=p.start),s.fullSize?u1(s,a,r.top,T,n.outerHeight-r.bottom-r.top):u1(s,a,t.top+p.placed,T,x),p.start=a,p.placed+=x,a=s.right}}t.x=a,t.y=l}var Ua={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=qa(e.options.layout.padding),a=Math.max(t-r.width,0),l=Math.max(n-r.height,0),h=aue(e.boxes),s=h.vertical,p=h.horizontal;Pr(e.boxes,P=>{typeof P.beforeLayout=="function"&&P.beforeLayout()});const v=s.reduce((P,D)=>D.box.options&&D.box.options.display===!1?P:P+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/v,hBoxMaxHeight:l/2}),T=Object.assign({},r);T9(T,qa(i));const C=Object.assign({maxPadding:T,w:a,h:l,x:r.left,y:r.top},r),I=oue(s.concat(p),x);Zy(h.fullSize,C,x,I),Zy(s,C,x,I),Zy(p,C,x,I)&&Zy(s,C,x,I),cue(C),DO(h.leftAndTop,C,x,I),C.x+=C.w,C.y+=C.h,DO(h.rightAndBottom,C,x,I),e.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Pr(h.chartArea,P=>{const D=P.box;Object.assign(D,e.chartArea),D.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class S9{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,r){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(t){return!0}updateConfig(t){}}class due extends S9{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const q1="$chartjs",hue={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},LO=e=>e===null||e==="";function fue(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[q1]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",LO(r)){const a=gO(e,"width");a!==void 0&&(e.width=a)}if(LO(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=gO(e,"height");a!==void 0&&(e.height=a)}return e}const E9=mce?{passive:!0}:!1;function mue(e,t,n){e&&e.addEventListener(t,n,E9)}function pue(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,E9)}function gue(e,t){const n=hue[e.type]||e.type,{x:i,y:r}=vp(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:r!==void 0?r:null}}function sT(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function vue(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||sT(h.addedNodes,i),l=l&&!sT(h.removedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function _ue(e,t,n){const i=e.canvas,r=new MutationObserver(a=>{let l=!1;for(const h of a)l=l||sT(h.removedNodes,i),l=l&&!sT(h.addedNodes,i);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const fb=new Map;let RO=0;function C9(){const e=window.devicePixelRatio;e!==RO&&(RO=e,fb.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function yue(e,t){fb.size||window.addEventListener("resize",C9),fb.set(e,t)}function bue(e){fb.delete(e),fb.size||window.removeEventListener("resize",C9)}function xue(e,t,n){const i=e.canvas,r=i&&yM(i);if(!r)return;const a=t9((h,s)=>{const p=r.clientWidth;n(h,s),p<r.clientWidth&&n()},window),l=new ResizeObserver(h=>{const s=h[0],p=s.contentRect.width,v=s.contentRect.height;p===0&&v===0||a(p,v)});return l.observe(r),yue(e,a),l}function NC(e,t,n){n&&n.disconnect(),t==="resize"&&bue(e)}function wue(e,t,n){const i=e.canvas,r=t9(a=>{e.ctx!==null&&n(gue(a,e))},e);return mue(i,t,r),r}class Tue extends S9{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(fue(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[q1])return!1;const i=n[q1].initial;["height","width"].forEach(a=>{const l=i[a];zi(l)?n.removeAttribute(a):n.setAttribute(a,l)});const r=i.style||{};return Object.keys(r).forEach(a=>{n.style[a]=r[a]}),n.width=n.width,delete n[q1],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:vue,detach:_ue,resize:xue}[n]||wue;r[n]=l(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),r=i[n];if(!r)return;({attach:NC,detach:NC,resize:NC}[n]||pue)(t,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,r){return fce(t,n,i,r)}isAttached(t){const n=t&&yM(t);return!!(n&&n.isConnected)}}function Sue(e){return!_M()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?due:Tue}var y1;let Bh=(y1=class{constructor(){Cn(this,"x");Cn(this,"y");Cn(this,"active",!1);Cn(this,"options");Cn(this,"$animations")}tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return f_(this.x)&&f_(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const r={};return t.forEach(a=>{r[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),r}},Cn(y1,"defaults",{}),Cn(y1,"defaultRoutes"),y1);function Eue(e,t){const n=e.options.ticks,i=Cue(e),r=Math.min(n.maxTicksLimit||i,i),a=n.major.enabled?Iue(t):[],l=a.length,h=a[0],s=a[l-1],p=[];if(l>r)return Aue(t,p,a,l/r),p;const v=kue(a,t,r);if(l>0){let x,T;const C=l>1?Math.round((s-h)/(l-1)):null;for(d1(t,p,v,zi(C)?0:h-C,h),x=0,T=l-1;x<T;x++)d1(t,p,v,a[x],a[x+1]);return d1(t,p,v,s,zi(C)?t.length:s+C),p}return d1(t,p,v),p}function Cue(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}function kue(e,t,n){const i=Pue(e),r=t.length/n;if(!i)return Math.max(r,1);const a=gle(i);for(let l=0,h=a.length-1;l<h;l++){const s=a[l];if(s>r)return s}return Math.max(r,1)}function Iue(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function Aue(e,t,n,i){let r=0,a=n[0],l;for(i=Math.ceil(i),l=0;l<e.length;l++)l===a&&(t.push(e[l]),r++,a=n[r*i])}function d1(e,t,n,i,r){const a=Ei(i,0),l=Math.min(Ei(r,e.length),e.length);let h=0,s,p,v;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),v=a;v<0;)h++,v=Math.round(a+h*n);for(p=Math.max(a,0);p<l;p++)p===v&&(t.push(e[p]),h++,v=Math.round(a+h*n))}function Pue(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const Mue=e=>e==="left"?"right":e==="right"?"left":e,OO=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,VO=(e,t)=>Math.min(t||e,e);function BO(e,t){const n=[],i=e.length/t,r=e.length;let a=0;for(;a<r;a+=i)n.push(e[Math.floor(a)]);return n}function Due(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),a=e._startPixel,l=e._endPixel,h=1e-6;let s=e.getPixelForTick(r),p;if(!(n&&(i===1?p=Math.max(s-a,l-s):t===0?p=(e.getPixelForTick(1)-s)/2:p=(s-e.getPixelForTick(r-1))/2,s+=r<t?p:-p,s<a-h||s>l+h)))return s}function Lue(e,t){Pr(e,n=>{const i=n.gc,r=i.length/2;let a;if(r>t){for(a=0;a<r;++a)delete n.data[i[a]];i.splice(0,r)}})}function Oy(e){return e.drawTicks?e.tickLength:0}function FO(e,t){if(!e.display)return 0;const n=yo(e.font,t),i=qa(e.padding);return(ds(e.text)?e.text.length:1)*n.lineHeight+i.height}function Rue(e,t){return ym(e,{scale:t,type:"scale"})}function Oue(e,t,n){return ym(e,{tick:n,index:t,type:"tick"})}function Vue(e,t,n){let i=hM(e);return(n&&t!=="right"||!n&&t==="right")&&(i=Mue(i)),i}function Bue(e,t,n,i){const{top:r,left:a,bottom:l,right:h,chart:s}=e,{chartArea:p,scales:v}=s;let x=0,T,C,I;const P=l-r,D=h-a;if(e.isHorizontal()){if(C=Ma(i,a,h),ji(n)){const F=Object.keys(n)[0],V=n[F];I=v[F].getPixelForValue(V)+P-t}else n==="center"?I=(p.bottom+p.top)/2+P-t:I=OO(e,n,t);T=h-a}else{if(ji(n)){const F=Object.keys(n)[0],V=n[F];C=v[F].getPixelForValue(V)-D+t}else n==="center"?C=(p.left+p.right)/2-D+t:C=OO(e,n,t);I=Ma(i,l,r),x=n==="left"?-qs:qs}return{titleX:C,titleY:I,maxWidth:T,rotation:x}}class yg extends Bh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return t=Jl(t,Number.POSITIVE_INFINITY),n=Jl(n,Number.NEGATIVE_INFINITY),i=Jl(i,Number.POSITIVE_INFINITY),r=Jl(r,Number.NEGATIVE_INFINITY),{min:Jl(t,i),max:Jl(n,r),minDefined:Vs(t),maxDefined:Vs(n)}}getMinMax(t){let{min:n,max:i,minDefined:r,maxDefined:a}=this.getUserBounds(),l;if(r&&a)return{min:n,max:i};const h=this.getMatchingVisibleMetas();for(let s=0,p=h.length;s<p;++s)l=h[s].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),a||(i=Math.max(i,l.max));return n=a&&n>i?i:n,i=r&&n>i?n:i,{min:Jl(n,Jl(i,n)),max:Jl(i,Jl(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xr(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:r,grace:a,ticks:l}=this.options,h=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hle(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=h<this.ticks.length;this._convertTicksToLabels(s?BO(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Eue(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xr(this.options.afterUpdate,[this])}beforeSetDimensions(){Xr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xr(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Xr(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,r,a;for(i=0,r=t.length;i<r;i++)a=t[i],a.label=Xr(n.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Xr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=VO(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,a=n.maxRotation;let l=r,h,s,p;if(!this._isVisible()||!n.display||r>=a||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const v=this._getLabelSizes(),x=v.widest.width,T=v.highest.height,C=zo(this.chart.width-x,0,this.maxWidth);h=t.offset?this.maxWidth/i:C/(i-1),x+6>h&&(h=C/(i-(t.offset?.5:1)),s=this.maxHeight-Oy(t.grid)-n.padding-FO(t.title,this.chart.options.font),p=Math.sqrt(x*x+T*T),l=uM(Math.min(Math.asin(zo((v.highest.height+6)/h,-1,1)),Math.asin(zo(s/p,-1,1))-Math.asin(zo(T/p,-1,1)))),l=Math.max(r,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Xr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xr(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:a}}=this,l=this._isVisible(),h=this.isHorizontal();if(l){const s=FO(r,n.options.font);if(h?(t.width=this.maxWidth,t.height=Oy(a)+s):(t.height=this.maxHeight,t.width=Oy(a)+s),i.display&&this.ticks.length){const{first:p,last:v,widest:x,highest:T}=this._getLabelSizes(),C=i.padding*2,I=du(this.labelRotation),P=Math.cos(I),D=Math.sin(I);if(h){const F=i.mirror?0:D*x.width+P*T.height;t.height=Math.min(this.maxHeight,t.height+F+C)}else{const F=i.mirror?0:P*x.width+D*T.height;t.width=Math.min(this.maxWidth,t.width+F+C)}this._calculatePadding(p,v,D,P)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,r){const{ticks:{align:a,padding:l},position:h}=this.options,s=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,C=0;s?p?(T=r*t.width,C=i*n.height):(T=i*t.height,C=r*n.width):a==="start"?C=n.width:a==="end"?T=t.width:a!=="inner"&&(T=t.width/2,C=n.width/2),this.paddingLeft=Math.max((T-v+l)*this.width/(this.width-v),0),this.paddingRight=Math.max((C-x+l)*this.width/(this.width-x),0)}else{let v=n.height/2,x=t.height/2;a==="start"?(v=0,x=t.height):a==="end"&&(v=n.height,x=0),this.paddingTop=v+l,this.paddingBottom=x+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xr(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)zi(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=BO(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:r,_longestTextCache:a}=this,l=[],h=[],s=Math.floor(n/VO(n,i));let p=0,v=0,x,T,C,I,P,D,F,V,H,q,K;for(x=0;x<n;x+=s){if(I=t[x].label,P=this._resolveTickFontOptions(x),r.font=D=P.string,F=a[D]=a[D]||{data:{},gc:[]},V=P.lineHeight,H=q=0,!zi(I)&&!ds(I))H=iT(r,F.data,F.gc,H,I),q=V;else if(ds(I))for(T=0,C=I.length;T<C;++T)K=I[T],!zi(K)&&!ds(K)&&(H=iT(r,F.data,F.gc,H,K),q+=V);l.push(H),h.push(q),p=Math.max(H,p),v=Math.max(q,v)}Lue(a,n);const ie=l.indexOf(p),X=h.indexOf(v),$=G=>({width:l[G]||0,height:h[G]||0});return{first:$(0),last:$(n-1),widest:$(ie),highest:$(X),widths:l,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return ble(this._alignToPixels?up(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=Oue(this.getContext(),t,i))}return this.$context||(this.$context=Rue(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=du(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,h=a?a.widest.width+l:0,s=a?a.highest.height+l:0;return this.isHorizontal()?s*i>h*r?h/i:s/r:s*r<h*i?s/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,r=this.options,{grid:a,position:l,border:h}=r,s=a.offset,p=this.isHorizontal(),x=this.ticks.length+(s?1:0),T=Oy(a),C=[],I=h.setContext(this.getContext()),P=I.display?I.width:0,D=P/2,F=function(Ve){return up(i,Ve,P)};let V,H,q,K,ie,X,$,G,j,te,Z,ee;if(l==="top")V=F(this.bottom),X=this.bottom-T,G=V-D,te=F(t.top)+D,ee=t.bottom;else if(l==="bottom")V=F(this.top),te=t.top,ee=F(t.bottom)-D,X=V+D,G=this.top+T;else if(l==="left")V=F(this.right),ie=this.right-T,$=V-D,j=F(t.left)+D,Z=t.right;else if(l==="right")V=F(this.left),j=t.left,Z=F(t.right)-D,ie=V+D,$=this.left+T;else if(n==="x"){if(l==="center")V=F((t.top+t.bottom)/2+.5);else if(ji(l)){const Ve=Object.keys(l)[0],Ke=l[Ve];V=F(this.chart.scales[Ve].getPixelForValue(Ke))}te=t.top,ee=t.bottom,X=V+D,G=X+T}else if(n==="y"){if(l==="center")V=F((t.left+t.right)/2);else if(ji(l)){const Ve=Object.keys(l)[0],Ke=l[Ve];V=F(this.chart.scales[Ve].getPixelForValue(Ke))}ie=V-D,$=ie-T,j=t.left,Z=t.right}const be=Ei(r.ticks.maxTicksLimit,x),Ie=Math.max(1,Math.ceil(x/be));for(H=0;H<x;H+=Ie){const Ve=this.getContext(H),Ke=a.setContext(Ve),Xe=h.setContext(Ve),Pe=Ke.lineWidth,$e=Ke.color,Ee=Xe.dash||[],We=Xe.dashOffset,Ze=Ke.tickWidth,ct=Ke.tickColor,kt=Ke.tickBorderDash||[],Nt=Ke.tickBorderDashOffset;q=Due(this,H,s),q!==void 0&&(K=up(i,q,Pe),p?ie=$=j=Z=K:X=G=te=ee=K,C.push({tx1:ie,ty1:X,tx2:$,ty2:G,x1:j,y1:te,x2:Z,y2:ee,width:Pe,color:$e,borderDash:Ee,borderDashOffset:We,tickWidth:Ze,tickColor:ct,tickBorderDash:kt,tickBorderDashOffset:Nt}))}return this._ticksLength=x,this._borderValue=V,C}_computeLabelItems(t){const n=this.axis,i=this.options,{position:r,ticks:a}=i,l=this.isHorizontal(),h=this.ticks,{align:s,crossAlign:p,padding:v,mirror:x}=a,T=Oy(i.grid),C=T+v,I=x?-v:C,P=-du(this.labelRotation),D=[];let F,V,H,q,K,ie,X,$,G,j,te,Z,ee="middle";if(r==="top")ie=this.bottom-I,X=this._getXAxisLabelAlignment();else if(r==="bottom")ie=this.top+I,X=this._getXAxisLabelAlignment();else if(r==="left"){const Ie=this._getYAxisLabelAlignment(T);X=Ie.textAlign,K=Ie.x}else if(r==="right"){const Ie=this._getYAxisLabelAlignment(T);X=Ie.textAlign,K=Ie.x}else if(n==="x"){if(r==="center")ie=(t.top+t.bottom)/2+C;else if(ji(r)){const Ie=Object.keys(r)[0],Ve=r[Ie];ie=this.chart.scales[Ie].getPixelForValue(Ve)+C}X=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")K=(t.left+t.right)/2-C;else if(ji(r)){const Ie=Object.keys(r)[0],Ve=r[Ie];K=this.chart.scales[Ie].getPixelForValue(Ve)}X=this._getYAxisLabelAlignment(T).textAlign}n==="y"&&(s==="start"?ee="top":s==="end"&&(ee="bottom"));const be=this._getLabelSizes();for(F=0,V=h.length;F<V;++F){H=h[F],q=H.label;const Ie=a.setContext(this.getContext(F));$=this.getPixelForTick(F)+a.labelOffset,G=this._resolveTickFontOptions(F),j=G.lineHeight,te=ds(q)?q.length:1;const Ve=te/2,Ke=Ie.color,Xe=Ie.textStrokeColor,Pe=Ie.textStrokeWidth;let $e=X;l?(K=$,X==="inner"&&(F===V-1?$e=this.options.reverse?"left":"right":F===0?$e=this.options.reverse?"right":"left":$e="center"),r==="top"?p==="near"||P!==0?Z=-te*j+j/2:p==="center"?Z=-be.highest.height/2-Ve*j+j:Z=-be.highest.height+j/2:p==="near"||P!==0?Z=j/2:p==="center"?Z=be.highest.height/2-Ve*j:Z=be.highest.height-te*j,x&&(Z*=-1),P!==0&&!Ie.showLabelBackdrop&&(K+=j/2*Math.sin(P))):(ie=$,Z=(1-te)*j/2);let Ee;if(Ie.showLabelBackdrop){const We=qa(Ie.backdropPadding),Ze=be.heights[F],ct=be.widths[F];let kt=Z-We.top,Nt=0-We.left;switch(ee){case"middle":kt-=Ze/2;break;case"bottom":kt-=Ze;break}switch(X){case"center":Nt-=ct/2;break;case"right":Nt-=ct;break;case"inner":F===V-1?Nt-=ct:F>0&&(Nt-=ct/2);break}Ee={left:Nt,top:kt,width:ct+We.width,height:Ze+We.height,color:Ie.backdropColor}}D.push({label:q,font:G,textOffset:Z,options:{rotation:P,color:Ke,strokeColor:Xe,strokeWidth:Pe,textAlign:$e,textBaseline:ee,translation:[K,ie],backdrop:Ee}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-du(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:r,padding:a}}=this.options,l=this._getLabelSizes(),h=t+a,s=l.widest.width;let p,v;return n==="left"?r?(v=this.right+a,i==="near"?p="left":i==="center"?(p="center",v+=s/2):(p="right",v+=s)):(v=this.right-h,i==="near"?p="right":i==="center"?(p="center",v-=s/2):(p="left",v=this.left)):n==="right"?r?(v=this.left+a,i==="near"?p="right":i==="center"?(p="center",v-=s/2):(p="left",v-=s)):(v=this.left+h,i==="near"?p="left":i==="center"?(p="center",v+=s/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:r,width:a,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,r,a,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(a=>a.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const h=(s,p,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(n.display)for(a=0,l=r.length;a<l;++a){const s=r[a];n.drawOnChartArea&&h({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),n.drawTicks&&h({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:r}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const h=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let p,v,x,T;this.isHorizontal()?(p=up(t,this.left,l)-l/2,v=up(t,this.right,h)+h/2,x=T=s):(x=up(t,this.top,l)-l/2,T=up(t,this.bottom,h)+h/2,p=v=s),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(p,x),n.lineTo(v,T),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&lS(i,r);const a=this.getLabelItems(t);for(const l of a){const h=l.options,s=l.font,p=l.label,v=l.textOffset;Jp(i,p,0,v,s,h)}r&&cS(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const a=yo(i.font),l=qa(i.padding),h=i.align;let s=a.lineHeight/2;n==="bottom"||n==="center"||ji(n)?(s+=l.bottom,ds(i.text)&&(s+=a.lineHeight*(i.text.length-1))):s+=l.top;const{titleX:p,titleY:v,maxWidth:x,rotation:T}=Bue(this,s,n,h);Jp(t,i.text,0,0,a,{color:i.color,maxWidth:x,rotation:T,textAlign:Vue(h,n,r),textBaseline:"middle",translation:[p,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=Ei(t.grid&&t.grid.z,-1),r=Ei(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==yg.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let a,l;for(a=0,l=n.length;a<l;++a){const h=n[a];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return yo(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class h1{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;Nue(n)&&(i=this.register(n));const r=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in r||(r[a]=t,Fue(t,l,i),this.override&&hs.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,r=this.scope;i in n&&delete n[i],r&&i in hs[r]&&(delete hs[r][i],this.override&&delete Zp[i])}}function Fue(e,t,n){const i=cb(Object.create(null),[n?hs.get(n):{},hs.get(t),e.defaults]);hs.set(t,i),e.defaultRoutes&&zue(t,e.defaultRoutes),e.descriptors&&hs.describe(t,e.descriptors)}function zue(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),a=[e].concat(i).join("."),l=t[n].split("."),h=l.pop(),s=l.join(".");hs.route(a,r,s,h)})}function Nue(e){return"id"in e&&"defaults"in e}class $ue{constructor(){this.controllers=new h1(mu,"datasets",!0),this.elements=new h1(Bh,"elements"),this.plugins=new h1(Object,"plugins"),this.scales=new h1(yg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(r=>{const a=i||this._getRegistryForType(r);i||a.isForType(r)||a===this.plugins&&r.id?this._exec(t,a,r):Pr(r,l=>{const h=i||this._getRegistryForType(l);this._exec(t,h,l)})})}_exec(t,n,i){const r=cM(t);Xr(i["before"+r],[],i),n[t](i),Xr(i["after"+r],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Hu=new $ue;class Uue{constructor(){this._init=void 0}notify(t,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const a=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(a,t,n,i);return n==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,i,r){r=r||{};for(const a of t){const l=a.plugin,h=l[i],s=[n,r,a.options];if(Xr(h,s,l)===!1&&r.cancelable)return!1}return!0}invalidate(){zi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,r=Ei(i.options&&i.options.plugins,{}),a=jue(i);return r===!1&&!n?[]:Hue(t,a,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,r=(a,l)=>a.filter(h=>!l.some(s=>h.plugin.id===s.plugin.id));this._notify(r(n,i),t,"stop"),this._notify(r(i,n),t,"start")}}function jue(e){const t={},n=[],i=Object.keys(Hu.plugins.items);for(let a=0;a<i.length;a++)n.push(Hu.getPlugin(i[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const l=r[a];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function Wue(e,t){return!t&&e===!1?null:e===!0?{}:e}function Hue(e,{plugins:t,localIds:n},i,r){const a=[],l=e.getContext();for(const h of t){const s=h.id,p=Wue(i[s],r);p!==null&&a.push({plugin:h,options:Gue(e.config,{plugin:h,local:n[s]},p,l)})}return a}function Gue(e,{plugin:t,local:n},i,r){const a=e.pluginScopeKeys(t),l=e.getOptionScopes(i,a);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _I(e,t){const n=hs.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function que(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Kue(e,t){return e===t?"_index_":"_value_"}function zO(e){if(e==="x"||e==="y"||e==="r")return e}function Xue(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function yI(e,...t){if(zO(e))return e;for(const n of t){const i=n.axis||Xue(n.position)||e.length>1&&zO(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function NO(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Yue(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return NO(e,"x",n[0])||NO(e,"y",n[0])}return{}}function Zue(e,t){const n=Zp[e.type]||{scales:{}},i=t.scales||{},r=_I(e.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const h=i[l];if(!ji(h))return console.error(`Invalid scale configuration for scale: ${l}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const s=yI(l,h,Yue(l,e),hs.scales[h.type]),p=Kue(s,r),v=n.scales||{};a[l]=b0(Object.create(null),[{axis:s},h,v[s],v[p]])}),e.data.datasets.forEach(l=>{const h=l.type||e.type,s=l.indexAxis||_I(h,t),v=(Zp[h]||{}).scales||{};Object.keys(v).forEach(x=>{const T=que(x,s),C=l[T+"AxisID"]||T;a[C]=a[C]||Object.create(null),b0(a[C],[{axis:T},i[C],v[x]])})}),Object.keys(a).forEach(l=>{const h=a[l];b0(h,[hs.scales[h.type],hs.scale])}),a}function k9(e){const t=e.options||(e.options={});t.plugins=Ei(t.plugins,{}),t.scales=Zue(e,t)}function I9(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Jue(e){return e=e||{},e.data=I9(e.data),k9(e),e}const $O=new Map,A9=new Set;function f1(e,t){let n=$O.get(e);return n||(n=t(),$O.set(e,n),A9.add(n)),n}const Vy=(e,t,n)=>{const i=um(t,n);i!==void 0&&e.add(i)};class Que{constructor(t){this._config=Jue(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=I9(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),k9(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return f1(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return f1(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return f1(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return f1(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let r=i.get(t);return(!r||n)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,n,i){const{options:r,type:a}=this,l=this._cachedScopes(t,i),h=l.get(n);if(h)return h;const s=new Set;n.forEach(v=>{t&&(s.add(t),v.forEach(x=>Vy(s,t,x))),v.forEach(x=>Vy(s,r,x)),v.forEach(x=>Vy(s,Zp[a]||{},x)),v.forEach(x=>Vy(s,hs,x)),v.forEach(x=>Vy(s,pI,x))});const p=Array.from(s);return p.length===0&&p.push(Object.create(null)),A9.has(n)&&l.set(n,p),p}chartOptionScopes(){const{options:t,type:n}=this;return[t,Zp[n]||{},hs.datasets[n]||{},{type:n},hs,pI]}resolveNamedOptions(t,n,i,r=[""]){const a={$shared:!0},{resolver:l,subPrefixes:h}=UO(this._resolverCache,t,r);let s=l;if(tde(l,n)){a.$shared=!1,i=dm(i)?i():i;const p=this.createResolver(t,i,h);s=m_(l,i,p)}for(const p of n)a[p]=s[p];return a}createResolver(t,n,i=[""],r){const{resolver:a}=UO(this._resolverCache,t,i);return ji(n)?m_(a,n,void 0,r):a}}function UO(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let a=i.get(r);return a||(a={resolver:pM(t,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,a)),a}const ede=e=>ji(e)&&Object.getOwnPropertyNames(e).some(t=>dm(e[t]));function tde(e,t){const{isScriptable:n,isIndexable:i}=a9(e);for(const r of t){const a=n(r),l=i(r),h=(l||a)&&e[r];if(a&&(dm(h)||ede(h))||l&&ds(h))return!0}return!1}var nde="4.5.1";const ide=["top","bottom","left","right","chartArea"];function jO(e,t){return e==="top"||e==="bottom"||ide.indexOf(e)===-1&&t==="x"}function WO(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function HO(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Xr(n&&n.onComplete,[e],t)}function rde(e){const t=e.chart,n=t.options.animation;Xr(n&&n.onProgress,[e],t)}function P9(e){return _M()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const K1={},GO=e=>{const t=P9(e);return Object.values(K1).filter(n=>n.canvas===t).pop()};function sde(e,t,n){const i=Object.keys(e);for(const r of i){const a=+r;if(a>=t){const l=e[r];delete e[r],(n>0||a>t)&&(e[a+n]=l)}}}function ode(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}class ah{static register(...t){Hu.add(...t),qO()}static unregister(...t){Hu.remove(...t),qO()}constructor(t,n){const i=this.config=new Que(n),r=P9(t),a=GO(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Sue(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,l.aspectRatio),s=h&&h.canvas,p=s&&s.height,v=s&&s.width;if(this.id=ale(),this.ctx=h,this.canvas=s,this.width=v,this.height=p,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Uue,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Sle(x=>this.update(x),l.resizeDelay||0),this._dataChanges=[],K1[this.id]=this,!h||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Jd.listen(this,"complete",HO),Jd.listen(this,"progress",rde),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:r,_aspectRatio:a}=this;return zi(t)?n&&a?a:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Hu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pO(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hO(this.canvas,this.ctx),this}stop(){return Jd.stop(this),this}resize(t,n){Jd.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,r=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,a),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,pO(this,h,!0)&&(this.notifyPlugins("resize",{size:l}),Xr(i.onResize,[this,l],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Pr(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,r=Object.keys(i).reduce((l,h)=>(l[h]=!1,l),{});let a=[];n&&(a=a.concat(Object.keys(n).map(l=>{const h=n[l],s=yI(l,h),p=s==="r",v=s==="x";return{options:h,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),Pr(a,l=>{const h=l.options,s=h.id,p=yI(s,h),v=Ei(h.type,l.dtype);(h.position===void 0||jO(h.position,p)!==jO(l.dposition))&&(h.position=l.dposition),r[s]=!0;let x=null;if(s in i&&i[s].type===v)x=i[s];else{const T=Hu.getScale(v);x=new T({id:s,type:v,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(h,t)}),Pr(r,(l,h)=>{l||delete i[h]}),Pr(i,l=>{Ua.configure(this,l,l.options),Ua.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((r,a)=>r.index-a.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(WO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,r)=>{n.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const a=n[i];let l=this.getDatasetMeta(i);const h=a.type||this.config.type;if(l.type&&l.type!==h&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=h,l.indexAxis=a.indexAxis||_I(h,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const s=Hu.getController(h),{datasetElementType:p,dataElementType:v}=hs.datasets[h];Object.assign(s,{dataElementType:Hu.getElement(v),datasetElementType:p&&Hu.getElement(p)}),l.controller=new s(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Pr(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:x}=this.getDatasetMeta(p),T=!r&&a.indexOf(x)===-1;x.buildOrUpdateElements(T),l=Math.max(+x.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||Pr(a,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(WO("z","_idx"));const{_active:h,_lastEvent:s}=this;s?this._eventHandler(s,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Pr(this.scales,t=>{Ua.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!iO(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:a}of n){const l=i==="_removeElements"?-a:a;sde(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,h)=>h+","+l.splice(1).join(","))),r=i(0);for(let a=1;a<n;a++)if(!iO(r,i(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ua.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Pr(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,dm(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Jd.has(this)?this.attached&&!Jd.running(this)&&Jd.start(this):(this.draw(),HO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let r,a;for(r=0,a=n.length;r<a;++r){const l=n[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=_9(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&lS(n,r),t.controller.draw(),r&&cS(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ph(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,r){const a=iue.modes[n];return typeof a=="function"?a(this,t,i,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let r=i.filter(a=>a&&a._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ym(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const r=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,r);ub(n)?(a.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Jd.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),hO(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete K1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(a,l)=>{n.addEventListener(this,a,l),t[a]=l},r=(a,l,h)=>{a.offsetX=l,a.offsetY=h,this._eventHandler(a)};Pr(this.options.events,a=>i(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(s,p)=>{n.addEventListener(this,s,p),t[s]=p},r=(s,p)=>{t[s]&&(n.removeEventListener(this,s,p),delete t[s])},a=(s,p)=>{this.canvas&&this.resize(s,p)};let l;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),i("attach",h)},n.isAttached(this.canvas)?h():l()}unbindEvents(){Pr(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Pr(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const r=i?"set":"remove";let a,l,h,s;for(n==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),h=0,s=t.length;h<s;++h){l=t[h];const p=l&&this.getDatasetMeta(l.datasetIndex).controller;p&&p[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const h=this.getDatasetMeta(a);if(!h)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:h.data[l],index:l}});!eT(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const r=this.options.hover,a=(s,p)=>s.filter(v=>!p.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),l=a(n,t),h=i?t:a(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const a=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(a||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:r=[],options:a}=this,l=n,h=this._getActiveElements(t,r,i,l),s=fle(t),p=ode(t,this._lastEvent,i,s);i&&(this._lastEvent=null,Xr(a.onHover,[t,h,this],this),s&&Xr(a.onClick,[t,h,this],this));const v=!eT(h,r);return(v||n)&&(this._active=h,this._updateHoverStyles(h,r,n)),this._lastEvent=p,v}_getActiveElements(t,n,i,r){if(t.type==="mouseout")return[];if(!i)return n;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,r)}}Cn(ah,"defaults",hs),Cn(ah,"instances",K1),Cn(ah,"overrides",Zp),Cn(ah,"registry",Hu),Cn(ah,"version",nde),Cn(ah,"getChart",GO);function qO(){return Pr(ah.instances,e=>e._plugins.invalidate())}function ade(e,t,n){const{startAngle:i,x:r,y:a,outerRadius:l,innerRadius:h,options:s}=t,{borderWidth:p,borderJoinStyle:v}=s,x=Math.min(p/l,Ra(i-n));if(e.beginPath(),e.arc(r,a,l-p/2,i+x/2,n-x/2),h>0){const T=Math.min(p/h,Ra(i-n));e.arc(r,a,h+p/2,n-T/2,i+T/2,!0)}else{const T=Math.min(p/2,l*Ra(i-n));if(v==="round")e.arc(r,a,T,n-fr/2,i+fr/2,!0);else if(v==="bevel"){const C=2*T*T,I=-C*Math.cos(n+fr/2)+r,P=-C*Math.sin(n+fr/2)+a,D=C*Math.cos(i+fr/2)+r,F=C*Math.sin(i+fr/2)+a;e.lineTo(I,P),e.lineTo(D,F)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function lde(e,t,n){const{startAngle:i,pixelMargin:r,x:a,y:l,outerRadius:h,innerRadius:s}=t;let p=r/h;e.beginPath(),e.arc(a,l,h,i-p,n+p),s>r?(p=r/s,e.arc(a,l,s,n+p,i-p,!0)):e.arc(a,l,r,n+qs,i-qs),e.closePath(),e.clip()}function cde(e){return mM(e,["outerStart","outerEnd","innerStart","innerEnd"])}function ude(e,t,n,i){const r=cde(e.options.borderRadius),a=(n-t)/2,l=Math.min(a,i*t/2),h=s=>{const p=(n-Math.min(a,s))*i/2;return zo(s,0,Math.min(a,p))};return{outerStart:h(r.outerStart),outerEnd:h(r.outerEnd),innerStart:zo(r.innerStart,0,l),innerEnd:zo(r.innerEnd,0,l)}}function mv(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function oT(e,t,n,i,r,a){const{x:l,y:h,startAngle:s,pixelMargin:p,innerRadius:v}=t,x=Math.max(t.outerRadius+i+n-p,0),T=v>0?v+i+n+p:0;let C=0;const I=r-s;if(i){const Ie=v>0?v-i:0,Ve=x>0?x-i:0,Ke=(Ie+Ve)/2,Xe=Ke!==0?I*Ke/(Ke+i):I;C=(I-Xe)/2}const P=Math.max(.001,I*x-n/fr)/x,D=(I-P)/2,F=s+D+C,V=r-D-C,{outerStart:H,outerEnd:q,innerStart:K,innerEnd:ie}=ude(t,T,x,V-F),X=x-H,$=x-q,G=F+H/X,j=V-q/$,te=T+K,Z=T+ie,ee=F+K/te,be=V-ie/Z;if(e.beginPath(),a){const Ie=(G+j)/2;if(e.arc(l,h,x,G,Ie),e.arc(l,h,x,Ie,j),q>0){const Pe=mv($,j,l,h);e.arc(Pe.x,Pe.y,q,j,V+qs)}const Ve=mv(Z,V,l,h);if(e.lineTo(Ve.x,Ve.y),ie>0){const Pe=mv(Z,be,l,h);e.arc(Pe.x,Pe.y,ie,V+qs,be+Math.PI)}const Ke=(V-ie/T+(F+K/T))/2;if(e.arc(l,h,T,V-ie/T,Ke,!0),e.arc(l,h,T,Ke,F+K/T,!0),K>0){const Pe=mv(te,ee,l,h);e.arc(Pe.x,Pe.y,K,ee+Math.PI,F-qs)}const Xe=mv(X,F,l,h);if(e.lineTo(Xe.x,Xe.y),H>0){const Pe=mv(X,G,l,h);e.arc(Pe.x,Pe.y,H,F-qs,G)}}else{e.moveTo(l,h);const Ie=Math.cos(G)*x+l,Ve=Math.sin(G)*x+h;e.lineTo(Ie,Ve);const Ke=Math.cos(j)*x+l,Xe=Math.sin(j)*x+h;e.lineTo(Ke,Xe)}e.closePath()}function dde(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h}=t;let s=t.endAngle;if(a){oT(e,t,n,i,s,r);for(let p=0;p<a;++p)e.fill();isNaN(h)||(s=l+(h%es||es))}return oT(e,t,n,i,s,r),e.fill(),s}function hde(e,t,n,i,r){const{fullCircles:a,startAngle:l,circumference:h,options:s}=t,{borderWidth:p,borderJoinStyle:v,borderDash:x,borderDashOffset:T,borderRadius:C}=s,I=s.borderAlign==="inner";if(!p)return;e.setLineDash(x||[]),e.lineDashOffset=T,I?(e.lineWidth=p*2,e.lineJoin=v||"round"):(e.lineWidth=p,e.lineJoin=v||"bevel");let P=t.endAngle;if(a){oT(e,t,n,i,P,r);for(let D=0;D<a;++D)e.stroke();isNaN(h)||(P=l+(h%es||es))}I&&lde(e,t,P),s.selfJoin&&P-l>=fr&&C===0&&v!=="miter"&&ade(e,t,P),a||(oT(e,t,n,i,P,r),e.stroke())}class Jy extends Bh{constructor(n){super();Cn(this,"circumference");Cn(this,"endAngle");Cn(this,"fullCircles");Cn(this,"innerRadius");Cn(this,"outerRadius");Cn(this,"pixelMargin");Cn(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,r){const a=this.getProps(["x","y"],r),{angle:l,distance:h}=Z8(a,{x:n,y:i}),{startAngle:s,endAngle:p,innerRadius:v,outerRadius:x,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),C=(this.options.spacing+this.options.borderWidth)/2,I=Ei(T,p-s),P=db(l,s,p)&&s!==p,D=I>=es||P,F=fh(h,v+C,x+C);return D&&F}getCenterPoint(n){const{x:i,y:r,startAngle:a,endAngle:l,innerRadius:h,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:p,spacing:v}=this.options,x=(a+l)/2,T=(h+s+v+p)/2;return{x:i+Math.cos(x)*T,y:r+Math.sin(x)*T}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:r}=this,a=(i.offset||0)/4,l=(i.spacing||0)/2,h=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>es?Math.floor(r/es):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const s=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(s)*a,Math.sin(s)*a);const p=1-Math.sin(Math.min(fr,r||0)),v=a*p;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,dde(n,this,v,l,h),hde(n,this,v,l,h),n.restore()}}Cn(Jy,"id","arc"),Cn(Jy,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Cn(Jy,"defaultRoutes",{backgroundColor:"backgroundColor"}),Cn(Jy,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function M9(e,t,n=t){e.lineCap=Ei(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Ei(n.borderDash,t.borderDash)),e.lineDashOffset=Ei(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Ei(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Ei(n.borderWidth,t.borderWidth),e.strokeStyle=Ei(n.borderColor,t.borderColor)}function fde(e,t,n){e.lineTo(n.x,n.y)}function mde(e){return e.stepped?Vle:e.tension||e.cubicInterpolationMode==="monotone"?Ble:fde}function D9(e,t,n={}){const i=e.length,{start:r=0,end:a=i-1}=n,{start:l,end:h}=t,s=Math.max(r,l),p=Math.min(a,h),v=r<l&&a<l||r>h&&a>h;return{count:i,start:s,loop:t.loop,ilen:p<s&&!v?i+p-s:p-s}}function pde(e,t,n,i){const{points:r,options:a}=t,{count:l,start:h,loop:s,ilen:p}=D9(r,n,i),v=mde(a);let{move:x=!0,reverse:T}=i||{},C,I,P;for(C=0;C<=p;++C)I=r[(h+(T?p-C:C))%l],!I.skip&&(x?(e.moveTo(I.x,I.y),x=!1):v(e,P,I,T,a.stepped),P=I);return s&&(I=r[(h+(T?p:0))%l],v(e,P,I,T,a.stepped)),!!s}function gde(e,t,n,i){const r=t.points,{count:a,start:l,ilen:h}=D9(r,n,i),{move:s=!0,reverse:p}=i||{};let v=0,x=0,T,C,I,P,D,F;const V=q=>(l+(p?h-q:q))%a,H=()=>{P!==D&&(e.lineTo(v,D),e.lineTo(v,P),e.lineTo(v,F))};for(s&&(C=r[V(0)],e.moveTo(C.x,C.y)),T=0;T<=h;++T){if(C=r[V(T)],C.skip)continue;const q=C.x,K=C.y,ie=q|0;ie===I?(K<P?P=K:K>D&&(D=K),v=(x*v+q)/++x):(H(),e.lineTo(q,K),I=ie,x=0,P=D=K),F=K}H()}function bI(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?gde:pde}function vde(e){return e.stepped?pce:e.tension||e.cubicInterpolationMode==="monotone"?gce:_p}function _de(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),M9(e,t.options),e.stroke(r)}function yde(e,t,n,i){const{segments:r,options:a}=t,l=bI(t);for(const h of r)M9(e,a,h.style),e.beginPath(),l(e,t,h,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}const bde=typeof Path2D=="function";function xde(e,t,n,i){bde&&!t.options.segment?_de(e,t,n,i):yde(e,t,n,i)}class Bf extends Bh{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;ace(this._points,i,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wce(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,i=t.length;return i&&n[t[i-1].end]}interpolate(t,n){const i=this.options,r=t[n],a=this.points,l=v9(this,{property:n,start:r,end:r});if(!l.length)return;const h=[],s=vde(i);let p,v;for(p=0,v=l.length;p<v;++p){const{start:x,end:T}=l[p],C=a[x],I=a[T];if(C===I){h.push(C);continue}const P=Math.abs((r-C[n])/(I[n]-C[n])),D=s(C,I,P,i.stepped);D[n]=t[n],h.push(D)}return h.length===1?h[0]:h}pathSegment(t,n,i){return bI(this)(t,this,n,i)}path(t,n,i){const r=this.segments,a=bI(this);let l=this._loop;n=n||0,i=i||this.points.length-n;for(const h of r)l&=a(t,this,h,{start:n,end:n+i-1});return!!l}draw(t,n,i,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),xde(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Cn(Bf,"id","line"),Cn(Bf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Cn(Bf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Cn(Bf,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function KO(e,t,n,i){const r=e.options,{[n]:a}=e.getProps([n],i);return Math.abs(t-a)<r.radius+r.hitRadius}class X1 extends Bh{constructor(n){super();Cn(this,"parsed");Cn(this,"skip");Cn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const a=this.options,{x:l,y:h}=this.getProps(["x","y"],r);return Math.pow(n-l,2)+Math.pow(i-h,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,i){return KO(this,n,"x",i)}inYRange(n,i){return KO(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!ph(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,gI(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Cn(X1,"id","point"),Cn(X1,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Cn(X1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function L9(e,t){const{x:n,y:i,base:r,width:a,height:l}=e.getProps(["x","y","base","width","height"],t);let h,s,p,v,x;return e.horizontal?(x=l/2,h=Math.min(n,r),s=Math.max(n,r),p=i-x,v=i+x):(x=a/2,h=n-x,s=n+x,p=Math.min(i,r),v=Math.max(i,r)),{left:h,top:p,right:s,bottom:v}}function Ff(e,t,n,i){return e?0:zo(t,n,i)}function wde(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,a=o9(i);return{t:Ff(r.top,a.top,0,n),r:Ff(r.right,a.right,0,t),b:Ff(r.bottom,a.bottom,0,n),l:Ff(r.left,a.left,0,t)}}function Tde(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=Fp(r),l=Math.min(t,n),h=e.borderSkipped,s=i||ji(r);return{topLeft:Ff(!s||h.top||h.left,a.topLeft,0,l),topRight:Ff(!s||h.top||h.right,a.topRight,0,l),bottomLeft:Ff(!s||h.bottom||h.left,a.bottomLeft,0,l),bottomRight:Ff(!s||h.bottom||h.right,a.bottomRight,0,l)}}function Sde(e){const t=L9(e),n=t.right-t.left,i=t.bottom-t.top,r=wde(e,n/2,i/2),a=Tde(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:a},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function $C(e,t,n,i){const r=t===null,a=n===null,h=e&&!(r&&a)&&L9(e,i);return h&&(r||fh(t,h.left,h.right))&&(a||fh(n,h.top,h.bottom))}function Ede(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Cde(e,t){e.rect(t.x,t.y,t.w,t.h)}function UC(e,t,n={}){const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-i,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+a,h:e.h+l,radius:e.radius}}class Y1 extends Bh{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:a,outer:l}=Sde(this),h=Ede(l.radius)?hb:Cde;t.save(),(l.w!==a.w||l.h!==a.h)&&(t.beginPath(),h(t,UC(l,n,a)),t.clip(),h(t,UC(a,-n,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),h(t,UC(a,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,i){return $C(this,t,n,i)}inXRange(t,n){return $C(this,t,null,n)}inYRange(t,n){return $C(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(n+r)/2:n,y:a?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Cn(Y1,"id","bar"),Cn(Y1,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Cn(Y1,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var kde=Object.freeze({__proto__:null,ArcElement:Jy,BarElement:Y1,LineElement:Bf,PointElement:X1});const xI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],XO=xI.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function R9(e){return xI[e%xI.length]}function O9(e){return XO[e%XO.length]}function Ide(e,t){return e.borderColor=R9(t),e.backgroundColor=O9(t),++t}function Ade(e,t){return e.backgroundColor=e.data.map(()=>R9(t++)),t}function Pde(e,t){return e.backgroundColor=e.data.map(()=>O9(t++)),t}function Mde(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof Tp?t=Ade(n,t):r instanceof S0?t=Pde(n,t):r&&(t=Ide(n,t))}}function YO(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Dde(e){return e&&(e.borderColor||e.backgroundColor)}function Lde(){return hs.borderColor!=="rgba(0,0,0,0.1)"||hs.backgroundColor!=="rgba(0,0,0,0.1)"}var Rde={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:a}=r,l=YO(i)||Dde(r)||a&&YO(a)||Lde();if(!n.forceOverride&&l)return;const h=Mde(e);i.forEach(h)}};function Ode(e,t,n,i,r){const a=r.samples||i;if(a>=n)return e.slice(t,t+n);const l=[],h=(n-2)/(a-2);let s=0;const p=t+n-1;let v=t,x,T,C,I,P;for(l[s++]=e[v],x=0;x<a-2;x++){let D=0,F=0,V;const H=Math.floor((x+1)*h)+1+t,q=Math.min(Math.floor((x+2)*h)+1,n)+t,K=q-H;for(V=H;V<q;V++)D+=e[V].x,F+=e[V].y;D/=K,F/=K;const ie=Math.floor(x*h)+1+t,X=Math.min(Math.floor((x+1)*h)+1,n)+t,{x:$,y:G}=e[v];for(C=I=-1,V=ie;V<X;V++)I=.5*Math.abs(($-D)*(e[V].y-G)-($-e[V].x)*(F-G)),I>C&&(C=I,T=e[V],P=V);l[s++]=T,v=P}return l[s++]=e[p],l}function Vde(e,t,n,i){let r=0,a=0,l,h,s,p,v,x,T,C,I,P;const D=[],F=t+n-1,V=e[t].x,q=e[F].x-V;for(l=t;l<t+n;++l){h=e[l],s=(h.x-V)/q*i,p=h.y;const K=s|0;if(K===v)p<I?(I=p,x=l):p>P&&(P=p,T=l),r=(a*r+h.x)/++a;else{const ie=l-1;if(!zi(x)&&!zi(T)){const X=Math.min(x,T),$=Math.max(x,T);X!==C&&X!==ie&&D.push({...e[X],x:r}),$!==C&&$!==ie&&D.push({...e[$],x:r})}l>0&&ie!==C&&D.push(e[ie]),D.push(h),v=K,a=0,I=P=p,x=T=C=l}}return D}function V9(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function ZO(e){e.data.datasets.forEach(t=>{V9(t)})}function Bde(e,t){const n=t.length;let i=0,r;const{iScale:a}=e,{min:l,max:h,minDefined:s,maxDefined:p}=a.getUserBounds();return s&&(i=zo(mh(t,a.axis,l).lo,0,n-1)),p?r=zo(mh(t,a.axis,h).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var Fde={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){ZO(e);return}const i=e.width;e.data.datasets.forEach((r,a)=>{const{_data:l,indexAxis:h}=r,s=e.getDatasetMeta(a),p=l||r.data;if(Yy([h,e.options.indexAxis])==="y"||!s.controller.supportsDecimation)return;const v=e.scales[s.xAxisID];if(v.type!=="linear"&&v.type!=="time"||e.options.parsing)return;let{start:x,count:T}=Bde(s,p);const C=n.threshold||4*i;if(T<=C){V9(r);return}zi(l)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(P){this._data=P}}));let I;switch(n.algorithm){case"lttb":I=Ode(p,x,T,i,n);break;case"min-max":I=Vde(p,x,T,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=I})},destroy(e){ZO(e)}};function zde(e,t,n){const i=e.segments,r=e.points,a=t.points,l=[];for(const h of i){let{start:s,end:p}=h;p=hS(s,p,r);const v=wI(n,r[s],r[p],h.loop);if(!t.segments){l.push({source:h,target:v,start:r[s],end:r[p]});continue}const x=v9(t,v);for(const T of x){const C=wI(n,a[T.start],a[T.end],T.loop),I=g9(h,r,C);for(const P of I)l.push({source:P,target:T,start:{[n]:JO(v,C,"start",Math.max)},end:{[n]:JO(v,C,"end",Math.min)}})}}return l}function wI(e,t,n,i){if(i)return;let r=t[e],a=n[e];return e==="angle"&&(r=Ra(r),a=Ra(a)),{property:e,start:r,end:a}}function Nde(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,a=[];return t.segments.forEach(({start:l,end:h})=>{h=hS(l,h,r);const s=r[l],p=r[h];i!==null?(a.push({x:s.x,y:i}),a.push({x:p.x,y:i})):n!==null&&(a.push({x:n,y:s.y}),a.push({x:n,y:p.y}))}),a}function hS(e,t,n){for(;t>e;t--){const i=n[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function JO(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function B9(e,t){let n=[],i=!1;return ds(e)?(i=!0,n=e):n=Nde(e,t),n.length?new Bf({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function QO(e){return e&&e.fill!==!1}function $de(e,t,n){let r=e[t].fill;const a=[t];let l;if(!n)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!Vs(r))return r;if(l=e[r],!l)return!1;if(l.visible)return r;a.push(r),r=l.fill}return!1}function Ude(e,t,n){const i=Gde(e);if(ji(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Vs(r)&&Math.floor(r)===r?jde(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function jde(e,t,n,i){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=i?!1:n}function Wde(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:ji(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Hde(e,t,n){let i;return e==="start"?i=n:e==="end"?i=t.options.reverse?t.min:t.max:ji(e)?i=e.value:i=t.getBaseValue(),i}function Gde(e){const t=e.options,n=t.fill;let i=Ei(n&&n.target,n);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function qde(e){const{scale:t,index:n,line:i}=e,r=[],a=i.segments,l=i.points,h=Kde(t,n);h.push(B9({x:null,y:t.bottom},i));for(let s=0;s<a.length;s++){const p=a[s];for(let v=p.start;v<=p.end;v++)Xde(r,l[v],h)}return new Bf({points:r,options:{}})}function Kde(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const a=i[r];if(a.index===t)break;a.hidden||n.unshift(a.dataset)}return n}function Xde(e,t,n){const i=[];for(let r=0;r<n.length;r++){const a=n[r],{first:l,last:h,point:s}=Yde(a,t,"x");if(!(!s||l&&h)){if(l)i.unshift(s);else if(e.push(s),!h)break}}e.push(...i)}function Yde(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],a=e.segments,l=e.points;let h=!1,s=!1;for(let p=0;p<a.length;p++){const v=a[p],x=l[v.start][n],T=l[v.end][n];if(fh(r,x,T)){h=r===x,s=r===T;break}}return{first:h,last:s,point:i}}class F9{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,i){const{x:r,y:a,radius:l}=this;return n=n||{start:0,end:es},t.arc(r,a,l,n.end,n.start,!0),!i.bounds}interpolate(t){const{x:n,y:i,radius:r}=this,a=t.angle;return{x:n+Math.cos(a)*r,y:i+Math.sin(a)*r,angle:a}}}function Zde(e){const{chart:t,fill:n,line:i}=e;if(Vs(n))return Jde(t,n);if(n==="stack")return qde(e);if(n==="shape")return!0;const r=Qde(e);return r instanceof F9?r:B9(r,i)}function Jde(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Qde(e){return(e.scale||{}).getPointPositionForValue?the(e):ehe(e)}function ehe(e){const{scale:t={},fill:n}=e,i=Wde(n,t);if(Vs(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function the(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,a=i.reverse?t.max:t.min,l=Hde(n,t,a),h=[];if(i.grid.circular){const s=t.getPointPositionForValue(0,a);return new F9({x:s.x,y:s.y,radius:t.getDistanceFromCenterForValue(l)})}for(let s=0;s<r;++s)h.push(t.getPointPositionForValue(s,l));return h}function jC(e,t,n){const i=Zde(t),{chart:r,index:a,line:l,scale:h,axis:s}=t,p=l.options,v=p.fill,x=p.backgroundColor,{above:T=x,below:C=x}=v||{},I=r.getDatasetMeta(a),P=_9(r,I);i&&l.points.length&&(lS(e,n),nhe(e,{line:l,target:i,above:T,below:C,area:n,scale:h,axis:s,clip:P}),cS(e))}function nhe(e,t){const{line:n,target:i,above:r,below:a,area:l,scale:h,clip:s}=t,p=n._loop?"angle":t.axis;e.save();let v=a;a!==r&&(p==="x"?(eV(e,i,l.top),WC(e,{line:n,target:i,color:r,scale:h,property:p,clip:s}),e.restore(),e.save(),eV(e,i,l.bottom)):p==="y"&&(tV(e,i,l.left),WC(e,{line:n,target:i,color:a,scale:h,property:p,clip:s}),e.restore(),e.save(),tV(e,i,l.right),v=r)),WC(e,{line:n,target:i,color:v,scale:h,property:p,clip:s}),e.restore()}function eV(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,v=r[s],x=r[hS(s,p,r)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(v.x,n),e.lineTo(v.x,v.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(x.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function tV(e,t,n){const{segments:i,points:r}=t;let a=!0,l=!1;e.beginPath();for(const h of i){const{start:s,end:p}=h,v=r[s],x=r[hS(s,p,r)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(n,v.y),e.lineTo(v.x,v.y)),l=!!t.pathSegment(e,h,{move:l}),l?e.closePath():e.lineTo(n,x.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function WC(e,t){const{line:n,target:i,property:r,color:a,scale:l,clip:h}=t,s=zde(n,i,r);for(const{source:p,target:v,start:x,end:T}of s){const{style:{backgroundColor:C=a}={}}=p,I=i!==!0;e.save(),e.fillStyle=C,ihe(e,l,h,I&&wI(r,x,T)),e.beginPath();const P=!!n.pathSegment(e,p);let D;if(I){P?e.closePath():nV(e,i,T,r);const F=!!i.pathSegment(e,v,{move:P,reverse:!0});D=P&&F,D||nV(e,i,x,r)}e.closePath(),e.fill(D?"evenodd":"nonzero"),e.restore()}}function ihe(e,t,n,i){const r=t.chart.chartArea,{property:a,start:l,end:h}=i||{};if(a==="x"||a==="y"){let s,p,v,x;a==="x"?(s=l,p=r.top,v=h,x=r.bottom):(s=r.left,p=l,v=r.right,x=h),e.beginPath(),n&&(s=Math.max(s,n.left),v=Math.min(v,n.right),p=Math.max(p,n.top),x=Math.min(x,n.bottom)),e.rect(s,p,v-s,x-p),e.clip()}}function nV(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var rhe={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let a,l,h,s;for(l=0;l<i;++l)a=e.getDatasetMeta(l),h=a.dataset,s=null,h&&h.options&&h instanceof Bf&&(s={visible:e.isDatasetVisible(l),index:l,fill:Ude(h,l,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:h}),a.$filler=s,r.push(s);for(l=0;l<i;++l)s=r[l],!(!s||s.fill===!1)&&(s.fill=$de(r,l,n.propagate))},beforeDraw(e,t,n){const i=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let l=r.length-1;l>=0;--l){const h=r[l].$filler;h&&(h.line.updateControlPoints(a,h.axis),i&&h.fill&&jC(e.ctx,h,a))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const a=i[r].$filler;QO(a)&&jC(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;!QO(i)||n.drawTime!=="beforeDatasetDraw"||jC(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iV=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},she=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class rV extends Bh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Xr(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=yo(i.font),a=r.size,l=this._computeTitleHeight(),{boxWidth:h,itemHeight:s}=iV(i,a);let p,v;n.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(l,a,h,s)+10):(v=this.maxHeight,p=this._fitCols(l,r,h,s)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,r){const{ctx:a,maxWidth:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+h;let x=t;a.textAlign="left",a.textBaseline="middle";let T=-1,C=-v;return this.legendItems.forEach((I,P)=>{const D=i+n/2+a.measureText(I.text).width;(P===0||p[p.length-1]+D+2*h>l)&&(x+=v,p[p.length-(P>0?0:1)]=0,C+=v,T++),s[P]={left:0,top:C,row:T,width:D,height:r},p[p.length-1]+=D+h}),x}_fitCols(t,n,i,r){const{ctx:a,maxHeight:l,options:{labels:{padding:h}}}=this,s=this.legendHitBoxes=[],p=this.columnSizes=[],v=l-t;let x=h,T=0,C=0,I=0,P=0;return this.legendItems.forEach((D,F)=>{const{itemWidth:V,itemHeight:H}=ohe(i,n,a,D,r);F>0&&C+H+2*h>v&&(x+=T+h,p.push({width:T,height:C}),I+=T+h,P++,T=C=0),s[F]={left:I,top:C,col:P,width:V,height:H},T=Math.max(T,V),C+=H+h}),x+=T,p.push({width:T,height:C}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:a}}=this,l=Uv(a,this.left,this.width);if(this.isHorizontal()){let h=0,s=Ma(i,this.left+r,this.right-this.lineWidths[h]);for(const p of n)h!==p.row&&(h=p.row,s=Ma(i,this.left+r,this.right-this.lineWidths[h])),p.top+=this.top+t+r,p.left=l.leftForLtr(l.x(s),p.width),s+=p.width+r}else{let h=0,s=Ma(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const p of n)p.col!==h&&(h=p.col,s=Ma(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),p.top=s,p.left+=this.left+r,p.left=l.leftForLtr(l.x(p.left),p.width),s+=p.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;lS(t,this),this._draw(),cS(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:r}=this,{align:a,labels:l}=t,h=hs.color,s=Uv(t.rtl,this.left,this.width),p=yo(l.font),{padding:v}=l,x=p.size,T=x/2;let C;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:I,boxHeight:P,itemHeight:D}=iV(l,x),F=function(ie,X,$){if(isNaN(I)||I<=0||isNaN(P)||P<0)return;r.save();const G=Ei($.lineWidth,1);if(r.fillStyle=Ei($.fillStyle,h),r.lineCap=Ei($.lineCap,"butt"),r.lineDashOffset=Ei($.lineDashOffset,0),r.lineJoin=Ei($.lineJoin,"miter"),r.lineWidth=G,r.strokeStyle=Ei($.strokeStyle,h),r.setLineDash(Ei($.lineDash,[])),l.usePointStyle){const j={radius:P*Math.SQRT2/2,pointStyle:$.pointStyle,rotation:$.rotation,borderWidth:G},te=s.xPlus(ie,I/2),Z=X+T;s9(r,j,te,Z,l.pointStyleWidth&&I)}else{const j=X+Math.max((x-P)/2,0),te=s.leftForLtr(ie,I),Z=Fp($.borderRadius);r.beginPath(),Object.values(Z).some(ee=>ee!==0)?hb(r,{x:te,y:j,w:I,h:P,radius:Z}):r.rect(te,j,I,P),r.fill(),G!==0&&r.stroke()}r.restore()},V=function(ie,X,$){Jp(r,$.text,ie,X+D/2,p,{strikethrough:$.hidden,textAlign:s.textAlign($.textAlign)})},H=this.isHorizontal(),q=this._computeTitleHeight();H?C={x:Ma(a,this.left+v,this.right-i[0]),y:this.top+v+q,line:0}:C={x:this.left+v,y:Ma(a,this.top+q+v,this.bottom-n[0].height),line:0},f9(this.ctx,t.textDirection);const K=D+v;this.legendItems.forEach((ie,X)=>{r.strokeStyle=ie.fontColor,r.fillStyle=ie.fontColor;const $=r.measureText(ie.text).width,G=s.textAlign(ie.textAlign||(ie.textAlign=l.textAlign)),j=I+T+$;let te=C.x,Z=C.y;s.setWidth(this.width),H?X>0&&te+j+v>this.right&&(Z=C.y+=K,C.line++,te=C.x=Ma(a,this.left+v,this.right-i[C.line])):X>0&&Z+K>this.bottom&&(te=C.x=te+n[C.line].width+v,C.line++,Z=C.y=Ma(a,this.top+q+v,this.bottom-n[C.line].height));const ee=s.x(te);if(F(ee,Z,ie),te=Ele(G,te+I+T,H?te+j:this.right,t.rtl),V(s.x(te),Z,ie),H)C.x+=j+v;else if(typeof ie.text!="string"){const be=p.lineHeight;C.y+=z9(ie,be)+v}else C.y+=K}),m9(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=yo(n.font),r=qa(n.padding);if(!n.display)return;const a=Uv(t.rtl,this.left,this.width),l=this.ctx,h=n.position,s=i.size/2,p=r.top+s;let v,x=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),v=this.top+p,x=Ma(t.align,x,this.right-T);else{const I=this.columnSizes.reduce((P,D)=>Math.max(P,D.height),0);v=p+Ma(t.align,this.top,this.bottom-I-t.labels.padding-this._computeTitleHeight())}const C=Ma(h,x,x+T);l.textAlign=a.textAlign(hM(h)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=i.string,Jp(l,n.text,C,v,i)}_computeTitleHeight(){const t=this.options.title,n=yo(t.font),i=qa(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,r,a;if(fh(t,this.left,this.right)&&fh(n,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(r=a[i],fh(t,r.left,r.left+r.width)&&fh(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!che(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,a=she(r,i);r&&!a&&Xr(n.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!a&&Xr(n.onHover,[t,i,this],this)}else i&&Xr(n.onClick,[t,i,this],this)}}function ohe(e,t,n,i,r){const a=ahe(i,e,t,n),l=lhe(r,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function ahe(e,t,n,i){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((a,l)=>a.length>l.length?a:l)),t+n.size/2+i.measureText(r).width}function lhe(e,t,n){let i=e;return typeof t.text!="string"&&(i=z9(t,n)),i}function z9(e,t){const n=e.text?e.text.length:0;return t*n}function che(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var uhe={id:"legend",_element:rV,start(e,t,n){const i=e.legend=new rV({ctx:e.ctx,options:n,chart:e});Ua.configure(e,i,n),Ua.addBox(e,i)},stop(e){Ua.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Ua.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:a,useBorderRadius:l,borderRadius:h}}=e.legend.options;return e._getSortedDatasetMetas().map(s=>{const p=s.controller.getStyle(n?0:void 0),v=qa(p.borderWidth);return{text:t[s.index].label,fillStyle:p.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:r||p.textAlign,borderRadius:l&&(h||p.borderRadius),datasetIndex:s.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class xM extends Bh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=ds(i.text)?i.text.length:1;this._padding=qa(i.padding);const a=r*yo(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:r,right:a,options:l}=this,h=l.align;let s=0,p,v,x;return this.isHorizontal()?(v=Ma(h,i,a),x=n+t,p=a-i):(l.position==="left"?(v=i+t,x=Ma(h,r,n),s=fr*-.5):(v=a-t,x=Ma(h,n,r),s=fr*.5),p=r-n),{titleX:v,titleY:x,maxWidth:p,rotation:s}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=yo(n.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:h,maxWidth:s,rotation:p}=this._drawArgs(a);Jp(t,n.text,0,0,i,{color:n.color,maxWidth:s,rotation:p,textAlign:hM(n.align),textBaseline:"middle",translation:[l,h]})}}function dhe(e,t){const n=new xM({ctx:e.ctx,options:t,chart:e});Ua.configure(e,n,t),Ua.addBox(e,n),e.titleBlock=n}var hhe={id:"title",_element:xM,start(e,t,n){dhe(e,n)},stop(e){const t=e.titleBlock;Ua.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Ua.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const m1=new WeakMap;var fhe={id:"subtitle",start(e,t,n){const i=new xM({ctx:e.ctx,options:n,chart:e});Ua.configure(e,i,n),Ua.addBox(e,i),m1.set(e,i)},stop(e){Ua.removeBox(e,m1.get(e)),m1.delete(e)},beforeUpdate(e,t,n){const i=m1.get(e);Ua.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qy={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,a=0;for(t=0,n=e.length;t<n;++t){const h=e[t].element;if(h&&h.hasValue()){const s=h.tooltipPosition();i.add(s.x),r+=s.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((h,s)=>h+s)/i.size,y:r/a}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,r=Number.POSITIVE_INFINITY,a,l,h;for(a=0,l=e.length;a<l;++a){const s=e[a].element;if(s&&s.hasValue()){const p=s.getCenterPoint(),v=mI(t,p);v<r&&(r=v,h=s)}}if(h){const s=h.tooltipPosition();n=s.x,i=s.y}return{x:n,y:i}}};function ju(e,t){return t&&(ds(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Qd(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function mhe(e,t){const{element:n,datasetIndex:i,index:r}=t,a=e.getDatasetMeta(i).controller,{label:l,value:h}=a.getLabelAndValue(r);return{chart:e,label:l,parsed:a.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:h,dataset:a.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function sV(e,t){const n=e.chart.ctx,{body:i,footer:r,title:a}=e,{boxWidth:l,boxHeight:h}=t,s=yo(t.bodyFont),p=yo(t.titleFont),v=yo(t.footerFont),x=a.length,T=r.length,C=i.length,I=qa(t.padding);let P=I.height,D=0,F=i.reduce((q,K)=>q+K.before.length+K.lines.length+K.after.length,0);if(F+=e.beforeBody.length+e.afterBody.length,x&&(P+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),F){const q=t.displayColors?Math.max(h,s.lineHeight):s.lineHeight;P+=C*q+(F-C)*s.lineHeight+(F-1)*t.bodySpacing}T&&(P+=t.footerMarginTop+T*v.lineHeight+(T-1)*t.footerSpacing);let V=0;const H=function(q){D=Math.max(D,n.measureText(q).width+V)};return n.save(),n.font=p.string,Pr(e.title,H),n.font=s.string,Pr(e.beforeBody.concat(e.afterBody),H),V=t.displayColors?l+2+t.boxPadding:0,Pr(i,q=>{Pr(q.before,H),Pr(q.lines,H),Pr(q.after,H)}),V=0,n.font=v.string,Pr(e.footer,H),n.restore(),D+=I.width,{width:D,height:P}}function phe(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function ghe(e,t,n,i){const{x:r,width:a}=i,l=n.caretSize+n.caretPadding;if(e==="left"&&r+a+l>t.width||e==="right"&&r-a-l<0)return!0}function vhe(e,t,n,i){const{x:r,width:a}=n,{width:l,chartArea:{left:h,right:s}}=e;let p="center";return i==="center"?p=r<=(h+s)/2?"left":"right":r<=a/2?p="left":r>=l-a/2&&(p="right"),ghe(p,e,t,n)&&(p="center"),p}function oV(e,t,n){const i=n.yAlign||t.yAlign||phe(e,n);return{xAlign:n.xAlign||t.xAlign||vhe(e,t,n,i),yAlign:i}}function _he(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function yhe(e,t,n){let{y:i,height:r}=e;return t==="top"?i+=n:t==="bottom"?i-=r+n:i-=r/2,i}function aV(e,t,n,i){const{caretSize:r,caretPadding:a,cornerRadius:l}=e,{xAlign:h,yAlign:s}=n,p=r+a,{topLeft:v,topRight:x,bottomLeft:T,bottomRight:C}=Fp(l);let I=_he(t,h);const P=yhe(t,s,p);return s==="center"?h==="left"?I+=p:h==="right"&&(I-=p):h==="left"?I-=Math.max(v,T)+r:h==="right"&&(I+=Math.max(x,C)+r),{x:zo(I,0,i.width-t.width),y:zo(P,0,i.height-t.height)}}function p1(e,t,n){const i=qa(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function lV(e){return ju([],Qd(e))}function bhe(e,t,n){return ym(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function cV(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const N9={beforeTitle:Zd,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Zd,beforeBody:Zd,beforeLabel:Zd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return zi(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Zd,afterBody:Zd,beforeFooter:Zd,footer:Zd,afterFooter:Zd};function kl(e,t,n,i){const r=e[t].call(n,i);return typeof r>"u"?N9[t].call(n,i):r}var GC;let uV=(GC=class extends Bh{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,a=new y9(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=bhe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,r=kl(i,"beforeTitle",this,t),a=kl(i,"title",this,t),l=kl(i,"afterTitle",this,t);let h=[];return h=ju(h,Qd(r)),h=ju(h,Qd(a)),h=ju(h,Qd(l)),h}getBeforeBody(t,n){return lV(kl(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,r=[];return Pr(t,a=>{const l={before:[],lines:[],after:[]},h=cV(i,a);ju(l.before,Qd(kl(h,"beforeLabel",this,a))),ju(l.lines,kl(h,"label",this,a)),ju(l.after,Qd(kl(h,"afterLabel",this,a))),r.push(l)}),r}getAfterBody(t,n){return lV(kl(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,r=kl(i,"beforeFooter",this,t),a=kl(i,"footer",this,t),l=kl(i,"afterFooter",this,t);let h=[];return h=ju(h,Qd(r)),h=ju(h,Qd(a)),h=ju(h,Qd(l)),h}_createItems(t){const n=this._active,i=this.chart.data,r=[],a=[],l=[];let h=[],s,p;for(s=0,p=n.length;s<p;++s)h.push(mhe(this.chart,n[s]));return t.filter&&(h=h.filter((v,x,T)=>t.filter(v,x,T,i))),t.itemSort&&(h=h.sort((v,x)=>t.itemSort(v,x,i))),Pr(h,v=>{const x=cV(t.callbacks,v);r.push(kl(x,"labelColor",this,v)),a.push(kl(x,"labelPointStyle",this,v)),l.push(kl(x,"labelTextColor",this,v))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=h,h}update(t,n){const i=this.options.setContext(this.getContext()),r=this._active;let a,l=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const h=Qy[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const s=this._size=sV(this,i),p=Object.assign({},h,s),v=oV(this.chart,i,p),x=aV(i,p,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,a={opacity:1,x:x.x,y:x.y,width:s.width,height:s.height,caretX:h.x,caretY:h.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,r){const a=this.getCaretPosition(t,i,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(t,n,i){const{xAlign:r,yAlign:a}=this,{caretSize:l,cornerRadius:h}=i,{topLeft:s,topRight:p,bottomLeft:v,bottomRight:x}=Fp(h),{x:T,y:C}=t,{width:I,height:P}=n;let D,F,V,H,q,K;return a==="center"?(q=C+P/2,r==="left"?(D=T,F=D-l,H=q+l,K=q-l):(D=T+I,F=D+l,H=q-l,K=q+l),V=D):(r==="left"?F=T+Math.max(s,v)+l:r==="right"?F=T+I-Math.max(p,x)-l:F=this.caretX,a==="top"?(H=C,q=H-l,D=F-l,V=F+l):(H=C+P,q=H+l,D=F+l,V=F-l),K=H),{x1:D,x2:F,x3:V,y1:H,y2:q,y3:K}}drawTitle(t,n,i){const r=this.title,a=r.length;let l,h,s;if(a){const p=Uv(i.rtl,this.x,this.width);for(t.x=p1(this,i.titleAlign,i),n.textAlign=p.textAlign(i.titleAlign),n.textBaseline="middle",l=yo(i.titleFont),h=i.titleSpacing,n.fillStyle=i.titleColor,n.font=l.string,s=0;s<a;++s)n.fillText(r[s],p.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+h,s+1===a&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,n,i,r,a){const l=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:s,boxWidth:p}=a,v=yo(a.bodyFont),x=p1(this,"left",a),T=r.x(x),C=s<v.lineHeight?(v.lineHeight-s)/2:0,I=n.y+C;if(a.usePointStyle){const P={radius:Math.min(p,s)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},D=r.leftForLtr(T,p)+p/2,F=I+s/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,gI(t,P,D,F),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,gI(t,P,D,F)}else{t.lineWidth=ji(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const P=r.leftForLtr(T,p),D=r.leftForLtr(r.xPlus(T,1),p-2),F=Fp(l.borderRadius);Object.values(F).some(V=>V!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,hb(t,{x:P,y:I,w:p,h:s,radius:F}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),hb(t,{x:D,y:I+1,w:p-2,h:s-2,radius:F}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(P,I,p,s),t.strokeRect(P,I,p,s),t.fillStyle=l.backgroundColor,t.fillRect(D,I+1,p-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:r}=this,{bodySpacing:a,bodyAlign:l,displayColors:h,boxHeight:s,boxWidth:p,boxPadding:v}=i,x=yo(i.bodyFont);let T=x.lineHeight,C=0;const I=Uv(i.rtl,this.x,this.width),P=function($){n.fillText($,I.x(t.x+C),t.y+T/2),t.y+=T+a},D=I.textAlign(l);let F,V,H,q,K,ie,X;for(n.textAlign=l,n.textBaseline="middle",n.font=x.string,t.x=p1(this,D,i),n.fillStyle=i.bodyColor,Pr(this.beforeBody,P),C=h&&D!=="right"?l==="center"?p/2+v:p+2+v:0,q=0,ie=r.length;q<ie;++q){for(F=r[q],V=this.labelTextColors[q],n.fillStyle=V,Pr(F.before,P),H=F.lines,h&&H.length&&(this._drawColorBox(n,t,q,I,i),T=Math.max(x.lineHeight,s)),K=0,X=H.length;K<X;++K)P(H[K]),T=x.lineHeight;Pr(F.after,P)}C=0,T=x.lineHeight,Pr(this.afterBody,P),t.y-=a}drawFooter(t,n,i){const r=this.footer,a=r.length;let l,h;if(a){const s=Uv(i.rtl,this.x,this.width);for(t.x=p1(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=s.textAlign(i.footerAlign),n.textBaseline="middle",l=yo(i.footerFont),n.fillStyle=i.footerColor,n.font=l.string,h=0;h<a;++h)n.fillText(r[h],s.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,n,i,r){const{xAlign:a,yAlign:l}=this,{x:h,y:s}=t,{width:p,height:v}=i,{topLeft:x,topRight:T,bottomLeft:C,bottomRight:I}=Fp(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(h+x,s),l==="top"&&this.drawCaret(t,n,i,r),n.lineTo(h+p-T,s),n.quadraticCurveTo(h+p,s,h+p,s+T),l==="center"&&a==="right"&&this.drawCaret(t,n,i,r),n.lineTo(h+p,s+v-I),n.quadraticCurveTo(h+p,s+v,h+p-I,s+v),l==="bottom"&&this.drawCaret(t,n,i,r),n.lineTo(h+C,s+v),n.quadraticCurveTo(h,s+v,h,s+v-C),l==="center"&&a==="left"&&this.drawCaret(t,n,i,r),n.lineTo(h,s+x),n.quadraticCurveTo(h,s,h+x,s),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,r=i&&i.x,a=i&&i.y;if(r||a){const l=Qy[t.position].call(this,this._active,this._eventPosition);if(!l)return;const h=this._size=sV(this,t),s=Object.assign({},l,this._size),p=oV(n,t,s),v=aV(t,s,p,n);(r._to!==v.x||a._to!==v.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=qa(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,r,n),f9(t,n.textDirection),a.y+=l.top,this.drawTitle(a,t,n),this.drawBody(a,t,n),this.drawFooter(a,t,n),m9(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,r=t.map(({datasetIndex:h,index:s})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[s],index:s}}),a=!eT(i,r),l=this._positionChanged(r,n);(a||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],l=this._getActiveElements(t,a,n,i),h=this._positionChanged(l,t),s=n||!eT(l,a)||h;return s&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),s}_getActiveElements(t,n,i,r){const a=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:i,caretY:r,options:a}=this,l=Qy[a.position].call(this,t,n);return l!==!1&&(i!==l.x||r!==l.y)}},Cn(GC,"positioners",Qy),GC);var xhe={id:"tooltip",_element:uV,positioners:Qy,afterInit(e,t,n){n&&(e.tooltip=new uV({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:N9},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},whe=Object.freeze({__proto__:null,Colors:Rde,Decimation:Fde,Filler:rhe,Legend:uhe,SubTitle:fhe,Title:hhe,Tooltip:xhe});const The=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function She(e,t,n,i){const r=e.indexOf(t);if(r===-1)return The(e,t,n,i);const a=e.lastIndexOf(t);return r!==a?n:r}const Ehe=(e,t)=>e===null?null:zo(Math.round(e),0,t);function dV(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class TI extends yg{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:a}of n)i[r]===a&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(zi(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:She(i,t,Ei(n,t),this._addedLabels),Ehe(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,r=[];let a=this.getLabels();a=t===0&&n===a.length-1?a:a.slice(t,n+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return dV.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Cn(TI,"id","category"),Cn(TI,"defaults",{ticks:{callback:dV}});function Che(e,t){const n=[],{bounds:r,step:a,min:l,max:h,precision:s,count:p,maxTicks:v,maxDigits:x,includeBounds:T}=e,C=a||1,I=v-1,{min:P,max:D}=t,F=!zi(l),V=!zi(h),H=!zi(p),q=(D-P)/(x+1);let K=sO((D-P)/I/C)*C,ie,X,$,G;if(K<1e-14&&!F&&!V)return[{value:P},{value:D}];G=Math.ceil(D/K)-Math.floor(P/K),G>I&&(K=sO(G*K/I/C)*C),zi(s)||(ie=Math.pow(10,s),K=Math.ceil(K*ie)/ie),r==="ticks"?(X=Math.floor(P/K)*K,$=Math.ceil(D/K)*K):(X=P,$=D),F&&V&&a&&_le((h-l)/a,K/1e3)?(G=Math.round(Math.min((h-l)/K,v)),K=(h-l)/G,X=l,$=h):H?(X=F?l:X,$=V?h:$,G=p-1,K=($-X)/G):(G=($-X)/K,x0(G,Math.round(G),K/1e3)?G=Math.round(G):G=Math.ceil(G));const j=Math.max(oO(K),oO(X));ie=Math.pow(10,zi(s)?j:s),X=Math.round(X*ie)/ie,$=Math.round($*ie)/ie;let te=0;for(F&&(T&&X!==l?(n.push({value:l}),X<l&&te++,x0(Math.round((X+te*K)*ie)/ie,l,hV(l,q,e))&&te++):X<l&&te++);te<G;++te){const Z=Math.round((X+te*K)*ie)/ie;if(V&&Z>h)break;n.push({value:Z})}return V&&T&&$!==h?n.length&&x0(n[n.length-1].value,h,hV(h,q,e))?n[n.length-1].value=h:n.push({value:h}):(!V||$===h)&&n.push({value:$}),n}function hV(e,t,{horizontal:n,minRotation:i}){const r=du(i),a=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/a,l)}class aT extends yg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return zi(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:a}=this;const l=s=>r=n?r:s,h=s=>a=i?a:s;if(t){const s=sd(r),p=sd(a);s<0&&p<0?h(0):s>0&&p>0&&l(0)}if(r===a){let s=a===0?1:Math.abs(a*.05);h(a+s),t||l(r-s)}this.min=r,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,l=Che(r,a);return t.bounds==="ticks"&&Y8(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-n)/Math.max(t.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Qb(t,this.chart.options.locale,this.options.ticks.format)}}class SI extends aT{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Vs(t)?t:0,this.max=Vs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=du(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Cn(SI,"id","linear"),Cn(SI,"defaults",{ticks:{callback:aS.formatters.numeric}});const mb=e=>Math.floor(Of(e)),hp=(e,t)=>Math.pow(10,mb(e)+t);function fV(e){return e/Math.pow(10,mb(e))===1}function mV(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function khe(e,t){const n=t-e;let i=mb(n);for(;mV(e,t,i)>10;)i++;for(;mV(e,t,i)<10;)i--;return Math.min(i,mb(e))}function Ihe(e,{min:t,max:n}){t=Jl(e.min,t);const i=[],r=mb(t);let a=khe(t,n),l=a<0?Math.pow(10,Math.abs(a)):1;const h=Math.pow(10,a),s=r>a?Math.pow(10,r):0,p=Math.round((t-s)*l)/l,v=Math.floor((t-s)/h/10)*h*10;let x=Math.floor((p-v)/Math.pow(10,a)),T=Jl(e.min,Math.round((s+v+x*Math.pow(10,a))*l)/l);for(;T<n;)i.push({value:T,major:fV(T),significand:x}),x>=10?x=x<15?15:20:x++,x>=20&&(a++,x=2,l=a>=0?1:l),T=Math.round((s+v+x*Math.pow(10,a))*l)/l;const C=Jl(e.max,T);return i.push({value:C,major:fV(C),significand:x}),i}class EI extends yg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const i=aT.prototype.parse.apply(this,[t,n]);if(i===0){this._zero=!0;return}return Vs(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Vs(t)?Math.max(0,t):null,this.max=Vs(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Vs(this._userMin)&&(this.min=t===hp(this.min,0)?hp(this.min,-1):hp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const a=h=>i=t?i:h,l=h=>r=n?r:h;i===r&&(i<=0?(a(1),l(10)):(a(hp(i,-1)),l(hp(r,1)))),i<=0&&a(hp(r,-1)),r<=0&&l(hp(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},i=Ihe(n,this);return t.bounds==="ticks"&&Y8(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Qb(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Of(t),this._valueRange=Of(this.max)-Of(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Of(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}Cn(EI,"id","logarithmic"),Cn(EI,"defaults",{ticks:{callback:aS.formatters.logarithmic,major:{enabled:!0}}});function CI(e){const t=e.ticks;if(t.display&&e.display){const n=qa(t.backdropPadding);return Ei(t.font&&t.font.size,hs.font.size)+n.height}return 0}function Ahe(e,t,n){return n=ds(n)?n:[n],{w:Ole(e,t.string,n),h:n.length*t.lineHeight}}function pV(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Phe(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],a=e._pointLabels.length,l=e.options.pointLabels,h=l.centerPointLabels?fr/a:0;for(let s=0;s<a;s++){const p=l.setContext(e.getPointLabelContext(s));r[s]=p.padding;const v=e.getPointPosition(s,e.drawingArea+r[s],h),x=yo(p.font),T=Ahe(e.ctx,x,e._pointLabels[s]);i[s]=T;const C=Ra(e.getIndexAngle(s)+h),I=Math.round(uM(C)),P=pV(I,v.x,T.w,0,180),D=pV(I,v.y,T.h,90,270);Mhe(n,t,C,P,D)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=Rhe(e,i,r)}function Mhe(e,t,n,i,r){const a=Math.abs(Math.sin(n)),l=Math.abs(Math.cos(n));let h=0,s=0;i.start<t.l?(h=(t.l-i.start)/a,e.l=Math.min(e.l,t.l-h)):i.end>t.r&&(h=(i.end-t.r)/a,e.r=Math.max(e.r,t.r+h)),r.start<t.t?(s=(t.t-r.start)/l,e.t=Math.min(e.t,t.t-s)):r.end>t.b&&(s=(r.end-t.b)/l,e.b=Math.max(e.b,t.b+s))}function Dhe(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:a,padding:l,size:h}=n,s=e.getPointPosition(t,i+r+l,a),p=Math.round(uM(Ra(s.angle+qs))),v=Bhe(s.y,h.h,p),x=Ohe(p),T=Vhe(s.x,h.w,x);return{visible:!0,x:s.x,y:v,textAlign:x,left:T,top:v,right:T+h.w,bottom:v+h.h}}function Lhe(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:a}=e;return!(ph({x:n,y:i},t)||ph({x:n,y:a},t)||ph({x:r,y:i},t)||ph({x:r,y:a},t))}function Rhe(e,t,n){const i=[],r=e._pointLabels.length,a=e.options,{centerPointLabels:l,display:h}=a.pointLabels,s={extra:CI(a)/2,additionalAngle:l?fr/r:0};let p;for(let v=0;v<r;v++){s.padding=n[v],s.size=t[v];const x=Dhe(e,v,s);i.push(x),h==="auto"&&(x.visible=Lhe(x,p),x.visible&&(p=x))}return i}function Ohe(e){return e===0||e===180?"center":e<180?"left":"right"}function Vhe(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Bhe(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Fhe(e,t,n){const{left:i,top:r,right:a,bottom:l}=n,{backdropColor:h}=t;if(!zi(h)){const s=Fp(t.borderRadius),p=qa(t.backdropPadding);e.fillStyle=h;const v=i-p.left,x=r-p.top,T=a-i+p.width,C=l-r+p.height;Object.values(s).some(I=>I!==0)?(e.beginPath(),hb(e,{x:v,y:x,w:T,h:C,radius:s}),e.fill()):e.fillRect(v,x,T,C)}}function zhe(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const a=e._pointLabelItems[r];if(!a.visible)continue;const l=i.setContext(e.getPointLabelContext(r));Fhe(n,l,a);const h=yo(l.font),{x:s,y:p,textAlign:v}=a;Jp(n,e._pointLabels[r],s,p+h.lineHeight/2,h,{color:l.color,textAlign:v,textBaseline:"middle"})}}function $9(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,es);else{let a=e.getPointPosition(0,t);r.moveTo(a.x,a.y);for(let l=1;l<i;l++)a=e.getPointPosition(l,t),r.lineTo(a.x,a.y)}}function Nhe(e,t,n,i,r){const a=e.ctx,l=t.circular,{color:h,lineWidth:s}=t;!l&&!i||!h||!s||n<0||(a.save(),a.strokeStyle=h,a.lineWidth=s,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),$9(e,n,l,i),a.closePath(),a.stroke(),a.restore())}function $he(e,t,n){return ym(e,{label:n,index:t,type:"pointLabel"})}class e0 extends aT{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=qa(CI(this.options)/2),n=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Vs(t)&&!isNaN(t)?t:0,this.max=Vs(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/CI(this.options))}generateTickLabels(t){aT.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,i)=>{const r=Xr(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?Phe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,i,r){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,i,r))}getIndexAngle(t){const n=es/(this._pointLabels.length||1),i=this.options.startAngle||0;return Ra(t*n+du(i))}getDistanceFromCenterForValue(t){if(zi(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(zi(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return $he(this.getContext(),t,i)}}getPointPosition(t,n,i=0){const r=this.getIndexAngle(t)-qs+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:i,right:r,bottom:a}=this._pointLabelItems[t];return{left:n,top:i,right:r,bottom:a}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),$9(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:i,grid:r,border:a}=n,l=this._pointLabels.length;let h,s,p;if(n.pointLabels.display&&zhe(this,l),r.display&&this.ticks.forEach((v,x)=>{if(x!==0||x===0&&this.min<0){s=this.getDistanceFromCenterForValue(v.value);const T=this.getContext(x),C=r.setContext(T),I=a.setContext(T);Nhe(this,C,s,l,I)}}),i.display){for(t.save(),h=l-1;h>=0;h--){const v=i.setContext(this.getPointLabelContext(h)),{color:x,lineWidth:T}=v;!T||!x||(t.lineWidth=T,t.strokeStyle=x,t.setLineDash(v.borderDash),t.lineDashOffset=v.borderDashOffset,s=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),p=this.getPointPosition(h,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(p.x,p.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let a,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((h,s)=>{if(s===0&&this.min>=0&&!n.reverse)return;const p=i.setContext(this.getContext(s)),v=yo(p.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),p.showLabelBackdrop){t.font=v.string,l=t.measureText(h.label).width,t.fillStyle=p.backdropColor;const x=qa(p.backdropPadding);t.fillRect(-l/2-x.left,-a-v.size/2-x.top,l+x.width,v.size+x.height)}Jp(t,h.label,0,-a,v,{color:p.color,strokeColor:p.textStrokeColor,strokeWidth:p.textStrokeWidth})}),t.restore()}drawTitle(){}}Cn(e0,"id","radialLinear"),Cn(e0,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:aS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),Cn(e0,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Cn(e0,"descriptors",{angleLines:{_fallback:"grid"}});const fS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pl=Object.keys(fS);function gV(e,t){return e-t}function vV(e,t){if(zi(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:a}=e._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Vs(l)||(l=typeof i=="string"?n.parse(l,i):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(f_(a)||a===!0)?n.startOf(l,"isoWeek",a):n.startOf(l,r)),+l)}function _V(e,t,n,i){const r=Pl.length;for(let a=Pl.indexOf(e);a<r-1;++a){const l=fS[Pl[a]],h=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(h*l.size))<=i)return Pl[a]}return Pl[r-1]}function Uhe(e,t,n,i,r){for(let a=Pl.length-1;a>=Pl.indexOf(n);a--){const l=Pl[a];if(fS[l].common&&e._adapter.diff(r,i,l)>=t-1)return l}return Pl[n?Pl.indexOf(n):0]}function jhe(e){for(let t=Pl.indexOf(e)+1,n=Pl.length;t<n;++t)if(fS[Pl[t]].common)return Pl[t]}function yV(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:r}=dM(n,t),a=n[i]>=t?n[i]:n[r];e[a]=!0}}function Whe(e,t,n,i){const r=e._adapter,a=+r.startOf(t[0].value,i),l=t[t.length-1].value;let h,s;for(h=a;h<=l;h=+r.add(h,1,i))s=n[h],s>=0&&(t[s].major=!0);return t}function bV(e,t,n){const i=[],r={},a=t.length;let l,h;for(l=0;l<a;++l)h=t[l],r[h]=l,i.push({value:h,major:!1});return a===0||!n?i:Whe(e,i,r,n)}class pb extends yg{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),r=this._adapter=new Jce._date(t.adapters.date);r.init(n),b0(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:vV(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:r,max:a,minDefined:l,maxDefined:h}=this.getUserBounds();function s(p){!l&&!isNaN(p.min)&&(r=Math.min(r,p.min)),!h&&!isNaN(p.max)&&(a=Math.max(a,p.max))}(!l||!h)&&(s(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&s(this.getMinMax(!1))),r=Vs(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),a=Vs(a)&&!isNaN(a)?a:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,l=this.max,h=wle(r,a,l);return this._unit=n.unit||(i.autoSkip?_V(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):Uhe(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:jhe(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),bV(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,r,a;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=zo(n,0,l),i=zo(i,0,l),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,r=this.options,a=r.time,l=a.unit||_V(a.minUnit,n,i,this._getLabelCapacity(n)),h=Ei(r.ticks.stepSize,1),s=l==="week"?a.isoWeekday:!1,p=f_(s)||s===!0,v={};let x=n,T,C;if(p&&(x=+t.startOf(x,"isoWeek",s)),x=+t.startOf(x,p?"day":l),t.diff(i,n,l)>1e5*h)throw new Error(n+" and "+i+" are too far apart with stepSize of "+h+" "+l);const I=r.ticks.source==="data"&&this.getDataTimestamps();for(T=x,C=0;T<i;T=+t.add(T,h,l),C++)yV(v,T,I);return(T===i||r.bounds==="ticks"||C===1)&&yV(v,T,I),Object.keys(v).sort(gV).map(P=>+P)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,a=this._unit,l=n||r[a];return this._adapter.format(t,l)}_tickFormatFunction(t,n,i,r){const a=this.options,l=a.ticks.callback;if(l)return Xr(l,[t,n,i],this);const h=a.time.displayFormats,s=this._unit,p=this._majorUnit,v=s&&h[s],x=p&&h[p],T=i[n],C=p&&x&&T&&T.major;return this._adapter.format(t,r||(C?x:v))}generateTickLabels(t){let n,i,r;for(n=0,i=t.length;n<i;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,r=du(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(r),l=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*a+h*l,h:i*l+h*a}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=this._tickFormatFunction(t,0,bV(this,[t],this._majorUnit),r),l=this._getLabelSize(a),h=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)t.push(vV(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Q8(t.sort(gV))}}Cn(pb,"id","time"),Cn(pb,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function g1(e,t,n){let i=0,r=e.length-1,a,l,h,s;n?(t>=e[i].pos&&t<=e[r].pos&&({lo:i,hi:r}=mh(e,"pos",t)),{pos:a,time:h}=e[i],{pos:l,time:s}=e[r]):(t>=e[i].time&&t<=e[r].time&&({lo:i,hi:r}=mh(e,"time",t)),{time:a,pos:h}=e[i],{time:l,pos:s}=e[r]);const p=l-a;return p?h+(s-h)*(t-a)/p:h}class kI extends pb{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=g1(n,this.min),this._tableRange=g1(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,r=[],a=[];let l,h,s,p,v;for(l=0,h=t.length;l<h;++l)p=t[l],p>=n&&p<=i&&r.push(p);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(l=0,h=r.length;l<h;++l)v=r[l+1],s=r[l-1],p=r[l],Math.round((v+s)/2)!==p&&a.push({time:p,pos:l/(h-1)});return a}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,a)=>r-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(g1(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return g1(this._table,i*this._tableRange+this._minPos,!0)}}Cn(kI,"id","timeseries"),Cn(kI,"defaults",pb.defaults);var Hhe=Object.freeze({__proto__:null,CategoryScale:TI,LinearScale:SI,LogarithmicScale:EI,RadialLinearScale:e0,TimeScale:pb,TimeSeriesScale:kI});const Ghe=[Zce,kde,whe,Hhe];ah.register(...Ghe);const wM=Symbol.for("vuetify:v-slider");function II(e,t,n){const i=n==="vertical",r=t.getBoundingClientRect(),a="touches"in e?e.touches[0]:e;return i?a.clientY-(r.top+r.height/2):a.clientX-(r.left+r.width/2)}function qhe(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const U9=ut({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,noKeyboard:Boolean,...Hr(),...Xs({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),j9=e=>{const t=me(()=>parseFloat(e.min)),n=me(()=>parseFloat(e.max)),i=me(()=>Number(e.step)>0?parseFloat(e.step):0),r=me(()=>Math.max(Z5(i.value),Z5(t.value)));function a(l){if(l=parseFloat(l),i.value<=0)return l;const h=kr(l,t.value,n.value),s=t.value%i.value;let p=Math.round((h-s)/i.value)*i.value+s;return h>p&&p+i.value>n.value&&(p=n.value),parseFloat(Math.min(p,n.value).toFixed(r.value))}return{min:t,max:n,step:i,decimals:r,roundValue:a}},W9=e=>{let{props:t,steps:n,onSliderStart:i,onSliderMove:r,onSliderEnd:a,getActiveThumb:l}=e;const h=M_(t),{isRtl:s}=Ks(),p=He(()=>t.reverse),v=me(()=>t.direction==="vertical"),x=me(()=>v.value!==p.value),{min:T,max:C,step:I,decimals:P,roundValue:D}=n,F=me(()=>parseInt(t.thumbSize,10)),V=me(()=>parseInt(t.tickSize,10)),H=me(()=>parseInt(t.trackSize,10)),q=me(()=>(C.value-T.value)/I.value),K=me(()=>t.error||h.isDisabled.value?void 0:t.thumbColor??t.color),ie=me(()=>t.error||h.isDisabled.value?void 0:t.thumbColor),X=me(()=>t.error||h.isDisabled.value?void 0:t.trackColor??t.color),$=me(()=>t.error||h.isDisabled.value?void 0:t.trackFillColor??t.color),G=nn(!1),j=nn(0),te=it(),Z=it();function ee(ot){var rt;const dt=(rt=te.value)==null?void 0:rt.$el;if(!dt)return;const Je=t.direction==="vertical",yt=Je?"top":"left",Ne=Je?"height":"width",le=Je?"clientY":"clientX",{[yt]:we,[Ne]:_e}=dt.getBoundingClientRect(),fe=qhe(ot,le);let Fe=kr((fe-we-j.value)/_e)||0;return(Je?x.value:x.value!==s.value)&&(Fe=1-Fe),D(T.value+Fe*(C.value-T.value))}const be=ot=>{const dt=ee(ot);dt!=null&&a({value:dt}),G.value=!1,j.value=0},Ie=ot=>{const dt=ee(ot);Z.value=l(ot),Z.value&&(G.value=!0,Z.value.contains(ot.target)?j.value=II(ot,Z.value,t.direction):(j.value=0,dt!=null&&r({value:dt})),dt!=null&&i({value:dt}),Gn(()=>{var Je;return(Je=Z.value)==null?void 0:Je.focus()}))},Ve={passive:!0,capture:!0};function Ke(ot){const dt=ee(ot);dt!=null&&r({value:dt})}function Xe(ot){ot.stopPropagation(),ot.preventDefault(),be(ot),window.removeEventListener("mousemove",Ke,Ve),window.removeEventListener("mouseup",Xe)}function Pe(ot){var dt;be(ot),window.removeEventListener("touchmove",Ke,Ve),(dt=ot.target)==null||dt.removeEventListener("touchend",Pe)}function $e(ot){var dt;Ie(ot),window.addEventListener("touchmove",Ke,Ve),(dt=ot.target)==null||dt.addEventListener("touchend",Pe,{passive:!1})}function Ee(ot){ot.button===0&&(ot.preventDefault(),Ie(ot),window.addEventListener("mousemove",Ke,Ve),window.addEventListener("mouseup",Xe,{passive:!1}))}const We=ot=>{const dt=(ot-T.value)/(C.value-T.value)*100;return kr(isNaN(dt)?0:dt,0,100)},Ze=He(()=>t.showTicks),ct=me(()=>Ze.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(ot=>({value:ot,position:We(ot),label:ot.toString()})):Object.keys(t.ticks).map(ot=>({value:parseFloat(ot),position:We(parseFloat(ot)),label:t.ticks[ot]})):q.value!==1/0?sc(q.value+1).map(ot=>{const dt=T.value+ot*I.value;return{value:dt,position:We(dt)}}):[]:[]),kt=me(()=>ct.value.some(ot=>{let{label:dt}=ot;return!!dt})),Nt={activeThumbRef:Z,color:He(()=>t.color),decimals:P,disabled:h.isDisabled,direction:He(()=>t.direction),elevation:He(()=>t.elevation),hasLabels:kt,isReversed:p,indexFromEnd:x,min:T,max:C,mousePressed:G,noKeyboard:He(()=>t.noKeyboard),numTicks:q,onSliderMousedown:Ee,onSliderTouchstart:$e,parsedTicks:ct,parseMouseMove:ee,position:We,readonly:h.isReadonly,rounded:He(()=>t.rounded),roundValue:D,showTicks:Ze,startOffset:j,step:I,thumbSize:F,thumbColor:K,thumbLabelColor:ie,thumbLabel:He(()=>t.thumbLabel),ticks:He(()=>t.ticks),tickSize:V,trackColor:X,trackContainerRef:te,trackFillColor:$,trackSize:H,vertical:v};return Or(wM,Nt),Nt},Khe=ut({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,noKeyboard:Boolean,...Tn()},"VSliderThumb"),AI=Lt()({name:"VSliderThumb",directives:{vRipple:Ga},props:Khe(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=ki(wM),{isRtl:a,rtlClasses:l}=Ks();if(!r)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:h,max:s,thumbColor:p,thumbLabelColor:v,step:x,disabled:T,thumbSize:C,thumbLabel:I,direction:P,isReversed:D,vertical:F,readonly:V,elevation:H,mousePressed:q,decimals:K,indexFromEnd:ie}=r,X=me(()=>T.value?void 0:H.value),{elevationClasses:$}=To(X),{textColorClasses:G,textColorStyles:j}=jo(p),{backgroundColorClasses:te,backgroundColorStyles:Z}=or(v),{pageup:ee,pagedown:be,end:Ie,home:Ve,left:Ke,right:Xe,down:Pe,up:$e}=qk,Ee=[ee,be,Ie,Ve,Ke,Xe,Pe,$e],We=me(()=>x.value?[1,2,3]:[1,5,10]);function Ze(kt,Nt){if(e.noKeyboard||T.value||!Ee.includes(kt.key))return;kt.preventDefault();const ot=x.value||.1,dt=(s.value-h.value)/ot;if([Ke,Xe,Pe,$e].includes(kt.key)){const yt=(F.value?[a.value?Ke:Xe,D.value?Pe:$e]:ie.value!==a.value?[Ke,$e]:[Xe,$e]).includes(kt.key)?1:-1,Ne=kt.shiftKey?2:kt.ctrlKey?1:0;yt===-1&&Nt===s.value&&!Ne&&!Number.isInteger(dt)?Nt=Nt-dt%1*ot:Nt=Nt+yt*ot*We.value[Ne]}else if(kt.key===Ve)Nt=h.value;else if(kt.key===Ie)Nt=s.value;else{const Je=kt.key===be?1:-1;Nt=Nt-Je*ot*(dt>100?dt/10:10)}return Math.max(e.min,Math.min(e.max,Nt))}function ct(kt){const Nt=Ze(kt,e.modelValue);Nt!=null&&i("update:modelValue",Nt)}return Ut(()=>{const kt=vn(ie.value?100-e.position:e.position,"%");return B("div",{class:Tt(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&q.value},e.class,l.value]),style:Yt([{"--v-slider-thumb-position":kt,"--v-slider-thumb-size":vn(C.value)},e.style]),role:"slider",tabindex:T.value?-1:0,"aria-label":e.name,"aria-valuemin":h.value,"aria-valuemax":s.value,"aria-valuenow":e.modelValue,"aria-readonly":!!V.value,"aria-orientation":P.value,onKeydown:V.value?void 0:ct},[B("div",{class:Tt(["v-slider-thumb__surface",G.value,$.value]),style:Yt(j.value)},null),Oi(B("div",{class:Tt(["v-slider-thumb__ripple",G.value]),style:Yt(j.value)},null),[[Ga,e.ripple,null,{circle:!0,center:!0}]]),ue($P,{origin:"bottom center"},{default:()=>{var Nt;return[Oi(B("div",{class:"v-slider-thumb__label-container"},[B("div",{class:Tt(["v-slider-thumb__label",te.value]),style:Yt(Z.value)},[B("div",null,[((Nt=n["thumb-label"])==null?void 0:Nt.call(n,{modelValue:e.modelValue}))??e.modelValue.toFixed(x.value?K.value:1)]),B("div",{class:"v-slider-thumb__label-wedge"},null)])]),[[bu,I.value&&e.focused||I.value==="always"]])]}})])}),{}}}),Xhe=ut({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Tn()},"VSliderTrack"),H9=Lt()({name:"VSliderTrack",props:Xhe(),emits:{},setup(e,t){let{slots:n}=t;const i=ki(wM);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:r,parsedTicks:a,rounded:l,showTicks:h,tickSize:s,trackColor:p,trackFillColor:v,trackSize:x,vertical:T,min:C,max:I,indexFromEnd:P}=i,{roundedClasses:D}=is(l),{backgroundColorClasses:F,backgroundColorStyles:V}=or(v),{backgroundColorClasses:H,backgroundColorStyles:q}=or(p),K=me(()=>`inset-${T.value?"block":"inline"}-${P.value?"end":"start"}`),ie=me(()=>T.value?"height":"width"),X=me(()=>({[K.value]:"0%",[ie.value]:"100%"})),$=me(()=>e.stop-e.start),G=me(()=>({[K.value]:vn(e.start,"%"),[ie.value]:vn($.value,"%")})),j=me(()=>h.value?(T.value?a.value.slice().reverse():a.value).map((Z,ee)=>{var Ie;const be=Z.value!==C.value&&Z.value!==I.value?vn(Z.position,"%"):void 0;return B("div",{key:Z.value,class:Tt(["v-slider-track__tick",{"v-slider-track__tick--filled":Z.position>=e.start&&Z.position<=e.stop,"v-slider-track__tick--first":Z.value===C.value,"v-slider-track__tick--last":Z.value===I.value}]),style:{[K.value]:be}},[(Z.label||n["tick-label"])&&B("div",{class:"v-slider-track__tick-label"},[((Ie=n["tick-label"])==null?void 0:Ie.call(n,{tick:Z,index:ee}))??Z.label])])}):[]);return Ut(()=>B("div",{class:Tt(["v-slider-track",D.value,e.class]),style:Yt([{"--v-slider-track-size":vn(x.value),"--v-slider-tick-size":vn(s.value)},e.style])},[B("div",{class:Tt(["v-slider-track__background",H.value,{"v-slider-track__background--opacity":!!r.value||!v.value}]),style:{...X.value,...q.value}},null),B("div",{class:Tt(["v-slider-track__fill",F.value]),style:{...G.value,...V.value}},null),h.value&&B("div",{class:Tt(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}])},[j.value])])),{}}}),Yhe=ut({...Kb(),...U9(),...Vh(),modelValue:{type:[Number,String],default:0}},"VSlider"),gb=Lt()({name:"VSlider",props:Yhe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=it(),a=it(),{rtlClasses:l}=Ks(),h=j9(e),s=Dn(e,"modelValue",void 0,G=>h.roundValue(G??h.min.value)),{min:p,max:v,mousePressed:x,roundValue:T,onSliderMousedown:C,onSliderTouchstart:I,trackContainerRef:P,position:D,hasLabels:F,disabled:V,readonly:H,noKeyboard:q}=W9({props:e,steps:h,onSliderStart:()=>{!V.value&&!H.value&&i("start",s.value)},onSliderEnd:G=>{let{value:j}=G;const te=T(j);!V.value&&!H.value&&(s.value=te),i("end",te)},onSliderMove:G=>{let{value:j}=G;!V.value&&!H.value&&(s.value=T(j))},getActiveThumb:()=>{var G;return(G=r.value)==null?void 0:G.$el}}),{isFocused:K,focus:ie,blur:X}=Oh(e),$=me(()=>D(s.value));return Ut(()=>{const G=ha.filterProps(e),j=!!(e.label||n.label||n.prepend);return ue(ha,Dt({ref:a,class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||F.value,"v-slider--focused":K.value,"v-slider--pressed":x.value,"v-slider--disabled":V.value},l.value,e.class],style:e.style},G,{focused:K.value}),{...n,prepend:j?te=>{var Z,ee;return B(ln,null,[((Z=n.label)==null?void 0:Z.call(n,te))??(e.label?ue(P_,{id:te.id.value,class:"v-slider__label",text:e.label},null):void 0),(ee=n.prepend)==null?void 0:ee.call(n,te)])}:void 0,default:te=>{let{id:Z,messagesId:ee}=te;return B("div",{class:"v-slider__container",onMousedown:H.value?void 0:C,onTouchstartPassive:H.value?void 0:I},[B("input",{id:Z.value,name:e.name||Z.value,disabled:V.value,readonly:H.value,tabindex:"-1",value:s.value},null),ue(H9,{ref:P,start:0,stop:$.value},{"tick-label":n["tick-label"]}),ue(AI,{ref:r,"aria-describedby":ee.value,focused:K.value,noKeyboard:q.value,min:p.value,max:v.value,modelValue:s.value,"onUpdate:modelValue":be=>s.value=be,position:$.value,elevation:e.elevation,onFocus:ie,onBlur:X,ripple:e.ripple,name:e.name},{"thumb-label":n["thumb-label"]})])}})}),So({focus:()=>{var G;return(G=r.value)==null?void 0:G.$el.focus()}},a)}}),Zhe={class:"section-card"},Jhe={class:"row g-3 align-items-end"},Qhe={class:"col-md-4"},efe={class:"col-md-4"},tfe={class:"col-md-4"},nfe={class:"col-12"},ife={class:"fare-actions"},rfe={key:0,class:"mt-4 feature-result-animate"},sfe={class:"row g-3"},ofe={class:"col-lg-4"},afe={class:"fare-result-amount"},lfe={class:"fare-result-commuter"},cfe={class:"fare-result-route text-muted"},ufe={class:"fare-stat-chip-group"},dfe={class:"col-lg-8"},hfe={class:"fare-route-header"},ffe={class:"fare-route-timeline"},mfe={class:"timeline-dot"},pfe={class:"timeline-body"},gfe={class:"d-flex align-items-center gap-2 mb-2 flex-wrap"},vfe={class:"fw-semibold text-dark"},_fe={key:0,class:"mt-4"},yfe={class:"d-flex flex-wrap align-items-center gap-2 mb-3"},bfe={class:"row g-3"},xfe={class:"col-md-4"},wfe={class:"fare-input-header"},Tfe={class:"fare-slider"},Sfe={class:"d-flex justify-content-between align-items-center mb-2"},Efe={class:"col-md-4"},Cfe={class:"fare-input-header"},kfe={class:"fare-slider"},Ife={class:"d-flex justify-content-between align-items-center mb-2"},Afe={class:"col-md-4"},Pfe={class:"fare-input-header"},Mfe={class:"fare-metric-display"},Dfe={class:"fare-metric-value"},Lfe={key:0,class:"row g-3 mt-1"},Rfe={class:"col-lg-4"},Ofe={class:"reco-header"},Vfe={class:"reco-icon"},Bfe={class:"reco-heading"},Ffe={class:"reco-title mb-0"},zfe={class:"reco-body"},Nfe={class:"reco-summary mb-3"},$fe={class:"reco-metrics"},Ufe={class:"reco-metric"},jfe={class:"reco-metric-value"},Wfe={class:"reco-metric"},Hfe={class:"reco-metric-value"},Gfe={class:"reco-metric"},qfe={class:"col-lg-8"},Kfe={class:"card-body"},Xfe={class:"chart-header"},Yfe={class:"chart-meta mt-3"},Zfe={class:"chart-meta-item"},Jfe={class:"chart-meta-value"},Qfe={class:"chart-meta-item"},eme={class:"chart-wrapper mt-3"},tme={class:"col-12"},nme={class:"table-responsive shadow-sm border rounded-3"},ime={class:"table align-middle mb-0 table-modern"},rme={class:"text-center"},sme={class:"table-pass-name"},ome={key:0,class:"table-pass-tag"},ame={key:0,class:"alert alert-danger mt-4"},lme={__name:"FareCalculator",setup(e){const{allStations:t,shortestPath:n,estimateDistanceKm:i,estimateTimeMinutes:r,summariseSegments:a}=BP(),{fareByType:l,analyseMonthlyPass:h}=b2(),s=[{value:"adult",label:"Adult"},{value:"primary",label:"Primary School Student"},{value:"secondary",label:"Secondary School Student"},{value:"polytechnic",label:"Polytechnic Student"},{value:"university",label:"University Student"},{value:"ns",label:"National Serviceman"},{value:"senior",label:"Senior Citizen"},{value:"disability",label:"Person with Disabilities"},{value:"workfare",label:"Workfare Concession"}],p={NSL:{name:"North South Line"},EWL:{name:"East West Line"},CGL:{name:"Changi Airport Branch"},DTL:{name:"Downtown Line"},CCL:{name:"Circle Line"},NEL:{name:"North East Line"},TEL:{name:"ThomsonEast Coast Line"},BPL:{name:"Bukit Panjang LRT"},SWPL:{name:"Sengkang West LRT"},SEPL:{name:"Sengkang East LRT"},PEPLRT:{name:"Punggol East LRT"},PWLRT:{name:"Punggol West LRT"}},v={train:"Train-only",bus:"Bus-only",hybrid:"Hybrid (Bus + Train)"},x=it("Jurong East"),T=it("City Hall"),C=it("adult"),I=it(null),P=it(null),D=it(""),F=it(!1),V=it(!1),H=it(2),q=it(22),K=it(null);let ie=null;const X=new Intl.NumberFormat("en-SG",{style:"currency",currency:"SGD",currencyDisplay:"narrowSymbol",minimumFractionDigits:2}),$=me(()=>{var yt;return((yt=s.find(Ne=>Ne.value===C.value))==null?void 0:yt.label)??"Adult"}),G=me(()=>Math.max(0,H.value*q.value*2)),j=me(()=>P.value?P.value.breakdown.reduce((yt,Ne)=>yt?Ne.savings>yt.savings?Ne:yt:Ne,null):null),te=me(()=>{var yt;return(yt=j.value)!=null&&yt.worth?"success":"error"}),Z=me(()=>{var le;if(!P.value)return 0;const yt=Math.max(P.value.monthlyTotal,1),Ne=Math.abs(((le=j.value)==null?void 0:le.savings)??0);return Math.min(100,Math.round(Ne/yt*100))}),ee=me(()=>{var yt;return((yt=j.value)==null?void 0:yt.mode)??null}),be=me(()=>{var yt;return(yt=j.value)!=null&&yt.worth?"is-positive":"is-negative"}),Ie=me(()=>j.value?j.value.worth?"Monthly pass pays off":"Stick to pay-per-ride":"Compare options"),Ve=me(()=>{if(!j.value)return"Run a calculation to see personalised advice tailored to your commute.";const yt=We(j.value.mode);return j.value.worth?`The ${yt} pass could save ${Xe(j.value.savings)} this month compared to pay-per-ride.`:`Pay-per-ride stays cheaper  the ${yt} pass would cost ${Xe(Math.abs(j.value.savings))} more.`}),Ke=me(()=>{var yt;return(yt=j.value)!=null&&yt.worth?"mdi-ticket-percent":"mdi-cash-minus"});function Xe(yt){return X.format(yt)}function Pe(yt){const Ne=X.format(Math.abs(yt));return`${yt>=0?"+":"-"}${Ne}`}function $e(yt){var Ne;return((Ne=p[yt])==null?void 0:Ne.name)??yt}function Ee(yt){return yt?`line-${yt.toLowerCase()}`:""}function We(yt){return v[yt]??yt}function Ze(yt){return uh($e(yt))||"#6b7280"}async function ct(){if(V.value)return;if(D.value="",P.value=null,x.value===T.value){I.value=null,ot(),D.value="Please choose two different stations.",F.value=!1;return}const yt=n(x.value,T.value);if(!yt){I.value=null,ot(),D.value="No valid MRT route found between these stations.",F.value=!1;return}V.value=!0;const Ne=Date.now();try{F.value=!1,await new Promise(gt=>setTimeout(gt,420));const le=i(yt.totalWeight),we=r(yt.totalWeight),_e=a(yt)??[],fe=_e.reduce((gt,mt)=>gt+mt.stops,0),Fe=Math.max(0,_e.length-1),rt=l(le,C.value);I.value={fare:rt,distanceKm:le,minutes:we,segments:_e,totalStops:fe,transfers:Fe},F.value=!1,await kt();const pt=Date.now()-Ne,vt=Math.max(0,2e3-pt);await new Promise(gt=>setTimeout(gt,vt))}catch(le){console.error(le),I.value=null,P.value=null,ot(),F.value=!1,D.value="Unable to calculate fare at the moment. Please try again in a moment.";const we=Date.now()-Ne,_e=Math.max(0,2e3-we);await new Promise(fe=>setTimeout(fe,_e))}finally{V.value=!1}}async function kt(){if(!I.value){P.value=null,ot();return}P.value=h({distanceKm:I.value.distanceKm,type:C.value,dailyTrips:H.value,workingDays:q.value}),await Gn(),Nt(P.value)}function Nt(yt){if(!yt||!K.value){ot();return}const Ne=yt.breakdown.map(we=>We(we.mode)),le=yt.breakdown.map(we=>Number(we.savings.toFixed(2)));ie&&ie.destroy(),ie=new ah(K.value,{type:"bar",data:{labels:Ne,datasets:[{label:"Net savings vs monthly pass ($)",data:le,backgroundColor:le.map(we=>we>=0?"rgba(25,135,84,0.6)":"rgba(220,53,69,0.65)"),borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label(we){var Fe;const _e=((Fe=we.parsed)==null?void 0:Fe.y)??0,fe=X.format(Math.abs(_e));return`${_e>=0?"+":""}${fe}`}}}},scales:{y:{ticks:{callback(we){return typeof we=="number"?X.format(we):we}},grid:{color:"rgba(0,0,0,0.05)"}},x:{grid:{display:!1}}}}})}function ot(){ie&&(ie.destroy(),ie=null)}function dt(){x.value="Jurong East",T.value="City Hall",C.value="adult",I.value=null,P.value=null,D.value="",H.value=2,q.value=22,F.value=!1,ot()}function Je(){[x.value,T.value]=[T.value,x.value]}return Zt([x,T,C],()=>{I.value&&(F.value=!0)}),Zt(C,async()=>{I.value&&await ct()}),Fae([H,q],async()=>{I.value&&await kt()},{debounce:300,maxWait:800}),jr(()=>{ot()}),(yt,Ne)=>(Kt(),an("section",Zhe,[Ne[31]||(Ne[31]=B("div",{class:"d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4"},[B("div",null,[B("h2",{class:"section-title mb-1"},"Fare Calculator"),B("p",{class:"tab-desc"}," Distance-based fares with the latest LTA tables. Estimate concession pricing, understand line changes, and see whether a monthly pass could save you more. ")])],-1)),B("form",{class:"fare-form",onSubmit:sa(ct,["prevent"])},[B("div",Jhe,[B("div",Qhe,[ue($v,{modelValue:x.value,"onUpdate:modelValue":Ne[0]||(Ne[0]=le=>x.value=le),items:Ti(t),label:"From station","prepend-inner-icon":"mdi-map-marker",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),B("div",efe,[ue($v,{modelValue:T.value,"onUpdate:modelValue":Ne[1]||(Ne[1]=le=>T.value=le),items:Ti(t),label:"To station","prepend-inner-icon":"mdi-flag",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue","items"])]),B("div",tfe,[ue($v,{modelValue:C.value,"onUpdate:modelValue":Ne[2]||(Ne[2]=le=>C.value=le),items:s,"item-title":"label","item-value":"value",label:"Commuter type","prepend-inner-icon":"mdi-account-group-outline",variant:"solo-filled",density:"comfortable",color:"primary","hide-details":"auto",class:"fare-field"},null,8,["modelValue"])]),B("div",nfe,[B("div",ife,[ue(gi,{type:"submit",color:"primary","prepend-icon":"mdi-cash-multiple",class:"fare-action-btn",elevation:"2",loading:V.value,disabled:V.value},{default:yi(()=>[zn(tn(V.value?"Crunching fares":I.value?"Recalculate":"Calculate fare"),1)]),_:1},8,["loading","disabled"]),ue(gi,{type:"button",variant:"tonal",color:"primary","prepend-icon":"mdi-swap-horizontal",class:"fare-action-btn",onClick:Je},{default:yi(()=>[...Ne[5]||(Ne[5]=[zn(" Swap stations ",-1)])]),_:1}),ue(gi,{type:"button",variant:"text",color:"error","prepend-icon":"mdi-restart",class:"fare-action-btn",onClick:dt},{default:yi(()=>[...Ne[6]||(Ne[6]=[zn(" Reset ",-1)])]),_:1}),F.value?(Kt(),za(Ls,{key:0,color:"warning",variant:"flat",size:"small","prepend-icon":"mdi-information-outline",class:"ms-auto"},{default:yi(()=>[...Ne[7]||(Ne[7]=[zn(" Inputs changed  calculate again to refresh. ",-1)])]),_:1})):Si("",!0)])])])],32),B("div",{class:Tt(["fare-output-region",{"is-active":I.value,"is-loading":V.value}])},[B("div",{class:Tt(["map-loading-overlay",{show:V.value}])},[...Ne[8]||(Ne[8]=[cw('<div class="map-loading-content" data-v-49d63be2><div class="capybaraloader" data-v-49d63be2><div class="capybara" data-v-49d63be2><div class="capy" data-v-49d63be2><div class="capyhead" data-v-49d63be2><div class="capyear" data-v-49d63be2><div class="capyear2" data-v-49d63be2></div></div><div class="capyear" data-v-49d63be2><div class="capyear2" data-v-49d63be2></div></div><div class="capymouth" data-v-49d63be2><div class="capylips" data-v-49d63be2></div><div class="capylips" data-v-49d63be2></div></div><div class="capyeye" data-v-49d63be2></div><div class="capyeye" data-v-49d63be2></div></div><div class="capyleg" data-v-49d63be2><div class="capyleg2" data-v-49d63be2></div><div class="capyleg2" data-v-49d63be2></div></div></div></div><div class="loader" data-v-49d63be2><div class="loaderline" data-v-49d63be2></div></div></div></div>',1)])],2),ue(ib,{mode:"out-in"},{default:yi(()=>[I.value?(Kt(),an("div",rfe,[B("div",sfe,[B("div",ofe,[ue(Cv,{class:"fare-result-card h-100",elevation:"4"},{default:yi(()=>[B("div",afe,tn(Xe(I.value.fare)),1),B("div",lfe,tn($.value),1),B("div",cfe,tn(x.value)+"  "+tn(T.value),1),B("div",ufe,[ue(Ls,{variant:"tonal",color:"primary","prepend-icon":"mdi-map-marker-distance"},{default:yi(()=>[zn(tn(Number(I.value.distanceKm).toFixed(1))+" km ",1)]),_:1}),ue(Ls,{variant:"tonal",color:"primary","prepend-icon":"mdi-timer-sand"},{default:yi(()=>[zn(tn(Math.round(I.value.minutes))+" mins ",1)]),_:1}),ue(Ls,{variant:"tonal",color:"primary","prepend-icon":"mdi-transit-connection"},{default:yi(()=>[zn(tn(I.value.totalStops)+" "+tn(I.value.totalStops===1?"stop":"stops"),1)]),_:1}),ue(Ls,{variant:"outlined",color:"primary","prepend-icon":"mdi-transfer"},{default:yi(()=>[zn(tn(I.value.transfers)+" "+tn(I.value.transfers===1?"transfer":"transfers"),1)]),_:1})])]),_:1})]),B("div",dfe,[ue(Cv,{class:"fare-route-card h-100",elevation:"4"},{default:yi(()=>[B("div",hfe,[Ne[9]||(Ne[9]=B("div",null,[B("h5",{class:"text-dark mb-1"},"Route overview"),B("p",{class:"text-muted mb-0 small"}," We recommend the quickest MRT path. Look out for timeline dots to spot transfers at a glance. ")],-1)),ue(Ls,{variant:"tonal",color:"primary",size:"small"},{default:yi(()=>[zn(tn(I.value.segments.length)+" "+tn(I.value.segments.length===1?"segment":"segments"),1)]),_:1})]),B("div",ffe,[(Kt(!0),an(ln,null,us(I.value.segments,le=>(Kt(),an("div",{key:`${le.line}-${le.from}-${le.to}`,class:"timeline-node",style:Yt({"--segment-color":Ze(le.line)})},[B("div",mfe,[ue(Di,{icon:"mdi-train-variant",size:"20"})]),B("div",pfe,[B("div",gfe,[B("span",{class:Tt(["route-line-badge",Ee(le.line)])},tn($e(le.line)),3),ue(Ls,{variant:"tonal",color:"primary",size:"small"},{default:yi(()=>[zn(tn(le.stops===0?"Transfer":`${le.stops} ${le.stops===1?"stop":"stops"}`),1)]),_:2},1024)]),B("div",vfe,tn(le.from)+"  "+tn(le.to),1)])],4))),128))])]),_:1})])])])):Si("",!0)]),_:1}),ue(ib,{mode:"out-in"},{default:yi(()=>[I.value?(Kt(),an("div",_fe,[B("div",yfe,[Ne[11]||(Ne[11]=B("h5",{class:"mb-0"},"Monthly Pass Companion",-1)),ue(Ls,{color:"info",variant:"tonal",size:"small","prepend-icon":"mdi-update"},{default:yi(()=>[...Ne[10]||(Ne[10]=[zn(" Auto-updates with your inputs ",-1)])]),_:1})]),B("div",bfe,[B("div",xfe,[ue(rd,{class:"fare-input-sheet h-100",elevation:"2"},{default:yi(()=>[B("div",wfe,[ue(Di,{icon:"mdi-repeat-variant",size:"22"}),Ne[12]||(Ne[12]=B("div",null,[B("div",{class:"fw-semibold"},"Trips per day"),B("div",{class:"small text-muted"},"Enter how many MRT rides you usually take daily.")],-1))]),B("div",Tfe,[B("div",Sfe,[Ne[13]||(Ne[13]=B("span",{class:"small text-muted"},"1",-1)),ue(Ls,{size:"small",variant:"flat",color:"primary"},{default:yi(()=>[zn(tn(H.value),1)]),_:1}),Ne[14]||(Ne[14]=B("span",{class:"small text-muted"},"10",-1))]),ue(gb,{modelValue:H.value,"onUpdate:modelValue":Ne[3]||(Ne[3]=le=>H.value=le),min:1,max:10,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),B("div",Efe,[ue(rd,{class:"fare-input-sheet h-100",elevation:"2"},{default:yi(()=>[B("div",Cfe,[ue(Di,{icon:"mdi-calendar-blank-outline",size:"22"}),Ne[15]||(Ne[15]=B("div",null,[B("div",{class:"fw-semibold"},"Days travelled each month"),B("div",{class:"small text-muted"},"Adjust to match your regular commute schedule.")],-1))]),B("div",kfe,[B("div",Ife,[Ne[16]||(Ne[16]=B("span",{class:"small text-muted"},"1",-1)),ue(Ls,{size:"small",variant:"flat",color:"primary"},{default:yi(()=>[zn(tn(q.value),1)]),_:1}),Ne[17]||(Ne[17]=B("span",{class:"small text-muted"},"31",-1))]),ue(gb,{modelValue:q.value,"onUpdate:modelValue":Ne[4]||(Ne[4]=le=>q.value=le),min:1,max:31,step:1,color:"primary","thumb-label":"always","show-ticks":"always","tick-size":"3"},null,8,["modelValue"])])]),_:1})]),B("div",Afe,[ue(rd,{class:"fare-input-sheet h-100",elevation:"2"},{default:yi(()=>[B("div",Pfe,[ue(Di,{icon:"mdi-chart-line",size:"22"}),Ne[18]||(Ne[18]=B("div",null,[B("div",{class:"fw-semibold"},"Projected rides"),B("div",{class:"small text-muted"},"Used for the monthly pass comparison.")],-1))]),B("div",Mfe,[B("div",Dfe,tn(G.value),1),Ne[19]||(Ne[19]=B("div",{class:"small text-muted"},"rides / month",-1))])]),_:1})])]),P.value?(Kt(),an("div",Lfe,[B("div",Rfe,[ue(Cv,{class:Tt(["fare-reco-card h-100",be.value]),elevation:"4"},{default:yi(()=>{var le,we,_e;return[B("div",Ofe,[B("div",Vfe,[ue(Di,{icon:Ke.value,size:"28"},null,8,["icon"])]),B("div",Bfe,[Ne[20]||(Ne[20]=B("span",{class:"reco-eyebrow"},"Recommendation",-1)),B("h5",Ffe,tn(Ie.value),1)]),j.value?(Kt(),za(Ls,{key:0,size:"x-small",variant:"flat",color:(le=j.value)!=null&&le.worth?"success":"error","prepend-icon":"mdi-star-circle-outline"},{default:yi(()=>[zn(tn(We(j.value.mode)),1)]),_:1},8,["color"])):Si("",!0)]),B("div",zfe,[B("p",Nfe,tn(Ve.value),1),B("div",$fe,[B("div",Ufe,[Ne[21]||(Ne[21]=B("span",{class:"reco-metric-label"},"Single fare",-1)),B("span",jfe,tn(Xe(P.value.singleFare)),1)]),B("div",Wfe,[Ne[22]||(Ne[22]=B("span",{class:"reco-metric-label"},"Monthly spend",-1)),B("span",Hfe,tn(Xe(P.value.monthlyTotal)),1)]),B("div",Gfe,[Ne[23]||(Ne[23]=B("span",{class:"reco-metric-label"},"Net impact",-1)),B("span",{class:Tt(["reco-metric-value",(we=j.value)!=null&&we.worth?"text-success":"text-danger"])},tn(Pe(((_e=j.value)==null?void 0:_e.savings)??0)),3)])]),ue(jb,{class:"reco-progress mt-4","model-value":Z.value,color:te.value,height:"8",rounded:"pill"},null,8,["model-value","color"]),Ne[24]||(Ne[24]=B("div",{class:"reco-progress-caption"}," Potential savings captured (percentage of projected monthly spend) ",-1))])]}),_:1},8,["class"])]),B("div",qfe,[ue(Cv,{class:"fare-chart-card h-100",elevation:"4"},{default:yi(()=>{var le,we;return[B("div",Kfe,[B("div",Xfe,[Ne[25]||(Ne[25]=B("div",null,[B("h6",{class:"text-uppercase text-muted mb-2 pl-2"},"Savings vs monthly passes"),B("p",{class:"chart-subtitle mb-0"}," Compare how each pass stacks up against your projected rides. ")],-1)),ue(Ls,{variant:"flat",color:"primary",size:"small","prepend-icon":"mdi-counter"},{default:yi(()=>[zn(tn(G.value)+" rides / month ",1)]),_:1})]),B("div",Yfe,[B("div",Zfe,[Ne[26]||(Ne[26]=B("span",{class:"chart-meta-label"},"Best option",-1)),B("span",Jfe,tn(j.value?We(j.value.mode):""),1)]),B("div",Qfe,[Ne[27]||(Ne[27]=B("span",{class:"chart-meta-label"},"Net impact",-1)),B("span",{class:Tt(["chart-meta-value",(le=j.value)!=null&&le.worth?"positive":"negative"])},tn(Pe(((we=j.value)==null?void 0:we.savings)??0)),3)])]),B("div",eme,[B("canvas",{ref_key:"passChartRef",ref:K},null,512)])])]}),_:1})]),B("div",tme,[B("div",nme,[B("table",ime,[Ne[30]||(Ne[30]=B("thead",{class:"table-light"},[B("tr",{class:"text-center"},[B("th",{scope:"col"},"Pass type"),B("th",{scope:"col"},"Pass price"),B("th",{scope:"col"},"Net savings"),B("th",{scope:"col"},"Recommendation")])],-1)),B("tbody",rme,[(Kt(!0),an(ln,null,us(P.value.breakdown,le=>(Kt(),an("tr",{key:le.mode,class:Tt([{"table-highlight":le.mode===ee.value},le.worth?"pass-worth":"pass-loss"])},[B("td",null,[B("div",sme,[zn(tn(We(le.mode))+" ",1),le.mode===ee.value?(Kt(),an("span",ome,"Recommended")):Si("",!0)])]),B("td",null,tn(Xe(le.passPrice)),1),B("td",{class:Tt(le.worth?"text-success fw-semibold":"text-danger fw-semibold")},tn(Pe(le.savings)),3),B("td",null,[le.worth?(Kt(),za(Ls,{key:0,color:"success",variant:"flat",size:"small","prepend-icon":"mdi-check-circle-outline"},{default:yi(()=>[...Ne[28]||(Ne[28]=[zn(" Worth it ",-1)])]),_:1})):(Kt(),za(Ls,{key:1,color:"error",variant:"flat",size:"small","prepend-icon":"mdi-close-circle-outline"},{default:yi(()=>[...Ne[29]||(Ne[29]=[zn(" Skip it ",-1)])]),_:1}))])],2))),128))])])])])])):Si("",!0)])):Si("",!0)]),_:1})],2),D.value?(Kt(),an("div",ame,tn(D.value),1)):Si("",!0)]))}},cme=_g(lme,[["__scopeId","data-v-49d63be2"]]),ume={class:"text-generate-effect mb-0"},dme={class:"text-blur"},hme={class:"text-clear"},fme={key:0,class:"cursor"},mme={__name:"TextGenerateEffect",props:{words:{type:String,required:!0},duration:{type:Number,default:2e3},className:{type:String,default:""}},setup(e){const t=e,n=it(""),i=it(!0);Dr(()=>{r()});function r(){const a=t.words,l=a.length,h=t.duration/l;let s=0;n.value="",i.value=!0;function p(){if(s>=l){i.value=!1;return}n.value=a.substring(0,s+1),s++,setTimeout(p,h)}p()}return Zt(()=>t.words,()=>{n.value="",i.value=!0,r()}),(a,l)=>(Kt(),an("p",ume,[B("span",dme,tn(t.words),1),B("span",hme,tn(n.value),1),i.value?(Kt(),an("span",fme,"|")):Si("",!0)]))}},pme=_g(mme,[["__scopeId","data-v-69894e67"]]),gme={class:"section-card"},vme={class:"d-flex flex-wrap justify-content-between align-items-start gap-3 mb-4"},_me={class:"meetup-container"},yme={class:"person-header"},bme={class:"person-avatar"},xme={class:"person-info"},wme=["onClick"],Tme={class:"station-selector position-relative"},Sme={class:"input-container"},Eme={class:"input-with-badges"},Cme={class:"input-wrapper"},kme=["value","placeholder","onInput","onKeydown","onFocus","onBlur"],Ime={key:0,class:"input-autocomplete"},Ame={class:"autocomplete-typed"},Pme={class:"autocomplete-suggestion"},Mme={key:0,class:"input-badges"},Dme={class:"mb-3 d-flex align-items-center gap-3"},Lme={class:"mb-0 d-flex align-items-center flex-wrap gap-2 flex-grow-1",style:{color:"var(--color-text)"}},Rme={class:"d-flex align-items-center gap-2 ms-2"},Ome={class:"row g-3"},Vme={class:"col-md-4"},Bme={class:"border rounded-3 p-3 h-100",style:{background:"var(--color-surface)","border-color":"var(--color-border) !important"}},Fme={class:"mb-2",style:{color:"var(--color-text)"}},zme={class:"mb-0",style:{color:"var(--color-text)"}},Nme={class:"col-md-8"},$me={class:"border rounded-3 p-3",style:{"border-color":"var(--color-border) !important"}},Ume={class:"fw-semibold",style:{color:"var(--color-text)"}},jme={class:"small",style:{color:"var(--color-muted)"}},Wme={class:"badge bg-warning text-dark fs-6 meetup-time-badge"},Hme={class:"meetup-actions"},Gme={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},qme={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Kme={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Xme={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Yme={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Zme={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Jme={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},Qme={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},epe={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},tpe={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},npe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},ipe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},rpe={class:"star-1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},spe={class:"star-2",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},ope={class:"star-3",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},ape={class:"star-4",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},lpe={class:"star-5",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},cpe={class:"star-6",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve",width:"512",height:"512"},upe={class:"map-panel mt-5"},dpe={class:"map-wrapper"},hpe={key:0,class:"alert alert-warning map-overlay-message mb-0"},fpe={key:0,class:"map-overlay-message"},mpe={key:0,class:"alert alert-danger mt-4"},ppe="pk.eyJ1IjoiY2hlZWF1biIsImEiOiJja2NydG83cWMwaGJsMnBqdjR5aHc3MzdlIn0.YGTZpi7JQMquEOv9E8K_bg",gpe="/sg-rail.geojson",v1=10,vpe={__name:"MeetupFinder",setup(e){function t(Ne){const le=Sv[Ne];if(!le)return null;const we=Object.keys(le).filter(_e=>_e!=="LRT Line");return we.length===0?null:we.length===1?{primary:$y[we[0]],secondary:null}:{primary:$y[we[0]],secondary:$y[we[1]]}}const{allStations:n,shortestPath:i,estimateTimeMinutes:r,summariseSegments:a}=BP();let l=0;const h=it([{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""},{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}]),s=it(!1),p=it(""),v=it(null),x=it(!1),T=it(null),C=it(null),I=it(null),P=it(!1),D=it(""),F=it("");let V=null;const H=new Map,q=new Map;let K=null,ie=null;me(()=>!P.value&&!D.value);function X(){return h.value.length>=v1?($e(`Maximum of ${v1} people reached.`),!1):(h.value.push({id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}),!0)}function $(Ne){if(h.value.length<=2){$e("At least 2 persons are required.");return}h.value=h.value.filter(le=>le.id!==Ne),ct()}function G(Ne,le){const we=parseInt(Ne.slice(1,3),16),_e=parseInt(Ne.slice(3,5),16),fe=parseInt(Ne.slice(5,7),16);return`rgba(${we}, ${_e}, ${fe}, ${le})`}function j(Ne){if(!Ne)return[];let le=Sv[Ne];if(!le){const _e=Ne.trim(),fe=Object.keys(Sv).find(Fe=>Fe.toLowerCase()===_e.toLowerCase());fe&&(le=Sv[fe])}if(!le)return console.warn(`Station "${Ne}" not found in STATION_CODES_BY_LINE`),[];const we=[];return Object.entries(le).forEach(([_e,fe])=>{const Fe=$y[_e];Fe&&fe&&we.push({code:fe,color:Fe,lineName:_e,bgColor:G(Fe,.12),borderColor:G(Fe,.3)})}),we}function te(){v.value&&(T.value={...v.value}),x.value=!0,v.value=null,p.value="",ot(),Je(),setTimeout(()=>{x.value=!1,T.value=null,kt()},800)}function Z(Ne){const le=Ne.searchInput?Ne.searchInput.toLowerCase().trim():"";if(!le){Ne.filteredStations=[],Ne.showDropdown=!1,Ne.autocompleteSuggestion="";return}Ne.filteredStations=n.filter(we=>we.toLowerCase().includes(le)).slice(0,20),Ne.autocompleteSuggestion=Ne.filteredStations.length>0?Ne.filteredStations[0]:"",Ne.showDropdown=!1}function ee(Ne,le){const we=le.target.value;Ne.searchInput=we,Ne.searchInput&&(Ne.station=""),Z(Ne)}function be(Ne,le){le.key==="Tab"||le.key==="Enter"?Ne.autocompleteSuggestion&&(le.preventDefault(),Ne.searchInput=Ne.autocompleteSuggestion,Ve(Ne,Ne.autocompleteSuggestion)):le.key==="Escape"&&(Ne.autocompleteSuggestion="")}function Ie(Ne){Ne.station&&!Ne.searchInput?(Ne.searchInput="",Ne.filteredStations=[],Ne.autocompleteSuggestion=""):Ne.searchInput&&Z(Ne)}function Ve(Ne,le){Ne.station=le,Ne.searchInput="",Ne.showDropdown=!1,Ne.filteredStations=[],Ne.autocompleteSuggestion=""}function Ke(Ne){setTimeout(()=>{Ne.searchInput="",Ne.autocompleteSuggestion="",Ne.filteredStations=[]},200)}function Xe(){h.value=[{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""},{id:++l,station:"",searchInput:"",showDropdown:!1,filteredStations:[],autocompleteSuggestion:""}],v.value=null,p.value="",ct(),kt(),Je()}async function Pe(){p.value="",v.value=null;const Ne=h.value.map(mt=>mt.station).filter(Boolean);if(Ne.length<2){p.value="Please provide at least two starting stations.";return}s.value=!0;const le=Date.now();await new Promise(mt=>setTimeout(mt,450));let we=null,_e=1/0,fe=1/0,Fe=null;if(n.forEach(mt=>{const Vt=[],Gt=[];for(const On of Ne){if(On===mt){Gt.push(0),Vt.push({origin:On,path:{steps:[{station:On,line:""}],totalWeight:0},minutes:0,segments:[],steps:[{station:On,line:""}]});continue}const qn=i(On,mt);if(!qn)return;const zt=r(qn.totalWeight);Gt.push(zt),Vt.push({origin:On,path:qn,minutes:zt,segments:a(qn),steps:qn.steps})}const gn=Math.max(...Gt),In=Gt.reduce((On,qn)=>On+qn,0)/Gt.length;(gn<_e||gn===_e&&In<fe)&&(_e=gn,fe=In,we=mt,Fe=Vt)}),!we||!(Fe!=null&&Fe.length)){p.value="Unable to locate a fair meet-up point for the provided stations.";const mt=Date.now()-le,Vt=Math.max(0,2e3-mt);await new Promise(Gt=>setTimeout(Gt,Vt)),s.value=!1;return}const rt=Fe.reduce((mt,Vt)=>mt+Vt.minutes,0),pt=Math.max(...Fe.map(mt=>mt.minutes));v.value={station:we,totalMinutes:rt,averageMinutes:rt/Fe.length,maxTravelTime:pt,details:Fe};const vt=Date.now()-le,gt=Math.max(0,2e3-vt);await new Promise(mt=>setTimeout(mt,gt)),s.value=!1,Gn(()=>{Nt(we),setTimeout(()=>{dt(we),kt()},300)}),$e(`Suggested meeting point: ${we}`)}function $e(Ne){Ne&&(F.value=Ne,V&&(clearTimeout(V),V=null),V=window.setTimeout(()=>{F.value="",V=null},3500))}function Ee(Ne){if(!I.value||!P.value||!Ne||(ie&&(clearTimeout(ie),We()),K=Ne.trim().toLowerCase().replace(/\s+/g," "),!I.value.getLayer("singatrain-stations")))return;const le=[{time:0,radius:6,strokeWidth:2},{time:50,radius:18,strokeWidth:5},{time:140,radius:20,strokeWidth:5},{time:170,radius:15,strokeWidth:5},{time:200,radius:19,strokeWidth:5},{time:245,radius:17,strokeWidth:5},{time:275,radius:18,strokeWidth:5},{time:350,radius:6,strokeWidth:2}];let we=0;const _e=()=>{if(we>=le.length){We();return}const fe=le[we];if(I.value.setPaintProperty("singatrain-stations","circle-radius",["case",["==",["get","name_lower"],K],fe.radius,6]),I.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["==",["get","name_lower"],K],fe.strokeWidth,2]),I.value.setPaintProperty("singatrain-stations","circle-stroke-color",["case",["==",["get","name_lower"],K],"#ffffff",["coalesce",["get","secondary_color"],"#fff"]]),we++,we<le.length){const rt=le[we].time-fe.time;setTimeout(_e,rt)}else ie=setTimeout(()=>{We()},50)};_e()}function We(){var le;if(!I.value||!P.value)return;K=null;const Ne=(le=v.value)==null?void 0:le.station;I.value.getLayer("singatrain-stations")&&(Ne?Nt(Ne):(I.value.setPaintProperty("singatrain-stations","circle-radius",6),I.value.setPaintProperty("singatrain-stations","circle-stroke-width",2),I.value.setPaintProperty("singatrain-stations","circle-stroke-color",["coalesce",["get","secondary_color"],"#fff"]),I.value.setPaintProperty("singatrain-stations","circle-opacity",1)))}function Ze(Ne,le){if(!Ne)return;if(v.value&&v.value.station===Ne){$e("Cannot assign the suggested meet-up station. Click Cancel to modify participants.");return}Ee(Ne);const we=h.value.findIndex(rt=>rt.station===Ne);if(we!==-1){h.value[we].station="",$e(`${Ne} removed from Person ${we+1}.`);return}const _e=h.value.findIndex(rt=>!rt.station);if(_e!==-1){h.value[_e].station=Ne,$e(`${Ne} assigned to Person ${_e+1}.`);return}if(h.value.length>=v1){$e(`Cannot add ${Ne}; maximum of ${v1} people reached.`);return}if(!X())return;const Fe=h.value.length-1;h.value[Fe].station=Ne,$e(`${Ne} assigned to new Person ${Fe+1}.`)}function ct(){!I.value||!P.value||(q.forEach(Ne=>Ne.remove()),q.clear())}function kt(){var le;if(!I.value||!P.value)return;const Ne=(le=v.value)==null?void 0:le.station;Ne&&(Nt(Ne),dt(Ne))}function Nt(Ne){if(!I.value||!P.value||!Ne)return;const le=Ne.trim().toLowerCase().replace(/\s+/g," ");console.log("Highlighting meetup station:",Ne,"normalized:",le),I.value.getLayer("singatrain-stations")&&(I.value.setPaintProperty("singatrain-stations","circle-color",["case",["==",["get","name_lower"],le],["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]],"#9ca3af"]),I.value.setPaintProperty("singatrain-stations","circle-radius",["case",["==",["get","name_lower"],le],10,6]),I.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["==",["get","name_lower"],le],4,2]),I.value.setPaintProperty("singatrain-stations","circle-stroke-color",["case",["==",["get","name_lower"],le],["coalesce",["get","secondary_color"],"#fff"],"#9ca3af"])),I.value.getLayer("singatrain-labels")&&(I.value.setPaintProperty("singatrain-labels","text-color",["case",["==",["get","name_lower"],le],"#2f3640","#9ca3af"]),I.value.setLayoutProperty("singatrain-labels","text-size",["case",["==",["get","name_lower"],le],14,12])),I.value.getLayer("singatrain-lines")&&(I.value.setPaintProperty("singatrain-lines","line-color","#9ca3af"),I.value.setPaintProperty("singatrain-lines","line-opacity",.4))}function ot(){!I.value||!P.value||(I.value.getLayer("singatrain-stations")&&(I.value.setPaintProperty("singatrain-stations","circle-color",["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]]),I.value.setPaintProperty("singatrain-stations","circle-radius",6),I.value.setPaintProperty("singatrain-stations","circle-stroke-width",["case",["has","secondary_color"],3,2]),I.value.setPaintProperty("singatrain-stations","circle-stroke-color",["coalesce",["get","secondary_color"],"#fff"])),I.value.getLayer("singatrain-labels")&&(I.value.setPaintProperty("singatrain-labels","text-color","#2f3640"),I.value.setLayoutProperty("singatrain-labels","text-size",12)),I.value.getLayer("singatrain-lines")&&(I.value.setPaintProperty("singatrain-lines","line-color",["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"]),I.value.setPaintProperty("singatrain-lines","line-opacity",.8)))}function dt(Ne){if(!I.value||!P.value||!Ne)return;const le=H.get(Ne.toLowerCase());if(!le)return;const we=j(Ne).map(_e=>_e.code);console.log("Zooming to station:",Ne,"with codes:",we),I.value.flyTo({center:le.geometry.coordinates,zoom:17.5,pitch:60,bearing:0,essential:!0,speed:1.2})}function Je(){!I.value||!P.value||(I.value.flyTo({center:[103.8475,1.3011],zoom:11,pitch:0,bearing:0,essential:!0,speed:.8}),ot())}async function yt(){if(I.value||!C.value)return;y0.accessToken=ppe,I.value=new y0.Map({container:C.value,style:"mapbox://styles/mapbox/streets-v11",center:[103.8475,1.3011],zoom:11,pitch:0,bearing:0,renderWorldCopies:!1,pitchWithRotate:!0,attributionControl:!1,cooperativeGestures:!0}),I.value.addControl(new y0.NavigationControl({showCompass:!1}));const Ne=()=>{var _e;const we=(_e=C.value)==null?void 0:_e.querySelector(".mapboxgl-ctrl-cooperative-gesture-hint");we&&we.remove()};Ne(),setTimeout(Ne,100),setTimeout(Ne,500);const le=new MutationObserver(()=>{Ne()});C.value&&le.observe(C.value,{childList:!0,subtree:!0}),I.value.on("load",async()=>{try{const we=await fetch(gpe);if(!we.ok)throw new Error(`Unable to load map data (HTTP ${we.status})`);const _e=await we.json();_e.features.filter(vt=>{var gt,mt;return((gt=vt.geometry)==null?void 0:gt.type)==="Point"&&((mt=vt.properties)==null?void 0:mt.stop_type)==="station"}).forEach(vt=>{const gt=vt.properties.name,mt=t(gt);mt&&(vt.properties.primary_color=mt.primary,mt.secondary&&(vt.properties.secondary_color=mt.secondary));const Vt=gt.trim().toLowerCase().replace(/\s+/g," ");vt.properties.name_lower=Vt,H.set(Vt,vt)}),I.value.addSource("singatrain-rail",{type:"geojson",data:_e}),I.value.addLayer({id:"singatrain-lines",source:"singatrain-rail",filter:["==",["geometry-type"],"LineString"],type:"line",paint:{"line-width":["interpolate",["linear"],["zoom"],10,2,16,6],"line-color":["match",["get","line_color"],"orangered","#d42e12","mediumseagreen","#009645","orange","#fa9e0d","saddlebrown","#9D5B25","darkmagenta","#9900aa","darkslateblue","#005ec4","#748477"],"line-opacity":.8},layout:{"line-cap":"round","line-join":"round"}}),I.value.addLayer({id:"singatrain-stations",source:"singatrain-rail",filter:["all",["==",["geometry-type"],"Point"],["==",["get","stop_type"],"station"]],type:"circle",paint:{"circle-radius":6,"circle-color":["coalesce",["get","primary_color"],["match",["get","station_colors"],"red","#d42e12","green","#009645","orange","#fa9e0d","brown","#9D5B25","purple","#9900aa","blue","#005ec4","#748477"]],"circle-stroke-color":["coalesce",["get","secondary_color"],"#fff"],"circle-stroke-width":["case",["has","secondary_color"],3,2]}}),I.value.addLayer({id:"singatrain-labels",source:"singatrain-rail",filter:["==",["get","stop_type"],"station"],type:"symbol",layout:{"text-field":["get","name"],"text-size":12,"text-anchor":"top","text-offset":[0,.8],"text-font":["DIN Pro Medium","Arial Unicode MS Bold"]},paint:{"text-color":"#2f3640","text-halo-color":"#fff","text-halo-width":1}}),I.value.on("mouseenter","singatrain-stations",()=>{I.value&&(I.value.getCanvas().style.cursor="pointer")}),I.value.on("mouseleave","singatrain-stations",()=>{I.value&&(I.value.getCanvas().style.cursor="")}),I.value.on("click","singatrain-stations",vt=>{var Vt,Gt;const gt=(Vt=vt.features)==null?void 0:Vt[0],mt=(Gt=gt==null?void 0:gt.properties)==null?void 0:Gt.name;Ze(mt,vt)});let fe=0,Fe=null;const rt=400,pt=1e-4;I.value.on("click",vt=>{var gn;if(I.value.queryRenderedFeatures(vt.point,{layers:["singatrain-stations"]}).length>0){fe=0,Fe=null;return}const mt=Date.now(),Vt=vt.lngLat;mt-fe<rt&&Fe&&Math.abs(Vt.lng-Fe.lng)<pt&&Math.abs(Vt.lat-Fe.lat)<pt?(I.value.getPitch()>0?Je():(gn=v.value)!=null&&gn.station&&dt(v.value.station),fe=0,Fe=null):(fe=mt,Fe=Vt)}),P.value=!0,D.value="",ct(),kt()}catch(we){console.error("Failed to load rail GeoJSON",we),D.value="Map data is unavailable right now. Please try again later."}})}return Dr(()=>{yt()}),jr(()=>{q.forEach(Ne=>Ne.remove()),q.clear(),I.value&&(I.value.remove(),I.value=null),V&&(clearTimeout(V),V=null)}),Zt(h,()=>{ct()},{deep:!0}),Zt(()=>{var Ne;return(Ne=v.value)==null?void 0:Ne.station},()=>{kt()}),Zt(P,Ne=>{Ne&&(ct(),kt())}),(Ne,le)=>(Kt(),an("section",gme,[B("div",vme,[B("div",null,[le[1]||(le[1]=B("h2",{class:"section-title mb-2"},"Meet-up Point Finder",-1)),ue(pme,{words:"Where are you starting from? Enter your home MRT, and we'll find the fairest meeting point for your group!",duration:2500})])]),B("div",_me,[v.value===null&&!x.value?(Kt(!0),an(ln,{key:0},us(h.value,(we,_e)=>(Kt(),an("div",{key:we.id,class:Tt(["person-card",{active:!!we.station}])},[B("div",yme,[B("div",bme,tn(_e+1),1),B("div",xme,[B("h6",null,"Person "+tn(_e+1),1)]),h.value.length>2?(Kt(),an("button",{key:0,class:"btn btn-sm btn-outline-danger ms-auto",type:"button",onClick:fe=>$(we.id)},[...le[2]||(le[2]=[B("span",{class:"material-icons"},"delete",-1)])],8,wme)):Si("",!0)]),B("div",Tme,[B("div",Sme,[B("div",Eme,[B("div",Cme,[B("input",{ref_for:!0,ref:"inputRef",value:we.searchInput||we.station||"",type:"text",class:Tt(["input",{"has-badges":we.station&&!we.searchInput}]),placeholder:!we.station&&!we.searchInput?"-- Select station --":"",autocomplete:"off",onInput:fe=>ee(we,fe),onKeydown:fe=>be(we,fe),onFocus:fe=>Ie(we),onBlur:fe=>Ke(we)},null,42,kme),we.autocompleteSuggestion&&we.searchInput&&we.searchInput.length>0&&we.autocompleteSuggestion.toLowerCase().startsWith(we.searchInput.toLowerCase())?(Kt(),an("span",Ime,[B("span",Ame,tn(we.searchInput),1),B("span",Pme,tn(we.autocompleteSuggestion.substring(we.searchInput.length)),1)])):Si("",!0)]),we.station&&!we.searchInput?(Kt(),an("div",Mme,[(Kt(!0),an(ln,null,us(j(we.station),fe=>(Kt(),an("span",{key:fe.code,class:"input-line-badge",style:Yt({backgroundColor:fe.bgColor,color:fe.color,borderColor:fe.borderColor})},[B("strong",null,tn(fe.code),1)],4))),128))])):Si("",!0),B("span",{class:Tt(["icon material-icons",{"icon-active":we.searchInput||we.station}])},"place",2)])])])],2))),128)):Si("",!0),ue(Ol,{name:"meetup-result",mode:"out-in"},{default:yi(()=>{var we,_e,fe,Fe,rt,pt,vt;return[v.value!==null||x.value?(Kt(),an("div",{key:((we=v.value||T.value)==null?void 0:we.station)||"hiding",class:"meetup-results-card person-card"},[B("div",Dme,[B("h4",Lme,[le[3]||(le[3]=B("span",{class:"material-icons me-2 text-danger"},"place",-1)),B("span",{class:"meetup-station-name",style:{cursor:"pointer",transition:"color 0.2s ease"},onClick:le[0]||(le[0]=gt=>{var mt;return dt((mt=v.value||T.value)==null?void 0:mt.station)})},[B("strong",null,"Suggested meet-up: "+tn(((_e=v.value||T.value)==null?void 0:_e.station)||""),1)]),B("div",Rme,[(Kt(!0),an(ln,null,us(j((fe=v.value||T.value)==null?void 0:fe.station),gt=>(Kt(),an("span",{key:gt.code,class:"station-code-badge",style:Yt({backgroundColor:gt.bgColor,color:gt.color,borderColor:gt.borderColor})},[B("strong",null,tn(gt.code),1)],4))),128))])]),B("button",{class:"pushable pushable-cancel",type:"button",onClick:te},[...le[4]||(le[4]=[B("span",{class:"shadow"},null,-1),B("span",{class:"edge"},null,-1),B("span",{class:"front"},"Cancel",-1)])])]),B("div",Ome,[B("div",Vme,[B("div",Bme,[B("p",Fme,[le[5]||(le[5]=B("strong",null,"Total travel time:",-1)),zn(" "+tn(((Fe=v.value||T.value)==null?void 0:Fe.totalMinutes)||0)+" minutes ",1)]),B("p",zme,[le[6]||(le[6]=B("strong",null,"Average per person:",-1)),zn(" "+tn(((pt=(rt=v.value||T.value)==null?void 0:rt.averageMinutes)==null?void 0:pt.toFixed(1))||"0.0")+" minutes ",1)])])]),B("div",Nme,[B("div",$me,[le[7]||(le[7]=B("h6",{class:"text-uppercase fw-semibold mb-2",style:{color:"var(--color-text)"}},"Individual journeys",-1)),(Kt(!0),an(ln,null,us(((vt=v.value||T.value)==null?void 0:vt.details)||[],gt=>(Kt(),an("div",{key:gt.origin,class:"d-flex justify-content-between align-items-center border-bottom py-2",style:{"border-bottom-color":"var(--color-border) !important"}},[B("div",null,[B("div",Ume,tn(gt.origin),1),B("div",jme,tn(gt.steps.length)+" stops / "+tn(gt.segments.length)+" segment(s) ",1)]),B("span",Wme,tn(gt.minutes)+" min",1)]))),128))])])])])):Si("",!0)]}),_:1})]),B("div",Hme,[B("button",{class:"custom-btn",type:"button",onClick:Pe},[le[14]||(le[14]=B("span",{class:"material-icons me-1"},"travel_explore",-1)),le[15]||(le[15]=zn(" Meet-up ",-1)),(Kt(),an("svg",Gme,[...le[8]||(le[8]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",qme,[...le[9]||(le[9]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",Kme,[...le[10]||(le[10]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",Xme,[...le[11]||(le[11]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",Yme,[...le[12]||(le[12]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",Zme,[...le[13]||(le[13]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),B("button",{class:"custom-btn",type:"button",onClick:X},[le[22]||(le[22]=B("span",{class:"material-icons me-1"},"person_add",-1)),le[23]||(le[23]=zn(" Add person ",-1)),(Kt(),an("svg",Jme,[...le[16]||(le[16]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",Qme,[...le[17]||(le[17]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",epe,[...le[18]||(le[18]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",tpe,[...le[19]||(le[19]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",npe,[...le[20]||(le[20]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",ipe,[...le[21]||(le[21]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))]),B("button",{class:"custom-btn",type:"button",onClick:Xe},[le[30]||(le[30]=B("span",{class:"material-icons me-1"},"restart_alt",-1)),le[31]||(le[31]=zn(" Clear ",-1)),(Kt(),an("svg",rpe,[...le[24]||(le[24]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",spe,[...le[25]||(le[25]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",ope,[...le[26]||(le[26]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",ape,[...le[27]||(le[27]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",lpe,[...le[28]||(le[28]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])])),(Kt(),an("svg",cpe,[...le[29]||(le[29]=[B("polygon",{class:"fil0",points:"259.216,29.942 330.286,193.919 512,222.877 378,357.736 404.58,439.15 259.216,378.062 113.852,439.15 140.432,357.736 6,222.877 188.146,193.919 "},null,-1)])]))])]),B("div",upe,[le[33]||(le[33]=cw('<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3" data-v-3e16e98a><div class="d-flex align-items-center gap-2" data-v-3e16e98a><span class="material-icons text-danger" data-v-3e16e98a>map</span><h5 class="mb-0" data-v-3e16e98a>Interactive MRT Network</h5></div><div class="small" data-v-3e16e98a>Click a station to assign or remove it for the next available person.</div></div>',1)),B("div",dpe,[B("div",{ref_key:"mapContainer",ref:C,class:"meetup-map rounded-4"},null,512),B("div",{class:Tt(["map-loading-overlay",{show:s.value}])},[...le[32]||(le[32]=[cw('<div class="map-loading-content" data-v-3e16e98a><div class="capybaraloader" data-v-3e16e98a><div class="capybara" data-v-3e16e98a><div class="capy" data-v-3e16e98a><div class="capyhead" data-v-3e16e98a><div class="capyear" data-v-3e16e98a><div class="capyear2" data-v-3e16e98a></div></div><div class="capyear" data-v-3e16e98a><div class="capyear2" data-v-3e16e98a></div></div><div class="capymouth" data-v-3e16e98a><div class="capylips" data-v-3e16e98a></div><div class="capylips" data-v-3e16e98a></div></div><div class="capyeye" data-v-3e16e98a></div><div class="capyeye" data-v-3e16e98a></div></div><div class="capyleg" data-v-3e16e98a><div class="capyleg2" data-v-3e16e98a></div><div class="capyleg2" data-v-3e16e98a></div></div></div></div><div class="loader" data-v-3e16e98a><div class="loaderline" data-v-3e16e98a></div></div></div></div>',1)])],2),D.value?(Kt(),an("div",hpe,tn(D.value),1)):Si("",!0)]),F.value?(Kt(),an("div",fpe,tn(F.value),1)):Si("",!0)]),p.value?(Kt(),an("div",mpe,tn(p.value),1)):Si("",!0)]))}},_pe=_g(vpe,[["__scopeId","data-v-3e16e98a"]]),ype={id:"profile",class:"section-card"},bpe={key:0,class:"overlay-wrapper"},xpe={key:0,class:"overlay-message error"},wpe={key:1,class:"overlay-message success"},Tpe={key:1,id:"auth-section"},Spe={key:0,id:"password-requirements"},Epe={class:"auth-links"},Cpe={key:2,class:"modal-overlay"},kpe={class:"modal-content"},Ipe={class:"modal-buttons"},Ape={key:3,id:"dashboard-section"},Ppe={class:"profile-layout"},Mpe={class:"left-column"},Dpe={class:"card",id:"change-name-div"},Lpe={class:"card",id:"add-favorite-div"},Rpe=["value"],Ope={class:"flip-card-back"},Vpe={class:"card-header"},Bpe={class:"account-info"},Fpe={class:"account-row"},zpe={class:"account-row"},Npe={class:"favorites-list"},$pe={id:"favoriteList"},Upe=["onClick"],jpe={key:4,class:"modal-overlay"},Wpe={class:"modal-content"},Hpe={key:0,style:{color:"var(--bs-body-color)"},class:"error-message"},Gpe={key:5,class:"loading-overlay"},qpe={__name:"Profile",setup(e){const t=it(null),n=it(""),i=it(""),r=it(""),a=it(""),l=it("");let h=null;const s=it(!1),p=it(!1),v=it(""),x=it("--/--/----"),{state:T,addFavorite:C,removeFavorite:I}=Zv(),P=me(()=>T.favorites),D=it(""),F=it(""),V=it(!1),H=it(""),q=it(!1),K=it(!1),ie=it(!1),X=it(!1),$=it(!1),G=it(""),j=it(!1),te=it(!1),Z=it(aF);function ee(dt,Je,yt=3e3){dt==="error"?(a.value=Je,l.value=""):(l.value=Je,a.value=""),h&&clearTimeout(h),h=setTimeout(()=>{a.value="",l.value="",h=null},yt)}jr(()=>{h&&clearTimeout(h),p.value=!1,V.value=!1,j.value=!1});let be=null;Dr(()=>{be=W5(dt=>{t.value=dt,p.value=!1,V.value=!1,a.value="",l.value=""})}),jr(()=>{be&&be()});function Ie(){a.value="",l.value=""}function Ve(dt){switch(dt){case"auth/email-already-in-use":return"This email is already in use. Try signing in or resetting your password.";case"auth/invalid-email":return"Invalid email format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password too weak. Please use a stronger one.";case"auth/user-not-found":return"No user found with this email.";case"auth/wrong-password":case"auth/invalid-credential":case"auth/invalid-login-credentials":return"Invalid email or password.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";default:return"An unknown error occurred. Please try again."}}const Ke=async()=>{Ie();const dt=await pte(n.value,i.value);dt.success?(a.value="",ee("success","Welcome back!"),t.value=dt.user):(ee("error",dt.message),l.value="")},Xe=async()=>{Ie();const dt=i.value||"";if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*(),.?":{}|<>]).{8,}$/.test(dt)){a.value="Password must include at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character.",l.value="";return}const yt=await mte(n.value,dt);yt.success?(a.value="",ee("success","Account created successfully!"),t.value=yt.user,await Nt(yt.user)):(ee("error",yt.message),l.value="")};Zt(i,dt=>{const Je=(dt||"").toString();s.value=Je.length>0,q.value=Je.length>=6,K.value=/[A-Z]/.test(Je),ie.value=/[a-z]/.test(Je),X.value=/[0-9]/.test(Je),$.value=/[!@#$%^&*(),.?":{}|<>]/.test(Je)});const Pe=async()=>{try{await gte(),Ie(),ee("success","You have been signed out.")}catch(dt){ee("error",Ve(dt.code))}},$e=async()=>{if(!t.value){ee("error","No user is currently logged in.");return}if(!H.value){G.value="Please enter your password to confirm deletion.";return}j.value=!0;try{const dt=og.credential(t.value.email,H.value);await kY(t.value,dt);const Je=t.value.uid;await dte(Dp(Rp,"users",Je)),await RY(t.value),ee("success","Your account has been deleted."),V.value=!1,G.value="",setTimeout(()=>{t.value=null,v.value="",x.value="--/--/----",P.value=[],H.value="",j.value=!1},1200)}catch(dt){console.error("Delete account error:",dt),j.value=!1,G.value=dt.code==="auth/invalid-credential"?"Incorrect password. Please try again.":"Account deletion failed. Please try again."}},Ee=()=>{V.value=!1,H.value="",G.value=""},We=async()=>{if(Ie(),!r.value)return ee("error","Enter your email first.");try{await vte(r.value),ee("success","Password reset email sent!"),p.value=!1,r.value=""}catch(dt){ee("error",Ve(dt.code))}},Ze=async()=>{try{await _te(t.value.uid,v.value),ee("success","Profile updated!")}catch{ee("error","Failed to update profile.")}},ct=async()=>{var Je;if(!D.value||!F.value){ee("error","Enter both label and station.");return}const dt={label:D.value,station:F.value};try{(Je=t.value)!=null&&Je.uid&&(await yte(t.value.uid,dt),C(dt),D.value="",F.value="",ee("success","Successfully added new station."))}catch(yt){console.error("Add favorite error:",yt),ee("error","Failed to add favorite.")}},kt=async dt=>{var Je;try{if(!((Je=t.value)!=null&&Je.uid))return;I(dt);const yt=T.favorites.map(Ne=>({...Ne}));await qT(Dp(Rp,"users",t.value.uid),{favorite_stations:yt}),ee("success","Favorite removed!")}catch(yt){console.error("Remove favorite error:",yt),ee("error","Failed to remove favorite.")}};W5(async dt=>{t.value=dt,Ie(),dt?await Nt(dt):(v.value="",x.value="--/--/----",P.value=[])});async function Nt(dt){var Ne;if(!dt)return;const Je=Dp(Rp,"users",dt.uid),yt=await cte(Je);if(yt.exists()){const le=yt.data();v.value=le.name||"Anonymous",x.value=(Ne=le.created_at)!=null&&Ne.toDate?le.created_at.toDate().toLocaleDateString():"--/--/----",T.favorites.splice(0,T.favorites.length),Array.isArray(le.favorite_stations)&&le.favorite_stations.forEach(we=>C(we))}else{const le={name:"Anonymous",email:dt.email,created_at:new Date,favorite_stations:[]};await PN(Je,le),v.value=le.name,x.value=le.created_at.toLocaleDateString(),T.favorites.splice(0,T.favorites.length)}}const ot=()=>{window.innerWidth<=992&&(te.value=!te.value)};return(dt,Je)=>(Kt(),an("section",ype,[a.value||l.value?(Kt(),an("div",bpe,[a.value?(Kt(),an("div",xpe,tn(a.value),1)):Si("",!0),l.value?(Kt(),an("div",wpe,tn(l.value),1)):Si("",!0)])):Si("",!0),t.value?Si("",!0):(Kt(),an("div",Tpe,[Je[11]||(Je[11]=B("h2",{class:"mt-5 pt-5"},"Join or Sign In",-1)),Je[12]||(Je[12]=B("label",{for:"auth-email"},"Email:",-1)),Oi(B("input",{type:"email",id:"auth-email","onUpdate:modelValue":Je[0]||(Je[0]=yt=>n.value=yt),placeholder:"Enter your email",class:Tt({"has-value":n.value})},null,2),[[wf,n.value]]),Je[13]||(Je[13]=B("label",{for:"auth-password"},"Password:",-1)),Oi(B("input",{type:"password",id:"auth-password","onUpdate:modelValue":Je[1]||(Je[1]=yt=>i.value=yt),placeholder:"Enter your password",class:Tt({"has-value":i.value})},null,2),[[wf,i.value]]),s.value?(Kt(),an("div",Spe,[Je[10]||(Je[10]=B("p",null,"Password must contain:",-1)),B("span",{class:Tt({met:q.value,"not-met":!q.value})},"- At least 6 characters",2),B("span",{class:Tt({met:K.value,"not-met":!K.value})},"- An uppercase letter",2),B("span",{class:Tt({met:ie.value,"not-met":!ie.value})},"- A lowercase letter",2),B("span",{class:Tt({met:X.value,"not-met":!X.value})},"- A number",2),B("span",{class:Tt({met:$.value,"not-met":!$.value})},"- A special character (!@#$%^&*)",2)])):Si("",!0),B("div",{class:"auth-buttons"},[B("button",{id:"login-btn",onClick:Ke},"Sign In")]),B("div",Epe,[B("a",{href:"#",onClick:Je[2]||(Je[2]=sa(yt=>{p.value=!0,Ie()},["prevent"]))},"Forgot Password?"),B("a",{href:"#",onClick:sa(Xe,["prevent"]),class:"register-link"},"Register New Account")])])),p.value?(Kt(),an("div",Cpe,[B("div",kpe,[Je[14]||(Je[14]=B("h3",null,"Reset Your Password",-1)),Je[15]||(Je[15]=B("p",null,"Enter your email to receive a password reset link.",-1)),Oi(B("input",{type:"email","onUpdate:modelValue":Je[3]||(Je[3]=yt=>r.value=yt),placeholder:"Enter your email"},null,512),[[wf,r.value]]),B("div",Ipe,[B("button",{type:"button",class:"cancel",onClick:Je[4]||(Je[4]=yt=>p.value=!1)}," Cancel "),B("button",{type:"button",class:"confirm",onClick:We}," Send Reset Email ")])])])):Si("",!0),t.value?(Kt(),an("div",Ape,[Je[28]||(Je[28]=B("h2",{class:"mt-5 pt-5"},"Welcome to SingaTrain!",-1)),B("p",null,[Je[16]||(Je[16]=zn("You are logged in as: ",-1)),B("strong",null,tn(t.value.email),1)]),B("div",Ppe,[B("div",Mpe,[B("div",Dpe,[Je[17]||(Je[17]=B("h3",null,"Change Display Name",-1)),Oi(B("input",{type:"text","onUpdate:modelValue":Je[5]||(Je[5]=yt=>v.value=yt),placeholder:"Current name"},null,512),[[wf,v.value]]),B("button",{onClick:Ze},"Save Profile")]),B("div",Lpe,[Je[19]||(Je[19]=B("h3",null,"Add New Favorite Station",-1)),Je[20]||(Je[20]=B("label",{for:"favoriteLabel"},"Label:",-1)),Oi(B("input",{type:"text",id:"favoriteLabel","onUpdate:modelValue":Je[6]||(Je[6]=yt=>D.value=yt),placeholder:"Favorite name"},null,512),[[wf,D.value]]),Je[21]||(Je[21]=B("label",{for:"favoriteStation"},"Station:",-1)),Oi(B("select",{id:"favoriteStation","onUpdate:modelValue":Je[7]||(Je[7]=yt=>F.value=yt)},[Je[18]||(Je[18]=B("option",{disabled:"",value:""},"Select a station",-1)),(Kt(!0),an(ln,null,us(Z.value,yt=>(Kt(),an("option",{key:yt,value:yt},tn(yt),9,Rpe))),128))],512),[[M0,F.value]]),B("button",{onClick:ct},"Add Favorite Station")])]),B("div",{class:"card flip-card",id:"user-info-card",onClick:ot},[B("div",{class:Tt(["flip-card-inner",{"is-flipped":te.value}])},[Je[27]||(Je[27]=B("div",{class:"flip-card-front"},[B("img",{src:sF,alt:"SingaTrain Logo",class:"logo"}),B("p",{class:"hover-hint"})],-1)),B("div",Ope,[B("div",Vpe,[B("h2",null,tn(v.value||"User Name"),1)]),B("div",Bpe,[B("div",Fpe,[Je[23]||(Je[23]=B("span",{class:"material-icons",style:{color:"#c2410c"}},"calendar_today",-1)),B("div",null,[Je[22]||(Je[22]=B("p",{class:"label"},"Member Since",-1)),B("p",null,tn(x.value),1)])]),B("div",zpe,[Je[25]||(Je[25]=B("span",{class:"material-icons",style:{color:"#c2410c"}},"star",-1)),B("div",null,[Je[24]||(Je[24]=B("p",{class:"label"},"Favorite Stations",-1)),B("p",null,tn(P.value.length)+" stations",1)])])]),Je[26]||(Je[26]=B("h3",{class:"favorites-title"},"Your Favorite Stations",-1)),B("div",Npe,[B("ul",$pe,[(Kt(!0),an(ln,null,us(P.value,(yt,Ne)=>(Kt(),an("li",{key:Ne},[B("span",null,[B("strong",null,tn(yt.label),1),zn(" "+tn(yt.station),1)]),B("button",{onClick:le=>kt(yt)},"Remove",8,Upe)]))),128))])])])],2)])]),B("button",{id:"logout-btn",onClick:Pe},"Sign Out"),B("button",{id:"delete-account-btn",onClick:Je[8]||(Je[8]=yt=>V.value=!0)}," Delete Account ")])):Si("",!0),V.value?(Kt(),an("div",jpe,[B("div",Wpe,[Je[29]||(Je[29]=B("h3",null,"Confirm Account Deletion",-1)),Je[30]||(Je[30]=B("p",null,"Enter your password to confirm deletion. This action cannot be undone.",-1)),Oi(B("input",{type:"password","onUpdate:modelValue":Je[9]||(Je[9]=yt=>H.value=yt),placeholder:"Password"},null,512),[[wf,H.value]]),G.value?(Kt(),an("div",Hpe,tn(G.value),1)):Si("",!0),B("div",{class:"modal-buttons"},[B("button",{type:"button",class:"cancel",onClick:Ee},"Cancel"),B("button",{type:"button",class:"confirm",onClick:$e},"Yes, Delete")])])])):Si("",!0),j.value?(Kt(),an("div",Gpe,[...Je[31]||(Je[31]=[cw('<div class="train-loader"><div class="track-wrapper"><div class="track"></div><div class="train" aria-hidden="true"><div class="engine"></div><div class="car"></div><div class="car"></div></div></div><p>Clearing your data... please wait </p></div>',1)])])):Si("",!0)]))}},HC={"Downtown Line":{"Towards Expo":[{code:"DT1",station:"Bukit Panjang",first:"5:30 AM",last:"11:35 PM"},{code:"DT7",station:"Sixth Avenue",first:"5:38 AM",last:"11:42 PM"},{code:"DT14",station:"Bugis",first:"5:44 AM",last:"11:55 PM"},{code:"DT21",station:"Bencoolen",first:"5:47 AM",last:"12:02 AM"},{code:"DT35",station:"Expo",first:"5:50 AM",last:"12:15 AM"}],"Towards Bukit Panjang":[{code:"DT35",station:"Expo",first:"5:32 AM",last:"11:40 PM"},{code:"DT29",station:"Bedok North",first:"5:41 AM",last:"11:52 PM"},{code:"DT20",station:"Fort Canning",first:"5:49 AM",last:"12:08 AM"},{code:"DT9",station:"Newton",first:"5:55 AM",last:"12:18 AM"},{code:"DT1",station:"Bukit Panjang",first:"6:03 AM",last:"12:33 AM"}]},"North East Line":{"Towards HarbourFront":[{code:"NE17",station:"Punggol",first:"5:36 AM",last:"11:47 PM"},{code:"NE12",station:"Serangoon",first:"5:42 AM",last:"11:59 PM"},{code:"NE7",station:"Little India",first:"5:47 AM",last:"12:08 AM"},{code:"NE3",station:"Outram Park",first:"5:53 AM",last:"12:20 AM"},{code:"NE1",station:"HarbourFront",first:"5:56 AM",last:"12:24 AM"}],"Towards Punggol Coast":[{code:"NE1",station:"HarbourFront",first:"5:34 AM",last:"11:45 PM"},{code:"NE4",station:"Chinatown",first:"5:38 AM",last:"11:53 PM"},{code:"NE10",station:"Potong Pasir",first:"5:46 AM",last:"12:05 AM"},{code:"NE14",station:"Hougang",first:"5:51 AM",last:"12:15 AM"},{code:"NE18",station:"Punggol Coast (future)",first:"",last:""}]},"North-South Line":{},"East-West Line":{},"Thomson-East Coast Line":{},"Circle Line":{},"LRT Line":{}},Kpe={class:"section-card"},Xpe={class:"row g-3 align-items-end"},Ype={class:"col-md-4"},Zpe=["value"],Jpe={class:"col-md-4"},Qpe=["value"],ege={class:"col-md-4"},tge={class:"border rounded-3 p-3 mt-4"},nge={class:"d-flex justify-content-between align-items-center mb-3"},ige={class:"badge bg-secondary"},rge={key:0,class:"text-muted"},sge={class:"fw-semibold"},oge={class:"text-muted small"},age={class:"text-end"},lge={class:"text-muted small"},cge={__name:"FirstLastTrain",setup(e){const t=Object.keys(HC),n=it(t[0]),i=me(()=>Object.keys(HC[n.value]||{})),r=it(""),a=it("");Zt(i,h=>{h.includes(r.value)||(r.value=h[0]||"")},{immediate:!0});const l=me(()=>{var p;const h=((p=HC[n.value])==null?void 0:p[r.value])||[];if(!a.value)return h;const s=a.value.toLowerCase();return h.filter(v=>v.station.toLowerCase().includes(s)||v.code.toLowerCase().includes(s))});return(h,s)=>(Kt(),an("section",Kpe,[s[8]||(s[8]=B("h2",{class:"section-title mb-3"},"First & Last Train Timings",-1)),s[9]||(s[9]=B("p",{class:"text-muted"},[zn(" Reference departures for selected lines and directions. Integrate with the real LTA DataMall feed by replacing the static dataset in "),B("code",null,"src/data/trainTimings.js"),zn(". ")],-1)),B("div",Xpe,[B("div",Ype,[s[3]||(s[3]=B("label",{class:"form-label",for:"timingLine"},"Line",-1)),Oi(B("select",{id:"timingLine","onUpdate:modelValue":s[0]||(s[0]=p=>n.value=p),class:"form-select"},[(Kt(!0),an(ln,null,us(Ti(t),p=>(Kt(),an("option",{key:p,value:p},tn(p),9,Zpe))),128))],512),[[M0,n.value]])]),B("div",Jpe,[s[4]||(s[4]=B("label",{class:"form-label",for:"timingDirection"},"Direction",-1)),Oi(B("select",{id:"timingDirection","onUpdate:modelValue":s[1]||(s[1]=p=>r.value=p),class:"form-select"},[(Kt(!0),an(ln,null,us(i.value,p=>(Kt(),an("option",{key:p,value:p},tn(p),9,Qpe))),128))],512),[[M0,r.value]])]),B("div",ege,[s[5]||(s[5]=B("label",{class:"form-label",for:"timingSearch"},"Search station",-1)),Oi(B("input",{id:"timingSearch","onUpdate:modelValue":s[2]||(s[2]=p=>a.value=p),type:"search",class:"form-control",placeholder:"Start typing a station"},null,512),[[wf,a.value]])])]),B("div",tge,[B("div",nge,[B("strong",null,tn(n.value)+"  "+tn(r.value),1),B("span",ige,tn(l.value.length)+" station(s)",1)]),l.value.length?Si("",!0):(Kt(),an("div",rge,"No stations match your search.")),(Kt(!0),an(ln,null,us(l.value,p=>(Kt(),an("div",{key:p.code,class:"d-flex justify-content-between py-2 border-top"},[B("div",null,[B("div",sge,tn(p.station),1),B("div",oge,tn(p.code),1)]),B("div",age,[B("div",null,[s[6]||(s[6]=B("strong",null,"First",-1)),zn(" "+tn(p.first),1)]),B("div",lge,[s[7]||(s[7]=B("strong",null,"Last",-1)),zn(" "+tn(p.last),1)])])]))),128))])]))}},uge={key:0,class:"train-reveal-overlay"},dge={__name:"TrainReveal",setup(e){const t=it(!0);return Dr(()=>{setTimeout(()=>{t.value=!1},4e3)}),(n,i)=>(Kt(),za(Ol,{name:"train-reveal"},{default:yi(()=>[t.value?(Kt(),an("div",uge,[...i[0]||(i[0]=[B("svg",{class:"reveal-mask",width:"100%",height:"100%"},[B("defs",null,[B("mask",{id:"headlightMask"},[B("rect",{width:"100%",height:"100%",fill:"white"}),B("circle",{cx:"35%",cy:"50%",r:"0",fill:"black"},[B("animate",{attributeName:"r",from:"0",to:"150%",dur:"1.5s",begin:"2.5s",fill:"freeze"})]),B("circle",{cx:"65%",cy:"50%",r:"0",fill:"black"},[B("animate",{attributeName:"r",from:"0",to:"150%",dur:"1.5s",begin:"2.5s",fill:"freeze"})])])]),B("rect",{width:"100%",height:"100%",fill:"#000",mask:"url(#headlightMask)"})],-1),B("div",{class:"headlight headlight-left"},null,-1),B("div",{class:"headlight headlight-right"},null,-1)])])):Si("",!0)]),_:1}))}},hge=_g(dge,[["__scopeId","data-v-ec0b13b9"]]),fge=""+new URL("../singatrain.png",import.meta.url).href,mge=["d","stroke"],pge={class:"content-wrapper"},gge={__name:"BackgroundLines",props:{className:{type:String,default:""},svgOptions:{type:Object,default:()=>({})}},setup(e){const t=e,n=["M720 450C720 450 742.459 440.315 755.249 425.626C768.039 410.937 778.88 418.741 789.478 401.499C800.076 384.258 817.06 389.269 826.741 380.436C836.423 371.603 851.957 364.826 863.182 356.242C874.408 347.657 877.993 342.678 898.867 333.214C919.741 323.75 923.618 319.88 934.875 310.177C946.133 300.474 960.784 300.837 970.584 287.701C980.384 274.564 993.538 273.334 1004.85 263.087C1016.15 252.84 1026.42 250.801 1038.22 242.1C1050.02 233.399 1065.19 230.418 1074.63 215.721C1084.07 201.024 1085.49 209.128 1112.65 194.884C1139.8 180.64 1132.49 178.205 1146.43 170.636C1160.37 163.066 1168.97 158.613 1181.46 147.982C1193.95 137.35 1191.16 131.382 1217.55 125.645C1243.93 119.907 1234.19 118.899 1254.53 100.846C1274.86 82.7922 1275.12 92.8914 1290.37 76.09C1305.62 59.2886 1313.91 62.1868 1323.19 56.7536C1332.48 51.3204 1347.93 42.8082 1361.95 32.1468C1375.96 21.4855 1374.06 25.168 1397.08 10.1863C1420.09 -4.79534 1421.41 -3.16992 1431.52 -15.0078","M720 450C720 450 741.044 435.759 753.062 410.636C765.079 385.514 770.541 386.148 782.73 370.489C794.918 354.83 799.378 353.188 811.338 332.597C823.298 312.005 825.578 306.419 843.707 295.493C861.837 284.568 856.194 273.248 877.376 256.48C898.558 239.713 887.536 227.843 909.648 214.958C931.759 202.073 925.133 188.092 941.063 177.621C956.994 167.151 952.171 154.663 971.197 135.041C990.222 115.418 990.785 109.375 999.488 96.1291C1008.19 82.8827 1011.4 82.2181 1032.65 61.8861C1053.9 41.5541 1045.74 48.0281 1064.01 19.5798C1082.29 -8.86844 1077.21 -3.89415 1093.7 -19.66C1110.18 -35.4258 1105.91 -46.1146 1127.68 -60.2834C1149.46 -74.4523 1144.37 -72.1024 1154.18 -97.6802C1163.99 -123.258 1165.6 -111.332 1186.21 -135.809C1206.81 -160.285 1203.29 -160.861 1220.31 -177.633C1237.33 -194.406 1236.97 -204.408 1250.42 -214.196","M720 450C720 450 712.336 437.768 690.248 407.156C668.161 376.544 672.543 394.253 665.951 365.784C659.358 337.316 647.903 347.461 636.929 323.197C625.956 298.933 626.831 303.639 609.939 281.01C593.048 258.381 598.7 255.282 582.342 242.504C565.985 229.726 566.053 217.66 559.169 197.116C552.284 176.572 549.348 171.846 529.347 156.529C509.345 141.211 522.053 134.054 505.192 115.653C488.33 97.2527 482.671 82.5627 473.599 70.7833C464.527 59.0039 464.784 50.2169 447 32.0721C429.215 13.9272 436.29 0.858563 423.534 -12.6868C410.777 -26.2322 407.424 -44.0808 394.364 -56.4916C381.303 -68.9024 373.709 -72.6804 365.591 -96.1992C357.473 -119.718 358.364 -111.509 338.222 -136.495C318.08 -161.481 322.797 -149.499 315.32 -181.761C307.843 -214.023 294.563 -202.561 285.795 -223.25C277.026 -243.94 275.199 -244.055 258.602 -263.871","M720 450C720 450 738.983 448.651 790.209 446.852C841.436 445.052 816.31 441.421 861.866 437.296C907.422 433.172 886.273 437.037 930.656 436.651C975.04 436.264 951.399 432.343 1001.57 425.74C1051.73 419.138 1020.72 425.208 1072.85 424.127C1124.97 423.047 1114.39 420.097 1140.02 414.426C1165.65 408.754 1173.1 412.143 1214.55 411.063C1256.01 409.983 1242.78 406.182 1285.56 401.536C1328.35 396.889 1304.66 400.796 1354.41 399.573C1404.16 398.35 1381.34 394.315 1428.34 389.376C1475.35 384.438 1445.96 386.509 1497.93 385.313C1549.9 384.117 1534.63 382.499 1567.23 381.48","M720 450C720 450 696.366 458.841 682.407 472.967C668.448 487.093 673.23 487.471 647.919 492.882C622.608 498.293 636.85 499.899 609.016 512.944C581.182 525.989 596.778 528.494 571.937 533.778C547.095 539.062 551.762 548.656 536.862 556.816C521.962 564.975 515.626 563.279 497.589 575.159C479.552 587.04 484.343 590.435 461.111 598.728C437.879 607.021 442.512 605.226 423.603 618.397C404.694 631.569 402.411 629.541 390.805 641.555C379.2 653.568 369.754 658.175 353.238 663.929C336.722 669.683 330.161 674.689 312.831 684.116C295.5 693.543 288.711 698.815 278.229 704.041C267.747 709.267 258.395 712.506 240.378 726.65C222.361 740.795 230.097 738.379 203.447 745.613C176.797 752.847 193.747 752.523 166.401 767.148C139.056 781.774 151.342 783.641 130.156 791.074C108.97 798.507 116.461 802.688 96.0974 808.817C75.7334 814.946 83.8553 819.505 59.4513 830.576C35.0473 841.648 48.2548 847.874 21.8337 853.886C-4.58739 859.898 10.5966 869.102 -16.396 874.524","M720 450C720 450 695.644 482.465 682.699 506.197C669.755 529.929 671.059 521.996 643.673 556.974C616.286 591.951 625.698 590.8 606.938 615.255C588.178 639.71 592.715 642.351 569.76 665.92C546.805 689.49 557.014 687.498 538.136 722.318C519.258 757.137 520.671 760.818 503.256 774.428C485.841 788.038 491.288 790.063 463.484 831.358C435.681 872.653 437.554 867.001 425.147 885.248C412.74 903.495 411.451 911.175 389.505 934.331C367.559 957.486 375.779 966.276 352.213 990.918C328.647 1015.56 341.908 1008.07 316.804 1047.24C291.699 1086.42 301.938 1060.92 276.644 1100.23C251.349 1139.54 259.792 1138.78 243.151 1153.64","M719.974 450C719.974 450 765.293 459.346 789.305 476.402C813.318 493.459 825.526 487.104 865.093 495.586C904.659 504.068 908.361 510.231 943.918 523.51C979.475 536.789 963.13 535.277 1009.79 547.428C1056.45 559.579 1062.34 555.797 1089.82 568.96C1117.31 582.124 1133.96 582.816 1159.12 592.861C1184.28 602.906 1182.84 603.359 1233.48 614.514C1284.12 625.67 1254.63 632.207 1306.33 644.465C1358.04 656.723 1359.27 656.568 1378.67 670.21C1398.07 683.852 1406.16 676.466 1456.34 692.827C1506.51 709.188 1497.73 708.471 1527.54 715.212","M720 450C720 450 727.941 430.821 734.406 379.251C740.87 327.681 742.857 359.402 757.864 309.798C772.871 260.194 761.947 271.093 772.992 244.308C784.036 217.524 777.105 200.533 786.808 175.699C796.511 150.864 797.141 144.333 808.694 107.307C820.247 70.2821 812.404 88.4169 819.202 37.1016C826 -14.2137 829.525 -0.990829 839.341 -30.3874C849.157 -59.784 844.404 -61.5924 855.042 -98.7516C865.68 -135.911 862.018 -144.559 876.924 -167.488C891.83 -190.418 886.075 -213.535 892.87 -237.945C899.664 -262.355 903.01 -255.031 909.701 -305.588C916.393 -356.144 917.232 -330.612 925.531 -374.777","M720 450C720 450 722.468 499.363 726.104 520.449C729.739 541.535 730.644 550.025 738.836 589.07C747.028 628.115 743.766 639.319 746.146 659.812C748.526 680.306 754.006 693.598 757.006 732.469C760.007 771.34 760.322 765.244 763.893 805.195C767.465 845.146 769.92 822.227 773.398 868.469C776.875 914.71 776.207 901.365 778.233 940.19C780.259 979.015 782.53 990.477 787.977 1010.39C793.424 1030.3 791.788 1060.01 797.243 1082.24C802.698 1104.47 801.758 1130.29 808.181 1149.64C814.604 1168.99 813.135 1171.5 818.026 1225.28C822.918 1279.06 820.269 1267.92 822.905 1293.75","M720 450C720 450 737.033 492.46 757.251 515.772C777.468 539.084 768.146 548.687 785.517 570.846C802.887 593.005 814.782 609.698 824.589 634.112C834.395 658.525 838.791 656.702 855.55 695.611C872.31 734.519 875.197 724.854 890.204 764.253C905.21 803.653 899.844 790.872 919.927 820.763C940.01 850.654 939.071 862.583 954.382 886.946C969.693 911.309 968.683 909.254 993.997 945.221C1019.31 981.187 1006.67 964.436 1023.49 1007.61C1040.32 1050.79 1046.15 1038.25 1059.01 1073.05C1071.88 1107.86 1081.39 1096.19 1089.45 1131.96C1097.51 1167.73 1106.52 1162.12 1125.77 1196.89","M720 450C720 450 687.302 455.326 670.489 467.898C653.676 480.47 653.159 476.959 626.58 485.127C600.002 493.295 599.626 495.362 577.94 503.841C556.254 512.319 556.35 507.426 533.958 517.44C511.566 527.454 505.82 526.441 486.464 539.172C467.108 551.904 461.312 546.36 439.357 553.508C417.402 560.657 406.993 567.736 389.393 572.603C371.794 577.47 371.139 583.76 344.54 587.931C317.941 592.102 327.375 593.682 299.411 607.275C271.447 620.868 283.617 615.022 249.868 622.622C216.119 630.223 227.07 630.86 203.77 638.635C180.47 646.41 168.948 652.487 156.407 657.28C143.866 662.073 132.426 669.534 110.894 675.555C89.3615 681.575 90.3234 680.232 61.1669 689.897C32.0105 699.562 34.3696 702.021 15.9011 709.789C-2.56738 717.558 2.38861 719.841 -29.9494 729.462C-62.2873 739.083 -52.5552 738.225 -77.4307 744.286","M720 450C720 450 743.97 465.061 754.884 490.648C765.798 516.235 781.032 501.34 791.376 525.115C801.72 548.889 808.417 538.333 829.306 564.807C850.195 591.281 852.336 582.531 865.086 601.843C877.835 621.155 874.512 621.773 902.383 643.857C930.255 665.94 921.885 655.976 938.025 681.74C954.164 707.505 959.384 709.719 977.273 720.525C995.162 731.33 994.233 731.096 1015.92 757.676C1037.61 784.257 1025.74 768.848 1047.82 795.343C1069.91 821.837 1065.95 815.45 1085.93 834.73C1105.91 854.009 1110.53 848.089 1124.97 869.759C1139.4 891.428 1140.57 881.585 1158.53 911.499C1176.5 941.414 1184.96 933.829 1194.53 948.792C1204.09 963.755 1221.35 973.711 1232.08 986.224C1242.8 998.738 1257.34 1015.61 1269.99 1026.53C1282.63 1037.45 1293.81 1040.91 1307.21 1064.56","M720 450C720 450 718.24 412.717 716.359 397.31C714.478 381.902 713.988 362.237 710.785 344.829C707.582 327.42 708.407 322.274 701.686 292.106C694.965 261.937 699.926 270.857 694.84 240.765C689.753 210.674 693.055 217.076 689.674 184.902C686.293 152.728 686.041 149.091 682.676 133.657C679.311 118.223 682.23 106.005 681.826 80.8297C681.423 55.6545 677.891 60.196 675.66 30.0226C673.429 -0.150848 672.665 -7.94842 668.592 -26.771C664.52 -45.5935 664.724 -43.0755 661.034 -78.7766C657.343 -114.478 658.509 -103.181 653.867 -133.45C649.226 -163.719 650.748 -150.38 647.052 -182.682C643.357 -214.984 646.125 -214.921 645.216 -238.402C644.307 -261.883 640.872 -253.4 637.237 -291.706C633.602 -330.012 634.146 -309.868 630.717 -343.769C627.288 -377.669 628.008 -370.682 626.514 -394.844","M720 450C720 450 730.384 481.55 739.215 507.557C748.047 533.564 751.618 537.619 766.222 562.033C780.825 586.447 774.187 582.307 787.606 618.195C801.025 654.082 793.116 653.536 809.138 678.315C825.16 703.095 815.485 717.073 829.898 735.518C844.311 753.964 845.351 773.196 852.197 786.599C859.042 800.001 862.876 805.65 872.809 845.974C882.742 886.297 885.179 874.677 894.963 903.246C904.747 931.816 911.787 924.243 921.827 961.809C931.867 999.374 927.557 998.784 940.377 1013.59C953.197 1028.4 948.555 1055.77 966.147 1070.54C983.739 1085.31 975.539 1105.69 988.65 1125.69C1001.76 1145.69 1001.82 1141.59 1007.54 1184.37C1013.27 1227.15 1018.98 1198.8 1029.67 1241.58","M720 450C720 450 684.591 447.135 657.288 439.014C629.985 430.894 618.318 435.733 600.698 431.723C583.077 427.714 566.975 425.639 537.839 423.315C508.704 420.991 501.987 418.958 476.29 413.658C450.592 408.359 460.205 410.268 416.97 408.927C373.736 407.586 396.443 401.379 359.262 396.612C322.081 391.844 327.081 393.286 300.224 391.917C273.368 390.547 264.902 385.49 241.279 382.114C217.655 378.739 205.497 378.95 181.98 377.253C158.464 375.556 150.084 369.938 117.474 366.078C84.8644 362.218 81.5401 361.501 58.8734 358.545C36.2067 355.59 33.6442 351.938 -3.92281 346.728C-41.4898 341.519 -18.6466 345.082 -61.4654 341.179C-104.284 337.275 -102.32 338.048 -121.821 332.369","M720 450C720 450 714.384 428.193 708.622 410.693C702.86 393.193 705.531 397.066 703.397 372.66C701.264 348.254 697.8 345.181 691.079 330.466C684.357 315.751 686.929 312.356 683.352 292.664C679.776 272.973 679.079 273.949 674.646 255.07C670.213 236.192 670.622 244.371 665.271 214.561C659.921 184.751 659.864 200.13 653.352 172.377C646.841 144.623 647.767 151.954 644.123 136.021C640.48 120.088 638.183 107.491 636.127 96.8178C634.072 86.1443 632.548 77.5871 626.743 54.0492C620.938 30.5112 622.818 28.9757 618.613 16.577C614.407 4.17831 615.555 -13.1527 608.752 -24.5691C601.95 -35.9855 603.375 -51.0511 599.526 -60.1492C595.678 -69.2472 593.676 -79.3623 587.865 -100.431C582.053 -121.5 584.628 -117.913 578.882 -139.408C573.137 -160.903 576.516 -161.693 571.966 -182.241C567.416 -202.789 567.42 -198.681 562.834 -218.28C558.248 -237.879 555.335 -240.47 552.072 -260.968C548.808 -281.466 547.605 -280.956 541.772 -296.427C535.94 -311.898 537.352 -315.211 535.128 -336.018C532.905 -356.826 531.15 -360.702 524.129 -377.124","M720 450C720 450 711.433 430.82 707.745 409.428C704.056 388.035 704.937 381.711 697.503 370.916C690.069 360.121 691.274 359.999 685.371 334.109C679.469 308.22 677.496 323.883 671.24 294.303C664.984 264.724 667.608 284.849 662.065 258.116C656.522 231.383 656.357 229.024 647.442 216.172C638.527 203.319 640.134 192.925 635.555 178.727C630.976 164.529 630.575 150.179 624.994 139.987C619.413 129.794 615.849 112.779 612.251 103.074C608.654 93.3696 606.942 85.6729 603.041 63.0758C599.14 40.4787 595.242 36.9267 589.533 23.8967C583.823 10.8666 581.18 -2.12401 576.96 -14.8333C572.739 -27.5425 572.696 -37.7703 568.334 -51.3441C563.972 -64.9179 562.14 -67.2124 556.992 -93.299C551.844 -119.386 550.685 -109.743 544.056 -129.801C537.428 -149.859 534.97 -151.977 531.034 -170.076C527.099 -188.175 522.979 -185.119 519.996 -207.061C517.012 -229.004 511.045 -224.126 507.478 -247.077C503.912 -270.029 501.417 -271.033 495.534 -287C489.651 -302.968 491.488 -300.977 484.68 -326.317C477.872 -351.657 476.704 -348.494 472.792 -363.258","M720 450C720 450 723.524 466.673 728.513 497.319C733.503 527.964 731.894 519.823 740.001 542.706C748.108 565.589 744.225 560.598 748.996 588.365C753.766 616.131 756.585 602.096 761.881 636.194C767.178 670.293 768.155 649.089 771.853 679.845C775.551 710.6 775.965 703.738 781.753 724.555C787.54 745.372 787.248 758.418 791.422 773.79C795.596 789.162 798.173 807.631 804.056 819.914C809.938 832.197 806.864 843.07 811.518 865.275C816.171 887.48 816.551 892.1 822.737 912.643C828.922 933.185 830.255 942.089 833.153 956.603C836.052 971.117 839.475 969.242 846.83 1003.98C854.185 1038.71 850.193 1028.86 854.119 1048.67C858.045 1068.48 857.963 1074.39 863.202 1094.94C868.44 1115.49 867.891 1108.03 874.497 1138.67C881.102 1169.31 880.502 1170.72 887.307 1186.56C894.111 1202.4 890.388 1209.75 896.507 1231.25C902.627 1252.76 902.54 1245.39 906.742 1279.23","M720 450C720 450 698.654 436.893 669.785 424.902C640.916 412.91 634.741 410.601 615.568 402.586C596.396 394.571 594.829 395.346 568.66 378.206C542.492 361.067 547.454 359.714 514.087 348.978C480.721 338.242 479.79 334.731 467.646 329.846C455.502 324.96 448.63 312.156 416.039 303.755C383.448 295.354 391.682 293.73 365.021 280.975C338.36 268.219 328.715 267.114 309.809 252.575C290.903 238.036 277.185 246.984 259.529 230.958C241.873 214.931 240.502 224.403 211.912 206.241C183.323 188.078 193.288 190.89 157.03 181.714C120.772 172.538 127.621 170.109 108.253 154.714C88.8857 139.319 75.4927 138.974 56.9647 132.314C38.4366 125.654 33.8997 118.704 4.77584 106.7C-24.348 94.6959 -19.1326 90.266 -46.165 81.9082","M720 450C720 450 711.596 475.85 701.025 516.114C690.455 556.378 697.124 559.466 689.441 579.079C681.758 598.693 679.099 597.524 675.382 642.732C671.665 687.94 663.4 677.024 657.844 700.179C652.288 723.333 651.086 724.914 636.904 764.536C622.723 804.158 631.218 802.853 625.414 827.056C619.611 851.259 613.734 856.28 605.94 892.262C598.146 928.244 595.403 924.314 588.884 957.785C582.364 991.255 583.079 991.176 575.561 1022.63C568.044 1054.08 566.807 1058.45 558.142 1084.32C549.476 1110.2 553.961 1129.13 542.367 1149.25C530.772 1169.37 538.268 1180.37 530.338 1207.27C522.407 1234.17 520.826 1245.53 512.156 1274.2","M720 450C720 450 730.571 424.312 761.424 411.44C792.277 398.569 772.385 393.283 804.069 377.232C835.752 361.182 829.975 361.373 848.987 342.782C867.999 324.192 877.583 330.096 890.892 303.897C904.201 277.698 910.277 282.253 937.396 264.293C964.514 246.333 949.357 246.834 978.7 230.438C1008.04 214.042 990.424 217.952 1021.51 193.853C1052.6 169.753 1054.28 184.725 1065.97 158.075C1077.65 131.425 1087.76 139.068 1111.12 120.345C1134.49 101.622 1124.9 104.858 1151.67 86.3162C1178.43 67.7741 1167.09 66.2676 1197.53 47.2606C1227.96 28.2536 1225.78 23.2186 1239.27 12.9649C1252.76 2.7112 1269.32 -9.47929 1282.88 -28.5587C1296.44 -47.6381 1305.81 -41.3853 1323.82 -62.7027C1341.83 -84.0202 1340.32 -82.3794 1368.98 -98.9326"],i=["#46A5CA","#8C2F2F","#4FAE4D","#D6590C","#811010","#247AFB","#A534A0","#A8A438","#D6590C","#46A29C","#670F6D","#D7C200","#59BBEB","#504F1C","#55BC54","#4D3568","#9F39A5","#363636","#860909","#6A286F","#604483"],r=it(0),a=me(()=>{const s=n.map((v,x)=>({path:v,color:i[x%i.length]})),p=n.map((v,x)=>({path:v,color:i[x%i.length]}));return[...s,...p]}),l=it([]);function h(s){var T;const p=((T=t.svgOptions)==null?void 0:T.duration)||10,v=l.value[s]||0,x=Math.floor(Math.random()*10+2);return{"--duration":`${p}s`,"--delay":`${v}s`,"--repeat-delay":`${x}s`,animationDelay:`${v}s`,animationDuration:`${p}s`}}return Dr(()=>{l.value=a.value.map(()=>Math.floor(Math.random()*10)),setTimeout(()=>{r.value=1},100)}),(s,p)=>(Kt(),an("div",{class:Tt(["background-lines",e.className])},[(Kt(),an("svg",{class:"lines-svg",viewBox:"0 0 1440 900",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Yt({opacity:r.value})},[(Kt(!0),an(ln,null,us(a.value,(v,x)=>(Kt(),an("path",{key:`path-${x}`,d:v.path,stroke:v.color,"stroke-width":"2.3","stroke-linecap":"round",style:Yt(h(x)),class:"animated-path"},null,12,mge))),128))],4)),B("div",pge,[UW(s.$slots,"default",{},void 0)])],2))}},vge=_g(gge,[["__scopeId","data-v-9f502bed"]]),_ge={__name:"LoadingPage",emits:["loaded"],setup(e,{emit:t}){const n=it(!0),i=t;function r(){n.value=!1,i("loaded")}return(a,l)=>(Kt(),za(Ol,{name:"loading-fade"},{default:yi(()=>[n.value?(Kt(),an("div",{key:0,class:"loading-page",onClick:r},[ue(vge,{class:"flex items-center justify-center w-full flex-col px-4"},{default:yi(()=>[...l[0]||(l[0]=[B("img",{src:fge,alt:"SingaTrain",class:"loading-logo"},null,-1),B("p",{class:"loading-subtitle"}," Your Singapore MRT companion ",-1),B("p",{class:"loading-hint"}," Click anywhere to continue ",-1)])]),_:1})])):Si("",!0)]),_:1}))}},yge=_g(_ge,[["__scopeId","data-v-9e92b157"]]),bge={key:1},xge={class:"container main-content"},wge={__name:"App",setup(e){const{state:t}=Zv(),n=it(!1);function i(){n.value=!0}const r={dashboard:H5,live:wne,route:Lae,fare:cme,meetup:_pe,profile:qpe,firstLast:cge},a=me(()=>r[t.activeTab]||H5);function l(){if(!I1)return;const h=document.querySelectorAll(".dashboard-view .section-card"),s=document.querySelectorAll(".section-card:not(.dashboard-view .section-card)");h.forEach(p=>{I1.set(p,{opacity:1,visibility:"visible",display:"block"})}),s.length>0&&I1.from(s,{opacity:0,duration:.35,ease:"power2.out"})}return Dr(()=>{Wx&&Wx.init({once:!0,duration:550,easing:"ease-out"}),Gn(()=>{const h=document.querySelectorAll(".section-card");h.forEach(v=>{v.removeAttribute("data-aos"),v.removeAttribute("data-aos-delay"),v.removeAttribute("data-aos-duration"),v.removeAttribute("data-aos-easing")});const s=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");s.forEach(v=>{v.style.opacity="1",v.style.visibility="visible",v.style.display="block",v.style.transform="none"}),l();const p=()=>{h.forEach(v=>{v.style.setProperty("margin-top","0","important"),v.style.setProperty("margin-bottom","0","important"),v.style.marginTop="0",v.style.marginBottom="0"}),s.forEach(v=>{v.style.opacity="1",v.style.visibility="visible",v.style.display="block"})};p(),setTimeout(p,100),setTimeout(p,600)})}),Zt(()=>t.activeTab,()=>{Gn(()=>{const h=document.querySelectorAll(".section-card");h.forEach(v=>{v.removeAttribute("data-aos"),v.removeAttribute("data-aos-delay"),v.removeAttribute("data-aos-duration"),v.removeAttribute("data-aos-easing")});const s=document.querySelectorAll(".dashboard-view .section-card, .dashboard-view [data-aos]");s.forEach(v=>{v.style.opacity="1",v.style.visibility="visible",v.style.display="block",v.style.transform="none"}),Wx&&Wx.refresh(),l();const p=()=>{h.forEach(v=>{v.style.setProperty("margin-top","0","important"),v.style.setProperty("margin-bottom","0","important"),v.style.marginTop="0",v.style.marginBottom="0"}),s.forEach(v=>{v.style.opacity="1",v.style.visibility="visible",v.style.display="block"})};p(),setTimeout(p,100),setTimeout(p,600)})}),(h,s)=>(Kt(),an(ln,null,[n.value?Si("",!0):(Kt(),za(yge,{key:0,onLoaded:i})),n.value?(Kt(),an("div",bge,[ue(hge),B("div",null,[s[0]||(s[0]=B("div",{class:"video-background"},[B("video",{autoplay:"",muted:"",loop:"",playsinline:"",class:"bg-video"},[B("source",{src:r6,type:"video/mp4"})]),B("div",{class:"video-overlay"})],-1)),ue(Nq),B("main",xge,[ue(Ol,{name:"fade-slide",mode:"out-in"},{default:yi(()=>[(Kt(),za(OW,{include:"RoutePlanner"},[(Kt(),za(CB(a.value),{key:Ti(t).activeTab}))],1024))]),_:1})])])])):Si("",!0)],64))}};var Z1={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Tge=Z1.exports,xV;function Sge(){return xV||(xV=1,(function(e,t){(function(n,i){e.exports=i()})(Tge,function(){const n=new Map,i={set(ve,z,se){n.has(ve)||n.set(ve,new Map);const Me=n.get(ve);Me.has(z)||Me.size===0?Me.set(z,se):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(Me.keys())[0]}.`)},get:(ve,z)=>n.has(ve)&&n.get(ve).get(z)||null,remove(ve,z){if(!n.has(ve))return;const se=n.get(ve);se.delete(z),se.size===0&&n.delete(ve)}},r="transitionend",a=ve=>(ve&&window.CSS&&window.CSS.escape&&(ve=ve.replace(/#([^\s"#']+)/g,(z,se)=>`#${CSS.escape(se)}`)),ve),l=ve=>ve==null?`${ve}`:Object.prototype.toString.call(ve).match(/\s([a-z]+)/i)[1].toLowerCase(),h=ve=>{ve.dispatchEvent(new Event(r))},s=ve=>!(!ve||typeof ve!="object")&&(ve.jquery!==void 0&&(ve=ve[0]),ve.nodeType!==void 0),p=ve=>s(ve)?ve.jquery?ve[0]:ve:typeof ve=="string"&&ve.length>0?document.querySelector(a(ve)):null,v=ve=>{if(!s(ve)||ve.getClientRects().length===0)return!1;const z=getComputedStyle(ve).getPropertyValue("visibility")==="visible",se=ve.closest("details:not([open])");if(!se)return z;if(se!==ve){const Me=ve.closest("summary");if(Me&&Me.parentNode!==se||Me===null)return!1}return z},x=ve=>!ve||ve.nodeType!==Node.ELEMENT_NODE||!!ve.classList.contains("disabled")||(ve.disabled!==void 0?ve.disabled:ve.hasAttribute("disabled")&&ve.getAttribute("disabled")!=="false"),T=ve=>{if(!document.documentElement.attachShadow)return null;if(typeof ve.getRootNode=="function"){const z=ve.getRootNode();return z instanceof ShadowRoot?z:null}return ve instanceof ShadowRoot?ve:ve.parentNode?T(ve.parentNode):null},C=()=>{},I=ve=>{ve.offsetHeight},P=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,D=[],F=()=>document.documentElement.dir==="rtl",V=ve=>{var z;z=()=>{const se=P();if(se){const Me=ve.NAME,_=se.fn[Me];se.fn[Me]=ve.jQueryInterface,se.fn[Me].Constructor=ve,se.fn[Me].noConflict=()=>(se.fn[Me]=_,ve.jQueryInterface)}},document.readyState==="loading"?(D.length||document.addEventListener("DOMContentLoaded",()=>{for(const se of D)se()}),D.push(z)):z()},H=(ve,z=[],se=ve)=>typeof ve=="function"?ve.call(...z):se,q=(ve,z,se=!0)=>{if(!se)return void H(ve);const Me=(m=>{if(!m)return 0;let{transitionDuration:y,transitionDelay:S}=window.getComputedStyle(m);const k=Number.parseFloat(y),R=Number.parseFloat(S);return k||R?(y=y.split(",")[0],S=S.split(",")[0],1e3*(Number.parseFloat(y)+Number.parseFloat(S))):0})(z)+5;let _=!1;const u=({target:m})=>{m===z&&(_=!0,z.removeEventListener(r,u),H(ve))};z.addEventListener(r,u),setTimeout(()=>{_||h(z)},Me)},K=(ve,z,se,Me)=>{const _=ve.length;let u=ve.indexOf(z);return u===-1?!se&&Me?ve[_-1]:ve[0]:(u+=se?1:-1,Me&&(u=(u+_)%_),ve[Math.max(0,Math.min(u,_-1))])},ie=/[^.]*(?=\..*)\.|.*/,X=/\..*/,$=/::\d+$/,G={};let j=1;const te={mouseenter:"mouseover",mouseleave:"mouseout"},Z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ee(ve,z){return z&&`${z}::${j++}`||ve.uidEvent||j++}function be(ve){const z=ee(ve);return ve.uidEvent=z,G[z]=G[z]||{},G[z]}function Ie(ve,z,se=null){return Object.values(ve).find(Me=>Me.callable===z&&Me.delegationSelector===se)}function Ve(ve,z,se){const Me=typeof z=="string",_=Me?se:z||se;let u=$e(ve);return Z.has(u)||(u=ve),[Me,_,u]}function Ke(ve,z,se,Me,_){if(typeof z!="string"||!ve)return;let[u,m,y]=Ve(z,se,Me);z in te&&(m=(J=>function(ae){if(!ae.relatedTarget||ae.relatedTarget!==ae.delegateTarget&&!ae.delegateTarget.contains(ae.relatedTarget))return J.call(this,ae)})(m));const S=be(ve),k=S[y]||(S[y]={}),R=Ie(k,m,u?se:null);if(R)return void(R.oneOff=R.oneOff&&_);const O=ee(m,z.replace(ie,"")),U=u?(function(Y,J,ae){return function pe(Te){const ke=Y.querySelectorAll(J);for(let{target:Se}=Te;Se&&Se!==this;Se=Se.parentNode)for(const Ae of ke)if(Ae===Se)return We(Te,{delegateTarget:Se}),pe.oneOff&&Ee.off(Y,Te.type,J,ae),ae.apply(Se,[Te])}})(ve,se,m):(function(Y,J){return function ae(pe){return We(pe,{delegateTarget:Y}),ae.oneOff&&Ee.off(Y,pe.type,J),J.apply(Y,[pe])}})(ve,m);U.delegationSelector=u?se:null,U.callable=m,U.oneOff=_,U.uidEvent=O,k[O]=U,ve.addEventListener(y,U,u)}function Xe(ve,z,se,Me,_){const u=Ie(z[se],Me,_);u&&(ve.removeEventListener(se,u,!!_),delete z[se][u.uidEvent])}function Pe(ve,z,se,Me){const _=z[se]||{};for(const[u,m]of Object.entries(_))u.includes(Me)&&Xe(ve,z,se,m.callable,m.delegationSelector)}function $e(ve){return ve=ve.replace(X,""),te[ve]||ve}const Ee={on(ve,z,se,Me){Ke(ve,z,se,Me,!1)},one(ve,z,se,Me){Ke(ve,z,se,Me,!0)},off(ve,z,se,Me){if(typeof z!="string"||!ve)return;const[_,u,m]=Ve(z,se,Me),y=m!==z,S=be(ve),k=S[m]||{},R=z.startsWith(".");if(u===void 0){if(R)for(const O of Object.keys(S))Pe(ve,S,O,z.slice(1));for(const[O,U]of Object.entries(k)){const Y=O.replace($,"");y&&!z.includes(Y)||Xe(ve,S,m,U.callable,U.delegationSelector)}}else{if(!Object.keys(k).length)return;Xe(ve,S,m,u,_?se:null)}},trigger(ve,z,se){if(typeof z!="string"||!ve)return null;const Me=P();let _=null,u=!0,m=!0,y=!1;z!==$e(z)&&Me&&(_=Me.Event(z,se),Me(ve).trigger(_),u=!_.isPropagationStopped(),m=!_.isImmediatePropagationStopped(),y=_.isDefaultPrevented());const S=We(new Event(z,{bubbles:u,cancelable:!0}),se);return y&&S.preventDefault(),m&&ve.dispatchEvent(S),S.defaultPrevented&&_&&_.preventDefault(),S}};function We(ve,z={}){for(const[se,Me]of Object.entries(z))try{ve[se]=Me}catch{Object.defineProperty(ve,se,{configurable:!0,get:()=>Me})}return ve}function Ze(ve){if(ve==="true")return!0;if(ve==="false")return!1;if(ve===Number(ve).toString())return Number(ve);if(ve===""||ve==="null")return null;if(typeof ve!="string")return ve;try{return JSON.parse(decodeURIComponent(ve))}catch{return ve}}function ct(ve){return ve.replace(/[A-Z]/g,z=>`-${z.toLowerCase()}`)}const kt={setDataAttribute(ve,z,se){ve.setAttribute(`data-bs-${ct(z)}`,se)},removeDataAttribute(ve,z){ve.removeAttribute(`data-bs-${ct(z)}`)},getDataAttributes(ve){if(!ve)return{};const z={},se=Object.keys(ve.dataset).filter(Me=>Me.startsWith("bs")&&!Me.startsWith("bsConfig"));for(const Me of se){let _=Me.replace(/^bs/,"");_=_.charAt(0).toLowerCase()+_.slice(1),z[_]=Ze(ve.dataset[Me])}return z},getDataAttribute:(ve,z)=>Ze(ve.getAttribute(`data-bs-${ct(z)}`))};class Nt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(z){return z=this._mergeConfigObj(z),z=this._configAfterMerge(z),this._typeCheckConfig(z),z}_configAfterMerge(z){return z}_mergeConfigObj(z,se){const Me=s(se)?kt.getDataAttribute(se,"config"):{};return{...this.constructor.Default,...typeof Me=="object"?Me:{},...s(se)?kt.getDataAttributes(se):{},...typeof z=="object"?z:{}}}_typeCheckConfig(z,se=this.constructor.DefaultType){for(const[Me,_]of Object.entries(se)){const u=z[Me],m=s(u)?"element":l(u);if(!new RegExp(_).test(m))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Me}" provided type "${m}" but expected type "${_}".`)}}}class ot extends Nt{constructor(z,se){super(),(z=p(z))&&(this._element=z,this._config=this._getConfig(se),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),Ee.off(this._element,this.constructor.EVENT_KEY);for(const z of Object.getOwnPropertyNames(this))this[z]=null}_queueCallback(z,se,Me=!0){q(z,se,Me)}_getConfig(z){return z=this._mergeConfigObj(z,this._element),z=this._configAfterMerge(z),this._typeCheckConfig(z),z}static getInstance(z){return i.get(p(z),this.DATA_KEY)}static getOrCreateInstance(z,se={}){return this.getInstance(z)||new this(z,typeof se=="object"?se:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(z){return`${z}${this.EVENT_KEY}`}}const dt=ve=>{let z=ve.getAttribute("data-bs-target");if(!z||z==="#"){let se=ve.getAttribute("href");if(!se||!se.includes("#")&&!se.startsWith("."))return null;se.includes("#")&&!se.startsWith("#")&&(se=`#${se.split("#")[1]}`),z=se&&se!=="#"?se.trim():null}return z?z.split(",").map(se=>a(se)).join(","):null},Je={find:(ve,z=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(z,ve)),findOne:(ve,z=document.documentElement)=>Element.prototype.querySelector.call(z,ve),children:(ve,z)=>[].concat(...ve.children).filter(se=>se.matches(z)),parents(ve,z){const se=[];let Me=ve.parentNode.closest(z);for(;Me;)se.push(Me),Me=Me.parentNode.closest(z);return se},prev(ve,z){let se=ve.previousElementSibling;for(;se;){if(se.matches(z))return[se];se=se.previousElementSibling}return[]},next(ve,z){let se=ve.nextElementSibling;for(;se;){if(se.matches(z))return[se];se=se.nextElementSibling}return[]},focusableChildren(ve){const z=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(se=>`${se}:not([tabindex^="-"])`).join(",");return this.find(z,ve).filter(se=>!x(se)&&v(se))},getSelectorFromElement(ve){const z=dt(ve);return z&&Je.findOne(z)?z:null},getElementFromSelector(ve){const z=dt(ve);return z?Je.findOne(z):null},getMultipleElementsFromSelector(ve){const z=dt(ve);return z?Je.find(z):[]}},yt=(ve,z="hide")=>{const se=`click.dismiss${ve.EVENT_KEY}`,Me=ve.NAME;Ee.on(document,se,`[data-bs-dismiss="${Me}"]`,function(_){if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),x(this))return;const u=Je.getElementFromSelector(this)||this.closest(`.${Me}`);ve.getOrCreateInstance(u)[z]()})},Ne=".bs.alert",le=`close${Ne}`,we=`closed${Ne}`;class _e extends ot{static get NAME(){return"alert"}close(){if(Ee.trigger(this._element,le).defaultPrevented)return;this._element.classList.remove("show");const z=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,z)}_destroyElement(){this._element.remove(),Ee.trigger(this._element,we),this.dispose()}static jQueryInterface(z){return this.each(function(){const se=_e.getOrCreateInstance(this);if(typeof z=="string"){if(se[z]===void 0||z.startsWith("_")||z==="constructor")throw new TypeError(`No method named "${z}"`);se[z](this)}})}}yt(_e,"close"),V(_e);const fe='[data-bs-toggle="button"]';class Fe extends ot{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(z){return this.each(function(){const se=Fe.getOrCreateInstance(this);z==="toggle"&&se[z]()})}}Ee.on(document,"click.bs.button.data-api",fe,ve=>{ve.preventDefault();const z=ve.target.closest(fe);Fe.getOrCreateInstance(z).toggle()}),V(Fe);const rt=".bs.swipe",pt=`touchstart${rt}`,vt=`touchmove${rt}`,gt=`touchend${rt}`,mt=`pointerdown${rt}`,Vt=`pointerup${rt}`,Gt={endCallback:null,leftCallback:null,rightCallback:null},gn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class In extends Nt{constructor(z,se){super(),this._element=z,z&&In.isSupported()&&(this._config=this._getConfig(se),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Gt}static get DefaultType(){return gn}static get NAME(){return"swipe"}dispose(){Ee.off(this._element,rt)}_start(z){this._supportPointerEvents?this._eventIsPointerPenTouch(z)&&(this._deltaX=z.clientX):this._deltaX=z.touches[0].clientX}_end(z){this._eventIsPointerPenTouch(z)&&(this._deltaX=z.clientX-this._deltaX),this._handleSwipe(),H(this._config.endCallback)}_move(z){this._deltaX=z.touches&&z.touches.length>1?0:z.touches[0].clientX-this._deltaX}_handleSwipe(){const z=Math.abs(this._deltaX);if(z<=40)return;const se=z/this._deltaX;this._deltaX=0,se&&H(se>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ee.on(this._element,mt,z=>this._start(z)),Ee.on(this._element,Vt,z=>this._end(z)),this._element.classList.add("pointer-event")):(Ee.on(this._element,pt,z=>this._start(z)),Ee.on(this._element,vt,z=>this._move(z)),Ee.on(this._element,gt,z=>this._end(z)))}_eventIsPointerPenTouch(z){return this._supportPointerEvents&&(z.pointerType==="pen"||z.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const On=".bs.carousel",qn=".data-api",zt="ArrowLeft",un="ArrowRight",An="next",Ln="prev",wi="left",hi="right",fs=`slide${On}`,Ji=`slid${On}`,Tr=`keydown${On}`,Wo=`mouseenter${On}`,Eo=`mouseleave${On}`,Uc=`dragstart${On}`,Ue=`load${On}${qn}`,ge=`click${On}${qn}`,ye="carousel",ze="active",Qe=".active",at=".carousel-item",wt=Qe+at,bt={[zt]:hi,[un]:wi},st={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Pt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class rn extends ot{constructor(z,se){super(z,se),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Je.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ye&&this.cycle()}static get Default(){return st}static get DefaultType(){return Pt}static get NAME(){return"carousel"}next(){this._slide(An)}nextWhenVisible(){!document.hidden&&v(this._element)&&this.next()}prev(){this._slide(Ln)}pause(){this._isSliding&&h(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ee.one(this._element,Ji,()=>this.cycle()):this.cycle())}to(z){const se=this._getItems();if(z>se.length-1||z<0)return;if(this._isSliding)return void Ee.one(this._element,Ji,()=>this.to(z));const Me=this._getItemIndex(this._getActive());if(Me===z)return;const _=z>Me?An:Ln;this._slide(_,se[z])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(z){return z.defaultInterval=z.interval,z}_addEventListeners(){this._config.keyboard&&Ee.on(this._element,Tr,z=>this._keydown(z)),this._config.pause==="hover"&&(Ee.on(this._element,Wo,()=>this.pause()),Ee.on(this._element,Eo,()=>this._maybeEnableCycle())),this._config.touch&&In.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const se of Je.find(".carousel-item img",this._element))Ee.on(se,Uc,Me=>Me.preventDefault());const z={leftCallback:()=>this._slide(this._directionToOrder(wi)),rightCallback:()=>this._slide(this._directionToOrder(hi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new In(this._element,z)}_keydown(z){if(/input|textarea/i.test(z.target.tagName))return;const se=bt[z.key];se&&(z.preventDefault(),this._slide(this._directionToOrder(se)))}_getItemIndex(z){return this._getItems().indexOf(z)}_setActiveIndicatorElement(z){if(!this._indicatorsElement)return;const se=Je.findOne(Qe,this._indicatorsElement);se.classList.remove(ze),se.removeAttribute("aria-current");const Me=Je.findOne(`[data-bs-slide-to="${z}"]`,this._indicatorsElement);Me&&(Me.classList.add(ze),Me.setAttribute("aria-current","true"))}_updateInterval(){const z=this._activeElement||this._getActive();if(!z)return;const se=Number.parseInt(z.getAttribute("data-bs-interval"),10);this._config.interval=se||this._config.defaultInterval}_slide(z,se=null){if(this._isSliding)return;const Me=this._getActive(),_=z===An,u=se||K(this._getItems(),Me,_,this._config.wrap);if(u===Me)return;const m=this._getItemIndex(u),y=O=>Ee.trigger(this._element,O,{relatedTarget:u,direction:this._orderToDirection(z),from:this._getItemIndex(Me),to:m});if(y(fs).defaultPrevented||!Me||!u)return;const S=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(m),this._activeElement=u;const k=_?"carousel-item-start":"carousel-item-end",R=_?"carousel-item-next":"carousel-item-prev";u.classList.add(R),I(u),Me.classList.add(k),u.classList.add(k),this._queueCallback(()=>{u.classList.remove(k,R),u.classList.add(ze),Me.classList.remove(ze,R,k),this._isSliding=!1,y(Ji)},Me,this._isAnimated()),S&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Je.findOne(wt,this._element)}_getItems(){return Je.find(at,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(z){return F()?z===wi?Ln:An:z===wi?An:Ln}_orderToDirection(z){return F()?z===Ln?wi:hi:z===Ln?hi:wi}static jQueryInterface(z){return this.each(function(){const se=rn.getOrCreateInstance(this,z);if(typeof z!="number"){if(typeof z=="string"){if(se[z]===void 0||z.startsWith("_")||z==="constructor")throw new TypeError(`No method named "${z}"`);se[z]()}}else se.to(z)})}}Ee.on(document,ge,"[data-bs-slide], [data-bs-slide-to]",function(ve){const z=Je.getElementFromSelector(this);if(!z||!z.classList.contains(ye))return;ve.preventDefault();const se=rn.getOrCreateInstance(z),Me=this.getAttribute("data-bs-slide-to");return Me?(se.to(Me),void se._maybeEnableCycle()):kt.getDataAttribute(this,"slide")==="next"?(se.next(),void se._maybeEnableCycle()):(se.prev(),void se._maybeEnableCycle())}),Ee.on(window,Ue,()=>{const ve=Je.find('[data-bs-ride="carousel"]');for(const z of ve)rn.getOrCreateInstance(z)}),V(rn);const fn=".bs.collapse",sn=`show${fn}`,Yn=`shown${fn}`,ei=`hide${fn}`,Wn=`hidden${fn}`,li=`click${fn}.data-api`,Zn="show",Vi="collapse",gr="collapsing",rs=`:scope .${Vi} .${Vi}`,Sr='[data-bs-toggle="collapse"]',Ho={parent:null,toggle:!0},ss={parent:"(null|element)",toggle:"boolean"};class Vr extends ot{constructor(z,se){super(z,se),this._isTransitioning=!1,this._triggerArray=[];const Me=Je.find(Sr);for(const _ of Me){const u=Je.getSelectorFromElement(_),m=Je.find(u).filter(y=>y===this._element);u!==null&&m.length&&this._triggerArray.push(_)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ho}static get DefaultType(){return ss}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let z=[];if(this._config.parent&&(z=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(_=>_!==this._element).map(_=>Vr.getOrCreateInstance(_,{toggle:!1}))),z.length&&z[0]._isTransitioning||Ee.trigger(this._element,sn).defaultPrevented)return;for(const _ of z)_.hide();const se=this._getDimension();this._element.classList.remove(Vi),this._element.classList.add(gr),this._element.style[se]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const Me=`scroll${se[0].toUpperCase()+se.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(gr),this._element.classList.add(Vi,Zn),this._element.style[se]="",Ee.trigger(this._element,Yn)},this._element,!0),this._element.style[se]=`${this._element[Me]}px`}hide(){if(this._isTransitioning||!this._isShown()||Ee.trigger(this._element,ei).defaultPrevented)return;const z=this._getDimension();this._element.style[z]=`${this._element.getBoundingClientRect()[z]}px`,I(this._element),this._element.classList.add(gr),this._element.classList.remove(Vi,Zn);for(const se of this._triggerArray){const Me=Je.getElementFromSelector(se);Me&&!this._isShown(Me)&&this._addAriaAndCollapsedClass([se],!1)}this._isTransitioning=!0,this._element.style[z]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(gr),this._element.classList.add(Vi),Ee.trigger(this._element,Wn)},this._element,!0)}_isShown(z=this._element){return z.classList.contains(Zn)}_configAfterMerge(z){return z.toggle=!!z.toggle,z.parent=p(z.parent),z}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const z=this._getFirstLevelChildren(Sr);for(const se of z){const Me=Je.getElementFromSelector(se);Me&&this._addAriaAndCollapsedClass([se],this._isShown(Me))}}_getFirstLevelChildren(z){const se=Je.find(rs,this._config.parent);return Je.find(z,this._config.parent).filter(Me=>!se.includes(Me))}_addAriaAndCollapsedClass(z,se){if(z.length)for(const Me of z)Me.classList.toggle("collapsed",!se),Me.setAttribute("aria-expanded",se)}static jQueryInterface(z){const se={};return typeof z=="string"&&/show|hide/.test(z)&&(se.toggle=!1),this.each(function(){const Me=Vr.getOrCreateInstance(this,se);if(typeof z=="string"){if(Me[z]===void 0)throw new TypeError(`No method named "${z}"`);Me[z]()}})}}Ee.on(document,li,Sr,function(ve){(ve.target.tagName==="A"||ve.delegateTarget&&ve.delegateTarget.tagName==="A")&&ve.preventDefault();for(const z of Je.getMultipleElementsFromSelector(this))Vr.getOrCreateInstance(z,{toggle:!1}).toggle()}),V(Vr);var Gr="top",Cs="bottom",Ns="right",Xn="left",ma="auto",ks=[Gr,Cs,Ns,Xn],Go="start",Xa="end",Co="clippingParents",ko="viewport",Ya="popper",mc="reference",qo=ks.reduce(function(ve,z){return ve.concat([z+"-"+Go,z+"-"+Xa])},[]),Io=[].concat(ks,[ma]).reduce(function(ve,z){return ve.concat([z,z+"-"+Go,z+"-"+Xa])},[]),Nl="beforeRead",Ot="read",pa="afterRead",Wi="beforeMain",Qi="main",$l="afterMain",$s="beforeWrite",pc="write",ir="afterWrite",ga=[Nl,Ot,pa,Wi,Qi,$l,$s,pc,ir];function mn(ve){return ve?(ve.nodeName||"").toLowerCase():null}function $n(ve){if(ve==null)return window;if(ve.toString()!=="[object Window]"){var z=ve.ownerDocument;return z&&z.defaultView||window}return ve}function Jn(ve){return ve instanceof $n(ve).Element||ve instanceof Element}function vr(ve){return ve instanceof $n(ve).HTMLElement||ve instanceof HTMLElement}function co(ve){return typeof ShadowRoot<"u"&&(ve instanceof $n(ve).ShadowRoot||ve instanceof ShadowRoot)}const ri={name:"applyStyles",enabled:!0,phase:"write",fn:function(ve){var z=ve.state;Object.keys(z.elements).forEach(function(se){var Me=z.styles[se]||{},_=z.attributes[se]||{},u=z.elements[se];vr(u)&&mn(u)&&(Object.assign(u.style,Me),Object.keys(_).forEach(function(m){var y=_[m];y===!1?u.removeAttribute(m):u.setAttribute(m,y===!0?"":y)}))})},effect:function(ve){var z=ve.state,se={popper:{position:z.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(z.elements.popper.style,se.popper),z.styles=se,z.elements.arrow&&Object.assign(z.elements.arrow.style,se.arrow),function(){Object.keys(z.elements).forEach(function(Me){var _=z.elements[Me],u=z.attributes[Me]||{},m=Object.keys(z.styles.hasOwnProperty(Me)?z.styles[Me]:se[Me]).reduce(function(y,S){return y[S]="",y},{});vr(_)&&mn(_)&&(Object.assign(_.style,m),Object.keys(u).forEach(function(y){_.removeAttribute(y)}))})}},requires:["computeStyles"]};function Lr(ve){return ve.split("-")[0]}var Ko=Math.max,Ys=Math.min,Ar=Math.round;function Hi(){var ve=navigator.userAgentData;return ve!=null&&ve.brands&&Array.isArray(ve.brands)?ve.brands.map(function(z){return z.brand+"/"+z.version}).join(" "):navigator.userAgent}function xu(){return!/^((?!chrome|android).)*safari/i.test(Hi())}function Us(ve,z,se){z===void 0&&(z=!1),se===void 0&&(se=!1);var Me=ve.getBoundingClientRect(),_=1,u=1;z&&vr(ve)&&(_=ve.offsetWidth>0&&Ar(Me.width)/ve.offsetWidth||1,u=ve.offsetHeight>0&&Ar(Me.height)/ve.offsetHeight||1);var m=(Jn(ve)?$n(ve):window).visualViewport,y=!xu()&&se,S=(Me.left+(y&&m?m.offsetLeft:0))/_,k=(Me.top+(y&&m?m.offsetTop:0))/u,R=Me.width/_,O=Me.height/u;return{width:R,height:O,top:k,right:S+R,bottom:k+O,left:S,x:S,y:k}}function dl(ve){var z=Us(ve),se=ve.offsetWidth,Me=ve.offsetHeight;return Math.abs(z.width-se)<=1&&(se=z.width),Math.abs(z.height-Me)<=1&&(Me=z.height),{x:ve.offsetLeft,y:ve.offsetTop,width:se,height:Me}}function Ul(ve,z){var se=z.getRootNode&&z.getRootNode();if(ve.contains(z))return!0;if(se&&co(se)){var Me=z;do{if(Me&&ve.isSameNode(Me))return!0;Me=Me.parentNode||Me.host}while(Me)}return!1}function Is(ve){return $n(ve).getComputedStyle(ve)}function Fh(ve){return["table","td","th"].indexOf(mn(ve))>=0}function Ao(ve){return((Jn(ve)?ve.ownerDocument:ve.document)||window.document).documentElement}function hl(ve){return mn(ve)==="html"?ve:ve.assignedSlot||ve.parentNode||(co(ve)?ve.host:null)||Ao(ve)}function Po(ve){return vr(ve)&&Is(ve).position!=="fixed"?ve.offsetParent:null}function va(ve){for(var z=$n(ve),se=Po(ve);se&&Fh(se)&&Is(se).position==="static";)se=Po(se);return se&&(mn(se)==="html"||mn(se)==="body"&&Is(se).position==="static")?z:se||(function(Me){var _=/firefox/i.test(Hi());if(/Trident/i.test(Hi())&&vr(Me)&&Is(Me).position==="fixed")return null;var u=hl(Me);for(co(u)&&(u=u.host);vr(u)&&["html","body"].indexOf(mn(u))<0;){var m=Is(u);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||_&&m.willChange==="filter"||_&&m.filter&&m.filter!=="none")return u;u=u.parentNode}return null})(ve)||z}function os(ve){return["top","bottom"].indexOf(ve)>=0?"x":"y"}function Gi(ve,z,se){return Ko(ve,Ys(z,se))}function jc(ve){return Object.assign({},{top:0,right:0,bottom:0,left:0},ve)}function fl(ve,z){return z.reduce(function(se,Me){return se[Me]=ve,se},{})}const Zr={name:"arrow",enabled:!0,phase:"main",fn:function(ve){var z,se=ve.state,Me=ve.name,_=ve.options,u=se.elements.arrow,m=se.modifiersData.popperOffsets,y=Lr(se.placement),S=os(y),k=[Xn,Ns].indexOf(y)>=0?"height":"width";if(u&&m){var R=(function(Re,Ge){return jc(typeof(Re=typeof Re=="function"?Re(Object.assign({},Ge.rects,{placement:Ge.placement})):Re)!="number"?Re:fl(Re,ks))})(_.padding,se),O=dl(u),U=S==="y"?Gr:Xn,Y=S==="y"?Cs:Ns,J=se.rects.reference[k]+se.rects.reference[S]-m[S]-se.rects.popper[k],ae=m[S]-se.rects.reference[S],pe=va(u),Te=pe?S==="y"?pe.clientHeight||0:pe.clientWidth||0:0,ke=J/2-ae/2,Se=R[U],Ae=Te-O[k]-R[Y],ce=Te/2-O[k]/2+ke,xe=Gi(Se,ce,Ae),De=S;se.modifiersData[Me]=((z={})[De]=xe,z.centerOffset=xe-ce,z)}},effect:function(ve){var z=ve.state,se=ve.options.element,Me=se===void 0?"[data-popper-arrow]":se;Me!=null&&(typeof Me!="string"||(Me=z.elements.popper.querySelector(Me)))&&Ul(z.elements.popper,Me)&&(z.elements.arrow=Me)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function as(ve){return ve.split("-")[1]}var wu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rr(ve){var z,se=ve.popper,Me=ve.popperRect,_=ve.placement,u=ve.variation,m=ve.offsets,y=ve.position,S=ve.gpuAcceleration,k=ve.adaptive,R=ve.roundOffsets,O=ve.isFixed,U=m.x,Y=U===void 0?0:U,J=m.y,ae=J===void 0?0:J,pe=typeof R=="function"?R({x:Y,y:ae}):{x:Y,y:ae};Y=pe.x,ae=pe.y;var Te=m.hasOwnProperty("x"),ke=m.hasOwnProperty("y"),Se=Xn,Ae=Gr,ce=window;if(k){var xe=va(se),De="clientHeight",Re="clientWidth";xe===$n(se)&&Is(xe=Ao(se)).position!=="static"&&y==="absolute"&&(De="scrollHeight",Re="scrollWidth"),(_===Gr||(_===Xn||_===Ns)&&u===Xa)&&(Ae=Cs,ae-=(O&&xe===ce&&ce.visualViewport?ce.visualViewport.height:xe[De])-Me.height,ae*=S?1:-1),_!==Xn&&(_!==Gr&&_!==Cs||u!==Xa)||(Se=Ns,Y-=(O&&xe===ce&&ce.visualViewport?ce.visualViewport.width:xe[Re])-Me.width,Y*=S?1:-1)}var Ge,Ye=Object.assign({position:y},k&&wu),et=R===!0?(function(ht,lt){var xt=ht.x,Xt=ht.y,ft=lt.devicePixelRatio||1;return{x:Ar(xt*ft)/ft||0,y:Ar(Xt*ft)/ft||0}})({x:Y,y:ae},$n(se)):{x:Y,y:ae};return Y=et.x,ae=et.y,S?Object.assign({},Ye,((Ge={})[Ae]=ke?"0":"",Ge[Se]=Te?"0":"",Ge.transform=(ce.devicePixelRatio||1)<=1?"translate("+Y+"px, "+ae+"px)":"translate3d("+Y+"px, "+ae+"px, 0)",Ge)):Object.assign({},Ye,((z={})[Ae]=ke?ae+"px":"",z[Se]=Te?Y+"px":"",z.transform="",z))}const _r={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(ve){var z=ve.state,se=ve.options,Me=se.gpuAcceleration,_=Me===void 0||Me,u=se.adaptive,m=u===void 0||u,y=se.roundOffsets,S=y===void 0||y,k={placement:Lr(z.placement),variation:as(z.placement),popper:z.elements.popper,popperRect:z.rects.popper,gpuAcceleration:_,isFixed:z.options.strategy==="fixed"};z.modifiersData.popperOffsets!=null&&(z.styles.popper=Object.assign({},z.styles.popper,rr(Object.assign({},k,{offsets:z.modifiersData.popperOffsets,position:z.options.strategy,adaptive:m,roundOffsets:S})))),z.modifiersData.arrow!=null&&(z.styles.arrow=Object.assign({},z.styles.arrow,rr(Object.assign({},k,{offsets:z.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:S})))),z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-placement":z.placement})},data:{}};var ml={passive:!0};const gc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(ve){var z=ve.state,se=ve.instance,Me=ve.options,_=Me.scroll,u=_===void 0||_,m=Me.resize,y=m===void 0||m,S=$n(z.elements.popper),k=[].concat(z.scrollParents.reference,z.scrollParents.popper);return u&&k.forEach(function(R){R.addEventListener("scroll",se.update,ml)}),y&&S.addEventListener("resize",se.update,ml),function(){u&&k.forEach(function(R){R.removeEventListener("scroll",se.update,ml)}),y&&S.removeEventListener("resize",se.update,ml)}},data:{}};var pl={left:"right",right:"left",bottom:"top",top:"bottom"};function Br(ve){return ve.replace(/left|right|bottom|top/g,function(z){return pl[z]})}var vc={start:"end",end:"start"};function Xo(ve){return ve.replace(/start|end/g,function(z){return vc[z]})}function Mo(ve){var z=$n(ve);return{scrollLeft:z.pageXOffset,scrollTop:z.pageYOffset}}function _a(ve){return Us(Ao(ve)).left+Mo(ve).scrollLeft}function ya(ve){var z=Is(ve),se=z.overflow,Me=z.overflowX,_=z.overflowY;return/auto|scroll|overlay|hidden/.test(se+_+Me)}function vd(ve){return["html","body","#document"].indexOf(mn(ve))>=0?ve.ownerDocument.body:vr(ve)&&ya(ve)?ve:vd(hl(ve))}function Za(ve,z){var se;z===void 0&&(z=[]);var Me=vd(ve),_=Me===((se=ve.ownerDocument)==null?void 0:se.body),u=$n(Me),m=_?[u].concat(u.visualViewport||[],ya(Me)?Me:[]):Me,y=z.concat(m);return _?y:y.concat(Za(hl(m)))}function Yo(ve){return Object.assign({},ve,{left:ve.x,top:ve.y,right:ve.x+ve.width,bottom:ve.y+ve.height})}function Do(ve,z,se){return z===ko?Yo((function(Me,_){var u=$n(Me),m=Ao(Me),y=u.visualViewport,S=m.clientWidth,k=m.clientHeight,R=0,O=0;if(y){S=y.width,k=y.height;var U=xu();(U||!U&&_==="fixed")&&(R=y.offsetLeft,O=y.offsetTop)}return{width:S,height:k,x:R+_a(Me),y:O}})(ve,se)):Jn(z)?(function(Me,_){var u=Us(Me,!1,_==="fixed");return u.top=u.top+Me.clientTop,u.left=u.left+Me.clientLeft,u.bottom=u.top+Me.clientHeight,u.right=u.left+Me.clientWidth,u.width=Me.clientWidth,u.height=Me.clientHeight,u.x=u.left,u.y=u.top,u})(z,se):Yo((function(Me){var _,u=Ao(Me),m=Mo(Me),y=(_=Me.ownerDocument)==null?void 0:_.body,S=Ko(u.scrollWidth,u.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),k=Ko(u.scrollHeight,u.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),R=-m.scrollLeft+_a(Me),O=-m.scrollTop;return Is(y||u).direction==="rtl"&&(R+=Ko(u.clientWidth,y?y.clientWidth:0)-S),{width:S,height:k,x:R,y:O}})(Ao(ve)))}function jl(ve){var z,se=ve.reference,Me=ve.element,_=ve.placement,u=_?Lr(_):null,m=_?as(_):null,y=se.x+se.width/2-Me.width/2,S=se.y+se.height/2-Me.height/2;switch(u){case Gr:z={x:y,y:se.y-Me.height};break;case Cs:z={x:y,y:se.y+se.height};break;case Ns:z={x:se.x+se.width,y:S};break;case Xn:z={x:se.x-Me.width,y:S};break;default:z={x:se.x,y:se.y}}var k=u?os(u):null;if(k!=null){var R=k==="y"?"height":"width";switch(m){case Go:z[k]=z[k]-(se[R]/2-Me[R]/2);break;case Xa:z[k]=z[k]+(se[R]/2-Me[R]/2)}}return z}function Lo(ve,z){z===void 0&&(z={});var se=z,Me=se.placement,_=Me===void 0?ve.placement:Me,u=se.strategy,m=u===void 0?ve.strategy:u,y=se.boundary,S=y===void 0?Co:y,k=se.rootBoundary,R=k===void 0?ko:k,O=se.elementContext,U=O===void 0?Ya:O,Y=se.altBoundary,J=Y!==void 0&&Y,ae=se.padding,pe=ae===void 0?0:ae,Te=jc(typeof pe!="number"?pe:fl(pe,ks)),ke=U===Ya?mc:Ya,Se=ve.rects.popper,Ae=ve.elements[J?ke:U],ce=(function(lt,xt,Xt,ft){var Bt=xt==="clippingParents"?(function(At){var qt=Za(hl(At)),jt=["absolute","fixed"].indexOf(Is(At).position)>=0&&vr(At)?va(At):At;return Jn(jt)?qt.filter(function(Qt){return Jn(Qt)&&Ul(Qt,jt)&&mn(Qt)!=="body"}):[]})(lt):[].concat(xt),Et=[].concat(Bt,[Xt]),Jt=Et[0],_t=Et.reduce(function(At,qt){var jt=Do(lt,qt,ft);return At.top=Ko(jt.top,At.top),At.right=Ys(jt.right,At.right),At.bottom=Ys(jt.bottom,At.bottom),At.left=Ko(jt.left,At.left),At},Do(lt,Jt,ft));return _t.width=_t.right-_t.left,_t.height=_t.bottom-_t.top,_t.x=_t.left,_t.y=_t.top,_t})(Jn(Ae)?Ae:Ae.contextElement||Ao(ve.elements.popper),S,R,m),xe=Us(ve.elements.reference),De=jl({reference:xe,element:Se,placement:_}),Re=Yo(Object.assign({},Se,De)),Ge=U===Ya?Re:xe,Ye={top:ce.top-Ge.top+Te.top,bottom:Ge.bottom-ce.bottom+Te.bottom,left:ce.left-Ge.left+Te.left,right:Ge.right-ce.right+Te.right},et=ve.modifiersData.offset;if(U===Ya&&et){var ht=et[_];Object.keys(Ye).forEach(function(lt){var xt=[Ns,Cs].indexOf(lt)>=0?1:-1,Xt=[Gr,Cs].indexOf(lt)>=0?"y":"x";Ye[lt]+=ht[Xt]*xt})}return Ye}function ba(ve,z){z===void 0&&(z={});var se=z,Me=se.placement,_=se.boundary,u=se.rootBoundary,m=se.padding,y=se.flipVariations,S=se.allowedAutoPlacements,k=S===void 0?Io:S,R=as(Me),O=R?y?qo:qo.filter(function(J){return as(J)===R}):ks,U=O.filter(function(J){return k.indexOf(J)>=0});U.length===0&&(U=O);var Y=U.reduce(function(J,ae){return J[ae]=Lo(ve,{placement:ae,boundary:_,rootBoundary:u,padding:m})[Lr(ae)],J},{});return Object.keys(Y).sort(function(J,ae){return Y[J]-Y[ae]})}const xa={name:"flip",enabled:!0,phase:"main",fn:function(ve){var z=ve.state,se=ve.options,Me=ve.name;if(!z.modifiersData[Me]._skip){for(var _=se.mainAxis,u=_===void 0||_,m=se.altAxis,y=m===void 0||m,S=se.fallbackPlacements,k=se.padding,R=se.boundary,O=se.rootBoundary,U=se.altBoundary,Y=se.flipVariations,J=Y===void 0||Y,ae=se.allowedAutoPlacements,pe=z.options.placement,Te=Lr(pe),ke=S||(Te!==pe&&J?(function(At){if(Lr(At)===ma)return[];var qt=Br(At);return[Xo(At),qt,Xo(qt)]})(pe):[Br(pe)]),Se=[pe].concat(ke).reduce(function(At,qt){return At.concat(Lr(qt)===ma?ba(z,{placement:qt,boundary:R,rootBoundary:O,padding:k,flipVariations:J,allowedAutoPlacements:ae}):qt)},[]),Ae=z.rects.reference,ce=z.rects.popper,xe=new Map,De=!0,Re=Se[0],Ge=0;Ge<Se.length;Ge++){var Ye=Se[Ge],et=Lr(Ye),ht=as(Ye)===Go,lt=[Gr,Cs].indexOf(et)>=0,xt=lt?"width":"height",Xt=Lo(z,{placement:Ye,boundary:R,rootBoundary:O,altBoundary:U,padding:k}),ft=lt?ht?Ns:Xn:ht?Cs:Gr;Ae[xt]>ce[xt]&&(ft=Br(ft));var Bt=Br(ft),Et=[];if(u&&Et.push(Xt[et]<=0),y&&Et.push(Xt[ft]<=0,Xt[Bt]<=0),Et.every(function(At){return At})){Re=Ye,De=!1;break}xe.set(Ye,Et)}if(De)for(var Jt=function(At){var qt=Se.find(function(jt){var Qt=xe.get(jt);if(Qt)return Qt.slice(0,At).every(function(Rn){return Rn})});if(qt)return Re=qt,"break"},_t=J?3:1;_t>0&&Jt(_t)!=="break";_t--);z.placement!==Re&&(z.modifiersData[Me]._skip=!0,z.placement=Re,z.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Zo(ve,z,se){return se===void 0&&(se={x:0,y:0}),{top:ve.top-z.height-se.y,right:ve.right-z.width+se.x,bottom:ve.bottom-z.height+se.y,left:ve.left-z.width-se.x}}function _c(ve){return[Gr,Ns,Cs,Xn].some(function(z){return ve[z]>=0})}const Ja={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(ve){var z=ve.state,se=ve.name,Me=z.rects.reference,_=z.rects.popper,u=z.modifiersData.preventOverflow,m=Lo(z,{elementContext:"reference"}),y=Lo(z,{altBoundary:!0}),S=Zo(m,Me),k=Zo(y,_,u),R=_c(S),O=_c(k);z.modifiersData[se]={referenceClippingOffsets:S,popperEscapeOffsets:k,isReferenceHidden:R,hasPopperEscaped:O},z.attributes.popper=Object.assign({},z.attributes.popper,{"data-popper-reference-hidden":R,"data-popper-escaped":O})}},gl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(ve){var z=ve.state,se=ve.options,Me=ve.name,_=se.offset,u=_===void 0?[0,0]:_,m=Io.reduce(function(R,O){return R[O]=(function(U,Y,J){var ae=Lr(U),pe=[Xn,Gr].indexOf(ae)>=0?-1:1,Te=typeof J=="function"?J(Object.assign({},Y,{placement:U})):J,ke=Te[0],Se=Te[1];return ke=ke||0,Se=(Se||0)*pe,[Xn,Ns].indexOf(ae)>=0?{x:Se,y:ke}:{x:ke,y:Se}})(O,z.rects,u),R},{}),y=m[z.placement],S=y.x,k=y.y;z.modifiersData.popperOffsets!=null&&(z.modifiersData.popperOffsets.x+=S,z.modifiersData.popperOffsets.y+=k),z.modifiersData[Me]=m}},Wc={name:"popperOffsets",enabled:!0,phase:"read",fn:function(ve){var z=ve.state,se=ve.name;z.modifiersData[se]=jl({reference:z.rects.reference,element:z.rects.popper,placement:z.placement})},data:{}},vl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(ve){var z=ve.state,se=ve.options,Me=ve.name,_=se.mainAxis,u=_===void 0||_,m=se.altAxis,y=m!==void 0&&m,S=se.boundary,k=se.rootBoundary,R=se.altBoundary,O=se.padding,U=se.tether,Y=U===void 0||U,J=se.tetherOffset,ae=J===void 0?0:J,pe=Lo(z,{boundary:S,rootBoundary:k,padding:O,altBoundary:R}),Te=Lr(z.placement),ke=as(z.placement),Se=!ke,Ae=os(Te),ce=Ae==="x"?"y":"x",xe=z.modifiersData.popperOffsets,De=z.rects.reference,Re=z.rects.popper,Ge=typeof ae=="function"?ae(Object.assign({},z.rects,{placement:z.placement})):ae,Ye=typeof Ge=="number"?{mainAxis:Ge,altAxis:Ge}:Object.assign({mainAxis:0,altAxis:0},Ge),et=z.modifiersData.offset?z.modifiersData.offset[z.placement]:null,ht={x:0,y:0};if(xe){if(u){var lt,xt=Ae==="y"?Gr:Xn,Xt=Ae==="y"?Cs:Ns,ft=Ae==="y"?"height":"width",Bt=xe[Ae],Et=Bt+pe[xt],Jt=Bt-pe[Xt],_t=Y?-Re[ft]/2:0,At=ke===Go?De[ft]:Re[ft],qt=ke===Go?-Re[ft]:-De[ft],jt=z.elements.arrow,Qt=Y&&jt?dl(jt):{width:0,height:0},Rn=z.modifiersData["arrow#persistent"]?z.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Kn=Rn[xt],En=Rn[Xt],Vn=Gi(0,De[ft],Qt[ft]),_i=Se?De[ft]/2-_t-Vn-Kn-Ye.mainAxis:At-Vn-Kn-Ye.mainAxis,vi=Se?-De[ft]/2+_t+Vn+En+Ye.mainAxis:qt+Vn+En+Ye.mainAxis,Mn=z.elements.arrow&&va(z.elements.arrow),Bi=Mn?Ae==="y"?Mn.clientTop||0:Mn.clientLeft||0:0,qi=(lt=et==null?void 0:et[Ae])!=null?lt:0,er=Bt+vi-qi,Ki=Gi(Y?Ys(Et,Bt+_i-qi-Bi):Et,Bt,Y?Ko(Jt,er):Jt);xe[Ae]=Ki,ht[Ae]=Ki-Bt}if(y){var Ws,Ms=Ae==="x"?Gr:Xn,Sa=Ae==="x"?Cs:Ns,Js=xe[ce],sr=ce==="y"?"height":"width",Xi=Js+pe[Ms],Mi=Js-pe[Sa],Fr=[Gr,Xn].indexOf(Te)!==-1,Qs=(Ws=et==null?void 0:et[ce])!=null?Ws:0,lr=Fr?Xi:Js-De[sr]-Re[sr]-Qs+Ye.altAxis,fo=Fr?Js+De[sr]+Re[sr]-Qs-Ye.altAxis:Mi,Fd=Y&&Fr?(function(Qc,zd,rl){var Kl=Gi(Qc,zd,rl);return Kl>rl?rl:Kl})(lr,Js,fo):Gi(Y?lr:Xi,Js,Y?fo:Mi);xe[ce]=Fd,ht[ce]=Fd-Js}z.modifiersData[Me]=ht}},requiresIfExists:["offset"]};function Tu(ve,z,se){se===void 0&&(se=!1);var Me,_,u=vr(z),m=vr(z)&&(function(O){var U=O.getBoundingClientRect(),Y=Ar(U.width)/O.offsetWidth||1,J=Ar(U.height)/O.offsetHeight||1;return Y!==1||J!==1})(z),y=Ao(z),S=Us(ve,m,se),k={scrollLeft:0,scrollTop:0},R={x:0,y:0};return(u||!u&&!se)&&((mn(z)!=="body"||ya(y))&&(k=(Me=z)!==$n(Me)&&vr(Me)?{scrollLeft:(_=Me).scrollLeft,scrollTop:_.scrollTop}:Mo(Me)),vr(z)?((R=Us(z,!0)).x+=z.clientLeft,R.y+=z.clientTop):y&&(R.x=_a(y))),{x:S.left+k.scrollLeft-R.x,y:S.top+k.scrollTop-R.y,width:S.width,height:S.height}}function Su(ve){var z=new Map,se=new Set,Me=[];function _(u){se.add(u.name),[].concat(u.requires||[],u.requiresIfExists||[]).forEach(function(m){if(!se.has(m)){var y=z.get(m);y&&_(y)}}),Me.push(u)}return ve.forEach(function(u){z.set(u.name,u)}),ve.forEach(function(u){se.has(u.name)||_(u)}),Me}var uo={placement:"bottom",modifiers:[],strategy:"absolute"};function Ii(){for(var ve=arguments.length,z=new Array(ve),se=0;se<ve;se++)z[se]=arguments[se];return!z.some(function(Me){return!(Me&&typeof Me.getBoundingClientRect=="function")})}function Hc(ve){ve===void 0&&(ve={});var z=ve,se=z.defaultModifiers,Me=se===void 0?[]:se,_=z.defaultOptions,u=_===void 0?uo:_;return function(m,y,S){S===void 0&&(S=u);var k,R,O={placement:"bottom",orderedModifiers:[],options:Object.assign({},uo,u),modifiersData:{},elements:{reference:m,popper:y},attributes:{},styles:{}},U=[],Y=!1,J={state:O,setOptions:function(pe){var Te=typeof pe=="function"?pe(O.options):pe;ae(),O.options=Object.assign({},u,O.options,Te),O.scrollParents={reference:Jn(m)?Za(m):m.contextElement?Za(m.contextElement):[],popper:Za(y)};var ke,Se,Ae=(function(ce){var xe=Su(ce);return ga.reduce(function(De,Re){return De.concat(xe.filter(function(Ge){return Ge.phase===Re}))},[])})((ke=[].concat(Me,O.options.modifiers),Se=ke.reduce(function(ce,xe){var De=ce[xe.name];return ce[xe.name]=De?Object.assign({},De,xe,{options:Object.assign({},De.options,xe.options),data:Object.assign({},De.data,xe.data)}):xe,ce},{}),Object.keys(Se).map(function(ce){return Se[ce]})));return O.orderedModifiers=Ae.filter(function(ce){return ce.enabled}),O.orderedModifiers.forEach(function(ce){var xe=ce.name,De=ce.options,Re=De===void 0?{}:De,Ge=ce.effect;if(typeof Ge=="function"){var Ye=Ge({state:O,name:xe,instance:J,options:Re});U.push(Ye||function(){})}}),J.update()},forceUpdate:function(){if(!Y){var pe=O.elements,Te=pe.reference,ke=pe.popper;if(Ii(Te,ke)){O.rects={reference:Tu(Te,va(ke),O.options.strategy==="fixed"),popper:dl(ke)},O.reset=!1,O.placement=O.options.placement,O.orderedModifiers.forEach(function(Ge){return O.modifiersData[Ge.name]=Object.assign({},Ge.data)});for(var Se=0;Se<O.orderedModifiers.length;Se++)if(O.reset!==!0){var Ae=O.orderedModifiers[Se],ce=Ae.fn,xe=Ae.options,De=xe===void 0?{}:xe,Re=Ae.name;typeof ce=="function"&&(O=ce({state:O,options:De,name:Re,instance:J})||O)}else O.reset=!1,Se=-1}}},update:(k=function(){return new Promise(function(pe){J.forceUpdate(),pe(O)})},function(){return R||(R=new Promise(function(pe){Promise.resolve().then(function(){R=void 0,pe(k())})})),R}),destroy:function(){ae(),Y=!0}};if(!Ii(m,y))return J;function ae(){U.forEach(function(pe){return pe()}),U=[]}return J.setOptions(S).then(function(pe){!Y&&S.onFirstUpdate&&S.onFirstUpdate(pe)}),J}}var Eu=Hc(),_d=Hc({defaultModifiers:[gc,Wc,_r,ri]}),_l=Hc({defaultModifiers:[gc,Wc,_r,ri,gl,xa,vl,Zr,Ja]});const js=Object.freeze(Object.defineProperty({__proto__:null,afterMain:$l,afterRead:pa,afterWrite:ir,applyStyles:ri,arrow:Zr,auto:ma,basePlacements:ks,beforeMain:Wi,beforeRead:Nl,beforeWrite:$s,bottom:Cs,clippingParents:Co,computeStyles:_r,createPopper:_l,createPopperBase:Eu,createPopperLite:_d,detectOverflow:Lo,end:Xa,eventListeners:gc,flip:xa,hide:Ja,left:Xn,main:Qi,modifierPhases:ga,offset:gl,placements:Io,popper:Ya,popperGenerator:Hc,popperOffsets:Wc,preventOverflow:vl,read:Ot,reference:mc,right:Ns,start:Go,top:Gr,variationPlacements:qo,viewport:ko,write:pc},Symbol.toStringTag,{value:"Module"})),Gc="dropdown",ho=".bs.dropdown",Jo=".data-api",M="ArrowUp",ne="ArrowDown",de=`hide${ho}`,Le=`hidden${ho}`,It=`show${ho}`,Rt=`shown${ho}`,xn=`click${ho}${Jo}`,fi=`keydown${ho}${Jo}`,Rr=`keyup${ho}${Jo}`,Ai="show",ar='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ti=`${ar}.${Ai}`,Zs=".dropdown-menu",Qa=F()?"top-end":"top-start",wa=F()?"top-start":"top-end",qc=F()?"bottom-end":"bottom-start",el=F()?"bottom-start":"bottom-end",bm=F()?"left-start":"right-start",O_=F()?"right-start":"left-start",V_={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},B_={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Qo extends ot{constructor(z,se){super(z,se),this._popper=null,this._parent=this._element.parentNode,this._menu=Je.next(this._element,Zs)[0]||Je.prev(this._element,Zs)[0]||Je.findOne(Zs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return V_}static get DefaultType(){return B_}static get NAME(){return Gc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(x(this._element)||this._isShown())return;const z={relatedTarget:this._element};if(!Ee.trigger(this._element,It,z).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const se of[].concat(...document.body.children))Ee.on(se,"mouseover",C);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ai),this._element.classList.add(Ai),Ee.trigger(this._element,Rt,z)}}hide(){if(x(this._element)||!this._isShown())return;const z={relatedTarget:this._element};this._completeHide(z)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(z){if(!Ee.trigger(this._element,de,z).defaultPrevented){if("ontouchstart"in document.documentElement)for(const se of[].concat(...document.body.children))Ee.off(se,"mouseover",C);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ai),this._element.classList.remove(Ai),this._element.setAttribute("aria-expanded","false"),kt.removeDataAttribute(this._menu,"popper"),Ee.trigger(this._element,Le,z)}}_getConfig(z){if(typeof(z=super._getConfig(z)).reference=="object"&&!s(z.reference)&&typeof z.reference.getBoundingClientRect!="function")throw new TypeError(`${Gc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return z}_createPopper(){if(js===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let z=this._element;this._config.reference==="parent"?z=this._parent:s(this._config.reference)?z=p(this._config.reference):typeof this._config.reference=="object"&&(z=this._config.reference);const se=this._getPopperConfig();this._popper=_l(z,this._menu,se)}_isShown(){return this._menu.classList.contains(Ai)}_getPlacement(){const z=this._parent;if(z.classList.contains("dropend"))return bm;if(z.classList.contains("dropstart"))return O_;if(z.classList.contains("dropup-center"))return"top";if(z.classList.contains("dropdown-center"))return"bottom";const se=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return z.classList.contains("dropup")?se?wa:Qa:se?el:qc}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:z}=this._config;return typeof z=="string"?z.split(",").map(se=>Number.parseInt(se,10)):typeof z=="function"?se=>z(se,this._element):z}_getPopperConfig(){const z={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(kt.setDataAttribute(this._menu,"popper","static"),z.modifiers=[{name:"applyStyles",enabled:!1}]),{...z,...H(this._config.popperConfig,[void 0,z])}}_selectMenuItem({key:z,target:se}){const Me=Je.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(_=>v(_));Me.length&&K(Me,se,z===ne,!Me.includes(se)).focus()}static jQueryInterface(z){return this.each(function(){const se=Qo.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0)throw new TypeError(`No method named "${z}"`);se[z]()}})}static clearMenus(z){if(z.button===2||z.type==="keyup"&&z.key!=="Tab")return;const se=Je.find(ti);for(const Me of se){const _=Qo.getInstance(Me);if(!_||_._config.autoClose===!1)continue;const u=z.composedPath(),m=u.includes(_._menu);if(u.includes(_._element)||_._config.autoClose==="inside"&&!m||_._config.autoClose==="outside"&&m||_._menu.contains(z.target)&&(z.type==="keyup"&&z.key==="Tab"||/input|select|option|textarea|form/i.test(z.target.tagName)))continue;const y={relatedTarget:_._element};z.type==="click"&&(y.clickEvent=z),_._completeHide(y)}}static dataApiKeydownHandler(z){const se=/input|textarea/i.test(z.target.tagName),Me=z.key==="Escape",_=[M,ne].includes(z.key);if(!_&&!Me||se&&!Me)return;z.preventDefault();const u=this.matches(ar)?this:Je.prev(this,ar)[0]||Je.next(this,ar)[0]||Je.findOne(ar,z.delegateTarget.parentNode),m=Qo.getOrCreateInstance(u);if(_)return z.stopPropagation(),m.show(),void m._selectMenuItem(z);m._isShown()&&(z.stopPropagation(),m.hide(),u.focus())}}Ee.on(document,fi,ar,Qo.dataApiKeydownHandler),Ee.on(document,fi,Zs,Qo.dataApiKeydownHandler),Ee.on(document,xn,Qo.clearMenus),Ee.on(document,Rr,Qo.clearMenus),Ee.on(document,xn,ar,function(ve){ve.preventDefault(),Qo.getOrCreateInstance(this).toggle()}),V(Qo);const zh="backdrop",Nh="show",yd=`mousedown.bs.${zh}`,bg={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},xg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class wg extends Nt{constructor(z){super(),this._config=this._getConfig(z),this._isAppended=!1,this._element=null}static get Default(){return bg}static get DefaultType(){return xg}static get NAME(){return zh}show(z){if(!this._config.isVisible)return void H(z);this._append();const se=this._getElement();this._config.isAnimated&&I(se),se.classList.add(Nh),this._emulateAnimation(()=>{H(z)})}hide(z){this._config.isVisible?(this._getElement().classList.remove(Nh),this._emulateAnimation(()=>{this.dispose(),H(z)})):H(z)}dispose(){this._isAppended&&(Ee.off(this._element,yd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const z=document.createElement("div");z.className=this._config.className,this._config.isAnimated&&z.classList.add("fade"),this._element=z}return this._element}_configAfterMerge(z){return z.rootElement=p(z.rootElement),z}_append(){if(this._isAppended)return;const z=this._getElement();this._config.rootElement.append(z),Ee.on(z,yd,()=>{H(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(z){q(z,this._getElement(),this._config.isAnimated)}}const yc=".bs.focustrap",Cu=`focusin${yc}`,xm=`keydown.tab${yc}`,ku="backward",wm={autofocus:!0,trapElement:null},yl={autofocus:"boolean",trapElement:"element"};class bd extends Nt{constructor(z){super(),this._config=this._getConfig(z),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return wm}static get DefaultType(){return yl}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ee.off(document,yc),Ee.on(document,Cu,z=>this._handleFocusin(z)),Ee.on(document,xm,z=>this._handleKeydown(z)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ee.off(document,yc))}_handleFocusin(z){const{trapElement:se}=this._config;if(z.target===document||z.target===se||se.contains(z.target))return;const Me=Je.focusableChildren(se);Me.length===0?se.focus():this._lastTabNavDirection===ku?Me[Me.length-1].focus():Me[0].focus()}_handleKeydown(z){z.key==="Tab"&&(this._lastTabNavDirection=z.shiftKey?ku:"forward")}}const $h=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xd=".sticky-top",wd="padding-right",Uh="margin-right";class Tm{constructor(){this._element=document.body}getWidth(){const z=document.documentElement.clientWidth;return Math.abs(window.innerWidth-z)}hide(){const z=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,wd,se=>se+z),this._setElementAttributes($h,wd,se=>se+z),this._setElementAttributes(xd,Uh,se=>se-z)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,wd),this._resetElementAttributes($h,wd),this._resetElementAttributes(xd,Uh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(z,se,Me){const _=this.getWidth();this._applyManipulationCallback(z,u=>{if(u!==this._element&&window.innerWidth>u.clientWidth+_)return;this._saveInitialAttribute(u,se);const m=window.getComputedStyle(u).getPropertyValue(se);u.style.setProperty(se,`${Me(Number.parseFloat(m))}px`)})}_saveInitialAttribute(z,se){const Me=z.style.getPropertyValue(se);Me&&kt.setDataAttribute(z,se,Me)}_resetElementAttributes(z,se){this._applyManipulationCallback(z,Me=>{const _=kt.getDataAttribute(Me,se);_!==null?(kt.removeDataAttribute(Me,se),Me.style.setProperty(se,_)):Me.style.removeProperty(se)})}_applyManipulationCallback(z,se){if(s(z))se(z);else for(const Me of Je.find(z,this._element))se(Me)}}const Ro=".bs.modal",jh=`hide${Ro}`,Td=`hidePrevented${Ro}`,Sm=`hidden${Ro}`,Wh=`show${Ro}`,F_=`shown${Ro}`,Em=`resize${Ro}`,Tg=`click.dismiss${Ro}`,Sd=`mousedown.dismiss${Ro}`,Sg=`keydown.dismiss${Ro}`,Hh=`click${Ro}.data-api`,Cm="modal-open",Kc="show",km="modal-static",z_={backdrop:!0,focus:!0,keyboard:!0},N_={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Xc extends ot{constructor(z,se){super(z,se),this._dialog=Je.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Tm,this._addEventListeners()}static get Default(){return z_}static get DefaultType(){return N_}static get NAME(){return"modal"}toggle(z){return this._isShown?this.hide():this.show(z)}show(z){this._isShown||this._isTransitioning||Ee.trigger(this._element,Wh,{relatedTarget:z}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Cm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(z)))}hide(){this._isShown&&!this._isTransitioning&&(Ee.trigger(this._element,jh).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Kc),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){Ee.off(window,Ro),Ee.off(this._dialog,Ro),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wg({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bd({trapElement:this._element})}_showElement(z){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const se=Je.findOne(".modal-body",this._dialog);se&&(se.scrollTop=0),I(this._element),this._element.classList.add(Kc),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ee.trigger(this._element,F_,{relatedTarget:z})},this._dialog,this._isAnimated())}_addEventListeners(){Ee.on(this._element,Sg,z=>{z.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),Ee.on(window,Em,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Ee.on(this._element,Sd,z=>{Ee.one(this._element,Tg,se=>{this._element===z.target&&this._element===se.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Cm),this._resetAdjustments(),this._scrollBar.reset(),Ee.trigger(this._element,Sm)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ee.trigger(this._element,Td).defaultPrevented)return;const z=this._element.scrollHeight>document.documentElement.clientHeight,se=this._element.style.overflowY;se==="hidden"||this._element.classList.contains(km)||(z||(this._element.style.overflowY="hidden"),this._element.classList.add(km),this._queueCallback(()=>{this._element.classList.remove(km),this._queueCallback(()=>{this._element.style.overflowY=se},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const z=this._element.scrollHeight>document.documentElement.clientHeight,se=this._scrollBar.getWidth(),Me=se>0;if(Me&&!z){const _=F()?"paddingLeft":"paddingRight";this._element.style[_]=`${se}px`}if(!Me&&z){const _=F()?"paddingRight":"paddingLeft";this._element.style[_]=`${se}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(z,se){return this.each(function(){const Me=Xc.getOrCreateInstance(this,z);if(typeof z=="string"){if(Me[z]===void 0)throw new TypeError(`No method named "${z}"`);Me[z](se)}})}}Ee.on(document,Hh,'[data-bs-toggle="modal"]',function(ve){const z=Je.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&ve.preventDefault(),Ee.one(z,Wh,Me=>{Me.defaultPrevented||Ee.one(z,Sm,()=>{v(this)&&this.focus()})});const se=Je.findOne(".modal.show");se&&Xc.getInstance(se).hide(),Xc.getOrCreateInstance(z).toggle(this)}),yt(Xc),V(Xc);const Wl=".bs.offcanvas",Im=".data-api",Gh=`load${Wl}${Im}`,Yc="show",Am="showing",Pm="hiding",bl=".offcanvas.show",qh=`show${Wl}`,Ta=`shown${Wl}`,Ed=`hide${Wl}`,Mm=`hidePrevented${Wl}`,bc=`hidden${Wl}`,Iu=`resize${Wl}`,Kh=`click${Wl}${Im}`,Xh=`keydown.dismiss${Wl}`,Pi={backdrop:!0,keyboard:!0,scroll:!1},Cd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xl extends ot{constructor(z,se){super(z,se),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Pi}static get DefaultType(){return Cd}static get NAME(){return"offcanvas"}toggle(z){return this._isShown?this.hide():this.show(z)}show(z){this._isShown||Ee.trigger(this._element,qh,{relatedTarget:z}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Tm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Am),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Yc),this._element.classList.remove(Am),Ee.trigger(this._element,Ta,{relatedTarget:z})},this._element,!0))}hide(){this._isShown&&(Ee.trigger(this._element,Ed).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Pm),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Yc,Pm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Tm().reset(),Ee.trigger(this._element,bc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const z=!!this._config.backdrop;return new wg({className:"offcanvas-backdrop",isVisible:z,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:z?()=>{this._config.backdrop!=="static"?this.hide():Ee.trigger(this._element,Mm)}:null})}_initializeFocusTrap(){return new bd({trapElement:this._element})}_addEventListeners(){Ee.on(this._element,Xh,z=>{z.key==="Escape"&&(this._config.keyboard?this.hide():Ee.trigger(this._element,Mm))})}static jQueryInterface(z){return this.each(function(){const se=xl.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0||z.startsWith("_")||z==="constructor")throw new TypeError(`No method named "${z}"`);se[z](this)}})}}Ee.on(document,Kh,'[data-bs-toggle="offcanvas"]',function(ve){const z=Je.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this))return;Ee.one(z,bc,()=>{v(this)&&this.focus()});const se=Je.findOne(bl);se&&se!==z&&xl.getInstance(se).hide(),xl.getOrCreateInstance(z).toggle(this)}),Ee.on(window,Gh,()=>{for(const ve of Je.find(bl))xl.getOrCreateInstance(ve).show()}),Ee.on(window,Iu,()=>{for(const ve of Je.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(ve).position!=="fixed"&&xl.getOrCreateInstance(ve).hide()}),yt(xl),V(xl);const kd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Au=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Eg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Yh=(ve,z)=>{const se=ve.nodeName.toLowerCase();return z.includes(se)?!Au.has(se)||!!Eg.test(ve.nodeValue):z.filter(Me=>Me instanceof RegExp).some(Me=>Me.test(se))},Hl={allowList:kd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Cg={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zh={entry:"(string|element|function|null)",selector:"(string|element)"};class Pu extends Nt{constructor(z){super(),this._config=this._getConfig(z)}static get Default(){return Hl}static get DefaultType(){return Cg}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(z=>this._resolvePossibleFunction(z)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(z){return this._checkContent(z),this._config.content={...this._config.content,...z},this}toHtml(){const z=document.createElement("div");z.innerHTML=this._maybeSanitize(this._config.template);for(const[_,u]of Object.entries(this._config.content))this._setContent(z,u,_);const se=z.children[0],Me=this._resolvePossibleFunction(this._config.extraClass);return Me&&se.classList.add(...Me.split(" ")),se}_typeCheckConfig(z){super._typeCheckConfig(z),this._checkContent(z.content)}_checkContent(z){for(const[se,Me]of Object.entries(z))super._typeCheckConfig({selector:se,entry:Me},Zh)}_setContent(z,se,Me){const _=Je.findOne(Me,z);_&&((se=this._resolvePossibleFunction(se))?s(se)?this._putElementInTemplate(p(se),_):this._config.html?_.innerHTML=this._maybeSanitize(se):_.textContent=se:_.remove())}_maybeSanitize(z){return this._config.sanitize?(function(se,Me,_){if(!se.length)return se;if(_&&typeof _=="function")return _(se);const u=new window.DOMParser().parseFromString(se,"text/html"),m=[].concat(...u.body.querySelectorAll("*"));for(const y of m){const S=y.nodeName.toLowerCase();if(!Object.keys(Me).includes(S)){y.remove();continue}const k=[].concat(...y.attributes),R=[].concat(Me["*"]||[],Me[S]||[]);for(const O of k)Yh(O,R)||y.removeAttribute(O.nodeName)}return u.body.innerHTML})(z,this._config.allowList,this._config.sanitizeFn):z}_resolvePossibleFunction(z){return H(z,[void 0,this])}_putElementInTemplate(z,se){if(this._config.html)return se.innerHTML="",void se.append(z);se.textContent=z.textContent}}const Mu=new Set(["sanitize","allowList","sanitizeFn"]),Id="fade",xc="show",Ad=".tooltip-inner",Pd=".modal",Md="hide.bs.modal",_n="hover",ea="focus",Jh="click",Dd={AUTO:"auto",TOP:"top",RIGHT:F()?"left":"right",BOTTOM:"bottom",LEFT:F()?"right":"left"},Ld={allowList:kd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},As={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class tl extends ot{constructor(z,se){if(js===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(z,se),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ld}static get DefaultType(){return As}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ee.off(this._element.closest(Pd),Md,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const z=Ee.trigger(this._element,this.constructor.eventName("show")),se=(T(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(z.defaultPrevented||!se)return;this._disposePopper();const Me=this._getTipElement();this._element.setAttribute("aria-describedby",Me.getAttribute("id"));const{container:_}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(_.append(Me),Ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(Me),Me.classList.add(xc),"ontouchstart"in document.documentElement)for(const u of[].concat(...document.body.children))Ee.on(u,"mouseover",C);this._queueCallback(()=>{Ee.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(xc),"ontouchstart"in document.documentElement)for(const z of[].concat(...document.body.children))Ee.off(z,"mouseover",C);this._activeTrigger[Jh]=!1,this._activeTrigger[ea]=!1,this._activeTrigger[_n]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(z){const se=this._getTemplateFactory(z).toHtml();if(!se)return null;se.classList.remove(Id,xc),se.classList.add(`bs-${this.constructor.NAME}-auto`);const Me=(_=>{do _+=Math.floor(1e6*Math.random());while(document.getElementById(_));return _})(this.constructor.NAME).toString();return se.setAttribute("id",Me),this._isAnimated()&&se.classList.add(Id),se}setContent(z){this._newContent=z,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(z){return this._templateFactory?this._templateFactory.changeContent(z):this._templateFactory=new Pu({...this._config,content:z,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ad]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(z){return this.constructor.getOrCreateInstance(z.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Id)}_isShown(){return this.tip&&this.tip.classList.contains(xc)}_createPopper(z){const se=H(this._config.placement,[this,z,this._element]),Me=Dd[se.toUpperCase()];return _l(this._element,z,this._getPopperConfig(Me))}_getOffset(){const{offset:z}=this._config;return typeof z=="string"?z.split(",").map(se=>Number.parseInt(se,10)):typeof z=="function"?se=>z(se,this._element):z}_resolvePossibleFunction(z){return H(z,[this._element,this._element])}_getPopperConfig(z){const se={placement:z,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:Me=>{this._getTipElement().setAttribute("data-popper-placement",Me.state.placement)}}]};return{...se,...H(this._config.popperConfig,[void 0,se])}}_setListeners(){const z=this._config.trigger.split(" ");for(const se of z)if(se==="click")Ee.on(this._element,this.constructor.eventName("click"),this._config.selector,Me=>{const _=this._initializeOnDelegatedTarget(Me);_._activeTrigger[Jh]=!(_._isShown()&&_._activeTrigger[Jh]),_.toggle()});else if(se!=="manual"){const Me=se===_n?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),_=se===_n?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ee.on(this._element,Me,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusin"?ea:_n]=!0,m._enter()}),Ee.on(this._element,_,this._config.selector,u=>{const m=this._initializeOnDelegatedTarget(u);m._activeTrigger[u.type==="focusout"?ea:_n]=m._element.contains(u.relatedTarget),m._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Ee.on(this._element.closest(Pd),Md,this._hideModalHandler)}_fixTitle(){const z=this._element.getAttribute("title");z&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",z),this._element.setAttribute("data-bs-original-title",z),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(z,se){clearTimeout(this._timeout),this._timeout=setTimeout(z,se)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(z){const se=kt.getDataAttributes(this._element);for(const Me of Object.keys(se))Mu.has(Me)&&delete se[Me];return z={...se,...typeof z=="object"&&z?z:{}},z=this._mergeConfigObj(z),z=this._configAfterMerge(z),this._typeCheckConfig(z),z}_configAfterMerge(z){return z.container=z.container===!1?document.body:p(z.container),typeof z.delay=="number"&&(z.delay={show:z.delay,hide:z.delay}),typeof z.title=="number"&&(z.title=z.title.toString()),typeof z.content=="number"&&(z.content=z.content.toString()),z}_getDelegateConfig(){const z={};for(const[se,Me]of Object.entries(this._config))this.constructor.Default[se]!==Me&&(z[se]=Me);return z.selector=!1,z.trigger="manual",z}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(z){return this.each(function(){const se=tl.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0)throw new TypeError(`No method named "${z}"`);se[z]()}})}}V(tl);const Qh=".popover-header",Dm=".popover-body",ef={...tl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},kg={...tl.DefaultType,content:"(null|string|element|function)"};class Zc extends tl{static get Default(){return ef}static get DefaultType(){return kg}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Qh]:this._getTitle(),[Dm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(z){return this.each(function(){const se=Zc.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0)throw new TypeError(`No method named "${z}"`);se[z]()}})}}V(Zc);const wc=".bs.scrollspy",Lm=`activate${wc}`,Ig=`click${wc}`,Ag=`load${wc}.data-api`,nl="active",Rd="[href]",tf=".nav-link",Rm=`${tf}, .nav-item > ${tf}, .list-group-item`,nf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Od={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Gl extends ot{constructor(z,se){super(z,se),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return nf}static get DefaultType(){return Od}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const z of this._observableSections.values())this._observer.observe(z)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(z){return z.target=p(z.target)||document.body,z.rootMargin=z.offset?`${z.offset}px 0px -30%`:z.rootMargin,typeof z.threshold=="string"&&(z.threshold=z.threshold.split(",").map(se=>Number.parseFloat(se))),z}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ee.off(this._config.target,Ig),Ee.on(this._config.target,Ig,Rd,z=>{const se=this._observableSections.get(z.target.hash);if(se){z.preventDefault();const Me=this._rootElement||window,_=se.offsetTop-this._element.offsetTop;if(Me.scrollTo)return void Me.scrollTo({top:_,behavior:"smooth"});Me.scrollTop=_}}))}_getNewObserver(){const z={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(se=>this._observerCallback(se),z)}_observerCallback(z){const se=m=>this._targetLinks.get(`#${m.target.id}`),Me=m=>{this._previousScrollData.visibleEntryTop=m.target.offsetTop,this._process(se(m))},_=(this._rootElement||document.documentElement).scrollTop,u=_>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=_;for(const m of z){if(!m.isIntersecting){this._activeTarget=null,this._clearActiveClass(se(m));continue}const y=m.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&y){if(Me(m),!_)return}else u||y||Me(m)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const z=Je.find(Rd,this._config.target);for(const se of z){if(!se.hash||x(se))continue;const Me=Je.findOne(decodeURI(se.hash),this._element);v(Me)&&(this._targetLinks.set(decodeURI(se.hash),se),this._observableSections.set(se.hash,Me))}}_process(z){this._activeTarget!==z&&(this._clearActiveClass(this._config.target),this._activeTarget=z,z.classList.add(nl),this._activateParents(z),Ee.trigger(this._element,Lm,{relatedTarget:z}))}_activateParents(z){if(z.classList.contains("dropdown-item"))Je.findOne(".dropdown-toggle",z.closest(".dropdown")).classList.add(nl);else for(const se of Je.parents(z,".nav, .list-group"))for(const Me of Je.prev(se,Rm))Me.classList.add(nl)}_clearActiveClass(z){z.classList.remove(nl);const se=Je.find(`${Rd}.${nl}`,z);for(const Me of se)Me.classList.remove(nl)}static jQueryInterface(z){return this.each(function(){const se=Gl.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0||z.startsWith("_")||z==="constructor")throw new TypeError(`No method named "${z}"`);se[z]()}})}}Ee.on(window,Ag,()=>{for(const ve of Je.find('[data-bs-spy="scroll"]'))Gl.getOrCreateInstance(ve)}),V(Gl);const ql=".bs.tab",Pg=`hide${ql}`,Om=`hidden${ql}`,Mg=`show${ql}`,Tc=`shown${ql}`,Dg=`click${ql}`,Lg=`keydown${ql}`,$_=`load${ql}`,Rg="ArrowLeft",rf="ArrowRight",Og="ArrowUp",Vm="ArrowDown",Ps="Home",Vg="End",Sc="active",Bg="fade",Bm="show",ta=".dropdown-toggle",sf=`:not(${ta})`,Fg='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',na=`.nav-link${sf}, .list-group-item${sf}, [role="tab"]${sf}, ${Fg}`,wl=`.${Sc}[data-bs-toggle="tab"], .${Sc}[data-bs-toggle="pill"], .${Sc}[data-bs-toggle="list"]`;class ia extends ot{constructor(z){super(z),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ee.on(this._element,Lg,se=>this._keydown(se)))}static get NAME(){return"tab"}show(){const z=this._element;if(this._elemIsActive(z))return;const se=this._getActiveElem(),Me=se?Ee.trigger(se,Pg,{relatedTarget:z}):null;Ee.trigger(z,Mg,{relatedTarget:se}).defaultPrevented||Me&&Me.defaultPrevented||(this._deactivate(se,z),this._activate(z,se))}_activate(z,se){z&&(z.classList.add(Sc),this._activate(Je.getElementFromSelector(z)),this._queueCallback(()=>{z.getAttribute("role")==="tab"?(z.removeAttribute("tabindex"),z.setAttribute("aria-selected",!0),this._toggleDropDown(z,!0),Ee.trigger(z,Tc,{relatedTarget:se})):z.classList.add(Bm)},z,z.classList.contains(Bg)))}_deactivate(z,se){z&&(z.classList.remove(Sc),z.blur(),this._deactivate(Je.getElementFromSelector(z)),this._queueCallback(()=>{z.getAttribute("role")==="tab"?(z.setAttribute("aria-selected",!1),z.setAttribute("tabindex","-1"),this._toggleDropDown(z,!1),Ee.trigger(z,Om,{relatedTarget:se})):z.classList.remove(Bm)},z,z.classList.contains(Bg)))}_keydown(z){if(![Rg,rf,Og,Vm,Ps,Vg].includes(z.key))return;z.stopPropagation(),z.preventDefault();const se=this._getChildren().filter(_=>!x(_));let Me;if([Ps,Vg].includes(z.key))Me=se[z.key===Ps?0:se.length-1];else{const _=[rf,Vm].includes(z.key);Me=K(se,z.target,_,!0)}Me&&(Me.focus({preventScroll:!0}),ia.getOrCreateInstance(Me).show())}_getChildren(){return Je.find(na,this._parent)}_getActiveElem(){return this._getChildren().find(z=>this._elemIsActive(z))||null}_setInitialAttributes(z,se){this._setAttributeIfNotExists(z,"role","tablist");for(const Me of se)this._setInitialAttributesOnChild(Me)}_setInitialAttributesOnChild(z){z=this._getInnerElement(z);const se=this._elemIsActive(z),Me=this._getOuterElement(z);z.setAttribute("aria-selected",se),Me!==z&&this._setAttributeIfNotExists(Me,"role","presentation"),se||z.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(z,"role","tab"),this._setInitialAttributesOnTargetPanel(z)}_setInitialAttributesOnTargetPanel(z){const se=Je.getElementFromSelector(z);se&&(this._setAttributeIfNotExists(se,"role","tabpanel"),z.id&&this._setAttributeIfNotExists(se,"aria-labelledby",`${z.id}`))}_toggleDropDown(z,se){const Me=this._getOuterElement(z);if(!Me.classList.contains("dropdown"))return;const _=(u,m)=>{const y=Je.findOne(u,Me);y&&y.classList.toggle(m,se)};_(ta,Sc),_(".dropdown-menu",Bm),Me.setAttribute("aria-expanded",se)}_setAttributeIfNotExists(z,se,Me){z.hasAttribute(se)||z.setAttribute(se,Me)}_elemIsActive(z){return z.classList.contains(Sc)}_getInnerElement(z){return z.matches(na)?z:Je.findOne(na,z)}_getOuterElement(z){return z.closest(".nav-item, .list-group-item")||z}static jQueryInterface(z){return this.each(function(){const se=ia.getOrCreateInstance(this);if(typeof z=="string"){if(se[z]===void 0||z.startsWith("_")||z==="constructor")throw new TypeError(`No method named "${z}"`);se[z]()}})}}Ee.on(document,Dg,Fg,function(ve){["A","AREA"].includes(this.tagName)&&ve.preventDefault(),x(this)||ia.getOrCreateInstance(this).show()}),Ee.on(window,$_,()=>{for(const ve of Je.find(wl))ia.getOrCreateInstance(ve)}),V(ia);const il=".bs.toast",Sn=`mouseover${il}`,Fm=`mouseout${il}`,zm=`focusin${il}`,Du=`focusout${il}`,Jc=`hide${il}`,bn=`hidden${il}`,Nm=`show${il}`,U_=`shown${il}`,$m="hide",Lu="show",Vd="showing",zg={animation:"boolean",autohide:"boolean",delay:"number"},j_={animation:!0,autohide:!0,delay:5e3};class Bd extends ot{constructor(z,se){super(z,se),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return j_}static get DefaultType(){return zg}static get NAME(){return"toast"}show(){Ee.trigger(this._element,Nm).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove($m),I(this._element),this._element.classList.add(Lu,Vd),this._queueCallback(()=>{this._element.classList.remove(Vd),Ee.trigger(this._element,U_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Ee.trigger(this._element,Jc).defaultPrevented||(this._element.classList.add(Vd),this._queueCallback(()=>{this._element.classList.add($m),this._element.classList.remove(Vd,Lu),Ee.trigger(this._element,bn)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Lu),super.dispose()}isShown(){return this._element.classList.contains(Lu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(z,se){switch(z.type){case"mouseover":case"mouseout":this._hasMouseInteraction=se;break;case"focusin":case"focusout":this._hasKeyboardInteraction=se}if(se)return void this._clearTimeout();const Me=z.relatedTarget;this._element===Me||this._element.contains(Me)||this._maybeScheduleHide()}_setListeners(){Ee.on(this._element,Sn,z=>this._onInteraction(z,!0)),Ee.on(this._element,Fm,z=>this._onInteraction(z,!1)),Ee.on(this._element,zm,z=>this._onInteraction(z,!0)),Ee.on(this._element,Du,z=>this._onInteraction(z,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(z){return this.each(function(){const se=Bd.getOrCreateInstance(this,z);if(typeof z=="string"){if(se[z]===void 0)throw new TypeError(`No method named "${z}"`);se[z](this)}})}}return yt(Bd),V(Bd),{Alert:_e,Button:Fe,Carousel:rn,Collapse:Vr,Dropdown:Qo,Modal:Xc,Offcanvas:xl,Popover:Zc,ScrollSpy:Gl,Tab:ia,Toast:Bd,Tooltip:tl}})})(Z1)),Z1.exports}Sge();const Ege=ut({...Tn(),...mr(p2(),["fullHeight"]),...Li()},"VApp"),Cge=Lt()({name:"VApp",props:Ege(),setup(e,t){let{slots:n}=t;const i=nr(e),{layoutClasses:r,getLayoutItem:a,items:l,layoutRef:h}=v2({...e,fullHeight:!0}),{rtlClasses:s}=Ks();return Ut(()=>{var p;return B("div",{ref:h,class:Tt(["v-application",i.themeClasses.value,r.value,s.value,e.class]),style:Yt([e.style])},[B("div",{class:"v-application__wrap"},[(p=n.default)==null?void 0:p.call(n)])])}),{getLayoutItem:a,items:l,theme:i}}}),G9=ut({text:String,...Tn(),...ii()},"VToolbarTitle"),TM=Lt()({name:"VToolbarTitle",props:G9(),setup(e,t){let{slots:n}=t;return Ut(()=>{const i=!!(n.default||n.text||e.text);return ue(e.tag,{class:Tt(["v-toolbar-title",e.class]),style:Yt(e.style)},{default:()=>{var r;return[i&&B("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():e.text,(r=n.default)==null?void 0:r.call(n)])]}})}),{}}}),kge=[null,"prominent","default","comfortable","compact"],q9=ut({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>kge.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...ul(),...Tn(),...Xs(),...Hr(),...ii({tag:"header"}),...Li()},"VToolbar"),PI=Lt()({name:"VToolbar",props:q9(),setup(e,t){var C;let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=or(()=>e.color),{borderClasses:a}=zl(e),{elevationClasses:l}=To(e),{roundedClasses:h}=is(e),{themeClasses:s}=nr(e),{rtlClasses:p}=Ks(),v=nn(e.extended===null?!!((C=n.extension)!=null&&C.call(n)):e.extended),x=me(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),T=me(()=>v.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ns({VBtn:{variant:"text"}}),Ut(()=>{var F;const I=!!(e.title||n.title),P=!!(n.image||e.image),D=(F=n.extension)==null?void 0:F.call(n);return v.value=e.extended===null?!!D:e.extended,ue(e.tag,{class:Tt(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},i.value,a.value,l.value,h.value,s.value,p.value,e.class]),style:Yt([r.value,e.style])},{default:()=>[P&&B("div",{key:"image",class:"v-toolbar__image"},[n.image?ue(di,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},n.image):ue(Eh,{key:"image-img",cover:!0,src:e.image},null)]),ue(di,{defaults:{VTabs:{height:vn(x.value)}}},{default:()=>{var V,H,q;return[B("div",{class:"v-toolbar__content",style:{height:vn(x.value)}},[n.prepend&&B("div",{class:"v-toolbar__prepend"},[(V=n.prepend)==null?void 0:V.call(n)]),I&&ue(TM,{key:"title",text:e.title},{text:n.title}),(H=n.default)==null?void 0:H.call(n),n.append&&B("div",{class:"v-toolbar__append"},[(q=n.append)==null?void 0:q.call(n)])])]}}),ue(di,{defaults:{VTabs:{height:vn(T.value)}}},{default:()=>[ue(rS,null,{default:()=>[v.value&&B("div",{class:"v-toolbar__extension",style:{height:vn(T.value)}},[D])]})]})]})}),{contentHeight:x,extensionHeight:T}}}),Ige=ut({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Age(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:n}=t;let i=0,r=0;const a=it(null),l=nn(0),h=nn(0),s=nn(0),p=nn(!1),v=nn(!1),x=me(()=>Number(e.scrollThreshold)),T=me(()=>kr((x.value-l.value)/x.value||0)),C=()=>{const I=a.value;if(!I||n&&!n.value)return;i=l.value,l.value="window"in I?I.pageYOffset:I.scrollTop;const P=I instanceof Window?document.documentElement.scrollHeight:I.scrollHeight;if(r!==P){r=P;return}v.value=l.value<i,s.value=Math.abs(l.value-x.value)};return Zt(v,()=>{h.value=h.value||l.value}),Zt(p,()=>{h.value=0}),Dr(()=>{Zt(()=>e.scrollTarget,I=>{var D;const P=I?document.querySelector(I):window;P&&P!==a.value&&((D=a.value)==null||D.removeEventListener("scroll",C),a.value=P,a.value.addEventListener("scroll",C,{passive:!0}))},{immediate:!0})}),jr(()=>{var I;(I=a.value)==null||I.removeEventListener("scroll",C)}),n&&Zt(n,C,{immediate:!0}),{scrollThreshold:x,currentScroll:l,currentThreshold:s,isScrollActive:p,scrollRatio:T,isScrollingUp:v,savedScroll:h}}const Pge=ut({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...q9(),...ug(),...Ige(),height:{type:[Number,String],default:64}},"VAppBar"),Mge=Lt()({name:"VAppBar",props:Pge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=it(),r=Dn(e,"modelValue"),a=me(()=>{var H;const V=new Set(((H=e.scrollBehavior)==null?void 0:H.split(" "))??[]);return{hide:V.has("hide"),fullyHide:V.has("fully-hide"),inverted:V.has("inverted"),collapse:V.has("collapse"),elevate:V.has("elevate"),fadeImage:V.has("fade-image")}}),l=me(()=>{const V=a.value;return V.hide||V.fullyHide||V.inverted||V.collapse||V.elevate||V.fadeImage||!r.value}),{currentScroll:h,scrollThreshold:s,isScrollingUp:p,scrollRatio:v}=Age(e,{canScroll:l}),x=He(()=>a.value.hide||a.value.fullyHide),T=me(()=>e.collapse||a.value.collapse&&(a.value.inverted?v.value>0:v.value===0)),C=me(()=>e.flat||a.value.fullyHide&&!r.value||a.value.elevate&&(a.value.inverted?h.value>0:h.value===0)),I=me(()=>a.value.fadeImage?a.value.inverted?1-v.value:v.value:void 0),P=me(()=>{var q,K;if(a.value.hide&&a.value.inverted)return 0;const V=((q=i.value)==null?void 0:q.contentHeight)??0,H=((K=i.value)==null?void 0:K.extensionHeight)??0;return x.value?h.value<s.value||a.value.fullyHide?V+H:V:V+H});ua(()=>!!e.scrollBehavior,()=>{Wr(()=>{x.value?a.value.inverted?r.value=h.value>s.value:r.value=p.value||h.value<s.value:r.value=!0})});const{ssrBootStyles:D}=gg(),{layoutItemStyles:F}=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:He(()=>e.location),layoutSize:P,elementSize:nn(void 0),active:r,absolute:He(()=>e.absolute)});return Ut(()=>{const V=PI.filterProps(e);return ue(PI,Dt({ref:i,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...F.value,"--v-toolbar-image-opacity":I.value,height:void 0,...D.value},e.style]},V,{collapse:T.value,flat:C.value}),n)}),{}}}),Dge=ut({...mr(tS({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),Lge=Lt()({name:"VAppBarNavIcon",props:Dge(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(gi,Dt(e,{class:["v-app-bar-nav-icon"]}),n)),{}}}),Rge=Lt()({name:"VAppBarTitle",props:G9(),setup(e,t){let{slots:n}=t;return Ut(()=>ue(TM,Dt(e,{class:"v-app-bar-title"}),n)),{}}}),Oge=ut({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Pn,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Tn(),...Lh({location:"top end"}),...Hr(),...ii(),...Li(),...Rh({transition:"scale-rotate-transition"}),...Fs()},"VBadge"),Vge=Lt()({name:"VBadge",inheritAttrs:!1,props:Oge(),setup(e,t){const{backgroundColorClasses:n,backgroundColorStyles:i}=or(()=>e.color),{roundedClasses:r}=is(e),{t:a}=pr(),{textColorClasses:l,textColorStyles:h}=jo(()=>e.textColor),{themeClasses:s}=QT(),{locationStyles:p}=pg(e,!0,x=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(x)?Number(e.offsetY??0):["left","right"].includes(x)?Number(e.offsetX??0):0)),{dimensionStyles:v}=zs(e);return Ut(()=>{const x=Number(e.content),T=!e.max||isNaN(x)?e.content:x<=Number(e.max)?x:`${e.max}+`,[C,I]=Kk(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return ue(e.tag,Dt({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},I,{style:e.style}),{default:()=>{var P,D;return[B("div",{class:"v-badge__wrapper"},[(D=(P=t.slots).default)==null?void 0:D.call(P),ue($a,{transition:e.transition},{default:()=>{var F,V;return[Oi(B("span",Dt({class:["v-badge__badge",s.value,n.value,r.value,l.value],style:[i.value,h.value,v.value,e.inline?{}:p.value],"aria-atomic":"true","aria-label":a(e.label,x),"aria-live":"polite",role:"status"},C),[e.dot?void 0:t.slots.badge?(V=(F=t.slots).badge)==null?void 0:V.call(F):e.icon?ue(Di,{icon:e.icon},null):T]),[[bu,e.modelValue]])]}})])]}})}),{}}}),Bge=ut({color:String,density:String,...Tn()},"VBannerActions"),K9=Lt()({name:"VBannerActions",props:Bge(),setup(e,t){let{slots:n}=t;return ns({VBtn:{color:e.color,density:e.density,slim:!0,variant:"text"}}),Ut(()=>{var i;return B("div",{class:Tt(["v-banner-actions",e.class]),style:Yt(e.style)},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),X9=Dh("v-banner-text"),Fge=ut({avatar:String,bgColor:String,color:String,icon:Pn,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ul(),...Tn(),...Es(),...Fs(),...cg({mobile:null}),...Xs(),...Lh(),...I_(),...Hr(),...ii(),...Li()},"VBanner"),zge=Lt()({name:"VBanner",props:Fge(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=or(()=>e.bgColor),{borderClasses:a}=zl(e),{densityClasses:l}=Ka(e),{displayClasses:h,mobile:s}=Fl(e),{dimensionStyles:p}=zs(e),{elevationClasses:v}=To(e),{locationStyles:x}=pg(e),{positionClasses:T}=A_(e),{roundedClasses:C}=is(e),{themeClasses:I}=nr(e),P=He(()=>e.color),D=He(()=>e.density);ns({VBannerActions:{color:P,density:D}}),Ut(()=>{const F=!!(e.text||n.text),V=!!(e.avatar||e.icon),H=!!(V||n.prepend);return ue(e.tag,{class:Tt(["v-banner",{"v-banner--stacked":e.stacked||s.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},I.value,i.value,a.value,l.value,h.value,v.value,T.value,C.value,e.class]),style:Yt([r.value,p.value,x.value,e.style]),role:"banner"},{default:()=>{var q;return[H&&B("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?ue(di,{key:"prepend-defaults",disabled:!V,defaults:{VAvatar:{color:P.value,density:D.value,icon:e.icon,image:e.avatar}}},n.prepend):ue(dc,{key:"prepend-avatar",color:P.value,density:D.value,icon:e.icon,image:e.avatar},null)]),B("div",{class:"v-banner__content"},[F&&ue(X9,{key:"text"},{default:()=>{var K;return[((K=n.text)==null?void 0:K.call(n))??e.text]}}),(q=n.default)==null?void 0:q.call(n)]),n.actions&&ue(K9,{key:"actions"},n.actions)]}})})}}),Nge=ut({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:e=>!e||["horizontal","shift"].includes(e)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...ul(),...Tn(),...Es(),...Xs(),...Hr(),...ug({name:"bottom-navigation"}),...ii({tag:"header"}),...fg({selectedClass:"v-btn--selected"}),...Li()},"VBottomNavigation"),$ge=Lt()({name:"VBottomNavigation",props:Nge(),emits:{"update:active":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=QT(),{borderClasses:r}=zl(e),{backgroundColorClasses:a,backgroundColorStyles:l}=or(()=>e.bgColor),{densityClasses:h}=Ka(e),{elevationClasses:s}=To(e),{roundedClasses:p}=is(e),{ssrBootStyles:v}=gg(),x=me(()=>Number(e.height)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0)),T=Dn(e,"active",e.active),{layoutItemStyles:C}=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:He(()=>"bottom"),layoutSize:He(()=>T.value?x.value:0),elementSize:x,active:T,absolute:He(()=>e.absolute)});return _m(e,zP),ns({VBtn:{baseColor:He(()=>e.baseColor),color:He(()=>e.color),density:He(()=>e.density),stacked:He(()=>e.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Ut(()=>ue(e.tag,{class:Tt(["v-bottom-navigation",{"v-bottom-navigation--active":T.value,"v-bottom-navigation--grow":e.grow,"v-bottom-navigation--shift":e.mode==="shift"},i.value,a.value,r.value,h.value,s.value,p.value,e.class]),style:Yt([l.value,C.value,{height:vn(x.value)},v.value,e.style])},{default:()=>[n.default&&B("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),Y9=ut({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Xb({origin:"center center",scrollStrategy:"block",transition:{component:iS},zIndex:2400})},"VDialog"),MI=Lt()({name:"VDialog",props:Y9(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Dn(e,"modelValue"),{scopeId:a}=vg(),l=it();async function h(x){var I,P,D;const T=x.relatedTarget,C=x.target;await Gn(),r.value&&T!==C&&((I=l.value)!=null&&I.contentEl)&&((P=l.value)!=null&&P.globalTop)&&![document,l.value.contentEl].includes(C)&&!l.value.contentEl.contains(C)&&((D=o_(l.value.contentEl)[0])==null||D.focus())}function s(x){var D;if(x.key!=="Tab"||!((D=l.value)!=null&&D.contentEl))return;const T=o_(l.value.contentEl);if(!T.length)return;const C=T[0],I=T[T.length-1],P=document.activeElement;x.shiftKey&&P===C?(x.preventDefault(),I.focus()):!x.shiftKey&&P===I&&(x.preventDefault(),C.focus())}jr(()=>{document.removeEventListener("focusin",h),document.removeEventListener("keydown",s)}),Zi&&Zt(()=>r.value&&e.retainFocus,x=>{x?(document.addEventListener("focusin",h,{once:!0}),document.addEventListener("keydown",s)):(document.removeEventListener("focusin",h),document.removeEventListener("keydown",s))},{immediate:!0});function p(){var x;n("afterEnter"),(e.scrim||e.retainFocus)&&((x=l.value)!=null&&x.contentEl)&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function v(){n("afterLeave")}return Zt(r,async x=>{var T;x||(await Gn(),(T=l.value.activatorEl)==null||T.focus({preventScroll:!0}))}),Ut(()=>{const x=fd.filterProps(e),T=Dt({"aria-haspopup":"dialog"},e.activatorProps),C=Dt({tabindex:-1},e.contentProps);return ue(fd,Dt({ref:l,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},x,{modelValue:r.value,"onUpdate:modelValue":I=>r.value=I,"aria-modal":"true",activatorProps:T,contentProps:C,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:p,onAfterLeave:v},a),{activator:i.activator,default:function(){for(var I=arguments.length,P=new Array(I),D=0;D<I;D++)P[D]=arguments[D];return ue(di,{root:"VDialog"},{default:()=>{var F;return[(F=i.default)==null?void 0:F.call(i,...P)]}})}})}),So({},l)}}),Uge=ut({inset:Boolean,...Y9({transition:"bottom-sheet-transition"})},"VBottomSheet"),jge=Lt()({name:"VBottomSheet",props:Uge(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue");return Ut(()=>{const r=MI.filterProps(e);return ue(MI,Dt(r,{contentClass:["v-bottom-sheet__content",e.contentClass],modelValue:i.value,"onUpdate:modelValue":a=>i.value=a,class:["v-bottom-sheet",{"v-bottom-sheet--inset":e.inset},e.class],style:e.style}),n)}),{}}}),Wge=ut({divider:[Number,String],...Tn()},"VBreadcrumbsDivider"),Z9=Lt()({name:"VBreadcrumbsDivider",props:Wge(),setup(e,t){let{slots:n}=t;return Ut(()=>{var i;return B("li",{"aria-hidden":"true",class:Tt(["v-breadcrumbs-divider",e.class]),style:Yt(e.style)},[((i=n==null?void 0:n.default)==null?void 0:i.call(n))??e.divider])}),{}}}),Hge=ut({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Tn(),...qb(),...ii({tag:"li"})},"VBreadcrumbsItem"),J9=Lt()({name:"VBreadcrumbsItem",props:Hge(),setup(e,t){let{slots:n,attrs:i}=t;const r=Gb(e,i),a=me(()=>{var s;return e.active||((s=r.isActive)==null?void 0:s.value)}),{textColorClasses:l,textColorStyles:h}=jo(()=>a.value?e.activeColor:e.color);return Ut(()=>ue(e.tag,{class:Tt(["v-breadcrumbs-item",{"v-breadcrumbs-item--active":a.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:a.value&&e.activeClass},l.value,e.class]),style:Yt([h.value,e.style]),"aria-current":a.value?"page":void 0},{default:()=>{var s,p;return[r.isLink.value?B("a",Dt({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[((p=n.default)==null?void 0:p.call(n))??e.title]):((s=n.default)==null?void 0:s.call(n))??e.title]}})),{}}}),Gge=ut({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Pn,items:{type:Array,default:()=>[]},...Tn(),...Es(),...Hr(),...ii({tag:"ul"})},"VBreadcrumbs"),qge=Lt()({name:"VBreadcrumbs",props:Gge(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=or(()=>e.bgColor),{densityClasses:a}=Ka(e),{roundedClasses:l}=is(e);ns({VBreadcrumbsDivider:{divider:He(()=>e.divider)},VBreadcrumbsItem:{activeClass:He(()=>e.activeClass),activeColor:He(()=>e.activeColor),color:He(()=>e.color),disabled:He(()=>e.disabled)}});const h=me(()=>e.items.map(s=>typeof s=="string"?{item:{title:s},raw:s}:{item:s,raw:s}));return Ut(()=>{const s=!!(n.prepend||e.icon);return ue(e.tag,{class:Tt(["v-breadcrumbs",i.value,a.value,l.value,e.class]),style:Yt([r.value,e.style])},{default:()=>{var p;return[s&&B("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?ue(di,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},n.prepend):ue(Di,{key:"prepend-icon",start:!0,icon:e.icon},null)]),h.value.map((v,x,T)=>{var P;let{item:C,raw:I}=v;return B(ln,null,[((P=n.item)==null?void 0:P.call(n,{item:C,index:x}))??ue(J9,Dt({key:x,disabled:x>=T.length-1},typeof C=="string"?{title:C}:C),{default:n.title?()=>{var D;return(D=n.title)==null?void 0:D.call(n,{item:C,index:x})}:void 0}),x<T.length-1&&ue(Z9,null,{default:n.divider?()=>{var D;return(D=n.divider)==null?void 0:D.call(n,{item:I,index:x})}:void 0})])}),(p=n.default)==null?void 0:p.call(n)]}})}),{}}}),Kge=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:r}=e,a=.5,l=16;e.offsetX=n-t,e.offsetY=r-i,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-l&&e.left(e),e.right&&n>t+l&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&r<i-l&&e.up(e),e.down&&r>i+l&&e.down(e))};function Xge(e,t){var i;const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,(i=t.start)==null||i.call(t,{originalEvent:e,...t})}function Yge(e,t){var i;const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,(i=t.end)==null||i.call(t,{originalEvent:e,...t}),Kge(t)}function Zge(e,t){var i;const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,(i=t.move)==null||i.call(t,{originalEvent:e,...t})}function Jge(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>Xge(n,t),touchend:n=>Yge(n,t),touchmove:n=>Zge(n,t)}}function Qge(e,t){var h;const n=t.value,i=n!=null&&n.parent?e.parentElement:e,r=(n==null?void 0:n.options)??{passive:!0},a=(h=t.instance)==null?void 0:h.$.uid;if(!i||a===void 0)return;const l=Jge(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[a]=l,BN(l).forEach(s=>{i.addEventListener(s,l[s],r)})}function eve(e,t){var a,l;const n=(a=t.value)!=null&&a.parent?e.parentElement:e,i=(l=t.instance)==null?void 0:l.$.uid;if(!(n!=null&&n._touchHandlers)||i===void 0)return;const r=n._touchHandlers[i];BN(r).forEach(h=>{n.removeEventListener(h,r[h])}),delete n._touchHandlers[i]}const lT={mounted:Qge,unmounted:eve},Q9=Symbol.for("vuetify:v-window"),e7=Symbol.for("vuetify:v-window-group"),mS=ut({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},crossfade:Boolean,transitionDuration:Number,...Tn(),...ii(),...Li()},"VWindow"),Qp=Lt()({name:"VWindow",directives:{vTouch:lT},props:mS(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{isRtl:r}=Ks(),{t:a}=pr(),l=_m(e,e7),h=it(),s=me(()=>r.value?!e.reverse:e.reverse),p=nn(!1),v=me(()=>{if(e.crossfade)return"v-window-crossfade-transition";const q=e.direction==="vertical"?"y":"x",ie=(s.value?!p.value:p.value)?"-reverse":"";return`v-window-${q}${ie}-transition`}),x=nn(0),T=it(void 0),C=me(()=>l.items.value.findIndex(q=>l.selected.value.includes(q.id)));Zt(C,(q,K)=>{let ie;const X={left:0,top:0};Zi&&K>=0&&(ie=YT(h.value),X.left=ie==null?void 0:ie.scrollLeft,X.top=ie==null?void 0:ie.scrollTop);const $=l.items.value.length,G=$-1;$<=2?p.value=q<K:q===G&&K===0?p.value=!0:q===0&&K===G?p.value=!1:p.value=q<K,Gn(()=>{if(!Zi||!ie)return;ie.scrollTop!==X.top&&ie.scrollTo({...X,behavior:"instant"}),requestAnimationFrame(()=>{if(!ie)return;ie.scrollTop!==X.top&&ie.scrollTo({...X,behavior:"instant"})})})},{flush:"sync"}),Or(Q9,{transition:v,isReversed:p,transitionCount:x,transitionHeight:T,rootRef:h});const I=He(()=>e.continuous||C.value!==0),P=He(()=>e.continuous||C.value!==l.items.value.length-1);function D(){I.value&&l.prev()}function F(){P.value&&l.next()}const V=me(()=>{const q=[],K={icon:r.value?e.nextIcon:e.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:l.prev,"aria-label":a("$vuetify.carousel.prev")};q.push(I.value?n.prev?n.prev({props:K}):ue(gi,K,null):B("div",null,null));const ie={icon:r.value?e.prevIcon:e.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:l.next,"aria-label":a("$vuetify.carousel.next")};return q.push(P.value?n.next?n.next({props:ie}):ue(gi,ie,null):B("div",null,null)),q}),H=me(()=>e.touch===!1?e.touch:{...{left:()=>{s.value?D():F()},right:()=>{s.value?F():D()},start:K=>{let{originalEvent:ie}=K;ie.stopPropagation()}},...e.touch===!0?{}:e.touch});return Ut(()=>Oi(ue(e.tag,{ref:h,class:Tt(["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover","v-window--vertical-arrows":!!e.verticalArrows,"v-window--crossfade":!!e.crossfade},i.value,e.class]),style:Yt([e.style,e.transitionDuration&&!ud?{"--v-window-transition-duration":vn(e.transitionDuration,"ms")}:void 0])},{default:()=>{var q,K;return[B("div",{class:"v-window__container",style:{height:T.value}},[(q=n.default)==null?void 0:q.call(n,{group:l}),e.showArrows!==!1&&B("div",{class:Tt(["v-window__controls",{"v-window__controls--left":e.verticalArrows==="left"||e.verticalArrows===!0},{"v-window__controls--right":e.verticalArrows==="right"}])},[V.value])]),(K=n.additional)==null?void 0:K.call(n,{group:l})]}}),[[lT,H.value]])),{group:l}}}),tve=ut({color:String,cycle:Boolean,delimiterIcon:{type:Pn,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...mS({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),nve=Lt()({name:"VCarousel",props:tve(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),{t:r}=pr(),a=it();let l=-1;Zt(i,s),Zt(()=>e.interval,s),Zt(()=>e.cycle,p=>{p?s():window.clearTimeout(l)}),Dr(h);function h(){!e.cycle||!a.value||(l=window.setTimeout(a.value.group.next,Number(e.interval)>0?Number(e.interval):6e3))}function s(){window.clearTimeout(l),window.requestAnimationFrame(h)}return Ut(()=>{const p=Qp.filterProps(e);return ue(Qp,Dt({ref:a},p,{modelValue:i.value,"onUpdate:modelValue":v=>i.value=v,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:vn(e.height)},e.style]}),{default:n.default,additional:v=>{let{group:x}=v;return B(ln,null,[!e.hideDelimiters&&B("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[x.items.value.length>0&&ue(di,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[x.items.value.map((T,C)=>{const I={id:`carousel-item-${T.id}`,"aria-label":r("$vuetify.carousel.ariaLabel.delimiter",C+1,x.items.value.length),class:["v-carousel__controls__item",x.isSelected(T.id)&&"v-btn--active"],onClick:()=>x.select(T.id,!0)};return n.item?n.item({props:I,item:T}):ue(gi,Dt(T,I),null)})]})]),e.progress&&ue(jb,{absolute:!0,class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(x.getItemIndex(i.value)+1)/x.items.value.length*100},null)])},prev:n.prev,next:n.next})}),{}}}),pS=ut({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Tn(),...mg(),...JP()},"VWindowItem"),eg=Lt()({name:"VWindowItem",directives:{vTouch:lT},props:pS(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=ki(Q9),r=am(e,e7),{isBooted:a}=gg();if(!i||!r)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const l=nn(!1),h=me(()=>a.value&&(i.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function s(){!l.value||!i||(l.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function p(){var I;l.value||!i||(l.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=vn((I=i.rootRef.value)==null?void 0:I.clientHeight)),i.transitionCount.value+=1)}function v(){s()}function x(I){l.value&&Gn(()=>{!h.value||!l.value||!i||(i.transitionHeight.value=vn(I.clientHeight))})}const T=me(()=>{const I=i.isReversed.value?e.reverseTransition:e.transition;return h.value?{name:typeof I!="string"?i.transition.value:I,onBeforeEnter:p,onAfterEnter:s,onEnterCancelled:v,onBeforeLeave:p,onAfterLeave:s,onLeaveCancelled:v,onEnter:x}:!1}),{hasContent:C}=QP(e,r.isSelected);return Ut(()=>ue($a,{transition:T.value,disabled:!a.value},{default:()=>{var I;return[Oi(B("div",{class:Tt(["v-window-item",r.selectedClass.value,e.class]),style:Yt(e.style)},[C.value&&((I=n.default)==null?void 0:I.call(n))]),[[bu,r.isSelected.value]])]}})),{groupItem:r}}}),ive=ut({...O2(),...pS()},"VCarouselItem"),rve=Lt()({name:"VCarouselItem",inheritAttrs:!1,props:ive(),setup(e,t){let{slots:n,attrs:i}=t;Ut(()=>{const r=Eh.filterProps(e),a=eg.filterProps(e);return ue(eg,Dt({class:["v-carousel-item",e.class]},a),{default:()=>[ue(Eh,Dt(i,r),n)]})})}}),sve=Dh("v-code","code"),ove=ut({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Tn()},"VColorPickerCanvas"),ave=hc({name:"VColorPickerCanvas",props:ove(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:n}=t;const i=nn(!1),r=it(),a=nn(parseFloat(e.width)),l=nn(parseFloat(e.height)),h=it({x:0,y:0}),s=me({get:()=>h.value,set(D){var H,q;if(!r.value)return;const{x:F,y:V}=D;h.value=D,n("update:color",{h:((H=e.color)==null?void 0:H.h)??0,s:kr(F,0,a.value)/a.value,v:1-kr(V,0,l.value)/l.value,a:((q=e.color)==null?void 0:q.a)??1})}}),p=me(()=>{const{x:D,y:F}=s.value,V=parseInt(e.dotSize,10)/2;return{width:vn(e.dotSize),height:vn(e.dotSize),transform:`translate(${vn(D-V)}, ${vn(F-V)})`}}),{resizeRef:v}=Nc(D=>{var H;if(!((H=v.el)!=null&&H.offsetParent))return;const{width:F,height:V}=D[0].contentRect;a.value=F,l.value=V});function x(D,F,V){const{left:H,top:q,width:K,height:ie}=V;s.value={x:kr(D-H,0,K),y:kr(F-q,0,ie)}}function T(D){D.type==="mousedown"&&D.preventDefault(),!e.disabled&&(C(D),window.addEventListener("mousemove",C),window.addEventListener("mouseup",I),window.addEventListener("touchmove",C),window.addEventListener("touchend",I))}function C(D){if(e.disabled||!r.value)return;i.value=!0;const F=Dne(D);x(F.clientX,F.clientY,r.value.getBoundingClientRect())}function I(){window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",I),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",I)}function P(){var q;if(!r.value)return;const D=r.value,F=D.getContext("2d");if(!F)return;const V=F.createLinearGradient(0,0,D.width,0);V.addColorStop(0,"hsla(0, 0%, 100%, 1)"),V.addColorStop(1,`hsla(${((q=e.color)==null?void 0:q.h)??0}, 100%, 50%, 1)`),F.fillStyle=V,F.fillRect(0,0,D.width,D.height);const H=F.createLinearGradient(0,0,0,D.height);H.addColorStop(0,"hsla(0, 0%, 0%, 0)"),H.addColorStop(1,"hsla(0, 0%, 0%, 1)"),F.fillStyle=H,F.fillRect(0,0,D.width,D.height)}return Zt(()=>{var D;return(D=e.color)==null?void 0:D.h},P,{immediate:!0}),Zt(()=>[a.value,l.value],(D,F)=>{P(),h.value={x:s.value.x*D[0]/F[0],y:s.value.y*D[1]/F[1]}},{flush:"post"}),Zt(()=>e.color,()=>{if(i.value){i.value=!1;return}h.value=e.color?{x:e.color.s*a.value,y:(1-e.color.v)*l.value}:{x:0,y:0}},{deep:!0,immediate:!0}),Dr(()=>P()),Ut(()=>B("div",{ref:v,class:Tt(["v-color-picker-canvas",e.class]),style:Yt(e.style),onMousedown:T,onTouchstartPassive:T},[B("canvas",{ref:r,width:a.value,height:l.value},null),e.color&&B("div",{class:Tt(["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}]),style:Yt(p.value)},null)])),{}}});function lve(e,t){if(t){const{a:n,...i}=e;return i}return e}function cve(e,t){if(t==null||typeof t=="string"){const n=e.a!==1;if(t!=null&&t.startsWith("rgb(")){const{r,g:a,b:l,a:h}=dd(e);return`rgb(${r} ${a} ${l}`+(n?` / ${h})`:")")}else if(t!=null&&t.startsWith("hsl(")){const{h:r,s:a,l,a:h}=Jk(e);return`hsl(${r} ${Math.round(a*100)} ${Math.round(l*100)}`+(n?` / ${h})`:")")}const i=e2(e);return e.a===1?i.slice(0,7):i}if(typeof t=="object"){let n;return wp(t,["r","g","b"])?n=dd(e):wp(t,["h","s","l"])?n=Jk(e):wp(t,["h","s","v"])&&(n=e),lve(n,!wp(t,["a"])&&e.a===1)}return e}const kv={h:0,s:0,v:0,a:1},DI={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)}),localeKey:"redInput"},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)}),localeKey:"greenInput"},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)}),localeKey:"blueInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:dd,from:zb};var MV;const uve={...DI,inputs:(MV=DI.inputs)==null?void 0:MV.slice(0,3)},LI={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)}),localeKey:"hueInput"},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)}),localeKey:"saturationInput"},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)}),localeKey:"lightnessInput"},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)}),localeKey:"alphaInput"}],to:Jk,from:AP},dve={...LI,inputs:LI.inputs.slice(0,3)},t7={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t,localeKey:"hexaInput"}],to:e2,from:iie},hve={...t7,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t,localeKey:"hexInput"}]},Np={rgb:uve,rgba:DI,hsl:dve,hsla:LI,hex:hve,hexa:t7},fve=e=>{let{label:t,...n}=e;return B("div",{class:"v-color-picker-edit__input"},[B("input",Kj(HB(n)),null),B("span",null,[t])])},mve=ut({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Np).includes(e)},modes:{type:Array,default:()=>Object.keys(Np),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Np).includes(t))},...Tn()},"VColorPickerEdit"),pve=hc({name:"VColorPickerEdit",props:mve(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=pr(),r=me(()=>e.modes.map(l=>({...Np[l],name:l}))),a=me(()=>{var s;const l=r.value.find(p=>p.name===e.mode);if(!l)return[];const h=e.color?l.to(e.color):null;return(s=l.inputs)==null?void 0:s.map(p=>{let{getValue:v,getColor:x,localeKey:T,...C}=p;return{...l.inputProps,...C,ariaLabel:i(`$vuetify.colorPicker.ariaLabel.${T}`),disabled:e.disabled,value:h&&v(h),onChange:I=>{const P=I.target;P&&n("update:color",l.from(x(h??l.to(kv),P.value)))}}})});return Ut(()=>{var l;return B("div",{class:Tt(["v-color-picker-edit",e.class]),style:Yt(e.style)},[(l=a.value)==null?void 0:l.map(h=>ue(fve,h,null)),r.value.length>1&&ue(gi,{icon:"$unfold",size:"x-small",variant:"plain","aria-label":i("$vuetify.colorPicker.ariaLabel.changeFormat"),onClick:()=>{const h=r.value.findIndex(s=>s.name===e.mode);n("update:mode",r.value[(h+1)%r.value.length].name)}},null)])}),{}}}),n7=ut({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,hideEyeDropper:Boolean,eyeDropperIcon:{type:Pn,default:"$eyeDropper"},...Tn()},"VColorPickerPreview"),gve=hc({name:"VColorPickerPreview",props:n7(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;const{t:i}=pr(),r=new AbortController;oA(()=>r.abort());async function a(){if(!K5||e.disabled)return;const l=new window.EyeDropper;try{const h=await l.open({signal:r.signal}),s=zb(oc(h.sRGBHex));n("update:color",{...e.color??kv,...s})}catch{}}return Ut(()=>{var l,h;return B("div",{class:Tt(["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class]),style:Yt(e.style)},[K5&&!e.hideEyeDropper&&B("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[ue(gi,{"aria-label":i("$vuetify.colorPicker.ariaLabel.eyedropper"),density:"comfortable",disabled:e.disabled,icon:e.eyeDropperIcon,variant:"plain",onClick:a},null)]),B("div",{class:"v-color-picker-preview__dot"},[B("div",{style:{background:ZN(e.color??kv)}},null)]),B("div",{class:"v-color-picker-preview__sliders"},[ue(gb,{class:"v-color-picker-preview__track v-color-picker-preview__hue",name:i("$vuetify.colorPicker.ariaLabel.hueSlider"),modelValue:(l=e.color)==null?void 0:l.h,"onUpdate:modelValue":s=>n("update:color",{...e.color??kv,h:s}),step:1,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&ue(gb,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",name:i("$vuetify.colorPicker.ariaLabel.alphaSlider"),modelValue:((h=e.color)==null?void 0:h.a)??1,"onUpdate:modelValue":s=>n("update:color",{...e.color??kv,a:s}),step:.01,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),vve={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},_ve={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},yve={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},bve={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},xve={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},wve={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Tve={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Sve={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Eve={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},Cve={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},kve={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Ive={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Ave={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Pve={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},Mve={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},Dve={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Lve={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Rve={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},Ove={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Vve={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},Bve={red:vve,pink:_ve,purple:yve,deepPurple:bve,indigo:xve,blue:wve,lightBlue:Tve,cyan:Sve,teal:Eve,green:Cve,lightGreen:kve,lime:Ive,yellow:Ave,amber:Pve,orange:Mve,deepOrange:Dve,brown:Lve,blueGrey:Rve,grey:Ove,shades:Vve},Fve=ut({swatches:{type:Array,default:()=>zve(Bve)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Tn()},"VColorPickerSwatches");function zve(e){return Object.keys(e).map(t=>{const n=e[t];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const Nve=hc({name:"VColorPickerSwatches",props:Fve(),emits:{"update:color":e=>!0},setup(e,t){let{emit:n}=t;return Ut(()=>B("div",{class:Tt(["v-color-picker-swatches",e.class]),style:Yt([{maxHeight:vn(e.maxHeight)},e.style])},[B("div",null,[e.swatches.map(i=>B("div",{class:"v-color-picker-swatches__swatch"},[i.map(r=>{const a=oc(r),l=zb(a),h=YN(a);return B("div",{class:"v-color-picker-swatches__color",onClick:()=>l&&n("update:color",l)},[B("div",{style:{background:h}},[e.color&&xo(e.color,l)?ue(Di,{size:"x-small",icon:"$success",color:aie(r,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),$ve=Dh("v-picker-title"),gS=ut({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...sM()},"VPicker"),g_=Lt()({name:"VPicker",props:gS(),setup(e,t){let{slots:n}=t;const{backgroundColorClasses:i,backgroundColorStyles:r}=or(()=>e.color);return Ut(()=>{const a=rd.filterProps(e),l=!e.hideTitle&&!!(e.title||n.title);return ue(rd,Dt(a,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!n.actions},e.class],style:e.style}),{default:()=>{var h;return[!e.hideHeader&&B("div",{key:"header",class:Tt([i.value]),style:Yt([r.value])},[l&&ue($ve,{key:"picker-title"},{default:()=>{var s;return[((s=n.title)==null?void 0:s.call(n))??e.title]}}),n.header&&B("div",{class:"v-picker__header"},[n.header()])]),B("div",{class:"v-picker__body"},[(h=n.default)==null?void 0:h.call(n)]),n.actions&&ue(di,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[B("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),Uve=ut({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(Np).includes(e)},modes:{type:Array,default:()=>Object.keys(Np),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(Np).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...gS({hideHeader:!0}),...Bl(n7(),["hideEyeDropper","eyeDropperIcon"])},"VColorPicker"),jve=hc({name:"VColorPicker",props:Uve(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"mode"),r=it(null),a=Dn(e,"modelValue",void 0,v=>{if(v==null||v==="")return null;let x;try{x=zb(oc(v))}catch{return null}return x},v=>v?cve(v,e.modelValue):null),l=me(()=>a.value?{...a.value,h:r.value??a.value.h}:null),{rtlClasses:h}=Ks();let s=!0;Zt(a,v=>{if(!s){s=!0;return}v&&(r.value=v.h)},{immediate:!0});const p=v=>{s=!1,r.value=v.h,a.value=v};return y_(()=>{e.modes.includes(i.value)||(i.value=e.modes[0])}),ns({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),Ut(()=>{const v=g_.filterProps(e);return ue(g_,Dt(v,{class:["v-color-picker",h.value,e.class],style:[{"--v-color-picker-color-hsv":ZN({...l.value??kv,a:1})},e.style]}),{...n,default:()=>B(ln,null,[!e.hideCanvas&&ue(ave,{key:"canvas",color:l.value,"onUpdate:color":p,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&B("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&ue(gve,{key:"preview",color:l.value,"onUpdate:color":p,hideAlpha:!i.value.endsWith("a"),disabled:e.disabled,hideEyeDropper:e.hideEyeDropper,eyeDropperIcon:e.eyeDropperIcon},null),!e.hideInputs&&ue(pve,{key:"edit",modes:e.modes,mode:i.value,"onUpdate:mode":x=>i.value=x,color:l.value,"onUpdate:color":p,disabled:e.disabled},null)]),e.showSwatches&&ue(Nve,{key:"swatches",color:l.value,"onUpdate:color":p,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)])})}),{}}}),Wve=ut({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...L_({filterKeys:["title"]}),...nM({hideNoData:!0,returnObject:!0}),...mr(Zb({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VCombobox"),Hve=Lt()({name:"VCombobox",props:Wve(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,t){var _e;let{emit:n,slots:i}=t;const{t:r}=pr(),a=it(),l=nn(!1),h=nn(!0),s=nn(!1),p=it(),v=it(),x=nn(-1);let T=!1;const{items:C,transformIn:I,transformOut:P}=qP(e),{textColorClasses:D,textColorStyles:F}=jo(()=>{var fe;return(fe=a.value)==null?void 0:fe.color}),V=Dn(e,"modelValue",[],fe=>I(Yr(fe)),fe=>{const Fe=P(fe);return e.multiple?Fe:Fe[0]??null}),H=M_(e),q=me(()=>!!(e.chips||i.chip)),K=me(()=>q.value||!!i.selection),ie=nn(!e.multiple&&!K.value?((_e=V.value[0])==null?void 0:_e.title)??"":""),X=nn(null),$=me({get:()=>ie.value,set:async fe=>{var Fe;if(ie.value=fe??"",fe===null||fe===""&&!e.multiple&&!K.value?V.value=[]:!e.multiple&&!K.value&&(V.value=[cu(e,fe)],Gn(()=>{var rt;return(rt=v.value)==null?void 0:rt.scrollToIndex(0)})),fe&&e.multiple&&((Fe=e.delimiters)!=null&&Fe.length)){const rt=e.delimiters.map(Hw).join("|"),pt=fe.split(new RegExp(`(?:${rt})+`));if(pt.length>1){for(let vt of pt)vt=vt.trim(),vt&&(Ne(cu(e,vt)),await Gn());ie.value=""}}fe||(x.value=-1),h.value=!fe}}),G=me(()=>typeof e.counterValue=="function"?e.counterValue(V.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?V.value.length:$.value.length),{filteredItems:j,getMatches:te}=R_(e,C,()=>X.value??(e.alwaysFilter||!h.value?$.value:"")),Z=me(()=>e.hideSelected&&X.value===null?j.value.filter(fe=>!V.value.some(Fe=>Fe.value===fe.value)):j.value),ee=me(()=>e.hideNoData&&!Z.value.length||H.isReadonly.value||H.isDisabled.value),be=Dn(e,"menu"),Ie=me({get:()=>be.value,set:fe=>{var Fe;be.value&&!fe&&((Fe=p.value)!=null&&Fe.openChildren.size)||fe&&ee.value||(be.value=fe)}}),{menuId:Ve,ariaExpanded:Ke,ariaControls:Xe,ariaLabel:Pe}=tM(e,Ie);Zt(ie,fe=>{T?Gn(()=>T=!1):l.value&&!Ie.value&&(Ie.value=!0),n("update:search",fe)}),Zt(V,fe=>{var Fe;!e.multiple&&!K.value&&(ie.value=((Fe=fe[0])==null?void 0:Fe.title)??"")});const $e=me(()=>V.value.map(fe=>fe.value)),Ee=me(()=>{var Fe;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&$.value===((Fe=Z.value[0])==null?void 0:Fe.title))&&Z.value.length>0&&!h.value&&!s.value}),We=it(),Ze=eM(We,a);function ct(fe){T=!0,Gn(()=>T=!1),e.openOnClear&&(Ie.value=!0)}function kt(){ee.value||(Ie.value=!0)}function Nt(fe){ee.value||(l.value&&(fe.preventDefault(),fe.stopPropagation()),Ie.value=!Ie.value)}function ot(fe){var Fe;(l_(fe)||fe.key==="Backspace")&&((Fe=a.value)==null||Fe.focus())}function dt(fe){var pt,vt,gt,mt;if(Pne(fe)||H.isReadonly.value)return;const Fe=(pt=a.value)==null?void 0:pt.selectionStart,rt=V.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(fe.key)&&fe.preventDefault(),["Enter","ArrowDown"].includes(fe.key)&&(Ie.value=!0),["Escape"].includes(fe.key)&&(Ie.value=!1),Ee.value&&["Enter","Tab"].includes(fe.key)&&!V.value.some(Vt=>{let{value:Gt}=Vt;return Gt===Z.value[0].value})&&Ne(j.value[0]),fe.key==="ArrowDown"&&Ee.value&&((vt=We.value)==null||vt.focus("next")),fe.key==="Enter"&&$.value&&(Ne(cu(e,$.value),!0,!0),K.value&&(ie.value="")),["Backspace","Delete"].includes(fe.key)){if(!e.multiple&&K.value&&V.value.length>0&&!$.value)return Ne(V.value[0],!1);if(~x.value){fe.preventDefault();const Vt=x.value;Ne(V.value[x.value],!1),x.value=Vt>=rt-1?rt-2:Vt}else fe.key==="Backspace"&&!$.value&&(x.value=rt-1);return}if(e.multiple)if(fe.key==="ArrowLeft"){if(x.value<0&&Fe&&Fe>0)return;const Vt=x.value>-1?x.value-1:rt-1;V.value[Vt]?x.value=Vt:(x.value=-1,(gt=a.value)==null||gt.setSelectionRange($.value.length,$.value.length))}else if(fe.key==="ArrowRight"){if(x.value<0)return;const Vt=x.value+1;V.value[Vt]?x.value=Vt:(x.value=-1,(mt=a.value)==null||mt.setSelectionRange(0,0))}else~x.value&&l_(fe)&&(x.value=-1)}function Je(){var fe;e.eager&&((fe=v.value)==null||fe.calculateVisibleItems())}function yt(){var fe;l.value&&((fe=a.value)==null||fe.focus()),h.value=!0,X.value=null}function Ne(fe){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!fe||fe.props.disabled))if(e.multiple){const pt=V.value.findIndex(gt=>(e.valueComparator||xo)(gt.value,fe.value)),vt=Fe??!~pt;if(~pt){const gt=vt?[...V.value,fe]:[...V.value];gt.splice(pt,1),V.value=gt}else vt&&(V.value=[...V.value,fe]);e.clearOnSelect&&($.value="")}else{const pt=Fe!==!1;V.value=pt?[fe]:[],(!h.value||e.alwaysFilter)&&ie.value&&(X.value=ie.value),ie.value=pt&&!K.value?fe.title:"",Gn(()=>{Ie.value=rt,h.value=!0})}}function le(fe){l.value=!0,setTimeout(()=>{s.value=!0})}function we(fe){s.value=!1}return Zt(l,(fe,Fe)=>{if(!(fe||fe===Fe)&&(x.value=-1,Ie.value=!1,$.value)){if(e.multiple){Ne(cu(e,$.value));return}if(!K.value)return;V.value.some(rt=>{let{title:pt}=rt;return pt===$.value})?ie.value="":Ne(cu(e,$.value))}}),Zt(Ie,fe=>{if(!e.hideSelected&&fe&&V.value.length&&h.value){const Fe=Z.value.findIndex(rt=>V.value.some(pt=>(e.valueComparator||xo)(pt.value,rt.value)));Zi&&window.requestAnimationFrame(()=>{var rt;Fe>=0&&((rt=v.value)==null||rt.scrollToIndex(Fe))})}fe&&(X.value=null)}),Zt(C,(fe,Fe)=>{Ie.value||l.value&&!Fe.length&&fe.length&&(Ie.value=!0)}),Ut(()=>{const fe=!!(!e.hideNoData||Z.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),Fe=V.value.length>0,rt=Ch.filterProps(e);return ue(Ch,Dt({ref:a},rt,{modelValue:$.value,"onUpdate:modelValue":pt=>$.value=pt,focused:l.value,"onUpdate:focused":pt=>l.value=pt,validationValue:V.externalValue,counterValue:G.value,dirty:Fe,class:["v-combobox",{"v-combobox--active-menu":Ie.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!K.value,"v-combobox--selecting-index":x.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:H.isReadonly.value,placeholder:Fe?void 0:e.placeholder,"onClick:clear":ct,"onMousedown:control":kt,onKeydown:dt,"aria-expanded":Ke.value,"aria-controls":Xe.value}),{...i,default:()=>B(ln,null,[ue(h_,Dt({id:Ve.value,ref:p,modelValue:Ie.value,"onUpdate:modelValue":pt=>Ie.value=pt,activator:"parent",contentClass:"v-combobox__content",disabled:ee.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Je,onAfterLeave:yt},e.menuProps),{default:()=>[fe&&ue(d_,Dt({ref:We,filterable:!0,selected:$e.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:pt=>pt.preventDefault(),selectable:!0,onKeydown:ot,onFocusin:le,onFocusout:we,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Ze,e.listProps),{default:()=>{var pt,vt,gt;return[(pt=i["prepend-item"])==null?void 0:pt.call(i),!Z.value.length&&!e.hideNoData&&(((vt=i["no-data"])==null?void 0:vt.call(i))??ue(yu,{key:"no-data",title:r(e.noDataText)},null)),ue(oS,{ref:v,renderless:!0,items:Z.value,itemKey:"value"},{default:mt=>{var On,qn,zt;let{item:Vt,index:Gt,itemRef:gn}=mt;const In=Dt(Vt.props,{ref:gn,key:Vt.value,active:Ee.value&&Gt===0?!0:void 0,onClick:()=>Ne(Vt,null)});return Vt.type==="divider"?((On=i.divider)==null?void 0:On.call(i,{props:Vt.raw,index:Gt}))??ue(ac,Dt(Vt.props,{key:`divider-${Gt}`}),null):Vt.type==="subheader"?((qn=i.subheader)==null?void 0:qn.call(i,{props:Vt.raw,index:Gt}))??ue(D_,Dt(Vt.props,{key:`subheader-${Gt}`}),null):((zt=i.item)==null?void 0:zt.call(i,{item:Vt,index:Gt,props:In}))??ue(yu,Dt(In,{role:"option"}),{prepend:un=>{let{isSelected:An}=un;return B(ln,null,[e.multiple&&!e.hideSelected?ue(hd,{key:Vt.value,modelValue:An,ripple:!1,tabindex:"-1",onClick:Ln=>Ln.preventDefault()},null):void 0,Vt.props.prependAvatar&&ue(dc,{image:Vt.props.prependAvatar},null),Vt.props.prependIcon&&ue(Di,{icon:Vt.props.prependIcon},null)])},title:()=>{var un;return h.value?Vt.title:C8("v-combobox",Vt.title,(un=te(Vt))==null?void 0:un.title)}})}}),(gt=i["append-item"])==null?void 0:gt.call(i)]}})]}),V.value.map((pt,vt)=>{function gt(gn){gn.stopPropagation(),gn.preventDefault(),Ne(pt,!1)}const mt={"onClick:close":gt,onKeydown(gn){gn.key!=="Enter"&&gn.key!==" "||(gn.preventDefault(),gn.stopPropagation(),gt(gn))},onMousedown(gn){gn.preventDefault(),gn.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Vt=q.value?!!i.chip:!!i.selection,Gt=Vt?XT(q.value?i.chip({item:pt,index:vt,props:mt}):i.selection({item:pt,index:vt})):void 0;if(!(Vt&&!Gt))return B("div",{key:pt.value,class:Tt(["v-combobox__selection",vt===x.value&&["v-combobox__selection--selected",D.value]]),style:Yt(vt===x.value?F.value:{})},[q.value?i.chip?ue(di,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:pt.title}}},{default:()=>[Gt]}):ue(Ls,Dt({key:"chip",closable:e.closableChips,size:"small",text:pt.title,disabled:pt.props.disabled},mt),null):Gt??B("span",{class:"v-combobox__selection-text"},[pt.title,e.multiple&&vt<V.value.length-1&&B("span",{class:"v-combobox__selection-comma"},[zn(",")])])])})]),"append-inner":function(){var mt,Vt;for(var pt=arguments.length,vt=new Array(pt),gt=0;gt<pt;gt++)vt[gt]=arguments[gt];return B(ln,null,[(mt=i["append-inner"])==null?void 0:mt.call(i,...vt),(!e.hideNoData||e.items.length)&&e.menuIcon?ue(Di,{class:"v-combobox__menu-icon",color:(Vt=a.value)==null?void 0:Vt.fieldIconColor,icon:e.menuIcon,onMousedown:Nt,onClick:WN,"aria-label":Pe.value,title:Pe.value,tabindex:"-1"},null):void 0])}})}),So({isFocused:l,isPristine:h,menu:Ie,search:$,selectionIndex:x,filteredItems:j,select:Ne},a)}}),Gve=ut({modelValue:null,color:String,cancelText:{type:String,default:"$vuetify.confirmEdit.cancel"},okText:{type:String,default:"$vuetify.confirmEdit.ok"},disabled:{type:[Boolean,Array],default:void 0},hideActions:Boolean},"VConfirmEdit"),qve=Lt()({name:"VConfirmEdit",props:Gve(),emits:{cancel:()=>!0,save:e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=Dn(e,"modelValue"),a=it();Wr(()=>{a.value=structuredClone(n4(r.value))});const{t:l}=pr(),h=me(()=>xo(r.value,a.value));function s(P){return typeof e.disabled=="boolean"?e.disabled:Array.isArray(e.disabled)?e.disabled.includes(P):h.value}const p=me(()=>s("save")),v=me(()=>s("cancel"));function x(){r.value=a.value,n("save",a.value)}function T(){a.value=structuredClone(n4(r.value)),n("cancel")}function C(P){return B(ln,null,[ue(gi,Dt({disabled:v.value,variant:"text",color:e.color,onClick:T,text:l(e.cancelText)},P),null),ue(gi,Dt({disabled:p.value,variant:"text",color:e.color,onClick:x,text:l(e.okText)},P),null)])}let I=!1;return Ut(()=>{var P;return B(ln,null,[(P=i.default)==null?void 0:P.call(i,{model:a,save:x,cancel:T,isPristine:h.value,get actions(){return I=!0,C}}),!e.hideActions&&!I&&C()])}),{save:x,cancel:T,isPristine:h}}}),i7=ut({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),r7=Symbol.for("vuetify:datatable:expanded");function vS(e){const t=He(()=>e.expandOnClick),n=Dn(e,"expanded",e.expanded,h=>new Set(h),h=>[...h.values()]);function i(h,s){const p=new Set(n.value),v=jn(h.value);if(s)p.add(v);else{const x=[...n.value].find(T=>jn(T)===v);p.delete(x)}n.value=p}function r(h){const s=jn(h.value);return[...n.value].some(p=>jn(p)===s)}function a(h){i(h,!r(h))}const l={expand:i,expanded:n,expandOnClick:t,isExpanded:r,toggleExpand:a};return Or(r7,l),l}function s7(){const e=ki(r7);if(!e)throw new Error("foo");return e}const SM=ut({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),o7=Symbol.for("vuetify:data-table-group");function EM(e){return{groupBy:Dn(e,"groupBy")}}function _S(e){const{disableSort:t,groupBy:n,sortBy:i}=e,r=it(new Set),a=me(()=>n.value.map(v=>({...v,order:v.order??!1})).concat(t!=null&&t.value?[]:i.value));function l(v){return r.value.has(v.id)}function h(v){const x=new Set(r.value);l(v)?x.delete(v.id):x.add(v.id),r.value=x}function s(v){function x(T){const C=[];for(const I of T.items)"type"in I&&I.type==="group"?C.push(...x(I)):C.push(I);return[...new Set(C)]}return x({items:v})}const p={sortByWithGroups:a,toggleGroup:h,opened:r,groupBy:n,extractRows:s,isGroupOpen:l};return Or(o7,p),p}function a7(){const e=ki(o7);if(!e)throw new Error("Missing group!");return e}function Kve(e,t){if(!e.length)return[];const n=new Map;for(const i of e){const r=Xp(i.raw,t);n.has(r)||n.set(r,[]),n.get(r).push(i)}return n}function l7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const r=Kve(e,t[0]),a=[],l=t.slice(1);return r.forEach((h,s)=>{const p=t[0],v=`${i}_${p}_${s}`;a.push({depth:n,id:v,key:p,value:s,items:l.length?l7(h,l,n+1,v):h,type:"group"})}),a}function c7(e,t,n){const i=[];for(const r of e)"type"in r&&r.type==="group"?(r.value!=null&&i.push(r),(t.has(r.id)||r.value==null)&&(i.push(...c7(r.items,t,n)),n&&i.push({...r,type:"group-summary"}))):i.push(r);return i}function yS(e,t,n,i){return{flatItems:me(()=>{if(!t.value.length)return e.value;const a=l7(e.value,t.value.map(l=>l.key));return c7(a,n.value,ja(i))})}}function bS(e){let{page:t,itemsPerPage:n,sortBy:i,groupBy:r,search:a}=e;const l=Ss("VDataTable"),h=()=>({page:t.value,itemsPerPage:n.value,sortBy:i.value,groupBy:r.value,search:a.value});let s=null;Zt(h,p=>{xo(s,p)||(s&&s.search!==p.search&&(t.value=1),l.emit("update:options",p),s=p)},{deep:!0,immediate:!0})}const CM=ut({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),u7=Symbol.for("vuetify:data-table-pagination");function kM(e){const t=Dn(e,"page",void 0,i=>Number(i??1)),n=Dn(e,"itemsPerPage",void 0,i=>Number(i??10));return{page:t,itemsPerPage:n}}function IM(e){const{page:t,itemsPerPage:n,itemsLength:i}=e,r=me(()=>n.value===-1?0:n.value*(t.value-1)),a=me(()=>n.value===-1?i.value:Math.min(i.value,r.value+n.value)),l=me(()=>n.value===-1||i.value===0?1:Math.ceil(i.value/n.value));Zt([t,l],()=>{t.value>l.value&&(t.value=l.value)});function h(T){n.value=T,t.value=1}function s(){t.value=kr(t.value+1,1,l.value)}function p(){t.value=kr(t.value-1,1,l.value)}function v(T){t.value=kr(T,1,l.value)}const x={page:t,itemsPerPage:n,startIndex:r,stopIndex:a,pageCount:l,itemsLength:i,nextPage:s,prevPage:p,setPage:v,setItemsPerPage:h};return Or(u7,x),x}function Xve(){const e=ki(u7);if(!e)throw new Error("Missing pagination!");return e}function d7(e){const t=Ss("usePaginatedItems"),{items:n,startIndex:i,stopIndex:r,itemsPerPage:a}=e,l=me(()=>a.value<=0?n.value:n.value.slice(i.value,r.value));return Zt(l,h=>{t.emit("update:currentItems",h)},{immediate:!0}),{paginatedItems:l}}const Yve={showSelectAll:!1,allSelected:()=>[],select:e=>{var i;let{items:t,value:n}=e;return new Set(n?[(i=t[0])==null?void 0:i.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},h7={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,currentPage:n,selected:i}=e;return h7.select({items:n,value:t,selected:i})}},Zve={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:i}=e;for(const r of t)n?i.add(r.value):i.delete(r.value);return i},selectAll:e=>{let{value:t,allItems:n}=e;return new Set(t?n.map(i=>i.value):[])}},f7=ut({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:Function},"DataTable-select"),m7=Symbol.for("vuetify:data-table-selection");function xS(e,t){let{allItems:n,currentPage:i}=t;const r=Dn(e,"modelValue",e.modelValue,V=>{const H=e.valueComparator;return H?new Set(Yr(V).map(q=>{var K;return((K=n.value.find(ie=>H(q,ie.value)))==null?void 0:K.value)??q})):new Set(Yr(V).map(q=>{var K,ie;return om(q)?((K=n.value.find(X=>q===X.value))==null?void 0:K.value)??q:((ie=n.value.find(X=>xo(q,X.value)))==null?void 0:ie.value)??q}))},V=>[...V.values()]),a=me(()=>n.value.filter(V=>V.selectable)),l=me(()=>i.value.filter(V=>V.selectable)),h=me(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Yve;case"all":return Zve;case"page":default:return h7}}),s=nn(null);function p(V){return Yr(V).every(H=>r.value.has(H.value))}function v(V){return Yr(V).some(H=>r.value.has(H.value))}function x(V,H){const q=h.value.select({items:V,value:H,selected:new Set(r.value)});r.value=q}function T(V,H,q){const K=[];if(H=H??i.value.findIndex(ie=>ie.value===V.value),e.selectStrategy!=="single"&&(q!=null&&q.shiftKey)&&s.value!==null){const[ie,X]=[s.value,H].sort(($,G)=>$-G);K.push(...i.value.slice(ie,X+1).filter($=>$.selectable))}else K.push(V),s.value=H;x(K,!p([V]))}function C(V){const H=h.value.selectAll({value:V,allItems:a.value,currentPage:l.value,selected:new Set(r.value)});r.value=H}const I=me(()=>r.value.size>0),P=me(()=>{const V=h.value.allSelected({allItems:a.value,currentPage:l.value});return!!V.length&&p(V)}),D=He(()=>h.value.showSelectAll),F={toggleSelect:T,select:x,selectAll:C,isSelected:p,isSomeSelected:v,someSelected:I,allSelected:P,showSelectAll:D,lastSelectedIndex:s,selectStrategy:h};return Or(m7,F),F}function wS(){const e=ki(m7);if(!e)throw new Error("Missing selection!");return e}const p7=ut({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),g7=Symbol.for("vuetify:data-table-sort");function TS(e){const t=Dn(e,"sortBy"),n=He(()=>e.mustSort),i=He(()=>e.multiSort);return{sortBy:t,mustSort:n,multiSort:i}}function SS(e){const{sortBy:t,mustSort:n,multiSort:i,page:r}=e,a=s=>{if(s.key==null)return;let p=t.value.map(x=>({...x}))??[];const v=p.find(x=>x.key===s.key);v?v.order==="desc"?n.value&&p.length===1?v.order="asc":p=p.filter(x=>x.key!==s.key):v.order="desc":i.value?p.push({key:s.key,order:"asc"}):p=[{key:s.key,order:"asc"}],t.value=p,r&&(r.value=1)};function l(s){return!!t.value.find(p=>p.key===s.key)}const h={sortBy:t,toggleSort:a,isSorted:l};return Or(g7,h),h}function v7(){const e=ki(g7);if(!e)throw new Error("Missing sort!");return e}function AM(e,t,n,i){const r=pr();return{sortedItems:me(()=>{var l,h;return n.value.length?Jve(t.value,n.value,r.current.value,{transform:i==null?void 0:i.transform,sortFunctions:{...e.customKeySort,...(l=i==null?void 0:i.sortFunctions)==null?void 0:l.value},sortRawFunctions:(h=i==null?void 0:i.sortRawFunctions)==null?void 0:h.value}):t.value})}}function Jve(e,t,n,i){const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(l=>[l,i!=null&&i.transform?i.transform(l):l]).sort((l,h)=>{var s,p;for(let v=0;v<t.length;v++){let x=!1;const T=t[v].key,C=t[v].order??"asc";if(C===!1)continue;let I=Xp(l[1],T),P=Xp(h[1],T),D=l[0].raw,F=h[0].raw;if(C==="desc"&&([I,P]=[P,I],[D,F]=[F,D]),(s=i==null?void 0:i.sortRawFunctions)!=null&&s[T]){const V=i.sortRawFunctions[T](D,F);if(V==null)continue;if(x=!0,V)return V}if((p=i==null?void 0:i.sortFunctions)!=null&&p[T]){const V=i.sortFunctions[T](I,P);if(V==null)continue;if(x=!0,V)return V}if(!x&&(I instanceof Date&&P instanceof Date&&(I=I.getTime(),P=P.getTime()),[I,P]=[I,P].map(V=>V!=null?V.toString().toLocaleLowerCase():V),I!==P))return Qx(I)&&Qx(P)?0:Qx(I)?-1:Qx(P)?1:!isNaN(I)&&!isNaN(P)?Number(I)-Number(P):r.compare(I,P)}return 0}).map(l=>{let[h]=l;return h})}const Qve=ut({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function e_e(e,t){const n=e.returnObject?t:Rs(t,e.itemValue),i=Rs(t,e.itemSelectable,!0);return{type:"item",value:n,selectable:i,raw:t}}function t_e(e,t){const n=[];for(const i of t)n.push(e_e(e,i));return n}function n_e(e){return{items:me(()=>t_e(e,e.items))}}const i_e=ut({search:String,loading:Boolean,...Tn(),...Qve(),...f7(),...p7(),...CM({itemsPerPage:5}),...i7(),...SM(),...L_(),...ii(),...Rh({transition:{component:nb,hideOnLeave:!0}})},"VDataIterator"),r_e=Lt()({name:"VDataIterator",props:i_e(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"groupBy"),r=He(()=>e.search),{items:a}=n_e(e),{filteredItems:l}=R_(e,a,r,{transform:Ee=>Ee.raw}),{sortBy:h,multiSort:s,mustSort:p}=TS(e),{page:v,itemsPerPage:x}=kM(e),{toggleSort:T}=SS({sortBy:h,multiSort:s,mustSort:p,page:v}),{sortByWithGroups:C,opened:I,extractRows:P,isGroupOpen:D,toggleGroup:F}=_S({groupBy:i,sortBy:h}),{sortedItems:V}=AM(e,l,C,{transform:Ee=>Ee.raw}),{flatItems:H}=yS(V,i,I,!1),q=He(()=>H.value.length),{startIndex:K,stopIndex:ie,pageCount:X,prevPage:$,nextPage:G,setItemsPerPage:j,setPage:te}=IM({page:v,itemsPerPage:x,itemsLength:q}),{paginatedItems:Z}=d7({items:H,startIndex:K,stopIndex:ie,itemsPerPage:x}),ee=me(()=>P(Z.value)),{isSelected:be,select:Ie,selectAll:Ve,toggleSelect:Ke}=xS(e,{allItems:a,currentPage:ee}),{isExpanded:Xe,toggleExpand:Pe}=vS(e);bS({page:v,itemsPerPage:x,sortBy:h,groupBy:i,search:r});const $e=me(()=>({page:v.value,itemsPerPage:x.value,sortBy:h.value,pageCount:X.value,toggleSort:T,prevPage:$,nextPage:G,setPage:te,setItemsPerPage:j,isSelected:be,select:Ie,selectAll:Ve,toggleSelect:Ke,isExpanded:Xe,toggleExpand:Pe,isGroupOpen:D,toggleGroup:F,items:ee.value,itemsCount:l.value.length,groupedItems:Z.value}));return Ut(()=>ue(e.tag,{class:Tt(["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class]),style:Yt(e.style)},{default:()=>{var Ee,We;return[(Ee=n.header)==null?void 0:Ee.call(n,$e.value),ue($a,{transition:e.transition},{default:()=>{var Ze,ct;return[e.loading?ue(Hb,{key:"loader",name:"v-data-iterator",active:!0},{default:kt=>{var Nt;return(Nt=n.loader)==null?void 0:Nt.call(n,kt)}}):B("div",{key:"items"},[Z.value.length?(ct=n.default)==null?void 0:ct.call(n,$e.value):(Ze=n["no-data"])==null?void 0:Ze.call(n)])]}}),(We=n.footer)==null?void 0:We.call(n,$e.value)]}})),{}}});function s_e(){const e=it([]);TB(()=>e.value=[]);function t(n,i){e.value[i]=n}return{refs:e,updateRef:t}}const o_e=ut({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Pn,default:"$first"},prevIcon:{type:Pn,default:"$prev"},nextIcon:{type:Pn,default:"$next"},lastIcon:{type:Pn,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ul(),...Tn(),...Es(),...Xs(),...Hr(),...gd(),...ii({tag:"nav"}),...Li(),...$c({variant:"text"})},"VPagination"),RI=Lt()({name:"VPagination",props:o_e(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=Dn(e,"modelValue"),{t:a,n:l}=pr(),{isRtl:h}=Ks(),{themeClasses:s}=nr(e),{width:p}=Fl(),v=nn(-1);ns(void 0,{scoped:!0});const{resizeRef:x}=Nc($=>{if(!$.length)return;const{target:G,contentRect:j}=$[0],te=G.querySelector(".v-pagination__list > *");if(!te)return;const Z=j.width,ee=te.offsetWidth+parseFloat(getComputedStyle(te).marginRight)*2;v.value=P(Z,ee)}),T=me(()=>parseInt(e.length,10)),C=me(()=>parseInt(e.start,10)),I=me(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):v.value>=0?v.value:P(p.value,58));function P($,G){const j=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number((($-G*j)/G).toFixed(2))))}const D=me(()=>{if(T.value<=0||isNaN(T.value)||T.value>Number.MAX_SAFE_INTEGER)return[];if(I.value<=0)return[];if(I.value===1)return[r.value];if(T.value<=I.value)return sc(T.value,C.value);const $=I.value%2===0,G=$?I.value/2:Math.floor(I.value/2),j=$?G:G+1,te=T.value-G;if(j-r.value>=0)return[...sc(Math.max(1,I.value-1),C.value),e.ellipsis,T.value];if(r.value-te>=($?1:0)){const Z=I.value-1,ee=T.value-Z+C.value;return[C.value,e.ellipsis,...sc(Z,ee)]}else{const Z=Math.max(1,I.value-2),ee=Z===1?r.value:r.value-Math.ceil(Z/2)+C.value;return[C.value,e.ellipsis,...sc(Z,ee),e.ellipsis,T.value]}});function F($,G,j){$.preventDefault(),r.value=G,j&&i(j,G)}const{refs:V,updateRef:H}=s_e();ns({VPaginationBtn:{color:He(()=>e.color),border:He(()=>e.border),density:He(()=>e.density),size:He(()=>e.size),variant:He(()=>e.variant),rounded:He(()=>e.rounded),elevation:He(()=>e.elevation)}});const q=me(()=>D.value.map(($,G)=>{const j=te=>H(te,G);if(typeof $=="string")return{isActive:!1,key:`ellipsis-${G}`,page:$,props:{ref:j,ellipsis:!0,icon:!0,disabled:!0}};{const te=$===r.value;return{isActive:te,key:$,page:l($),props:{ref:j,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:te?e.activeColor:e.color,"aria-current":te,"aria-label":a(te?e.currentPageAriaLabel:e.pageAriaLabel,$),onClick:Z=>F(Z,$)}}}})),K=me(()=>{const $=!!e.disabled||r.value<=C.value,G=!!e.disabled||r.value>=C.value+T.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:j=>F(j,C.value,"first"),disabled:$,"aria-label":a(e.firstAriaLabel),"aria-disabled":$}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:j=>F(j,r.value-1,"prev"),disabled:$,"aria-label":a(e.previousAriaLabel),"aria-disabled":$},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:j=>F(j,r.value+1,"next"),disabled:G,"aria-label":a(e.nextAriaLabel),"aria-disabled":G},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:j=>F(j,C.value+T.value-1,"last"),disabled:G,"aria-label":a(e.lastAriaLabel),"aria-disabled":G}:void 0}});function ie(){var G;const $=r.value-C.value;(G=V.value[$])==null||G.$el.focus()}function X($){$.key===qk.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Gn(ie)):$.key===qk.right&&!e.disabled&&r.value<C.value+T.value-1&&(r.value=r.value+1,Gn(ie))}return Ut(()=>ue(e.tag,{ref:x,class:Tt(["v-pagination",s.value,e.class]),style:Yt(e.style),role:"navigation","aria-label":a(e.ariaLabel),onKeydown:X,"data-test":"v-pagination-root"},{default:()=>[B("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&B("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(K.value.first):ue(gi,Dt({_as:"VPaginationBtn"},K.value.first),null)]),B("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(K.value.prev):ue(gi,Dt({_as:"VPaginationBtn"},K.value.prev),null)]),q.value.map(($,G)=>B("li",{key:$.key,class:Tt(["v-pagination__item",{"v-pagination__item--is-active":$.isActive}]),"data-test":"v-pagination-item"},[n.item?n.item($):ue(gi,Dt({_as:"VPaginationBtn"},$.props),{default:()=>[$.page]})])),B("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(K.value.next):ue(gi,Dt({_as:"VPaginationBtn"},K.value.next),null)]),e.showFirstLastPage&&B("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(K.value.last):ue(gi,Dt({_as:"VPaginationBtn"},K.value.last),null)])])]})),{}}}),PM=ut({prevIcon:{type:Pn,default:"$prev"},nextIcon:{type:Pn,default:"$next"},firstIcon:{type:Pn,default:"$first"},lastIcon:{type:Pn,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),vb=Lt()({name:"VDataTableFooter",props:PM(),setup(e,t){let{slots:n}=t;const{t:i}=pr(),{page:r,pageCount:a,startIndex:l,stopIndex:h,itemsLength:s,itemsPerPage:p,setItemsPerPage:v}=Xve(),x=me(()=>e.itemsPerPageOptions.map(T=>typeof T=="number"?{value:T,title:T===-1?i("$vuetify.dataFooter.itemsPerPageAll"):String(T)}:{...T,title:isNaN(Number(T.title))?i(T.title):T.title}));return Ut(()=>{var C;const T=RI.filterProps(e);return B("div",{class:"v-data-table-footer"},[(C=n.prepend)==null?void 0:C.call(n),B("div",{class:"v-data-table-footer__items-per-page"},[B("span",{"aria-label":i(e.itemsPerPageText)},[i(e.itemsPerPageText)]),ue($v,{items:x.value,modelValue:p.value,"onUpdate:modelValue":I=>v(Number(I)),density:"compact",variant:"outlined",hideDetails:!0},null)]),B("div",{class:"v-data-table-footer__info"},[B("div",null,[i(e.pageText,s.value?l.value+1:0,h.value,s.value)])]),B("div",{class:"v-data-table-footer__pagination"},[ue(RI,Dt({modelValue:r.value,"onUpdate:modelValue":I=>r.value=I,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:a.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},T),null)])])}),{}}}),_b=hie({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,indent:[Number,String],empty:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const i=e.tag??"td",r=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return ue(i,{class:Tt(["v-data-table__td",{"v-data-table-column--fixed":r==="start","v-data-table-column--fixed-end":r==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap,"v-data-table-column--empty":e.empty},`v-data-table-column--align-${e.align}`]),style:{height:vn(e.height),width:vn(e.width),maxWidth:vn(e.maxWidth),left:r==="start"?vn(e.fixedOffset||null):void 0,right:r==="end"?vn(e.fixedEndOffset||null):void 0,paddingInlineStart:e.indent?vn(e.indent):void 0}},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n)]}})}),a_e=ut({headers:Array},"DataTable-header"),_7=Symbol.for("vuetify:data-table-headers"),y7={title:"",sortable:!1},l_e={...y7,width:48};function c_e(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,i)=>{let r=!1;for(let a=0;a<t.length;a++)if(t[a].priority>i){t.splice(a,0,{element:n,priority:i}),r=!0;break}r||t.push({element:n,priority:i})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const i=Math.floor(t[0].priority);for(let r=0;r<t.length;r++)Math.floor(t[r].priority)===i&&(n+=1);return n},dequeue:()=>t.shift()}}function OI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)OI(n,t);return t}function b7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&b7(n.children,t);return t}function u_e(e){if(e.key){if(e.key==="data-table-group")return y7;if(["data-table-expand","data-table-select"].includes(e.key))return l_e}}function MM(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>MM(n,t+1))):t}function d_e(e){let t=!1;function n(a,l){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(a)if(h!=="none"&&(a.fixed=h),a.fixed===!0&&(a.fixed="start"),a.fixed===l)if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l,l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l,l);else!t&&l==="start"?a.lastFixed=!0:!t&&l==="end"?a.firstFixedEnd=!0:isNaN(Number(a.width))?(`${a.key}`,void 0):a.minWidth=Math.max(Number(a.width)||0,Number(a.minWidth)||0),t=!0;else if(a.children)if(l==="start")for(let s=a.children.length-1;s>=0;s--)n(a.children[s],l);else for(let s=0;s<a.children.length;s++)n(a.children[s],l);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a],"start");for(let a=0;a<e.length;a++)n(e[a],"end");let i=0;for(let a=0;a<e.length;a++)i=x7(e[a],i);let r=0;for(let a=e.length-1;a>=0;a--)r=w7(e[a],r)}function x7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedOffset=t;for(const n of e.children)t=x7(n,t)}else e.fixed&&e.fixed!=="end"&&(e.fixedOffset=t,t+=parseFloat(e.width||"0")||0);return t}function w7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e)return t;if(e.children){e.fixedEndOffset=t;for(const n of e.children)t=w7(n,t)}else e.fixed==="end"&&(e.fixedEndOffset=t,t+=parseFloat(e.width||"0")||0);return t}function h_e(e,t){const n=[];let i=0;const r=c_e(e);for(;r.size()>0;){let l=r.count();const h=[];let s=1;for(;l>0;){const{element:p,priority:v}=r.dequeue(),x=t-i-MM(p);if(h.push({...p,rowspan:x??1,colspan:p.children?OI(p).length:1}),p.children)for(const T of p.children){const C=v%1+s/Math.pow(10,i+2);r.enqueue(T,i+x+C)}s+=1,l-=1}i+=1,n.push(h)}return{columns:e.map(l=>OI(l)).flat(),headers:n}}function T7(e){const t=[];for(const n of e){const i={...u_e(n),...n},r=i.key??(typeof i.value=="string"?i.value:null),a=i.value??r??null,l={...i,key:r,value:a,sortable:i.sortable??(i.key!=null||!!i.sort),children:i.children?T7(i.children):void 0};t.push(l)}return t}function DM(e,t){const n=it([]),i=it([]),r=it({}),a=it({}),l=it({});Wr(()=>{var P,D,F;const p=(e.headers||Object.keys(e.items[0]??{}).map(V=>({key:V,title:md(V)}))).slice(),v=b7(p);(P=t==null?void 0:t.groupBy)!=null&&P.value.length&&!v.has("data-table-group")&&p.unshift({key:"data-table-group",title:"Group"}),(D=t==null?void 0:t.showSelect)!=null&&D.value&&!v.has("data-table-select")&&p.unshift({key:"data-table-select"}),(F=t==null?void 0:t.showExpand)!=null&&F.value&&!v.has("data-table-expand")&&p.push({key:"data-table-expand"});const x=T7(p);d_e(x);const T=Math.max(...x.map(V=>MM(V)))+1,C=h_e(x,T);n.value=C.headers,i.value=C.columns;const I=C.headers.flat(1);for(const V of I)V.key&&(V.sortable&&(V.sort&&(r.value[V.key]=V.sort),V.sortRaw&&(a.value[V.key]=V.sortRaw)),V.filter&&(l.value[V.key]=V.filter))});const h={headers:n,columns:i,sortFunctions:r,sortRawFunctions:a,filterFunctions:l};return Or(_7,h),h}function ES(){const e=ki(_7);if(!e)throw new Error("Missing headers!");return e}const S7=ut({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:Pn,default:"$sortAsc"},sortDescIcon:{type:Pn,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Es(),...cg(),...eS()},"VDataTableHeaders"),tg=Lt()({name:"VDataTableHeaders",props:S7(),setup(e,t){let{slots:n}=t;const{t:i}=pr(),{toggleSort:r,sortBy:a,isSorted:l}=v7(),{someSelected:h,allSelected:s,selectAll:p,showSelectAll:v}=wS(),{columns:x,headers:T}=ES(),{loaderClasses:C}=Wb(e);function I(G,j){if(!(e.sticky||e.fixedHeader)&&!G.fixed)return;const te=typeof G.fixed=="string"?G.fixed:G.fixed?"start":"none";return{position:"sticky",left:te==="start"?vn(G.fixedOffset):void 0,right:te==="end"?vn(G.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${j})`:void 0}}function P(G,j){G.key==="Enter"&&!e.disableSort&&r(j)}function D(G){const j=a.value.find(te=>te.key===G.key);return j?j.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:F,backgroundColorStyles:V}=or(()=>e.color),{displayClasses:H,mobile:q}=Fl(e),K=me(()=>({headers:T.value,columns:x.value,toggleSort:r,isSorted:l,sortBy:a.value,someSelected:h.value,allSelected:s.value,selectAll:p,getSortIcon:D})),ie=me(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},H.value,C.value]),X=G=>{let{column:j,x:te,y:Z}=G;const ee=j.key==="data-table-select"||j.key==="data-table-expand",be=j.key==="data-table-group"&&j.width===0&&!j.title,Ie=Dt(e.headerProps??{},j.headerProps??{});return ue(_b,Dt({tag:"th",align:j.align,class:[{"v-data-table__th--sortable":j.sortable&&!e.disableSort,"v-data-table__th--sorted":l(j),"v-data-table__th--fixed":j.fixed},...ie.value],style:{width:vn(j.width),minWidth:vn(j.minWidth),maxWidth:vn(j.maxWidth),...I(j,Z)},colspan:j.colspan,rowspan:j.rowspan,fixed:j.fixed,nowrap:j.nowrap,lastFixed:j.lastFixed,firstFixedEnd:j.firstFixedEnd,noPadding:ee,empty:be,tabindex:j.sortable?0:void 0,onClick:j.sortable?()=>r(j):void 0,onKeydown:j.sortable?Ve=>P(Ve,j):void 0},Ie),{default:()=>{var Xe;const Ve=`header.${j.key}`,Ke={column:j,selectAll:p,isSorted:l,toggleSort:r,sortBy:a.value,someSelected:h.value,allSelected:s.value,getSortIcon:D};return n[Ve]?n[Ve](Ke):be?"":j.key==="data-table-select"?((Xe=n["header.data-table-select"])==null?void 0:Xe.call(n,Ke))??(v.value&&ue(hd,{density:e.density,modelValue:s.value,indeterminate:h.value&&!s.value,"onUpdate:modelValue":p},null)):B("div",{class:"v-data-table-header__content"},[B("span",null,[j.title]),j.sortable&&!e.disableSort&&ue(Di,{key:"icon",class:"v-data-table-header__sort-icon",icon:D(j)},null),e.multiSort&&l(j)&&B("div",{key:"badge",class:Tt(["v-data-table-header__sort-badge",...F.value]),style:Yt(V.value)},[a.value.findIndex(Pe=>Pe.key===j.key)+1])])}})},$=()=>{const G=me(()=>x.value.filter(te=>(te==null?void 0:te.sortable)&&!e.disableSort)),j=me(()=>{if(x.value.find(Z=>Z.key==="data-table-select")!=null)return s.value?"$checkboxOn":h.value?"$checkboxIndeterminate":"$checkboxOff"});return ue(_b,Dt({tag:"th",class:[...ie.value],colspan:T.value.length+1},e.headerProps),{default:()=>[B("div",{class:"v-data-table-header__content"},[ue($v,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:G.value,label:i("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>a.value=[],appendIcon:j.value,"onClick:append":()=>p(!s.value)},{chip:te=>{var Z;return ue(Ls,{onClick:(Z=te.item.raw)!=null&&Z.sortable?()=>r(te.item.raw):void 0,onMousedown:ee=>{ee.preventDefault(),ee.stopPropagation()}},{default:()=>[te.item.title,ue(Di,{class:Tt(["v-data-table__td-sort-icon",l(te.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:D(te.item.raw),size:"small"},null)]})}})])]})};Ut(()=>q.value?B("tr",null,[ue($,null,null)]):B(ln,null,[n.headers?n.headers(K.value):T.value.map((G,j)=>B("tr",null,[G.map((te,Z)=>ue(X,{column:te,x:Z,y:j},null))])),e.loading&&B("tr",{class:"v-data-table-progress"},[B("th",{colspan:x.value.length},[ue(Hb,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),E7=ut({item:{type:Object,required:!0},groupCollapseIcon:{type:Pn,default:"$tableGroupCollapse"},groupExpandIcon:{type:Pn,default:"$tableGroupExpand"},...Es()},"VDataTableGroupHeaderRow"),f_e=Lt()({name:"VDataTableGroupHeaderRow",props:E7(),setup(e,t){let{slots:n}=t;const{isGroupOpen:i,toggleGroup:r,extractRows:a}=a7(),{isSelected:l,isSomeSelected:h,select:s}=wS(),{columns:p}=ES(),v=me(()=>a([e.item])),x=He(()=>p.value.length-(p.value.some(T=>T.key==="data-table-select")?1:0));return()=>B("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[p.value.map(T=>{var C,I;if(T.key==="data-table-group"){const P=i(e.item)?e.groupCollapseIcon:e.groupExpandIcon,D=()=>r(e.item);return((C=n["data-table-group"])==null?void 0:C.call(n,{item:e.item,count:v.value.length,props:{icon:P,onClick:D}}))??ue(_b,{class:"v-data-table-group-header-row__column",colspan:x.value},{default:()=>[ue(gi,{size:"small",variant:"text",icon:P,onClick:D},null),B("span",null,[e.item.value]),B("span",null,[zn("("),v.value.length,zn(")")])]})}else if(T.key==="data-table-select"){const P=l(v.value),D=h(v.value)&&!P,F=V=>s(v.value,V);return((I=n["data-table-select"])==null?void 0:I.call(n,{props:{modelValue:P,indeterminate:D,"onUpdate:modelValue":F}}))??ue(_b,{class:"v-data-table__td--select-row",noPadding:!0},{default:()=>[ue(hd,{density:e.density,modelValue:P,indeterminate:D,"onUpdate:modelValue":F},null)]})}return""})])}}),C7=ut({index:Number,item:Object,cellProps:[Object,Function],collapseIcon:{type:Pn,default:"$collapse"},expandIcon:{type:Pn,default:"$expand"},onClick:No(),onContextmenu:No(),onDblclick:No(),...Es(),...cg()},"VDataTableRow"),LM=Lt()({name:"VDataTableRow",props:C7(),setup(e,t){let{slots:n}=t;const{displayClasses:i,mobile:r}=Fl(e,"v-data-table__tr"),{isSelected:a,toggleSelect:l,someSelected:h,allSelected:s,selectAll:p}=wS(),{isExpanded:v,toggleExpand:x}=s7(),{toggleSort:T,sortBy:C,isSorted:I}=v7(),{columns:P}=ES();Ut(()=>B("tr",{class:Tt(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},i.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&P.value.map((D,F)=>{const V=e.item,H=`item.${D.key}`,q=`header.${D.key}`,K={index:e.index,item:V.raw,internalItem:V,value:Xp(V.columns,D.key),column:D,isSelected:a,toggleSelect:l,isExpanded:v,toggleExpand:x},ie={column:D,selectAll:p,isSorted:I,toggleSort:T,sortBy:C.value,someSelected:h.value,allSelected:s.value,getSortIcon:()=>""},X=typeof e.cellProps=="function"?e.cellProps({index:K.index,item:K.item,internalItem:K.internalItem,value:K.value,column:D}):e.cellProps,$=typeof D.cellProps=="function"?D.cellProps({index:K.index,item:K.item,internalItem:K.internalItem,value:K.value}):D.cellProps,G=D.key==="data-table-select"||D.key==="data-table-expand",j=D.key==="data-table-group"&&D.width===0&&!D.title;return ue(_b,Dt({align:D.align,indent:D.intent,class:{"v-data-table__td--expanded-row":D.key==="data-table-expand","v-data-table__td--select-row":D.key==="data-table-select"},fixed:D.fixed,fixedOffset:D.fixedOffset,fixedEndOffset:D.fixedEndOffset,lastFixed:D.lastFixed,firstFixedEnd:D.firstFixedEnd,maxWidth:r.value?void 0:D.maxWidth,noPadding:G,empty:j,nowrap:D.nowrap,width:r.value?void 0:D.width},X,$),{default:()=>{var Z,ee,be,Ie;if(D.key==="data-table-select")return((Z=n["item.data-table-select"])==null?void 0:Z.call(n,{...K,props:{disabled:!V.selectable,modelValue:a([V]),onClick:sa(()=>l(V),["stop"])}}))??ue(hd,{disabled:!V.selectable,density:e.density,modelValue:a([V]),onClick:sa(Ve=>l(V,e.index,Ve),["stop"])},null);if(D.key==="data-table-expand")return((ee=n["item.data-table-expand"])==null?void 0:ee.call(n,{...K,props:{icon:v(V)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:sa(()=>x(V),["stop"])}}))??ue(gi,{icon:v(V)?e.collapseIcon:e.expandIcon,size:"small",variant:"text",onClick:sa(()=>x(V),["stop"])},null);if(n[H]&&!r.value)return n[H](K);const te=tn(K.value);return r.value?B(ln,null,[B("div",{class:"v-data-table__td-title"},[((be=n[q])==null?void 0:be.call(n,ie))??D.title]),B("div",{class:"v-data-table__td-value"},[((Ie=n[H])==null?void 0:Ie.call(n,K))??te])]):te}})})]))}}),k7=ut({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Bl(C7(),["collapseIcon","expandIcon","density"]),...Bl(E7(),["groupCollapseIcon","groupExpandIcon","density"]),...cg()},"VDataTableRows"),ng=Lt()({name:"VDataTableRows",inheritAttrs:!1,props:k7(),setup(e,t){let{attrs:n,slots:i}=t;const{columns:r}=ES(),{expandOnClick:a,toggleExpand:l,isExpanded:h}=s7(),{isSelected:s,toggleSelect:p}=wS(),{toggleGroup:v,isGroupOpen:x}=a7(),{t:T}=pr(),{mobile:C}=Fl(e);return Ut(()=>{var P,D;const I=Bl(e,["groupCollapseIcon","groupExpandIcon","density"]);return e.loading&&(!e.items.length||i.loading)?B("tr",{class:"v-data-table-rows-loading",key:"loading"},[B("td",{colspan:r.value.length},[((P=i.loading)==null?void 0:P.call(i))??T(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?B("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[B("td",{colspan:r.value.length},[((D=i["no-data"])==null?void 0:D.call(i))??T(e.noDataText)])]):B(ln,null,[e.items.map((F,V)=>{var K,ie;if(F.type==="group"){const X={index:V,item:F,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p,toggleGroup:v,isGroupOpen:x};return i["group-header"]?i["group-header"](X):ue(f_e,Dt({key:`group-header_${F.id}`,item:F},_4(n,":groupHeader",()=>X),I),i)}if(F.type==="group-summary"){const X={index:V,item:F,columns:r.value,toggleGroup:v};return((K=i["group-summary"])==null?void 0:K.call(i,X))??""}const H={index:V,item:F.raw,internalItem:F,columns:r.value,isExpanded:h,toggleExpand:l,isSelected:s,toggleSelect:p},q={...H,props:Dt({key:`item_${F.key??F.index}`,onClick:a.value?()=>{l(F)}:void 0,index:V,item:F,cellProps:e.cellProps,collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,density:e.density,mobile:C.value},_4(n,":row",()=>H),typeof e.rowProps=="function"?e.rowProps({item:H.item,index:H.index,internalItem:H.internalItem}):e.rowProps)};return B(ln,{key:q.props.key},[i.item?i.item(q):ue(LM,q.props,i),h(F)&&((ie=i["expanded-row"])==null?void 0:ie.call(i,H))])})])}),{}}}),I7=ut({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Tn(),...Es(),...ii(),...Li()},"VTable"),ig=Lt()({name:"VTable",props:I7(),setup(e,t){let{slots:n,emit:i}=t;const{themeClasses:r}=nr(e),{densityClasses:a}=Ka(e);return Ut(()=>ue(e.tag,{class:Tt(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,a.value,e.class]),style:Yt(e.style)},{default:()=>{var l,h,s;return[(l=n.top)==null?void 0:l.call(n),n.default?B("div",{class:"v-table__wrapper",style:{height:vn(e.height)}},[B("table",null,[n.default()])]):(h=n.wrapper)==null?void 0:h.call(n),(s=n.bottom)==null?void 0:s.call(n)]}})),{}}}),m_e=ut({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function p_e(e,t,n,i){const r=e.returnObject?t:Rs(t,e.itemValue),a=Rs(t,e.itemSelectable,!0),l=i.reduce((h,s)=>(s.key!=null&&(h[s.key]=Rs(t,s.value)),h),{});return{type:"item",key:e.returnObject?Rs(t,e.itemValue):r,index:n,value:r,selectable:a,columns:l,raw:t}}function g_e(e,t,n){return t.map((i,r)=>p_e(e,i,r,n))}function RM(e,t){return{items:me(()=>g_e(e,e.items,t.value))}}const OM=ut({...k7(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...i7(),...SM(),...a_e(),...m_e(),...f7(),...p7(),...S7(),...I7()},"DataTable"),v_e=ut({...CM(),...OM(),...L_(),...PM()},"VDataTable"),__e=Lt()({name:"VDataTable",props:v_e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=EM(e),{sortBy:a,multiSort:l,mustSort:h}=TS(e),{page:s,itemsPerPage:p}=kM(e),{disableSort:v}=__(e),{columns:x,headers:T,sortFunctions:C,sortRawFunctions:I,filterFunctions:P}=DM(e,{groupBy:r,showSelect:He(()=>e.showSelect),showExpand:He(()=>e.showExpand)}),{items:D}=RM(e,x),F=He(()=>e.search),{filteredItems:V}=R_(e,D,F,{transform:ot=>ot.columns,customKeyFilter:P}),{toggleSort:H}=SS({sortBy:a,multiSort:l,mustSort:h,page:s}),{sortByWithGroups:q,opened:K,extractRows:ie,isGroupOpen:X,toggleGroup:$}=_S({groupBy:r,sortBy:a,disableSort:v}),{sortedItems:G}=AM(e,V,q,{transform:ot=>({...ot.raw,...ot.columns}),sortFunctions:C,sortRawFunctions:I}),{flatItems:j}=yS(G,r,K,()=>!!i["group-summary"]),te=me(()=>j.value.length),{startIndex:Z,stopIndex:ee,pageCount:be,setItemsPerPage:Ie}=IM({page:s,itemsPerPage:p,itemsLength:te}),{paginatedItems:Ve}=d7({items:j,startIndex:Z,stopIndex:ee,itemsPerPage:p}),Ke=me(()=>ie(Ve.value)),{isSelected:Xe,select:Pe,selectAll:$e,toggleSelect:Ee,someSelected:We,allSelected:Ze}=xS(e,{allItems:D,currentPage:Ke}),{isExpanded:ct,toggleExpand:kt}=vS(e);bS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:F}),ns({VDataTableRows:{hideNoData:He(()=>e.hideNoData),noDataText:He(()=>e.noDataText),loading:He(()=>e.loading),loadingText:He(()=>e.loadingText)}});const Nt=me(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:be.value,toggleSort:H,setItemsPerPage:Ie,someSelected:We.value,allSelected:Ze.value,isSelected:Xe,select:Pe,selectAll:$e,toggleSelect:Ee,isExpanded:ct,toggleExpand:kt,isGroupOpen:X,toggleGroup:$,items:Ke.value.map(ot=>ot.raw),internalItems:Ke.value,groupedItems:Ve.value,columns:x.value,headers:T.value}));return Ut(()=>{const ot=vb.filterProps(e),dt=tg.filterProps(e),Je=ng.filterProps(e),yt=ig.filterProps(e);return ue(ig,Dt({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},yt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Ne;return(Ne=i.top)==null?void 0:Ne.call(i,Nt.value)},default:()=>{var Ne,le,we,_e,fe,Fe;return i.default?i.default(Nt.value):B(ln,null,[(Ne=i.colgroup)==null?void 0:Ne.call(i,Nt.value),!e.hideDefaultHeader&&B("thead",{key:"thead"},[ue(tg,dt,i)]),(le=i.thead)==null?void 0:le.call(i,Nt.value),!e.hideDefaultBody&&B("tbody",null,[(we=i["body.prepend"])==null?void 0:we.call(i,Nt.value),i.body?i.body(Nt.value):ue(ng,Dt(n,Je,{items:Ve.value}),i),(_e=i["body.append"])==null?void 0:_e.call(i,Nt.value)]),(fe=i.tbody)==null?void 0:fe.call(i,Nt.value),(Fe=i.tfoot)==null?void 0:Fe.call(i,Nt.value)])},bottom:()=>i.bottom?i.bottom(Nt.value):!e.hideDefaultFooter&&B(ln,null,[ue(ac,null,null),ue(vb,ot,{prepend:i["footer.prepend"]})])})}),{}}}),y_e=ut({...mr(OM(),["hideDefaultFooter"]),...SM(),...S8(),...L_()},"VDataTableVirtual"),b_e=Lt()({name:"VDataTableVirtual",props:y_e(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=EM(e),{sortBy:a,multiSort:l,mustSort:h}=TS(e),{disableSort:s}=__(e),{columns:p,headers:v,filterFunctions:x,sortFunctions:T,sortRawFunctions:C}=DM(e,{groupBy:r,showSelect:He(()=>e.showSelect),showExpand:He(()=>e.showExpand)}),{items:I}=RM(e,p),P=He(()=>e.search),{filteredItems:D}=R_(e,I,P,{transform:yt=>yt.columns,customKeyFilter:x}),{toggleSort:F}=SS({sortBy:a,multiSort:l,mustSort:h}),{sortByWithGroups:V,opened:H,extractRows:q,isGroupOpen:K,toggleGroup:ie}=_S({groupBy:r,sortBy:a,disableSort:s}),{sortedItems:X}=AM(e,D,V,{transform:yt=>({...yt.raw,...yt.columns}),sortFunctions:T,sortRawFunctions:C}),{flatItems:$}=yS(X,r,H,()=>!!i["group-summary"]),G=me(()=>q($.value)),{isSelected:j,select:te,selectAll:Z,toggleSelect:ee,someSelected:be,allSelected:Ie}=xS(e,{allItems:G,currentPage:G}),{isExpanded:Ve,toggleExpand:Ke}=vS(e),{containerRef:Xe,markerRef:Pe,paddingTop:$e,paddingBottom:Ee,computedItems:We,handleItemResize:Ze,handleScroll:ct,handleScrollend:kt,calculateVisibleItems:Nt,scrollToIndex:ot}=E8(e,$),dt=me(()=>We.value.map(yt=>yt.raw));bS({sortBy:a,page:nn(1),itemsPerPage:nn(-1),groupBy:r,search:P}),ns({VDataTableRows:{hideNoData:He(()=>e.hideNoData),noDataText:He(()=>e.noDataText),loading:He(()=>e.loading),loadingText:He(()=>e.loadingText)}});const Je=me(()=>({sortBy:a.value,toggleSort:F,someSelected:be.value,allSelected:Ie.value,isSelected:j,select:te,selectAll:Z,toggleSelect:ee,isExpanded:Ve,toggleExpand:Ke,isGroupOpen:K,toggleGroup:ie,items:G.value.map(yt=>yt.raw),internalItems:G.value,groupedItems:$.value,columns:p.value,headers:v.value}));return Ut(()=>{const yt=tg.filterProps(e),Ne=ng.filterProps(e),le=ig.filterProps(e);return ue(ig,Dt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},le,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var we;return(we=i.top)==null?void 0:we.call(i,Je.value)},wrapper:()=>{var we,_e,fe,Fe,rt,pt;return B("div",{ref:Xe,onScrollPassive:ct,onScrollend:kt,class:"v-table__wrapper",style:{height:vn(e.height)}},[B("table",null,[(we=i.colgroup)==null?void 0:we.call(i,Je.value),!e.hideDefaultHeader&&B("thead",{key:"thead"},[ue(tg,yt,i)]),(_e=i.thead)==null?void 0:_e.call(i,Je.value),!e.hideDefaultBody&&B("tbody",{key:"tbody"},[B("tr",{ref:Pe,style:{height:vn($e.value),border:0}},[B("td",{colspan:p.value.length,style:{height:0,border:0}},null)]),(fe=i["body.prepend"])==null?void 0:fe.call(i,Je.value),ue(ng,Dt(n,Ne,{items:dt.value}),{...i,item:vt=>ue(T8,{key:vt.internalItem.index,renderless:!0,"onUpdate:height":gt=>Ze(vt.internalItem.index,gt)},{default:gt=>{var Vt;let{itemRef:mt}=gt;return((Vt=i.item)==null?void 0:Vt.call(i,{...vt,itemRef:mt}))??ue(LM,Dt(vt.props,{ref:mt,key:vt.internalItem.index,index:vt.internalItem.index}),i)}})}),(Fe=i["body.append"])==null?void 0:Fe.call(i,Je.value),B("tr",{style:{height:vn(Ee.value),border:0}},[B("td",{colspan:p.value.length,style:{height:0,border:0}},null)])]),(rt=i.tbody)==null?void 0:rt.call(i,Je.value),(pt=i.tfoot)==null?void 0:pt.call(i,Je.value)])])},bottom:()=>{var we;return(we=i.bottom)==null?void 0:we.call(i,Je.value)}})}),{calculateVisibleItems:Nt,scrollToIndex:ot}}}),x_e=ut({itemsLength:{type:[Number,String],required:!0},...CM(),...OM(),...PM()},"VDataTableServer"),w_e=Lt()({name:"VDataTableServer",props:x_e(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const{groupBy:r}=EM(e),{sortBy:a,multiSort:l,mustSort:h}=TS(e),{page:s,itemsPerPage:p}=kM(e),{disableSort:v}=__(e),x=me(()=>parseInt(e.itemsLength,10)),{columns:T,headers:C}=DM(e,{groupBy:r,showSelect:He(()=>e.showSelect),showExpand:He(()=>e.showExpand)}),{items:I}=RM(e,T),{toggleSort:P}=SS({sortBy:a,multiSort:l,mustSort:h,page:s}),{opened:D,isGroupOpen:F,toggleGroup:V,extractRows:H}=_S({groupBy:r,sortBy:a,disableSort:v}),{pageCount:q,setItemsPerPage:K}=IM({page:s,itemsPerPage:p,itemsLength:x}),{flatItems:ie}=yS(I,r,D,()=>!!i["group-summary"]),{isSelected:X,select:$,selectAll:G,toggleSelect:j,someSelected:te,allSelected:Z}=xS(e,{allItems:I,currentPage:I}),{isExpanded:ee,toggleExpand:be}=vS(e),Ie=me(()=>H(I.value));bS({page:s,itemsPerPage:p,sortBy:a,groupBy:r,search:He(()=>e.search)}),Or("v-data-table",{toggleSort:P,sortBy:a}),ns({VDataTableRows:{hideNoData:He(()=>e.hideNoData),noDataText:He(()=>e.noDataText),loading:He(()=>e.loading),loadingText:He(()=>e.loadingText)}});const Ve=me(()=>({page:s.value,itemsPerPage:p.value,sortBy:a.value,pageCount:q.value,toggleSort:P,setItemsPerPage:K,someSelected:te.value,allSelected:Z.value,isSelected:X,select:$,selectAll:G,toggleSelect:j,isExpanded:ee,toggleExpand:be,isGroupOpen:F,toggleGroup:V,items:Ie.value.map(Ke=>Ke.raw),internalItems:Ie.value,groupedItems:ie.value,columns:T.value,headers:C.value}));Ut(()=>{const Ke=vb.filterProps(e),Xe=tg.filterProps(e),Pe=ng.filterProps(e),$e=ig.filterProps(e);return ue(ig,Dt({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},$e,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Ee;return(Ee=i.top)==null?void 0:Ee.call(i,Ve.value)},default:()=>{var Ee,We,Ze,ct,kt,Nt;return i.default?i.default(Ve.value):B(ln,null,[(Ee=i.colgroup)==null?void 0:Ee.call(i,Ve.value),!e.hideDefaultHeader&&B("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[ue(tg,Xe,i)]),(We=i.thead)==null?void 0:We.call(i,Ve.value),!e.hideDefaultBody&&B("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(Ze=i["body.prepend"])==null?void 0:Ze.call(i,Ve.value),i.body?i.body(Ve.value):ue(ng,Dt(n,Pe,{items:ie.value}),i),(ct=i["body.append"])==null?void 0:ct.call(i,Ve.value)]),(kt=i.tbody)==null?void 0:kt.call(i,Ve.value),(Nt=i.tfoot)==null?void 0:Nt.call(i,Ve.value)])},bottom:()=>i.bottom?i.bottom(Ve.value):!e.hideDefaultFooter&&B(ln,null,[ue(ac,null,null),ue(vb,Ke,{prepend:i["footer.prepend"]})])})})}}),A7=ut({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Pn,default:"$next"},prevIcon:{type:Pn,default:"$prev"},modeIcon:{type:Pn,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),VI=Lt()({name:"VDatePickerControls",props:A7(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,t){let{emit:n}=t;const{t:i}=pr(),r=me(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),a=me(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),l=me(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),h=me(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function s(){n("click:prev")}function p(){n("click:next")}function v(){n("click:year")}function x(){n("click:month")}return Ut(()=>B("div",{class:Tt(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":vn(e.controlHeight)}},[ue(gi,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:r.value,text:e.text,variant:"text",rounded:!0,onClick:x},null),ue(gi,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:e.modeIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.selectYear"),onClick:v},null),ue(j8,null,null),B("div",{class:"v-date-picker-controls__month"},[ue(gi,{"data-testid":"prev-month",disabled:l.value,density:"comfortable",icon:e.prevIcon,variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:s},null),ue(gi,{"data-testid":"next-month",disabled:h.value,icon:e.nextIcon,density:"comfortable",variant:"text","aria-label":i("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:p},null)])])),{}}}),T_e=ut({appendIcon:Pn,color:String,header:String,transition:String,onClick:No()},"VDatePickerHeader"),BI=Lt()({name:"VDatePickerHeader",props:T_e(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color);function l(){n("click")}function h(){n("click:append")}return Ut(()=>{const s=!!(i.default||e.header),p=!!(i.append||e.appendIcon);return B("div",{class:Tt(["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},r.value]),style:Yt(a.value),onClick:l},[i.prepend&&B("div",{key:"prepend",class:"v-date-picker-header__prepend"},[i.prepend()]),s&&ue($a,{key:"content",name:e.transition},{default:()=>{var v;return[B("div",{key:e.header,class:"v-date-picker-header__content"},[((v=i.default)==null?void 0:v.call(i))??e.header])]}}),p&&B("div",{class:"v-date-picker-header__append"},[i.append?ue(di,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var v;return[(v=i.append)==null?void 0:v.call(i)]}}):ue(gi,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:h},null)])])}),{}}}),S_e=ut({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function E_e(e){const t=$b(),n=Dn(e,"modelValue",[],C=>Yr(C).map(I=>t.date(I))),i=me(()=>e.displayValue?t.date(e.displayValue):n.value.length>0?t.date(n.value[0]):e.min?t.date(e.min):Array.isArray(e.allowedDates)?t.date(e.allowedDates[0]):t.date()),r=Dn(e,"year",void 0,C=>{const I=C!=null?Number(C):t.getYear(i.value);return t.startOfYear(t.setYear(t.date(),I))},C=>t.getYear(C)),a=Dn(e,"month",void 0,C=>{const I=C!=null?Number(C):t.getMonth(i.value),P=t.setYear(t.startOfMonth(t.date()),t.getYear(r.value));return t.setMonth(P,I)},C=>t.getMonth(C)),l=me(()=>{const C=t.toJsDate(t.startOfWeek(t.date(),e.firstDayOfWeek)).getDay();return t.getWeekdays(e.firstDayOfWeek,e.weekdayFormat).filter((I,P)=>e.weekdays.includes((P+C)%7))}),h=me(()=>{const C=t.getWeekArray(a.value,e.firstDayOfWeek),I=C.flat(),P=42;if(e.weeksInMonth==="static"&&I.length<P){const D=I[I.length-1];let F=[];for(let V=1;V<=P-I.length;V++)F.push(t.addDays(D,V)),V%7===0&&(C.push(F),F=[])}return C});function s(C,I){return C.filter(P=>e.weekdays.includes(t.toJsDate(P).getDay())).map((P,D)=>{const F=t.toISO(P),V=!t.isSameMonth(P,a.value),H=t.isSameDay(P,t.startOfMonth(a.value)),q=t.isSameDay(P,t.endOfMonth(a.value)),K=t.isSameDay(P,a.value),ie=e.weekdays.length;return{date:P,formatted:t.format(P,"keyboardDate"),isAdjacent:V,isDisabled:T(P),isEnd:q,isHidden:V&&!e.showAdjacentMonths,isSame:K,isSelected:n.value.some(X=>t.isSameDay(P,X)),isStart:H,isToday:t.isSameDay(P,I),isWeekEnd:D%ie===ie-1,isWeekStart:D%ie===0,isoDate:F,localized:t.format(P,"dayOfMonth"),month:t.getMonth(P),year:t.getYear(P)}})}const p=me(()=>{const C=t.startOfWeek(i.value,e.firstDayOfWeek),I=[];for(let D=0;D<=6;D++)I.push(t.addDays(C,D));const P=t.date();return s(I,P)}),v=me(()=>{const C=h.value.flat(),I=t.date();return s(C,I)}),x=me(()=>h.value.map(C=>C.length?t.getWeek(C[0],e.firstDayOfWeek,e.firstDayOfYear):null));function T(C){if(e.disabled)return!0;const I=t.date(C);return e.min&&t.isBefore(t.endOfDay(I),t.date(e.min))||e.max&&t.isAfter(I,t.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(P=>t.isSameDay(t.date(P),I)):typeof e.allowedDates=="function"?!e.allowedDates(I):!1}return{displayValue:i,daysInMonth:v,daysInWeek:p,genDays:s,model:n,weeksInMonth:h,weekdayLabels:l,weekNumbers:x}}const P7=ut({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...mr(S_e(),["displayValue"])},"VDatePickerMonth"),FI=Lt()({name:"VDatePickerMonth",props:P7(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=it(),{t:a}=pr(),{daysInMonth:l,model:h,weekNumbers:s,weekdayLabels:p}=E_e(e),v=$b(),x=nn(),T=nn(),C=nn(!1),I=He(()=>C.value?e.reverseTransition:e.transition);e.multiple==="range"&&h.value.length>0&&(x.value=h.value[0],h.value.length>1&&(T.value=h.value[h.value.length-1]));const P=me(()=>{const q=["number","string"].includes(typeof e.multiple)?Number(e.multiple):1/0;return h.value.length>=q});Zt(l,(q,K)=>{K&&(C.value=v.isBefore(q[0].date,K[0].date))});function D(q){const K=v.startOfDay(q);if(h.value.length===0?x.value=void 0:h.value.length===1&&(x.value=h.value[0],T.value=void 0),!x.value)x.value=K,h.value=[x.value];else if(T.value)x.value=q,T.value=void 0,h.value=[x.value];else{if(v.isSameDay(K,x.value)){x.value=void 0,h.value=[];return}else v.isBefore(K,x.value)?(T.value=v.endOfDay(x.value),x.value=K):T.value=v.endOfDay(K);h.value=dre(v,x.value,T.value)}}function F(q){const K=v.format(q.date,"fullDateWithWeekday"),ie=q.isToday?"currentDate":"selectDate";return a(`$vuetify.datePicker.ariaLabel.${ie}`,K)}function V(q){const K=h.value.findIndex(ie=>v.isSameDay(ie,q));if(K===-1)h.value=[...h.value,q];else{const ie=[...h.value];ie.splice(K,1),h.value=ie}}function H(q){e.multiple==="range"?D(q):e.multiple?V(q):h.value=[q]}Ut(()=>B("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":e.weekdays.length}},[e.showWeek&&B("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&B("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[zn("")]),s.value.map(q=>B("div",{class:Tt(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[q]))]),ue($a,{name:I.value},{default:()=>{var q;return[B("div",{ref:r,key:(q=l.value[0].date)==null?void 0:q.toString(),class:"v-date-picker-month__days"},[!e.hideWeekdays&&p.value.map(K=>B("div",{class:Tt(["v-date-picker-month__day","v-date-picker-month__weekday"])},[K])),l.value.map((K,ie)=>{var $;const X={props:{class:"v-date-picker-month__day-btn",color:K.isSelected||K.isToday?e.color:void 0,disabled:K.isDisabled,icon:!0,ripple:!1,text:K.localized,variant:K.isSelected?"flat":K.isToday?"outlined":"text","aria-label":F(K),"aria-current":K.isToday?"date":void 0,onClick:()=>H(K.date)},item:K,i:ie};return P.value&&!K.isSelected&&(K.isDisabled=!0),B("div",{class:Tt(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":K.isAdjacent,"v-date-picker-month__day--hide-adjacent":K.isHidden,"v-date-picker-month__day--selected":K.isSelected,"v-date-picker-month__day--week-end":K.isWeekEnd,"v-date-picker-month__day--week-start":K.isWeekStart}]),"data-v-date":K.isDisabled?void 0:K.isoDate},[(e.showAdjacentMonths||!K.isAdjacent)&&((($=i.day)==null?void 0:$.call(i,X))??ue(gi,X.props,null))])})])]}})]))}}),M7=ut({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),zI=Lt()({name:"VDatePickerMonths",props:M7(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=$b(),a=Dn(e,"modelValue"),l=me(()=>{let s=r.startOfYear(r.date());return e.year&&(s=r.setYear(s,e.year)),sc(12).map(p=>{const v=r.format(s,"monthShort"),x=r.format(s,"month"),T=!!(!h(p)||e.min&&r.isAfter(r.startOfMonth(r.date(e.min)),s)||e.max&&r.isAfter(s,r.startOfMonth(r.date(e.max))));return s=r.getNextMonth(s),{isDisabled:T,text:v,label:x,value:p}})});Wr(()=>{a.value=a.value??r.getMonth(r.date())});function h(s){return Array.isArray(e.allowedMonths)&&e.allowedMonths.length?e.allowedMonths.includes(s):typeof e.allowedMonths=="function"?e.allowedMonths(s):!0}return Ut(()=>B("div",{class:"v-date-picker-months",style:{height:vn(e.height)}},[B("div",{class:"v-date-picker-months__content"},[l.value.map((s,p)=>{var T;const v={active:a.value===p,ariaLabel:s.label,color:a.value===p?e.color:void 0,disabled:s.isDisabled,rounded:!0,text:s.text,variant:a.value===s.value?"flat":"text",onClick:()=>x(p)};function x(C){if(a.value===C){n("update:modelValue",a.value);return}a.value=C}return((T=i.month)==null?void 0:T.call(i,{month:s,i:p,props:v}))??ue(gi,Dt({key:"month"},v),null)})])])),{}}}),D7=ut({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),NI=Lt()({name:"VDatePickerYears",props:D7(),directives:{vIntersect:_u},emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=$b(),a=Dn(e,"modelValue"),l=me(()=>{const v=r.getYear(r.date());let x=v-100,T=v+52;e.min&&(x=r.getYear(r.date(e.min))),e.max&&(T=r.getYear(r.date(e.max)));let C=r.startOfYear(r.date());return C=r.setYear(C,x),sc(T-x+1,x).map(I=>{const P=r.format(C,"year");return C=r.setYear(C,r.getYear(C)+1),{text:P,value:I,isDisabled:!p(I)}})});Wr(()=>{a.value=a.value??r.getYear(r.date())});const h=Ww();function s(){var v,x;(v=h.el)==null||v.focus(),(x=h.el)==null||x.scrollIntoView({block:"center"})}function p(v){return Array.isArray(e.allowedYears)&&e.allowedYears.length?e.allowedYears.includes(v):typeof e.allowedYears=="function"?e.allowedYears(v):!0}return Ut(()=>Oi(B("div",{class:"v-date-picker-years",style:{height:vn(e.height)}},[B("div",{class:"v-date-picker-years__content"},[l.value.map((v,x)=>{var C;const T={ref:a.value===v.value?h:void 0,active:a.value===v.value,color:a.value===v.value?e.color:void 0,rounded:!0,text:v.text,disabled:v.isDisabled,variant:a.value===v.value?"flat":"text",onClick:()=>{if(a.value===v.value){n("update:modelValue",a.value);return}a.value=v.value}};return((C=i.year)==null?void 0:C.call(i,{year:v,i:x,props:T}))??ue(gi,Dt({key:"month"},T),null)})])]),[[_u,{handler:s},null,{once:!0}]])),{}}}),C_e=ut({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...A7(),...P7({weeksInMonth:"static"}),...mr(M7(),["modelValue"]),...mr(D7(),["modelValue"]),...gS({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),k_e=Lt()({name:"VDatePicker",props:C_e(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const r=$b(),{t:a}=pr(),{rtlClasses:l}=Ks(),h=Dn(e,"modelValue",void 0,Xe=>Yr(Xe).map(Pe=>r.date(Pe)),Xe=>e.multiple?Xe:Xe[0]),s=Dn(e,"viewMode"),p=me(()=>{const Xe=r.date(e.min);return e.min&&r.isValid(Xe)?Xe:null}),v=me(()=>{const Xe=r.date(e.max);return e.max&&r.isValid(Xe)?Xe:null}),x=me(()=>{var $e;const Xe=r.date();let Pe=Xe;return($e=h.value)!=null&&$e[0]?Pe=r.date(h.value[0]):p.value&&r.isBefore(Xe,p.value)?Pe=p.value:v.value&&r.isAfter(Xe,v.value)&&(Pe=v.value),Pe&&r.isValid(Pe)?Pe:Xe}),T=He(()=>e.headerColor??e.color),C=Dn(e,"month"),I=me({get:()=>Number(C.value??r.getMonth(r.startOfMonth(x.value))),set:Xe=>C.value=Xe}),P=Dn(e,"year"),D=me({get:()=>Number(P.value??r.getYear(r.startOfYear(r.setMonth(x.value,I.value)))),set:Xe=>P.value=Xe}),F=nn(!1),V=me(()=>e.multiple&&h.value.length>1?a("$vuetify.datePicker.itemsSelected",h.value.length):h.value[0]&&r.isValid(h.value[0])?r.format(r.date(h.value[0]),"normalDateWithWeekday"):a(e.header)),H=me(()=>{let Xe=r.date();return Xe=r.setDate(Xe,1),Xe=r.setMonth(Xe,I.value),Xe=r.setYear(Xe,D.value),r.format(Xe,"monthAndYear")}),q=He(()=>`date-picker-header${F.value?"-reverse":""}-transition`),K=me(()=>{if(e.disabled)return!0;const Xe=[];if(s.value!=="month")Xe.push("prev","next");else{let Pe=r.date();if(Pe=r.startOfMonth(Pe),Pe=r.setMonth(Pe,I.value),Pe=r.setYear(Pe,D.value),p.value){const $e=r.addDays(r.startOfMonth(Pe),-1);r.isAfter(p.value,$e)&&Xe.push("prev")}if(v.value){const $e=r.addDays(r.endOfMonth(Pe),1);r.isAfter($e,v.value)&&Xe.push("next")}}return Xe}),ie=me(()=>e.allowedYears||G),X=me(()=>e.allowedMonths||j);function $(Xe,Pe){const $e=e.allowedDates;if(typeof $e!="function")return!0;const Ee=1+u2(r,Xe,Pe);for(let We=0;We<Ee;We++)if($e(r.addDays(Xe,We)))return!0;return!1}function G(Xe){if(typeof e.allowedDates=="function"){const Pe=r.parseISO(`${Xe}-01-01`);return $(Pe,r.endOfYear(Pe))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Pe of e.allowedDates)if(r.getYear(r.date(Pe))===Xe)return!0;return!1}return!0}function j(Xe){if(typeof e.allowedDates=="function"){const Pe=String(Xe+1).padStart(2,"0"),$e=r.parseISO(`${D.value}-${Pe}-01`);return $($e,r.endOfMonth($e))}if(Array.isArray(e.allowedDates)&&e.allowedDates.length){for(const Pe of e.allowedDates)if(r.getYear(r.date(Pe))===D.value&&r.getMonth(r.date(Pe))===Xe)return!0;return!1}return!0}function te(){I.value<11?I.value++:(D.value++,I.value=0,Ke()),Ve()}function Z(){I.value>0?I.value--:(D.value--,I.value=11,Ke()),Ve()}function ee(){s.value="month"}function be(){s.value=s.value==="months"?"month":"months"}function Ie(){s.value=s.value==="year"?"month":"year"}function Ve(){s.value==="months"&&be()}function Ke(){s.value==="year"&&Ie()}return Zt(h,(Xe,Pe)=>{const $e=Yr(Pe),Ee=Yr(Xe);if(!Ee.length)return;const We=r.date($e[$e.length-1]),Ze=r.date(Ee[Ee.length-1]),ct=r.getMonth(Ze),kt=r.getYear(Ze);ct!==I.value&&(I.value=ct,Ve()),kt!==D.value&&(D.value=kt,Ke()),F.value=r.isBefore(We,Ze)}),Ut(()=>{const Xe=g_.filterProps(e),Pe=VI.filterProps(e),$e=BI.filterProps(e),Ee=FI.filterProps(e),We=mr(zI.filterProps(e),["modelValue"]),Ze=mr(NI.filterProps(e),["modelValue"]),ct={color:T.value,header:V.value,transition:q.value};return ue(g_,Dt(Xe,{color:T.value,class:["v-date-picker",`v-date-picker--${s.value}`,{"v-date-picker--show-week":e.showWeek},l.value,e.class],style:e.style}),{title:()=>{var kt;return((kt=i.title)==null?void 0:kt.call(i))??B("div",{class:"v-date-picker__title"},[a(e.title)])},header:()=>i.header?ue(di,{defaults:{VDatePickerHeader:{...ct}}},{default:()=>{var kt;return[(kt=i.header)==null?void 0:kt.call(i,ct)]}}):ue(BI,Dt({key:"header"},$e,ct,{onClick:s.value!=="month"?ee:void 0}),{prepend:i.prepend,append:i.append}),default:()=>B(ln,null,[ue(VI,Dt(Pe,{disabled:K.value,text:H.value,"onClick:next":te,"onClick:prev":Z,"onClick:month":be,"onClick:year":Ie}),null),ue(nb,{hideOnLeave:!0},{default:()=>[s.value==="months"?ue(zI,Dt({key:"date-picker-months"},We,{modelValue:I.value,"onUpdate:modelValue":[kt=>I.value=kt,Ve],min:p.value,max:v.value,year:D.value,allowedMonths:X.value}),{month:i.month}):s.value==="year"?ue(NI,Dt({key:"date-picker-years"},Ze,{modelValue:D.value,"onUpdate:modelValue":[kt=>D.value=kt,Ke],min:p.value,max:v.value,allowedYears:ie.value}),{year:i.year}):ue(FI,Dt({key:"date-picker-month"},Ee,{modelValue:h.value,"onUpdate:modelValue":kt=>h.value=kt,month:I.value,"onUpdate:month":[kt=>I.value=kt,Ve],year:D.value,"onUpdate:year":[kt=>D.value=kt,Ke],min:p.value,max:v.value}),{day:i.day})]})]),actions:i.actions})}),{}}}),I_e=ut({actionText:String,bgColor:String,color:String,icon:Pn,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...Tn(),...Fs(),...gd({size:void 0}),...Li()},"VEmptyState"),A_e=Lt()({name:"VEmptyState",props:I_e(),emits:{"click:action":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{themeClasses:r}=nr(e),{backgroundColorClasses:a,backgroundColorStyles:l}=or(()=>e.bgColor),{dimensionStyles:h}=zs(e),{displayClasses:s}=Fl();function p(v){n("click:action",v)}return Ut(()=>{var D,F,V;const v=!!(i.actions||e.actionText),x=!!(i.headline||e.headline),T=!!(i.title||e.title),C=!!(i.text||e.text),I=!!(i.media||e.image||e.icon),P=e.size||(e.image?200:96);return B("div",{class:Tt(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},r.value,a.value,s.value,e.class]),style:Yt([l.value,h.value,e.style])},[I&&B("div",{key:"media",class:"v-empty-state__media"},[i.media?ue(di,{key:"media-defaults",defaults:{VImg:{src:e.image,height:P},VIcon:{size:P,icon:e.icon}}},{default:()=>[i.media()]}):B(ln,null,[e.image?ue(Eh,{key:"image",src:e.image,height:P},null):e.icon?ue(Di,{key:"icon",color:e.color,size:P,icon:e.icon},null):void 0])]),x&&B("div",{key:"headline",class:"v-empty-state__headline"},[((D=i.headline)==null?void 0:D.call(i))??e.headline]),T&&B("div",{key:"title",class:"v-empty-state__title"},[((F=i.title)==null?void 0:F.call(i))??e.title]),C&&B("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:vn(e.textWidth)}},[((V=i.text)==null?void 0:V.call(i))??e.text]),i.default&&B("div",{key:"content",class:"v-empty-state__content"},[i.default()]),v&&B("div",{key:"actions",class:"v-empty-state__actions"},[ue(di,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var H;return[((H=i.actions)==null?void 0:H.call(i,{props:{onClick:p}}))??ue(gi,{onClick:p},null)]}})])])}),{}}}),yb=Symbol.for("vuetify:v-expansion-panel"),L7=ut({...Tn(),...JP()},"VExpansionPanelText"),$I=Lt()({name:"VExpansionPanelText",props:L7(),setup(e,t){let{slots:n}=t;const i=ki(yb);if(!i)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:a}=QP(e,i.isSelected);return Ut(()=>ue(rS,{onAfterLeave:a},{default:()=>{var l;return[Oi(B("div",{class:Tt(["v-expansion-panel-text",e.class]),style:Yt(e.style)},[n.default&&r.value&&B("div",{class:"v-expansion-panel-text__wrapper"},[(l=n.default)==null?void 0:l.call(n)])]),[[bu,i.isSelected.value]])]}})),{}}}),R7=ut({color:String,expandIcon:{type:Pn,default:"$expand"},collapseIcon:{type:Pn,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...Tn(),...Fs()},"VExpansionPanelTitle"),UI=Lt()({name:"VExpansionPanelTitle",directives:{vRipple:Ga},props:R7(),setup(e,t){let{slots:n}=t;const i=ki(yb);if(!i)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color),{dimensionStyles:l}=zs(e),h=me(()=>({collapseIcon:e.collapseIcon,disabled:i.disabled.value,expanded:i.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),s=He(()=>i.isSelected.value?e.collapseIcon:e.expandIcon);return Ut(()=>{var p;return Oi(B("button",{class:Tt(["v-expansion-panel-title",{"v-expansion-panel-title--active":i.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:Yt([a.value,l.value,e.style]),type:"button",tabindex:i.disabled.value?-1:void 0,disabled:i.disabled.value,"aria-expanded":i.isSelected.value,onClick:e.readonly?void 0:i.toggle},[B("span",{class:"v-expansion-panel-title__overlay"},null),(p=n.default)==null?void 0:p.call(n,h.value),!e.hideActions&&ue(di,{defaults:{VIcon:{icon:s.value}}},{default:()=>{var v;return[B("span",{class:"v-expansion-panel-title__icon"},[((v=n.actions)==null?void 0:v.call(n,h.value))??ue(Di,null,null)])]}})]),[[Ga,e.ripple]])}),{}}}),O7=ut({title:String,text:String,bgColor:String,...Xs(),...mg(),...Hr(),...ii(),...R7(),...L7()},"VExpansionPanel"),P_e=Lt()({name:"VExpansionPanel",props:O7(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=am(e,yb),{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.bgColor),{elevationClasses:l}=To(e),{roundedClasses:h}=is(e),s=He(()=>(i==null?void 0:i.disabled.value)||e.disabled),p=me(()=>i.group.items.value.reduce((T,C,I)=>(i.group.selected.value.includes(C.id)&&T.push(I),T),[])),v=me(()=>{const T=i.group.items.value.findIndex(C=>C.id===i.id);return!i.isSelected.value&&p.value.some(C=>C-T===1)}),x=me(()=>{const T=i.group.items.value.findIndex(C=>C.id===i.id);return!i.isSelected.value&&p.value.some(C=>C-T===-1)});return Or(yb,i),Ut(()=>{const T=!!(n.text||e.text),C=!!(n.title||e.title),I=UI.filterProps(e),P=$I.filterProps(e);return ue(e.tag,{class:Tt(["v-expansion-panel",{"v-expansion-panel--active":i.isSelected.value,"v-expansion-panel--before-active":v.value,"v-expansion-panel--after-active":x.value,"v-expansion-panel--disabled":s.value},h.value,r.value,e.class]),style:Yt([a.value,e.style])},{default:()=>[B("div",{class:Tt(["v-expansion-panel__shadow",...l.value])},null),ue(di,{defaults:{VExpansionPanelTitle:{...I},VExpansionPanelText:{...P}}},{default:()=>{var D;return[C&&ue(UI,{key:"title"},{default:()=>[n.title?n.title():e.title]}),T&&ue($I,{key:"text"},{default:()=>[n.text?n.text():e.text]}),(D=n.default)==null?void 0:D.call(n)]}})]})}),{groupItem:i}}}),M_e=["default","accordion","inset","popout"],D_e=ut({flat:Boolean,...fg(),...Bl(O7(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Li(),...Tn(),...ii(),variant:{type:String,default:"default",validator:e=>M_e.includes(e)}},"VExpansionPanels"),L_e=Lt()({name:"VExpansionPanels",props:D_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{next:i,prev:r}=_m(e,yb),{themeClasses:a}=nr(e),l=He(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ns({VExpansionPanel:{bgColor:He(()=>e.bgColor),collapseIcon:He(()=>e.collapseIcon),color:He(()=>e.color),eager:He(()=>e.eager),elevation:He(()=>e.elevation),expandIcon:He(()=>e.expandIcon),focusable:He(()=>e.focusable),hideActions:He(()=>e.hideActions),readonly:He(()=>e.readonly),ripple:He(()=>e.ripple),rounded:He(()=>e.rounded),static:He(()=>e.static)}}),Ut(()=>ue(e.tag,{class:Tt(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},a.value,l.value,e.class]),style:Yt(e.style)},{default:()=>{var h;return[(h=n.default)==null?void 0:h.call(n,{prev:r,next:i})]}})),{next:i,prev:r}}}),R_e=ut({app:Boolean,appear:Boolean,extended:Boolean,layout:Boolean,offset:Boolean,modelValue:{type:Boolean,default:!0},...mr(tS({active:!0}),["location","spaced"]),...ug(),...Lh(),...Rh({transition:"fab-transition"})},"VFab"),O_e=Lt()({name:"VFab",props:R_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),r=nn(56),a=it(),{resizeRef:l}=Nc(x=>{x.length&&(r.value=x[0].target.clientHeight)}),h=He(()=>e.app||e.absolute),s=me(()=>{var x;return h.value?((x=e.location)==null?void 0:x.split(" ").shift())??"bottom":!1}),p=me(()=>{var x;return h.value?((x=e.location)==null?void 0:x.split(" ")[1])??"end":!1});ua(()=>e.app,()=>{const x=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:s,layoutSize:me(()=>e.layout?r.value+24:0),elementSize:me(()=>r.value+24),active:me(()=>e.app&&i.value),absolute:He(()=>e.absolute)});Wr(()=>{a.value=x.layoutItemStyles.value})});const v=it();return Ut(()=>{const x=gi.filterProps(e);return B("div",{ref:v,class:Tt(["v-fab",{"v-fab--absolute":e.absolute,"v-fab--app":!!e.app,"v-fab--extended":e.extended,"v-fab--offset":e.offset,[`v-fab--${s.value}`]:h.value,[`v-fab--${p.value}`]:h.value},e.class]),style:Yt([e.app?{...a.value}:{height:e.absolute?"100%":"inherit"},e.style])},[B("div",{class:"v-fab__container"},[ue($a,{appear:e.appear,transition:e.transition},{default:()=>[Oi(ue(gi,Dt({ref:l},x,{active:void 0,location:void 0}),n),[[bu,e.active]])]})])])}),{}}});function V_e(){function e(n){var r,a;return[...((r=n.dataTransfer)==null?void 0:r.items)??[]].filter(l=>l.kind==="file").map(l=>l.webkitGetAsEntry()).filter(Boolean).length>0||[...((a=n.dataTransfer)==null?void 0:a.files)??[]].length>0}async function t(n){var a,l;const i=[],r=[...((a=n.dataTransfer)==null?void 0:a.items)??[]].filter(h=>h.kind==="file").map(h=>h.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const h of r){const s=await V7(h,B7(".",h));i.push(...s.map(p=>p.file))}else i.push(...((l=n.dataTransfer)==null?void 0:l.files)??[]);return i}return{handleDrop:t,hasFilesOrFolders:e}}function V7(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((n,i)=>{e.isFile?e.file(a=>n([{file:a,path:t}]),i):e.isDirectory&&e.createReader().readEntries(async a=>{const l=[];for(const h of a)l.push(...await V7(h,B7(t,h)));n(l)})})}function B7(e,t){return t.isDirectory?`${e}/${t.name}`:e}const B_e=ut({filterByType:String},"file-accept");function F_e(e){const t=me(()=>e.filterByType?z_e(e.filterByType):null);function n(i){if(t.value){const r=i.filter(t.value);return{accepted:r,rejected:i.filter(a=>!r.includes(a))}}return{accepted:i,rejected:[]}}return{filterAccepted:n}}function z_e(e){const t=e.split(",").map(a=>a.trim().toLowerCase()),n=t.filter(a=>a.startsWith(".")),i=t.filter(a=>a.endsWith("/*")),r=t.filter(a=>!n.includes(a)&&!i.includes(a));return a=>{var s,p;const l=((s=a.name.split(".").at(-1))==null?void 0:s.toLowerCase())??"",h=((p=a.type.split("/").at(0))==null?void 0:p.toLowerCase())??"";return r.includes(a.type)||n.includes(`.${l}`)||i.includes(`${h}/*`)}}const N_e=ut({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Vh({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>Yr(e).every(t=>t!=null&&typeof t=="object")},...B_e(),...Yb({clearable:!0})},"VFileInput"),$_e=Lt()({name:"VFileInput",inheritAttrs:!1,props:N_e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{t:a}=pr(),{filterAccepted:l}=F_e(e),h=Dn(e,"modelValue",e.modelValue,Pe=>Yr(Pe),Pe=>!e.multiple&&Array.isArray(Pe)?Pe[0]:Pe),{isFocused:s,focus:p,blur:v}=Oh(e),x=me(()=>typeof e.showSize!="boolean"?e.showSize:void 0),T=me(()=>(h.value??[]).reduce((Pe,$e)=>{let{size:Ee=0}=$e;return Pe+Ee},0)),C=me(()=>e4(T.value,x.value)),I=me(()=>(h.value??[]).map(Pe=>{const{name:$e="",size:Ee=0}=Pe,We=ee($e);return e.showSize?`${We} (${e4(Ee,x.value)})`:We})),P=me(()=>{var $e;const Pe=(($e=h.value)==null?void 0:$e.length)??0;return e.showSize?a(e.counterSizeString,Pe,C.value):a(e.counterString,Pe)}),D=it(),F=it(),V=it(),H=He(()=>s.value||e.active),q=me(()=>["plain","underlined"].includes(e.variant)),K=nn(!1),{handleDrop:ie,hasFilesOrFolders:X}=V_e();function $(){var Pe;V.value!==document.activeElement&&((Pe=V.value)==null||Pe.focus()),s.value||p()}function G(Pe){var $e;($e=V.value)==null||$e.click()}function j(Pe){i("mousedown:control",Pe)}function te(Pe){var $e;($e=V.value)==null||$e.click(),i("click:control",Pe)}function Z(Pe){Pe.stopPropagation(),$(),Gn(()=>{h.value=[],Fb(e["onClick:clear"],Pe)})}function ee(Pe){if(Pe.length<Number(e.truncateLength))return Pe;const $e=Math.floor((Number(e.truncateLength)-1)/2);return`${Pe.slice(0,$e)}${Pe.slice(Pe.length-$e)}`}function be(Pe){Pe.preventDefault(),Pe.stopImmediatePropagation(),K.value=!0}function Ie(Pe){Pe.preventDefault(),K.value=!1}async function Ve(Pe){if(Pe.preventDefault(),Pe.stopImmediatePropagation(),K.value=!1,!V.value||!X(Pe))return;const $e=await ie(Pe);Xe($e)}function Ke(Pe){if(!(!Pe.target||Pe.repack))if(e.filterByType)Xe([...Pe.target.files]);else{const $e=Pe.target;h.value=[...$e.files??[]]}}function Xe(Pe){const $e=new DataTransfer,{accepted:Ee,rejected:We}=l(Pe);We.length&&i("rejected",We);for(const ct of Ee)$e.items.add(ct);V.value.files=$e.files,h.value=[...$e.files];const Ze=new Event("change",{bubbles:!0});Ze.repack=!0,V.value.dispatchEvent(Ze)}return Zt(h,Pe=>{(!Array.isArray(Pe)||!Pe.length)&&V.value&&(V.value.value="")}),Ut(()=>{const Pe=!!(r.counter||e.counter),$e=!!(Pe||r.details),[Ee,We]=gm(n),{modelValue:Ze,...ct}=ha.filterProps(e),kt={...cm.filterProps(e),"onClick:clear":Z},Nt=n.webkitdirectory!==void 0&&n.webkitdirectory!==!1,ot=n.accept?String(n.accept):void 0,dt=Nt?void 0:e.filterByType??ot;return ue(ha,Dt({ref:D,modelValue:e.multiple?h.value:h.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":K.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":q.value},e.class],style:e.style,"onClick:prepend":G},Ee,ct,{centerAffix:!q.value,focused:s.value}),{...r,default:Je=>{let{id:yt,isDisabled:Ne,isDirty:le,isReadonly:we,isValid:_e,hasDetails:fe}=Je;return ue(cm,Dt({ref:F,prependIcon:e.prependIcon,onMousedown:j,onClick:te,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},kt,{id:yt.value,active:H.value||le.value,dirty:le.value||e.dirty,disabled:Ne.value,focused:s.value,details:fe.value,error:_e.value===!1,onDragover:be,onDrop:Ve}),{...r,default:Fe=>{var gt;let{props:{class:rt,...pt},controlRef:vt}=Fe;return B(ln,null,[B("input",Dt({ref:mt=>V.value=vt.value=mt,type:"file",accept:dt,readonly:we.value,disabled:Ne.value,multiple:e.multiple,name:e.name,onClick:mt=>{mt.stopPropagation(),we.value&&mt.preventDefault(),$()},onChange:Ke,onDragleave:Ie,onFocus:$,onBlur:v},pt,We),null),B("div",{class:Tt(rt)},[!!((gt=h.value)!=null&&gt.length)&&!e.hideInput&&(r.selection?r.selection({fileNames:I.value,totalBytes:T.value,totalBytesReadable:C.value}):e.chips?I.value.map(mt=>ue(Ls,{key:mt,size:"small",text:mt},null)):I.value.join(", "))])])}})},details:$e?Je=>{var yt,Ne;return B(ln,null,[(yt=r.details)==null?void 0:yt.call(r,Je),Pe&&B(ln,null,[B("span",null,null),ue(sS,{active:!!((Ne=h.value)!=null&&Ne.length),value:P.value,disabled:e.disabled},r.counter)])])}:void 0})}),So({},D,F,V)}}),U_e=ut({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...ul(),...Tn(),...Xs(),...ug(),...Hr(),...ii({tag:"footer"}),...Li()},"VFooter"),j_e=Lt()({name:"VFooter",props:U_e(),setup(e,t){let{slots:n}=t;const i=it(),{themeClasses:r}=nr(e),{backgroundColorClasses:a,backgroundColorStyles:l}=or(()=>e.color),{borderClasses:h}=zl(e),{elevationClasses:s}=To(e),{roundedClasses:p}=is(e),v=nn(32),{resizeRef:x}=Nc(C=>{C.length&&(v.value=C[0].target.clientHeight)}),T=me(()=>e.height==="auto"?v.value:parseInt(e.height,10));return ua(()=>e.app,()=>{const C=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:He(()=>"bottom"),layoutSize:T,elementSize:me(()=>e.height==="auto"?void 0:T.value),active:He(()=>e.app),absolute:He(()=>e.absolute)});Wr(()=>{i.value=C.layoutItemStyles.value})}),Ut(()=>ue(e.tag,{ref:x,class:Tt(["v-footer",r.value,a.value,h.value,s.value,p.value,e.class]),style:Yt([l.value,e.app?i.value:{height:vn(e.height)},e.style])},n)),{}}}),W_e=ut({...Tn(),...Nse()},"VForm"),H_e=Lt()({name:"VForm",props:W_e(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=$se(e),a=it();function l(s){s.preventDefault(),r.reset()}function h(s){const p=s,v=r.validate();p.then=v.then.bind(v),p.catch=v.catch.bind(v),p.finally=v.finally.bind(v),i("submit",p),p.defaultPrevented||v.then(x=>{var C;let{valid:T}=x;T&&((C=a.value)==null||C.submit())}),p.preventDefault()}return Ut(()=>{var s;return B("form",{ref:a,class:Tt(["v-form",e.class]),style:Yt(e.style),novalidate:!0,onReset:l,onSubmit:h},[(s=n.default)==null?void 0:s.call(n,r)])}),So(r,a)}}),G_e=ut({disabled:Boolean,modelValue:{type:Boolean,default:null},...YP()},"VHover"),q_e=Lt()({name:"VHover",props:G_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),{runOpenDelay:r,runCloseDelay:a}=ZP(e,l=>!e.disabled&&(i.value=l));return()=>{var l;return(l=n.default)==null?void 0:l.call(n,{isHovering:i.value,props:{onMouseenter:r,onMouseleave:a}})}}}),K_e=ut({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...Fs(),...ii()},"VInfiniteScroll"),wV=hc({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:n}=t;const{intersectionRef:i,isIntersecting:r}=Ub();return Zt(r,async a=>{n("intersect",e.side,a)}),Ut(()=>B("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:i},[zn("")])),{}}}),X_e=Lt()({name:"VInfiniteScroll",props:K_e(),emits:{load:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=it(),a=nn("ok"),l=nn("ok"),h=me(()=>vn(e.margin)),s=nn(!1);function p(ie){if(!r.value)return;const X=e.direction==="vertical"?"scrollTop":"scrollLeft";r.value[X]=ie}function v(){if(!r.value)return 0;const ie=e.direction==="vertical"?"scrollTop":"scrollLeft";return r.value[ie]}function x(){if(!r.value)return 0;const ie=e.direction==="vertical"?"scrollHeight":"scrollWidth";return r.value[ie]}function T(){if(!r.value)return 0;const ie=e.direction==="vertical"?"clientHeight":"clientWidth";return r.value[ie]}Dr(()=>{r.value&&(e.side==="start"?p(x()):e.side==="both"&&p(x()/2-T()/2))});function C(ie,X){ie==="start"?a.value=X:ie==="end"?l.value=X:ie==="both"&&(a.value=X,l.value=X)}function I(ie){return ie==="start"?a.value:l.value}let P=0;function D(ie,X){s.value=X,s.value&&F(ie)}function F(ie){if(e.mode!=="manual"&&!s.value)return;const X=I(ie);if(!r.value||["empty","loading"].includes(X))return;P=x(),C(ie,"loading");function $(G){C(ie,G),Gn(()=>{G==="empty"||G==="error"||(G==="ok"&&ie==="start"&&p(x()-P+v()),e.mode!=="manual"&&Gn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{F(ie)})})})}))})}i("load",{side:ie,done:$})}const{t:V}=pr();function H(ie,X){var j,te,Z,ee,be;if(e.side!==ie&&e.side!=="both")return;const $=()=>F(ie),G={side:ie,props:{onClick:$,color:e.color}};return X==="error"?(j=n.error)==null?void 0:j.call(n,G):X==="empty"?((te=n.empty)==null?void 0:te.call(n,G))??B("div",null,[V(e.emptyText)]):e.mode==="manual"?X==="loading"?((Z=n.loading)==null?void 0:Z.call(n,G))??ue(Yp,{indeterminate:!0,color:e.color},null):((ee=n["load-more"])==null?void 0:ee.call(n,G))??ue(gi,{variant:"outlined",color:e.color,onClick:$},{default:()=>[V(e.loadMoreText)]}):((be=n.loading)==null?void 0:be.call(n,G))??ue(Yp,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:q}=zs(e);Ut(()=>{const ie=e.tag,X=e.side==="start"||e.side==="both",$=e.side==="end"||e.side==="both",G=e.mode==="intersect";return ue(ie,{ref:r,class:Tt(["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":X,"v-infinite-scroll--end":$}]),style:Yt(q.value)},{default:()=>{var j;return[B("div",{class:"v-infinite-scroll__side"},[H("start",a.value)]),X&&G&&ue(wV,{key:"start",side:"start",onIntersect:D,rootMargin:h.value},null),(j=n.default)==null?void 0:j.call(n),$&&G&&ue(wV,{key:"end",side:"end",onIntersect:D,rootMargin:h.value},null),B("div",{class:"v-infinite-scroll__side"},[H("end",l.value)])]}})});function K(ie){const X=ie??e.side;C(X,"ok"),Gn(()=>{p(x()-P+v()),e.mode!=="manual"&&Gn(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{X==="both"?(F("start"),F("end")):F(X)})})})})})}return{reset:K}}}),F7=Symbol.for("vuetify:v-item-group"),Y_e=ut({...Tn(),...fg({selectedClass:"v-item--selected"}),...ii(),...Li()},"VItemGroup"),Z_e=Lt()({name:"VItemGroup",props:Y_e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{isSelected:r,select:a,next:l,prev:h,selected:s}=_m(e,F7);return()=>ue(e.tag,{class:Tt(["v-item-group",i.value,e.class]),style:Yt(e.style)},{default:()=>{var p;return[(p=n.default)==null?void 0:p.call(n,{isSelected:r,select:a,next:l,prev:h,selected:s.value})]}})}}),J_e=Lt()({name:"VItem",props:mg(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const{isSelected:i,select:r,toggle:a,selectedClass:l,value:h,disabled:s}=am(e,F7);return()=>{var p;return(p=n.default)==null?void 0:p.call(n,{isSelected:i.value,selectedClass:l.value,select:r,toggle:a,value:h.value,disabled:s.value})}}}),Q_e=ut({color:String,...ul(),...Tn(),...Hr(),...ii({tag:"kbd"}),...Li(),...Xs()},"VKbd"),eye=Lt()({name:"VKbd",props:Q_e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{borderClasses:r}=zl(e),{roundedClasses:a}=is(e),{backgroundColorClasses:l,backgroundColorStyles:h}=or(()=>e.color),{elevationClasses:s}=To(e);return Ut(()=>ue(e.tag,{class:Tt(["v-kbd",i.value,l.value,r.value,s.value,a.value,e.class]),style:Yt([h.value,e.style])},n)),{}}}),tye=ut({...Tn(),...Fs(),...p2()},"VLayout"),nye=Lt()({name:"VLayout",props:tye(),setup(e,t){let{slots:n}=t;const{layoutClasses:i,layoutStyles:r,getLayoutItem:a,items:l,layoutRef:h}=v2(e),{dimensionStyles:s}=zs(e);return Ut(()=>{var p;return B("div",{ref:h,class:Tt([i.value,e.class]),style:Yt([s.value,r.value,e.style])},[(p=n.default)==null?void 0:p.call(n)])}),{getLayoutItem:a,items:l}}}),iye=ut({position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Tn(),...ug()},"VLayoutItem"),rye=Lt()({name:"VLayoutItem",props:iye(),setup(e,t){let{slots:n}=t;const{layoutItemStyles:i}=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:He(()=>e.position),elementSize:He(()=>e.size),layoutSize:He(()=>e.size),active:He(()=>e.modelValue),absolute:He(()=>e.absolute)});return()=>{var r;return B("div",{class:Tt(["v-layout-item",e.class]),style:Yt([i.value,e.style])},[(r=n.default)==null?void 0:r.call(n)])}}}),sye=ut({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Tn(),...Fs(),...ii(),...Rh({transition:"fade-transition"})},"VLazy"),oye=Lt()({name:"VLazy",directives:{vIntersect:_u},props:sye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=zs(e),r=Dn(e,"modelValue");function a(l){r.value||(r.value=l)}return Ut(()=>Oi(ue(e.tag,{class:Tt(["v-lazy",e.class]),style:Yt([i.value,e.style])},{default:()=>[r.value&&ue($a,{transition:e.transition,appear:!0},{default:()=>{var l;return[(l=n.default)==null?void 0:l.call(n)]}})]}),[[_u,{handler:a,options:e.options},null]])),{}}}),aye=ut({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Tn()},"VLocaleProvider"),lye=Lt()({name:"VLocaleProvider",props:aye(),setup(e,t){let{slots:n}=t;const{rtlClasses:i}=Sie(e);return Ut(()=>{var r;return B("div",{class:Tt(["v-locale-provider",i.value,e.class]),style:Yt(e.style)},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),cye=ut({scrollable:Boolean,...Tn(),...Fs(),...ii({tag:"main"})},"VMain"),uye=Lt()({name:"VMain",props:cye(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=zs(e),{mainStyles:r}=g2(),{ssrBootStyles:a}=gg();return Ut(()=>ue(e.tag,{class:Tt(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:Yt([r.value,a.value,i.value,e.style])},{default:()=>{var l,h;return[e.scrollable?B("div",{class:"v-main__scroller"},[(l=n.default)==null?void 0:l.call(n)]):(h=n.default)==null?void 0:h.call(n)]}})),{}}});function dye(e){let{rootEl:t,isSticky:n,layoutItemStyles:i}=e;const r=nn(!1),a=nn(0),l=me(()=>{const p=typeof r.value=="boolean"?"top":r.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[p]:vn(a.value)}:{top:i.value.top}]});Dr(()=>{Zt(n,p=>{p?window.addEventListener("scroll",s,{passive:!0}):window.removeEventListener("scroll",s)},{immediate:!0})}),jr(()=>{window.removeEventListener("scroll",s)});let h=0;function s(){const p=h>window.scrollY?"up":"down",v=t.value.getBoundingClientRect(),x=parseFloat(i.value.top??0),T=window.scrollY-Math.max(0,a.value-x),C=v.height+Math.max(a.value,x)-window.scrollY-window.innerHeight,I=parseFloat(getComputedStyle(t.value).getPropertyValue("--v-body-scroll-y"))||0;v.height<window.innerHeight-x?(r.value="top",a.value=x):p==="up"&&r.value==="bottom"||p==="down"&&r.value==="top"?(a.value=window.scrollY+v.top-I,r.value=!0):p==="down"&&C<=0?(a.value=0,r.value="bottom"):p==="up"&&T<=0&&(I?r.value!=="top"&&(a.value=-T+I+x,r.value="top"):(a.value=v.top+T,r.value="top")),h=window.scrollY}return{isStuck:r,stickyStyles:l}}const hye=100,fye=20;function TV(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function SV(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let t=0;for(let n=e.length-1;n>0;n--){if(e[n].t===e[n-1].t)continue;const i=TV(t),r=(e[n].d-e[n-1].d)/(e[n].t-e[n-1].t);t+=(r-i)*Math.abs(r),n===e.length-1&&(t*=.5)}return TV(t)*1e3}function mye(){const e={};function t(r){Array.from(r.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new $N(fye))).push([r.timeStamp,a])})}function n(r){Array.from(r.changedTouches).forEach(a=>{delete e[a.identifier]})}function i(r){var p;const a=(p=e[r])==null?void 0:p.values().reverse();if(!a)throw new Error(`No samples for touch id ${r}`);const l=a[0],h=[],s=[];for(const v of a){if(l[0]-v[0]>hye)break;h.push({t:v[0],d:v[1].clientX}),s.push({t:v[0],d:v[1].clientY})}return{x:SV(h),y:SV(s),get direction(){const{x:v,y:x}=this,[T,C]=[Math.abs(v),Math.abs(x)];return T>C&&v>=0?"right":T>C&&v<=0?"left":C>T&&x>=0?"down":C>T&&x<=0?"up":pye()}}}return{addMovement:t,endTouch:n,getVelocity:i}}function pye(){throw new Error}function gye(e){let{el:t,isActive:n,isTemporary:i,width:r,touchless:a,position:l}=e;Dr(()=>{window.addEventListener("touchstart",V,{passive:!0}),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),jr(()=>{window.removeEventListener("touchstart",V),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",q)});const h=me(()=>["left","right"].includes(l.value)),{addMovement:s,endTouch:p,getVelocity:v}=mye();let x=!1;const T=nn(!1),C=nn(0),I=nn(0);let P;function D(ie,X){return(l.value==="left"?ie:l.value==="right"?document.documentElement.clientWidth-ie:l.value==="top"?ie:l.value==="bottom"?document.documentElement.clientHeight-ie:pv())-(X?r.value:0)}function F(ie){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const $=l.value==="left"?(ie-I.value)/r.value:l.value==="right"?(document.documentElement.clientWidth-ie-I.value)/r.value:l.value==="top"?(ie-I.value)/r.value:l.value==="bottom"?(document.documentElement.clientHeight-ie-I.value)/r.value:pv();return X?kr($):$}function V(ie){if(a.value)return;const X=ie.changedTouches[0].clientX,$=ie.changedTouches[0].clientY,G=25,j=l.value==="left"?X<G:l.value==="right"?X>document.documentElement.clientWidth-G:l.value==="top"?$<G:l.value==="bottom"?$>document.documentElement.clientHeight-G:pv(),te=n.value&&(l.value==="left"?X<r.value:l.value==="right"?X>document.documentElement.clientWidth-r.value:l.value==="top"?$<r.value:l.value==="bottom"?$>document.documentElement.clientHeight-r.value:pv());(j||te||n.value&&i.value)&&(P=[X,$],I.value=D(h.value?X:$,n.value),C.value=F(h.value?X:$),x=I.value>-20&&I.value<80,p(ie),s(ie))}function H(ie){const X=ie.changedTouches[0].clientX,$=ie.changedTouches[0].clientY;if(x){if(!ie.cancelable){x=!1;return}const j=Math.abs(X-P[0]),te=Math.abs($-P[1]);(h.value?j>te&&j>3:te>j&&te>3)?(T.value=!0,x=!1):(h.value?te:j)>3&&(x=!1)}if(!T.value)return;ie.preventDefault(),s(ie);const G=F(h.value?X:$,!1);C.value=Math.max(0,Math.min(1,G)),G>1?I.value=D(h.value?X:$,!0):G<0&&(I.value=D(h.value?X:$,!1))}function q(ie){if(x=!1,!T.value)return;s(ie),T.value=!1;const X=v(ie.changedTouches[0].identifier),$=Math.abs(X.x),G=Math.abs(X.y);(h.value?$>G&&$>400:G>$&&G>3)?n.value=X.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||pv()):n.value=C.value>.5}const K=me(()=>T.value?{transform:l.value==="left"?`translateX(calc(-100% + ${C.value*r.value}px))`:l.value==="right"?`translateX(calc(100% - ${C.value*r.value}px))`:l.value==="top"?`translateY(calc(-100% + ${C.value*r.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${C.value*r.value}px))`:pv(),transition:"none"}:void 0);return ua(T,()=>{var $,G;const ie=(($=t.value)==null?void 0:$.style.transform)??null,X=((G=t.value)==null?void 0:G.style.transition)??null;Wr(()=>{var j,te,Z,ee;(te=t.value)==null||te.style.setProperty("transform",((j=K.value)==null?void 0:j.transform)||"none"),(ee=t.value)==null||ee.style.setProperty("transition",((Z=K.value)==null?void 0:Z.transition)||null)}),lo(()=>{var j,te;(j=t.value)==null||j.style.setProperty("transform",ie),(te=t.value)==null||te.style.setProperty("transition",X)})}),{isDragging:T,dragProgress:C,dragStyles:K}}function pv(){throw new Error}const vye=["start","end","left","right","top","bottom"],_ye=ut({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>vye.includes(e)},sticky:Boolean,...ul(),...Tn(),...YP(),...cg({mobile:null}),...Xs(),...ug(),...Hr(),...ii({tag:"nav"}),...Li()},"VNavigationDrawer"),yye=Lt()({name:"VNavigationDrawer",props:_ye(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{isRtl:a}=Ks(),{themeClasses:l}=nr(e),{borderClasses:h}=zl(e),{backgroundColorClasses:s,backgroundColorStyles:p}=or(()=>e.color),{elevationClasses:v}=To(e),{displayClasses:x,mobile:T}=Fl(e),{roundedClasses:C}=is(e),I=S2(),P=Dn(e,"modelValue",null,$e=>!!$e),{ssrBootStyles:D}=gg(),{scopeId:F}=vg(),V=it(),H=nn(!1),{runOpenDelay:q,runCloseDelay:K}=ZP(e,$e=>{H.value=$e}),ie=me(()=>e.rail&&e.expandOnHover&&H.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),X=me(()=>Yk(e.location,a.value)),$=He(()=>e.persistent),G=me(()=>!e.permanent&&(T.value||e.temporary)),j=me(()=>e.sticky&&!G.value&&X.value!=="bottom");ua(()=>e.expandOnHover&&e.rail!=null,()=>{Zt(H,$e=>i("update:rail",!$e))}),ua(()=>!e.disableResizeWatcher,()=>{Zt(G,$e=>!e.permanent&&Gn(()=>P.value=!$e))}),ua(()=>!e.disableRouteWatcher&&!!I,()=>{Zt(I.currentRoute,()=>G.value&&(P.value=!1))}),Zt(()=>e.permanent,$e=>{$e&&(P.value=!0)}),e.modelValue==null&&!G.value&&(P.value=e.permanent||!T.value);const{isDragging:te,dragProgress:Z}=gye({el:V,isActive:P,isTemporary:G,width:ie,touchless:He(()=>e.touchless),position:X}),ee=me(()=>{const $e=G.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):ie.value;return te.value?$e*Z.value:$e}),{layoutItemStyles:be,layoutItemScrimStyles:Ie}=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:X,layoutSize:ee,elementSize:ie,active:$p(P),disableTransitions:He(()=>te.value),absolute:me(()=>e.absolute||j.value&&typeof Ve.value!="string")}),{isStuck:Ve,stickyStyles:Ke}=dye({rootEl:V,isSticky:j,layoutItemStyles:be}),Xe=or(()=>typeof e.scrim=="string"?e.scrim:null),Pe=me(()=>({...te.value?{opacity:Z.value*.2,transition:"none"}:void 0,...Ie.value}));return ns({VList:{bgColor:"transparent"}}),Ut(()=>{const $e=r.image||e.image;return B(ln,null,[ue(e.tag,Dt({ref:V,onMouseenter:q,onMouseleave:K,class:["v-navigation-drawer",`v-navigation-drawer--${X.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":H.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":G.value,"v-navigation-drawer--persistent":$.value,"v-navigation-drawer--active":P.value,"v-navigation-drawer--sticky":j.value},l.value,s.value,h.value,x.value,v.value,C.value,e.class],style:[p.value,be.value,D.value,Ke.value,e.style]},F,n),{default:()=>{var Ee,We,Ze;return[$e&&B("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?ue(di,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},r.image):ue(Eh,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),r.prepend&&B("div",{class:"v-navigation-drawer__prepend"},[(Ee=r.prepend)==null?void 0:Ee.call(r)]),B("div",{class:"v-navigation-drawer__content"},[(We=r.default)==null?void 0:We.call(r)]),r.append&&B("div",{class:"v-navigation-drawer__append"},[(Ze=r.append)==null?void 0:Ze.call(r)])]}}),ue(Ol,{name:"fade-transition"},{default:()=>[G.value&&(te.value||P.value)&&!!e.scrim&&B("div",Dt({class:["v-navigation-drawer__scrim",Xe.backgroundColorClasses.value],style:[Pe.value,Xe.backgroundColorStyles.value],onClick:()=>{$.value||(P.value=!1)}},F),null)]})])}),{isStuck:Ve}}}),bye=hc({name:"VNoSsr",setup(e,t){let{slots:n}=t;const i=g8();return()=>{var r;return i.value&&((r=n.default)==null?void 0:r.call(n))}}}),xye=50,wye=500;function Tye(e){let{toggleUpDown:t}=e,n=-1,i=-1;lo(a);function r(h){a(),l(h),window.addEventListener("pointerup",a),document.addEventListener("blur",a),n=window.setTimeout(()=>{i=window.setInterval(()=>l(h),xye)},wye)}function a(){window.clearTimeout(n),window.clearInterval(i),window.removeEventListener("pointerup",a),document.removeEventListener("blur",a)}function l(h){t(h==="up")}return{holdStart:r,holdStop:a}}const Sye=ut({controlVariant:{type:String,default:"default"},inset:Boolean,hideInput:Boolean,modelValue:{type:Number,default:null},min:{type:Number,default:Number.MIN_SAFE_INTEGER},max:{type:Number,default:Number.MAX_SAFE_INTEGER},step:{type:Number,default:1},precision:{type:Number,default:0},minFractionDigits:{type:Number,default:null},decimalSeparator:{type:String,validator:e=>!e||e.length===1},...mr(Zb(),["modelValue","validationValue"])},"VNumberInput"),Eye=Lt()({name:"VNumberInput",props:{...Sye()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=it(),{holdStart:r,holdStop:a}=Tye({toggleUpDown:G}),l=M_(e),h=me(()=>l.isDisabled.value||l.isReadonly.value),s=nn(e.focused),{decimalSeparator:p}=pr(),v=me(()=>{var Ee;return((Ee=e.decimalSeparator)==null?void 0:Ee[0])||p.value});function x(Ee){let We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.precision,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const ct=We==null?String(Ee):Ee.toFixed(We);if(s.value&&Ze)return Number(ct).toString().replace(".",v.value);if(e.minFractionDigits===null||We!==null&&We<e.minFractionDigits)return ct.replace(".",v.value);let[kt,Nt]=ct.split(".");return Nt=(Nt??"").padEnd(e.minFractionDigits,"0").replace(new RegExp(`(?<=\\d{${e.minFractionDigits}})0+$`,"g"),""),[kt,Nt].filter(Boolean).join(v.value)}const T=Dn(e,"modelValue",null,Ee=>Ee??null,Ee=>Ee==null?Ee??null:kr(Number(Ee),e.min,e.max)),C=nn(null);Wr(()=>{var Ee;s.value&&!h.value&&Number((Ee=C.value)==null?void 0:Ee.replace(v.value,"."))===T.value||(T.value==null?C.value=null:isNaN(T.value)||(C.value=x(T.value)))});const I=me({get:()=>C.value,set(Ee){if(Ee===null||Ee===""){T.value=null,C.value=null;return}const We=Number(Ee.replace(v.value,"."));!isNaN(We)&&We<=e.max&&We>=e.min&&(T.value=We,C.value=Ee)}}),P=me(()=>h.value?!1:(T.value??0)+e.step<=e.max),D=me(()=>h.value?!1:(T.value??0)-e.step>=e.min),F=me(()=>e.hideInput?"stacked":e.controlVariant),V=He(()=>F.value==="split"?"$plus":"$collapse"),H=He(()=>F.value==="split"?"$minus":"$expand"),q=He(()=>F.value==="split"?"default":"small"),K=He(()=>F.value==="stacked"?"auto":"100%"),ie={props:{onClick:Z,onPointerup:ee,onPointerdown:be,onPointercancel:ee}},X={props:{onClick:Z,onPointerup:ee,onPointerdown:Ie,onPointercancel:ee}};Zt(()=>e.precision,()=>Ke()),Zt(()=>e.minFractionDigits,()=>Ke()),Dr(()=>{Ve()});function $(Ee){if(Ee==null)return 0;const We=Ee.toString(),Ze=We.indexOf(".");return~Ze?We.length-Ze:0}function G(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(h.value)return;if(T.value==null){I.value=x(kr(0,e.min,e.max));return}let We=Math.max($(T.value),$(e.step));e.precision!=null&&(We=Math.max(We,e.precision)),Ee?P.value&&(I.value=x(T.value+e.step,We)):D.value&&(I.value=x(T.value-e.step,We))}function j(Ee){var dt;if(!Ee.data)return;const We=Ee.target,{value:Ze,selectionStart:ct,selectionEnd:kt}=We??{},Nt=Ze?Ze.slice(0,ct)+Ee.data+Ze.slice(kt):Ee.data,ot=One(Nt,e.precision,v.value);if(new RegExp(`^-?\\d*${Hw(v.value)}?\\d*$`).test(Nt)||(Ee.preventDefault(),We.value=ot,Gn(()=>I.value=ot)),e.precision!=null){if(((dt=Nt.split(v.value)[1])==null?void 0:dt.length)>e.precision){Ee.preventDefault(),We.value=ot,Gn(()=>I.value=ot);const Je=(ct??0)+Ee.data.length;We.setSelectionRange(Je,Je)}e.precision===0&&Nt.endsWith(v.value)&&(Ee.preventDefault(),We.value=ot,Gn(()=>I.value=ot))}}async function te(Ee){["Enter","ArrowLeft","ArrowRight","Backspace","Delete","Tab"].includes(Ee.key)||Ee.ctrlKey||["ArrowDown","ArrowUp"].includes(Ee.key)&&(Ee.preventDefault(),Ee.stopPropagation(),Ve(),await Gn(),Ee.key==="ArrowDown"?G(!1):G())}function Z(Ee){Ee.stopPropagation()}function ee(Ee){const We=Ee.currentTarget;We==null||We.releasePointerCapture(Ee.pointerId),Ee.preventDefault(),a()}function be(Ee){const We=Ee.currentTarget;We==null||We.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("up")}function Ie(Ee){const We=Ee.currentTarget;We==null||We.setPointerCapture(Ee.pointerId),Ee.preventDefault(),Ee.stopPropagation(),r("down")}function Ve(){if(h.value||!i.value)return;const Ee=i.value.value,We=Number(Ee.replace(v.value,"."));Ee&&!isNaN(We)?I.value=x(kr(We,e.min,e.max)):I.value=null}function Ke(){h.value||(I.value=T.value!==null&&!isNaN(T.value)?x(T.value,e.precision,!1):null)}function Xe(){if(!h.value){if(T.value===null||isNaN(T.value)){I.value=null;return}I.value=T.value.toString().replace(".",v.value)}}function Pe(){Xe()}function $e(){Ve()}return Ut(()=>{const{modelValue:Ee,type:We,...Ze}=Ch.filterProps(e);function ct(){return n.increment?ue(di,{key:"increment-defaults",defaults:{VBtn:{disabled:!P.value,height:K.value,size:q.value,icon:V.value,variant:"text"}}},{default:()=>[n.increment(ie)]}):ue(gi,{"aria-hidden":"true","data-testid":"increment",disabled:!P.value,height:K.value,icon:V.value,key:"increment-btn",onClick:Z,onPointerdown:be,onPointerup:ee,onPointercancel:ee,size:q.value,variant:"text",tabindex:"-1"},null)}function kt(){return n.decrement?ue(di,{key:"decrement-defaults",defaults:{VBtn:{disabled:!D.value,height:K.value,size:q.value,icon:H.value,variant:"text"}}},{default:()=>[n.decrement(X)]}):ue(gi,{"aria-hidden":"true","data-testid":"decrement",disabled:!D.value,height:K.value,icon:H.value,key:"decrement-btn",onClick:Z,onPointerdown:Ie,onPointerup:ee,onPointercancel:ee,size:q.value,variant:"text",tabindex:"-1"},null)}function Nt(){return B("div",{class:"v-number-input__control"},[kt(),ue(ac,{vertical:F.value!=="stacked"},null),ct()])}function ot(){return!e.hideInput&&!e.inset?ue(ac,{vertical:!0},null):void 0}const dt=F.value==="split"?B("div",{class:"v-number-input__control"},[ue(ac,{vertical:!0},null),ct()]):e.reverse||F.value==="hidden"?void 0:B(ln,null,[ot(),Nt()]),Je=n["append-inner"]||dt,yt=F.value==="split"?B("div",{class:"v-number-input__control"},[kt(),ue(ac,{vertical:!0},null)]):e.reverse&&F.value!=="hidden"?B(ln,null,[Nt(),ot()]):void 0,Ne=n["prepend-inner"]||yt;return ue(Ch,Dt({ref:i},Ze,{modelValue:I.value,"onUpdate:modelValue":le=>I.value=le,focused:s.value,"onUpdate:focused":le=>s.value=le,validationValue:T.value,onBeforeinput:j,onFocus:Pe,onBlur:$e,onKeydown:te,class:["v-number-input",{"v-number-input--default":F.value==="default","v-number-input--hide-input":e.hideInput,"v-number-input--inset":e.inset,"v-number-input--reverse":e.reverse,"v-number-input--split":F.value==="split","v-number-input--stacked":F.value==="stacked"},e.class],style:e.style,inputmode:"decimal"}),{...n,"append-inner":Je?function(){var fe;for(var le=arguments.length,we=new Array(le),_e=0;_e<le;_e++)we[_e]=arguments[_e];return B(ln,null,[(fe=n["append-inner"])==null?void 0:fe.call(n,...we),dt])}:void 0,"prepend-inner":Ne?function(){var fe;for(var le=arguments.length,we=new Array(le),_e=0;_e<le;_e++)we[_e]=arguments[_e];return B(ln,null,[yt,(fe=n["prepend-inner"])==null?void 0:fe.call(n,...we)])}:void 0})}),So({},i)}}),Cye=ut({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...Fs(),...Kb(),...Bl(Yb({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),kye=Lt()({name:"VOtpInput",props:Cye(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const{dimensionStyles:a}=zs(e),{isFocused:l,focus:h,blur:s}=Oh(e),p=Dn(e,"modelValue","",j=>j==null?[]:String(j).split(""),j=>j.join("")),{t:v}=pr(),x=me(()=>Number(e.length)),T=me(()=>Array(x.value).fill(0)),C=it(-1),I=it(),P=it([]),D=me(()=>P.value[C.value]);let F=!1;ua(()=>e.autofocus,()=>{const j=jv();j.run(()=>{const{intersectionRef:te,isIntersecting:Z}=Ub();Wr(()=>{te.value=P.value[0]}),Zt(Z,ee=>{var be;ee&&((be=te.value)==null||be.focus(),j.stop())})})});function V(){if(G(D.value.value)){D.value.value="";return}if(F)return;const j=p.value.slice(),te=D.value.value;j[C.value]=te;let Z=null;C.value>p.value.length?Z=p.value.length+1:C.value+1!==x.value&&(Z="next"),p.value=j,Z&&Vp(I.value,Z)}function H(){F=!1,V()}function q(j){const te=p.value.slice(),Z=C.value;let ee=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(j.key)&&(j.preventDefault(),j.key==="ArrowLeft"?ee="prev":j.key==="ArrowRight"?ee="next":["Backspace","Delete"].includes(j.key)&&(te[C.value]="",p.value=te,C.value>0&&j.key==="Backspace"?ee="prev":requestAnimationFrame(()=>{var be;(be=P.value[Z])==null||be.select()})),requestAnimationFrame(()=>{ee!=null&&Vp(I.value,ee)}))}function K(j,te){var be;te.preventDefault(),te.stopPropagation();const Z=((be=te==null?void 0:te.clipboardData)==null?void 0:be.getData("Text").trim().slice(0,x.value))??"",ee=Z.length-1===-1?j:Z.length-1;G(Z)||(p.value=Z.split(""),C.value=ee)}function ie(){p.value=[]}function X(j,te){h(),C.value=te}function $(){s(),C.value=-1}function G(j){return e.type==="number"&&/[^0-9]/g.test(j)}return ns({VField:{color:He(()=>e.color),bgColor:He(()=>e.color),baseColor:He(()=>e.baseColor),disabled:He(()=>e.disabled),error:He(()=>e.error),variant:He(()=>e.variant)}},{scoped:!0}),Zt(p,j=>{j.length===x.value&&i("finish",j.join(""))},{deep:!0}),Zt(C,j=>{j<0||Gn(()=>{var te;(te=P.value[j])==null||te.select()})}),Ut(()=>{var Z;const[j,te]=gm(n);return B("div",Dt({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},j),[B("div",{ref:I,class:"v-otp-input__content",style:Yt([a.value])},[T.value.map((ee,be)=>B(ln,null,[e.divider&&be!==0&&B("span",{class:"v-otp-input__divider"},[e.divider]),ue(cm,{focused:l.value&&e.focusAll||C.value===be,key:be},{...r,loader:void 0,default:()=>B("input",{ref:Ie=>P.value[be]=Ie,"aria-label":v(e.label,be+1),autofocus:be===0&&e.autofocus,autocomplete:"one-time-code",class:Tt(["v-otp-input__field"]),disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:be===0?x.value:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:p.value[be],onInput:V,onFocus:Ie=>X(Ie,be),onBlur:$,onKeydown:q,onCompositionstart:()=>F=!0,onCompositionend:H,onPaste:Ie=>K(be,Ie)},null)})])),B("input",Dt({class:"v-otp-input-input",type:"hidden"},te,{value:p.value.join("")}),null),ue(fd,{contained:!0,contentClass:"v-otp-input__loader",modelValue:!!e.loading,persistent:!0},{default:()=>{var ee;return[((ee=r.loader)==null?void 0:ee.call(r))??ue(Yp,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(Z=r.default)==null?void 0:Z.call(r)])])}),{blur:()=>{var j;(j=P.value)==null||j.some(te=>te.blur())},focus:()=>{var j;(j=P.value)==null||j[0].focus()},reset:ie,isFocused:l}}});function Iye(e){return Math.floor(Math.abs(e))*Math.sign(e)}const Aye=ut({scale:{type:[Number,String],default:.5},...Tn()},"VParallax"),Pye=Lt()({name:"VParallax",props:Aye(),setup(e,t){let{slots:n}=t;const{intersectionRef:i,isIntersecting:r}=Ub(),{resizeRef:a,contentRect:l}=Nc(),{height:h}=Fl(),s=it();Wr(()=>{var C;i.value=a.value=(C=s.value)==null?void 0:C.$el});let p;Zt(r,C=>{C?(p=YT(i.value),p=p===document.scrollingElement?document:p,p.addEventListener("scroll",T,{passive:!0}),T()):p.removeEventListener("scroll",T)}),jr(()=>{p==null||p.removeEventListener("scroll",T)}),Zt(h,T),Zt(()=>{var C;return(C=l.value)==null?void 0:C.height},T);const v=me(()=>1-kr(Number(e.scale)));let x=-1;function T(){!r.value||ud()||(cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var K;const C=((K=s.value)==null?void 0:K.$el).querySelector(".v-img__img");if(!C)return;const I=p instanceof Document?document.documentElement.clientHeight:p.clientHeight,P=p instanceof Document?window.scrollY:p.scrollTop,D=i.value.getBoundingClientRect().top+P,F=l.value.height,V=D+(F-I)/2,H=Iye((P-V)*v.value),q=Math.max(1,(v.value*(I-F)+F)/F);C.style.setProperty("transform",`translateY(${H}px) scale(${q})`)}))}return Ut(()=>ue(Eh,{class:Tt(["v-parallax",{"v-parallax--active":r.value},e.class]),style:Yt(e.style),ref:s,cover:!0,onLoadstart:T,onLoad:T},n)),{}}}),Mye=ut({...nS({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),Dye=Lt()({name:"VRadio",props:Mye(),setup(e,t){let{slots:n}=t;return Ut(()=>{const i=lm.filterProps(e);return ue(lm,Dt(i,{class:["v-radio",e.class],style:e.style,type:"radio"}),n)}),{}}}),Lye=ut({height:{type:[Number,String],default:"auto"},...Vh(),...mr(NP(),["multiple"]),trueIcon:{type:Pn,default:"$radioOn"},falseIcon:{type:Pn,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Rye=Lt()({name:"VRadioGroup",inheritAttrs:!1,props:Lye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=fa(),a=me(()=>e.id||`radio-group-${r}`),l=Dn(e,"modelValue"),h=it();return Ut(()=>{const[s,p]=gm(n),v=ha.filterProps(e),x=lm.filterProps(e),T=i.label?i.label({label:e.label,props:{for:a.value}}):e.label;return ue(ha,Dt({ref:h,class:["v-radio-group",e.class],style:e.style},s,v,{modelValue:l.value,"onUpdate:modelValue":C=>l.value=C,id:a.value}),{...i,default:C=>{let{id:I,messagesId:P,isDisabled:D,isReadonly:F}=C;return B(ln,null,[T&&ue(P_,{id:I.value},{default:()=>[T]}),ue(B2,Dt(x,{id:I.value,"aria-describedby":P.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:D.value,readonly:F.value,"aria-labelledby":T?I.value:void 0,multiple:!1},p,{modelValue:l.value,"onUpdate:modelValue":V=>l.value=V}),i)])}})}),So({},h)}}),Oye=ut({...Kb(),...Vh(),...U9(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Vye=Lt()({name:"VRangeSlider",props:Oye(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=it(),a=it(),l=it(),{rtlClasses:h}=Ks();function s(te){if(!r.value||!a.value)return;const Z=II(te,r.value.$el,e.direction),ee=II(te,a.value.$el,e.direction),be=Math.abs(Z),Ie=Math.abs(ee);return be<Ie||be===Ie&&Z<0?r.value.$el:a.value.$el}const p=j9(e),v=Dn(e,"modelValue",void 0,te=>te!=null&&te.length?te.map(Z=>p.roundValue(Z)):[0,0]),{activeThumbRef:x,hasLabels:T,max:C,min:I,mousePressed:P,onSliderMousedown:D,onSliderTouchstart:F,position:V,trackContainerRef:H,disabled:q,readonly:K}=W9({props:e,steps:p,onSliderStart:()=>{var te;if(q.value||K.value){(te=x.value)==null||te.blur();return}i("start",v.value)},onSliderEnd:te=>{var ee,be;let{value:Z}=te;if(q.value||K.value)(ee=x.value)==null||ee.blur();else{const Ie=x.value===((be=r.value)==null?void 0:be.$el)?[Z,v.value[1]]:[v.value[0],Z];!e.strict&&Ie[0]<Ie[1]&&(v.value=Ie)}i("end",v.value)},onSliderMove:te=>{var Ie,Ve,Ke,Xe,Pe;let{value:Z}=te;const[ee,be]=v.value;if(q.value||K.value){(Ie=x.value)==null||Ie.blur();return}!e.strict&&ee===be&&ee!==I.value&&(x.value=Z>ee?(Ve=a.value)==null?void 0:Ve.$el:(Ke=r.value)==null?void 0:Ke.$el,(Xe=x.value)==null||Xe.focus()),x.value===((Pe=r.value)==null?void 0:Pe.$el)?v.value=[Math.min(Z,be),be]:v.value=[ee,Math.max(ee,Z)]},getActiveThumb:s}),{isFocused:ie,focus:X,blur:$}=Oh(e),G=me(()=>V(v.value[0])),j=me(()=>V(v.value[1]));return Ut(()=>{const te=ha.filterProps(e),Z=!!(e.label||n.label||n.prepend);return ue(ha,Dt({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||T.value,"v-slider--focused":ie.value,"v-slider--pressed":P.value,"v-slider--disabled":q.value},h.value,e.class],style:e.style,ref:l},te,{focused:ie.value}),{...n,prepend:Z?ee=>{var be,Ie;return B(ln,null,[((be=n.label)==null?void 0:be.call(n,ee))??(e.label?ue(P_,{class:"v-slider__label",text:e.label},null):void 0),(Ie=n.prepend)==null?void 0:Ie.call(n,ee)])}:void 0,default:ee=>{var Ve,Ke;let{id:be,messagesId:Ie}=ee;return B("div",{class:"v-slider__container",onMousedown:K.value?void 0:D,onTouchstartPassive:K.value?void 0:F},[B("input",{id:`${be.value}_start`,name:e.name||be.value,disabled:q.value,readonly:K.value,tabindex:"-1",value:v.value[0]},null),B("input",{id:`${be.value}_stop`,name:e.name||be.value,disabled:q.value,readonly:K.value,tabindex:"-1",value:v.value[1]},null),ue(H9,{ref:H,start:G.value,stop:j.value},{"tick-label":n["tick-label"]}),ue(AI,{ref:r,"aria-describedby":Ie.value,focused:ie&&x.value===((Ve=r.value)==null?void 0:Ve.$el),modelValue:v.value[0],"onUpdate:modelValue":Xe=>v.value=[Xe,v.value[1]],onFocus:Xe=>{var Pe,$e,Ee,We;X(),x.value=(Pe=r.value)==null?void 0:Pe.$el,C.value!==I.value&&v.value[0]===v.value[1]&&v.value[1]===I.value&&Xe.relatedTarget!==(($e=a.value)==null?void 0:$e.$el)&&((Ee=r.value)==null||Ee.$el.blur(),(We=a.value)==null||We.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:I.value,max:v.value[1],position:G.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]}),ue(AI,{ref:a,"aria-describedby":Ie.value,focused:ie&&x.value===((Ke=a.value)==null?void 0:Ke.$el),modelValue:v.value[1],"onUpdate:modelValue":Xe=>v.value=[v.value[0],Xe],onFocus:Xe=>{var Pe,$e,Ee,We;X(),x.value=(Pe=a.value)==null?void 0:Pe.$el,C.value!==I.value&&v.value[0]===v.value[1]&&v.value[0]===C.value&&Xe.relatedTarget!==(($e=r.value)==null?void 0:$e.$el)&&((Ee=a.value)==null||Ee.$el.blur(),(We=r.value)==null||We.$el.focus())},onBlur:()=>{$(),x.value=void 0},min:v.value[0],max:C.value,position:j.value,ripple:e.ripple},{"thumb-label":n["thumb-label"]})])}})}),So({focus:()=>{var te;return(te=r.value)==null?void 0:te.$el.focus()}},l)}}),Bye=ut({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Pn,default:"$ratingEmpty"},fullIcon:{type:Pn,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Tn(),...Es(),...gd(),...ii(),...Li()},"VRating"),Fye=Lt()({name:"VRating",props:Bye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{t:i}=pr(),{themeClasses:r}=nr(e),a=Dn(e,"modelValue"),l=me(()=>kr(parseFloat(a.value),0,Number(e.length))),h=me(()=>sc(Number(e.length),1)),s=me(()=>h.value.flatMap(D=>e.halfIncrements?[D-.5,D]:[D])),p=nn(-1),v=me(()=>s.value.map(D=>{const F=e.hover&&p.value>-1,V=l.value>=D,H=p.value>=D,K=(F?H:V)?e.fullIcon:e.emptyIcon,ie=e.activeColor??e.color,X=V||H?ie:e.color;return{isFilled:V,isHovered:H,icon:K,color:X}})),x=me(()=>[0,...s.value].map(D=>{function F(){p.value=D}function V(){p.value=-1}function H(){e.disabled||e.readonly||(a.value=l.value===D&&e.clearable?0:D)}return{onMouseenter:e.hover?F:void 0,onMouseleave:e.hover?V:void 0,onClick:H}})),T=fa(),C=me(()=>e.name??`v-rating-${T}`);function I(D){var G,j;let{value:F,index:V,showStar:H=!0}=D;const{onMouseenter:q,onMouseleave:K,onClick:ie}=x.value[V+1],X=`${C.value}-${String(F).replace(".","-")}`,$={color:(G=v.value[V])==null?void 0:G.color,density:e.density,disabled:e.disabled,icon:(j=v.value[V])==null?void 0:j.icon,ripple:e.ripple,size:e.size,variant:"plain"};return B(ln,null,[B("label",{for:X,class:Tt({"v-rating__item--half":e.halfIncrements&&F%1>0,"v-rating__item--full":e.halfIncrements&&F%1===0}),onMouseenter:q,onMouseleave:K,onClick:ie},[B("span",{class:"v-rating__hidden"},[i(e.itemAriaLabel,F,e.length)]),H?n.item?n.item({...v.value[V],props:$,value:F,index:V,rating:l.value}):ue(gi,Dt({"aria-label":i(e.itemAriaLabel,F,e.length)},$),null):void 0]),B("input",{class:"v-rating__hidden",name:C.value,id:X,type:"radio",value:F,checked:l.value===F,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function P(D){return n["item-label"]?n["item-label"](D):D.label?B("span",null,[D.label]):B("span",null,[zn("")])}return Ut(()=>{var F;const D=!!((F=e.itemLabels)!=null&&F.length)||n["item-label"];return ue(e.tag,{class:Tt(["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},r.value,e.class]),style:Yt(e.style)},{default:()=>[ue(I,{value:0,index:-1,showStar:!1},null),h.value.map((V,H)=>{var q,K;return B("div",{class:"v-rating__wrapper"},[D&&e.itemLabelPosition==="top"?P({value:V,index:H,label:(q=e.itemLabels)==null?void 0:q[H]}):void 0,B("div",{class:"v-rating__item"},[e.halfIncrements?B(ln,null,[ue(I,{value:V-.5,index:H*2},null),ue(I,{value:V,index:H*2+1},null)]):ue(I,{value:V,index:H},null)]),D&&e.itemLabelPosition==="bottom"?P({value:V,index:H,label:(K=e.itemLabels)==null?void 0:K[H]}):void 0])})]})}),{}}}),zye={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Nye(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return B("div",{class:Tt(["v-skeleton-loader__bone",`v-skeleton-loader__${e}`])},[t])}function EV(e){const[t,n]=e.split("@");return Array.from({length:n}).map(()=>CS(t))}function CS(e){let t=[];if(!e)return t;const n=zye[e];if(e!==n){if(e.includes(","))return CV(e);if(e.includes("@"))return EV(e);n.includes(",")?t=CV(n):n.includes("@")?t=EV(n):n&&t.push(CS(n))}return[Nye(e,t)]}function CV(e){return e.replace(/\s/g,"").split(",").map(CS)}const $ye=ut({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Fs(),...Xs(),...Li()},"VSkeletonLoader"),Uye=Lt()({name:"VSkeletonLoader",inheritAttrs:!1,props:$ye(),setup(e,t){let{attrs:n,slots:i}=t;const{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color),{dimensionStyles:l}=zs(e),{elevationClasses:h}=To(e),{themeClasses:s}=nr(e),{t:p}=pr(),v=me(()=>CS(Yr(e.type).join(",")));return Ut(()=>{var C;const x=!i.default||e.loading,T=e.boilerplate||!x?{}:{ariaLive:"polite",ariaLabel:p(e.loadingText),role:"alert"};return x?B("div",Dt({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,r.value,h.value],style:[a.value,l.value]},T,n),[v.value]):B(ln,null,[(C=i.default)==null?void 0:C.call(i)])}),{}}}),jye=Lt()({name:"VSlideGroupItem",props:mg(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=am(e,jP);return()=>{var r;return(r=n.default)==null?void 0:r.call(n,{isSelected:i.isSelected.value,select:i.select,toggle:i.toggle,selectedClass:i.selectedClass.value})}}}),Wye=ut({closable:[Boolean,String],closeText:{type:String,default:"$vuetify.dismiss"},modelValue:{type:Array,default:()=>[]},...mr(W8(),["modelValue"])},"VSnackbarQueue"),Hye=Lt()({name:"VSnackbarQueue",props:Wye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=pr(),a=nn(!1),l=nn(!1),h=nn();Zt(()=>e.modelValue.length,(T,C)=>{!l.value&&T>C&&p()}),Zt(a,T=>{T&&(l.value=!0)});function s(){e.modelValue.length?p():(h.value=void 0,l.value=!1)}function p(){const[T,...C]=e.modelValue;n("update:modelValue",C),h.value=typeof T=="string"?{text:T}:T,Gn(()=>{a.value=!0})}function v(){a.value=!1}const x=me(()=>({color:typeof e.closable=="string"?e.closable:void 0,text:r(e.closeText)}));Ut(()=>{const T=!!(e.closable||i.actions),{modelValue:C,...I}=Qw.filterProps(e);return B(ln,null,[l.value&&!!h.value&&(i.default?ue(di,{defaults:{VSnackbar:h.value}},{default:()=>[i.default({item:h.value})]}):ue(Qw,Dt(I,h.value,{modelValue:a.value,"onUpdate:modelValue":P=>a.value=P,onAfterLeave:s}),{text:i.text?()=>{var P;return(P=i.text)==null?void 0:P.call(i,{item:h.value})}:void 0,actions:T?()=>B(ln,null,[i.actions?ue(di,{defaults:{VBtn:x.value}},{default:()=>[i.actions({item:h.value,props:{onClick:v}})]}):ue(gi,Dt(x.value,{onClick:v}),null)]):void 0}))])})}}),z7=ut({autoDraw:Boolean,autoDrawDuration:[Number,String],autoDrawEasing:{type:String,default:"ease"},color:String,gradient:{type:Array,default:()=>[]},gradientDirection:{type:String,validator:e=>["top","bottom","left","right"].includes(e),default:"top"},height:{type:[String,Number],default:75},labels:{type:Array,default:()=>[]},labelSize:{type:[Number,String],default:7},lineWidth:{type:[String,Number],default:4},id:String,itemValue:{type:String,default:"value"},modelValue:{type:Array,default:()=>[]},min:[String,Number],max:[String,Number],padding:{type:[String,Number],default:8},showLabels:Boolean,smooth:[Boolean,String,Number],width:{type:[Number,String],default:300}},"Line"),N7=ut({autoLineWidth:Boolean,...z7()},"VBarline"),kV=Lt()({name:"VBarline",props:N7(),setup(e,t){let{slots:n}=t;const i=fa(),r=me(()=>e.id||`barline-${i}`),a=me(()=>Number(e.autoDrawDuration)||500),l=me(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),h=me(()=>parseFloat(e.lineWidth)||4),s=me(()=>Math.max(e.modelValue.length*h.value,Number(e.width))),p=me(()=>({minX:0,maxX:s.value,minY:0,maxY:parseInt(e.height,10)})),v=me(()=>e.modelValue.map(D=>Rs(D,e.itemValue,D)));function x(D,F){const{minX:V,maxX:H,minY:q,maxY:K}=F,ie=D.length;let X=e.max!=null?Number(e.max):Math.max(...D),$=e.min!=null?Number(e.min):Math.min(...D);$>0&&e.min==null&&($=0),X<0&&e.max==null&&(X=0);const G=H/(ie===1?2:ie),j=(K-q)/(X-$||1),te=K-Math.abs($*j);return D.map((Z,ee)=>{const be=Math.abs(j*Z);return{x:V+ee*G,y:te-be+ +(Z<0)*be,height:be,value:Z}})}const T=me(()=>{const D=[],F=x(v.value,p.value),V=F.length;for(let H=0;D.length<V;H++){const q=F[H];let K=e.labels[H];K||(K=typeof q=="object"?q.value:q),D.push({x:q.x,value:String(K)})}return D}),C=me(()=>x(v.value,p.value)),I=me(()=>C.value.length===1?(p.value.maxX-h.value)/2:(Math.abs(C.value[0].x-C.value[1].x)-h.value)/2),P=me(()=>typeof e.smooth=="boolean"?e.smooth?2:0:Number(e.smooth));Ut(()=>{const D=e.gradient.slice().length?e.gradient.slice().reverse():[""];return B("svg",{display:"block"},[B("defs",null,[B("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[D.map((F,V)=>B("stop",{offset:V/Math.max(D.length-1,1),"stop-color":F||"currentColor"},null))])]),B("clipPath",{id:`${r.value}-clip`},[C.value.map(F=>B("rect",{x:F.x+I.value,y:F.y,width:h.value,height:F.height,rx:P.value,ry:P.value},[e.autoDraw&&!ud()&&B(ln,null,[B("animate",{attributeName:"y",from:F.y+F.height,to:F.y,dur:`${a.value}ms`,fill:"freeze"},null),B("animate",{attributeName:"height",from:"0",to:F.height,dur:`${a.value}ms`,fill:"freeze"},null)])]))]),l.value&&B("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[T.value.map((F,V)=>{var H;return B("text",{x:F.x+I.value+h.value/2,y:parseInt(e.height,10)-2+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((H=n.label)==null?void 0:H.call(n,{index:V,value:F.value}))??F.value])})]),B("g",{"clip-path":`url(#${r.value}-clip)`,fill:`url(#${r.value})`},[B("rect",{x:0,y:0,width:Math.max(e.modelValue.length*h.value,Number(e.width)),height:e.height},null)])])})}});function Gye(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:75;if(e.length===0)return"";const r=e.shift(),a=e[e.length-1];return(n?`M${r.x} ${i-r.x+2} L${r.x} ${r.y}`:`M${r.x} ${r.y}`)+e.map((l,h)=>{const s=e[h+1],p=e[h-1]||r,v=s&&qye(s,l,p);if(!s||v)return`L${l.x} ${l.y}`;const x=Math.min(IV(p,l),IV(s,l)),C=x/2<t?x/2:t,I=AV(p,l,C),P=AV(s,l,C);return`L${I.x} ${I.y}S${l.x} ${l.y} ${P.x} ${P.y}`}).join("")+(n?`L${a.x} ${i-r.x+2} Z`:"")}function _1(e){return parseInt(e,10)}function qye(e,t,n){return _1(e.x+n.x)===_1(2*t.x)&&_1(e.y+n.y)===_1(2*t.y)}function IV(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function AV(e,t,n){const i={x:e.x-t.x,y:e.y-t.y},r=Math.sqrt(i.x*i.x+i.y*i.y),a={x:i.x/r,y:i.y/r};return{x:t.x+a.x*n,y:t.y+a.y*n}}const $7=ut({fill:Boolean,...z7()},"VTrendline"),PV=Lt()({name:"VTrendline",props:$7(),setup(e,t){let{slots:n}=t;const i=fa(),r=me(()=>e.id||`trendline-${i}`),a=me(()=>Number(e.autoDrawDuration)||(e.fill?500:2e3)),l=it(0),h=it(null);function s(D,F){const{minX:V,maxX:H,minY:q,maxY:K}=F;D.length===1&&(D=[D[0],D[0]]);const ie=D.length,X=e.max!=null?Number(e.max):Math.max(...D),$=e.min!=null?Number(e.min):Math.min(...D),G=(H-V)/(ie-1),j=(K-q)/(X-$||1);return D.map((te,Z)=>({x:V+Z*G,y:K-(te-$)*j,value:te}))}const p=me(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),v=me(()=>parseFloat(e.lineWidth)||4),x=me(()=>Number(e.width)),T=me(()=>{const D=Number(e.padding);return{minX:D,maxX:x.value-D,minY:D,maxY:parseInt(e.height,10)-D}}),C=me(()=>e.modelValue.map(D=>Rs(D,e.itemValue,D))),I=me(()=>{const D=[],F=s(C.value,T.value),V=F.length;for(let H=0;D.length<V;H++){const q=F[H];let K=e.labels[H];K||(K=typeof q=="object"?q.value:q),D.push({x:q.x,value:String(K)})}return D});Zt(()=>e.modelValue,async()=>{if(await Gn(),!e.autoDraw||!h.value||ud())return;const D=h.value,F=D.getTotalLength();e.fill?(D.style.transformOrigin="bottom center",D.style.transition="none",D.style.transform="scaleY(0)",D.getBoundingClientRect(),D.style.transition=`transform ${a.value}ms ${e.autoDrawEasing}`,D.style.transform="scaleY(1)"):(D.style.strokeDasharray=`${F}`,D.style.strokeDashoffset=`${F}`,D.getBoundingClientRect(),D.style.transition=`stroke-dashoffset ${a.value}ms ${e.autoDrawEasing}`,D.style.strokeDashoffset="0"),l.value=F},{immediate:!0});function P(D){const F=typeof e.smooth=="boolean"?e.smooth?8:0:Number(e.smooth);return Gye(s(C.value,T.value),F,D,parseInt(e.height,10))}Ut(()=>{var F;const D=e.gradient.slice().length?e.gradient.slice().reverse():[""];return B("svg",{display:"block","stroke-width":parseFloat(e.lineWidth)??4},[B("defs",null,[B("linearGradient",{id:r.value,gradientUnits:"userSpaceOnUse",x1:e.gradientDirection==="left"?"100%":"0",y1:e.gradientDirection==="top"?"100%":"0",x2:e.gradientDirection==="right"?"100%":"0",y2:e.gradientDirection==="bottom"?"100%":"0"},[D.map((V,H)=>B("stop",{offset:H/Math.max(D.length-1,1),"stop-color":V||"currentColor"},null))])]),p.value&&B("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[I.value.map((V,H)=>{var q;return B("text",{x:V.x+v.value/2+v.value/2,y:parseInt(e.height,10)-4+(parseInt(e.labelSize,10)||7*.75),"font-size":Number(e.labelSize)||7},[((q=n.label)==null?void 0:q.call(n,{index:H,value:V.value}))??V.value])})]),B("path",{ref:h,d:P(e.fill),fill:e.fill?`url(#${r.value})`:"none",stroke:e.fill?"none":`url(#${r.value})`},null),e.fill&&B("path",{d:P(!1),fill:"none",stroke:e.color??((F=e.gradient)==null?void 0:F[0])},null)])})}}),Kye=ut({type:{type:String,default:"trend"},...N7(),...$7()},"VSparkline"),Xye=Lt()({name:"VSparkline",props:Kye(),setup(e,t){let{slots:n}=t;const{textColorClasses:i,textColorStyles:r}=jo(()=>e.color),a=me(()=>!!(e.showLabels||e.labels.length>0||n!=null&&n.label)),l=me(()=>{let h=parseInt(e.height,10);return a.value&&(h+=parseInt(e.labelSize,10)*1.5),h});Ut(()=>{const h=e.type==="trend"?PV:kV,s=e.type==="trend"?PV.filterProps(e):kV.filterProps(e);return ue(h,Dt({key:e.type,class:i.value,style:r.value,viewBox:`0 0 ${e.width} ${parseInt(l.value,10)}`},s),n)})}}),Yye=ut({...Tn(),...y8({offset:8,minWidth:0,openDelay:0,closeDelay:100,location:"top center",transition:"scale-transition"})},"VSpeedDial"),Zye=Lt()({name:"VSpeedDial",props:Yye(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),r=it(),a=me(()=>{var p;const[h,s="center"]=((p=e.location)==null?void 0:p.split(" "))??[];return`${h} ${s}`}),l=me(()=>({[`v-speed-dial__content--${a.value.replace(" ","-")}`]:!0}));return Ut(()=>{const h=h_.filterProps(e);return ue(h_,Dt(h,{modelValue:i.value,"onUpdate:modelValue":s=>i.value=s,class:e.class,style:e.style,contentClass:["v-speed-dial__content",l.value,e.contentClass],location:a.value,ref:r,transition:"fade-transition"}),{...n,default:s=>ue(di,{defaults:{VBtn:{size:"small"}}},{default:()=>[ue($a,{appear:!0,group:!0,transition:e.transition},{default:()=>{var p;return[(p=n.default)==null?void 0:p.call(n,s)]}})]})})}),{}}}),VM=Symbol.for("vuetify:v-stepper"),U7=ut({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),j7=Lt()({name:"VStepperActions",props:U7(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=pr();function a(){n("click:prev")}function l(){n("click:next")}return Ut(()=>{const h={onClick:a},s={onClick:l};return B("div",{class:"v-stepper-actions"},[ue(di,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:r(e.prevText),variant:"text"}}},{default:()=>{var p;return[((p=i.prev)==null?void 0:p.call(i,{props:h}))??ue(gi,h,null)]}}),ue(di,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:r(e.nextText),variant:"tonal"}}},{default:()=>{var p;return[((p=i.next)==null?void 0:p.call(i,{props:s}))??ue(gi,s,null)]}})])}),{}}}),W7=Dh("v-stepper-header"),Jye=ut({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:Pn,default:"$complete"},editable:Boolean,editIcon:{type:Pn,default:"$edit"},error:Boolean,errorIcon:{type:Pn,default:"$error"},icon:Pn,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),Qye=ut({...Jye(),...mg()},"VStepperItem"),H7=Lt()({name:"VStepperItem",directives:{vRipple:Ga},props:Qye(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const i=am(e,VM,!0),r=me(()=>(i==null?void 0:i.value.value)??e.value),a=me(()=>e.rules.every(T=>T()===!0)),l=me(()=>!e.disabled&&e.editable),h=me(()=>!e.disabled&&e.editable),s=me(()=>e.error||!a.value),p=me(()=>e.complete||e.rules.length>0&&a.value),v=me(()=>s.value?e.errorIcon:p.value?e.completeIcon:i.isSelected.value&&e.editable?e.editIcon:e.icon),x=me(()=>({canEdit:h.value,hasError:s.value,hasCompleted:p.value,title:e.title,subtitle:e.subtitle,step:r.value,value:e.value}));return Ut(()=>{var D,F,V;const T=(!i||i.isSelected.value||p.value||h.value)&&!s.value&&!e.disabled,C=!!(e.title!=null||n.title),I=!!(e.subtitle!=null||n.subtitle);function P(){i==null||i.toggle()}return Oi(B("button",{class:Tt(["v-stepper-item",{"v-stepper-item--complete":p.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":s.value},i==null?void 0:i.selectedClass.value]),disabled:!e.editable,type:"button",onClick:P},[l.value&&vm(!0,"v-stepper-item"),ue(dc,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:T?e.color:void 0,size:24},{default:()=>{var H;return[((H=n.icon)==null?void 0:H.call(n,x.value))??(v.value?ue(Di,{icon:v.value},null):r.value)]}}),B("div",{class:"v-stepper-item__content"},[C&&B("div",{key:"title",class:"v-stepper-item__title"},[((D=n.title)==null?void 0:D.call(n,x.value))??e.title]),I&&B("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((F=n.subtitle)==null?void 0:F.call(n,x.value))??e.subtitle]),(V=n.default)==null?void 0:V.call(n,x.value)])]),[[Ga,e.editable&&e.ripple,null]])}),{}}}),e0e=ut({...mr(mS(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),G7=Lt()({name:"VStepperWindow",props:e0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=ki(VM,null),r=Dn(e,"modelValue"),a=me({get(){var l;return r.value!=null||!i?r.value:(l=i.items.value.find(h=>i.selected.value.includes(h.id)))==null?void 0:l.value},set(l){r.value=l}});return Ut(()=>{const l=Qp.filterProps(e);return ue(Qp,Dt({_as:"VStepperWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),t0e=ut({...pS()},"VStepperWindowItem"),q7=Lt()({name:"VStepperWindowItem",props:t0e(),setup(e,t){let{slots:n}=t;return Ut(()=>{const i=eg.filterProps(e);return ue(eg,Dt({_as:"VStepperWindowItem"},i,{class:["v-stepper-window-item",e.class],style:e.style}),n)}),{}}}),n0e=ut({altLabels:Boolean,bgColor:String,completeIcon:Pn,editIcon:Pn,editable:Boolean,errorIcon:Pn,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...cg()},"Stepper"),i0e=ut({...n0e(),...fg({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...sM(),...Bl(U7(),["prevText","nextText"])},"VStepper"),r0e=Lt()({name:"VStepper",props:i0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{items:i,next:r,prev:a,selected:l}=_m(e,VM),{displayClasses:h,mobile:s}=Fl(e),{completeIcon:p,editIcon:v,errorIcon:x,color:T,editable:C,prevText:I,nextText:P}=__(e),D=me(()=>e.items.map((H,q)=>{const K=Rs(H,e.itemTitle,H),ie=Rs(H,e.itemValue,q+1);return{title:K,value:ie,raw:H}})),F=me(()=>i.value.findIndex(H=>l.value.includes(H.id))),V=me(()=>e.disabled?e.disabled:F.value===0?"prev":F.value===i.value.length-1?"next":!1);return ns({VStepperItem:{editable:C,errorIcon:x,completeIcon:p,editIcon:v,prevText:I,nextText:P},VStepperActions:{color:T,disabled:V,prevText:I,nextText:P}}),Ut(()=>{const H=rd.filterProps(e),q=!!(n.header||e.items.length),K=e.items.length>0,ie=!e.hideActions&&!!(K||n.actions);return ue(rd,Dt(H,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":s.value},h.value,e.class],style:e.style}),{default:()=>{var X,$;return[q&&ue(W7,{key:"stepper-header"},{default:()=>[D.value.map((G,j)=>{let{raw:te,...Z}=G;return B(ln,null,[!!j&&ue(ac,null,null),ue(H7,Z,{default:n[`header-item.${Z.value}`]??n.header,icon:n.icon,title:n.title,subtitle:n.subtitle})])})]}),K&&ue(G7,{key:"stepper-window"},{default:()=>[D.value.map(G=>ue(q7,{value:G.value},{default:()=>{var j,te;return((j=n[`item.${G.value}`])==null?void 0:j.call(n,G))??((te=n.item)==null?void 0:te.call(n,G))}}))]}),(X=n.default)==null?void 0:X.call(n,{prev:a,next:r}),ie&&((($=n.actions)==null?void 0:$.call(n,{next:r,prev:a}))??ue(j7,{key:"stepper-actions","onClick:prev":a,"onClick:next":r},n))]}})}),{prev:a,next:r}}}),s0e=ut({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Vh(),...nS()},"VSwitch"),o0e=Lt()({name:"VSwitch",inheritAttrs:!1,props:s0e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Dn(e,"indeterminate"),a=Dn(e,"modelValue"),{loaderClasses:l}=Wb(e),{isFocused:h,focus:s,blur:p}=Oh(e),v=it(),x=it(),T=TP&&window.matchMedia("(forced-colors: active)").matches,C=He(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),I=fa(),P=He(()=>e.id||`switch-${I}`);function D(){r.value&&(r.value=!1)}function F(V){var H,q;V.stopPropagation(),V.preventDefault(),(q=(H=v.value)==null?void 0:H.input)==null||q.click()}return Ut(()=>{const[V,H]=gm(n),q=ha.filterProps(e),K=lm.filterProps(e);return ue(ha,Dt({ref:x,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":r.value},l.value,e.class]},V,q,{modelValue:a.value,"onUpdate:modelValue":ie=>a.value=ie,id:P.value,focused:h.value,style:e.style}),{...i,default:ie=>{let{id:X,messagesId:$,isDisabled:G,isReadonly:j,isValid:te}=ie;const Z={model:a,isValid:te};return ue(lm,Dt({ref:v},K,{modelValue:a.value,"onUpdate:modelValue":[ee=>a.value=ee,D],id:X.value,"aria-describedby":$.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:G.value,readonly:j.value,onFocus:s,onBlur:p},H),{...i,default:ee=>{let{backgroundColorClasses:be,backgroundColorStyles:Ie}=ee;return B("div",{class:Tt(["v-switch__track",T?void 0:be.value]),style:Yt(Ie.value),onClick:F},[i["track-true"]&&B("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](Z)]),i["track-false"]&&B("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](Z)])])},input:ee=>{let{inputNode:be,icon:Ie,backgroundColorClasses:Ve,backgroundColorStyles:Ke}=ee;return B(ln,null,[be,B("div",{class:Tt(["v-switch__thumb",{"v-switch__thumb--filled":Ie||e.loading},e.inset||T?void 0:Ve.value]),style:Yt(e.inset?void 0:Ke.value)},[i.thumb?ue(di,{defaults:{VIcon:{icon:Ie,size:"x-small"}}},{default:()=>[i.thumb({...Z,icon:Ie})]}):ue($P,null,{default:()=>[e.loading?ue(Hb,{name:"v-switch",active:!0,color:te.value===!1?void 0:C.value},{default:Xe=>i.loader?i.loader(Xe):ue(Yp,{active:Xe.isActive,color:Xe.color,indeterminate:!0,size:"16",width:"2"},null)}):Ie&&ue(Di,{key:String(Ie),icon:Ie,size:"x-small"},null)]})])])}})}})}),So({},x)}}),a0e=ut({color:String,height:[Number,String],window:Boolean,...Tn(),...Xs(),...ug(),...Hr(),...ii(),...Li()},"VSystemBar"),l0e=Lt()({name:"VSystemBar",props:a0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{backgroundColorClasses:r,backgroundColorStyles:a}=or(()=>e.color),{elevationClasses:l}=To(e),{roundedClasses:h}=is(e),{ssrBootStyles:s}=gg(),p=me(()=>e.height??(e.window?32:24)),{layoutItemStyles:v}=dg({id:e.name,order:me(()=>parseInt(e.order,10)),position:nn("top"),layoutSize:p,elementSize:p,active:me(()=>!0),absolute:He(()=>e.absolute)});return Ut(()=>ue(e.tag,{class:Tt(["v-system-bar",{"v-system-bar--window":e.window},i.value,r.value,l.value,h.value,e.class]),style:Yt([a.value,v.value,s.value,e.style])},n)),{}}}),BM=Symbol.for("vuetify:v-tabs"),K7=ut({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...mr(tS({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),X7=Lt()({name:"VTab",props:K7(),setup(e,t){let{slots:n,attrs:i}=t;const{textColorClasses:r,textColorStyles:a}=jo(()=>e.sliderColor),l=it(),h=it(),s=me(()=>e.direction==="horizontal"),p=me(()=>{var x,T;return((T=(x=l.value)==null?void 0:x.group)==null?void 0:T.isSelected.value)??!1});function v(x){var C,I;let{value:T}=x;if(T){const P=(I=(C=l.value)==null?void 0:C.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),D=h.value;if(!P||!D)return;const F=getComputedStyle(P).color,V=P.getBoundingClientRect(),H=D.getBoundingClientRect(),q=s.value?"x":"y",K=s.value?"X":"Y",ie=s.value?"right":"bottom",X=s.value?"width":"height",$=V[q],G=H[q],j=$>G?V[ie]-H[ie]:V[q]-H[q],te=Math.sign(j)>0?s.value?"right":"bottom":Math.sign(j)<0?s.value?"left":"top":"center",ee=(Math.abs(j)+(Math.sign(j)<0?V[X]:H[X]))/Math.max(V[X],H[X])||0,be=V[X]/H[X]||0,Ie=1.5;sh(D,{backgroundColor:[F,"currentcolor"],transform:[`translate${K}(${j}px) scale${K}(${be})`,`translate${K}(${j/Ie}px) scale${K}(${(ee-1)/Ie+1})`,"none"],transformOrigin:Array(3).fill(te)},{duration:225,easing:X0})}}return Ut(()=>{const x=gi.filterProps(e);return ue(gi,Dt({symbol:BM,ref:l,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},x,i,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":v}),{...n,default:()=>{var T;return B(ln,null,[((T=n.default)==null?void 0:T.call(n))??e.text,!e.hideSlider&&B("div",{ref:h,class:Tt(["v-tab__slider",r.value]),style:Yt(a.value)},null)])}})}),So({},l)}}),c0e=ut({...mr(mS(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Y7=Lt()({name:"VTabsWindow",props:c0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=ki(BM,null),r=Dn(e,"modelValue"),a=me({get(){var l;return r.value!=null||!i?r.value:(l=i.items.value.find(h=>i.selected.value.includes(h.id)))==null?void 0:l.value},set(l){r.value=l}});return Ut(()=>{const l=Qp.filterProps(e);return ue(Qp,Dt({_as:"VTabsWindow"},l,{modelValue:a.value,"onUpdate:modelValue":h=>a.value=h,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),u0e=ut({...pS()},"VTabsWindowItem"),Z7=Lt()({name:"VTabsWindowItem",props:u0e(),setup(e,t){let{slots:n}=t;return Ut(()=>{const i=eg.filterProps(e);return ue(eg,Dt({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function d0e(e){return e?e.map(t=>K0(t)?t:{text:t,value:t}):[]}const h0e=ut({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Bl(K7(),["spaced"]),...WP({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Es(),...ii()},"VTabs"),f0e=Lt()({name:"VTabs",props:h0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:i}=t;const r=Dn(e,"modelValue"),a=me(()=>d0e(e.items)),{densityClasses:l}=Ka(e),{backgroundColorClasses:h,backgroundColorStyles:s}=or(()=>e.bgColor),{scopeId:p}=vg();return ns({VTab:{color:He(()=>e.color),direction:He(()=>e.direction),stacked:He(()=>e.stacked),fixed:He(()=>e.fixedTabs),sliderColor:He(()=>e.sliderColor),hideSlider:He(()=>e.hideSlider)}}),Ut(()=>{const v=sb.filterProps(e),x=!!(i.window||e.items.length>0);return B(ln,null,[ue(sb,Dt(v,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},l.value,h.value,e.class],style:[{"--v-tabs-height":vn(e.height)},s.value,e.style],role:"tablist",symbol:BM},p,n),{default:()=>{var T;return[((T=i.default)==null?void 0:T.call(i))??a.value.map(C=>{var I;return((I=i.tab)==null?void 0:I.call(i,{item:C}))??ue(X7,Dt(C,{key:C.text,value:C.value,spaced:e.spaced}),{default:i[`tab.${C.value}`]?()=>{var P;return(P=i[`tab.${C.value}`])==null?void 0:P.call(i,{item:C})}:void 0})})]}}),x&&ue(Y7,Dt({modelValue:r.value,"onUpdate:modelValue":T=>r.value=T,key:"tabs-window"},p),{default:()=>{var T;return[a.value.map(C=>{var I;return((I=i.item)==null?void 0:I.call(i,{item:C}))??ue(Z7,{value:C.value},{default:()=>{var P;return(P=i[`item.${C.value}`])==null?void 0:P.call(i,{item:C})}})}),(T=i.window)==null?void 0:T.call(i)]}})])}),{}}}),m0e=ut({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...b8(),...Vh(),...Yb()},"VTextarea"),p0e=Lt()({name:"VTextarea",directives:{vIntersect:_u},inheritAttrs:!1,props:m0e(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(e,t){let{attrs:n,emit:i,slots:r}=t;const a=Dn(e,"modelValue"),{isFocused:l,focus:h,blur:s}=Oh(e),{onIntersect:p}=w8(e),v=me(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),x=me(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),T=it(),C=it(),I=nn(""),P=it(),D=it(0),{platform:F}=Fl(),V=x8(e),H=me(()=>e.persistentPlaceholder||l.value||e.active);function q(){var be;V.isSuppressing.value&&V.update(),P.value!==document.activeElement&&((be=P.value)==null||be.focus()),l.value||h()}function K(be){q(),i("click:control",be)}function ie(be){i("mousedown:control",be)}function X(be){be.stopPropagation(),q(),Gn(()=>{a.value="",Fb(e["onClick:clear"],be)})}function $(be){var Ve;const Ie=be.target;if(a.value=Ie.value,(Ve=e.modelModifiers)!=null&&Ve.trim){const Ke=[Ie.selectionStart,Ie.selectionEnd];Gn(()=>{Ie.selectionStart=Ke[0],Ie.selectionEnd=Ke[1]})}}const G=it(),j=it(Number(e.rows)),te=me(()=>["plain","underlined"].includes(e.variant));Wr(()=>{e.autoGrow||(j.value=Number(e.rows))});function Z(){Gn(()=>{if(!P.value)return;if(F.value.firefox){D.value=12;return}const{offsetWidth:be,clientWidth:Ie}=P.value;D.value=Math.max(0,be-Ie)}),e.autoGrow&&Gn(()=>{if(!G.value||!C.value)return;const be=getComputedStyle(G.value),Ie=getComputedStyle(C.value.$el),Ve=parseFloat(be.getPropertyValue("--v-field-padding-top"))+parseFloat(be.getPropertyValue("--v-input-padding-top"))+parseFloat(be.getPropertyValue("--v-field-padding-bottom")),Ke=G.value.scrollHeight,Xe=parseFloat(be.lineHeight),Pe=Math.max(parseFloat(e.rows)*Xe+Ve,parseFloat(Ie.getPropertyValue("--v-input-control-height"))),$e=parseFloat(e.maxRows)*Xe+Ve||1/0,Ee=kr(Ke??0,Pe,$e);j.value=Math.floor((Ee-Ve)/Xe),I.value=vn(Ee)})}Dr(Z),Zt(a,Z),Zt(()=>e.rows,Z),Zt(()=>e.maxRows,Z),Zt(()=>e.density,Z),Zt(j,be=>{i("update:rows",be)});let ee;return Zt(G,be=>{be?(ee=new ResizeObserver(Z),ee.observe(G.value)):ee==null||ee.disconnect()}),jr(()=>{ee==null||ee.disconnect()}),Ut(()=>{const be=!!(r.counter||e.counter||e.counterValue),Ie=!!(be||r.details),[Ve,Ke]=gm(n),{modelValue:Xe,...Pe}=ha.filterProps(e),$e={...cm.filterProps(e),"onClick:clear":X};return ue(ha,Dt({ref:T,modelValue:a.value,"onUpdate:modelValue":Ee=>a.value=Ee,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":te.value},e.class],style:[{"--v-textarea-scroll-bar-width":vn(D.value)},e.style]},Ve,Pe,{centerAffix:j.value===1&&!te.value,focused:l.value}),{...r,default:Ee=>{let{id:We,isDisabled:Ze,isDirty:ct,isReadonly:kt,isValid:Nt,hasDetails:ot}=Ee;return ue(cm,Dt({ref:C,style:{"--v-textarea-control-height":I.value},onClick:K,onMousedown:ie,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},$e,{id:We.value,active:H.value||ct.value,centerAffix:j.value===1&&!te.value,dirty:ct.value||e.dirty,disabled:Ze.value,focused:l.value,details:ot.value,error:Nt.value===!1}),{...r,default:dt=>{let{props:{class:Je,...yt},controlRef:Ne}=dt;return B(ln,null,[e.prefix&&B("span",{class:"v-text-field__prefix"},[e.prefix]),Oi(B("textarea",Dt({ref:le=>P.value=Ne.value=le,class:Je,value:a.value,onInput:$,autofocus:e.autofocus,readonly:kt.value,disabled:Ze.value,placeholder:e.placeholder,rows:e.rows,name:V.fieldName.value,autocomplete:V.fieldAutocomplete.value,onFocus:q,onBlur:s},yt,Ke),null),[[_u,{handler:p},null,{once:!0}]]),e.autoGrow&&Oi(B("textarea",{class:Tt([Je,"v-textarea__sizer"]),id:`${yt.id}-sizer`,"onUpdate:modelValue":le=>a.value=le,ref:G,readonly:!0,"aria-hidden":"true"},null),[[wf,a.value]]),e.suffix&&B("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:Ie?Ee=>{var We;return B(ln,null,[(We=r.details)==null?void 0:We.call(r,Ee),be&&B(ln,null,[B("span",null,null),ue(sS,{active:e.persistentCounter||l.value,value:v.value,max:x.value,disabled:e.disabled},r.counter)])])}:void 0})}),So({},T,C,P)}}),g0e=ut({withBackground:Boolean,...Tn(),...Li(),...ii()},"VThemeProvider"),v0e=Lt()({name:"VThemeProvider",props:g0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e);return()=>{var r;return e.withBackground?ue(e.tag,{class:Tt(["v-theme-provider",i.value,e.class]),style:Yt(e.style)},{default:()=>{var a;return[(a=n.default)==null?void 0:a.call(n)]}}):(r=n.default)==null?void 0:r.call(n)}}}),_0e=ut({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Pn,iconColor:String,lineColor:String,...Tn(),...Hr(),...gd(),...Xs()},"VTimelineDivider"),y0e=Lt()({name:"VTimelineDivider",props:_0e(),setup(e,t){let{slots:n}=t;const{sizeClasses:i,sizeStyles:r}=k_(e,"v-timeline-divider__dot"),{backgroundColorStyles:a,backgroundColorClasses:l}=or(()=>e.dotColor),{roundedClasses:h}=is(e,"v-timeline-divider__dot"),{elevationClasses:s}=To(e),{backgroundColorClasses:p,backgroundColorStyles:v}=or(()=>e.lineColor);return Ut(()=>B("div",{class:Tt(["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class]),style:Yt(e.style)},[B("div",{class:Tt(["v-timeline-divider__before",p.value]),style:Yt(v.value)},null),!e.hideDot&&B("div",{key:"dot",class:Tt(["v-timeline-divider__dot",s.value,h.value,i.value]),style:Yt(r.value)},[B("div",{class:Tt(["v-timeline-divider__inner-dot",l.value,h.value]),style:Yt(a.value)},[n.default?ue(di,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},n.default):ue(Di,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),B("div",{class:Tt(["v-timeline-divider__after",p.value]),style:Yt(v.value)},null)])),{}}}),J7=ut({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Pn,iconColor:String,lineInset:[Number,String],side:{type:String,validator:e=>e==null||["start","end"].includes(e)},...Tn(),...Fs(),...Xs(),...Hr(),...gd(),...ii()},"VTimelineItem"),b0e=Lt()({name:"VTimelineItem",props:J7(),setup(e,t){let{slots:n}=t;const{dimensionStyles:i}=zs(e),r=nn(0),a=it();return Zt(a,l=>{var h;l&&(r.value=((h=l.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:h.getBoundingClientRect().width)??0)},{flush:"post"}),Ut(()=>{var l,h;return B("div",{class:Tt(["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot,"v-timeline-item--side-start":e.side==="start","v-timeline-item--side-end":e.side==="end"},e.class]),style:Yt([{"--v-timeline-dot-size":vn(r.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${vn(e.lineInset)})`:vn(0)},e.style])},[B("div",{class:"v-timeline-item__body",style:Yt(i.value)},[(l=n.default)==null?void 0:l.call(n)]),ue(y0e,{ref:a,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:n.icon}),e.density!=="compact"&&B("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((h=n.opposite)==null?void 0:h.call(n))])])}),{}}}),x0e=ut({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...Bl(J7({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Tn(),...Es(),...ii(),...Li()},"VTimeline"),w0e=Lt()({name:"VTimeline",props:x0e(),setup(e,t){let{slots:n}=t;const{themeClasses:i}=nr(e),{densityClasses:r}=Ka(e),{rtlClasses:a}=Ks();ns({VTimelineDivider:{lineColor:He(()=>e.lineColor)},VTimelineItem:{density:He(()=>e.density),dotColor:He(()=>e.dotColor),fillDot:He(()=>e.fillDot),hideOpposite:He(()=>e.hideOpposite),iconColor:He(()=>e.iconColor),lineColor:He(()=>e.lineColor),lineInset:He(()=>e.lineInset),size:He(()=>e.size)}});const l=me(()=>{const s=e.side?e.side:e.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),h=me(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return Ut(()=>ue(e.tag,{class:Tt(["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,h.value,{"v-timeline--inset-line":!!e.lineInset},i.value,r.value,l.value,a.value,e.class]),style:Yt([{"--v-timeline-line-thickness":vn(e.lineThickness)},e.style])},n)),{}}});function Sp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(t,"0")}const T0e=ut({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:e=>e},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),jI=Lt()({name:"VTimePickerClock",props:T0e(),emits:{change:e=>!0,input:e=>!0},setup(e,t){let{emit:n}=t;const i=it(null),r=it(null),a=it(void 0),l=it(!1),h=it(null),s=it(null),p=zN(Pe=>n("change",Pe),750),{textColorClasses:v,textColorStyles:x}=jo(()=>e.color),{backgroundColorClasses:T,backgroundColorStyles:C}=or(()=>e.color),I=me(()=>e.max-e.min+1),P=me(()=>e.double?I.value/2:I.value),D=me(()=>360/P.value),F=me(()=>D.value*Math.PI/180),V=me(()=>e.modelValue==null?e.min:e.modelValue),H=me(()=>.62),q=me(()=>{const Pe=[];for(let $e=e.min;$e<=e.max;$e=$e+e.step)Pe.push($e);return Pe});Zt(()=>e.modelValue,Pe=>{a.value=Pe});function K(Pe){a.value!==Pe&&(a.value=Pe),n("input",Pe)}function ie(Pe){return!e.allowedValues||e.allowedValues(Pe)}function X(Pe){if(!e.scrollable||e.disabled)return;Pe.preventDefault();const $e=Math.sign(-Pe.deltaY||1);let Ee=V.value;do Ee=Ee+$e,Ee=(Ee-e.min+I.value)%I.value+e.min;while(!ie(Ee)&&Ee!==V.value);Ee!==e.displayedValue&&K(Ee),p(Ee)}function $(Pe){return e.double&&Pe-e.min>=P.value}function G(Pe){return $(Pe)?H.value:1}function j(Pe){const $e=e.rotate*Math.PI/180;return{x:Math.sin((Pe-e.min)*F.value+$e)*G(Pe),y:-Math.cos((Pe-e.min)*F.value+$e)*G(Pe)}}function te(Pe,$e){const Ee=(Math.round(Pe/D.value)+($e?P.value:0))%I.value+e.min;return Pe<360-D.value/2?Ee:$e?e.max-P.value+1:e.min}function Z(Pe){const{x:$e,y:Ee}=j(Pe);return{left:`${Math.round(50+$e*50)}%`,top:`${Math.round(50+Ee*50)}%`}}function ee(Pe,$e){const Ee=$e.x-Pe.x,We=$e.y-Pe.y;return Math.sqrt(Ee*Ee+We*We)}function be(Pe,$e){const Ee=2*Math.atan2($e.y-Pe.y-ee(Pe,$e),$e.x-Pe.x);return Math.abs(Ee*180/Math.PI)}function Ie(Pe){h.value===null&&(h.value=Pe),s.value=Pe,K(Pe)}function Ve(Pe){var le,we;if(Pe.preventDefault(),!l.value&&Pe.type!=="click"||!i.value)return;const{width:$e,top:Ee,left:We}=(le=i.value)==null?void 0:le.getBoundingClientRect(),{width:Ze}=((we=r.value)==null?void 0:we.getBoundingClientRect())??{width:0},{clientX:ct,clientY:kt}="touches"in Pe?Pe.touches[0]:Pe,Nt={x:$e/2,y:-$e/2},ot={x:ct-We,y:Ee-kt},dt=Math.round(be(Nt,ot)-e.rotate+360)%360,Je=e.double&&ee(Nt,ot)<(Ze+Ze*H.value)/4,yt=Math.ceil(15/D.value);let Ne;for(let _e=0;_e<yt;_e++)if(Ne=te(dt+_e*D.value,Je),ie(Ne)||(Ne=te(dt-_e*D.value,Je),ie(Ne)))return Ie(Ne)}function Ke(Pe){e.disabled||(Pe.preventDefault(),window.addEventListener("mousemove",Ve),window.addEventListener("touchmove",Ve),window.addEventListener("mouseup",Xe),window.addEventListener("touchend",Xe),h.value=null,s.value=null,l.value=!0,Ve(Pe))}function Xe(Pe){Pe.stopPropagation(),window.removeEventListener("mousemove",Ve),window.removeEventListener("touchmove",Ve),window.removeEventListener("mouseup",Xe),window.removeEventListener("touchend",Xe),l.value=!1,s.value!==null&&ie(s.value)&&n("change",s.value)}Ut(()=>B("div",{class:Tt([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":e.modelValue==null,"v-time-picker-clock--readonly":e.readonly}]),onMousedown:Ke,onTouchstart:Ke,onWheel:X,ref:i},[B("div",{class:"v-time-picker-clock__inner",ref:r},[B("div",{class:Tt([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":$(e.modelValue)},v.value]),style:Yt([{transform:`rotate(${e.rotate+D.value*(V.value-e.min)}deg) scaleY(${G(V.value)})`},x.value])},null),q.value.map(Pe=>{const $e=Pe===V.value;return B("div",{class:Tt([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":$e,"v-time-picker-clock__item--disabled":e.disabled||!ie(Pe)},$e&&T.value]),style:Yt([Z(Pe),$e&&C.value])},[B("span",null,[e.format(Pe)])])})])]))}}),S0e=ut({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),WI=Lt()({name:"VTimePickerControls",props:S0e(),emits:{"update:period":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=pr();return Ut(()=>{let a=e.hour;return e.ampm&&(a=a?(a-1)%12+1:12),B("div",{class:"v-time-picker-controls"},[B("div",{class:Tt({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":e.useSeconds})},[ue(gi,{active:e.viewMode==="hour",color:e.viewMode==="hour"?e.color:void 0,disabled:e.disabled,variant:"tonal",class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),text:e.hour==null?"--":Sp(`${a}`),onClick:()=>n("update:viewMode","hour")},null),B("span",{class:Tt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}])},[zn(":")]),ue(gi,{active:e.viewMode==="minute",color:e.viewMode==="minute"?e.color:void 0,class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":e.ampm,"v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,variant:"tonal",text:e.minute==null?"--":Sp(e.minute),onClick:()=>n("update:viewMode","minute")},null),e.useSeconds&&B("span",{class:Tt(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":e.useSeconds}]),key:"secondsDivider"},[zn(":")]),e.useSeconds&&ue(gi,{key:"secondsVal",active:e.viewMode==="second",color:e.viewMode==="second"?e.color:void 0,variant:"tonal",onClick:()=>n("update:viewMode","second"),class:Tt({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":e.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":e.useSeconds}),disabled:e.disabled,text:e.second==null?"--":Sp(e.second)},null),e.ampm&&B("div",{class:"v-time-picker-controls__ampm"},[ue(gi,{active:e.period==="am",color:e.period==="am"?e.color:void 0,class:Tt({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="am"}),disabled:e.disabled,text:r("$vuetify.timePicker.am"),variant:e.disabled&&e.period==="am"?"elevated":"tonal",onClick:()=>e.period!=="am"?n("update:period","am"):null},null),ue(gi,{active:e.period==="pm",color:e.period==="pm"?e.color:void 0,class:Tt({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":e.period==="pm"}),disabled:e.disabled,text:r("$vuetify.timePicker.pm"),variant:e.disabled&&e.period==="pm"?"elevated":"tonal",onClick:()=>e.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),E0e=sc(24),Q7=sc(12),C0e=Q7.map(e=>e+12);sc(60);const k0e=ut({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:e=>["am","pm"].includes(e)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...mr(gS({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),I0e=Lt()({name:"VTimePicker",props:k0e(),emits:{"update:hour":e=>!0,"update:minute":e=>!0,"update:period":e=>!0,"update:second":e=>!0,"update:modelValue":e=>!0,"update:viewMode":e=>!0},setup(e,t){let{emit:n,slots:i}=t;const{t:r}=pr(),a=it(null),l=it(null),h=it(null),s=it(null),p=it(null),v=it(null),x=Dn(e,"period","am"),T=Dn(e,"viewMode","hour"),C=it(null),I=it(null),P=me(()=>{let Z;if(e.allowedHours instanceof Array?Z=Ie=>e.allowedHours.includes(Ie):Z=e.allowedHours,!e.min&&!e.max)return Z;const ee=e.min?Number(e.min.split(":")[0]):0,be=e.max?Number(e.max.split(":")[0]):23;return Ie=>Ie>=Number(ee)&&Ie<=Number(be)&&(!Z||Z(Ie))}),D=me(()=>{let Z;const ee=!P.value||a.value===null||P.value(a.value);if(e.allowedMinutes instanceof Array?Z=$e=>e.allowedMinutes.includes($e):Z=e.allowedMinutes,!e.min&&!e.max)return ee?Z:()=>!1;const[be,Ie]=e.min?e.min.split(":").map(Number):[0,0],[Ve,Ke]=e.max?e.max.split(":").map(Number):[23,59],Xe=be*60+Number(Ie),Pe=Ve*60+Number(Ke);return $e=>{const Ee=60*a.value+$e;return Ee>=Xe&&Ee<=Pe&&ee&&(!Z||Z($e))}}),F=me(()=>{let Z;const be=(!P.value||a.value===null||P.value(a.value))&&(!D.value||l.value===null||D.value(l.value));if(e.allowedSeconds instanceof Array?Z=Ze=>e.allowedSeconds.includes(Ze):Z=e.allowedSeconds,!e.min&&!e.max)return be?Z:()=>!1;const[Ie,Ve,Ke]=e.min?e.min.split(":").map(Number):[0,0,0],[Xe,Pe,$e]=e.max?e.max.split(":").map(Number):[23,59,59],Ee=Ie*3600+Ve*60+Number(Ke||0),We=Xe*3600+Pe*60+Number($e||0);return Ze=>{const ct=3600*a.value+60*l.value+Ze;return ct>=Ee&&ct<=We&&be&&(!Z||Z(Ze))}}),V=me(()=>e.format==="ampm");Zt(()=>e.period,Z=>G(Z)),Zt(()=>e.modelValue,Z=>X(Z)),Dr(()=>{X(e.modelValue)});function H(){return a.value!=null&&l.value!=null&&(!e.useSeconds||h.value!=null)?`${Sp(a.value)}:${Sp(l.value)}`+(e.useSeconds?`:${Sp(h.value)}`:""):null}function q(){const Z=H();Z!==null&&n("update:modelValue",Z)}function K(Z){return Z?(Z-1)%12+1:12}function ie(Z,ee){return Z%12+(ee==="pm"?12:0)}function X(Z){if(Z==null||Z==="")a.value=null,l.value=null,h.value=null;else if(Z instanceof Date)a.value=Z.getHours(),l.value=Z.getMinutes(),h.value=Z.getSeconds();else{const[ee,,be,,Ie,Ve]=Z.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);a.value=Ve?ie(parseInt(ee,10),Ve):parseInt(ee,10),l.value=parseInt(be,10),h.value=parseInt(Ie||0,10)}x.value=a.value==null||a.value<12?"am":"pm"}function $(Z,ee){const be=P.value;if(!be)return ee;const Ie=V.value?ee<12?Q7:C0e:E0e;return((Ie.find(Ke=>be((Ke+ee)%Ie.length+Ie[0]))||0)+ee)%Ie.length+Ie[0]}function G(Z){if(x.value=Z,a.value!=null){const ee=a.value+(x.value==="am"?-12:12);a.value=$("hour",ee)}return n("update:period",Z),q(),!0}function j(Z){T.value==="hour"?a.value=V.value?ie(Z,x.value):Z:T.value==="minute"?l.value=Z:h.value=Z}function te(Z){switch(T.value||"hour"){case"hour":n("update:hour",Z);break;case"minute":n("update:minute",Z);break;case"second":n("update:second",Z);break}const ee=a.value!==null&&l.value!==null&&(e.useSeconds?h.value!==null:!0);T.value==="hour"?T.value="minute":e.useSeconds&&T.value==="minute"&&(T.value="second"),!(a.value===s.value&&l.value===p.value&&(!e.useSeconds||h.value===v.value)||H()===null)&&(s.value=a.value,p.value=l.value,e.useSeconds&&(v.value=h.value),ee&&q())}Ut(()=>{const Z=g_.filterProps(e),ee=WI.filterProps(e),be=jI.filterProps(mr(e,["format","modelValue","min","max"]));return ue(g_,Dt(Z,{color:void 0,class:["v-time-picker",e.class],style:e.style}),{title:()=>{var Ie;return((Ie=i.title)==null?void 0:Ie.call(i))??B("div",{class:"v-time-picker__title"},[r(e.title)])},header:()=>ue(WI,Dt(ee,{ampm:V.value,hour:a.value,minute:l.value,period:x.value,second:h.value,viewMode:T.value,"onUpdate:period":Ie=>G(Ie),"onUpdate:viewMode":Ie=>T.value=Ie,ref:C}),null),default:()=>ue(jI,Dt(be,{allowedValues:T.value==="hour"?P.value:T.value==="minute"?D.value:F.value,double:T.value==="hour"&&!V.value,format:T.value==="hour"?V.value?K:Ie=>Ie:Ie=>Sp(Ie,2),max:T.value==="hour"?V.value&&x.value==="am"?11:23:59,min:T.value==="hour"&&V.value&&x.value==="pm"?12:0,size:20,step:T.value==="hour"?1:5,modelValue:T.value==="hour"?a.value:T.value==="minute"?l.value:h.value,onChange:te,onInput:j,ref:I}),null),actions:i.actions})})}}),A0e=ut({...Tn(),...$c({variant:"text"})},"VToolbarItems"),P0e=Lt()({name:"VToolbarItems",props:A0e(),setup(e,t){let{slots:n}=t;return ns({VBtn:{color:He(()=>e.color),height:"inherit",variant:He(()=>e.variant)}}),Ut(()=>{var i;return B("div",{class:Tt(["v-toolbar-items",e.class]),style:Yt(e.style)},[(i=n.default)==null?void 0:i.call(n)])}),{}}}),M0e=ut({id:String,interactive:Boolean,text:String,...mr(Xb({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),e$=Lt()({name:"VTooltip",props:M0e(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=Dn(e,"modelValue"),{scopeId:r}=vg(),a=fa(),l=He(()=>e.id||`v-tooltip-${a}`),h=it(),s=me(()=>e.location.split(" ").length>1?e.location:e.location+" center"),p=me(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),v=He(()=>e.transition!=null?e.transition:i.value?"scale-transition":"fade-transition"),x=me(()=>Dt({"aria-describedby":l.value},e.activatorProps));return Ut(()=>{const T=fd.filterProps(e);return ue(fd,Dt({ref:h,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:l.value},T,{modelValue:i.value,"onUpdate:modelValue":C=>i.value=C,transition:v.value,absolute:!0,location:s.value,origin:p.value,persistent:!0,role:"tooltip",activatorProps:x.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){var D;for(var C=arguments.length,I=new Array(C),P=0;P<C;P++)I[P]=arguments[P];return((D=n.default)==null?void 0:D.call(n,...I))??e.text}})}),So({},h)}}),D0e=ut({...mr(i8({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand"}),["subgroup"])},"VTreeviewGroup"),HI=Lt()({name:"VTreeviewGroup",props:D0e(),setup(e,t){let{slots:n}=t;const i=it(),r=me(()=>{var l;return(l=i.value)!=null&&l.isOpen?e.collapseIcon:e.expandIcon}),a=me(()=>({VTreeviewItem:{prependIcon:void 0,appendIcon:void 0,toggleIcon:r.value}}));return Ut(()=>{const l=ab.filterProps(e);return ue(ab,Dt(l,{ref:i,class:["v-treeview-group",e.class],subgroup:!0}),{...n,activator:n.activator?h=>B(ln,null,[ue(di,{defaults:a.value},{default:()=>{var s;return[(s=n.activator)==null?void 0:s.call(n,h)]}})]):void 0})}),{}}}),t$=Symbol.for("vuetify:v-treeview"),n$=ut({loading:Boolean,hideActions:Boolean,hasCustomPrepend:Boolean,indentLines:Array,toggleIcon:Pn,...o8({slim:!0})},"VTreeviewItem"),GI=Lt()({name:"VTreeviewItem",props:n$(),emits:{toggleExpand:e=>!0},setup(e,t){let{slots:n,emit:i}=t;const r=ki(t$,{visibleIds:it()}).visibleIds,a=it(),l=me(()=>{var T,C;return((T=a.value)==null?void 0:T.root.activatable.value)&&((C=a.value)==null?void 0:C.isGroupActivator)}),h=me(()=>{var T,C;return((T=a.value)==null?void 0:T.link.isClickable.value)||e.value!=null&&!!((C=a.value)!=null&&C.list)}),s=me(()=>!e.disabled&&e.link!==!1&&(e.link||h.value||l.value)),p=me(()=>{var T;return r.value&&!r.value.has(jn((T=a.value)==null?void 0:T.id))});function v(T){var C,I;s.value&&l.value&&((I=a.value)==null||I.activate(!((C=a.value)!=null&&C.isActivated),T))}function x(T){T.preventDefault(),T.stopPropagation(),i("toggleExpand",T)}return Ut(()=>{var I;const T=yu.filterProps(e),C=n.prepend||e.toggleIcon||e.indentLines||e.prependIcon||e.prependAvatar;return ue(yu,Dt({ref:a},T,{active:((I=a.value)==null?void 0:I.isActivated)||void 0,class:["v-treeview-item",{"v-treeview-item--activatable-group-activator":l.value,"v-treeview-item--filtered":p.value},e.class],ripple:!1,onClick:v}),{...n,prepend:C?P=>{var D;return B(ln,null,[e.indentLines&&e.indentLines.length>0?B("div",{key:"indent-lines",class:"v-treeview-indent-lines",style:{"--v-indent-parts":e.indentLines.length}},[e.indentLines.map(F=>B("div",{class:Tt(`v-treeview-indent-line v-treeview-indent-line--${F}`)},null))]):"",!e.hideActions&&ue(KP,{start:!0},{default:()=>[e.toggleIcon?B(ln,null,[n.toggle?ue(di,{key:"prepend-defaults",defaults:{VBtn:{density:"compact",icon:e.toggleIcon,variant:"text",loading:e.loading},VProgressCircular:{indeterminate:"disable-shrink",size:20,width:2}}},{default:()=>[n.toggle({...P,loading:e.loading,props:{onClick:x}})]}):ue(gi,{key:"prepend-toggle",density:"compact",icon:e.toggleIcon,loading:e.loading,variant:"text",onClick:x},{loader:()=>ue(Yp,{indeterminate:"disable-shrink",size:"20",width:"2"},null)})]):B("div",{class:"v-treeview-item__level"},null)]}),e.hasCustomPrepend?ue(di,{key:"prepend-defaults",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{start:!0}}},{default:()=>{var F;return[(F=n.prepend)==null?void 0:F.call(n,P)]}}):B(ln,null,[(D=n.prepend)==null?void 0:D.call(n,P),e.prependAvatar&&ue(dc,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&ue(Di,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])])}:void 0})}),So({},a)}}),i$=ut({fluid:Boolean,disabled:Boolean,loadChildren:Function,loadingIcon:{type:String,default:"$loading"},items:Array,openOnClick:{type:Boolean,default:void 0},indeterminateIcon:{type:Pn,default:"$checkboxIndeterminate"},falseIcon:Pn,trueIcon:Pn,returnObject:Boolean,activatable:Boolean,selectable:Boolean,selectedColor:String,selectStrategy:[String,Function,Object],index:Number,isLastGroup:Boolean,separateRoots:Boolean,parentIndentLines:Array,indentLinesVariant:String,path:{type:Array,default:()=>[]},...Bl(n$(),["hideActions"]),...Es()},"VTreeviewChildren"),cT=Lt()({name:"VTreeviewChildren",props:i$(),setup(e,t){let{slots:n}=t;const i=oo(new Set),r=it([]),a=me(()=>!e.disabled&&(e.openOnClick!=null?e.openOnClick:e.selectable&&!e.activatable));async function l(s){var p,v;try{if(!((p=e.items)!=null&&p.length)||!e.loadChildren)return;((v=s==null?void 0:s.children)==null?void 0:v.length)===0&&(i.add(s.value),await e.loadChildren(s.raw))}finally{i.delete(s.value)}}function h(s,p){e.selectable&&s(p)}return()=>{var s,p;return((s=n.default)==null?void 0:s.call(n))??((p=e.items)==null?void 0:p.map((v,x,T)=>{var $,G;const{children:C,props:I}=v,P=i.has(v.value),D=!!(($=T.at(x+1))!=null&&$.children),F=((G=e.path)==null?void 0:G.length)??0,V=T.length-1===x,H={index:x,depth:F,isFirst:x===0,isLast:V,path:[...e.path,x],hideAction:e.hideActions},q=vie({depth:F,isLast:V,isLastGroup:e.isLastGroup,leafLinks:!e.hideActions&&!e.fluid,separateRoots:e.separateRoots,parentIndentLines:e.parentIndentLines,variant:e.indentLinesVariant}),K={toggle:n.toggle?j=>{var te;return(te=n.toggle)==null?void 0:te.call(n,{...j,...H,item:v.raw,internalItem:v,loading:P})}:void 0,prepend:j=>{var te;return B(ln,null,[e.selectable&&(!C||C&&!["leaf","single-leaf"].includes(e.selectStrategy))&&ue(KP,{start:!0},{default:()=>[ue(hd,{key:v.value,modelValue:j.isSelected,disabled:e.disabled,loading:P,color:e.selectedColor,density:e.density,indeterminate:j.isIndeterminate,indeterminateIcon:e.indeterminateIcon,falseIcon:e.falseIcon,trueIcon:e.trueIcon,"onUpdate:modelValue":Z=>h(j.select,Z),onClick:Z=>Z.stopPropagation(),onKeydown:Z=>{["Enter","Space"].includes(Z.key)&&(Z.stopPropagation(),h(j.select,j.isSelected))}},null)]}),(te=n.prepend)==null?void 0:te.call(n,{...j,...H,item:v.raw,internalItem:v})])},append:n.append?j=>{var te;return(te=n.append)==null?void 0:te.call(n,{...j,...H,item:v.raw,internalItem:v})}:void 0,title:n.title?j=>{var te;return(te=n.title)==null?void 0:te.call(n,{...j,item:v.raw,internalItem:v})}:void 0,subtitle:n.subtitle?j=>{var te;return(te=n.subtitle)==null?void 0:te.call(n,{...j,item:v.raw,internalItem:v})}:void 0},ie=HI.filterProps(I),X=cT.filterProps({...e,...H});return C?ue(HI,Dt(ie,{value:e.returnObject?v.raw:ie==null?void 0:ie.value,rawId:ie==null?void 0:ie.value}),{activator:j=>{let{props:te}=j;const Z={...I,...te,value:I==null?void 0:I.value,indentLines:q.node,onToggleExpand:[()=>l(v),te.onClick],onClick:a.value?[()=>l(v),te.onClick]:()=>{var ee,be;return h((ee=r.value[x])==null?void 0:ee.select,!((be=r.value[x])!=null&&be.isSelected))}};return e1(n.header,{props:Z,item:v.raw,internalItem:v,loading:P},()=>ue(GI,Dt({ref:ee=>r.value[x]=ee},Z,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,value:e.returnObject?v.raw:I.value,loading:P}),K))},default:()=>ue(cT,Dt(X,{items:C,indentLinesVariant:e.indentLinesVariant,parentIndentLines:q.children,isLastGroup:D,returnObject:e.returnObject}),n)}):e1(n.item,{props:I,item:v.raw,internalItem:v},()=>v.type==="divider"?e1(n.divider,{props:v.raw},()=>ue(ac,v.props,null)):v.type==="subheader"?e1(n.subheader,{props:v.raw},()=>ue(D_,v.props,null)):ue(GI,Dt(I,{hasCustomPrepend:!!n.prepend,hideActions:e.hideActions,indentLines:q.leaf,value:e.returnObject?jn(v.raw):I.value}),K))}))}}});function r$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];for(const n of e)t.push(n),n.children&&r$(n.children,t);return t}const L0e=ut({openAll:Boolean,indentLines:[Boolean,String],search:String,...L_({filterKeys:["title"]}),...mr(i$(),["index","path","indentLinesVariant","parentIndentLines","isLastGroup"]),...mr(h8({collapseIcon:"$treeviewCollapse",expandIcon:"$treeviewExpand",slim:!0}),["nav","openStrategy"]),modelValue:Array},"VTreeview"),R0e=Lt()({name:"VTreeview",props:L0e(),emits:{"update:opened":e=>!0,"update:activated":e=>!0,"update:selected":e=>!0,"update:modelValue":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:n,emit:i}=t;const{items:r}=d8(e),a=He(()=>e.activeColor),l=He(()=>e.baseColor),h=He(()=>e.color),s=Dn(e,"activated"),p=Dn(e,"selected"),v=me({get:()=>e.modelValue??p.value,set(H){p.value=H,i("update:modelValue",H)}}),x=it(),T=me(()=>e.openAll?V(r.value):e.opened),C=me(()=>r$(r.value)),I=He(()=>e.search),{filteredItems:P}=R_(e,C,I),D=me(()=>{var q;if(!I.value)return null;const H=(q=x.value)==null?void 0:q.getPath;return H?new Set(P.value.flatMap(K=>{const ie=e.returnObject?K.raw:K.props.value;return[...H(ie),...F(ie)].map(jn)})):null});function F(H){var ie,X;const q=[],K=(((ie=x.value)==null?void 0:ie.children.get(H))??[]).slice();for(;K.length;){const $=K.shift();$&&(q.push($),K.push(...(((X=x.value)==null?void 0:X.children.get($))??[]).slice()))}return q}function V(H){let q=[];for(const K of H)K.children&&(q.push(e.returnObject?jn(K.raw):K.value),K.children&&(q=q.concat(V(K.children))));return q}return Or(t$,{visibleIds:D}),ns({VTreeviewGroup:{activeColor:a,baseColor:l,color:h,collapseIcon:He(()=>e.collapseIcon),expandIcon:He(()=>e.expandIcon)},VTreeviewItem:{activeClass:He(()=>e.activeClass),activeColor:a,baseColor:l,color:h,density:He(()=>e.density),disabled:He(()=>e.disabled),lines:He(()=>e.lines),variant:He(()=>e.variant)}}),Ut(()=>{const H=d_.filterProps(e),q=cT.filterProps(e),K=typeof e.indentLines=="boolean"?"default":e.indentLines;return ue(d_,Dt({ref:x},H,{class:["v-treeview",{"v-treeview--fluid":e.fluid},e.class],openStrategy:"multiple",style:e.style,opened:T.value,activated:s.value,"onUpdate:activated":ie=>s.value=ie,selected:v.value,"onUpdate:selected":ie=>v.value=ie}),{default:()=>[ue(cT,Dt(q,{density:e.density,returnObject:e.returnObject,items:r.value,parentIndentLines:e.indentLines?[]:void 0,indentLinesVariant:K}),n)]})}),{}}}),O0e=Lt()({name:"VValidation",props:W2(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const i=H2(e,"validation");return()=>{var r;return(r=n.default)==null?void 0:r.call(n,i)}}}),V0e=Object.freeze(Object.defineProperty({__proto__:null,VAlert:D2,VAlertTitle:x2,VApp:Cge,VAppBar:Mge,VAppBarNavIcon:Lge,VAppBarTitle:Rge,VAutocomplete:hI,VAvatar:dc,VBadge:Vge,VBanner:zge,VBannerActions:K9,VBannerText:X9,VBottomNavigation:$ge,VBottomSheet:jge,VBreadcrumbs:qge,VBreadcrumbsDivider:Z9,VBreadcrumbsItem:J9,VBtn:gi,VBtnGroup:iI,VBtnToggle:ese,VCard:Cv,VCardActions:k8,VCardItem:P8,VCardSubtitle:I8,VCardText:M8,VCardTitle:A8,VCarousel:nve,VCarouselItem:rve,VCheckbox:Hse,VCheckboxBtn:hd,VChip:Ls,VChipGroup:Yse,VClassIcon:VP,VCode:sve,VCol:cae,VColorPicker:jve,VCombobox:Hve,VComponentIcon:nI,VConfirmEdit:qve,VContainer:D8,VCounter:sS,VDataIterator:r_e,VDataTable:__e,VDataTableFooter:vb,VDataTableHeaders:tg,VDataTableRow:LM,VDataTableRows:ng,VDataTableServer:w_e,VDataTableVirtual:b_e,VDatePicker:k_e,VDatePickerControls:VI,VDatePickerHeader:BI,VDatePickerMonth:FI,VDatePickerMonths:zI,VDatePickerYears:NI,VDefaultsProvider:di,VDialog:MI,VDialogBottomTransition:Pse,VDialogTopTransition:Mse,VDialogTransition:iS,VDivider:ac,VEmptyState:A_e,VExpandTransition:rS,VExpandXTransition:UP,VExpansionPanel:P_e,VExpansionPanelText:$I,VExpansionPanelTitle:UI,VExpansionPanels:L_e,VFab:O_e,VFabTransition:Ase,VFadeTransition:nb,VField:cm,VFieldLabel:Ky,VFileInput:$_e,VFooter:j_e,VForm:H_e,VHover:q_e,VIcon:Di,VImg:Eh,VInfiniteScroll:X_e,VInput:ha,VItem:J_e,VItemGroup:Z_e,VKbd:eye,VLabel:P_,VLayout:nye,VLayoutItem:rye,VLazy:oye,VLigatureIcon:bre,VList:d_,VListGroup:ab,VListImg:goe,VListItem:yu,VListItemAction:KP,VListItemMedia:yoe,VListItemSubtitle:r8,VListItemTitle:s8,VListSubheader:D_,VLocaleProvider:lye,VMain:uye,VMenu:h_,VMessages:U2,VNavigationDrawer:yye,VNoSsr:bye,VNumberInput:Eye,VOtpInput:kye,VOverlay:fd,VPagination:RI,VParallax:Pye,VProgressCircular:Yp,VProgressLinear:jb,VRadio:Dye,VRadioGroup:Rye,VRangeSlider:Vye,VRating:Fye,VResponsive:oI,VRow:gae,VScaleTransition:$P,VScrollXReverseTransition:Lse,VScrollXTransition:Dse,VScrollYReverseTransition:Ose,VScrollYTransition:Rse,VSelect:$v,VSelectionControl:lm,VSelectionControlGroup:B2,VSheet:rd,VSkeletonLoader:Uye,VSlideGroup:sb,VSlideGroupItem:jye,VSlideXReverseTransition:Bse,VSlideXTransition:Vse,VSlideYReverseTransition:Fse,VSlideYTransition:ib,VSlider:gb,VSnackbar:Qw,VSnackbarQueue:Hye,VSpacer:j8,VSparkline:Xye,VSpeedDial:Zye,VStepper:r0e,VStepperActions:j7,VStepperHeader:W7,VStepperItem:H7,VStepperWindow:G7,VStepperWindowItem:q7,VSvgIcon:OP,VSwitch:o0e,VSystemBar:l0e,VTab:X7,VTable:ig,VTabs:f0e,VTabsWindow:Y7,VTabsWindowItem:Z7,VTextField:Ch,VTextarea:p0e,VThemeProvider:v0e,VTimePicker:I0e,VTimePickerClock:jI,VTimePickerControls:WI,VTimeline:w0e,VTimelineItem:b0e,VToolbar:PI,VToolbarItems:P0e,VToolbarTitle:TM,VTooltip:e$,VTreeview:R0e,VTreeviewGroup:HI,VTreeviewItem:GI,VValidation:O0e,VVirtualScroll:oS,VWindow:Qp,VWindowItem:eg},Symbol.toStringTag,{value:"Module"}));function B0e(e,t){const n=t.modifiers||{},i=t.value,{once:r,immediate:a,...l}=n,h=!Object.keys(l).length,{handler:s,options:p}=typeof i=="object"?i:{handler:i,options:{attributes:(l==null?void 0:l.attr)??h,characterData:(l==null?void 0:l.char)??h,childList:(l==null?void 0:l.child)??h,subtree:(l==null?void 0:l.sub)??h}},v=new MutationObserver(function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0;s==null||s(x,T),r&&s$(e,t)});a&&(s==null||s([],v)),e._mutate=Object(e._mutate),e._mutate[t.instance.$.uid]={observer:v},v.observe(e,p)}function s$(e,t){var n;(n=e._mutate)!=null&&n[t.instance.$.uid]&&(e._mutate[t.instance.$.uid].observer.disconnect(),delete e._mutate[t.instance.$.uid])}const F0e={mounted:B0e,unmounted:s$};function z0e(e,t){var r,a;const n=t.value,i={passive:!((r=t.modifiers)!=null&&r.active)};window.addEventListener("resize",n,i),e._onResize=Object(e._onResize),e._onResize[t.instance.$.uid]={handler:n,options:i},(a=t.modifiers)!=null&&a.quiet||n()}function N0e(e,t){var r;if(!((r=e._onResize)!=null&&r[t.instance.$.uid]))return;const{handler:n,options:i}=e._onResize[t.instance.$.uid];window.removeEventListener("resize",n,i),delete e._onResize[t.instance.$.uid]}const $0e={mounted:z0e,unmounted:N0e};function o$(e,t){const{self:n=!1}=t.modifiers??{},i=t.value,r=typeof i=="object"&&i.options||{passive:!0},a=typeof i=="function"||"handleEvent"in i?i:i.handler,l=n?e:t.arg?document.querySelector(t.arg):window;l&&(l.addEventListener("scroll",a,r),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:a,options:r,target:n?void 0:l})}function a$(e,t){var a;if(!((a=e._onScroll)!=null&&a[t.instance.$.uid]))return;const{handler:n,options:i,target:r=e}=e._onScroll[t.instance.$.uid];r.removeEventListener("scroll",n,i),delete e._onScroll[t.instance.$.uid]}function U0e(e,t){t.value!==t.oldValue&&(a$(e,t),o$(e,t))}const j0e={mounted:o$,unmounted:a$,updated:U0e};function W0e(e,t){const n=typeof e=="string"?$W(e):e,i=H0e(n,t);return{mounted:i,updated:i,unmounted(r){i6(null,r)}}}function H0e(e,t){return function(n,i,r){var x,T,C;const a=typeof t=="function"?t(i):t,l=((x=i.value)==null?void 0:x.text)??i.value??(a==null?void 0:a.text),h=K0(i.value)?i.value:{},s=()=>l??n.textContent,p=(r.ctx===i.instance.$?(T=G0e(r,i.instance.$))==null?void 0:T.provides:(C=r.ctx)==null?void 0:C.provides)??i.instance.$.provides,v=Ih(e,Dt(a,h),s);v.appContext=Object.assign(Object.create(null),i.instance.$.appContext,{provides:p}),i6(v,n)}}function G0e(e,t){const n=new Set,i=a=>{var l,h;for(const s of a){if(!s)continue;if(s===e||s.el&&e.el&&s.el===e.el)return!0;n.add(s);let p;if(s.suspense?p=i([s.ssContent]):Array.isArray(s.children)?p=i(s.children):(l=s.component)!=null&&l.vnode&&(p=i([(h=s.component)==null?void 0:h.subTree])),p)return p;n.delete(s)}return!1};if(!i([t.subTree]))return t;const r=Array.from(n).reverse();for(const a of r)if(a.component)return a.component;return t}const q0e=W0e(e$,e=>{var t;return{activator:"parent",location:(t=e.arg)==null?void 0:t.replace("-"," "),text:typeof e.value=="boolean"?void 0:e.value}}),K0e=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:dI,Intersect:_u,Mutate:F0e,Resize:$0e,Ripple:Ga,Scroll:j0e,Tooltip:q0e,Touch:lT},Symbol.toStringTag,{value:"Module"})),X0e=_2({components:V0e,directives:K0e,theme:{defaultTheme:"light",themes:{light:{dark:!1,colors:{primary:"#f97316"}},dark:{dark:!0,colors:{primary:"#f97316"}}}}});sG(wge).use(X0e).mount("#app");
